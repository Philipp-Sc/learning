/*! For license information please see 6.516445c6.chunk.js.LICENSE.txt */
(this.webpackJsonpLearning=this.webpackJsonpLearning||[]).push([[6],[function(e,t,n){"use strict";n.r(t),n.d(t,"AdadeltaOptimizer",(function(){return xt})),n.d(t,"AdagradOptimizer",(function(){return kt})),n.d(t,"AdamOptimizer",(function(){return St})),n.d(t,"AdamaxOptimizer",(function(){return At})),n.d(t,"MomentumOptimizer",(function(){return Nt})),n.d(t,"Optimizer",(function(){return wt})),n.d(t,"RMSPropOptimizer",(function(){return It})),n.d(t,"SGDOptimizer",(function(){return Tt})),n.d(t,"Tensor",(function(){return fe.a})),n.d(t,"TensorBuffer",(function(){return fe.b})),n.d(t,"Variable",(function(){return fe.c})),n.d(t,"Rank",(function(){return Dt.a})),n.d(t,"sumOutType",(function(){return Dt.b})),n.d(t,"upcastType",(function(){return Dt.c})),n.d(t,"abs",(function(){return Rt.b})),n.d(t,"acos",(function(){return Rt.c})),n.d(t,"acosh",(function(){return Rt.d})),n.d(t,"add",(function(){return Rt.e})),n.d(t,"addN",(function(){return Rt.f})),n.d(t,"all",(function(){return Rt.g})),n.d(t,"any",(function(){return Rt.h})),n.d(t,"argMax",(function(){return Rt.i})),n.d(t,"argMin",(function(){return Rt.j})),n.d(t,"asin",(function(){return Rt.k})),n.d(t,"asinh",(function(){return Rt.l})),n.d(t,"atan",(function(){return Rt.m})),n.d(t,"atan2",(function(){return Rt.n})),n.d(t,"atanh",(function(){return Rt.o})),n.d(t,"avgPool",(function(){return Rt.p})),n.d(t,"avgPool3d",(function(){return Rt.q})),n.d(t,"basicLSTMCell",(function(){return Rt.r})),n.d(t,"batchToSpaceND",(function(){return Rt.w})),n.d(t,"batchNorm",(function(){return Rt.s})),n.d(t,"batchNorm2d",(function(){return Rt.t})),n.d(t,"batchNorm3d",(function(){return Rt.u})),n.d(t,"batchNorm4d",(function(){return Rt.v})),n.d(t,"bincount",(function(){return Rt.x})),n.d(t,"broadcastArgs",(function(){return Rt.z})),n.d(t,"broadcastTo",(function(){return Rt.A})),n.d(t,"buffer",(function(){return Rt.B})),n.d(t,"cast",(function(){return Rt.C})),n.d(t,"ceil",(function(){return Rt.D})),n.d(t,"clipByValue",(function(){return Rt.E})),n.d(t,"clone",(function(){return Rt.F})),n.d(t,"complex",(function(){return Rt.G})),n.d(t,"concat",(function(){return Rt.H})),n.d(t,"concat1d",(function(){return Rt.I})),n.d(t,"concat2d",(function(){return Rt.J})),n.d(t,"concat3d",(function(){return Rt.K})),n.d(t,"concat4d",(function(){return Rt.L})),n.d(t,"conv1d",(function(){return Rt.M})),n.d(t,"conv2d",(function(){return Rt.N})),n.d(t,"conv2dTranspose",(function(){return Rt.O})),n.d(t,"conv3d",(function(){return Rt.P})),n.d(t,"conv3dTranspose",(function(){return Rt.Q})),n.d(t,"cos",(function(){return Rt.R})),n.d(t,"cosh",(function(){return Rt.S})),n.d(t,"cumsum",(function(){return Rt.U})),n.d(t,"denseBincount",(function(){return Rt.V})),n.d(t,"depthToSpace",(function(){return Rt.W})),n.d(t,"depthwiseConv2d",(function(){return Rt.X})),n.d(t,"diag",(function(){return Rt.Y})),n.d(t,"dilation2d",(function(){return Rt.Z})),n.d(t,"div",(function(){return Rt.ab})),n.d(t,"divNoNan",(function(){return Rt.bb})),n.d(t,"dot",(function(){return Rt.cb})),n.d(t,"einsum",(function(){return Rt.eb})),n.d(t,"elu",(function(){return Rt.fb})),n.d(t,"equal",(function(){return Rt.hb})),n.d(t,"erf",(function(){return Rt.ib})),n.d(t,"exp",(function(){return Rt.jb})),n.d(t,"expandDims",(function(){return Rt.kb})),n.d(t,"expm1",(function(){return Rt.lb})),n.d(t,"eye",(function(){return Rt.mb})),n.d(t,"fill",(function(){return Rt.ob})),n.d(t,"floor",(function(){return Rt.pb})),n.d(t,"floorDiv",(function(){return Rt.qb})),n.d(t,"gather",(function(){return Rt.sb})),n.d(t,"greater",(function(){return Rt.ub})),n.d(t,"greaterEqual",(function(){return Rt.vb})),n.d(t,"imag",(function(){return Rt.xb})),n.d(t,"isFinite",(function(){return Rt.Bb})),n.d(t,"isInf",(function(){return Rt.Cb})),n.d(t,"isNaN",(function(){return Rt.Db})),n.d(t,"leakyRelu",(function(){return Rt.Eb})),n.d(t,"less",(function(){return Rt.Fb})),n.d(t,"lessEqual",(function(){return Rt.Gb})),n.d(t,"linspace",(function(){return Rt.Ib})),n.d(t,"localResponseNormalization",(function(){return Rt.Jb})),n.d(t,"log",(function(){return Rt.Kb})),n.d(t,"log1p",(function(){return Rt.Lb})),n.d(t,"logSigmoid",(function(){return Rt.Mb})),n.d(t,"logSoftmax",(function(){return Rt.Nb})),n.d(t,"logSumExp",(function(){return Rt.Ob})),n.d(t,"logicalAnd",(function(){return Rt.Pb})),n.d(t,"logicalNot",(function(){return Rt.Qb})),n.d(t,"logicalOr",(function(){return Rt.Rb})),n.d(t,"logicalXor",(function(){return Rt.Sb})),n.d(t,"matMul",(function(){return Rt.Ub})),n.d(t,"max",(function(){return Rt.Vb})),n.d(t,"maxPool",(function(){return Rt.Wb})),n.d(t,"maxPool3d",(function(){return Rt.Xb})),n.d(t,"maxPoolWithArgmax",(function(){return Rt.Yb})),n.d(t,"maximum",(function(){return Rt.Zb})),n.d(t,"mean",(function(){return Rt.ac})),n.d(t,"meshgrid",(function(){return Rt.bc})),n.d(t,"min",(function(){return Rt.cc})),n.d(t,"minimum",(function(){return Rt.dc})),n.d(t,"mirrorPad",(function(){return Rt.ec})),n.d(t,"mod",(function(){return Rt.fc})),n.d(t,"moments",(function(){return Rt.gc})),n.d(t,"mul",(function(){return Rt.ic})),n.d(t,"multiRNNCell",(function(){return Rt.jc})),n.d(t,"multinomial",(function(){return Rt.kc})),n.d(t,"neg",(function(){return Rt.lc})),n.d(t,"notEqual",(function(){return Rt.nc})),n.d(t,"oneHot",(function(){return Rt.oc})),n.d(t,"ones",(function(){return Rt.pc})),n.d(t,"onesLike",(function(){return Rt.qc})),n.d(t,"outerProduct",(function(){return Rt.sc})),n.d(t,"pad",(function(){return Rt.tc})),n.d(t,"pad1d",(function(){return Rt.uc})),n.d(t,"pad2d",(function(){return Rt.vc})),n.d(t,"pad3d",(function(){return Rt.wc})),n.d(t,"pad4d",(function(){return Rt.xc})),n.d(t,"pool",(function(){return Rt.yc})),n.d(t,"pow",(function(){return Rt.zc})),n.d(t,"prelu",(function(){return Rt.Ac})),n.d(t,"print",(function(){return Rt.Bc})),n.d(t,"prod",(function(){return Rt.Cc})),n.d(t,"rand",(function(){return Rt.Dc})),n.d(t,"randomGamma",(function(){return Rt.Ec})),n.d(t,"randomNormal",(function(){return Rt.Fc})),n.d(t,"randomUniform",(function(){return Rt.Gc})),n.d(t,"range",(function(){return Rt.Hc})),n.d(t,"real",(function(){return Rt.Ic})),n.d(t,"reciprocal",(function(){return Rt.Jc})),n.d(t,"relu",(function(){return Rt.Kc})),n.d(t,"relu6",(function(){return Rt.Lc})),n.d(t,"reshape",(function(){return Rt.Mc})),n.d(t,"reverse",(function(){return Rt.Nc})),n.d(t,"reverse1d",(function(){return Rt.Oc})),n.d(t,"reverse2d",(function(){return Rt.Pc})),n.d(t,"reverse3d",(function(){return Rt.Qc})),n.d(t,"reverse4d",(function(){return Rt.Rc})),n.d(t,"round",(function(){return Rt.Tc})),n.d(t,"rsqrt",(function(){return Rt.Uc})),n.d(t,"scalar",(function(){return Rt.Vc})),n.d(t,"selu",(function(){return Rt.Xc})),n.d(t,"separableConv2d",(function(){return Rt.Yc})),n.d(t,"setdiff1dAsync",(function(){return Rt.Zc})),n.d(t,"sigmoid",(function(){return Rt.ad})),n.d(t,"sign",(function(){return Rt.bd})),n.d(t,"sin",(function(){return Rt.dd})),n.d(t,"sinh",(function(){return Rt.ed})),n.d(t,"slice",(function(){return Rt.fd})),n.d(t,"slice1d",(function(){return Rt.gd})),n.d(t,"slice2d",(function(){return Rt.hd})),n.d(t,"slice3d",(function(){return Rt.id})),n.d(t,"slice4d",(function(){return Rt.jd})),n.d(t,"softmax",(function(){return Rt.kd})),n.d(t,"softplus",(function(){return Rt.ld})),n.d(t,"spaceToBatchND",(function(){return Rt.md})),n.d(t,"fft",(function(){return Rt.nb})),n.d(t,"ifft",(function(){return Rt.wb})),n.d(t,"irfft",(function(){return Rt.Ab})),n.d(t,"rfft",(function(){return Rt.Sc})),n.d(t,"split",(function(){return Rt.qd})),n.d(t,"sqrt",(function(){return Rt.rd})),n.d(t,"square",(function(){return Rt.sd})),n.d(t,"squaredDifference",(function(){return Rt.td})),n.d(t,"squeeze",(function(){return Rt.ud})),n.d(t,"stack",(function(){return Rt.vd})),n.d(t,"step",(function(){return Rt.wd})),n.d(t,"stridedSlice",(function(){return Rt.xd})),n.d(t,"sub",(function(){return Rt.zd})),n.d(t,"sum",(function(){return Rt.Ad})),n.d(t,"tan",(function(){return Rt.Bd})),n.d(t,"tanh",(function(){return Rt.Cd})),n.d(t,"tensor",(function(){return Rt.Dd})),n.d(t,"tensor1d",(function(){return Rt.Ed})),n.d(t,"tensor2d",(function(){return Rt.Fd})),n.d(t,"tensor3d",(function(){return Rt.Gd})),n.d(t,"tensor4d",(function(){return Rt.Hd})),n.d(t,"tensor5d",(function(){return Rt.Id})),n.d(t,"tensor6d",(function(){return Rt.Jd})),n.d(t,"tile",(function(){return Rt.Kd})),n.d(t,"topk",(function(){return Rt.Ld})),n.d(t,"truncatedNormal",(function(){return Rt.Nd})),n.d(t,"unique",(function(){return Rt.Od})),n.d(t,"unsortedSegmentSum",(function(){return Rt.Pd})),n.d(t,"unstack",(function(){return Rt.Qd})),n.d(t,"variable",(function(){return Rt.Rd})),n.d(t,"where",(function(){return Rt.Sd})),n.d(t,"whereAsync",(function(){return Rt.Td})),n.d(t,"zeros",(function(){return Rt.Ud})),n.d(t,"zerosLike",(function(){return Rt.Vd})),n.d(t,"booleanMaskAsync",(function(){return Rt.y})),n.d(t,"transpose",(function(){return Rt.Md})),n.d(t,"norm",(function(){return Rt.mc})),n.d(t,"movingAverage",(function(){return Rt.hc})),n.d(t,"scatterND",(function(){return Rt.Wc})),n.d(t,"sparseToDense",(function(){return Rt.od})),n.d(t,"gatherND",(function(){return Rt.tb})),n.d(t,"dropout",(function(){return Rt.db})),n.d(t,"enclosingPowerOfTwo",(function(){return Rt.gb})),n.d(t,"cosineWindow",(function(){return Rt.T})),n.d(t,"inTopKAsync",(function(){return Rt.zb})),n.d(t,"op",(function(){return Rt.rc})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return Rt.a})),n.d(t,"image",(function(){return Rt.yb})),n.d(t,"linalg",(function(){return Rt.Hb})),n.d(t,"losses",(function(){return Rt.Tb})),n.d(t,"spectral",(function(){return Rt.pd})),n.d(t,"fused",(function(){return Rt.rb})),n.d(t,"signal",(function(){return Rt.cd})),n.d(t,"sparse",(function(){return Rt.nd})),n.d(t,"string",(function(){return Rt.yd})),n.d(t,"Reduction",(function(){return Ft.a})),n.d(t,"train",(function(){return Pt})),n.d(t,"enableProdMode",(function(){return ft.g})),n.d(t,"enableDebugMode",(function(){return ft.f})),n.d(t,"disableDeprecationWarnings",(function(){return ft.c})),n.d(t,"deprecationWarn",(function(){return ft.b})),n.d(t,"disposeVariables",(function(){return ft.e})),n.d(t,"engine",(function(){return ft.h})),n.d(t,"memory",(function(){return ft.m})),n.d(t,"profile",(function(){return ft.n})),n.d(t,"tidy",(function(){return ft.t})),n.d(t,"dispose",(function(){return ft.d})),n.d(t,"keep",(function(){return ft.l})),n.d(t,"time",(function(){return ft.u})),n.d(t,"setBackend",(function(){return ft.r})),n.d(t,"ready",(function(){return ft.o})),n.d(t,"getBackend",(function(){return ft.k})),n.d(t,"removeBackend",(function(){return ft.q})),n.d(t,"findBackend",(function(){return ft.i})),n.d(t,"findBackendFactory",(function(){return ft.j})),n.d(t,"registerBackend",(function(){return ft.p})),n.d(t,"backend",(function(){return ft.a})),n.d(t,"setPlatform",(function(){return ft.s})),n.d(t,"getKernel",(function(){return qe.c})),n.d(t,"getGradient",(function(){return qe.b})),n.d(t,"getKernelsForBackend",(function(){return qe.d})),n.d(t,"registerKernel",(function(){return qe.f})),n.d(t,"registerGradient",(function(){return qe.e})),n.d(t,"unregisterKernel",(function(){return qe.h})),n.d(t,"unregisterGradient",(function(){return qe.g})),n.d(t,"copyRegisteredKernels",(function(){return qe.a})),n.d(t,"customGrad",(function(){return bt.a})),n.d(t,"grad",(function(){return bt.b})),n.d(t,"grads",(function(){return bt.c})),n.d(t,"valueAndGrad",(function(){return bt.d})),n.d(t,"valueAndGrads",(function(){return bt.e})),n.d(t,"variableGrads",(function(){return bt.f})),n.d(t,"Environment",(function(){return p.b})),n.d(t,"env",(function(){return p.c})),n.d(t,"ENV",(function(){return p.a})),n.d(t,"version_core",(function(){return st})),n.d(t,"nextFrame",(function(){return Lt.a})),n.d(t,"browser",(function(){return i})),n.d(t,"io",(function(){return r})),n.d(t,"math",(function(){return a})),n.d(t,"serialization",(function(){return u})),n.d(t,"test_util",(function(){return ot})),n.d(t,"util",(function(){return ut})),n.d(t,"backend_util",(function(){return c})),n.d(t,"tensor_util",(function(){return it})),n.d(t,"slice_util",(function(){return tt})),n.d(t,"gather_util",(function(){return o})),n.d(t,"scatter_util",(function(){return et})),n.d(t,"device_util",(function(){return Tn})),n.d(t,"kernel_impls",(function(){return l})),n.d(t,"KernelBackend",(function(){return Dn.b})),n.d(t,"DataStorage",(function(){return Dn.a})),n.d(t,"Abs",(function(){return Ve.a})),n.d(t,"Acos",(function(){return Ve.b})),n.d(t,"Acosh",(function(){return Ve.c})),n.d(t,"Add",(function(){return Ve.d})),n.d(t,"AddN",(function(){return Ve.e})),n.d(t,"All",(function(){return Ve.f})),n.d(t,"Any",(function(){return Ve.g})),n.d(t,"ArgMax",(function(){return Ve.h})),n.d(t,"ArgMin",(function(){return Ve.i})),n.d(t,"Asin",(function(){return Ve.j})),n.d(t,"Asinh",(function(){return Ve.k})),n.d(t,"Atan",(function(){return Ve.l})),n.d(t,"Atanh",(function(){return Ve.n})),n.d(t,"Atan2",(function(){return Ve.m})),n.d(t,"AvgPool",(function(){return Ve.o})),n.d(t,"AvgPoolGrad",(function(){return Ve.r})),n.d(t,"AvgPool3D",(function(){return Ve.p})),n.d(t,"AvgPool3DGrad",(function(){return Ve.q})),n.d(t,"BatchMatMul",(function(){return Ve.s})),n.d(t,"BatchToSpaceND",(function(){return Ve.t})),n.d(t,"Bincount",(function(){return Ve.u})),n.d(t,"BroadcastTo",(function(){return Ve.w})),n.d(t,"BroadcastArgs",(function(){return Ve.v})),n.d(t,"Cast",(function(){return Ve.x})),n.d(t,"Ceil",(function(){return Ve.y})),n.d(t,"ClipByValue",(function(){return Ve.z})),n.d(t,"Complex",(function(){return Ve.A})),n.d(t,"ComplexAbs",(function(){return Ve.B})),n.d(t,"Concat",(function(){return Ve.C})),n.d(t,"Conv2D",(function(){return Ve.D})),n.d(t,"Conv2DBackpropFilter",(function(){return Ve.E})),n.d(t,"Conv2DBackpropInput",(function(){return Ve.F})),n.d(t,"Conv3D",(function(){return Ve.G})),n.d(t,"Conv3DBackpropFilterV2",(function(){return Ve.H})),n.d(t,"Conv3DBackpropInputV2",(function(){return Ve.I})),n.d(t,"Cos",(function(){return Ve.J})),n.d(t,"Cosh",(function(){return Ve.K})),n.d(t,"Cumsum",(function(){return Ve.M})),n.d(t,"CropAndResize",(function(){return Ve.L})),n.d(t,"DenseBincount",(function(){return Ve.N})),n.d(t,"DepthToSpace",(function(){return Ve.O})),n.d(t,"DepthwiseConv2dNative",(function(){return Ve.P})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return Ve.Q})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return Ve.R})),n.d(t,"Diag",(function(){return Ve.S})),n.d(t,"Dilation2D",(function(){return Ve.T})),n.d(t,"Dilation2DBackpropInput",(function(){return Ve.V})),n.d(t,"Dilation2DBackpropFilter",(function(){return Ve.U})),n.d(t,"RealDiv",(function(){return Ve.mc})),n.d(t,"Einsum",(function(){return Ve.W})),n.d(t,"Elu",(function(){return Ve.X})),n.d(t,"EluGrad",(function(){return Ve.Y})),n.d(t,"Erf",(function(){return Ve.ab})),n.d(t,"Equal",(function(){return Ve.Z})),n.d(t,"Exp",(function(){return Ve.bb})),n.d(t,"ExpandDims",(function(){return Ve.cb})),n.d(t,"Expm1",(function(){return Ve.db})),n.d(t,"FFT",(function(){return Ve.eb})),n.d(t,"Fill",(function(){return Ve.fb})),n.d(t,"FlipLeftRight",(function(){return Ve.gb})),n.d(t,"Floor",(function(){return Ve.hb})),n.d(t,"FloorDiv",(function(){return Ve.ib})),n.d(t,"FusedBatchNorm",(function(){return Ve.kb})),n.d(t,"GatherV2",(function(){return Ve.ob})),n.d(t,"GatherNd",(function(){return Ve.nb})),n.d(t,"Greater",(function(){return Ve.pb})),n.d(t,"GreaterEqual",(function(){return Ve.qb})),n.d(t,"Identity",(function(){return Ve.sb})),n.d(t,"IFFT",(function(){return Ve.rb})),n.d(t,"Imag",(function(){return Ve.tb})),n.d(t,"IsFinite",(function(){return Ve.ub})),n.d(t,"IsInf",(function(){return Ve.vb})),n.d(t,"IsNan",(function(){return Ve.wb})),n.d(t,"LeakyRelu",(function(){return Ve.zb})),n.d(t,"Less",(function(){return Ve.Ab})),n.d(t,"LessEqual",(function(){return Ve.Bb})),n.d(t,"LinSpace",(function(){return Ve.Cb})),n.d(t,"Log",(function(){return Ve.Db})),n.d(t,"Log1p",(function(){return Ve.Eb})),n.d(t,"LogicalAnd",(function(){return Ve.Gb})),n.d(t,"LogicalNot",(function(){return Ve.Hb})),n.d(t,"LogicalOr",(function(){return Ve.Ib})),n.d(t,"LogSoftmax",(function(){return Ve.Fb})),n.d(t,"LRN",(function(){return Ve.xb})),n.d(t,"LRNGrad",(function(){return Ve.yb})),n.d(t,"Max",(function(){return Ve.Jb})),n.d(t,"Maximum",(function(){return Ve.Pb})),n.d(t,"MaxPool",(function(){return Ve.Kb})),n.d(t,"MaxPoolGrad",(function(){return Ve.Nb})),n.d(t,"MaxPool3D",(function(){return Ve.Lb})),n.d(t,"MaxPool3DGrad",(function(){return Ve.Mb})),n.d(t,"MaxPoolWithArgmax",(function(){return Ve.Ob})),n.d(t,"Mean",(function(){return Ve.Qb})),n.d(t,"Min",(function(){return Ve.Rb})),n.d(t,"Minimum",(function(){return Ve.Sb})),n.d(t,"MirrorPad",(function(){return Ve.Tb})),n.d(t,"Mod",(function(){return Ve.Ub})),n.d(t,"Multinomial",(function(){return Ve.Vb})),n.d(t,"Multiply",(function(){return Ve.Wb})),n.d(t,"Neg",(function(){return Ve.Xb})),n.d(t,"NotEqual",(function(){return Ve.bc})),n.d(t,"NonMaxSuppressionV3",(function(){return Ve.Yb})),n.d(t,"NonMaxSuppressionV4",(function(){return Ve.Zb})),n.d(t,"NonMaxSuppressionV5",(function(){return Ve.ac})),n.d(t,"OnesLike",(function(){return Ve.dc})),n.d(t,"OneHot",(function(){return Ve.cc})),n.d(t,"Pack",(function(){return Ve.ec})),n.d(t,"PadV2",(function(){return Ve.fc})),n.d(t,"Pool",(function(){return Ve.gc})),n.d(t,"Pow",(function(){return Ve.hc})),n.d(t,"Prelu",(function(){return Ve.ic})),n.d(t,"Prod",(function(){return Ve.jc})),n.d(t,"Range",(function(){return Ve.kc})),n.d(t,"Real",(function(){return Ve.lc})),n.d(t,"Reciprocal",(function(){return Ve.nc})),n.d(t,"Relu",(function(){return Ve.oc})),n.d(t,"Reshape",(function(){return Ve.qc})),n.d(t,"ResizeNearestNeighbor",(function(){return Ve.tc})),n.d(t,"ResizeNearestNeighborGrad",(function(){return Ve.uc})),n.d(t,"ResizeBilinear",(function(){return Ve.rc})),n.d(t,"ResizeBilinearGrad",(function(){return Ve.sc})),n.d(t,"Relu6",(function(){return Ve.pc})),n.d(t,"Reverse",(function(){return Ve.vc})),n.d(t,"Round",(function(){return Ve.xc})),n.d(t,"Rsqrt",(function(){return Ve.yc})),n.d(t,"ScatterNd",(function(){return Ve.zc})),n.d(t,"Select",(function(){return Ve.Ac})),n.d(t,"Selu",(function(){return Ve.Bc})),n.d(t,"Slice",(function(){return Ve.Gc})),n.d(t,"Sin",(function(){return Ve.Ec})),n.d(t,"Sinh",(function(){return Ve.Fc})),n.d(t,"Sign",(function(){return Ve.Dc})),n.d(t,"Sigmoid",(function(){return Ve.Cc})),n.d(t,"Softplus",(function(){return Ve.Ic})),n.d(t,"Sqrt",(function(){return Ve.Qc})),n.d(t,"Sum",(function(){return Ve.Zc})),n.d(t,"SpaceToBatchND",(function(){return Ve.Jc})),n.d(t,"SplitV",(function(){return Ve.Pc})),n.d(t,"Softmax",(function(){return Ve.Hc})),n.d(t,"SparseFillEmptyRows",(function(){return Ve.Kc})),n.d(t,"SparseReshape",(function(){return Ve.Lc})),n.d(t,"SparseSegmentMean",(function(){return Ve.Mc})),n.d(t,"SparseSegmentSum",(function(){return Ve.Nc})),n.d(t,"SparseToDense",(function(){return Ve.Oc})),n.d(t,"SquaredDifference",(function(){return Ve.Sc})),n.d(t,"Square",(function(){return Ve.Rc})),n.d(t,"StridedSlice",(function(){return Ve.Uc})),n.d(t,"StringNGrams",(function(){return Ve.Vc})),n.d(t,"StringSplit",(function(){return Ve.Wc})),n.d(t,"StringToHashBucketFast",(function(){return Ve.Xc})),n.d(t,"Sub",(function(){return Ve.Yc})),n.d(t,"Tan",(function(){return Ve.ad})),n.d(t,"Tanh",(function(){return Ve.bd})),n.d(t,"Tile",(function(){return Ve.cd})),n.d(t,"TopK",(function(){return Ve.dd})),n.d(t,"Transform",(function(){return Ve.ed})),n.d(t,"Transpose",(function(){return Ve.fd})),n.d(t,"Unique",(function(){return Ve.gd})),n.d(t,"Unpack",(function(){return Ve.hd})),n.d(t,"UnsortedSegmentSum",(function(){return Ve.id})),n.d(t,"ZerosLike",(function(){return Ve.jd})),n.d(t,"Step",(function(){return Ve.Tc})),n.d(t,"FromPixels",(function(){return Ve.jb})),n.d(t,"RotateWithOffset",(function(){return Ve.wc})),n.d(t,"_FusedMatMul",(function(){return Ve.kd})),n.d(t,"FusedConv2D",(function(){return Ve.lb})),n.d(t,"FusedDepthwiseConv2D",(function(){return Ve.mb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return ne})),n.d(r,"listModels",(function(){return Q})),n.d(r,"moveModel",(function(){return ae})),n.d(r,"removeModel",(function(){return ee})),n.d(r,"browserFiles",(function(){return ge})),n.d(r,"browserHTTPRequest",(function(){return Ne})),n.d(r,"concatenateArrayBuffers",(function(){return y.d})),n.d(r,"decodeWeights",(function(){return y.e})),n.d(r,"encodeWeights",(function(){return y.f})),n.d(r,"fromMemory",(function(){return Re})),n.d(r,"getLoadHandlers",(function(){return j})),n.d(r,"getModelArtifactsForJSON",(function(){return y.g})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return y.h})),n.d(r,"getSaveHandlers",(function(){return k})),n.d(r,"http",(function(){return Te})),n.d(r,"isHTTPScheme",(function(){return Ce})),n.d(r,"loadWeights",(function(){return ke})),n.d(r,"registerLoadRouter",(function(){return O})),n.d(r,"registerSaveRouter",(function(){return x})),n.d(r,"weightsLoaderFactory",(function(){return _e})),n.d(r,"withSaveHandler",(function(){return Fe}));var a={};n.r(a),n.d(a,"confusionMatrix",(function(){return We}));var i={};n.r(i),n.d(i,"fromPixelsAsync",(function(){return Ke})),n.d(i,"toPixels",(function(){return Ye})),n.d(i,"fromPixels",(function(){return Qe}));var o={};n.r(o),n.d(o,"prepareAndValidate",(function(){return Ze}));var u={};n.r(u),n.d(u,"Serializable",(function(){return nt})),n.d(u,"SerializationMap",(function(){return rt})),n.d(u,"registerClass",(function(){return at}));var s={};n.r(s),n.d(s,"segOpComputeOptimalWindowSize",(function(){return _n})),n.d(s,"computeOutShape",(function(){return Sn})),n.d(s,"collectGatherOpShapeInfo",(function(){return En}));var c={};n.r(c),n.d(c,"axesAreInnerMostDims",(function(){return zt.b})),n.d(c,"combineLocations",(function(){return zt.c})),n.d(c,"computeOutAndReduceShapes",(function(){return zt.d})),n.d(c,"expandShapeToKeepDim",(function(){return zt.e})),n.d(c,"assertAxesAreInnerMostDims",(function(){return zt.a})),n.d(c,"getAxesPermutation",(function(){return zt.f})),n.d(c,"getUndoAxesPermutation",(function(){return zt.h})),n.d(c,"getInnerMostAxes",(function(){return zt.g})),n.d(c,"getBroadcastDims",(function(){return Bt.b})),n.d(c,"getReductionAxes",(function(){return Bt.c})),n.d(c,"assertAndGetBroadcastShape",(function(){return Bt.a})),n.d(c,"assertParamsConsistent",(function(){return Ut})),n.d(c,"computeOutShape",(function(){return Wt})),n.d(c,"computeDilation2DInfo",(function(){return Vt.d})),n.d(c,"computePool2DInfo",(function(){return Vt.e})),n.d(c,"computePool3DInfo",(function(){return Vt.f})),n.d(c,"computeConv2DInfo",(function(){return Vt.a})),n.d(c,"computeConv3DInfo",(function(){return Vt.b})),n.d(c,"computeDefaultPad",(function(){return Vt.c})),n.d(c,"tupleValuesAreOne",(function(){return Vt.i})),n.d(c,"eitherStridesOrDilationsAreOne",(function(){return Vt.h})),n.d(c,"convertConv2DDataFormat",(function(){return Vt.g})),n.d(c,"getFusedDyActivation",(function(){return qt.c})),n.d(c,"getFusedBiasGradient",(function(){return qt.b})),n.d(c,"applyActivation",(function(){return qt.a})),n.d(c,"shouldFuse",(function(){return qt.d})),n.d(c,"PARALLELIZE_THRESHOLD",(function(){return $t})),n.d(c,"computeOptimalWindowSize",(function(){return Ht})),n.d(c,"slice_util",(function(){return tt})),n.d(c,"upcastType",(function(){return Dt.c})),n.d(c,"getImageCenter",(function(){return Gt})),n.d(c,"getReshaped",(function(){return Kt})),n.d(c,"getPermuted",(function(){return Xt})),n.d(c,"getReshapedPermuted",(function(){return Yt})),n.d(c,"getSliceBeginCoords",(function(){return Jt})),n.d(c,"getSliceSize",(function(){return Qt})),n.d(c,"prepareAndValidate",(function(){return Ze})),n.d(c,"validateUpdateShape",(function(){return et.validateUpdateShape})),n.d(c,"validateInput",(function(){return et.validateInput})),n.d(c,"calculateShapes",(function(){return et.calculateShapes})),n.d(c,"SELU_SCALEALPHA",(function(){return Zt.b})),n.d(c,"SELU_SCALE",(function(){return Zt.a})),n.d(c,"ERF_P",(function(){return en})),n.d(c,"ERF_A1",(function(){return tn})),n.d(c,"ERF_A2",(function(){return nn})),n.d(c,"ERF_A3",(function(){return rn})),n.d(c,"ERF_A4",(function(){return an})),n.d(c,"ERF_A5",(function(){return on})),n.d(c,"warn",(function(){return un.b})),n.d(c,"log",(function(){return un.a})),n.d(c,"mergeRealAndImagArrays",(function(){return sn})),n.d(c,"splitRealAndImagArrays",(function(){return cn})),n.d(c,"complexWithEvenIndex",(function(){return ln})),n.d(c,"complexWithOddIndex",(function(){return fn})),n.d(c,"getComplexWithIndex",(function(){return dn})),n.d(c,"assignToTypedArray",(function(){return hn})),n.d(c,"exponents",(function(){return pn})),n.d(c,"exponent",(function(){return vn})),n.d(c,"decodeEinsumEquation",(function(){return bn})),n.d(c,"getEinsumPermutation",(function(){return yn})),n.d(c,"checkEinsumDimSizes",(function(){return wn})),n.d(c,"getEinsumComputePath",(function(){return xn})),n.d(c,"isIdentityPermutation",(function(){return On})),n.d(c,"prepareSplitSize",(function(){return jn})),n.d(c,"segment_util",(function(){return s})),n.d(c,"fromUint8ToStringArray",(function(){return Cn})),n.d(c,"fromStringArrayToUint8",(function(){return An}));var l={};n.r(l),n.d(l,"nonMaxSuppressionV3Impl",(function(){return Nn.a})),n.d(l,"nonMaxSuppressionV4Impl",(function(){return Nn.b})),n.d(l,"nonMaxSuppressionV5Impl",(function(){return Nn.c})),n.d(l,"whereImpl",(function(){return In.a}));var f=n(13),d=(n(217),n(3)),h=n(11),p=n(43),v=n(9),m=n(2),g=n.n(m),b=n(15),y=n(63),w=function(){function e(){Object(d.a)(this,e),this.saveRouters=[],this.loadRouters=[]}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),x=function(e){return w.registerSaveRouter(e)},O=function(e){return w.registerLoadRouter(e)},k=function(e){return w.getSaveHandlers(e)},j=function(e,t){return w.getLoadHandlers(e,t)},_="tensorflowjs",S="models_store",E="model_info_store";function C(){if(!Object(p.c)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function A(e){var t=e.result;t.createObjectStore(S,{keyPath:"modelPath"}),t.createObjectStore(E,{keyPath:"modelPath"})}var T=function(){function e(t){if(Object(d.a)(this,e),this.indexedDB=C(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(_,1);a.onupgradeneeded=function(){return A(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(S,"readonly"),u=o.objectStore(S).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){return i.close()}}else{var s,c=Object(y.h)(t),l=i.transaction(E,"readwrite"),f=l.objectStore(E),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var a=(s=i.transaction(S,"readwrite")).objectStore(S).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(E)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},l.oncomplete=function(){null==s?i.close():s.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();T.URL_SCHEME="indexeddb://";var N=function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(T.URL_SCHEME)?(t=e.slice(T.URL_SCHEME.length),new T(t)):null;var t};w.registerSaveRouter(N),w.registerLoadRouter(N);var I=function(){function e(){Object(d.a)(this,e),this.indexedDB=C()}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(_,1);r.onupgradeneeded=function(){return A(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(E,"readonly"),i=a.objectStore(E).getAll();i.onsuccess=function(){var t,n={},r=Object(v.a)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(T.URL_SCHEME)?r.slice(T.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(_,1);a.onupgradeneeded=function(){return A(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(E,"readwrite"),u=o.objectStore(E),s=u.get(t);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=u.delete(t),o=function(){var a=(n=i.transaction(S,"readwrite")).objectStore(S).delete(t);a.onsuccess=function(){return e(s.result.modelArtifactsInfo)},a.onerror=function(e){return r(s.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(s.error)}},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=n(20),R="/",F="tensorflowjs_models",M="info",P="model_topology",L="weight_specs",z="weight_data",B="model_metadata";function U(e){return{info:[F,e,M].join(R),topology:[F,e,P].join(R),weightSpecs:[F,e,L].join(R),weightData:[F,e,z].join(R),modelMetadata:[F,e,B].join(R)}}function W(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function V(e){var t=e.split(R);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(R)}var q=function(){function e(t){if(Object(d.a)(this,e),!Object(p.c)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=U(this.modelPath)}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Object(y.h)(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(y.a)(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),W(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(u=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Object(y.b)(u),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();q.URL_SCHEME="localstorage://";var $=function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(q.URL_SCHEME)?(t=e.slice(q.URL_SCHEME.length),new q(t)):null;var t};w.registerSaveRouter($),w.registerLoadRouter($);var H=function(){function e(){Object(d.a)(this,e),Object(D.b)(Object(p.c)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Object(D.b)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=F+R,r=R+M,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=V(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(q.URL_SCHEME)?a.slice(q.URL_SCHEME.length):a,n=U(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),W(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G="://",K=function(){function e(){Object(d.a)(this,e),this.managers={}}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Object(D.b)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(G)&&(t=t.slice(0,t.indexOf(G))),Object(D.b)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Object(D.b)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function X(e){if(-1===e.indexOf(G))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(K.getSchemes().join(",")));return{scheme:e.split(G)[0],path:e.split(G)[1]}}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],Object(D.b)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=w.getLoadHandlers(t),Object(D.b)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Object(D.b)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=w.getSaveHandlers(n),Object(D.b)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Object(D.b)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),u=o[0],s=X(t).scheme,c=X(t).path,l=s===X(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,K.getManager(s).removeModel(c);case 19:return e.next=21,u.save(f);case 21:if(d=e.sent,!r||l){e.next=25;break}return e.next=25,K.getManager(s).removeModel(c);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.getSchemes(),n={},r=Object(v.a)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,K.getManager(i).listModels();case 9:for(u in o=e.sent)n[i+G+u]=o[u];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(t),r=K.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(b.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Y(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(b.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Y(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Object(p.c)().get("IS_BROWSER")){Object(p.c)().setPlatform("browser",new oe);try{K.registerManager(q.URL_SCHEME,new H)}catch(Rn){}try{K.registerManager(T.URL_SCHEME,new I)}catch(Rn){}}n(558);var ue=n(81),se=n(27),ce=n(109),le=n(251),fe=n(18);Object(f.b)();var de={buffer:ue.a,cast:se.a,clone:ce.a,print:le.a};Object(fe.f)(de);var he=n(14);function pe(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ve=function(){function e(t){if(Object(d.a)(this,e),!Object(p.c)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Object(y.i)(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,pe((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(u=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=n,e.next=21,pe((function(){return u.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Object(y.h)(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ve.URL_SCHEME="downloads://";var me=function(){function e(t){if(Object(d.a)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=Object(y.g)(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=Object(v.a)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,Object(he.a)(o.weights)),a.push.apply(a,Object(he.a)(o.paths))}}catch(Rn){i.e(Rn)}finally{i.f()}var u=this.checkManifestAndWeightFiles(e),s=a.map((function(e){return n.loadWeightsFile(e,u[e])}));return Promise.all(s).then((function(e){return[r,Object(y.d)(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return Object(y.c)(e.name)})),i={},o=Object(v.a)(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=Object(y.c)(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Rn){o.e(Rn)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function ge(e){return new me(e)}w.registerSaveRouter((function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ve.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ve(e)}(e.slice(ve.URL_SCHEME.length)):null}));var be=n(4);function ye(e,t,n,r){!function(e){Object(D.b)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Object(D.b)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Object(D.b)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Object(D.b)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}var we=n(232);function xe(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Object(p.c)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,ye(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(u=e.t0,s=u.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(s);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,ye(s,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return je.apply(this,arguments)}function je(){return(je=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=_e((function(e){return xe(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return function(){var t=Object(b.a)(g.a.mark((function t(n){var r,a,i,o,u,s,c,l,f,d,h,p,v=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},u=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=we.a[r]*D.O(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),u[n]=!0)})):l(),s.push(e.name),n+=c}))})),u.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!u[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,h={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[p+a].byteLength;for(var i=new ArrayBuffer(r),u=new Uint8Array(i),s=0,c=0;c<t;c++){var l=new Uint8Array(d[p+c]);u.set(l,s),s+=l.byteLength}o[e].forEach((function(e){var t=i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(y.e)(t,[e.manifestEntry]);for(var r in n)h[r]=n[r]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Se=function(){function e(t,n){if(Object(d.a)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Object(D.b)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Object(p.c)().platform.fetch,Object(D.b)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Object(D.b)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Object(y.i)(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Object(y.h)(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Object(y.g)(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o,u,s,c,l,f,d,h,p,m,b,w,x,O,k;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Ee(n),a=Object(be.a)(r,2),i=a[0],o=a[1],u=this.weightPathPrefix||i,s=[],c=Object(v.a)(t);try{for(c.s();!(l=c.n()).done;)f=l.value,s.push.apply(s,Object(he.a)(f.weights))}catch(Rn){c.e(Rn)}finally{c.f()}d=[],h=[],p=Object(v.a)(t);try{for(p.s();!(m=p.n()).done;){b=m.value,w=Object(v.a)(b.paths);try{for(w.s();!(x=w.n()).done;)O=x.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(O)):d.push(u+O+o)}catch(Rn){w.e(Rn)}finally{w.f()}}}catch(Rn){p.e(Rn)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=he.a,e.next=16,Promise.all(h);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,xe(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return k=e.sent,e.abrupt("return",[s,Object(y.d)(k)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ee(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Ce(e){return null!=e.match(Se.URL_SCHEME_REGEX)}Se.URL_SCHEME_REGEX=/^https?:\/\//;var Ae=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Ce(e)})):Ce(e))?Te(e,t):null};function Te(e,t){return new Se(e,t)}function Ne(e,t){return Te(e,t)}w.registerSaveRouter(Ae),w.registerLoadRouter(Ae);var Ie=function(){function e(t){Object(d.a)(this,e),this.modelArtifacts=t}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),De=function(){function e(t){Object(d.a)(this,e),this.saveHandler=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Re(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new Ie(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ie({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ie({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Fe(e){return new De(e)}var Me=n(7),Pe=n(46),Le=n(168),ze=n(12),Be=n(85);var Ue,We=Object(ze.b)({confusionMatrix_:function(e,t,n){var r=Object(Me.a)(e,"labels","confusionMatrix"),a=Object(Me.a)(t,"predictions","confusionMatrix");D.b(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),D.b(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),D.b(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),D.b(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),D.b(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=Object(Le.a)(Object(se.a)(r,"int32"),n),o=Object(Le.a)(Object(se.a)(a,"int32"),n),u=Object(Be.a)(i),s=Object(Pe.a)(u,o);return Object(se.a)(s,"int32")}}),Ve=n(8),qe=n(104),$e=n(281);function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,u=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));u=!0}if(a){var s=2;if(a&&e.readyState<s)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=Object(qe.c)(Ve.jb,f.a.backendName);if(null!=c){var l={pixels:e},d={numChannels:t};return f.a.runKernel(Ve.jb,l,d)}var h,p,v=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],m=Object(be.a)(v,2),g=m[0],b=m[1];if(o?h=e.getContext("2d").getImageData(0,0,g,b).data:r||n?h=e.data:(i||a||u)&&(null==Ue&&(Ue=document.createElement("canvas").getContext("2d")),Ue.canvas.width=g,Ue.canvas.height=b,Ue.drawImage(e,0,0,g,b),h=Ue.getImageData(0,0,g,b).data),4===t)p=new Int32Array(h);else{var y=g*b;p=new Int32Array(y*t);for(var w=0;w<y;w++)for(var x=0;x<t;++x)p[w*t+x]=h[4*w+x]}var O=[b,g,t];return Object($e.a)(p,O,"int32")}function Ge(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Ke(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(b.a)(g.a.mark((function e(t){var n,r,a,i=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!Object(p.c)().getBool("WRAP_TO_IMAGEBITMAP")||!Ge(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",He(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h,p,v,m,b,y,w;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(Me.a)(t,"img","toPixels"),t instanceof fe.a||(a=r,r=Object(se.a)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=Object(be.a)(i,2),u=o[0],s=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,d=new Uint8ClampedArray(s*u*4),h=0;case 16:if(!(h<u*s)){e.next=41;break}p=[0,0,0,255],v=0;case 19:if(!(v<c)){e.next=33;break}if(m=l[h*c+v],"float32"!==r.dtype){e.next=26;break}if(!(m<0||m>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(m,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(m<0||m>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(m,"."));case 29:1===c?(p[0]=m*f,p[1]=m*f,p[2]=m*f):p[v]=m*f;case 30:v++,e.next=19;break;case 33:d[(b=4*h)+0]=Math.round(p[0]),d[b+1]=Math.round(p[1]),d[b+2]=Math.round(p[2]),d[b+3]=Math.round(p[3]);case 38:++h,e.next=16;break;case 41:return null!=n&&(n.width=s,n.height=u,y=n.getContext("2d"),w=new ImageData(d,s,u),y.putImageData(w,0,0)),r!==t&&r.dispose(),e.abrupt("return",d);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe=Object(ze.b)({fromPixels_:He});function Ze(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Object(D.O)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,u=0;u<a.length-1;++u)o*=a[u];var s=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=s[f],c.push(s[f]);var d=[].concat(Object(he.a)(Object(D.j)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,d]}var et=n(179),tt=n(180),nt=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),rt=function(){function e(){Object(d.a)(this,e),this.classNameMap={}}return Object(h.a)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function at(e){Object(D.b)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Object(D.b)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Object(D.b)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),rt.register(e)}var it=n(44),ot=n(207),ut=n(24),st="3.9.0",ct=n(16),lt=n(17),ft=n(50),dt=n(30),ht=n(32),pt=n(22),vt=n(68),mt=n(47),gt=n(41),bt=n(64),yt=n(36),wt=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Object(ft.d)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return Object(bt.f)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Object(ft.d)(this.iterations_)}},{key:"saveIterations",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Object(yt.a)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(nt);Object.defineProperty(wt,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var xt=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(d.a)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=f.a.backend.epsilon()),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;Object(ft.t)((function(){var e=Object(dt.a)(Object(pt.a)(o,t.rho),Object(pt.a)(Object(mt.a)(i),1-t.rho)),n=Object(pt.a)(Object(ht.a)(Object(vt.a)(Object(dt.a)(u,t.epsilon)),Object(vt.a)(Object(dt.a)(o,t.epsilon))),i),r=Object(dt.a)(Object(pt.a)(u,t.rho),Object(pt.a)(Object(mt.a)(n),1-t.rho));o.assign(e),u.assign(r);var s=Object(dt.a)(Object(pt.a)(n,-t.learningRate),a);a.assign(s)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Object(ft.d)(this.accumulatedGrads.map((function(e){return e.variable}))),Object(ft.d)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(he.a)(this.accumulatedGrads),Object(he.a)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(wt);xt.className="Adadelta",at(xt);var Ot=n(147),kt=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Object(ft.t)((function(){return Object(Ot.a)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Object(ft.t)((function(){var e=Object(dt.a)(o,Object(mt.a)(i));o.assign(e);var n=Object(dt.a)(Object(pt.a)(Object(ht.a)(i,Object(vt.a)(Object(dt.a)(e,f.a.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Object(ft.d)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(wt);kt.className="Adagrad",at(kt);var jt=n(89),_t=n(31),St=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(d.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Object(ft.t)((function(){i.accBeta1=Object(yt.a)(r).variable(),i.accBeta2=Object(yt.a)(a).variable()})),null==o&&(i.epsilon=f.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(ft.t)((function(){var r=Object(_t.a)(1,t.accBeta1),a=Object(_t.a)(1,t.accBeta2);n.forEach((function(n,i){var o=f.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(ft.t)((function(){return Object(gt.a)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Object(ft.t)((function(){return Object(gt.a)(o).variable(false)}))});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=Object(dt.a)(Object(pt.a)(s,t.beta1),Object(pt.a)(u,1-t.beta1)),d=Object(dt.a)(Object(pt.a)(c,t.beta2),Object(pt.a)(Object(mt.a)(u),1-t.beta2)),h=Object(ht.a)(l,r),p=Object(ht.a)(d,a);s.assign(l),c.assign(d);var v=Object(dt.a)(Object(pt.a)(Object(ht.a)(h,Object(dt.a)(Object(vt.a)(p),t.epsilon)),-t.learningRate),o);o.assign(v)}})),t.accBeta1.assign(Object(pt.a)(t.accBeta1,t.beta1)),t.accBeta2.assign(Object(pt.a)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(ft.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Object(ft.d)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(he.a)(this.accumulatedFirstMoment),Object(he.a)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Object(ft.t)((function(){r.accBeta1.assign(Object(jt.a)(r.beta1,r.iterations_+1)),r.accBeta2.assign(Object(jt.a)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(wt);St.className="Adam",at(St);var Et=n(74),Ct=n(148),At=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Object(d.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=u,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Object(ft.t)((function(){i.iteration=Object(yt.a)(0).variable(),i.accBeta1=Object(yt.a)(r).variable()})),null==o&&(i.epsilon=f.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(ft.t)((function(){var r=Object(_t.a)(1,t.accBeta1),a=Object(ht.a)(-t.learningRate,Object(dt.a)(Object(pt.a)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=f.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(gt.a)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Object(gt.a)(o).variable(false)});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=Object(dt.a)(Object(pt.a)(s,t.beta1),Object(pt.a)(u,1-t.beta1)),d=Object(pt.a)(c,t.beta2),h=Object(Et.a)(u),p=Object(Ct.a)(d,h);s.assign(l),c.assign(p);var v=Object(dt.a)(Object(pt.a)(Object(ht.a)(a,r),Object(ht.a)(l,Object(dt.a)(p,t.epsilon))),o);o.assign(v)}})),t.iteration.assign(Object(dt.a)(t.iteration,1)),t.accBeta1.assign(Object(pt.a)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(ft.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Object(ft.d)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(wt);At.className="Adamax",at(At);var Tt=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=f.a.registeredVariables[n];Object(ft.t)((function(){var e=Object(dt.a)(Object(pt.a)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Object(ft.l)(Object(yt.a)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(wt);Tt.className="SGD",at(Tt);var Nt=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(d.a)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Object(yt.a)(a.momentum),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Object(ft.t)((function(){var e,n=Object(dt.a)(Object(pt.a)(t.m,i),o);e=t.useNesterov?Object(dt.a)(Object(pt.a)(t.c,Object(dt.a)(o,Object(pt.a)(n,t.m))),a):Object(dt.a)(Object(pt.a)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Object(ft.d)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Tt);Nt.className="Momentum",at(Nt);var It=function(e){Object(ct.a)(n,e);var t=Object(lt.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=u,null==o&&(r.epsilon=f.a.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Object(ft.t)((function(){return Object(gt.a)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var u=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Object(ft.t)((function(){var e=Object(dt.a)(Object(pt.a)(u,t.decay),Object(pt.a)(Object(mt.a)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Object(dt.a)(Object(pt.a)(n,t.decay),Object(pt.a)(o,1-t.decay)),c=Object(ht.a)(Object(pt.a)(o,t.learningRate),Object(vt.a)(Object(_t.a)(e,Object(dt.a)(Object(mt.a)(i),t.epsilon)))),l=Object(dt.a)(Object(pt.a)(s,t.momentum),c);u.assign(e),n.assign(i),s.assign(l);var f=Object(_t.a)(a,l);a.assign(f)}else{var d=Object(dt.a)(Object(pt.a)(u,t.decay),Object(pt.a)(Object(mt.a)(o),1-t.decay)),h=Object(dt.a)(Object(pt.a)(s,t.momentum),Object(ht.a)(Object(pt.a)(o,t.learningRate),Object(vt.a)(Object(dt.a)(d,t.epsilon))));u.assign(d),s.assign(h);var p=Object(_t.a)(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Object(ft.d)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Object(ft.d)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Object(ft.d)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(he.a)(this.accumulatedMeanSquares),Object(he.a)(this.accumulatedMoments)),this.centered&&t.push.apply(t,Object(he.a)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(wt);It.className="RMSProp",at(It);var Dt=n(146),Rt=n(42),Ft=n(65),Mt=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"sgd",value:function(e){return new Tt(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Nt(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new It(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new St(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new xt(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new At(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new kt(e,t)}}]),e}(),Pt={sgd:Mt.sgd,momentum:Mt.momentum,adadelta:Mt.adadelta,adagrad:Mt.adagrad,rmsprop:Mt.rmsprop,adamax:Mt.adamax,adam:Mt.adam},Lt=n(396),zt=n(70),Bt=n(37);function Ut(e,t){var n=e[0].length;e.forEach((function(e,t){D.b(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),D.b(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)D.b(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Wt(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Vt=n(56),qt=n(75),$t=30;function Ht(e){return e<=$t?e:Object(D.G)(e,Math.floor(Math.sqrt(e)))}function Gt(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Kt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Xt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],u=1;u<e;++u)u>=2*t+1||u%2===1?o.push(u):i.push(u);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Yt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Jt(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Qt(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Zt=n(227),en=.3275911,tn=.254829592,nn=-.284496736,rn=1.421413741,an=-1.453152027,on=1.061405429,un=n(94);function sn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function cn(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function ln(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function fn(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function dn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function hn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function pn(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function vn(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var mn="->",gn=/->/g;function bn(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(gn,"").length)/mn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(mn,'").'));var r=e.split(mn),a=Object(be.a)(r,2),i=a[0],o=a[1];Object(D.b)(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var u=i.split(","),s=u.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!u.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},f=0;f<o.length;++f)l(f);for(var d=0;d<i.length;++d){var h=i[d];-1===c.indexOf(h)&&","!==h&&c.push(h)}for(var p=new Array(u.length),v=0;v<s;++v){if(new Set(u[v].split("")).size!==u[v].length)throw new Error("Found duplicate axes in input component ".concat(u[v],". ")+"Support for duplicate axes in input is not implemented yet.");p[v]=[];for(var m=0;m<u[v].length;++m)p[v].push(c.indexOf(u[v][m]))}for(var g=c.length,b=[],y=o.length;y<g;++y)b.push(y);return{allDims:c,summedDims:b,idDims:p}}function yn(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function wn(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Object(D.b)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function xn(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],u=0;u<r.length;++u){var s,c=kn(t,r[u]),l=Object(v.a)(c);try{for(l.s();!(s=l.n()).done;){var f=s.value;-1===o.indexOf(f)&&(a[u].push(f),o.push(f))}}catch(Rn){l.e(Rn)}finally{l.f()}}return{path:r,steps:a}}function On(e){return e.every((function(e,t){return e===t}))}function kn(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Object(D.b)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Object(D.b)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Object(D.b)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function _n(e,t){var n,r=!1;for(e<=$t?(n=e,r=!0):n=Object(D.G)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Object(D.G)(e,n+1);return n}function Sn(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function En(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var u=e.shape[n],s=[],c=1,l=1,f=1,d=0;d<r;++d)s.push(e.shape[d]),c*=e.shape[d];for(var h=r;h<n;h++)s.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<a;p++)s.push(t.shape[p]);for(var v=n+1;v<i;v++)s.push(e.shape[v]),f*=e.shape[v];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:u,outputShape:s}}function Cn(e){try{return e.map((function(e){return Object(ut.decodeString)(e)}))}catch(Rn){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Rn))}}function An(e){return e.map((function(e){return Object(ut.encodeString)(e)}))}var Tn=n(250),Nn=n(124),In=n(285),Dn=n(223)},function(e,t,n){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function a(e){return null==e?null:e.fname}function i(e){return null==e?null:e.fields}function o(e){return 1===e.length?u(e[0]):s(e)}n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return Y})),n.d(t,"j",(function(){return ee})),n.d(t,"k",(function(){return J})),n.d(t,"l",(function(){return Z})),n.d(t,"m",(function(){return ae})),n.d(t,"n",(function(){return ie})),n.d(t,"o",(function(){return c})),n.d(t,"p",(function(){return oe})),n.d(t,"q",(function(){return ue})),n.d(t,"r",(function(){return se})),n.d(t,"s",(function(){return g})),n.d(t,"t",(function(){return de})),n.d(t,"u",(function(){return f})),n.d(t,"v",(function(){return he})),n.d(t,"w",(function(){return le})),n.d(t,"x",(function(){return d})),n.d(t,"y",(function(){return h})),n.d(t,"z",(function(){return pe})),n.d(t,"A",(function(){return ve})),n.d(t,"B",(function(){return _})),n.d(t,"C",(function(){return me})),n.d(t,"D",(function(){return ge})),n.d(t,"E",(function(){return Q})),n.d(t,"F",(function(){return be})),n.d(t,"G",(function(){return ye})),n.d(t,"H",(function(){return S})),n.d(t,"I",(function(){return we})),n.d(t,"J",(function(){return xe})),n.d(t,"K",(function(){return Oe})),n.d(t,"L",(function(){return ke})),n.d(t,"M",(function(){return j})),n.d(t,"N",(function(){return je})),n.d(t,"O",(function(){return _e})),n.d(t,"P",(function(){return C})),n.d(t,"Q",(function(){return v})),n.d(t,"R",(function(){return Ee})),n.d(t,"S",(function(){return z})),n.d(t,"T",(function(){return B})),n.d(t,"U",(function(){return U})),n.d(t,"V",(function(){return W})),n.d(t,"W",(function(){return N})),n.d(t,"X",(function(){return K})),n.d(t,"Y",(function(){return Se})),n.d(t,"Z",(function(){return Ce})),n.d(t,"ab",(function(){return l})),n.d(t,"bb",(function(){return Ae})),n.d(t,"cb",(function(){return Te})),n.d(t,"db",(function(){return Ie})),n.d(t,"eb",(function(){return I})),n.d(t,"fb",(function(){return Re})),n.d(t,"gb",(function(){return De})),n.d(t,"hb",(function(){return Fe})),n.d(t,"ib",(function(){return m})),n.d(t,"jb",(function(){return X})),n.d(t,"kb",(function(){return Me})),n.d(t,"lb",(function(){return A})),n.d(t,"mb",(function(){return p})),n.d(t,"nb",(function(){return q})),n.d(t,"ob",(function(){return $})),n.d(t,"pb",(function(){return H})),n.d(t,"qb",(function(){return G}));var u=function(e){return function(t){return t[e]}},s=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function c(e){throw Error(e)}function l(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function l(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)l(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&l(),u=t=n+1):"]"===r&&(u||c("Access path missing open bracket: "+e),u>0&&l(),u=0,t=n+1):n>t?l():t=n+1}return u&&c("Access path missing closing bracket: "+e),o&&c("Access path missing closing quote: "+e),n>t&&(n++,l()),a}function f(e,t,n){var a=l(e);return e=1===a.length?a[0]:e,r((n&&n.get||o)(a),[e],t||e)}var d=f("id"),h=r((function(e){return e}),[],"identity"),p=r((function(){return 0}),[],"zero"),v=r((function(){return 1}),[],"one"),m=r((function(){return!0}),[],"true"),g=r((function(){return!1}),[],"false");function b(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var y=0,w=1,x=2,O=3,k=4;function j(e,t){var n=e||y;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=w&&b(t||"error","ERROR",arguments),this},warn:function(){return n>=x&&b(t||"warn","WARN",arguments),this},info:function(){return n>=O&&b(t||"log","INFO",arguments),this},debug:function(){return n>=k&&b(t||"log","DEBUG",arguments),this}}}var _=Array.isArray;function S(e){return e===Object(e)}var E=function(e){return"__proto__"!==e};function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=T(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;A(e,n,t[n],r)}return e}),{})}function A(e,t,n,r){var a,i;if(E(t))if(S(n)&&!_(n))for(a in i=S(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?A(i,a,n[a]):E(a)&&(i[a]=n[a]);else e[t]=n}function T(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}function N(e){return e[e.length-1]}function I(e){return null==e||""===e?null:+e}var D=function(e){return function(t){return e*Math.exp(t)}},R=function(e){return function(t){return Math.log(e*t)}},F=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},M=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},P=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function L(e,t,n,r){var a=n(e[0]),i=n(N(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function z(e,t){return L(e,t,I,h)}function B(e,t){var n=Math.sign(e[0]);return L(e,t,R(n),D(n))}function U(e,t,n){return L(e,t,P(n),P(1/n))}function W(e,t,n){return L(e,t,F(n),M(n))}function V(e,t,n,r,a){var i=r(e[0]),o=r(N(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function q(e,t,n){return V(e,t,n,I,h)}function $(e,t,n){var r=Math.sign(e[0]);return V(e,t,n,R(r),D(r))}function H(e,t,n,r){return V(e,t,n,P(r),P(1/r))}function G(e,t,n,r){return V(e,t,n,F(r),M(r))}function K(e){return 1+~~(new Date(e).getMonth()/3)}function X(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Y(e){return null!=e?_(e)?e:[e]:[]}function J(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]}function Q(e){return"function"===typeof e}function Z(e,t,n){n=n||{},t=Y(t)||[];var a=[],o=[],u={},s=n.comparator||te;return Y(e).forEach((function(e,r){null!=e&&(a.push("descending"===t[r]?-1:1),o.push(e=Q(e)?e:f(e,null,n)),(i(e)||[]).forEach((function(e){return u[e]=1})))})),0===o.length?null:r(s(o,a),Object.keys(u))}var ee=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},te=function(e,t){return 1===e.length?ne(e[0],t[0]):re(e,t,e.length)},ne=function(e,t){return function(n,r){return ee(e(n),e(r))*t}},re=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=ee(i(r),i(a));return o*t[u]}};function ae(e){return Q(e)?e:function(){return e}}function ie(e,t){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return t(r),n=null}),e)}}function oe(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}function ue(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}function se(e,t){var n,r,a,i,o,u=e.length,s=-1;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}return[i,o]}var ce=Object.prototype.hasOwnProperty;function le(e,t){return ce.call(e,t)}var fe={};function de(e){var t,n={};function r(e){return le(n,e)&&n[e]!==fe}var a={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++a.size,n[e]===fe&&--a.empty),n[e]=t,this},delete:function(e){return r(e)&&(--a.size,++a.empty,n[e]=fe),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(t=e,a):t},clean:function(){var e={},r=0;for(var i in n){var o=n[i];o===fe||t&&t(o)||(e[i]=o,++r)}a.size=r,a.empty=0,a.object=n=e}};return e&&Object.keys(e).forEach((function(t){a.set(t,e[t])})),a}function he(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u=+n,s=e[0],c=N(e);c<s&&(o=s,s=c,c=o),o=Math.abs(t-s);var l=Math.abs(c-t);return o<l&&o<=u?r:l<=u?a:i}function pe(e,t,n){var r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),oe(r,n)}function ve(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)}function me(e){return"boolean"===typeof e}function ge(e){return"[object Date]"===Object.prototype.toString.call(e)}function be(e){return e&&Q(e[Symbol.iterator])}function ye(e){return"number"===typeof e}function we(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function xe(e){return"string"===typeof e}function Oe(e,t,n){e&&(e=t?Y(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):Y(e));var a,i=e&&e.length,u=n&&n.get||o,s=function(e){return u(t?[e]:l(e))};if(i)if(1===i){var c=s(e[0]);a=function(e){return""+c(e)}}else{var f=e.map(s);a=function(e){for(var t=""+f[0](e),n=0;++n<i;)t+="|"+f[n](e);return t}}else a=function(){return""};return r(a,e,"key")}function ke(e,t){var n=e[0],r=N(e),a=+t;return a?1===a?r:n+a*(r-n):n}function je(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return le(t,e)||le(n,e)},get:function(e){return le(t,e)?t[e]:le(n,e)?i(e,n[e]):void 0},set:function(e,n){return le(t,e)?t[e]=n:i(e,n)}}}function _e(e,t,n,r){var a=t.length,i=n.length;if(!i)return t;if(!a)return n;for(var o=r||new t.constructor(a+i),u=0,s=0,c=0;u<a&&s<i;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<a;++u,++c)o[c]=t[u];for(;s<i;++s,++c)o[c]=n[s];return o}function Se(e,t){for(var n="";--t>=0;)n+=e;return n}function Ee(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?Se(a,o)+i:"center"===r?Se(a,~~(o/2))+i+Se(a,Math.ceil(o/2)):i+Se(a,o)}function Ce(e){return e&&N(e)-e[0]||0}function Ae(e){return _(e)?"["+e.map(Ae)+"]":S(e)||xe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Te(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}var Ne=function(e){return ye(e)||ge(e)?e:Date.parse(e)};function Ie(e,t){return t=t||Ne,null==e||""===e?null:t(e)}function De(e){return null==e||""===e?null:e+""}function Re(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function Fe(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a}function Me(e,t,n){if(e)if(t)for(var r=e.length,a=0;a<r;++a){var i=t(e[a]);i&&n(i,a,e)}else e.forEach(n)}},function(e,t,n){e.exports=n(529)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(292);var a=n(157),i=n(293);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}(e,t)||Object(a.a)(e,t)||Object(i.a)()}},function(e,t,n){"use strict";e.exports=n(525)},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return d}));var r=n(4),a=n(0);function i(e,t,n,r,i){var u=t.inputParams[e];if(u&&void 0!==u.inputIndexStart){var s=u.inputIndexStart,c=0===u.inputIndexEnd?void 0:void 0===u.inputIndexEnd?s+1:u.inputIndexEnd;if("tensor"===u.type)return o(t.inputNames[u.inputIndexStart],n,r,i);if("tensors"===u.type)return t.inputNames.slice(s,c).map((function(e){return o(e,n,r,i)}));var l=o(t.inputNames.slice(s)[0],n,r,i),f=l.dataSync();return"number"===u.type?f[0]:a.util.toNestedArray(l.shape,f)}var d=t.attrParams[e];return d&&d.value}function o(e,t,n,a){var i=l(e),o=Object(r.a)(i,2),u=o[0],s=o[1];if(null!=a){var f=a.getHashTableHandleByName(u);if(null!=f)return f}var d=n.currentContextIds.find((function(e){return!!t[c(u,e)]}));return void 0!==d?t[c(u,d)][s]:void 0}function u(e,t,n){return t[c(e,n.currentContextId)]}function s(e,t){var n=l(e),a=Object(r.a)(n,3),i=a[0],o=a[1],u=a[2];return[c(i,t&&t.currentContextId),o,u]}function c(e,t){return t?"".concat(e,"-").concat(t):e}function l(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function f(e,t,n){var r=i("pad",e,t,n);if("explicit"===r){r=i("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function d(e){return e.kept?e:Object(a.clone)(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(13),a=n(43),i=n(18),o=n(20),u=n(24);function s(e,t){var n=e;if(Object(o.A)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Object(o.A)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(a.c)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||Object(o.A)(e)){Object(o.b)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Object(o.b)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else Object(o.b)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i.a)return l(a,e.dtype,t,n),e;var c=Object(o.r)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!Object(o.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var f=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(f,"'"))}var d=s(e,c);Object(o.A)(e)||Array.isArray(e)||(e=[e]);var h=!0,p="string"!==c?Object(u.toTypedArray)(e,c):Object(o.m)(e,[],h);return r.a.makeTensor(p,d,c)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return f(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return p})),n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return m})),n.d(t,"o",(function(){return g})),n.d(t,"r",(function(){return b})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return w})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return O})),n.d(t,"u",(function(){return k})),n.d(t,"w",(function(){return j})),n.d(t,"v",(function(){return _})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return E})),n.d(t,"z",(function(){return C})),n.d(t,"A",(function(){return A})),n.d(t,"B",(function(){return T})),n.d(t,"C",(function(){return N})),n.d(t,"D",(function(){return I})),n.d(t,"E",(function(){return D})),n.d(t,"F",(function(){return R})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return M})),n.d(t,"I",(function(){return P})),n.d(t,"J",(function(){return L})),n.d(t,"K",(function(){return z})),n.d(t,"M",(function(){return B})),n.d(t,"L",(function(){return U})),n.d(t,"N",(function(){return W})),n.d(t,"O",(function(){return V})),n.d(t,"P",(function(){return q})),n.d(t,"Q",(function(){return $})),n.d(t,"R",(function(){return H})),n.d(t,"S",(function(){return G})),n.d(t,"T",(function(){return K})),n.d(t,"V",(function(){return X})),n.d(t,"U",(function(){return Y})),n.d(t,"mc",(function(){return J})),n.d(t,"W",(function(){return Q})),n.d(t,"X",(function(){return Z})),n.d(t,"Y",(function(){return ee})),n.d(t,"ab",(function(){return te})),n.d(t,"Z",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"db",(function(){return ie})),n.d(t,"eb",(function(){return oe})),n.d(t,"fb",(function(){return ue})),n.d(t,"gb",(function(){return se})),n.d(t,"hb",(function(){return ce})),n.d(t,"ib",(function(){return le})),n.d(t,"kb",(function(){return fe})),n.d(t,"ob",(function(){return de})),n.d(t,"nb",(function(){return he})),n.d(t,"pb",(function(){return pe})),n.d(t,"qb",(function(){return ve})),n.d(t,"sb",(function(){return me})),n.d(t,"rb",(function(){return ge})),n.d(t,"tb",(function(){return be})),n.d(t,"ub",(function(){return ye})),n.d(t,"vb",(function(){return we})),n.d(t,"wb",(function(){return xe})),n.d(t,"zb",(function(){return Oe})),n.d(t,"Ab",(function(){return ke})),n.d(t,"Bb",(function(){return je})),n.d(t,"Cb",(function(){return _e})),n.d(t,"Db",(function(){return Se})),n.d(t,"Eb",(function(){return Ee})),n.d(t,"Gb",(function(){return Ce})),n.d(t,"Hb",(function(){return Ae})),n.d(t,"Ib",(function(){return Te})),n.d(t,"Fb",(function(){return Ne})),n.d(t,"xb",(function(){return Ie})),n.d(t,"yb",(function(){return De})),n.d(t,"Jb",(function(){return Re})),n.d(t,"Pb",(function(){return Fe})),n.d(t,"Kb",(function(){return Me})),n.d(t,"Nb",(function(){return Pe})),n.d(t,"Lb",(function(){return Le})),n.d(t,"Mb",(function(){return ze})),n.d(t,"Ob",(function(){return Be})),n.d(t,"Qb",(function(){return Ue})),n.d(t,"Rb",(function(){return We})),n.d(t,"Sb",(function(){return Ve})),n.d(t,"Tb",(function(){return qe})),n.d(t,"Ub",(function(){return $e})),n.d(t,"Vb",(function(){return He})),n.d(t,"Wb",(function(){return Ge})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"bc",(function(){return Xe})),n.d(t,"Yb",(function(){return Ye})),n.d(t,"Zb",(function(){return Je})),n.d(t,"ac",(function(){return Qe})),n.d(t,"dc",(function(){return Ze})),n.d(t,"cc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return at})),n.d(t,"ic",(function(){return it})),n.d(t,"jc",(function(){return ot})),n.d(t,"kc",(function(){return ut})),n.d(t,"lc",(function(){return st})),n.d(t,"nc",(function(){return ct})),n.d(t,"oc",(function(){return lt})),n.d(t,"qc",(function(){return ft})),n.d(t,"tc",(function(){return dt})),n.d(t,"uc",(function(){return ht})),n.d(t,"rc",(function(){return pt})),n.d(t,"sc",(function(){return vt})),n.d(t,"pc",(function(){return mt})),n.d(t,"vc",(function(){return gt})),n.d(t,"xc",(function(){return bt})),n.d(t,"yc",(function(){return yt})),n.d(t,"zc",(function(){return wt})),n.d(t,"Ac",(function(){return xt})),n.d(t,"Bc",(function(){return Ot})),n.d(t,"Gc",(function(){return kt})),n.d(t,"Ec",(function(){return jt})),n.d(t,"Fc",(function(){return _t})),n.d(t,"Dc",(function(){return St})),n.d(t,"Cc",(function(){return Et})),n.d(t,"Ic",(function(){return Ct})),n.d(t,"Qc",(function(){return At})),n.d(t,"Zc",(function(){return Tt})),n.d(t,"Jc",(function(){return Nt})),n.d(t,"Pc",(function(){return It})),n.d(t,"Hc",(function(){return Dt})),n.d(t,"Kc",(function(){return Rt})),n.d(t,"Lc",(function(){return Ft})),n.d(t,"Mc",(function(){return Mt})),n.d(t,"Nc",(function(){return Pt})),n.d(t,"Oc",(function(){return Lt})),n.d(t,"Sc",(function(){return zt})),n.d(t,"Rc",(function(){return Bt})),n.d(t,"Uc",(function(){return Ut})),n.d(t,"Vc",(function(){return Wt})),n.d(t,"Wc",(function(){return Vt})),n.d(t,"Xc",(function(){return qt})),n.d(t,"Yc",(function(){return $t})),n.d(t,"ad",(function(){return Ht})),n.d(t,"bd",(function(){return Gt})),n.d(t,"cd",(function(){return Kt})),n.d(t,"dd",(function(){return Xt})),n.d(t,"ed",(function(){return Yt})),n.d(t,"fd",(function(){return Jt})),n.d(t,"gd",(function(){return Qt})),n.d(t,"hd",(function(){return Zt})),n.d(t,"id",(function(){return en})),n.d(t,"jd",(function(){return tn})),n.d(t,"Tc",(function(){return nn})),n.d(t,"jb",(function(){return rn})),n.d(t,"wc",(function(){return an})),n.d(t,"kd",(function(){return on})),n.d(t,"lb",(function(){return un})),n.d(t,"mb",(function(){return sn}));var r="Abs",a="Acos",i="Acosh",o="Add",u="AddN",s="All",c="Any",l="ArgMax",f="ArgMin",d="Asin",h="Asinh",p="Atan",v="Atanh",m="Atan2",g="AvgPool",b="AvgPoolGrad",y="AvgPool3D",w="AvgPool3DGrad",x="BatchMatMul",O="BatchToSpaceND",k="Bincount",j="BroadcastTo",_="BroadcastArgs",S="Cast",E="Ceil",C="ClipByValue",A="Complex",T="ComplexAbs",N="Concat",I="Conv2D",D="Conv2DBackpropFilter",R="Conv2DBackpropInput",F="Conv3D",M="Conv3DBackpropFilterV2",P="Conv3DBackpropInputV2",L="Cos",z="Cosh",B="Cumsum",U="CropAndResize",W="DenseBincount",V="DepthToSpace",q="DepthwiseConv2dNative",$="DepthwiseConv2dNativeBackpropFilter",H="DepthwiseConv2dNativeBackpropInput",G="Diag",K="Dilation2D",X="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",J="RealDiv",Q="Einsum",Z="Elu",ee="EluGrad",te="Erf",ne="Equal",re="Exp",ae="ExpandDims",ie="Expm1",oe="FFT",ue="Fill",se="FlipLeftRight",ce="Floor",le="FloorDiv",fe="FusedBatchNorm",de="GatherV2",he="GatherNd",pe="Greater",ve="GreaterEqual",me="Identity",ge="IFFT",be="Imag",ye="IsFinite",we="IsInf",xe="IsNan",Oe="LeakyRelu",ke="Less",je="LessEqual",_e="LinSpace",Se="Log",Ee="Log1p",Ce="LogicalAnd",Ae="LogicalNot",Te="LogicalOr",Ne="LogSoftmax",Ie="LRN",De="LRNGrad",Re="Max",Fe="Maximum",Me="MaxPool",Pe="MaxPoolGrad",Le="MaxPool3D",ze="MaxPool3DGrad",Be="MaxPoolWithArgmax",Ue="Mean",We="Min",Ve="Minimum",qe="MirrorPad",$e="Mod",He="Multinomial",Ge="Multiply",Ke="Neg",Xe="NotEqual",Ye="NonMaxSuppressionV3",Je="NonMaxSuppressionV4",Qe="NonMaxSuppressionV5",Ze="OnesLike",et="OneHot",tt="Pack",nt="PadV2",rt="Pool",at="Pow",it="Prelu",ot="Prod",ut="Range",st="Real",ct="Reciprocal",lt="Relu",ft="Reshape",dt="ResizeNearestNeighbor",ht="ResizeNearestNeighborGrad",pt="ResizeBilinear",vt="ResizeBilinearGrad",mt="Relu6",gt="Reverse",bt="Round",yt="Rsqrt",wt="ScatterNd",xt="Select",Ot="Selu",kt="Slice",jt="Sin",_t="Sinh",St="Sign",Et="Sigmoid",Ct="Softplus",At="Sqrt",Tt="Sum",Nt="SpaceToBatchND",It="SplitV",Dt="Softmax",Rt="SparseFillEmptyRows",Ft="SparseReshape",Mt="SparseSegmentMean",Pt="SparseSegmentSum",Lt="SparseToDense",zt="SquaredDifference",Bt="Square",Ut="StridedSlice",Wt="StringNGrams",Vt="StringSplit",qt="StringToHashBucketFast",$t="Sub",Ht="Tan",Gt="Tanh",Kt="Tile",Xt="TopK",Yt="Transform",Jt="Transpose",Qt="Unique",Zt="Unpack",en="UnsortedSegmentSum",tn="ZerosLike",nn="Step",rn="FromPixels",an="RotateWithOffset",on="_FusedMatMul",un="FusedConv2D",sn="FusedDepthwiseConv2D"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(157);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},function(e,t,n){"use strict";e.exports=n(539)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(13),a=n(20),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var u=function(){r.a.startScope(n);try{var e=o.apply(void 0,arguments);return Object(a.x)(e)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(e),e}catch(t){throw r.a.endScope(null),t}};return Object.defineProperty(u,"name",{value:n,configurable:!0}),u}},function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return A}));var r=n(9),a=n(14),i=n(2),o=n.n(i),u=n(15),s=n(3),c=n(11),l=n(223),f=n(43),d=n(172),h=n(8),p=n(104),v=n(24),m=n(20),g=function(){function e(t,n){Object(s.a)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return Object(c.a)(e,[{key:"profileKernel",value:function(e,t,n){var a,i,o=function(){a=n()},u=v.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var s,c=Object(r.a)(a);try{for(c.s();!(s=c.n()).done;){s.value.dataSync()}}catch(h){c.e(h)}finally{c.f()}i=Promise.resolve({kernelMs:v.now()-u})}if(Object(f.c)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},d=0;d<a.length;d++)l(d);return{kernelName:e,outputs:a,inputs:t,timeMs:i.then((function(e){return e.kernelMs})),extraInfo:i.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var b=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?m.L("".concat(r,"ms"),9):r.error,u=m.L(e,25),s=t.rank,c=t.size,l=m.L(t.shape.toString(),14),f="";for(var d in a){var h=a[d];if(null!=h){var p=h.shape||t.shape,v=p.length;f+="".concat(d,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(u,"\t%c").concat(o,"\t%c").concat(s,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function y(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var u=e[o],s=u.inputs;for(var c in s){for(var l=s[c],f=!1,d=0;d<t.length;d++)if(r[l.id]){u.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[u.id]=!0;break}if(f)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,b=0;b<m.outputs.length;b++)if(h[m.outputs[b].id]){for(var y in g)h[g[y].id]=!0,p[m.id]=!0;break}for(var w=[],x=0;x<e.length;x++){var O=e[x];if(a[O.id]&&p[O.id]){var k={};for(var j in O.inputs){var _=O.inputs[j];r[_.id]&&(k[j]=_)}var S=Object.assign({},O);S.inputs=k,S.outputs=O.outputs,w.push(S)}}return w}function w(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var u=i.gradient(o),s=function(t){if(!(t in u))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(u),"."));var a=n((function(){return u[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!m.a(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var s=e[o.id];e[o.id]=r(s,a),s.dispose()}};for(var c in i.inputs)s(c)},i=t.length-1;i>=0;i--)a(i)}var x=n(18),O=n(44),k=n(94);function j(e){return null!=e.kernelName}var _=function(){function e(){Object(s.a)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Object(c.a)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),S=function(){function e(t){Object(s.a)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _}return Object(c.a)(e,[{key:"ready",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(k.b("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new g(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Object(p.d)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Object(p.d)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.b||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,k.b("Initialization of backend ".concat(e," failed")),k.b(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return k.b("Initialization of backend ".concat(e," failed")),k.b(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=A.runKernel(h.sb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return A.runKernel(h.x,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=Object(p.c)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),u=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=j(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(j(e)){var l=e.kernelName,f=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var h=Object(p.c)(l,this.backendName);m.b(null!=h,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:f,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var u=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(u)}return n}}else{var v=e.forwardFunc,g=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return v(a.backend,g)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var b,y=e.inputs,w=e.attrs,x=j(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(b=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(b),t=b.outputs):t=n()})),o&&this.addTapeNode(c,y,t,x,i,w),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-u,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(e){return null!=y[e]?y[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Object(p.b)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(m.b(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var u=n.filter((function(e,t){return o[t]}));return a.concat(u)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&m.z(e[0])&&(a=e.map((function(e){return v.encodeString(e)})));var i=r.write(a,t,n),o=new x.a(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var u=this.state.tensorInfo.get(i),s=Object(m.f)(a);this.state.numBytes+=s-u.bytes,u.bytes=s}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){n=n||"float32";var a=new x.a(t,n,e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new x.c(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*m.g(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof x.c||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*m.g(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,i,u,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,i=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Object(a.a)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i,u=Object(r.a)(this.state.activeProfile.kernels),e.prev=12,u.s();case 14:if((s=u.n()).done){e.next=24;break}return c=s.value,e.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=e.sent,e.next=21,c.extraInfo;case 21:c.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=Object(p.b)(e);null!=s&&(r=s.gradFunc),null!=r&&(u.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=m.F(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(u)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Object(O.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(m.b(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));m.b(o instanceof x.a,(function(){return"The result y returned by f() must be a tensor."}));var u=y(this.state.activeTape,t,o);if(!i&&0===u.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?E(o.shape):n,w(e,u,(function(e){return a.tidy(e)}),T);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=Object(r.a)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return m.b(m.u(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;m.b(r.every((function(e){return e instanceof x.a})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var u=function(t,n){return i=e.apply(void 0,[].concat(r,[n])),m.b(i.value instanceof x.a,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),m.b(m.u(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},s=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];m.b(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),m.b(a.every((function(e){return e instanceof x.a})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:u,backwardsFunc:s,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Object(v.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function E(e){var t=Object(m.D)(Object(m.O)(e),"float32");return A.makeTensor(t,e,"float32")}function C(){var e=Object(d.b)();if(null==e._tfengine){var t=new f.b(e);e._tfengine=new S(t)}return Object(f.d)(e._tfengine.ENV),Object(x.g)((function(){return e._tfengine})),e._tfengine}S.nextTensorId=0,S.nextVariableId=0;var A=C();function T(e,t){var n={a:e,b:t};return A.runKernel(h.d,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(228);var a=n(291),i=n(157);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(a.a)(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,s,"next",e)}function s(e){r(o,a,i,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(203);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),a=n(294);function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(38);function u(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function s(e){var t=Object(a.a)();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return u(this,n)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return _})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return E}));var r=n(16),a=n(17),i=n(2),o=n.n(i),u=n(15),s=n(3),c=n(11),l=n(172),f=n(14),d=n(20);function h(e,t,n,r){var a=Object(d.j)(t),i=function(e,t,n,r){var a=Object(d.O)(t),i=r[r.length-1],o=new Array(i).fill(0),u=t.length,s="complex64"===n?g(e):e;if(u>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],p(s[l+f],0,n).length);return o}(e,t,n,a),o=t.length,u=m(e,t,n,a,i),s=["Tensor"];return r&&(s.push("  dtype: ".concat(n)),s.push("  rank: ".concat(o)),s.push("  shape: [".concat(t,"]")),s.push("  values:")),s.push(u.map((function(e){return"    "+e})).join("\n")),s.join("\n")}function p(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Object(d.z)(e)?"'".concat(e,"'"):"bool"===n?v(e):parseFloat(e.toFixed(7)).toString(),Object(d.L)(r,t)}function v(e){return 0===e?"false":"true"}function m(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,u=t[0],s=t.length;if(0===s){if("complex64"===n){var c=g(e);return[p(c[0],0,n)]}return"bool"===n?[v(e[0])]:[e[0].toString()]}if(1===s){if(u>20){var l=3*o,d=Array.from(e.slice(0,l)),h=Array.from(e.slice((u-3)*o,u*o));return"complex64"===n&&(d=g(d),h=g(h)),["["+d.map((function(e,t){return p(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return p(e,a[u-3+t],n)})).join(", ")+"]"]}var b="complex64"===n?g(e):Array.from(e);return["["+b.map((function(e,t){return p(e,a[t],n)})).join(", ")+"]"]}var y=t.slice(1),w=r.slice(1),x=r[0]*o,O=[];if(u>20){for(var k=0;k<3;k++){var j=k*x,_=j+x;O.push.apply(O,Object(f.a)(m(e.slice(j,_),y,n,w,a,!1)))}O.push("...");for(var S=u-3;S<u;S++){var E=S*x,C=E+x;O.push.apply(O,Object(f.a)(m(e.slice(E,C),y,n,w,a,S===u-1)))}}else for(var A=0;A<u;A++){var T=A*x,N=T+x;O.push.apply(O,Object(f.a)(m(e.slice(T,N),y,n,w,a,A===u-1)))}var I=2===s?",":"";O[0]="["+O[0]+I;for(var D=1;D<O.length-1;D++)O[D]=" "+O[D]+I;for(var R=",\n",F=2;F<s;F++)R+="\n";return O[O.length-1]=" "+O[O.length-1]+"]"+(i?"":R),O}function g(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var b=n(24),y=function(){function e(t,n,r){var a=this;if(Object(s.a)(this,e),this.dtype=n,this.shape=t.slice(),this.size=d.O(t),null!=r){var i=r.length;d.b(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||d.n(n,this.size),this.strides=Object(d.j)(t)}return Object(c.a)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),d.b(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(u)}r++}for(var s=t[t.length-1],c=0;c<t.length-1;++c)s+=this.strides[c]*t[c];return this.values[s]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return w().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),w=null,x=null;function O(e){w=e}function k(e){x=e}function j(e){e}var _=function(){function e(t,n,r,a){Object(s.a)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=d.O(t),this.strides=Object(d.j)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object(c.a)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",x.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return x.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Object(d.U)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Object(d.U)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=w().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return b.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataSync",value:function(){this.throwIfDisposed();var e=w().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return b.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,w().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(w().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return x.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),x.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return h(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),x.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),w().makeVariable(this,e,t,n)}}]),e}();function S(){return Object(l.a)("Tensor",(function(){return _}))}Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),S();var E=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e,r,a,i){var o;return Object(s.a)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Object(c.a)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!d.a(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));w().disposeTensor(this),this.dataId=e.dataId,w().incRef(this,null)}},{key:"dispose",value:function(){w().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(_);Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return e instanceof _&&null!=e.assign&&e.assign instanceof Function}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({reshape_:function(e,t){var n={x:Object(i.a)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.a.runKernel(a.qc,n,o)}})},function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,u(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,u(e,--n,r),u(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2===0?e:e+1}function u(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function s(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function f(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f(g(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function h(e){f(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||I(e)&&!n)for(var r=0;r<e.length;++r)p(e[r],t,n);else t.push(e);return t}function v(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function m(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b(e){return e%1===0}function y(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function w(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function x(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function O(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var u=t(i);null!=n&&i>=n?a():setTimeout(o,u)}}()}))}function j(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function _(e,t){var n=t.length;return f((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),f(e.every((function(e){return b(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function S(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:_(t,e).sort(),o=0,u=0;u<e.length;++u){if(null!=i){if(i[o]===u&&1!==e[u])throw new Error("Can't squeeze axis ".concat(u," since its dim '").concat(e[u],"' is not 1"));(null==i[o]||i[o]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[o]<=u&&o++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function E(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function C(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function A(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function T(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function N(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function I(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function D(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function R(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function F(e){return"string"===typeof e||e instanceof String}function M(e){return"boolean"===typeof e}function P(e){return"number"===typeof e}function L(e){return Array.isArray(e)?L(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":P(e)?"float32":F(e)?"string":M(e)?"bool":"float32"}function z(e){return!!(e&&e.constructor&&e.call&&e.apply)}function B(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function U(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function W(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var u=t[0],s=t.slice(1),c=s.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<u;l++)a[l]=W(e+l*c,s,n,r);return a}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return W(0,e,t,n)}function q(e,t){for(var n=$(e,t),r=0;r<n.length;r++)n[r]=1;return n}function $(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function H(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return V(e,new Float32Array(n));if("int32"===t)return V(e,new Int32Array(n));if("bool"===t)return V(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function G(e){e.forEach((function(t){f(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function X(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Y(e){return e&&e.then&&"function"===typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"N",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"H",(function(){return o})),n.d(t,"S",(function(){return u})),n.d(t,"R",(function(){return s})),n.d(t,"J",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"m",(function(){return p})),n.d(t,"O",(function(){return v})),n.d(t,"y",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"v",(function(){return b})),n.d(t,"T",(function(){return y})),n.d(t,"P",(function(){return w})),n.d(t,"k",(function(){return x})),n.d(t,"L",(function(){return O})),n.d(t,"K",(function(){return k})),n.d(t,"s",(function(){return j})),n.d(t,"I",(function(){return _})),n.d(t,"Q",(function(){return S})),n.d(t,"o",(function(){return E})),n.d(t,"n",(function(){return C})),n.d(t,"h",(function(){return A})),n.d(t,"B",(function(){return T})),n.d(t,"p",(function(){return N})),n.d(t,"A",(function(){return I})),n.d(t,"g",(function(){return D})),n.d(t,"f",(function(){return R})),n.d(t,"z",(function(){return F})),n.d(t,"t",(function(){return M})),n.d(t,"w",(function(){return P})),n.d(t,"r",(function(){return L})),n.d(t,"u",(function(){return z})),n.d(t,"G",(function(){return B})),n.d(t,"j",(function(){return U})),n.d(t,"U",(function(){return V})),n.d(t,"D",(function(){return q})),n.d(t,"F",(function(){return $})),n.d(t,"E",(function(){return H})),n.d(t,"c",(function(){return G})),n.d(t,"C",(function(){return K})),n.d(t,"q",(function(){return X})),n.d(t,"x",(function(){return Y}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return le})),n.d(t,"b",(function(){return ue})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return B})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return W})),n.d(t,"i",(function(){return V})),n.d(t,"j",(function(){return q})),n.d(t,"k",(function(){return Fe})),n.d(t,"l",(function(){return $})),n.d(t,"m",(function(){return H})),n.d(t,"n",(function(){return G})),n.d(t,"o",(function(){return K})),n.d(t,"p",(function(){return X})),n.d(t,"q",(function(){return Y})),n.d(t,"r",(function(){return J})),n.d(t,"s",(function(){return se})),n.d(t,"t",(function(){return fe})),n.d(t,"u",(function(){return ve})),n.d(t,"v",(function(){return Me})),n.d(t,"w",(function(){return je})),n.d(t,"x",(function(){return Q})),n.d(t,"y",(function(){return Z})),n.d(t,"z",(function(){return ee})),n.d(t,"A",(function(){return te})),n.d(t,"B",(function(){return ne})),n.d(t,"C",(function(){return re})),n.d(t,"D",(function(){return Ce})),n.d(t,"E",(function(){return _e})),n.d(t,"F",(function(){return Ie})),n.d(t,"G",(function(){return ae})),n.d(t,"H",(function(){return ie})),n.d(t,"I",(function(){return $e})),n.d(t,"J",(function(){return He})),n.d(t,"K",(function(){return Ve})),n.d(t,"L",(function(){return de})),n.d(t,"M",(function(){return qe})),n.d(t,"N",(function(){return Ge})),n.d(t,"P",(function(){return Xe})),n.d(t,"Q",(function(){return F})),n.d(t,"S",(function(){return We}));var r=n(14),a=(n(4),n(23)),i=n(2),o=n.n(i),u=n(15),s=n(38),c=n(16),l=n(17),f=n(3),d=n(11),h=n(5),p=n.n(h),v=n(457),m=n(531),g=n(52),b=n(58);n.d(t,"O",(function(){return b.d})),n.d(t,"R",(function(){return b.k}));var y=n(25),w=n(93),x=n.n(w),O=p.a.createContext({onIonViewWillEnter:function(){},ionViewWillEnter:function(){},onIonViewDidEnter:function(){},ionViewDidEnter:function(){},onIonViewWillLeave:function(){},ionViewWillLeave:function(){},onIonViewDidLeave:function(){},ionViewDidLeave:function(){}}),k=function(){function e(){Object(f.a)(this,e),this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}return Object(d.a)(e,[{key:"onIonViewWillEnter",value:function(e){if(e.id){var t=this.ionViewWillEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}},{key:"ionViewWillEnter",value:function(){this.ionViewWillEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidEnter",value:function(e){if(e.id){var t=this.ionViewDidEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}},{key:"ionViewDidEnter",value:function(){this.ionViewDidEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewWillLeave",value:function(e){if(e.id){var t=this.ionViewWillLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}},{key:"ionViewWillLeave",value:function(){this.ionViewWillLeaveCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidLeave",value:function(e){if(e.id){var t=this.ionViewDidLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}},{key:"ionViewDidLeave",value:function(){this.ionViewDidLeaveCallbacks.forEach((function(e){return e()})),this.componentCanBeDestroyed()}},{key:"onComponentCanBeDestroyed",value:function(e){this.componentCanBeDestroyedCallback=e}},{key:"componentCanBeDestroyed",value:function(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}}]),e}(),j=p.a.createContext({getIonRedirect:function(){},getIonRoute:function(){},getPageManager:function(){},getStackManager:function(){},goBack:function(e){"undefined"!==typeof window&&("string"===typeof e?window.location.pathname=e:window.history.back())},navigate:function(e){"undefined"!==typeof window&&(window.location.pathname=e)},hasIonicRouter:function(){return!1},routeInfo:void 0,setCurrentTab:function(){},changeTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)},resetTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)}}),_=function(e){return e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")},S=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var r=C(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((function(n){if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){var r=n.substring(2),a=r[0].toLowerCase()+r.substring(1);A(a)||T(e,a,t[n])}else{"string"===typeof t[n]?e.setAttribute(S(n),t[n]):e[n]=t[n]}}))}},C=function(e,t,n){var r=t.className||t.class,a=n.className||n.class,i=N(e),o=N(r?r.split(" "):[]),u=N(a?a.split(" "):[]),s=[];return i.forEach((function(e){o.has(e)?(s.push(e),o.delete(e)):u.has(e)||s.push(e)})),o.forEach((function(e){return s.push(e)})),s.join(" ")},A=function(e){if("undefined"===typeof document)return!0;var t="on"+e,n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"===typeof r[t]}return n},T=function(e,t,n){var r=e.__events||(e.__events={}),a=r[t];a&&e.removeEventListener(t,a),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},N=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},I=function(e,t){var n=function(t,n){return p.a.createElement(e,Object.assign({},t,{forwardedRef:n}))};return n.displayName=t,p.a.forwardRef(n)},D=function(e,t){"function"===typeof e?e(t):null!=e&&(e.current=t)},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){D(t,e)}))}},F=function(){if("undefined"!==typeof window){var e=window.Ionic;if(e&&e.config)return e.config}return null},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_(e),r=function(r){Object(c.a)(i,r);var a=Object(l.a)(i);function i(e){var t;return Object(f.a)(this,i),(t=a.call(this,e)).handleClick=function(e){var n=t.props,r=n.routerLink,a=n.routerDirection,i=n.routerOptions,o=n.routerAnimation;void 0!==r&&(e.preventDefault(),t.context.navigate(r,a,void 0,o,i))},t.ref=p.a.createRef(),t.stableMergedRefs=R(t.ref,t.props.forwardedRef),t}return Object(d.a)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.ref.current;E(t,this.props,e)}},{key:"render",value:function(){var n=this,r=this.props,a=r.children,i=(r.forwardedRef,r.style),o=(r.className,r.ref,Object(y.d)(r,["children","forwardedRef","style","className","ref"])),u=Object.keys(o).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2).toLowerCase();A(n)&&(e[t]=o[t])}else["string","boolean","number"].includes(typeof o[t])&&(e[S(t)]=o[t]);return e}),{}),s=Object.assign(Object.assign({},u),{ref:this.stableMergedRefs,style:i});if(t)if(this.props.routerLink&&!this.props.href&&(s.href=this.props.routerLink),s.onClick){var c=s.onClick;s.onClick=function(e){c(e),e.defaultPrevented||n.handleClick(e)}}else s.onClick=this.handleClick;return p.a.createElement(e,s,a)}}],[{key:"displayName",get:function(){return n}},{key:"contextType",get:function(){return j}}]),i}(p.a.Component);return I(r,n)},P=M("ion-app"),L=M("ion-badge"),z=M("ion-button",!0),B=M("ion-card",!0),U=M("ion-col"),W=M("ion-content"),V=M("ion-grid"),q=M("ion-header"),$=M("ion-input"),H=M("ion-item",!0),G=M("ion-item-option",!0),K=M("ion-item-options"),X=M("ion-item-sliding"),Y=M("ion-label"),J=M("ion-list"),Q=M("ion-row"),Z=M("ion-select"),ee=M("ion-select-option"),te=M("ion-slide"),ne=M("ion-slides"),re=M("ion-spinner"),ae=M("ion-title"),ie=M("ion-toolbar"),oe=function(e,t){var n="on".concat(e,"DidDismiss"),r="on".concat(e,"DidPresent"),i="on".concat(e,"WillDismiss"),h="on".concat(e,"WillPresent"),v=function(p){Object(c.a)(m,p);var v=Object(l.a)(m);function m(e){var t;return Object(f.a)(this,m),(t=v.call(this,e)).isUnmounted=!1,t.handleDismiss=t.handleDismiss.bind(Object(s.a)(t)),t}return Object(d.a)(m,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.isOpen&&this.present();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0,this.overlay&&this.overlay.dismiss()}},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isOpen!==this.props.isOpen&&!0===this.props.isOpen&&this.present(t),!this.overlay||t.isOpen===this.props.isOpen||!1!==this.props.isOpen){e.next=4;break}return e.next=4,this.overlay.dismiss();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDismiss",value:function(e){this.props.onDidDismiss&&this.props.onDidDismiss(e),D(this.props.forwardedRef,null)}},{key:"present",value:function(){var e=Object(u.a)(o.a.mark((function e(u){var s,c,l,f=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.props,l=Object(y.d)(c,["isOpen","onDidDismiss","onDidPresent","onWillDismiss","onWillPresent"]),e.next=3,t.create(Object.assign({},l));case 3:if(this.overlay=e.sent,E(this.overlay,(s={},Object(a.a)(s,n,this.handleDismiss),Object(a.a)(s,r,(function(e){return f.props.onDidPresent&&f.props.onDidPresent(e)})),Object(a.a)(s,i,(function(e){return f.props.onWillDismiss&&f.props.onWillDismiss(e)})),Object(a.a)(s,h,(function(e){return f.props.onWillPresent&&f.props.onWillPresent(e)})),s),u),!0!==this.props.isOpen||!1!==this.isUnmounted){e.next=9;break}return D(this.props.forwardedRef,this.overlay),e.next=9,this.overlay.present();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}],[{key:"displayName",get:function(){return e}}]),m}(p.a.Component);return p.a.forwardRef((function(e,t){return p.a.createElement(v,Object.assign({},e,{forwardedRef:t}))}))},ue=oe("IonAlert",b.b),se=oe("IonLoading",b.g),ce=(b.i,function(e,t){var n="on".concat(e,"DidDismiss"),r="on".concat(e,"DidPresent"),i="on".concat(e,"WillDismiss"),h="on".concat(e,"WillPresent"),v=!1,m=function(p){Object(c.a)(g,p);var m=Object(l.a)(g);function g(e){var t;return Object(f.a)(this,g),t=m.call(this,e),"undefined"!==typeof document&&(t.el=document.createElement("div")),t.handleDismiss=t.handleDismiss.bind(Object(s.a)(t)),t}return Object(d.a)(g,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.present()}},{key:"componentWillUnmount",value:function(){this.overlay&&this.overlay.dismiss()}},{key:"handleDismiss",value:function(e){this.props.onDidDismiss&&this.props.onDidDismiss(e),D(this.props.forwardedRef,null)}},{key:"shouldComponentUpdate",value:function(e){return this.overlay&&e.isOpen!==this.props.isOpen&&!1===e.isOpen&&(v=!0),!0}},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.overlay&&E(this.overlay,this.props,t),t.isOpen!==this.props.isOpen&&!0===this.props.isOpen&&this.present(t),!this.overlay||t.isOpen===this.props.isOpen||!1!==this.props.isOpen){e.next=7;break}return e.next=5,this.overlay.dismiss();case 5:v=!1,this.forceUpdate();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"present",value:function(){var e=Object(u.a)(o.a.mark((function e(u){var s,c,l,f,d=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.props,l=Object(y.d)(c,["children","isOpen","onDidDismiss","onDidPresent","onWillDismiss","onWillPresent"]),f=Object.assign(Object.assign({},l),(s={ref:this.props.forwardedRef},Object(a.a)(s,n,this.handleDismiss),Object(a.a)(s,r,(function(e){return d.props.onDidPresent&&d.props.onDidPresent(e)})),Object(a.a)(s,i,(function(e){return d.props.onWillDismiss&&d.props.onWillDismiss(e)})),Object(a.a)(s,h,(function(e){return d.props.onWillPresent&&d.props.onWillPresent(e)})),s)),e.next=4,t.create(Object.assign(Object.assign({},f),{component:this.el,componentProps:{}}));case 4:return this.overlay=e.sent,D(this.props.forwardedRef,this.overlay),E(this.overlay,f,u),e.next=9,this.overlay.present();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return x.a.createPortal(this.props.isOpen||v?this.props.children:null,this.el)}}],[{key:"displayName",get:function(){return e}}]),g}(p.a.Component);return p.a.forwardRef((function(e,t){return p.a.createElement(m,Object.assign({},e,{forwardedRef:t}))}))}),le=ce("IonActionSheet",{create:function(e){return b.a.create(e)},dismiss:function(e,t,n){return b.a.dismiss(e,t,n)},getTop:function(){return b.a.getTop()}}),fe=ce("IonModal",b.h),de=(b.j,p.a.createContext({registerIonPage:function(){},isInOutlet:function(){return!1}})),he=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).ionPageElementRef=p.a.createRef(),r.stableMergedRefs=R(r.ionPageElementRef,r.props.forwardedRef),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.children,a=(t.routeInfo,t.forwardedRef,Object(y.d)(t,["className","children","routeInfo","forwardedRef"]));return p.a.createElement(O.Consumer,null,(function(t){return e.ionLifeCycleContext=t,p.a.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:e.stableMergedRefs},a),r)}))}}],[{key:"contextType",get:function(){return de}}]),n}(p.a.PureComponent),pe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(f.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.forwardedRef,a=Object(y.d)(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?p.a.createElement(he,Object.assign({className:t?"".concat(t):"",routeInfo:this.context.routeInfo,forwardedRef:r},a),n):p.a.createElement("div",Object.assign({className:t?"ion-page ".concat(t):"ion-page",ref:r},a),n)}}],[{key:"displayName",get:function(){return"IonPage"}},{key:"contextType",get:function(){return j}}]),n}(p.a.Component),ve=I(pe,"IonPage"),me=p.a.createContext({activeTab:void 0,selectTab:function(){return!1}}),ge="undefined"!==typeof HTMLElement?HTMLElement:function(){return function e(){Object(f.a)(this,e)}}(),be=M("ion-tab-button"),ye=M("ion-tab-bar"),we=M("ion-router-outlet"),xe=M("ion-icon"),Oe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(f.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.ionRouterOutlet&&(setTimeout((function(){e.context.registerIonPage(e.ionRouterOutlet,e.props.routeInfo)}),25),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var e=this,t=this.props,n=t.StackManager,r=t.children,a=t.routeInfo,i=Object(y.d)(t,["StackManager","children","routeInfo"]);return p.a.createElement(O.Consumer,null,(function(t){return e.ionLifeCycleContext=t,p.a.createElement(n,{routeInfo:a},p.a.createElement(we,Object.assign({setRef:function(t){return e.ionRouterOutlet=t}},i),r))}))}}],[{key:"contextType",get:function(){return de}}]),n}(p.a.Component),ke=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(f.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.context.getStackManager(),t=this.props,n=t.children,r=t.forwardedRef,a=Object(y.d)(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?a.ionPage?p.a.createElement(Oe,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},a),n):p.a.createElement(e,{routeInfo:this.context.routeInfo},p.a.createElement(we,Object.assign({},a,{forwardedRef:r}),n)):p.a.createElement(we,Object.assign({ref:r},this.props),this.props.children)}}],[{key:"contextType",get:function(){return j}}]),n}(p.a.Component),je=I(ke,"IonRouterOutlet"),_e=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).handleIonTabButtonClick=r.handleIonTabButtonClick.bind(Object(s.a)(r)),r}return Object(d.a)(n,[{key:"handleIonTabButtonClick",value:function(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}},{key:"render",value:function(){var e=this.props,t=Object(y.d)(e,["onClick"]);return p.a.createElement(be,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},t))}}],[{key:"displayName",get:function(){return"IonTabButton"}}]),n}(p.a.Component),Se=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).setActiveTabOnContext=function(e){};var a={};return p.a.Children.forEach(e.children,(function(t){var n,r,i,o;null!=t&&"object"===typeof t&&t.props&&(t.type===_e||t.type.isTabButton)&&(a[t.props.tab]={originalHref:t.props.href,currentHref:t.props.href,originalRouteOptions:t.props.href===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)?null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions:void 0,currentRouteOptions:t.props.href===(null===(i=e.routeInfo)||void 0===i?void 0:i.pathname)?null===(o=e.routeInfo)||void 0===o?void 0:o.routeOptions:void 0})})),r.state={tabs:a},r.onTabButtonClick=r.onTabButtonClick.bind(Object(s.a)(r)),r.renderTabButton=r.renderTabButton.bind(Object(s.a)(r)),r.setActiveTabOnContext=r.setActiveTabOnContext.bind(Object(s.a)(r)),r.selectTab=r.selectTab.bind(Object(s.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.tabs,n=Object.keys(t).find((function(n){var r=t[n].originalHref;return e.props.routeInfo.pathname.startsWith(r)}));n&&this.setState({activeTab:n})}},{key:"componentDidUpdate",value:function(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}},{key:"selectTab",value:function(e){var t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}},{key:"onTabButtonClick",value:function(e){var t=this.state.tabs[e.detail.tab],n=t.originalHref,r=e.detail.href;this.state.activeTab===e.detail.tab?n!==r&&this.context.resetTab(e.detail.tab,n,t.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,r,e.detail.routeOptions))}},{key:"renderTabButton",value:function(e){var t=this;return function(n){var r,a;if(null!=n&&n.props&&(n.type===_e||n.type.isTabButton)){var i=n.props.tab===e?null===(r=t.props.routeInfo)||void 0===r?void 0:r.pathname:t.state.tabs[n.props.tab].currentHref,o=n.props.tab===e?null===(a=t.props.routeInfo)||void 0===a?void 0:a.routeOptions:t.state.tabs[n.props.tab].currentRouteOptions;return p.a.cloneElement(n,{href:i,routeOptions:o,onClick:t.onTabButtonClick})}return null}}},{key:"render",value:function(){var e=this.state.activeTab;return p.a.createElement(ye,Object.assign({},this.props,{selectedTab:e}),p.a.Children.map(this.props.children,this.renderTabButton(e)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r,a,i=Object.assign({},t.tabs),o=Object.keys(t.tabs).find((function(n){var r=t.tabs[n].originalHref;return e.routeInfo.pathname.startsWith(r)}));p.a.Children.forEach(e.children,(function(e){if(null!=e&&"object"===typeof e&&e.props&&(e.type===_e||e.type.isTabButton)){var t=i[e.props.tab];t&&t.originalHref===e.props.href||(i[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));var u=t.activeTab;if(o&&u){var s=t.tabs[u].currentHref,c=t.tabs[u].currentRouteOptions;o===u&&s===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)&&c===(null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions)||(i[o]={originalHref:i[o].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:i[o].originalRouteOptions,currentRouteOptions:null===(a=e.routeInfo)||void 0===a?void 0:a.routeOptions},"pop"===e.routeInfo.routeAction&&o!==u&&(i[u]={originalHref:i[u].originalHref,currentHref:i[u].originalHref,originalRouteOptions:i[u].originalRouteOptions,currentRouteOptions:i[u].currentRouteOptions}))}return o&&e.onSetCurrentTab(o,e.routeInfo),{activeTab:o,tabs:i}}},{key:"contextType",get:function(){return j}}]),n}(p.a.PureComponent),Ee=p.a.memo((function(e){var t=e.forwardedRef,n=Object(y.d)(e,["forwardedRef"]),r=Object(h.useContext)(j);return p.a.createElement(Se,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)})),Ce=I(Ee,"IonTabBar"),Ae=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(f.a)(this,n),t.call(this)}return n}(ge);"undefined"!==typeof window&&window.customElements&&(customElements.get("ion-tabs")||customElements.define("ion-tabs",Ae));var Te={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},Ne={position:"relative",flex:1,contain:"layout size style"},Ie=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).routerOutletRef=p.a.createRef(),r.tabBarRef=p.a.createRef(),r.ionTabContextState={activeTab:void 0,selectTab:function(){return!1}},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=function(t){e.ionTabContextState.activeTab=t},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,i=r.onIonTabsDidChange,o=r.onIonTabsWillChange,u=Object(y.d)(r,["className","onIonTabsDidChange","onIonTabsWillChange"]),s="function"===typeof this.props.children?this.props.children(this.ionTabContextState):this.props.children;if(p.a.Children.forEach(s,(function(r){if(null!=r&&"object"===typeof r&&r.hasOwnProperty("type")){r.type===je||r.type.isRouterOutlet?e=p.a.cloneElement(r,{tabs:!0}):r.type===h.Fragment&&r.props.children[0].type===je&&(e=r.props.children[0]);var a={ref:n.tabBarRef};void 0!==i&&(a=Object.assign(Object.assign({},a),{onIonTabsDidChange:i})),void 0!==o&&(a=Object.assign(Object.assign({},a),{onIonTabsWillChange:o})),r.type===Ce||r.type.isTabBar?t=p.a.cloneElement(r,a):r.type!==h.Fragment||r.props.children[1].type!==Ce&&!r.props.children[1].type.isTabBar||(t=p.a.cloneElement(r.props.children[1],a))}})),!e)throw new Error("IonTabs must contain an IonRouterOutlet");if(!t)throw new Error("IonTabs needs a IonTabBar");return p.a.createElement(me.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?p.a.createElement(he,Object.assign({className:a?"".concat(a):"",routeInfo:this.context.routeInfo},u),p.a.createElement("ion-tabs",{className:"ion-tabs",style:Te},"top"===t.props.slot?t:null,p.a.createElement("div",{style:Ne,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null)):p.a.createElement("div",Object.assign({className:a?"".concat(a):"ion-tabs"},u,{style:Te}),"top"===t.props.slot?t:null,p.a.createElement("div",{style:Ne,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null))}}],[{key:"contextType",get:function(){return j}}]),n}(p.a.Component),De=function(t,n){e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),0},Re=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).props.name&&De(),r}return Object(d.a)(n,[{key:"render",value:function(){var e,t,n,r,a=this.props,i=a.icon,o=a.ios,u=a.md,s=Object(y.d)(a,["icon","ios","md"]);return o||u?(r="ios",n=Object(b.f)(window,r)?null!==(e=null!==o&&void 0!==o?o:u)&&void 0!==e?e:i:null!==(t=null!==u&&void 0!==u?u:o)&&void 0!==t?t:i):n=i,p.a.createElement(xe,Object.assign({ref:this.props.forwardedRef,icon:n},s),this.props.children)}}],[{key:"contextType",get:function(){return j}}]),n}(p.a.PureComponent),Fe=I(Re,"IonIcon"),Me=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.context.getIonRoute();return this.context.hasIonicRouter()&&n?p.a.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null)}}],[{key:"contextType",get:function(){return j}}]),n}(p.a.PureComponent),Pe=(p.a.PureComponent,p.a.createContext({routeInfo:void 0,push:function(){throw new Error("An Ionic Router is required for IonRouterContext")},back:function(){throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")}}));p.a.PureComponent;var Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(var a in t)t.hasOwnProperty(a)&&!r.includes(a)&&t[a]!==n[a]&&e[a](t[a]);var i=t.from;if(i&&i!==n.from){var o=Array.isArray(i)?i:[i];o.forEach((function(t){return e.from(t.property,t.value)}))}var u=t.to;if(u&&u!==n.to){var s=Array.isArray(u)?u:[u];s.forEach((function(t){return e.to(t.property,t.value)}))}var c=t.fromTo;if(c&&c!==n.fromTo){var l=Array.isArray(c)?c:[c];l.forEach((function(t){return e.fromTo(t.property,t.fromValue,t.toValue)}))}var f=t.onFinish;if(f&&f!==n.onFinish){var d=Array.isArray(f)?f:[f];d.forEach((function(t){return e.onFinish(t.callback,t.opts)}))}},ze=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o.progressStart,c=o.progressStep,l=o.progressEnd;!s||(null===(t=u.progressStart)||void 0===t?void 0:t.forceLinearEasing)===(null===s||void 0===s?void 0:s.forceLinearEasing)&&(null===(n=u.progressStart)||void 0===n?void 0:n.step)===(null===s||void 0===s?void 0:s.step)||e.progressStart(s.forceLinearEasing,s.step),c&&(null===(r=u.progressStep)||void 0===r?void 0:r.step)!==(null===c||void 0===c?void 0:c.step)&&e.progressStep(c.step),!l||(null===(a=u.progressEnd)||void 0===a?void 0:a.playTo)===(null===l||void 0===l?void 0:l.playTo)&&(null===(i=u.progressEnd)||void 0===i?void 0:i.step)===(null===l||void 0===l?void 0:l.step)&&(null===u||void 0===u?void 0:u.dur)===(null===l||void 0===l?void 0:l.dur)||e.progressEnd(l.playTo,l.step,l.dur)},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.play&&t.play&&e.play(),!n.pause&&t.pause&&e.pause(),!n.stop&&t.stop&&e.stop(),!n.destroy&&t.destroy&&e.destroy()};function Ue(e,t){var n=Object(h.useRef)(),r=Object(h.useMemo)((function(){return"on".concat(e,"DidDismiss")}),[e]),i=Object(h.useMemo)((function(){return"on".concat(e,"DidPresent")}),[e]),s=Object(h.useMemo)((function(){return"on".concat(e,"WillDismiss")}),[e]),c=Object(h.useMemo)((function(){return"on".concat(e,"WillPresent")}),[e]);return{present:function(){var e=Object(u.a)(o.a.mark((function e(u){var l,f,d,h,p,v,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=2;break}return e.abrupt("return");case 2:return f=u.onDidDismiss,d=u.onWillDismiss,h=u.onDidPresent,p=u.onWillPresent,v=Object(y.d)(u,["onDidDismiss","onWillDismiss","onDidPresent","onWillPresent"]),m=function(e){f&&f(e),n.current=void 0},e.next=6,t.create(Object.assign({},v));case 6:n.current=e.sent,E(n.current,(l={},Object(a.a)(l,r,m),Object(a.a)(l,i,(function(e){return h&&h(e)})),Object(a.a)(l,s,(function(e){return d&&d(e)})),Object(a.a)(l,c,(function(e){return p&&p(e)})),l)),n.current.present();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dismiss:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.current,!e.t0){e.next=4;break}return e.next=4,n.current.dismiss();case 4:n.current=void 0;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}function We(){var e=Ue("IonAlert",b.b);return[function(t,n){"string"===typeof t?e.present({message:t,buttons:null!==n&&void 0!==n?n:[{text:"Ok"}]}):e.present(t)},e.dismiss]}Object(m.a)({"arrow-back-sharp":g.a,"caret-back-sharp":g.e,"chevron-back":g.g,"chevron-forward":g.h,close:g.j,"close-circle":g.k,"close-sharp":g.l,"menu-outline":g.q,"menu-sharp":g.r,"reorder-two-sharp":g.v,"reorder-three-outline":g.u,"search-outline":g.y,"search-sharp":g.z}),"undefined"!==typeof window&&Object(v.a)(window);var Ve=p.a.createContext({addViewItem:function(){},canGoBack:function(){},clearOutlet:function(){},createViewItem:function(){},findViewItemByPathname:function(){},findLeavingViewItemByRouteInfo:function(){},findViewItemByRouteInfo:function(){},getChildrenToRender:function(){},goBack:function(){},unMountViewItem:function(){}}),qe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).ionLifeCycleContext=new k,r._isMounted=!1,r.ionLifeCycleContext.onComponentCanBeDestroyed((function(){r.props.mount||r._isMounted&&r.setState({show:!1},(function(){return r.props.removeView()}))})),r.state={show:!0},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.show;return p.a.createElement(O.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}]),n}(p.a.Component),$e=function(){function e(){Object(f.a)(this,e),this.locationHistory=[],this.tabHistory={}}return Object(d.a)(e,[{key:"add",value:function(e){"push"===e.routeAction||null==e.routeAction?this._add(e):"pop"===e.routeAction?this._pop(e):"replace"===e.routeAction&&this._replace(e),"root"===e.routeDirection&&(this._clear(),this._add(e))}},{key:"clearTabStack",value:function(e){var t=this,n=this._getRouteInfosByKey(e);n&&(n.forEach((function(e){t.locationHistory=t.locationHistory.filter((function(t){return t.id!==e.id}))})),this.tabHistory[e]=[])}},{key:"update",value:function(e){var t=this.locationHistory.findIndex((function(t){return t.id===e.id}));t>-1&&this.locationHistory.splice(t,1,e);var n=this.tabHistory[e.tab||""];if(n){var r=n.findIndex((function(t){return t.id===e.id}));r>-1?n.splice(r,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}},{key:"_add",value:function(e){var t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}},{key:"_areRoutesEqual",value:function(e,t){return!(!e||!t)&&(e.pathname===t.pathname&&e.search===t.search)}},{key:"_pop",value:function(e){var t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}},{key:"_replace",value:function(e){var t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}},{key:"_clear",value:function(){var e=this;Object.keys(this.tabHistory).forEach((function(t){return e.tabHistory[t]=[]})),this.locationHistory=[]}},{key:"_getRouteInfosByKey",value:function(e){var t;return e&&((t=this.tabHistory[e])||(t=this.tabHistory[e]=[])),t}},{key:"getFirstRouteInfoForTab",value:function(e){var t=this._getRouteInfosByKey(e);if(t)return t[0]}},{key:"getCurrentRouteInfoForTab",value:function(e){var t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}},{key:"findLastLocation",value:function(e){var t=this._getRouteInfosByKey(e.tab);if(t)for(var n=t.length-2;n>=0;n--){var r=t[n];if(r&&r.pathname===e.pushedByRoute)return r}for(var a=this.locationHistory.length-2;a>=0;a--){var i=this.locationHistory[a];if(i&&i.pathname===e.pushedByRoute)return i}}},{key:"previous",value:function(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}},{key:"current",value:function(){return this.locationHistory[this.locationHistory.length-1]}},{key:"canGoBack",value:function(){return this.locationHistory.length>1}}]),e}(),He=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e))._isMounted=!1,r.ionRouterContextValue={push:function(e,t,n,a,i){r.navigate(e,t,n,i,a)},back:function(e){r.goBack(void 0,e)},canGoBack:function(){return r.props.locationHistory.canGoBack()},nativeBack:function(){return r.props.onNativeBack()},routeInfo:r.props.routeInfo},r.state={goBack:r.goBack.bind(Object(s.a)(r)),hasIonicRouter:function(){return!0},navigate:r.navigate.bind(Object(s.a)(r)),getIonRedirect:r.getIonRedirect.bind(Object(s.a)(r)),getIonRoute:r.getIonRoute.bind(Object(s.a)(r)),getStackManager:r.getStackManager.bind(Object(s.a)(r)),getPageManager:r.getPageManager.bind(Object(s.a)(r)),routeInfo:r.props.routeInfo,setCurrentTab:r.props.onSetCurrentTab,changeTab:r.props.onChangeTab,resetTab:r.props.onResetTab},"undefined"!==typeof document&&(r.handleHardwareBackButton=r.handleHardwareBackButton.bind(Object(s.a)(r)),document.addEventListener("ionBackButton",r.handleHardwareBackButton)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&(document.removeEventListener("ionBackButton",this.handleHardwareBackButton),this._isMounted=!1)}},{key:"handleHardwareBackButton",value:function(e){var t=this;e.detail.register(0,(function(e){t._isMounted&&(t.nativeGoBack(),e())}))}},{key:"goBack",value:function(e,t){this.props.onNavigateBack(e,t)}},{key:"nativeGoBack",value:function(){this.props.onNativeBack()}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"forward",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"push",r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;this.props.onNavigate(e,n,t,r,a,i)}},{key:"getPageManager",value:function(){return he}},{key:"getIonRedirect",value:function(){return this.props.ionRedirect}},{key:"getIonRoute",value:function(){return this.props.ionRoute}},{key:"getStackManager",value:function(){return this.props.stackManager}},{key:"render",value:function(){return p.a.createElement(j.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},p.a.createElement(Pe.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}]),n}(p.a.PureComponent),Ge=function(){function e(){Object(f.a)(this,e),this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}return Object(d.a)(e,[{key:"add",value:function(e){var t=e.outletId;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}},{key:"clear",value:function(e){var t=this;setTimeout((function(){delete t.viewStacks[e]}),500)}},{key:"getViewItemsForOutlet",value:function(e){return this.viewStacks[e]||[]}},{key:"remove",value:function(e){var t=e.outletId,n=this.viewStacks[t];if(n){var r=n.find((function(t){return t.id===e.id}));r&&(r.mount=!1,this.viewStacks[t]=n.filter((function(e){return e.id!==r.id})))}}},{key:"getStackIds",value:function(){return Object.keys(this.viewStacks)}},{key:"getAllViewItems",value:function(){var e=this,t=this.getStackIds(),n=[];return t.forEach((function(t){n.push.apply(n,Object(r.a)(e.viewStacks[t]))})),n}}]),e}(),Ke={main:0},Xe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",n=(null!==(e=Ke[t])&&void 0!==e?e:0)+1;return Ke[t]=n,n.toString()}}).call(this,n(175))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({mul_:function(e,t){var n=Object(u.a)(e,"a","mul"),s=Object(u.a)(t,"b","mul"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Wb,f)}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"shuffle",(function(){return a.M})),n.d(t,"shuffleCombo",(function(){return a.N})),n.d(t,"clamp",(function(){return a.i})),n.d(t,"nearestLargerEven",(function(){return a.H})),n.d(t,"swap",(function(){return a.S})),n.d(t,"sum",(function(){return a.R})),n.d(t,"randUniform",(function(){return a.J})),n.d(t,"distSquared",(function(){return a.l})),n.d(t,"assert",(function(){return a.b})),n.d(t,"assertShapesMatch",(function(){return a.e})),n.d(t,"assertNonNull",(function(){return a.d})),n.d(t,"flatten",(function(){return a.m})),n.d(t,"sizeFromShape",(function(){return a.O})),n.d(t,"isScalarShape",(function(){return a.y})),n.d(t,"arraysEqual",(function(){return a.a})),n.d(t,"isInt",(function(){return a.v})),n.d(t,"tanh",(function(){return a.T})),n.d(t,"sizeToSquarishShape",(function(){return a.P})),n.d(t,"createShuffledIndices",(function(){return a.k})),n.d(t,"rightPad",(function(){return a.L})),n.d(t,"repeatedTry",(function(){return a.K})),n.d(t,"inferFromImplicitShape",(function(){return a.s})),n.d(t,"parseAxisParam",(function(){return a.I})),n.d(t,"squeezeShape",(function(){return a.Q})),n.d(t,"getTypedArrayFromDType",(function(){return a.o})),n.d(t,"getArrayFromDType",(function(){return a.n})),n.d(t,"checkConversionForErrors",(function(){return a.h})),n.d(t,"isValidDtype",(function(){return a.B})),n.d(t,"hasEncodingLoss",(function(){return a.p})),n.d(t,"isTypedArray",(function(){return a.A})),n.d(t,"bytesPerElement",(function(){return a.g})),n.d(t,"bytesFromStringArray",(function(){return a.f})),n.d(t,"isString",(function(){return a.z})),n.d(t,"isBoolean",(function(){return a.t})),n.d(t,"isNumber",(function(){return a.w})),n.d(t,"inferDtype",(function(){return a.r})),n.d(t,"isFunction",(function(){return a.u})),n.d(t,"nearestDivisor",(function(){return a.G})),n.d(t,"computeStrides",(function(){return a.j})),n.d(t,"toNestedArray",(function(){return a.U})),n.d(t,"makeOnesTypedArray",(function(){return a.D})),n.d(t,"makeZerosTypedArray",(function(){return a.F})),n.d(t,"makeZerosNestedTypedArray",(function(){return a.E})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return a.c})),n.d(t,"locToIndex",(function(){return a.C})),n.d(t,"indexToLoc",(function(){return a.q})),n.d(t,"isPromise",(function(){return a.x})),n.d(t,"hexToLong",(function(){return u})),n.d(t,"fingerPrint64",(function(){return x})),n.d(t,"createScalarValue",(function(){return O})),n.d(t,"toTypedArray",(function(){return k})),n.d(t,"now",(function(){return j})),n.d(t,"fetch",(function(){return _})),n.d(t,"encodeString",(function(){return S})),n.d(t,"decodeString",(function(){return E}));var r=n(43),a=n(20),i=n(341),o=n.n(i).a||i;function u(e){return o.fromString(e,!0,16)}var s=u("c3a5c85c97cb3127"),c=u("b492b66fbe98f273"),l=u("9ae16a3b2f90404f");function f(e){return e.xor(e.shru(47))}function d(e,t,n){var r=e.slice(t,t+n);return o.fromBytes(Array.from(r),!0,!0)}function h(e,t){return d(e,t,8)}function p(e,t){return d(e,t,4)}function v(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function g(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=v(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(v(a,44)),[a.add(r),i.add(o)]}(h(e,t),h(e,t+8),h(e,t+16),h(e,t+24),n,r)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=l.add(2*t),r=h(e,0).add(l),a=h(e,t-8),i=v(a,37).mul(n).add(r),o=v(r,25).add(a).mul(n);return m(i,o,n)}if(t>=4){var u=l.add(2*t),c=p(e,0);return m(c.shl(3).add(t),p(e,t-4),u)}if(t>0){var d=e[0],g=e[t>>1],b=e[t-1],y=d+(g<<8),w=t+(b<<2);return f(l.mul(y).xor(s.mul(w))).mul(l)}return l}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=h(e,0).mul(c),a=h(e,8),i=h(e,t-8).mul(n),o=h(e,t-16).mul(l);return m(v(r.add(a),43).add(v(i,30)).add(o),r.add(v(a.add(l),18)).add(i),n)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=h(e,0).mul(l),a=h(e,8),i=h(e,t-8).mul(n),o=h(e,t-16).mul(l),u=v(r.add(a),43).add(v(i,30)).add(o),s=m(u,r.add(v(a.add(l),18)).add(i),n),c=h(e,16).mul(n),f=h(e,24),d=u.add(h(e,t-32)).mul(n),p=s.add(h(e,t-24)).mul(n);return m(v(c.add(f),43).add(v(d,30)).add(p),c.add(v(f.add(r),18)).add(d),n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=o.fromNumber(81,!0);if(t<=32)return t<=16?b(e,t):y(e,t);if(t<=64)return w(e,t);var r=n,a=n.mul(c).add(113),i=f(a.mul(l).add(113)).mul(l),u=[o.UZERO,o.UZERO],d=[o.UZERO,o.UZERO];r=r.mul(l).add(h(e,0));var p=0,x=64*(t-1>>6),O=x+(t-1&63)-63;do{r=v(r.add(a).add(u[0]).add(h(e,p+8)),37).mul(c),a=v(a.add(u[1]).add(h(e,p+48)),42).mul(c),r=r.xor(d[1]),a=a.add(u[0]).add(h(e,p+40)),i=v(i.add(d[0]),33).mul(c),u=g(e,p,u[1].mul(c),r.add(d[0])),d=g(e,p+32,i.add(d[1]),a.add(h(e,p+16)));var k=[r,i];i=k[0],r=k[1],p+=64}while(p!==x);var j=c.add(i.and(255).shl(1));p=O,d[0]=d[0].add(t-1&63),u[0]=u[0].add(d[0]),d[0]=d[0].add(u[0]),r=v(r.add(a).add(u[0]).add(h(e,p+8)),37).mul(j),a=v(a.add(u[1]).add(h(e,p+48)),42).mul(j),r=r.xor(d[1].mul(9)),a=a.add(u[0].mul(9).add(h(e,p+40))),i=v(i.add(d[0]),33).mul(j),u=g(e,p,u[1].mul(j),r.add(d[0])),d=g(e,p+32,i.add(d[1]),a.add(h(e,p+16)));var _=[r,i];return i=_[0],r=_[1],m(m(u[0],d[0],j).add(f(a).mul(s)).add(i),m(u[1],d[1],j).add(r),j)}function O(e,t){return"string"===t?S(e):k([e],t)}function k(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.m(e)),Object(r.c)().getBool("DEBUG")&&a.h(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),i=0;i<n.length;++i)0!==Math.round(e[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(t))}function j(){return Object(r.c)().platform.now()}function _(e,t){return Object(r.c)().platform.fetch(e,t)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.encode(e,t)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.decode(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(u){i=[6,u],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({cast_:function(e,t){var n=Object(i.a)(e,"x","cast");if(!o.B(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var u={x:n},s={dtype:t};return r.a.runKernel(a.x,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(26);function a(e,t,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({add_:function(e,t){var n=Object(u.a)(e,"a","add"),s=Object(u.a)(t,"b","add"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({sub_:function(e,t){var n=Object(u.a)(e,"a","sub"),s=Object(u.a)(t,"b","sub"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Yc,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(181),c=n(12);var l=Object(c.b)({div_:function(e,t){var n=Object(u.a)(e,"a","div"),c=Object(u.a)(t,"b","div"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);if(n=f[0],c=f[1],"int32"===n.dtype&&"int32"===c.dtype)return Object(s.a)(n,c);var d={a:n,b:c};return a.a.runKernel(i.mc,d,{})}})},function(e,t,n){e.exports=n(533)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(27),u=n(12);var s=Object(u.b)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=Object(i.a)(e,"x","sum");"bool"===u.dtype&&(u=Object(o.a)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.a.runKernel(a.Zc,s,c)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(u){i=[6,u],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}Object.create;function u(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}Object.create},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),a=n(84);function i(e,t){if((Object(r.A)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r.A)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(a.a)(e,[],[],t)}},function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var u="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(u)}n.unshift(i)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({zerosLike_:function(e){var t={x:Object(i.a)(e,"x","zerosLike")};return r.a.runKernel(a.jd,t)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return o.a})),n.d(t,"e",(function(){return u.a})),n.d(t,"f",(function(){return s.a})),n.d(t,"g",(function(){return c.a})),n.d(t,"h",(function(){return l.a})),n.d(t,"i",(function(){return f.a})),n.d(t,"j",(function(){return d.a})),n.d(t,"k",(function(){return h.a})),n.d(t,"l",(function(){return p.a})),n.d(t,"m",(function(){return v.a})),n.d(t,"n",(function(){return m.a})),n.d(t,"o",(function(){return g.a})),n.d(t,"p",(function(){return b.a})),n.d(t,"q",(function(){return y.a})),n.d(t,"r",(function(){return C})),n.d(t,"w",(function(){return A.a})),n.d(t,"s",(function(){return T.a})),n.d(t,"t",(function(){return I})),n.d(t,"u",(function(){return D})),n.d(t,"v",(function(){return R})),n.d(t,"x",(function(){return F.a})),n.d(t,"z",(function(){return M.a})),n.d(t,"A",(function(){return P.a})),n.d(t,"B",(function(){return L.a})),n.d(t,"C",(function(){return z.a})),n.d(t,"D",(function(){return B.a})),n.d(t,"E",(function(){return U.a})),n.d(t,"F",(function(){return W.a})),n.d(t,"G",(function(){return V.a})),n.d(t,"H",(function(){return x.a})),n.d(t,"I",(function(){return q})),n.d(t,"J",(function(){return $})),n.d(t,"K",(function(){return H})),n.d(t,"L",(function(){return G})),n.d(t,"M",(function(){return K.a})),n.d(t,"N",(function(){return X.a})),n.d(t,"O",(function(){return Y.a})),n.d(t,"P",(function(){return J.a})),n.d(t,"Q",(function(){return Z})),n.d(t,"R",(function(){return ee.a})),n.d(t,"S",(function(){return te.a})),n.d(t,"U",(function(){return ne.a})),n.d(t,"V",(function(){return re.a})),n.d(t,"W",(function(){return ae.a})),n.d(t,"X",(function(){return ie.a})),n.d(t,"Y",(function(){return se})),n.d(t,"Z",(function(){return ce.a})),n.d(t,"ab",(function(){return le.a})),n.d(t,"bb",(function(){return fe.a})),n.d(t,"cb",(function(){return de.a})),n.d(t,"eb",(function(){return he.a})),n.d(t,"fb",(function(){return pe.a})),n.d(t,"hb",(function(){return ve.a})),n.d(t,"ib",(function(){return me.a})),n.d(t,"jb",(function(){return ge.a})),n.d(t,"kb",(function(){return be.a})),n.d(t,"lb",(function(){return ye.a})),n.d(t,"mb",(function(){return Oe})),n.d(t,"ob",(function(){return ke.a})),n.d(t,"pb",(function(){return je.a})),n.d(t,"qb",(function(){return _e.a})),n.d(t,"sb",(function(){return Se.a})),n.d(t,"ub",(function(){return Ee.a})),n.d(t,"vb",(function(){return Ce.a})),n.d(t,"xb",(function(){return Ae.a})),n.d(t,"Bb",(function(){return Te.a})),n.d(t,"Cb",(function(){return Ne.a})),n.d(t,"Db",(function(){return Ie.a})),n.d(t,"Eb",(function(){return De.a})),n.d(t,"Fb",(function(){return Re.a})),n.d(t,"Gb",(function(){return Fe.a})),n.d(t,"Ib",(function(){return Me.a})),n.d(t,"Jb",(function(){return Pe.a})),n.d(t,"Kb",(function(){return Le.a})),n.d(t,"Lb",(function(){return ze.a})),n.d(t,"Mb",(function(){return Be.a})),n.d(t,"Nb",(function(){return Ue.a})),n.d(t,"Ob",(function(){return We.a})),n.d(t,"Pb",(function(){return Ve.a})),n.d(t,"Qb",(function(){return qe.a})),n.d(t,"Rb",(function(){return $e.a})),n.d(t,"Sb",(function(){return He.a})),n.d(t,"Ub",(function(){return O.a})),n.d(t,"Vb",(function(){return Ge.a})),n.d(t,"Wb",(function(){return Ke.a})),n.d(t,"Xb",(function(){return Xe.a})),n.d(t,"Yb",(function(){return Ye.a})),n.d(t,"Zb",(function(){return Je.a})),n.d(t,"ac",(function(){return Qe.a})),n.d(t,"bc",(function(){return tt})),n.d(t,"cc",(function(){return nt.a})),n.d(t,"dc",(function(){return rt.a})),n.d(t,"ec",(function(){return at.a})),n.d(t,"fc",(function(){return it.a})),n.d(t,"gc",(function(){return ct})),n.d(t,"ic",(function(){return k.a})),n.d(t,"jc",(function(){return lt})),n.d(t,"kc",(function(){return ft.a})),n.d(t,"lc",(function(){return dt.a})),n.d(t,"nc",(function(){return ht.a})),n.d(t,"oc",(function(){return pt.a})),n.d(t,"pc",(function(){return Ze.a})),n.d(t,"qc",(function(){return vt.a})),n.d(t,"sc",(function(){return mt})),n.d(t,"tc",(function(){return gt.a})),n.d(t,"uc",(function(){return bt})),n.d(t,"vc",(function(){return yt})),n.d(t,"wc",(function(){return wt})),n.d(t,"xc",(function(){return xt})),n.d(t,"yc",(function(){return Ot.a})),n.d(t,"zc",(function(){return kt.a})),n.d(t,"Ac",(function(){return jt.a})),n.d(t,"Bc",(function(){return _t.a})),n.d(t,"Cc",(function(){return St.a})),n.d(t,"Dc",(function(){return Et})),n.d(t,"Ec",(function(){return At})),n.d(t,"Fc",(function(){return Tt})),n.d(t,"Gc",(function(){return Nt.a})),n.d(t,"Hc",(function(){return It.a})),n.d(t,"Ic",(function(){return Dt.a})),n.d(t,"Jc",(function(){return Rt.a})),n.d(t,"Kc",(function(){return Ft.a})),n.d(t,"Lc",(function(){return Mt.a})),n.d(t,"Mc",(function(){return we.a})),n.d(t,"Nc",(function(){return Pt.a})),n.d(t,"Oc",(function(){return Lt})),n.d(t,"Pc",(function(){return zt})),n.d(t,"Qc",(function(){return Bt})),n.d(t,"Rc",(function(){return Ut})),n.d(t,"Tc",(function(){return Wt.a})),n.d(t,"Uc",(function(){return Vt.a})),n.d(t,"Vc",(function(){return qt.a})),n.d(t,"Xc",(function(){return $t.a})),n.d(t,"Yc",(function(){return Ht.a})),n.d(t,"Zc",(function(){return Gt.a})),n.d(t,"ad",(function(){return _.a})),n.d(t,"bd",(function(){return Kt.a})),n.d(t,"dd",(function(){return Xt.a})),n.d(t,"ed",(function(){return Yt.a})),n.d(t,"fd",(function(){return S.a})),n.d(t,"gd",(function(){return Jt})),n.d(t,"hd",(function(){return Qt})),n.d(t,"id",(function(){return Zt})),n.d(t,"jd",(function(){return en})),n.d(t,"kd",(function(){return tn.a})),n.d(t,"ld",(function(){return nn.a})),n.d(t,"md",(function(){return rn.a})),n.d(t,"nb",(function(){return an.a})),n.d(t,"wb",(function(){return on.a})),n.d(t,"Ab",(function(){return un.a})),n.d(t,"Sc",(function(){return sn.a})),n.d(t,"qd",(function(){return cn.a})),n.d(t,"rd",(function(){return ln.a})),n.d(t,"sd",(function(){return ut.a})),n.d(t,"td",(function(){return fn.a})),n.d(t,"ud",(function(){return dn.a})),n.d(t,"vd",(function(){return hn.a})),n.d(t,"wd",(function(){return pn.a})),n.d(t,"xd",(function(){return vn.a})),n.d(t,"zd",(function(){return st.a})),n.d(t,"Ad",(function(){return mn.a})),n.d(t,"Bd",(function(){return gn.a})),n.d(t,"Cd",(function(){return E.a})),n.d(t,"Dd",(function(){return bn.a})),n.d(t,"Ed",(function(){return yn.a})),n.d(t,"Fd",(function(){return xn})),n.d(t,"Gd",(function(){return On.a})),n.d(t,"Hd",(function(){return kn})),n.d(t,"Id",(function(){return jn})),n.d(t,"Jd",(function(){return _n})),n.d(t,"Kd",(function(){return xe.a})),n.d(t,"Ld",(function(){return Sn.a})),n.d(t,"Nd",(function(){return En.a})),n.d(t,"Od",(function(){return Cn.a})),n.d(t,"Pd",(function(){return An.a})),n.d(t,"Qd",(function(){return Tn.a})),n.d(t,"Rd",(function(){return Nn})),n.d(t,"Sd",(function(){return In.a})),n.d(t,"Td",(function(){return Dn.a})),n.d(t,"Ud",(function(){return Rn.a})),n.d(t,"Vd",(function(){return Fn.a})),n.d(t,"y",(function(){return Bn})),n.d(t,"Md",(function(){return Un.a})),n.d(t,"mc",(function(){return Wn.a})),n.d(t,"hc",(function(){return qn})),n.d(t,"Wc",(function(){return $n.a})),n.d(t,"od",(function(){return Hn.a})),n.d(t,"tb",(function(){return Gn.a})),n.d(t,"db",(function(){return Kn})),n.d(t,"gb",(function(){return Xn})),n.d(t,"T",(function(){return Yn})),n.d(t,"zb",(function(){return Qn})),n.d(t,"rc",(function(){return j.b})),n.d(t,"a",(function(){return j.a})),n.d(t,"yb",(function(){return ua})),n.d(t,"Hb",(function(){return sa})),n.d(t,"Tb",(function(){return ca})),n.d(t,"pd",(function(){return ia})),n.d(t,"rb",(function(){return r})),n.d(t,"cd",(function(){return oa})),n.d(t,"nd",(function(){return la})),n.d(t,"yd",(function(){return fa}));var r={};n.r(r),n.d(r,"conv2d",(function(){return or})),n.d(r,"depthwiseConv2d",(function(){return cr})),n.d(r,"matMul",(function(){return lr}));var a=n(74),i=n(361),o=n(362),u=n(30),s=n(363),c=n(252),l=n(253),f=n(254),d=n(255),h=n(364),p=n(365),v=n(366),m=n(256),g=n(367),b=n(182),y=n(368),w=n(7),x=n(59),O=n(46),k=n(22),j=n(12),_=n(110),S=n(49),E=n(226);var C=Object(j.b)({basicLSTMCell_:function(e,t,n,r,a,i){var o=Object(w.a)(e,"forgetBias","basicLSTMCell"),s=Object(w.a)(t,"lstmKernel","basicLSTMCell"),c=Object(w.a)(n,"lstmBias","basicLSTMCell"),l=Object(w.a)(r,"data","basicLSTMCell"),f=Object(w.a)(a,"c","basicLSTMCell"),d=Object(w.a)(i,"h","basicLSTMCell"),h=Object(x.a)([l,d],1),p=Object(O.a)(h,s),v=Object(u.a)(p,c),m=v.shape[0],g=v.shape[1]/4,b=[m,g],y=Object(S.a)(v,[0,0],b),j=Object(S.a)(v,[0,g],b),C=Object(S.a)(v,[0,2*g],b),A=Object(S.a)(v,[0,3*g],b),T=Object(u.a)(Object(k.a)(Object(_.a)(y),Object(E.a)(j)),Object(k.a)(f,Object(_.a)(Object(u.a)(o,C))));return[T,Object(k.a)(Object(E.a)(T),Object(_.a)(A))]}}),A=n(149),T=n(129),N=n(20);var I=Object(j.b)({batchNorm2d_:function(e,t,n,r,a,i){var o,u,s=Object(w.a)(e,"x","batchNorm"),c=Object(w.a)(t,"mean","batchNorm"),l=Object(w.a)(n,"variance","batchNorm");return null!=a&&(o=Object(w.a)(a,"scale","batchNorm")),null!=r&&(u=Object(w.a)(r,"offset","batchNorm")),N.b(2===s.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,".")})),N.b(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}});var D=Object(j.b)({batchNorm3d_:function(e,t,n,r,a,i){var o,u,s=Object(w.a)(e,"x","batchNorm"),c=Object(w.a)(t,"mean","batchNorm"),l=Object(w.a)(n,"variance","batchNorm");return null!=a&&(o=Object(w.a)(a,"scale","batchNorm")),null!=r&&(u=Object(w.a)(r,"offset","batchNorm")),N.b(3===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,".")})),N.b(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}});var R=Object(j.b)({batchNorm4d_:function(e,t,n,r,a,i){var o,u,s=Object(w.a)(e,"x","batchNorm"),c=Object(w.a)(t,"mean","batchNorm"),l=Object(w.a)(n,"variance","batchNorm");return null!=a&&(o=Object(w.a)(a,"scale","batchNorm")),null!=r&&(u=Object(w.a)(r,"offset","batchNorm")),N.b(4===s.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,".")})),N.b(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}}),F=n(257),M=n(369),P=n(159),L=n(81),z=n(27),B=n(370),U=n(371),W=n(109),V=n(99);var q=Object(j.b)({concat1d_:function(e){return Object(x.a)(e,0)}});var $=Object(j.b)({concat2d_:function(e,t){return Object(x.a)(e,t)}});var H=Object(j.b)({concat3d_:function(e,t){return Object(x.a)(e,t)}});var G=Object(j.b)({concat4d_:function(e,t){return Object(x.a)(e,t)}}),K=n(258),X=n(107),Y=n(259),J=n(372),Q=n(301);var Z=Object(j.b)({conv3dTranspose_:function(e,t,n,r,a){var i=Object(w.a)(e,"x","conv3dTranspose"),o=Object(w.a)(t,"filter","conv3dTranspose");return Object(Q.a)(n,i,o,r,a)}}),ee=n(183),te=n(260),ne=n(184),re=n(373),ae=n(261),ie=n(150),oe=n(13),ue=n(8);var se=Object(j.b)({diag_:function(e){var t={x:Object(w.a)(e,"x","diag")};return oe.a.runKernel(ue.S,t)}}),ce=n(262),le=n(32),fe=n(263),de=n(264),he=n(374),pe=n(185),ve=n(151),me=n(375),ge=n(71),be=n(105),ye=n(376),we=n(19),xe=n(111);var Oe=Object(j.b)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Object(L.a)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var u=Object(we.a)(a.toTensor(),[e,t]);if(null==n)return u;if(1===n.length)return Object(xe.a)(Object(be.a)(u,0),[n[0],1,1]);if(2===n.length)return Object(xe.a)(Object(be.a)(Object(be.a)(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(xe.a)(Object(be.a)(Object(be.a)(Object(be.a)(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),ke=n(147),je=n(186),_e=n(181),Se=n(152),Ee=n(73),Ce=n(108),Ae=n(187),Te=n(377),Ne=n(378),Ie=n(379),De=n(188),Re=n(189),Fe=n(91),Me=n(380),Pe=n(265),Le=n(118),ze=n(266),Be=n(381),Ue=n(382),We=n(190),Ve=n(100),qe=n(153),$e=n(191),He=n(268),Ge=n(112),Ke=n(192),Xe=n(383),Ye=n(384),Je=n(148),Qe=n(138),Ze=n(90),et=n(18);function tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=Object(w.a)(e,"x","meshgrid",e instanceof et.a?e.dtype:"float32");if(void 0===t)return[i];var o=Object(w.a)(t,"y","meshgrid",t instanceof et.a?t.dtype:"float32"),u=Object(N.O)(i.shape),s=Object(N.O)(o.shape);return"xy"===a?(i=Object(we.a)(i,[1,-1]),o=Object(we.a)(o,[-1,1]),[Object(O.a)(Object(Ze.a)([s,1],i.dtype),i),Object(O.a)(o,Object(Ze.a)([1,u],o.dtype))]):(i=Object(we.a)(i,[-1,1]),o=Object(we.a)(o,[1,-1]),[Object(O.a)(i,Object(Ze.a)([1,s],i.dtype)),Object(O.a)(Object(Ze.a)([u,1],o.dtype),o)])}var nt=n(167),rt=n(193),at=n(269),it=n(270),ot=n(70),ut=n(47),st=n(31);var ct=Object(j.b)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Object(w.a)(e,"x","moments");var r=Object(N.I)(t,e.shape),a=Object(Qe.a)(e,r,n),i=a.shape;n||(i=Object(ot.e)(a.shape,r));var o=Object(ut.a)(Object(st.a)(Object(z.a)(e,"float32"),Object(we.a)(a,i))),u=Object(Qe.a)(o,r,n);return{mean:a,variance:u}}});var lt=Object(j.b)({multiRNNCell_:function(e,t,n,r){for(var a=Object(w.a)(t,"data","multiRNNCell"),i=Object(w.b)(n,"c","multiRNNCell"),o=Object(w.b)(r,"h","multiRNNCell"),u=a,s=[],c=0;c<e.length;c++){var l=e[c](u,i[c],o[c]);s.push(l[0]),s.push(l[1]),u=l[1]}for(var f=[],d=[],h=0;h<s.length;h+=2)f.push(s[h]),d.push(s[h+1]);return[f,d]}}),ft=n(385),dt=n(55),ht=n(194),pt=n(168),vt=n(386);var mt=Object(j.b)({outerProduct_:function(e,t){var n=Object(w.a)(e,"v1","outerProduct"),r=Object(w.a)(t,"v2","outerProduct");N.b(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Object(we.a)(n,[-1,1]),i=Object(we.a)(r,[1,-1]);return Object(O.a)(a,i)}}),gt=n(92);var bt=Object(j.b)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Object(gt.a)(e,[t],n)}});var yt=Object(j.b)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(gt.a)(e,t,n)}});var wt=Object(j.b)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(gt.a)(e,t,n)}});var xt=Object(j.b)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(gt.a)(e,t,n)}}),Ot=n(271),kt=n(89),jt=n(195),_t=n(251),St=n(272);var Et=Object(j.b)({rand_:function(e,t,n){var r=Object(N.O)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return oe.a.makeTensor(a,e,n)}}),Ct=n(160);var At=Object(j.b)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ct.b(t,n,r,a),o=Object(L.a)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}});var Tt=Object(j.b)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ct.a(t,n,r,!1,a),o=Object(L.a)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Nt=n(273),It=n(161),Dt=n(169),Rt=n(387),Ft=n(126),Mt=n(196),Pt=n(82);var Lt=Object(j.b)({reverse1d_:function(e){var t=Object(w.a)(e,"x","reverse");return N.b(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Object(Pt.a)(t,0)}});var zt=Object(j.b)({reverse2d_:function(e,t){var n=Object(w.a)(e,"x","reverse");return N.b(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Object(Pt.a)(n,t)}});var Bt=Object(j.b)({reverse3d_:function(e,t){var n=Object(w.a)(e,"x","reverse");return N.b(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Object(Pt.a)(n,t)}});var Ut=Object(j.b)({reverse4d_:function(e,t){var n=Object(w.a)(e,"x","reverse");return N.b(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Object(Pt.a)(n,t)}}),Wt=n(274),Vt=n(275),qt=n(36),$t=n(276),Ht=n(277),Gt=n(388),Kt=n(389),Xt=n(278),Yt=n(279);var Jt=Object(j.b)({slice1d_:function(e,t,n){var r=Object(w.a)(e,"x","slice1d");return N.b(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Object(S.a)(r,[t],[n])}});var Qt=Object(j.b)({slice2d_:function(e,t,n){var r=Object(w.a)(e,"x","slice2d");return N.b(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Object(S.a)(r,t,n)}});var Zt=Object(j.b)({slice3d_:function(e,t,n){var r=Object(w.a)(e,"x","slice3d");return N.b(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Object(S.a)(r,t,n)}});var en=Object(j.b)({slice4d_:function(e,t,n){var r=Object(w.a)(e,"x","slice4d");return N.b(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Object(S.a)(r,t,n)}}),tn=n(390),nn=n(267),rn=n(154),an=n(197),on=n(170),un=n(280),sn=n(198),cn=n(101),ln=n(68),fn=n(199),dn=n(155),hn=n(102),pn=n(127),vn=n(391),mn=n(34),gn=n(392),bn=n(131),yn=n(83),wn=n(84);function xn(e,t,n){if(Object(N.d)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Object(w.c)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(wn.a)(e,t,r,n)}var On=n(281);function kn(e,t,n){if(Object(N.d)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Object(w.c)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function jn(e,t,n){if(Object(N.d)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Object(w.c)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function _n(e,t,n){if(Object(N.d)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Object(w.c)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Object(wn.a)(e,t,r,n)}var Sn=n(282),En=n(393),Cn=n(283),An=n(200),Tn=n(128);function Nn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return oe.a.makeVariable(e,t,n,r)}var In=n(62),Dn=n(284),Rn=n(125),Fn=n(41),Mn=n(2),Pn=n.n(Mn),Ln=n(15);function zn(){return(zn=Object(Ln.a)(Pn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Object(w.a)(t,"tensor","boolMask"),i=Object(w.a)(n,"mask","boolMask","bool"),o=null==r?0:r,u=i.rank,s=a.shape,N.b(u>0,(function(){return"mask cannot be scalar"})),N.e(s.slice(o,o+u),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+u;l++)c*=s[l];return f=s.slice(0,o).concat([c],s.slice(o+u)),d=Object(we.a)(a,f),h=Object(we.a)(i,[-1]),e.next=14,Object(Dn.a)(h);case 14:return p=e.sent,v=Object(dn.a)(p,[1]),m=Object(Se.a)(d,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),d.dispose(),h.dispose(),p.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bn=function(e,t,n){return zn.apply(this,arguments)},Un=n(85),Wn=n(201),Vn=n(44);var qn=Object(j.b)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Object(w.a)(e,"v","movingAverage"),o=Object(w.a)(t,"x","movingAverage"),s=Object(w.a)(n,"decay","movingAverage");Object(Vn.assertTypesMatch)(i,o),N.b(N.a(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=Object(qt.a)(1),l=Object(st.a)(c,s),f=Object(k.a)(Object(st.a)(o,i),l);if(a){N.b(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Object(w.a)(r,"step","movingAverage");f=Object(le.a)(f,Object(st.a)(c,Object(kt.a)(s,d)))}return Object(u.a)(i,f)}}),$n=n(394),Hn=n(411),Gn=n(395);var Kn=Object(j.b)({dropout_:function(e,t,n,r){var a=Object(w.a)(e,"x","dropout");if(N.b("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),N.b(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof et.a?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(N.a(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Object(le.a)(Object(je.a)(Object(u.a)(Object(Nt.a)(i,0,1,"float32",r),o)),o);return Object(k.a)(a,s)}});function Xn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Yn(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Object(yn.a)(a,"float32")}function Jn(){return(Jn=Object(Ln.a)(Pn.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h,p,v,m,g,b=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:1,a=Object(w.a)(t,"predictions","inTopK"),i=Object(w.a)(n,"targets","inTopK"),Object(N.b)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Object(N.b)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),Object(N.e)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Object(N.b)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,i.data();case 13:s=e.sent,c=u.length/o,l=o,f=Object(N.o)("bool",c),d=0;case 17:if(!(d<c)){e.next=35;break}for(h=d*l,p=u.subarray(h,h+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort((function(e,t){return t.value-e.value})),f[d]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(v[g].index!==s[d]){e.next=29;break}return f[d]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:d++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Object(bn.a)(f,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qn=function(e,t){return Jn.apply(this,arguments)},Zn=n(4),er=n(64),tr=n(37),nr=n(209),rr=n(206),ar=n(56),ir=n(75);var or=Object(j.b)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,f=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,v=e.leakyreluAlpha;if(h=h||"linear",!1===Object(ir.d)(oe.a.state.gradientDepth,h)){var m=Object(X.a)(t,n,r,a,o,c,l);return null!=f&&(m=Object(u.a)(m,f)),Object(ir.a)(m,h,p,v)}var g=Object(w.a)(t,"x","conv2d"),b=Object(w.a)(n,"filter","conv2d"),y=g,x=!1;3===g.rank&&(x=!0,y=Object(we.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),N.b(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),N.b(4===b.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(b.rank,".")})),null!=l&&N.b(N.v(a),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(a,".")})),N.b(y.shape[3]===b.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(b.shape[2],".")})),N.b(ar.h(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(c,"'")})),N.b("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var O,k,j=ar.a(y.shape,b.shape,r,c,a,l);if(null!=f){O=Object(w.a)(f,"bias","fused conv2d");var _=Object(Vn.makeTypesMatch)(O,g);O=Object(Zn.a)(_,1)[0],tr.a(j.outShape,O.shape)}null!=p&&(k=Object(w.a)(p,"prelu weights","fused conv2d"));var S=function(e,t){var n=Object(Zn.a)(t,4),i=n[0],o=n[1],u=n[2],s=n[3],l=Object(ir.c)(e,u,h);N.b(ar.i(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(c,"'")}));var f=[Object(rr.a)(o.shape,l,i,r,a),Object(nr.a)(o,l,i.shape,r,a)];if(null!=s){var d=Object(ir.b)(s,l);f.push(d)}return f},E={x:y,filter:b,bias:O,preluActivationWeights:k},C={strides:r,pad:a,dataFormat:o,dilations:c,dimRoundingMode:l,activation:h,leakyreluAlpha:v};return null==f?Object(er.a)((function(e,t,n){var r=oe.a.runKernel(ue.lb,E,C);return n([t,e,r]),x&&(r=Object(we.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}))(y,b):Object(er.a)((function(e,t,n,r){var a=oe.a.runKernel(ue.lb,E,C);return r([t,e,a,n]),x&&(a=Object(we.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}))(y,b,O)}}),ur=n(305),sr=n(304);var cr=Object(j.b)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,f=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,v=e.leakyreluAlpha;if(!1===Object(ir.d)(oe.a.state.gradientDepth,h)){var m=Object(ie.a)(t,n,r,a,o,c,l);return null!=f&&(m=Object(u.a)(m,f)),Object(ir.a)(m,h,p,v)}var g=Object(w.a)(t,"x","depthwiseConv2d"),b=Object(w.a)(n,"filter","depthwiseConv2d"),y=g,x=!1;3===g.rank&&(x=!0,y=Object(we.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),N.b(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),N.b(4===b.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(b.rank,".")})),N.b(y.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(b.shape[2],".")})),null==c&&(c=[1,1]),N.b(ar.h(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(c,"'")})),null!=l&&N.b(N.v(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(l," but got pad ").concat(a,".")}));var O,k,j=ar.a(y.shape,b.shape,r,c,a,l,!0);if(null!=f){O=Object(w.a)(f,"bias","fused conv2d");var _=Object(Vn.makeTypesMatch)(O,g),S=Object(Zn.a)(_,1);O=S[0],tr.a(j.outShape,O.shape)}null!=p&&(k=Object(w.a)(p,"prelu weights","fused depthwiseConv2d"));var E=function(e,t){N.b(ar.i(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(c,"'")}));var n=Object(Zn.a)(t,4),i=n[0],o=n[1],u=n[2],s=n[3],f=Object(ir.c)(e,u,h),d=Object(sr.a)(o.shape,f,i,r,a,c,l),p=Object(ur.a)(o,f,i.shape,r,a,c,l);return null!=s?[d,p,Object(ir.b)(O,f)]:[d,p]},C={x:y,filter:b,bias:O,preluActivationWeights:k},A={strides:r,pad:a,dataFormat:o,dilations:c,dimRoundingMode:l,activation:h,leakyreluAlpha:v};return null==f?Object(er.a)((function(e,t,n){var r=oe.a.runKernel(ue.mb,C,A);return n([t,e,r]),x&&(r=Object(we.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}))(y,b):Object(er.a)((function(e,t,n,r){var a=oe.a.runKernel(ue.mb,C,A);return r([t,e,a,n]),x&&(a=Object(we.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}))(y,b,O)}});var lr=Object(j.b)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Object(ir.d)(oe.a.state.gradientDepth,l)){var h=Object(O.a)(t,n,a,o);return null!=s&&(h=Object(u.a)(h,s)),Object(ir.a)(h,l,f,d)}var p=Object(w.a)(t,"a","fused matMul"),v=Object(w.a)(n,"b","fused matMul"),m=Object(Vn.makeTypesMatch)(p,v),g=Object(Zn.a)(m,2);p=g[0],v=g[1];var b=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],x=a?p.shape[p.rank-1]:p.shape[p.rank-2],k=o?v.shape[v.rank-2]:v.shape[v.rank-1],j=p.shape.slice(0,-2),_=v.shape.slice(0,-2),S=N.O(j),E=N.O(_);N.b(p.rank>=2&&v.rank>=2&&p.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(p.rank," and ").concat(v.rank,".")})),N.b(N.a(j,_),(function(){return"Error in fused matMul: outer dimensions (".concat(j,") and (")+"".concat(_,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," must match.")})),N.b(b===y,(function(){return"Error in fused matMul: inner shapes (".concat(b,") and (")+"".concat(y,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var C,A,T=p.shape.slice(0,-2).concat([x,k]),I=a?Object(we.a)(p,[S,b,x]):Object(we.a)(p,[S,x,b]),D=o?Object(we.a)(v,[E,k,y]):Object(we.a)(v,[E,y,k]);if(null!=s){C=Object(w.a)(s,"bias","fused matMul");var R=Object(Vn.makeTypesMatch)(C,p);C=Object(Zn.a)(R,1)[0],tr.a(T,C.shape)}null!=f&&(A=Object(w.a)(f,"prelu weights","fused matMul"));var F=function(e,t){var n,r,i=Object(Zn.a)(t,4),u=i[0],c=i[1],f=i[2],d=i[3],h=Object(ir.c)(Object(we.a)(e,f.shape),f,l);return a||o?!a&&o?(n=Object(O.a)(h,c,!1,!1),r=Object(O.a)(h,u,!0,!1)):a&&!o?(n=Object(O.a)(c,h,!1,!0),r=Object(O.a)(u,h,!1,!1)):(n=Object(O.a)(c,h,!0,!0),r=Object(O.a)(h,u,!0,!0)):(n=Object(O.a)(h,c,!1,!0),r=Object(O.a)(u,h,!0,!1)),null!=s?[n,r,Object(ir.b)(d,h)]:[n,r]},M={a:I,b:D,bias:C,preluActivationWeights:A},P={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};return null==s?Object(er.a)((function(e,t,n){var r=oe.a.runKernel(ue.kd,M,P);return n([e,t,r]),{value:Object(we.a)(r,T),gradFunc:F}}))(I,D):Object(er.a)((function(e,t,n,r){var a=oe.a.runKernel(ue.kd,M,P);return r([e,t,a,n]),{value:Object(we.a)(a,T),gradFunc:F}}))(I,D,C)}});var fr=Object(j.b)({hammingWindow_:function(e){return Yn(e,.54,.46)}});var dr=Object(j.b)({hannWindow_:function(e){return Yn(e,.5,.5)}});var hr=Object(j.b)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Object(S.a)(e,i,t)),i+=n;if(r)for(;i<e.size;){var u=i+t-e.size,s=Object(x.a)([Object(S.a)(e,i,t-u),Object(ke.a)([u],a)]);o.push(s),i+=n}return 0===o.length?xn([],[0,t]):Object(we.a)(Object(x.a)(o),[o.length,t])}});var pr=Object(j.b)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dr;null==r&&(r=Xn(t));var i=hr(e,t,n),o=Object(k.a)(i,a(t));return Object(sn.a)(o,r)}});var vr=Object(j.b)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(w.a)(e,"image","cropAndResize"),u=Object(w.a)(t,"boxes","cropAndResize","float32"),s=Object(w.a)(n,"boxInd","cropAndResize","int32"),c=u.shape[0];N.b(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),N.b(2===u.rank&&4===u.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(u.shape,".")})),N.b(1===s.rank&&s.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(u.shape,".")})),N.b(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),N.b(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),N.b("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:u,boxInd:s},f={method:a,extrapolationValue:i,cropSize:r},d=oe.a.runKernel(ue.L,l,f);return d}});var mr=Object(j.b)({flipLeftRight_:function(e){var t=Object(w.a)(e,"image","flipLeftRight","float32");N.b(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return oe.a.runKernel(ue.gb,n,{})}});var gr=Object(j.b)({grayscaleToRGB_:function(e){var t=Object(w.a)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];N.b(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),N.b(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Object(xe.a)(t,a)}});var br=Object(j.b)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(w.a)(e,"image","rotateWithOffset","float32");N.b(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},u=oe.a.runKernel(ue.wc,i,o);return u}});function yr(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),N.b(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),N.b(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),N.b(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),N.b(1===t.rank,(function(){return"scores must be a 1D tensor"})),N.b(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),N.b(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var wr=Object(j.b)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Object(w.a)(e,"boxes","nonMaxSuppression"),o=Object(w.a)(t,"scores","nonMaxSuppression"),u=yr(i,o,n,r,a),s={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold};return oe.a.runKernel(ue.Yb,{boxes:i,scores:o},s)}}),xr=n(124);function Or(){return(Or=Object(Ln.a)(Pn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Object(w.a)(t,"boxes","nonMaxSuppressionAsync"),u=Object(w.a)(n,"scores","nonMaxSuppressionAsync"),s=yr(o,u,r,a,i),r=s.maxOutputSize,a=s.iouThreshold,i=s.scoreThreshold,e.next=10,Promise.all([o.data(),u.data()]);case 10:return c=e.sent,l=c[0],f=c[1],d=Object(xr.a)(l,f,r,a,i),h=d.selectedIndices,o!==t&&o.dispose(),u!==n&&u.dispose(),e.abrupt("return",Object(yn.a)(h,"int32"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kr=function(e,t,n){return Or.apply(this,arguments)};var jr=Object(j.b)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(w.a)(e,"boxes","nonMaxSuppression"),u=Object(w.a)(t,"scores","nonMaxSuppression"),s=yr(o,u,n,r,a,i),c={boxes:o,scores:u},l={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold,softNmsSigma:i=s.softNmsSigma},f=oe.a.runKernel(ue.ac,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function _r(){return(_r=Object(Ln.a)(Pn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,u=Object(w.a)(t,"boxes","nonMaxSuppressionAsync"),s=Object(w.a)(n,"scores","nonMaxSuppressionAsync"),c=yr(u,s,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([u.data(),s.data()]);case 12:return l=e.sent,f=l[0],d=l[1],h=Object(xr.c)(f,d,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Object(yn.a)(p,"int32"),selectedScores:Object(yn.a)(v)});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sr=function(e,t,n){return _r.apply(this,arguments)};var Er=Object(j.b)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(w.a)(e,"boxes","nonMaxSuppression"),u=Object(w.a)(t,"scores","nonMaxSuppression"),s=yr(o,u,n,r,a,null),c=s.maxOutputSize,l=s.iouThreshold,f=s.scoreThreshold,d={boxes:o,scores:u},h={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},p=oe.a.runKernel(ue.Zb,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}});function Cr(){return(Cr=Object(Ln.a)(Pn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,x=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],u=Object(w.a)(t,"boxes","nonMaxSuppressionAsync"),s=Object(w.a)(n,"scores","nonMaxSuppressionAsync"),c=yr(u,s,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,d=c.scoreThreshold,e.next=11,Promise.all([u.data(),s.data()]);case 11:return h=e.sent,p=Object(Zn.a)(h,2),v=p[0],m=p[1],g=Object(xr.b)(v,m,l,f,d,o),b=g.selectedIndices,y=g.validOutputs,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Object(yn.a)(b,"int32"),validOutputs:Object(qt.a)(y,"int32")});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ar=function(e,t,n){return Cr.apply(this,arguments)},Tr=n(303),Nr=n(302);function Ir(e,t){for(var n,r,a,i,o,s,c=Object(yn.a)([-1]),l=Object(yn.a)([0]),f=Object(yn.a)([0]),d=0;d<e.size-1;d++){n=Object(S.a)(e,0,d+1),r=Object(S.a)(e,d+1),o=Object(le.a)(Object(mn.a)(n),t),s=Object(le.a)(Object(mn.a)(r),t);var h=Object(mn.a)(Object(k.a)(n,Object(It.a)(0,n.size)));a=Object(le.a)(h,Object(mn.a)(n));var p=Object(ke.a)(r.shape,n.size),v=Object(u.a)(Object(It.a)(0,r.size),p),m=Object(k.a)(r,v);i=Object(le.a)(Object(mn.a)(m),Object(mn.a)(r));var g=Object(st.a)(a,i),b=Object(st.a)(a,i),y=Object(k.a)(o,s);f=Object(k.a)(Object(k.a)(y,g),b);var w=Object(Ee.a)(f,l);l=Object(In.a)(w,f,l),c=Object(In.a)(w,Object(yn.a)([d]),c)}return c}var Dr=Object(j.b)({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=Object(w.a)(e,"image","threshold"),l=.2989,f=.587,d=.114,h=c.shape[0]*c.shape[1],p=Object(k.a)(Object(yn.a)([s]),255);if(N.b(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),N.b(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),N.b("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),N.b("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var v=Object(cn.a)(c,[1,1,1],-1),m=Object(Zn.a)(v,3);t=m[0],n=m[1],r=m[2];var g=Object(k.a)(t,l),b=Object(k.a)(n,f),y=Object(k.a)(r,d);a=Object(u.a)(Object(u.a)(g,b),y)}else a=e;if("otsu"===i){var x=Object(F.a)(Object(z.a)(Object(Wt.a)(a),"int32"),Object(bn.a)([]),256);p=Ir(x,h)}var O=o?Object(Fe.a)(a,p):Object(Ee.a)(a,p),j=Object(z.a)(Object(k.a)(O,255),"int32");return j}});var Rr=Object(j.b)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Object(w.a)(e,"image","transform","float32"),u=Object(w.a)(t,"transforms","transform","float32");N.b(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),N.b(2===u.rank&&(u.shape[0]===o.shape[0]||1===u.shape[0])&&8===u.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),N.b(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var s={image:o,transforms:u},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return oe.a.runKernel(ue.ed,s,c)}});var Fr=Object(j.b)({bandPart_:function(e,t,n){Object(N.b)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Object(N.b)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Object(w.a)(e,"a","bandPart");Object(N.b)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=Object(Zn.a)(i,2),u=o[0],s=o[1];if(!(t<=u))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=u),n<0&&(n=s);var c=Object(we.a)(Object(It.a)(0,u,1,"int32"),[-1,1]),l=Object(It.a)(0,s,1,"int32"),f=Object(st.a)(c,l),d=Object(Ve.a)(Object(Fe.a)(f,Object(qt.a)(+t,"int32")),Object(Ce.a)(f,Object(qt.a)(-n,"int32"))),h=Object(Rn.a)([u,s],r.dtype);return Object(we.a)(Object(hn.a)(Object(Tn.a)(Object(we.a)(r,[-1,u,s])).map((function(e){return Object(In.a)(d,e,h)}))),a)}});var Mr=Object(j.b)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Object(N.b)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Object(N.b)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Object(cn.a)(e,e.shape[0],0).map((function(e){return Object(dn.a)(e,[0])}))),Object(N.b)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(oe.a.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Object(k.a)(Object(mn.a)(Object(k.a)(n[a],t)),n[a]);t=Object(st.a)(t,i)}return Object(le.a)(t,Object(Wn.a)(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Object(hn.a)(n,0):n}}),Pr=n(50);function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oe.a.tidy((function(){Object(N.b)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Oe(n),i=Object(W.a)(e),o=xn([[1]],[1,1]),u=Object(W.a)(o),s=n>=r?r:n,c=function(e){var t=i,s=u,c=a,l=oe.a.tidy((function(){var t=Object(S.a)(i,[e,e],[n-e,1]),s=Object(Wn.a)(t),c=Object(S.a)(i,[e,e],[1,1]),l=Object(In.a)(Object(Ee.a)(c,0),xn([[-1]]),xn([[1]])),f=Object(st.a)(c,Object(k.a)(l,s)),d=Object(le.a)(t,f);u=1===d.shape[0]?Object(W.a)(o):Object(x.a)([o,Object(S.a)(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var h=Object(dt.a)(Object(le.a)(Object(O.a)(l,f),s)),p=Object(S.a)(i,[e,0],[n-e,r]),v=Object(k.a)(h,u),m=Object(Un.a)(u);if(0===e)i=Object(st.a)(p,Object(O.a)(v,Object(O.a)(m,p)));else{var g=Object(st.a)(p,Object(O.a)(v,Object(O.a)(m,p)));i=Object(x.a)([Object(S.a)(i,[0,0],[e,r]),g],0)}var b=Object(Un.a)(v),y=Object(S.a)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Object(st.a)(y,Object(O.a)(Object(O.a)(y,u),b));else{var w=Object(st.a)(y,Object(O.a)(Object(O.a)(y,u),b));a=Object(x.a)([Object(S.a)(a,[0,0],[n,e]),w],1)}return[u,i,a]})),f=Object(Zn.a)(l,3);u=f[0],i=f[1],a=f[2],Object(Pr.d)([t,s,c])},l=0;l<s;++l)c(l);return!t&&n>r&&(a=Object(S.a)(a,[0,0],[n,r]),i=Object(S.a)(i,[0,0],[r,r])),[a,i]}))}var zr=Object(j.b)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(N.b)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Lr(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Object(Tn.a)(Object(we.a)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Lr(e,t),r=Object(Zn.a)(n,2),o=r[0],u=r[1];a.push(o),i.push(u)}));var o=Object(we.a)(Object(hn.a)(a,0),e.shape),u=Object(we.a)(Object(hn.a)(i,0),e.shape);return[o,u]}}),Br=n(65);var Ur=Object(j.b)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Br.a.SUM_BY_NONZERO_WEIGHTS,r=Object(w.a)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Object(w.a)(t,"weights","computeWeightedLoss"));var i=null==a?r:Object(k.a)(r,a);if(n===Br.a.NONE)return i;if(n===Br.a.SUM)return Object(mn.a)(i);if(n===Br.a.MEAN){if(null==a)return Object(Qe.a)(i);var o=r.size/a.size,u=Object(le.a)(Object(mn.a)(i),Object(mn.a)(a));return o>1?Object(le.a)(u,Object(qt.a)(o)):u}if(n===Br.a.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(le.a)(Object(mn.a)(i),Object(qt.a)(r.size));var s=Object(k.a)(a,Object(Ze.a)(r.shape)),c=Object(z.a)(Object(mn.a)(Object(ht.a)(s,Object(qt.a)(0))),"float32");return Object(le.a)(Object(mn.a)(i),c)}throw Error("Unknown reduction: ".concat(n))}});var Wr=Object(j.b)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Br.a.SUM_BY_NONZERO_WEIGHTS,i=Object(w.a)(e,"labels","absoluteDifference"),o=Object(w.a)(t,"predictions","absoluteDifference"),u=null;null!=n&&(u=Object(w.a)(n,"weights","absoluteDifference")),Object(N.e)(i.shape,o.shape,"Error in absoluteDifference: ");var s=Object(a.a)(Object(st.a)(i,o));return Ur(s,u,r)}});var Vr=Object(j.b)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Br.a.SUM_BY_NONZERO_WEIGHTS,i=Object(w.a)(e,"labels","cosineDistance"),o=Object(w.a)(t,"predictions","cosineDistance"),u=null;null!=r&&(u=Object(w.a)(r,"weights","cosineDistance")),Object(N.e)(i.shape,o.shape,"Error in cosineDistance: ");var s=Object(qt.a)(1),c=Object(st.a)(s,Object(mn.a)(Object(k.a)(i,o),n,!0));return Ur(c,u,a)}});var qr=Object(j.b)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Br.a.SUM_BY_NONZERO_WEIGHTS,a=Object(w.a)(e,"labels","hingeLoss"),i=Object(w.a)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Object(w.a)(n,"weights","hingeLoss")),Object(N.e)(a.shape,i.shape,"Error in hingeLoss: ");var u=Object(qt.a)(1);a=Object(st.a)(Object(k.a)(Object(qt.a)(2),a),u);var s=Object(Ft.a)(Object(st.a)(u,Object(k.a)(a,i)));return Ur(s,o,r)}});var $r=Object(j.b)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Br.a.SUM_BY_NONZERO_WEIGHTS,o=Object(w.a)(e,"labels","huberLoss"),s=Object(w.a)(t,"predictions","huberLoss"),c=null;null!=n&&(c=Object(w.a)(n,"weights","huberLoss")),Object(N.e)(o.shape,s.shape,"Error in huberLoss: ");var l=Object(qt.a)(r),f=Object(a.a)(Object(st.a)(s,o)),d=Object(rt.a)(f,l),h=Object(st.a)(f,d),p=Object(u.a)(Object(k.a)(Object(qt.a)(.5),Object(ut.a)(d)),Object(k.a)(l,h));return Ur(p,c,i)}});var Hr=Object(j.b)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Br.a.SUM_BY_NONZERO_WEIGHTS,i=Object(w.a)(e,"labels","logLoss"),o=Object(w.a)(t,"predictions","logLoss"),s=null;null!=n&&(s=Object(w.a)(n,"weights","logLoss")),Object(N.e)(i.shape,o.shape,"Error in logLoss: ");var c=Object(qt.a)(1),l=Object(qt.a)(r),f=Object(dt.a)(Object(k.a)(i,Object(Le.a)(Object(u.a)(o,l)))),d=Object(k.a)(Object(st.a)(c,i),Object(Le.a)(Object(u.a)(Object(st.a)(c,o),l))),h=Object(st.a)(f,d);return Ur(h,s,a)}});var Gr=Object(j.b)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Br.a.SUM_BY_NONZERO_WEIGHTS,a=Object(w.a)(e,"labels","meanSquaredError"),i=Object(w.a)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Object(w.a)(n,"weights","meanSquaredError")),Object(N.e)(a.shape,i.shape,"Error in meanSquaredError: ");var u=Object(fn.a)(a,i);return Ur(u,o,r)}});function Kr(e,t){var n=Object(w.a)(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object(w.a)(t,"logits","sigmoidCrossEntropyWithLogits");Object(N.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=Object(Ft.a)(r),o=Object(k.a)(r,n),s=Object(ze.a)(Object(ge.a)(Object(dt.a)(Object(a.a)(r))));return Object(u.a)(Object(st.a)(i,o),s)}var Xr=Object(j.b)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Br.a.SUM_BY_NONZERO_WEIGHTS,i=Object(w.a)(e,"multiClassLabels","sigmoidCrossEntropy"),o=Object(w.a)(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Object(w.a)(n,"weights","sigmoidCrossEntropy")),Object(N.e)(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Object(qt.a)(r),l=Object(qt.a)(1),f=Object(qt.a)(.5);i=Object(u.a)(Object(k.a)(i,Object(st.a)(l,c)),Object(k.a)(f,c))}var d=Kr(i,o);return Ur(d,s,a)}});function Yr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Object(er.a)((function(e,t,r){var a=Object(We.a)(t,[n],!0),i=Object(st.a)(Object(z.a)(t,"float32"),a);r([e,i]);var o=Object(dt.a)(Object(k.a)(i,e));return{value:Object(mn.a)(o,[n]),gradFunc:function(e,t){var r=Object(Zn.a)(t,2),a=r[0],i=r[1],o=Object(ot.e)(e.shape,[n]);return[Object(k.a)(Object(we.a)(e,o),Object(st.a)(Object(z.a)(a,"float32"),Object(ge.a)(i))),Object(k.a)(Object(we.a)(e,o),Object(st.a)(Object(ge.a)(i),Object(z.a)(a,"float32")))]}}}));return r(e,t)}var Jr=Object(j.b)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Br.a.SUM_BY_NONZERO_WEIGHTS,i=Object(w.a)(e,"onehotLabels","softmaxCrossEntropy"),o=Object(w.a)(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Object(w.a)(n,"weights","softmaxCrossEntropy")),Object(N.e)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Object(qt.a)(r),l=Object(qt.a)(1),f=Object(qt.a)(i.shape[1]);i=Object(u.a)(Object(k.a)(i,Object(st.a)(l,c)),Object(le.a)(c,f))}var d=Yr(i,o);return Ur(d,s,a)}});var Qr=Object(j.b)({sparseFillEmptyRows_:function(e,t,n,r){var a=Object(w.a)(e,"indices","sparseFillEmptyRows"),i=Object(w.a)(t,"values","sparseFillEmptyRows"),o=Object(w.a)(n,"denseShape","sparseFillEmptyRows"),u=Object(w.a)(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==u.rank)throw new Error("Default value should be a scalar but received shape ".concat(u.shape));var s={indices:a,values:i,denseShape:o,defaultValue:u},c=oe.a.runKernel(ue.Kc,s);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Zr=Object(j.b)({sparseReshape_:function(e,t,n){var r=Object(w.a)(e,"inputIndices","sparseReshape"),a=Object(w.a)(t,"inputShape","sparseReshape"),i=Object(w.a)(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},u=oe.a.runKernel(ue.Lc,o);return{outputIndices:u[0],outputShape:u[1]}}});var ea=Object(j.b)({sparseSegmentMean_:function(e,t,n){var r=Object(w.a)(e,"data","sparseSegmentMean"),a=Object(w.a)(t,"indices","sparseSegmentMean"),i=Object(w.a)(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return oe.a.runKernel(ue.Mc,o)}});var ta=Object(j.b)({sparseSegmentSum_:function(e,t,n){var r=Object(w.a)(e,"data","sparseSegmentSum"),a=Object(w.a)(t,"indices","sparseSegmentSum"),i=Object(w.a)(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return oe.a.runKernel(ue.Nc,o)}});var na=Object(j.b)({stringNGrams_:function(e,t,n,r,a,i,o,u){var s=Object(w.a)(e,"data","stringNGrams","string");if("string"!==s.dtype)throw new Error("Data must be of datatype string");if(1!==s.shape.length)throw new Error("Data must be a vector, saw: ".concat(s.shape));var c=Object(w.a)(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:u},f={data:s,dataSplits:c},d=oe.a.runKernel(ue.Vc,f,l);return{nGrams:d[0],nGramsSplits:d[1]}}});var ra=Object(j.b)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(w.a)(e,"input","stringSplit","string"),a=Object(w.a)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},u=oe.a.runKernel(ue.Wc,o,i);return{indices:u[0],values:u[1],shape:u[2]}}});var aa=Object(j.b)({stringToHashBucketFast_:function(e,t){var n=Object(w.a)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return oe.a.runKernel(ue.Xc,a,r)}}),ia={fft:an.a,ifft:on.a,rfft:sn.a,irfft:un.a},oa={hammingWindow:fr,hannWindow:dr,frame:hr,stft:pr},ua={flipLeftRight:mr,grayscaleToRGB:gr,resizeNearestNeighbor:Nr.a,resizeBilinear:Tr.a,rotateWithOffset:br,cropAndResize:vr,nonMaxSuppression:wr,nonMaxSuppressionAsync:kr,nonMaxSuppressionWithScore:jr,nonMaxSuppressionWithScoreAsync:Sr,nonMaxSuppressionPadded:Er,nonMaxSuppressionPaddedAsync:Ar,threshold:Dr,transform:Rr},sa={bandPart:Fr,gramSchmidt:Mr,qr:zr},ca={absoluteDifference:Wr,computeWeightedLoss:Ur,cosineDistance:Vr,hingeLoss:qr,huberLoss:$r,logLoss:Hr,meanSquaredError:Gr,sigmoidCrossEntropy:Xr,softmaxCrossEntropy:Jr},la={sparseFillEmptyRows:Qr,sparseReshape:Zr,sparseSegmentMean:ea,sparseSegmentSum:ta},fa={stringNGrams:na,stringSplit:ra,stringToHashBucketFast:aa}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return g}));var r=n(4),a=n(2),i=n.n(a),o=n(15),u=n(3),s=n(11),c=n(20),l=n(94),f="tfjsflags",d=function(){function e(t){Object(u.a)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=h,this.populateURLFlags()}return Object(s.a)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&l.b("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];l.b("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Object(c.x)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(f in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=Object(r.a)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(i,o)}))}}}]),e}();function h(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return p(t,r[0],r[1]),r.join("=")})),t}function p(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function v(){return m}var m=null;function g(e){m=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeTypesMatch",(function(){return o})),n.d(t,"assertTypesMatch",(function(){return u})),n.d(t,"isTensorInList",(function(){return s})),n.d(t,"getTensorsInContainer",(function(){return c}));var r=n(18),a=n(146),i=n(20);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=Object(a.c)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function u(e,t){Object(i.b)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function s(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.a)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var u=i[o];n.has(u)||(n.add(u),l(u,t,n))}}}},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(u.a)(e,"a","matMul"),l=Object(u.a)(t,"b","matMul"),f=Object(o.makeTypesMatch)(c,l),d=Object(r.a)(f,2),h={a:c=d[0],b:l=d[1]},p={transposeA:n,transposeB:s};return a.a.runKernel(i.s,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13),a=n(7),i=n(12);var o=Object(i.b)({square_:function(e){var t=Object(a.a)(e,"x","square");return r.a.runKernel("Square",{x:t},{})}})},function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.create;Object.create;var a=n(98);function i(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(u){i=[6,u],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}Object.create;function u(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function c(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}Object.create;var l=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),f="[DEFAULT]",d=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new a.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:f})}catch(h){}try{for(var r=u(this.instancesDeferred.entries()),a=r.next();!a.done;a=r.next()){var i=s(a.value,2),o=i[0],c=i[1],l=this.normalizeInstanceIdentifier(o);try{var d=this.getOrInitializeService({instanceIdentifier:l});c.resolve(d)}catch(h){}}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=f),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return i(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(c(c([],s(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),s(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=f),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,a=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:a});try{for(var c=u(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var f=s(l.value,2),d=f[0],h=f[1];i===this.normalizeInstanceIdentifier(d)&&h.resolve(o)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,a=this.onInitCallbacks.get(t);if(a)try{for(var i=u(a),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===f?void 0:t),options:a}),this.instances.set(n,i),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(o){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=f),this.component?this.component.multipleInstances?e:f:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var h,p=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new d(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var m,g=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(m||(m={}));var b,y={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},w=m.INFO,x=((h={})[m.DEBUG]="log",h[m.VERBOSE]="log",h[m.INFO]="info",h[m.WARN]="warn",h[m.ERROR]="error",h),O=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var a=(new Date).toISOString(),i=x[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[i].apply(console,v(["["+a+"]  "+e.name+":"],n))}},k=function(){function e(e){this.name=e,this._logLevel=w,this._logHandler=O,this._userLogHandler=null,g.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in m))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?y[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,m.DEBUG],e)),this._logHandler.apply(this,v([this,m.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,m.VERBOSE],e)),this._logHandler.apply(this,v([this,m.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,m.INFO],e)),this._logHandler.apply(this,v([this,m.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,m.WARN],e)),this._logHandler.apply(this,v([this,m.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,v([this,m.ERROR],e)),this._logHandler.apply(this,v([this,m.ERROR],e))},e}();function j(e){g.forEach((function(t){t.setLogLevel(e)}))}var _,S=((b={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",b["bad-app-name"]="Illegal App name: '{$appName}",b["duplicate-app"]="Firebase App named '{$appName}' already exists",b["app-deleted"]="Firebase App named '{$appName}' already deleted",b["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",b["invalid-log-argument"]="First argument to `onLog` must be null or a function.",b),E=new a.b("app","Firebase",S),C="@firebase/app",A="[DEFAULT]",T=((_={})[C]="fire-core",_["@firebase/analytics"]="fire-analytics",_["@firebase/app-check"]="fire-app-check",_["@firebase/auth"]="fire-auth",_["@firebase/database"]="fire-rtdb",_["@firebase/functions"]="fire-fn",_["@firebase/installations"]="fire-iid",_["@firebase/messaging"]="fire-fcm",_["@firebase/performance"]="fire-perf",_["@firebase/remote-config"]="fire-rc",_["@firebase/storage"]="fire-gcs",_["@firebase/firestore"]="fire-fst",_["fire-js"]="fire-js",_["firebase-wrapper"]="fire-js-all",_),N=new k("@firebase/app"),I=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(a.e)(e),this.container=new p(t.name),this._addComponent(new l("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=A),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=A),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){N.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw E.create("app-deleted",{appName:this.name_})},e}();I.prototype.name&&I.prototype.options||I.prototype.delete||console.log("dc");function D(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=A);var u=o.name;if("string"!==typeof u||!u)throw E.create("bad-app-name",{appName:String(u)});if(Object(a.c)(t,u))throw E.create("duplicate-app",{appName:u});var s=new e(n,o,r);return t[u]=s,s},app:i,registerVersion:function(e,t,n){var r,a=null!==(r=T[e])&&void 0!==r?r:e;n&&(a+="-"+n);var i=a.match(/\s|\//),u=t.match(/\s|\//);if(i||u){var s=['Unable to register library "'+a+'" with version "'+t+'":'];return i&&s.push('library name "'+a+'" contains illegal characters (whitespace or "/")'),i&&u&&s.push("and"),u&&s.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void N.warn(s.join(" "))}o(new l(a+"-version",(function(){return{library:a,version:t}}),"VERSION"))},setLogLevel:j,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw E.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=y[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var o=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:m[n].toLowerCase(),message:o,args:a,type:t.name})}},r=0,a=g;r<a.length;r++)n(a[r])}(e,t)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||A,!Object(a.c)(t,e))throw E.create("no-app",{appName:e});return t[e]}function o(o){var u=o.name;if(n.has(u))return N.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var s=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[u])throw E.create("invalid-app-argument",{appName:u});return e[u]()};void 0!==o.serviceProps&&Object(a.f)(s,o.serviceProps),r[u]=s,e.prototype[u]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?e:[])}}for(var c=0,l=Object.keys(t);c<l.length;c++){var f=l[c];t[f]._addComponent(o)}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}var R=function e(){var t=D(I);return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(a.f)(t,e)},createSubscribe:a.d,ErrorFactory:a.b,deepExtend:a.f}),t}(),F=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(Object(a.g)()&&void 0!==self.firebase){N.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var M=self.firebase.SDK_VERSION;M&&M.indexOf("LITE")>=0&&N.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var P=R.initializeApp;R.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(a.h)()&&N.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),P.apply(void 0,e)};var L,z,B=R;(L=B).INTERNAL.registerComponent(new l("platform-logger",(function(e){return new F(e)}),"PRIVATE")),L.registerVersion(C,"0.6.29",z),L.registerVersion("fire-js","");t.a=B},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({slice_:function(e,t,n){var o=Object(i.a)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var u={x:o},s={begin:t,size:n};return r.a.runKernel(a.Gc,u,s)}})},function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return p})),n.d(t,"t",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"u",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"o",(function(){return w})),n.d(t,"k",(function(){return x})),n.d(t,"q",(function(){return O})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return j})),n.d(t,"p",(function(){return _})),n.d(t,"a",(function(){return S})),n.d(t,"s",(function(){return E}));var r=n(13),a=n(43),i=n(18),o=n(44);function u(){Object(a.c)().set("PROD",!0)}function s(){Object(a.c)().set("DEBUG",!0)}function c(){Object(a.c)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){Object(a.c)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r.a.disposeVariables()}function d(){return r.a}function h(){return r.a.memory()}function p(e){return r.a.profile(e)}function v(e,t){return r.a.tidy(e,t)}function m(e){Object(o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function g(e){return r.a.keep(e)}function b(e){return r.a.time(e)}function y(e){return r.a.setBackend(e)}function w(){return r.a.ready()}function x(){return r.a.backendName}function O(e){r.a.removeBackend(e)}function k(e){return r.a.findBackend(e)}function j(e){return r.a.findBackendFactory(e)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a.registerBackend(e,t,n)}function S(){return r.a.backend}function E(e,t){Object(a.c)().setPlatform(e,t)}Object(i.e)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a=n(35),i=n(69),o=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},u=function(e){if(void 0===r){var t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;r=!t&&n?"-webkit-":""}return r},s=function(e,t,n){var r=t.startsWith("animation")?u(e):"";e.style.setProperty(r+t,n)},c=function(e,t){var n=t.startsWith("animation")?u(e):"";e.style.removeProperty(n+t)},l=[],f=function(e,t){if(void 0===e&&(e=[]),void 0!==t){var n=Array.isArray(t)?t:[t];return Object(a.d)(Object(a.d)([],e),n)}return e},d=function(e){var t,n,r,d,h,p,v,m,g,b,y,w,x,O=[],k=[],j=[],_=!1,S={},E=[],C=[],A={},T=0,N=!1,I=!1,D=!0,R=!1,F=!0,M=e,P=[],L=[],z=[],B=[],U=[],W=[],V=[],q=[],$=[],H=[],G="function"===typeof AnimationEffect||"function"===typeof window.AnimationEffect,K="function"===typeof Element&&"function"===typeof Element.prototype.animate&&G,X=function(e){Q(),e&&Z()},Y=function(e,t){return(t&&t.oneTimeCallback?L:P).push({c:e,o:t}),x},J=function(){return P.length=0,L.length=0,x},Q=function(){if(K)H.forEach((function(e){e.cancel()})),H.length=0;else{var e=z.slice();Object(i.q)((function(){e.forEach((function(e){c(e,"animation-name"),c(e,"animation-duration"),c(e,"animation-timing-function"),c(e,"animation-iteration-count"),c(e,"animation-delay"),c(e,"animation-play-state"),c(e,"animation-fill-mode"),c(e,"animation-direction")}))}))}},Z=function(){U.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})),U.length=0},ee=function(){return void 0!==h?h:v?v.getFill():"both"},te=function(){return void 0!==g?g:void 0!==p?p:v?v.getDirection():"normal"},ne=function(){return N?"linear":void 0!==r?r:v?v.getEasing():"linear"},re=function(){return I?0:void 0!==b?b:void 0!==n?n:v?v.getDuration():0},ae=function(){return void 0!==d?d:v?v.getIterations():1},ie=function(){return void 0!==y?y:void 0!==t?t:v?v.getDelay():0},oe=function(){0!==T&&0===--T&&(!function(){ve(),q.forEach((function(e){return e()})),$.forEach((function(e){return e()}));var e=D?1:0,t=E,n=C,r=A;z.forEach((function(e){var a=e.classList;for(var i in t.forEach((function(e){return a.add(e)})),n.forEach((function(e){return a.remove(e)})),r)r.hasOwnProperty(i)&&s(e,i,r[i])})),P.forEach((function(t){return t.c(e,x)})),L.forEach((function(t){return t.c(e,x)})),L.length=0,F=!0,D&&(R=!0),D=!0}(),v&&v.animationFinish())},ue=function(t){void 0===t&&(t=!0),Z();var n=function(e){return e.forEach((function(e){for(var t in e)if(e.hasOwnProperty(t)){var n,r=e[t];"easing"===t?(e[n="animation-timing-function"]=r,delete e[t]):(n=o(t))!==t&&(e[n]=r,delete e[t])}})),e}(O);z.forEach((function(r){if(n.length>0){var a=function(e){return void 0===e&&(e=[]),e.map((function(e){var t=e.offset,n=[];for(var r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push(r+": "+e[r]+";");return 100*t+"% { "+n.join(" ")+" }"})).join(" ")}(n),o=function(e,t,n){var r=function(e){var t=e.getRootNode();return t.head||t}(n),a=u(n),i=r.querySelector("#"+e);if(i)return i;var o=(n.ownerDocument||document).createElement("style");return o.id=e,o.textContent="@"+a+"keyframes "+e+" { "+t+" } @"+a+"keyframes "+e+"-alt { "+t+" }",r.appendChild(o),o}(w=void 0!==e?e:function(e){var t=l.indexOf(e);return t<0&&(t=l.push(e)-1),"ion-animation-"+t}(a),a,r);U.push(o),s(r,"animation-duration",re()+"ms"),s(r,"animation-timing-function",ne()),s(r,"animation-delay",ie()+"ms"),s(r,"animation-fill-mode",ee()),s(r,"animation-direction",te());var c=ae()===1/0?"infinite":ae().toString();s(r,"animation-iteration-count",c),s(r,"animation-play-state","paused"),t&&s(r,"animation-name",o.id+"-alt"),Object(i.q)((function(){s(r,"animation-name",o.id||null)}))}}))},se=function(e){void 0===e&&(e=!0),function(){W.forEach((function(e){return e()})),V.forEach((function(e){return e()}));var e=k,t=j,n=S;z.forEach((function(r){var a=r.classList;for(var i in e.forEach((function(e){return a.add(e)})),t.forEach((function(e){return a.remove(e)})),n)n.hasOwnProperty(i)&&s(r,i,n[i])}))}(),O.length>0&&(K?(z.forEach((function(e){var t=e.animate(O,{id:M,delay:ie(),duration:re(),easing:ne(),iterations:ae(),fill:ee(),direction:te()});t.pause(),H.push(t)})),H.length>0&&(H[0].onfinish=function(){oe()})):ue(e)),_=!0},ce=function(e){if(e=Math.min(Math.max(e,0),.9999),K)H.forEach((function(t){t.currentTime=t.effect.getComputedTiming().delay+re()*e,t.pause()}));else{var t="-"+re()*e+"ms";z.forEach((function(e){O.length>0&&(s(e,"animation-delay",t),s(e,"animation-play-state","paused"))}))}},le=function(e){H.forEach((function(e){e.effect.updateTiming({delay:ie(),duration:re(),easing:ne(),iterations:ae(),fill:ee(),direction:te()})})),void 0!==e&&ce(e)},fe=function(e,t){void 0===e&&(e=!0),Object(i.q)((function(){z.forEach((function(n){s(n,"animation-name",w||null),s(n,"animation-duration",re()+"ms"),s(n,"animation-timing-function",ne()),s(n,"animation-delay",void 0!==t?"-"+t*re()+"ms":ie()+"ms"),s(n,"animation-fill-mode",ee()||null),s(n,"animation-direction",te()||null);var r=ae()===1/0?"infinite":ae().toString();s(n,"animation-iteration-count",r),e&&s(n,"animation-name",w+"-alt"),Object(i.q)((function(){s(n,"animation-name",w||null)}))}))}))},de=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=!0),e&&B.forEach((function(r){r.update(e,t,n)})),K?le(n):fe(t,n),x},he=function(){_&&(K?H.forEach((function(e){e.pause()})):z.forEach((function(e){s(e,"animation-play-state","paused")})))},pe=function(){m=void 0,oe()},ve=function(){m&&clearTimeout(m)},me=function(){z.forEach((function(e){c(e,"animation-duration"),c(e,"animation-delay"),c(e,"animation-play-state")}))},ge=function(e){return new Promise((function(t){e&&e.sync&&(I=!0,Y((function(){return I=!1}),{oneTimeCallback:!0})),_||se(),R&&(K?(ce(0),le()):fe(),R=!1),F&&(T=B.length+1,F=!1),Y((function(){return t()}),{oneTimeCallback:!0}),B.forEach((function(e){e.play()})),K?(H.forEach((function(e){e.play()})),0!==O.length&&0!==z.length||oe()):function(){if(ve(),Object(i.q)((function(){z.forEach((function(e){O.length>0&&s(e,"animation-play-state","running")}))})),0===O.length||0===z.length)oe();else{var e=ie()||0,t=re()||0,n=ae()||1;isFinite(n)&&(m=setTimeout(pe,e+t*n+100)),function(e,t){var n,r={passive:!0},a=function(){n&&n()},i=function(n){e===n.target&&(a(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",i,r),e.addEventListener("animationend",i,r),n=function(){e.removeEventListener("webkitAnimationEnd",i,r),e.removeEventListener("animationend",i,r)})}(z[0],(function(){ve(),Object(i.q)((function(){me(),Object(i.q)(oe)}))}))}}()}))},be=function(e,t){var n,r=O[0];return void 0===r||void 0!==r.offset&&0!==r.offset?O=Object(a.d)([(n={offset:0},n[e]=t,n)],O):r[e]=t,x};return x={parentAnimation:v,elements:z,childAnimations:B,id:M,animationFinish:oe,from:be,to:function(e,t){var n,r=O[O.length-1];return void 0===r||void 0!==r.offset&&1!==r.offset?O=Object(a.d)(Object(a.d)([],O),[(n={offset:1},n[e]=t,n)]):r[e]=t,x},fromTo:function(e,t,n){return be(e,t).to(e,n)},parent:function(e){return v=e,x},play:ge,pause:function(){return B.forEach((function(e){e.pause()})),he(),x},stop:function(){B.forEach((function(e){e.stop()})),_&&(Q(),_=!1),N=!1,I=!1,F=!0,g=void 0,b=void 0,y=void 0,T=0,R=!1,D=!0},destroy:function(e){return B.forEach((function(t){t.destroy(e)})),X(e),z.length=0,B.length=0,O.length=0,J(),_=!1,F=!0,x},keyframes:function(e){return O=e,x},addAnimation:function(e){if(null!=e)if(Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var r=n[t];r.parent(x),B.push(r)}else e.parent(x),B.push(e);return x},addElement:function(e){if(null!=e)if(1===e.nodeType)z.push(e);else if(e.length>=0)for(var t=0;t<e.length;t++)z.push(e[t]);else console.error("Invalid addElement value");return x},update:de,fill:function(e){return h=e,de(!0),x},direction:function(e){return p=e,de(!0),x},iterations:function(e){return d=e,de(!0),x},duration:function(e){return K||0!==e||(e=1),n=e,de(!0),x},easing:function(e){return r=e,de(!0),x},delay:function(e){return t=e,de(!0),x},getWebAnimations:function(){return H},getKeyframes:function(){return O},getFill:ee,getDirection:te,getDelay:ie,getIterations:ae,getEasing:ne,getDuration:re,afterAddRead:function(e){return q.push(e),x},afterAddWrite:function(e){return $.push(e),x},afterClearStyles:function(e){void 0===e&&(e=[]);for(var t=0,n=e;t<n.length;t++){var r=n[t];A[r]=""}return x},afterStyles:function(e){return void 0===e&&(e={}),A=e,x},afterRemoveClass:function(e){return C=f(C,e),x},afterAddClass:function(e){return E=f(E,e),x},beforeAddRead:function(e){return W.push(e),x},beforeAddWrite:function(e){return V.push(e),x},beforeClearStyles:function(e){void 0===e&&(e=[]);for(var t=0,n=e;t<n.length;t++){var r=n[t];S[r]=""}return x},beforeStyles:function(e){return void 0===e&&(e={}),S=e,x},beforeRemoveClass:function(e){return j=f(j,e),x},beforeAddClass:function(e){return k=f(k,e),x},onFinish:Y,progressStart:function(e,t){return void 0===e&&(e=!1),B.forEach((function(n){n.progressStart(e,t)})),he(),N=e,_?de(!1,!0,t):se(),x},progressStep:function(e){return B.forEach((function(t){t.progressStep(e)})),ce(e),x},progressEnd:function(e,t,n){return N=!1,B.forEach((function(r){r.progressEnd(e,t,n)})),void 0!==n&&(b=n),R=!1,D=!0,0===e?("reverse"===(g="reverse"===te()?"normal":"reverse")&&(D=!1),K?(de(),ce(1-t)):(y=(1-t)*re()*-1,de(!1,!1))):1===e&&(K?(de(),ce(t)):(y=t*re()*-1,de(!1,!1))),void 0!==e&&(Y((function(){b=void 0,g=void 0,y=void 0}),{oneTimeCallback:!0}),v||ge()),x}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return w})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return O})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return j})),n.d(t,"w",(function(){return _})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return E})),n.d(t,"z",(function(){return C})),n.d(t,"A",(function(){return A}));var r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Back</title><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Book</title><path d='M202.24 74C166.11 56.75 115.61 48.3 48 48a31.36 31.36 0 00-17.92 5.33A32 32 0 0016 79.9V366c0 19.34 13.76 33.93 32 33.93 71.07 0 142.36 6.64 185.06 47a4.11 4.11 0 006.94-3V106.82a15.89 15.89 0 00-5.46-12A143 143 0 00202.24 74zM481.92 53.3A31.33 31.33 0 00464 48c-67.61.3-118.11 8.71-154.24 26a143.31 143.31 0 00-32.31 20.78 15.93 15.93 0 00-5.45 12v337.13a3.93 3.93 0 006.68 2.81c25.67-25.5 70.72-46.82 185.36-46.81a32 32 0 0032-32v-288a32 32 0 00-14.12-26.61z'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Book</title><path d='M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0116 16v288a16 16 0 01-16 16c-128 0-177.45 25.81-208 64-30.37-38-80-64-208-64-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0116-16c131.57.59 192 32.84 208 96zM256 160v288' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Camera</title><path d='M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 00-32 32v192a32 32 0 0032 32h352a32 32 0 0032-32V192a32 32 0 00-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='272' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M124 158v-22h-24v22' class='ionicon-fill-none ionicon-stroke-width'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Back</title><path d='M368 64L144 256l224 192V64z'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Checkmark Done</title><path stroke-linecap='round' stroke-linejoin='round' d='M464 128L240 384l-96-96M144 384l-96-96M368 128L232 284' class='ionicon-fill-none ionicon-stroke-width'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Clipboard</title><path d='M336 64h32a48 48 0 0148 48v320a48 48 0 01-48 48H144a48 48 0 01-48-48V112a48 48 0 0148-48h32' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='176' y='32' width='160' height='64' rx='26.13' ry='26.13' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close Circle</title><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Cog</title><path d='M456.7 242.27l-26.08-4.2a8 8 0 01-6.6-6.82c-.5-3.2-1-6.41-1.7-9.51a8.08 8.08 0 013.9-8.62l23.09-12.82a8.05 8.05 0 003.9-9.92l-4-11a7.94 7.94 0 00-9.4-5l-25.89 5a8 8 0 01-8.59-4.11q-2.25-4.2-4.8-8.41a8.16 8.16 0 01.7-9.52l17.29-19.94a8 8 0 00.3-10.62l-7.49-9a7.88 7.88 0 00-10.5-1.51l-22.69 13.63a8 8 0 01-9.39-.9c-2.4-2.11-4.9-4.21-7.4-6.22a8 8 0 01-2.5-9.11l9.4-24.75A8 8 0 00365 78.77l-10.2-5.91a8 8 0 00-10.39 2.21l-16.64 20.84a7.15 7.15 0 01-8.5 2.5s-5.6-2.3-9.8-3.71A8 8 0 01304 87l.4-26.45a8.07 8.07 0 00-6.6-8.42l-11.59-2a8.07 8.07 0 00-9.1 5.61l-8.6 25.05a8 8 0 01-7.79 5.41h-9.8a8.07 8.07 0 01-7.79-5.41l-8.6-25.05a8.07 8.07 0 00-9.1-5.61l-11.59 2a8.07 8.07 0 00-6.6 8.42l.4 26.45a8 8 0 01-5.49 7.71c-2.3.9-7.3 2.81-9.7 3.71-2.8 1-6.1.2-8.8-2.91l-16.51-20.34A8 8 0 00156.75 73l-10.2 5.91a7.94 7.94 0 00-3.3 10.09l9.4 24.75a8.06 8.06 0 01-2.5 9.11c-2.5 2-5 4.11-7.4 6.22a8 8 0 01-9.39.9L111 116.14a8 8 0 00-10.5 1.51l-7.49 9a8 8 0 00.3 10.62l17.29 19.94a8 8 0 01.7 9.52q-2.55 4-4.8 8.41a8.11 8.11 0 01-8.59 4.11l-25.89-5a8 8 0 00-9.4 5l-4 11a8.05 8.05 0 003.9 9.92L85.58 213a7.94 7.94 0 013.9 8.62c-.6 3.2-1.2 6.31-1.7 9.51a8.08 8.08 0 01-6.6 6.82l-26.08 4.2a8.09 8.09 0 00-7.1 7.92v11.72a7.86 7.86 0 007.1 7.92l26.08 4.2a8 8 0 016.6 6.82c.5 3.2 1 6.41 1.7 9.51a8.08 8.08 0 01-3.9 8.62L62.49 311.7a8.05 8.05 0 00-3.9 9.92l4 11a7.94 7.94 0 009.4 5l25.89-5a8 8 0 018.59 4.11q2.25 4.2 4.8 8.41a8.16 8.16 0 01-.7 9.52l-17.29 19.96a8 8 0 00-.3 10.62l7.49 9a7.88 7.88 0 0010.5 1.51l22.69-13.63a8 8 0 019.39.9c2.4 2.11 4.9 4.21 7.4 6.22a8 8 0 012.5 9.11l-9.4 24.75a8 8 0 003.3 10.12l10.2 5.91a8 8 0 0010.39-2.21l16.79-20.64c2.1-2.6 5.5-3.7 8.2-2.6 3.4 1.4 5.7 2.2 9.9 3.61a8 8 0 015.49 7.71l-.4 26.45a8.07 8.07 0 006.6 8.42l11.59 2a8.07 8.07 0 009.1-5.61l8.6-25a8 8 0 017.79-5.41h9.8a8.07 8.07 0 017.79 5.41l8.6 25a8.07 8.07 0 009.1 5.61l11.59-2a8.07 8.07 0 006.6-8.42l-.4-26.45a8 8 0 015.49-7.71c4.2-1.41 7-2.51 9.6-3.51s5.8-1 8.3 2.1l17 20.94A8 8 0 00355 439l10.2-5.91a7.93 7.93 0 003.3-10.12l-9.4-24.75a8.08 8.08 0 012.5-9.12c2.5-2 5-4.1 7.4-6.21a8 8 0 019.39-.9L401 395.66a8 8 0 0010.5-1.51l7.49-9a8 8 0 00-.3-10.62l-17.29-19.94a8 8 0 01-.7-9.52q2.55-4.05 4.8-8.41a8.11 8.11 0 018.59-4.11l25.89 5a8 8 0 009.4-5l4-11a8.05 8.05 0 00-3.9-9.92l-23.09-12.82a7.94 7.94 0 01-3.9-8.62c.6-3.2 1.2-6.31 1.7-9.51a8.08 8.08 0 016.6-6.82l26.08-4.2a8.09 8.09 0 007.1-7.92V250a8.25 8.25 0 00-7.27-7.73zM256 112a143.82 143.82 0 01139.38 108.12A16 16 0 01379.85 240H274.61a16 16 0 01-13.91-8.09l-52.1-91.71a16 16 0 019.85-23.39A146.94 146.94 0 01256 112zM112 256a144 144 0 0143.65-103.41 16 16 0 0125.17 3.47L233.06 248a16 16 0 010 15.87l-52.67 91.7a16 16 0 01-25.18 3.36A143.94 143.94 0 01112 256zm144 144a146.9 146.9 0 01-38.19-4.95 16 16 0 01-9.76-23.44l52.58-91.55a16 16 0 0113.88-8H379.9a16 16 0 0115.52 19.88A143.84 143.84 0 01256 400z'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Document Text</title><path d='M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 56v120a32 32 0 0032 32h120M176 288h160M176 368h160' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Help</title><path d='M160 164s1.44-33 33.54-59.46C212.6 88.83 235.49 84.28 256 84c18.73-.23 35.47 2.94 45.48 7.82C318.59 100.2 352 120.6 352 164c0 45.67-29.18 66.37-62.35 89.18S248 298.36 248 324' stroke-linecap='round' stroke-miterlimit='10' stroke-width='40' class='ionicon-fill-none'/><circle cx='248' cy='399.99' r='32'/></svg>",b="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Information</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='40' d='M196 220h64v172' class='ionicon-fill-none'/><path stroke-linecap='round' stroke-miterlimit='10' stroke-width='40' d='M187 396h138' class='ionicon-fill-none'/><path d='M256 160a32 32 0 1132-32 32 32 0 01-32 32z'/></svg>",y="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",x="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Mic Circle</title><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M224 368h64M336 224.3v23.92c0 39.42-40.58 71.48-80 71.48h0c-39.42 0-80-32.06-80-71.48V224.3M256 320v48' class='ionicon-fill-none ionicon-stroke-width'/><rect x='208' y='128' width='96' height='160' rx='48' ry='48'/></svg>",O="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Person Circle</title><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm-50.22 116.82C218.45 151.39 236.28 144 256 144s37.39 7.44 50.11 20.94c12.89 13.68 19.16 32.06 17.68 51.82C320.83 256 290.43 288 256 288s-64.89-32-67.79-71.25c-1.47-19.92 4.79-38.36 17.57-51.93zM256 432a175.49 175.49 0 01-126-53.22 122.91 122.91 0 0135.14-33.44C190.63 329 222.89 320 256 320s65.37 9 90.83 25.34A122.87 122.87 0 01382 378.78 175.45 175.45 0 01256 432z'/></svg>",k="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Three</title><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",j="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Two</title><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Return Down Back</title><path stroke-linecap='round' stroke-linejoin='round' d='M112 352l-64-64 64-64' class='ionicon-fill-none ionicon-stroke-width'/><path d='M64 288h294c58.76 0 106-49.33 106-108v-20' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",S="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Return Up Forward</title><path stroke-linecap='round' stroke-linejoin='round' d='M400 160l64 64-64 64' class='ionicon-fill-none ionicon-stroke-width'/><path d='M448 224H154c-58.76 0-106 49.33-106 108v20' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",C="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>",A="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Trash</title><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>"},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var o=a.apply(null,r);o&&e.push(o)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var u in r)n.call(r,u)&&r[u]&&e.push(u);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({neg_:function(e){var t={x:Object(i.a)(e,"x","neg")};return r.a.runKernel(a.Xb,t)}})},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return y}));var r=n(4),a=n(14);function i(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,u=e[3],c=[].concat(Object(a.a)(t),[u]),l=y(i);return s(e,c,n,o,r,null,null,l)}function o(e,t,n,a,i,o){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(t),d=Object(r.a)(l,2),h=d[0],p=d[1];if("channelsLast"===c)u=[h,p,e[3],e[3]];else{if("channelsFirst"!==c)throw new Error("Unknown dataFormat ".concat(c));u=[h,p,e[1],e[1]]}return s(e,u,n,a,i,o,!1,c)}function u(e,t,n,a,i,o){var u,s,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",f=d(t),h=Object(r.a)(f,3),p=h[0],v=h[1],m=h[2];if("NDHWC"===l)s="channelsLast",u=[p,v,m,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));s="channelsFirst",u=[p,v,m,e[1],e[1]]}return c(e,u,n,a,i,!1,s,o)}function s(e,t,n,a,i,o){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,v=-1;if("channelsLast"===s){var m=Object(r.a)(e,4);c=m[0],l=m[1],d=m[2],v=m[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var g=Object(r.a)(e,4);c=g[0],v=g[1],l=g[2],d=g[3]}var b,y=Object(r.a)(t,4),w=y[0],x=y[1],O=y[3],k=f(n),j=Object(r.a)(k,2),_=j[0],S=j[1],E=f(a),C=Object(r.a)(E,2),A=C[0],T=C[1],N=h(w,A),I=h(x,T),D=p(i,l,d,_,S,N,I,o,s),R=D.padInfo,F=D.outHeight,M=D.outWidth,P=u?O*v:O;return"channelsFirst"===s?b=[c,P,F,M]:"channelsLast"===s&&(b=[c,F,M,P]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:d,inChannels:v,outHeight:F,outWidth:M,outChannels:P,padInfo:R,strideHeight:_,strideWidth:S,filterHeight:w,filterWidth:x,effectiveFilterHeight:N,effectiveFilterWidth:I,dilationHeight:A,dilationWidth:T,inShape:e,outShape:b,filterShape:t}}function c(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,f=-1,p=-1,m=-1;if("channelsLast"===u){var g=Object(r.a)(e,5);c=g[0],l=g[1],f=g[2],p=g[3],m=g[4]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var b=Object(r.a)(e,5);c=b[0],m=b[1],l=b[2],f=b[3],p=b[4]}var y,w=Object(r.a)(t,5),x=w[0],O=w[1],k=w[2],j=w[4],_=d(n),S=Object(r.a)(_,3),E=S[0],C=S[1],A=S[2],T=d(a),N=Object(r.a)(T,3),I=N[0],D=N[1],R=N[2],F=h(x,I),M=h(O,D),P=h(k,R),L=v(i,l,f,p,E,C,A,F,M,P,s),z=L.padInfo,B=L.outDepth,U=L.outHeight,W=L.outWidth,V=o?j*m:j;return"channelsFirst"===u?y=[c,V,B,U,W]:"channelsLast"===u&&(y=[c,B,U,W,V]),{batchSize:c,dataFormat:u,inDepth:l,inHeight:f,inWidth:p,inChannels:m,outDepth:B,outHeight:U,outWidth:W,outChannels:V,padInfo:z,strideDepth:E,strideHeight:C,strideWidth:A,filterDepth:x,filterHeight:O,filterWidth:k,effectiveFilterDepth:F,effectiveFilterHeight:M,effectiveFilterWidth:P,dilationDepth:I,dilationHeight:D,dilationWidth:R,inShape:e,outShape:y,filterShape:t}}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=h(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function f(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"===typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t,n,r,a,i,o,u,s){var c,f,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=l(e,t,n));var i=e[0],o=e[1];return[m((i-t+2*r)/n+1,a),m((o-t+2*r)/n+1,a)]}([t,n],i,r,e,u);f=h[0],d=h[1]}else if("same"===e){f=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(f-1)*r+i-t),v=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),b=p-g,y=Math.floor(v/2);c={top:g,bottom:b,left:y,right:v-y,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var w="channelsLast"===s?e[1][0]:e[2][0],x="channelsLast"===s?e[1][1]:e[2][1],O="channelsLast"===s?e[2][0]:e[3][0],k="channelsLast"===s?e[2][1]:e[3][1];c={top:w,bottom:x,left:O,right:k,type:0===w&&0===x&&0===O&&0===k?"VALID":"EXPLICIT"},f=m((t-i+w+x)/r+1,u),d=m((n-o+O+k)/a+1,u)}return{padInfo:c,outHeight:f,outWidth:d}}function v(e,t,n,r,a,i,o,u,s,c,f){var d,h,p,v;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,i){null==a&&(a=l(e,t,r));var o=e[0],u=e[1],s=e[2];return[m((o-t+2*a)/r+1,i),m((u-t+2*a)/r+1,i),m((s-t+2*a)/r+1,i),n]}([t,n,r,1],u,1,a,e,f);h=g[0],p=g[1],v=g[2]}else if("same"===e){var b=((h=Math.ceil(t/a))-1)*a+u-t,y=((p=Math.ceil(n/i))-1)*i+s-n,w=((v=Math.ceil(r/o))-1)*o+c-r,x=Math.floor(b/2),O=b-x,k=Math.floor(y/2),j=y-k,_=Math.floor(w/2);d={top:k,bottom:j,left:_,right:w-_,front:x,back:O,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-u+1)/a),p=Math.ceil((n-s+1)/i),v=Math.ceil((r-c+1)/o)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:v}}function m(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function g(e){var t=f(e),n=Object(r.a)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function b(e,t){return g(e)||g(t)}function y(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(29);var r=n(5),a=n.n(r),i=a.a.createContext({});i.Consumer,i.Provider;function o(e,t){var n=Object(r.useContext)(i);return e||n[t]||t}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"d",(function(){return a.createGesture})),n.d(t,"e",(function(){return i.d})),n.d(t,"f",(function(){return i.a})),n.d(t,"a",(function(){return o.c})),n.d(t,"b",(function(){return o.b})),n.d(t,"g",(function(){return o.k})),n.d(t,"h",(function(){return o.l})),n.d(t,"i",(function(){return o.m})),n.d(t,"j",(function(){return o.d})),n.d(t,"l",(function(){return o.o})),n.d(t,"k",(function(){return u}));var r=n(51),a=(n(322),n(323),n(346),n(345)),i=n(78),o=(n(69),n(347),n(114),n(348),n(140)),u=(n(214),n(77),n(213),function(e){var t=window,n=t.Ionic;if(!n||!n.config||"Object"===n.config.constructor.name)return t.Ionic=t.Ionic||{},t.Ionic.config=Object.assign(Object.assign({},t.Ionic.config),e),t.Ionic.config})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(109),s=n(12);var c=Object(s.b)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.b)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Object(i.b)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Object(u.a)(n[0]);var s=n,c={axis:t};return r.a.runKernel(a.C,s,c)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(211);function a(e,t){return function(n){return e+n*t}}function i(e,t){var n=t-e;return n?a(e,n>180||n<-180?n-360*Math.round(n/360):n):Object(r.a)(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?u:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Object(r.a)(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?a(e,n):Object(r.a)(isNaN(e)?t:e)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(159),u=n(37),s=n(12);var c=Object(s.b)({where_:function(e,t,n){var s=Object(i.a)(t,"a","where"),c=Object(i.a)(n,"b","where"),l=Object(i.a)(e,"condition","where","bool"),f=Object(u.a)(Object(u.a)(l.shape,s.shape),c.shape),d={condition:Object(o.a)(l,f),t:Object(o.a)(s,f),e:Object(o.a)(c,f)};return r.a.runKernel(a.Ac,d)}})},function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return w})),n.d(t,"c",(function(){return x})),n.d(t,"i",(function(){return O})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return _}));var r=n(4),a=n(2),i=n.n(a),o=n(9),u=n(15),s=n(99),c=n(131),l=n(20),f=n(232);function d(e,t){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(i.a.mark((function e(t,n){var r,a,o,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),s=function(e){var s=o[e],c=Array.isArray(t)?t[e].tensor:t[s];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype&&"complex64"!==c.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(c.dtype));var l={name:s,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var f=new Promise(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,o,u,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),o=0,u=0;u<n.length;u++)s=n[u],l=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(l,o),o+=4,a.set(s,o),o+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(f)}else a.push(c.data());null!=n&&(l.group=n),r.push(l)},c=0;c<o.length;++c)s(c);return e.next=7,Promise.all(a);case 7:return l=e.sent,e.abrupt("return",{data:v(l),specs:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){var n,r,a={},i=0,u=Object(o.a)(t);try{for(u.s();!(r=u.n()).done;){var d=r.value,h=d.name,p=d.dtype,v=d.shape,m=Object(l.O)(v),g=void 0;if("quantization"in d){var b=d.quantization;if("uint8"===b.dtype||"uint16"===b.dtype){if(!("min"in b)||!("scale"in b))throw new Error("Weight ".concat(d.name," with quantization ").concat(b.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==b.dtype)throw new Error("Weight ".concat(d.name," has unknown ")+"quantization dtype ".concat(b.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==p)throw new Error("Weight ".concat(d.name," is quantized with ").concat(b.dtype," ")+"which only supports weights of type float32 not ".concat(p,"."))}var y=f.a[b.dtype],w=e.slice(i,i+m*y),x="uint8"===b.dtype?new Uint8Array(w):new Uint16Array(w);if("float32"===p)if("uint8"===b.dtype||"uint16"===b.dtype){g=new Float32Array(x.length);for(var O=0;O<x.length;O++){var k=x[O];g[O]=k*b.scale+b.min}}else{if("float16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type float32.");void 0===n&&(n=S()),g=n(x)}else{if("int32"!==p)throw new Error("Unsupported dtype in weight '".concat(h,"': ").concat(p));if("uint8"!==b.dtype&&"uint16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type int32.");g=new Int32Array(x.length);for(var j=0;j<x.length;j++){var _=x[j];g[j]=Math.round(_*b.scale+b.min)}}i+=m*y}else if("string"===p){var E=Object(l.O)(d.shape);g=[];for(var C=0;C<E;C++){var A=new Uint32Array(e.slice(i,i+4))[0];i+=4;var T=new Uint8Array(e.slice(i,i+A));g.push(T),i+=A}}else{var N=f.a[p],I=e.slice(i,i+m*N);if("float32"===p)g=new Float32Array(I);else if("int32"===p)g=new Int32Array(I);else if("bool"===p)g=new Uint8Array(I);else{if("complex64"!==p)throw new Error("Unsupported dtype in weight '".concat(h,"': ").concat(p));g=new Float32Array(I);for(var D=new Float32Array(g.length/2),R=new Float32Array(g.length/2),F=0;F<D.length;F++)D[F]=g[2*F],R[F]=g[2*F+1];var M=Object(c.a)(D,v,"float32"),P=Object(c.a)(R,v,"float32");a[h]=Object(s.a)(M,P),M.dispose(),P.dispose()}i+=m*N}"complex64"!==p&&(a[h]=Object(c.a)(g,v,p))}}catch(L){u.e(L)}finally{u.f()}return a}function v(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var m="undefined"!==typeof e&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function g(t){return m?e.byteLength(t):new Blob([t]).size}function b(t){if(m)return e.from(t).toString("base64");for(var n=new Uint8Array(t),r="",a=0,i=n.length;a<i;a++)r+=String.fromCharCode(n[a]);return btoa(r)}function y(t){if(m){var n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var r=atob(t),a=new Uint8Array(r.length),i=0;i<r.length;++i)a.set([r.charCodeAt(i)],i);return a.buffer}function w(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function x(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function O(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function k(e,t){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(i.a.mark((function e(t,n){var a,o,u,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(a.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:o=e.sent,u=Object(r.a)(o,2),s=u[0],c=u[1],a.weightSpecs=s,a.weightData=c;case 11:return null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:g(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:g(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function S(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var u=r[o],s=e[n[u>>10]+(1023&u)]+t[u>>10];i[o]=s}return new Float32Array(a)}}}).call(this,n(218).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(14),a=n(13),i=n(18),o=n(7),u=n(20);function s(e){return u.b(u.u(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Object(o.a)(t,"x","tf.grad","string_or_numeric"),i=null!=n?Object(o.a)(n,"dy","tf.grad"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&u.e(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(o),o[0]}))}}function c(e){return u.b(u.u(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){u.b(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=Object(o.b)(t,"args","tf.grads","string_or_numeric"),s=null!=n?Object(o.a)(n,"dy","tf.grads"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(i))}),i,s),n=t.value,o=t.grads;return null!=s&&u.e(n.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o),o}))}}function l(e){return u.b(u.u(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){u.b(t instanceof i.a,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),u.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.a.gradients((function(){return e(t)}),[t],n),o=r.grads,s=r.value;return p(o),{grad:o[0],value:s}}}function f(e){return u.b(u.u(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){u.b(Array.isArray(t)&&t.every((function(e){return e instanceof i.a})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),u.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(t))}),t,n);return null!=n&&u.e(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o.grads),o}}function d(e,t){u.b(u.u(e),(function(){return"The f passed in variableGrads(f) must be a function"})),u.b(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i.c})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.a.registeredVariables)t.push(a.a.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,s=t.length;t=t.filter((function(e){return e.trainable})),u.b(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(s," variables is ")+"trainable."}));var c=a.a.gradients(e,t,null,!0),l=c.value,f=c.grads;u.b(f.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),u.b(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var d={};return t.forEach((function(e,t){null!=f[t]&&(d[e.name]=f[t])})),null!=o&&o.forEach((function(e){return d[e.name]=null})),{value:l,grads:d}}function h(e){return a.a.customGrad(e)}function p(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5);var a=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t};function i(e){var t=a(e);return Object(r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(29),a=n(45),i=n(53),o=n.n(i),u=/-(.)/g;var s=n(5),c=n.n(s),l=n(57),f=["className","bsPrefix","as"],d=function(e){return e[0].toUpperCase()+(t=e,t.replace(u,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function h(e,t){var n=void 0===t?{}:t,i=n.displayName,u=void 0===i?d(e):i,s=n.Component,h=n.defaultProps,p=c.a.forwardRef((function(t,n){var i=t.className,u=t.bsPrefix,d=t.as,h=void 0===d?s||"div":d,p=Object(a.a)(t,f),v=Object(l.a)(u,e);return c.a.createElement(h,Object(r.a)({ref:n,className:o()(i,v)},p))}));return p.defaultProps=h,p.displayName=u,p}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({sqrt_:function(e){var t={x:Object(i.a)(e,"x","sqrt")};return r.a.runKernel(a.Qc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return l})),n.d(t,"l",(function(){return v})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return w})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return c}));var r=n(35),a=function(e,t){e.componentOnReady?e.componentOnReady().then((function(e){return t(e)})):c((function(){return t(e)}))},i=function(e,t){void 0===t&&(t=[]);var n={};return t.forEach((function(t){e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n},o=function(e,t,n,r){if("undefined"!==typeof window){var a=window,i=a&&a.Ionic&&a.Ionic.config;if(i){var o=i.get("_ael");if(o)return o(e,t,n,r);if(i._ael)return i._ael(e,t,n,r)}}return e.addEventListener(t,n,r)},u=function(e,t,n,r){if("undefined"!==typeof window){var a=window,i=a&&a.Ionic&&a.Ionic.config;if(i){var o=i.get("_rel");if(o)return o(e,t,n,r);if(i._rel)return i._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)},s=function(e,t){return void 0===t&&(t=e),e.shadowRoot||t},c=function(e){return"function"===typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"===typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e)},l=function(e){return!!e.shadowRoot&&!!e.attachShadow},f=function(e){var t=e.closest("ion-item");return t?t.querySelector("ion-label"):null},d=function(e,t){var n,r=e.getAttribute("aria-labelledby"),a=e.id,i=null!==r&&""!==r.trim()?r:t+"-lbl",o=null!==r&&""!==r.trim()?document.getElementById(r):f(e);return o?(null===r&&(o.id=i),n=o.textContent,o.setAttribute("aria-hidden","true")):""!==a.trim()&&(o=document.querySelector('label[for="'+a+'"]'))&&(""!==o.id?i=o.id:o.id=i=a+"-lbl",n=o.textContent),{label:o,labelId:i,labelText:n}},h=function(e,t,n,r,a){if(e||l(t)){var i=t.querySelector("input.aux-input");i||((i=t.ownerDocument.createElement("input")).type="hidden",i.classList.add("aux-input"),t.appendChild(i)),i.disabled=a,i.name=n,i.value=r||""}},p=function(e,t,n){return Math.max(e,Math.min(t,n))},v=function(e,t){if(!e){var n="ASSERT: "+t;throw console.error(n),new Error(n)}},m=function(e){return e.timeStamp||Date.now()},g=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var n=t[0];return{x:n.clientX,y:n.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},b=function(e){var t="rtl"===document.dir;switch(e){case"start":return t;case"end":return!t;default:throw new Error('"'+e+'" is not a valid value for [side]. Use "start" or "end" instead.')}},y=function(e,t){var n=e._original||e;return{_original:e,emit:w(n.emit.bind(n),t)}},w=function(e,t){var n;return void 0===t&&(t=0),function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];clearTimeout(n),n=setTimeout.apply(void 0,Object(r.d)([e,t],a))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return f}));var r=n(20);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,u=0;u<r;u++)-1===n.indexOf(u)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function u(e,t){return i(e,t.map((function(e){return 1})),t)}function s(e,t,n){r.b(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({exp_:function(e){var t={x:Object(i.a)(e,"x","exp")};return r.a.runKernel(a.bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return w})),n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return _})),n.d(t,"f",(function(){return N}));var r=n(96);function a(){}var i=.7,o=1/i,u="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),d=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),v=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),m=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function y(){return this.rgb().formatRgb()}function w(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?x(t):3===n?new _(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?O(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?O(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=f.exec(e))?new _(t[1],t[2],t[3],1):(t=d.exec(e))?new _(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?O(t[1],t[2],t[3],t[4]):(t=p.exec(e))?O(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=v.exec(e))?A(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?A(t[1],t[2]/100,t[3]/100,t[4]):g.hasOwnProperty(e)?x(g[e]):"transparent"===e?new _(NaN,NaN,NaN,0):null}function x(e){return new _(e>>16&255,e>>8&255,255&e,1)}function O(e,t,n,r){return r<=0&&(e=t=n=NaN),new _(e,t,n,r)}function k(e){return e instanceof a||(e=w(e)),e?new _((e=e.rgb()).r,e.g,e.b,e.opacity):new _}function j(e,t,n,r){return 1===arguments.length?k(e):new _(e,t,n,null==r?1:r)}function _(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function S(){return"#"+C(this.r)+C(this.g)+C(this.b)}function E(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function C(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function A(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new I(e,t,n,r)}function T(e){if(e instanceof I)return new I(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=w(e)),!e)return new I;if(e instanceof I)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),u=NaN,s=o-i,c=(o+i)/2;return s?(u=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=c<.5?o+i:2-o-i,u*=60):s=c>0&&c<1?0:u,new I(u,s,c,e.opacity)}function N(e,t,n,r){return 1===arguments.length?T(e):new I(e,t,n,null==r?1:r)}function I(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function D(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Object(r.a)(a,w,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return T(this).formatHsl()},formatRgb:y,toString:y}),Object(r.a)(_,j,Object(r.b)(a,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:E,toString:E})),Object(r.a)(I,N,Object(r.b)(a,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new I(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new I(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new _(D(e>=240?e-240:e+120,a,r),D(e,a,r),D(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({greater_:function(e,t){var n=Object(u.a)(e,"a","greater","string_or_numeric"),c=Object(u.a)(t,"b","greater","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.pb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({abs_:function(e){var t=Object(i.a)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.a.runKernel(a.B,n)}var o={x:t};return r.a.runKernel(a.a,o)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return g}));var r=n(37),a=n(185),i=n(188),o=n(22),u=n(195),s=n(126),c=n(196),l=n(19),f=n(110),d=n(127),h=n(34);function p(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(o.a)(e,Object(d.a)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function v(e,t){var n=t,a=r.c(e.shape,t.shape);return a.length>0&&(n=Object(h.a)(n,a)),Object(l.a)(n,e.shape)}function m(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(s.a)(e);if("elu"===t)return Object(a.a)(e);if("relu6"===t)return Object(c.a)(e);if("prelu"===t)return Object(u.a)(e,n);if("leakyrelu"===t)return Object(i.a)(e,r);if("sigmoid"===t)return Object(f.a)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var g=function(e,t){return!(e>0)||"linear"===t}},function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return k}));var r=n(9),a=n(16),i=n(17),o=n(2),u=n.n(o),s=n(15),c=n(3),l=n(11),f=n(0),d=n(307),h=n(113);function p(e){return e instanceof f.Tensor?{value:e.clone(),recurse:!1}:Object(h.e)(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var v=n(28),m=n(26),g=function(){function e(t){if(Object(c.a)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Object(l.a)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),b=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.call(this,n.INITIAL_CAPACITY)}return Object(l.a)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(g);function y(e){return new _(e)}function w(e){return new S(e)}function x(e,t){return new P(e,t)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.FAIL;return new L(e,t)}b.INITIAL_CAPACITY=32;var k,j=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"toArray",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new D(this,e)}},{key:"filter",value:function(e){return new N(this,e)}},{key:"map",value:function(e){return new I(this,e)}},{key:"mapAsync",value:function(e){return new R(this,e)}},{key:"serialMapAsync",value:function(e){return new R(this,e).serial()}},{key:"flatmap",value:function(e){return new M(this,e)}},{key:"forEachAsync",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new T(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.f,r=this.rowMajorBatch(e,t);return r.map((function(e){return Object(h.d)(e,n)}))}},{key:"concatenate",value:function(e,t){return new P(y([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new A(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new C(this,e)}},{key:"prefetch",value:function(e){return new z(this,e)}},{key:"shuffle",value:function(e,t){return new B(this,e,t)}},{key:"serial",value:function(){return new E(this)}}]),e}(),_=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:(n=t,Object(h.b)(n,p)),done:!1});case 5:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).nextFn=e,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(j),E=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),C=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:f.dispose(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),A=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),T=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),N=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:f.dispose(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),I=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=f.tensor_util.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.tensor_util.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),D=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(j),R=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=f.tensor_util.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:a=e.sent,i=f.tensor_util.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),F=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).outputQueue=new b,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),M=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=f.tensor_util.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.tensor_util.getTensorsInContainer(a),this.outputQueue.pushAll(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(F),P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(j);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(k||(k={}));var L=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.FAIL;return Object(c.a)(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return Object(l.a)(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof j?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,Object(h.c)(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===k.FAIL?14:e.t0===k.SHORTEST?15:(e.t0,k.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),z=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new g(r),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(j),B=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=d.alea(a||f.util.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(z)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ye})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return z})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return Te})),n.d(t,"f",(function(){return Xe})),n.d(t,"g",(function(){return ce})),n.d(t,"h",(function(){return Ke})),n.d(t,"i",(function(){return R})),n.d(t,"j",(function(){return P})),n.d(t,"k",(function(){return se})),n.d(t,"l",(function(){return ge})),n.d(t,"m",(function(){return Ne})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return Re})),n.d(t,"p",(function(){return D})),n.d(t,"q",(function(){return d}));var r,a,i,o=n(35),u=!1,s=!1,c=!1,l=!1,f=!1,d="undefined"!==typeof window?window:{},h=d.CSS,p=d.document||{head:{}},v={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},m=(p.head.attachShadow+"").indexOf("[native")>-1,g=function(e){return Promise.resolve(e)},b=function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replace}catch(e){}return!1}(),y=function(e,t,n,r){n&&n.map((function(n){var r=n[0],a=n[1],i=n[2],o=x(e,r),u=w(t,i),s=O(r);v.ael(o,a,u,s),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return v.rel(o,a,u,s)}))}))},w=function(e,t){return function(n){try{256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n])}catch(r){Pe(r)}}},x=function(e,t){return 4&t?p:8&t?d:16&t?p.body:e},O=function(e){return 0!==(2&e)},k="s-id",j="sty-id",_="c-id",S="http://www.w3.org/1999/xlink",E=function(e,t){return void 0===t&&(t=""),function(){}},C=new WeakMap,A=function(e,t,n){var r=Be.get(e);b&&n?(r=r||new CSSStyleSheet).replace(t):r=t,Be.set(e,r)},T=function(e,t,n,r){var a=N(t,n),i=Be.get(a);if(e=11===e.nodeType?e:p,i)if("string"===typeof i){e=e.head||e;var u=C.get(e),s=void 0;if(u||C.set(e,u=new Set),!u.has(a)){if(e.host&&(s=e.querySelector('[sty-id="'+a+'"]')))s.innerHTML=i;else{if(v.$cssShim$){var c=(s=v.$cssShim$.createHostStyle(r,a,i,!!(10&t.$flags$)))["s-sc"];c&&(a=c,u=null)}else(s=p.createElement("style")).innerHTML=i;e.insertBefore(s,e.querySelector("link"))}u&&u.add(a)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=Object(o.d)(Object(o.d)([],e.adoptedStyleSheets),[i]));return a},N=function(e,t){return"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$)},I=function(e){return e.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{")},D=function(e){return Ue.push(e)},R=function(e){return De(e).$modeName$},F={},M=function(e){return"object"===(e=typeof e)||"function"===e},P=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=null,i=null,o=null,u=!1,s=!1,c=[],l=function t(n){for(var r=0;r<n.length;r++)a=n[r],Array.isArray(a)?t(a):null!=a&&"boolean"!==typeof a&&((u="function"!==typeof e&&!M(a))&&(a=String(a)),u&&s?c[c.length-1].$text$+=a:c.push(u?L(null,a):a),s=u)};if(l(n),t){t.key&&(i=t.key),t.name&&(o=t.name);var f=t.className||t.class;f&&(t.class="object"!==typeof f?f:Object.keys(f).filter((function(e){return f[e]})).join(" "))}if("function"===typeof e)return e(null===t?{}:t,c,B);var d=L(e,null);return d.$attrs$=t,c.length>0&&(d.$children$=c),d.$key$=i,d.$name$=o,d},L=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},z={},B={forEach:function(e,t){return e.map(U).forEach(t)},map:function(e,t){return e.map(U).map(t).map(W)}},U=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},W=function(e){if("function"===typeof e.vtag){var t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),P.apply(void 0,Object(o.d)([e.vtag,t],e.vchildren||[]))}var n=L(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},V=function(e,t,n,r,a,i){if(n!==r){var o=Me(e,t),u=t.toLowerCase();if("class"===t){var s=e.classList,c=$(n),l=$(r);s.remove.apply(s,c.filter((function(e){return e&&!l.includes(e)}))),s.add.apply(s,l.filter((function(e){return e&&!c.includes(e)})))}else if("style"===t){for(var f in n)r&&null!=r[f]||(f.includes("-")?e.style.removeProperty(f):e.style[f]="");for(var f in r)n&&r[f]===n[f]||(f.includes("-")?e.style.setProperty(f,r[f]):e.style[f]=r[f])}else if("key"===t);else if("ref"===t)r&&r(e);else if(o||"o"!==t[0]||"n"!==t[1]){var h=M(r);if((o||h&&null!==r)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{var p=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==p||(e[t]=p)}}catch(g){}var m=!1;u!==(u=u.replace(/^xlink\:?/,""))&&(t=u,m=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(m?e.removeAttributeNS(S,t):e.removeAttribute(t)):(!o||4&i||a)&&!h&&(r=!0===r?"":r,m?e.setAttributeNS(S,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):Me(d,u)?u.slice(2):u[2]+t.slice(3),n&&v.rel(e,t,n,!1),r&&v.ael(e,t,r,!1)}},q=/\s/,$=function(e){return e?e.split(q):[]},H=function(e,t,n,r){var a=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||F,o=t.$attrs$||F;for(r in i)r in o||V(a,r,i[r],void 0,n,t.$flags$);for(r in o)V(a,r,i[r],o[r],n,t.$flags$)},G=function e(t,n,o,s){var f,d,h,v=n.$children$[o],m=0;if(u||(c=!0,"slot"===v.$tag$&&(r&&s.classList.add(r+"-s"),v.$flags$|=v.$children$?2:1)),null!==v.$text$)f=v.$elm$=p.createTextNode(v.$text$);else if(1&v.$flags$)f=v.$elm$=p.createTextNode("");else{if(l||(l="svg"===v.$tag$),f=v.$elm$=p.createElementNS(l?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&v.$flags$?"slot-fb":v.$tag$),l&&"foreignObject"===v.$tag$&&(l=!1),H(null,v,l),function(e){return null!=e}(r)&&f["s-si"]!==r&&f.classList.add(f["s-si"]=r),v.$children$)for(m=0;m<v.$children$.length;++m)(d=e(t,v,m,f))&&f.appendChild(d);"svg"===v.$tag$?l=!1:"foreignObject"===f.tagName&&(l=!0)}return f["s-hn"]=i,3&v.$flags$&&(f["s-sr"]=!0,f["s-cr"]=a,f["s-sn"]=v.$name$||"",(h=t&&t.$children$&&t.$children$[o])&&h.$tag$===v.$tag$&&t.$elm$&&K(t.$elm$,!1)),f},K=function e(t,n){v.$flags$|=1;for(var r=t.childNodes,a=r.length-1;a>=0;a--){var o=r[a];o["s-hn"]!==i&&o["s-ol"]&&(ee(o).insertBefore(o,Z(o)),o["s-ol"].remove(),o["s-ol"]=void 0,c=!0),n&&e(o,n)}v.$flags$&=-2},X=function(e,t,n,r,a,o){var u,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===i&&(s=s.shadowRoot);a<=o;++a)r[a]&&(u=G(null,n,a,e))&&(r[a].$elm$=u,s.insertBefore(u,Z(t)))},Y=function(e,t,n,r,a){for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,oe(r),s=!0,a["s-ol"]?a["s-ol"].remove():K(a,!0),a.remove())},J=function(e,t,n,r){for(var a,i,o=0,u=0,s=0,c=0,l=t.length-1,f=t[0],d=t[l],h=r.length-1,p=r[0],v=r[h];o<=l&&u<=h;)if(null==f)f=t[++o];else if(null==d)d=t[--l];else if(null==p)p=r[++u];else if(null==v)v=r[--h];else if(Q(f,p))te(f,p),f=t[++o],p=r[++u];else if(Q(d,v))te(d,v),d=t[--l],v=r[--h];else if(Q(f,v))"slot"!==f.$tag$&&"slot"!==v.$tag$||K(f.$elm$.parentNode,!1),te(f,v),e.insertBefore(f.$elm$,d.$elm$.nextSibling),f=t[++o],v=r[--h];else if(Q(d,p))"slot"!==f.$tag$&&"slot"!==v.$tag$||K(d.$elm$.parentNode,!1),te(d,p),e.insertBefore(d.$elm$,f.$elm$),d=t[--l],p=r[++u];else{for(s=-1,c=o;c<=l;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===p.$key$){s=c;break}s>=0?((i=t[s]).$tag$!==p.$tag$?a=G(t&&t[u],n,s,e):(te(i,p),t[s]=void 0,a=i.$elm$),p=r[++u]):(a=G(t&&t[u],n,u,e),p=r[++u]),a&&ee(f.$elm$).insertBefore(a,Z(f.$elm$))}o>l?X(e,null==r[h+1]?null:r[h+1].$elm$,n,r,u,h):u>h&&Y(t,o,l)},Q=function(e,t){return e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$)},Z=function(e){return e&&e["s-ol"]||e},ee=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode},te=function(e,t){var n,r=t.$elm$=e.$elm$,a=e.$children$,i=t.$children$,o=t.$tag$,u=t.$text$;null===u?(l="svg"===o||"foreignObject"!==o&&l,"slot"===o||H(e,t,l),null!==a&&null!==i?J(r,a,t,i):null!==i?(null!==e.$text$&&(r.textContent=""),X(r,null,t,i,0,i.length-1)):null!==a&&Y(a,0,a.length-1),l&&"svg"===o&&(l=!1)):(n=r["s-cr"])?n.parentNode.textContent=u:e.$text$!==u&&(r.data=u)},ne=function e(t){var n,r,a,i,o,u,s=t.childNodes;for(r=0,a=s.length;r<a;r++)if(1===(n=s[r]).nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(u=s[i].nodeType,s[i]["s-hn"]!==n["s-hn"]||""!==o){if(1===u&&o===s[i].getAttribute("slot")){n.hidden=!0;break}}else if(1===u||3===u&&""!==s[i].textContent.trim()){n.hidden=!0;break}e(n)}},re=[],ae=function e(t){for(var n,r,a,i,o,u,c=0,l=t.childNodes,f=l.length;c<f;c++){if((n=l[c])["s-sr"]&&(r=n["s-cr"])&&r.parentNode)for(a=r.parentNode.childNodes,i=n["s-sn"],u=a.length-1;u>=0;u--)(r=a[u])["s-cn"]||r["s-nr"]||r["s-hn"]===n["s-hn"]||(ie(r,i)?(o=re.find((function(e){return e.$nodeToRelocate$===r})),s=!0,r["s-sn"]=r["s-sn"]||i,o?o.$slotRefNode$=n:re.push({$slotRefNode$:n,$nodeToRelocate$:r}),r["s-sr"]&&re.map((function(e){ie(e.$nodeToRelocate$,r["s-sn"])&&(o=re.find((function(e){return e.$nodeToRelocate$===r})))&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$)}))):re.some((function(e){return e.$nodeToRelocate$===r}))||re.push({$nodeToRelocate$:r}));1===n.nodeType&&e(n)}},ie=function(e,t){return 1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t},oe=function e(t){t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(e)},ue=function(e,t){var n=e.$hostElement$,o=e.$cmpMeta$,l=e.$vnode$||L(null,null),f=function(e){return e&&e.$tag$===z}(t)?t:P(null,null,t);if(i=n.tagName,o.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},o.$attrsToReflect$.map((function(e){var t=e[0],r=e[1];return f.$attrs$[r]=n[t]}))),f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=l.$elm$=n.shadowRoot||n,r=n["s-sc"],a=n["s-cr"],u=m&&0!==(1&o.$flags$),s=!1,te(l,f),v.$flags$|=1,c){ae(f.$elm$);for(var d=void 0,h=void 0,g=void 0,b=void 0,y=void 0,w=void 0,x=0;x<re.length;x++)(h=(d=re[x]).$nodeToRelocate$)["s-ol"]||((g=p.createTextNode(""))["s-nr"]=h,h.parentNode.insertBefore(h["s-ol"]=g,h));for(x=0;x<re.length;x++)if(h=(d=re[x]).$nodeToRelocate$,d.$slotRefNode$){for(b=d.$slotRefNode$.parentNode,y=d.$slotRefNode$.nextSibling,g=h["s-ol"];g=g.previousSibling;)if((w=g["s-nr"])&&w["s-sn"]===h["s-sn"]&&b===w.parentNode&&(!(w=w.nextSibling)||!w["s-nr"])){y=w;break}(!y&&b!==h.parentNode||h.nextSibling!==y)&&h!==y&&(!h["s-hn"]&&h["s-ol"]&&(h["s-hn"]=h["s-ol"].parentNode.nodeName),b.insertBefore(h,y))}else 1===h.nodeType&&(h.hidden=!0)}s&&ne(f.$elm$),v.$flags$&=-2,re.length=0},se=function(e){return De(e).$hostElement$},ce=function(e,t,n){var r=se(e);return{emit:function(e){return le(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}}},le=function(e,t,n){var r=v.ce(t,n);return e.dispatchEvent(r),r},fe=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},de=function(e,t){if(e.$flags$|=16,!(4&e.$flags$)){fe(e,e.$ancestorComponent$);return Xe((function(){return he(e,t)}))}e.$flags$|=512},he=function(e,t){var n,r=E(0,e.$cmpMeta$.$tagName$),a=e.$lazyInstance$;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(e){var t=e[0],n=e[1];return ye(a,t,n)})),e.$queuedListeners$=null),n=ye(a,"componentWillLoad")),n=we(n,(function(){return ye(a,"componentWillRender")})),r(),we(n,(function(){return pe(e,a,t)}))},pe=function(e,t,n){return Object(o.a)(void 0,void 0,void 0,(function(){var r,a,i,u,s,c;return Object(o.c)(this,(function(o){return r=e.$hostElement$,a=E(0,e.$cmpMeta$.$tagName$),i=r["s-rc"],n&&function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=E(0,t.$tagName$),i=T(m&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);10&r&&(n["s-sc"]=i,n.classList.add(i+"-h"),2&r&&n.classList.add(i+"-s")),a()}(e),u=E(0,e.$cmpMeta$.$tagName$),ve(e,t),v.$cssShim$&&v.$cssShim$.updateHost(r),i&&(i.map((function(e){return e()})),r["s-rc"]=void 0),u(),a(),s=r["s-p"],c=function(){return me(e)},0===s.length?c():(Promise.all(s).then(c),e.$flags$|=4,s.length=0),[2]}))}))},ve=function(e,t,n){try{t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,ue(e,t)}catch(r){Pe(r,e.$hostElement$)}return null},me=function(e){var t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=E(0,t),a=e.$lazyInstance$,i=e.$ancestorComponent$;64&e.$flags$?(ye(a,"componentDidUpdate"),r()):(e.$flags$|=64,xe(n),ye(a,"componentDidLoad"),r(),e.$onReadyResolve$(n),i||be()),e.$onInstanceResolve$(n),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ge((function(){return de(e,!1)})),e.$flags$&=-517},ge=function(e){var t=De(e),n=t.$hostElement$.isConnected;return n&&2===(18&t.$flags$)&&de(t,!1),n},be=function(e){xe(p.documentElement),Ge((function(){return le(d,"appload",{detail:{namespace:"ionic"}})}))},ye=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){Pe(r)}},we=function(e,t){return e&&e.then?e.then(t):t()},xe=function(e){return e.classList.add("hydrated")},Oe=function e(t,n,r,a,i,o,u){var s,c,l,f;if(1===o.nodeType){for((s=o.getAttribute(_))&&((c=s.split("."))[0]!==u&&"0"!==c[0]||(l={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},n.push(l),o.removeAttribute(_),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l,t=l,a&&"0"===l.$depth$&&(a[l.$index$]=l.$elm$))),f=o.childNodes.length-1;f>=0;f--)e(t,n,r,a,i,o.childNodes[f],u);if(o.shadowRoot)for(f=o.shadowRoot.childNodes.length-1;f>=0;f--)e(t,n,r,a,i,o.shadowRoot.childNodes[f],u)}else if(8===o.nodeType)(c=o.nodeValue.split("."))[1]!==u&&"0"!==c[1]||(s=c[0],l={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===s?(l.$elm$=o.nextSibling,l.$elm$&&3===l.$elm$.nodeType&&(l.$text$=l.$elm$.textContent,n.push(l),o.remove(),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l,a&&"0"===l.$depth$&&(a[l.$index$]=l.$elm$))):l.$hostId$===u&&("s"===s?(l.$tag$="slot",c[5]?o["s-sn"]=l.$name$=c[5]:o["s-sn"]="",o["s-sr"]=!0,a&&(l.$elm$=p.createElement(l.$tag$),l.$name$&&l.$elm$.setAttribute("name",l.$name$),o.parentNode.insertBefore(l.$elm$,o),o.remove(),"0"===l.$depth$&&(a[l.$index$]=l.$elm$)),r.push(l),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l):"r"===s&&(a?o.remove():(i["s-cr"]=o,o["s-cn"]=!0))));else if(t&&"style"===t.$tag$){var d=L(null,o.textContent);d.$elm$=o,d.$index$="0",t.$children$=[d]}},ke=function e(t,n){if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n);if(t.shadowRoot)for(r=0;r<t.shadowRoot.childNodes.length;r++)e(t.shadowRoot.childNodes[r],n)}else if(8===t.nodeType){var a=t.nodeValue.split(".");"o"===a[0]&&(n.set(a[1]+"."+a[2],t),t.nodeValue="",t["s-en"]=a[3])}},je=function(e,t,n,r){var a=De(e),i=a.$hostElement$,o=a.$instanceValues$.get(t),u=a.$flags$,s=a.$lazyInstance$;if(n=function(e,t){return null==e||M(e)?e:4&t?"false"!==e&&(""===e||!!e):2&t?parseFloat(e):1&t?String(e):e}(n,r.$members$[t][0]),(!(8&u)||void 0===o)&&n!==o&&(a.$instanceValues$.set(t,n),s)){if(r.$watchers$&&128&u){var c=r.$watchers$[t];c&&c.map((function(e){try{s[e](n,o,t)}catch(r){Pe(r,i)}}))}2===(18&u)&&de(a,!1)}},_e=function(e,t,n){if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);var r=Object.entries(t.$members$),a=e.prototype;if(r.map((function(e){var r=e[0],i=e[1][0];31&i||2&n&&32&i?Object.defineProperty(a,r,{get:function(){return function(e,t){return De(e).$instanceValues$.get(t)}(this,r)},set:function(e){je(this,r,e,t)},configurable:!0,enumerable:!0}):1&n&&64&i&&Object.defineProperty(a,r,{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=De(this);return n.$onInstancePromise$.then((function(){var t;return(t=n.$lazyInstance$)[r].apply(t,e)}))}})})),1&n){var i=new Map;a.attributeChangedCallback=function(e,t,n){var r=this;v.jmp((function(){var t=i.get(e);r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){e[0];return 15&e[1][0]})).map((function(e){var n=e[0],r=e[1],a=r[1]||n;return i.set(a,n),512&r[0]&&t.$attrsToReflect$.push([n,a]),a}))}}return e},Se=function(e,t,r,a,i){return Object(o.a)(void 0,void 0,void 0,(function(){var a,u,s,c,l,f,d;return Object(o.c)(this,(function(o){switch(o.label){case 0:return 0!==(32&t.$flags$)?[3,5]:(t.$flags$|=32,(i=ze(r)).then?(a=function(){},[4,i]):[3,2]);case 1:i=o.sent(),a(),o.label=2;case 2:i.isProxied||(r.$watchers$=i.watchers,_e(i,r,2),i.isProxied=!0),u=E(0,r.$tagName$),t.$flags$|=8;try{new i(t)}catch(h){Pe(h)}return t.$flags$&=-9,t.$flags$|=128,u(),Ee(t.$lazyInstance$),i.style?("string"!==typeof(s=i.style)&&(s=s[t.$modeName$=function(e){return Ue.map((function(t){return t(e)})).find((function(e){return!!e}))}(e)]),c=N(r,t.$modeName$),Be.has(c)?[3,5]:(l=E(0,r.$tagName$),8&r.$flags$?[4,n.e(54).then(n.bind(null,684)).then((function(e){return e.scopeCss(s,c,!1)}))]:[3,4])):[3,5];case 3:s=o.sent(),o.label=4;case 4:A(c,s,!!(1&r.$flags$)),l(),o.label=5;case 5:return f=t.$ancestorComponent$,d=function(){return de(t,!0)},f&&f["s-rc"]?f["s-rc"].push(d):d(),[2]}}))}))},Ee=function(e){ye(e,"connectedCallback")},Ce=function(e){if(0===(1&v.$flags$)){var t=De(e),n=t.$cmpMeta$,r=E(0,n.$tagName$);if(1&t.$flags$)y(e,t,n.$listeners$),Ee(t.$lazyInstance$);else{t.$flags$|=1;var a;if(a=e.getAttribute(k)){if(m&&1&n.$flags$){var i=T(e.shadowRoot,n,e.getAttribute("s-mode"));e.classList.remove(i+"-h",i+"-s")}!function(e,t,n,r){var a=E(0,t),i=e.shadowRoot,o=[],u=i?[]:null,s=r.$vnode$=L(t,null);v.$orgLocNodes$||ke(p.body,v.$orgLocNodes$=new Map),e["s-id"]=n,e.removeAttribute(k),Oe(s,o,[],u,e,e,n),o.map((function(e){var n=e.$hostId$+"."+e.$nodeId$,r=v.$orgLocNodes$.get(n),a=e.$elm$;r&&m&&""===r["s-en"]&&r.parentNode.insertBefore(a,r.nextSibling),i||(a["s-hn"]=t,r&&(a["s-ol"]=r,a["s-ol"]["s-nr"]=a)),v.$orgLocNodes$.delete(n)})),i&&u.map((function(e){e&&i.appendChild(e)})),a()}(e,n.$tagName$,a,t)}a||12&n.$flags$&&Ae(e);for(var o=e;o=o.parentNode||o.host;)if(1===o.nodeType&&o.hasAttribute("s-id")&&o["s-p"]||o["s-p"]){fe(t,t.$ancestorComponent$=o);break}n.$members$&&Object.entries(n.$members$).map((function(t){var n=t[0];if(31&t[1][0]&&e.hasOwnProperty(n)){var r=e[n];delete e[n],e[n]=r}})),Ge((function(){return Se(e,t,n)}))}r()}},Ae=function(e){var t=e["s-cr"]=p.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Te=function(e,t){void 0===t&&(t={});var n,r=E(),a=[],i=t.exclude||[],u=d.customElements,s=p.head,c=s.querySelector("meta[charset]"),l=p.createElement("style"),f=[],h=p.querySelectorAll("[sty-id]"),g=!0,b=0;for(Object.assign(v,t),v.$resourcesUrl$=new URL(t.resourcesUrl||"./",p.baseURI).href,v.$flags$|=2;b<h.length;b++)A(h[b].getAttribute(j),I(h[b].innerHTML),!0);e.map((function(e){return e[1].map((function(t){var r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};r.$members$=t[2],r.$listeners$=t[3],r.$attrsToReflect$=[],r.$watchers$={},!m&&1&r.$flags$&&(r.$flags$|=8);var s=r.$tagName$,c=function(e){function t(t){var n=e.call(this,t)||this;return Fe(t=n,r),1&r.$flags$&&(m?t.attachShadow({mode:"open",delegatesFocus:!!(16&r.$flags$)}):"shadowRoot"in t||(t.shadowRoot=t)),n}return Object(o.b)(t,e),t.prototype.connectedCallback=function(){var e=this;n&&(clearTimeout(n),n=null),g?f.push(this):v.jmp((function(){return Ce(e)}))},t.prototype.disconnectedCallback=function(){var e=this;v.jmp((function(){return function(e){if(0===(1&v.$flags$)){var t=De(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map((function(e){return e()})),t.$rmListeners$=void 0),v.$cssShim$&&v.$cssShim$.removeHost(e),ye(n,"disconnectedCallback")}}(e)}))},t.prototype.componentOnReady=function(){return De(this).$onReadyPromise$},t}(HTMLElement);r.$lazyBundleId$=e[0],i.includes(s)||u.get(s)||(a.push(s),u.define(s,_e(c,r,1)))}))})),l.innerHTML=a+"{visibility:hidden}.hydrated{visibility:inherit}",l.setAttribute("data-styles",""),s.insertBefore(l,c?c.nextSibling:s.firstChild),g=!1,f.length?f.map((function(e){return e.connectedCallback()})):v.jmp((function(){return n=setTimeout(be,30)})),r()},Ne=function(e){var t=new URL(e,v.$resourcesUrl$);return t.origin!==d.location.origin?t.href:t.pathname},Ie=new WeakMap,De=function(e){return Ie.get(e)},Re=function(e,t){return Ie.set(t.$lazyInstance$=e,t)},Fe=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise((function(e){return n.$onInstanceResolve$=e})),n.$onReadyPromise$=new Promise((function(e){return n.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[],y(e,n,t.$listeners$),Ie.set(e,n)},Me=function(e,t){return t in e},Pe=function(e,t){return(0,console.error)(e,t)},Le=new Map,ze=function(e,t,r){var a=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$,o=Le.get(i);return o?o[a]:n(530)("./"+i+".entry.js").then((function(e){return Le.set(i,e),e[a]}),Pe)},Be=new Map,Ue=[],We=[],Ve=[],qe=function(e,t){return function(n){e.push(n),f||(f=!0,t&&4&v.$flags$?Ge(He):v.raf(He))}},$e=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Pe(n)}e.length=0},He=function e(){$e(We),$e(Ve),(f=We.length>0)&&v.raf(e)},Ge=function(e){return g().then(e)},Ke=qe(We,!1),Xe=qe(Ve,!0),Ye={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return k}));var r,a=n(77),i=function(e){return u(e)},o=function(e,t){return"string"===typeof e&&(t=e,e=void 0),i(e).includes(t)},u=function(e){if(void 0===e&&(e=window),"undefined"===typeof e)return[];e.Ionic=e.Ionic||{};var t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=s(e)).forEach((function(t){return e.document.documentElement.classList.add("plt-"+t)})),t},s=function(e){return Object.keys(g).filter((function(t){return g[t](e)}))},c=function(e){return!!v(e,/iPad/i)||!(!v(e,/Macintosh/i)||!f(e))},l=function(e){return v(e,/android|sink/i)},f=function(e){return m(e,"(any-pointer:coarse)")},d=function(e){return h(e)||p(e)},h=function(e){return!!(e.cordova||e.phonegap||e.PhoneGap)},p=function(e){var t=e.Capacitor;return!(!t||!t.isNative)},v=function(e,t){return t.test(e.navigator.userAgent)},m=function(e,t){return e.matchMedia(t).matches},g={ipad:c,iphone:function(e){return v(e,/iPhone/i)},ios:function(e){return v(e,/iPhone|iPod/i)||c(e)},android:l,phablet:function(e){var t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return r>390&&r<520&&a>620&&a<800},tablet:function(e){var t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return c(e)||function(e){return l(e)&&!v(e,/mobile/i)}(e)||r>460&&r<820&&a>780&&a<1400},cordova:h,capacitor:p,electron:function(e){return v(e,/electron/i)},pwa:function(e){return!(!e.matchMedia("(display-mode: standalone)").matches&&!e.navigator.standalone)},mobile:f,mobileweb:function(e){return f(e)&&!d(e)},desktop:function(e){return!f(e)},hybrid:d},b=new(function(){function e(){this.m=new Map}return e.prototype.reset=function(e){this.m=new Map(Object.entries(e))},e.prototype.get=function(e,t){var n=this.m.get(e);return void 0!==n?n:t},e.prototype.getBoolean=function(e,t){void 0===t&&(t=!1);var n=this.m.get(e);return void 0===n?t:"string"===typeof n?"true"===n:!!n},e.prototype.getNumber=function(e,t){var n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n},e.prototype.set=function(e,t){this.m.set(e,t)},e}()),y=function(e,t){return e.substr(0,t.length)===t},w="ionic:",x="ionic-persist-config",O=function(e){return e&&Object(a.i)(e)||r},k=function(e){if(void 0===e&&(e={}),"undefined"!==typeof window){var t=window.document,n=window,i=n.Ionic=n.Ionic||{};u(n);var s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e){try{var t=e.sessionStorage.getItem(x);return null!==t?JSON.parse(t):{}}catch(n){return{}}}(n)),{persistConfig:!1}),i.config),function(e){var t={};return e.location.search.slice(1).split("&").map((function(e){return e.split("=")})).map((function(e){var t=e[0],n=e[1];return[decodeURIComponent(t),decodeURIComponent(n)]})).filter((function(e){var t=e[0];return y(t,w)})).map((function(e){var t=e[0],n=e[1];return[t.slice(w.length),n]})).forEach((function(e){var n=e[0],r=e[1];t[n]=r})),t}(n)),e);b.reset(s),b.getBoolean("persistConfig")&&function(e,t){try{e.sessionStorage.setItem(x,JSON.stringify(t))}catch(n){return}}(n,s),i.config=b,i.mode=r=b.get("mode",t.documentElement.getAttribute("mode")||(o(n,"ios")?"ios":"md")),b.set("mode",r),t.documentElement.setAttribute("mode",r),t.documentElement.classList.add(r),b.getBoolean("_testing")&&b.set("animated",!1);var c=function(e){return e.tagName&&e.tagName.startsWith("ION-")},l=function(e){return["ios","md"].includes(e)};Object(a.p)((function(e){for(;e;){var t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;c(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return r}))}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(18),a=n(20);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.c(e),new r.b(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({reverse_:function(e,t){var n={x:Object(i.a)(e,"x","reverse")},o={dims:t};return r.a.runKernel(a.vc,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(20),i=n(84);function o(e,t){Object(a.d)(e);var n=Object(r.c)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(i.a)(e,null,n,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13),a=n(20),i=n(24);function o(e,t,n,o){if(null==o&&(o=Object(a.r)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(a.c)(t);var u=Object(a.O)(t),s=Object(a.O)(n);Object(a.b)(u===s,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(u," values but has ").concat(s)}));for(var c=0;c<n.length;++c){var l=n[c],f=c!==n.length-1||l!==Object(a.O)(t.slice(c));Object(a.b)(n[c]===t[c]||!f,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Object(a.A)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?Object(i.toTypedArray)(e,o):Object(a.m)(e,[],!0),r.a.makeTensor(e,t,o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({transpose_:function(e,t){var n=Object(i.a)(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){o.b(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var u={x:n},s={perm:t};return r.a.runKernel(a.fd,u,s)}})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return a}))},function(e,t,n){var r=n(143),a=n(144),i=n(242),o=n(241),u=o.MAX_LENGTH,s=o.MAX_SAFE_INTEGER,c=n(176),l=c.re,f=c.t,d=n(243),h=n(325).compareIdentifiers,p=function(){"use strict";function e(t,n){if(r(this,e),n=d(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>u)throw new TypeError("version is longer than ".concat(u," characters"));i("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var a=t.trim().match(n.loose?l[f.LOOSE]:l[f.FULL]);if(!a)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}return a(e,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(t){if(i("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"===typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}},{key:"compareMain",value:function(t){return t instanceof e||(t=new e(t,this.options)),h(this.major,t.major)||h(this.minor,t.minor)||h(this.patch,t.patch)}},{key:"comparePre",value:function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],a=t.prerelease[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return h(r,a)}while(++n)}},{key:"compareBuild",value:function(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],a=t.build[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return h(r,a)}while(++n)}},{key:"inc",value:function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}]),e}();e.exports=p},function(e,t,n){"use strict";n.r(t),n.d(t,"interpolate",(function(){return r.a})),n.d(t,"interpolateArray",(function(){return a.a})),n.d(t,"interpolateBasis",(function(){return i.b})),n.d(t,"interpolateBasisClosed",(function(){return o.a})),n.d(t,"interpolateDate",(function(){return u.a})),n.d(t,"interpolateDiscrete",(function(){return s})),n.d(t,"interpolateHue",(function(){return l})),n.d(t,"interpolateNumber",(function(){return f.a})),n.d(t,"interpolateNumberArray",(function(){return d.a})),n.d(t,"interpolateObject",(function(){return h.a})),n.d(t,"interpolateRound",(function(){return p.a})),n.d(t,"interpolateString",(function(){return v.a})),n.d(t,"interpolateTransformCss",(function(){return m.a})),n.d(t,"interpolateTransformSvg",(function(){return m.b})),n.d(t,"interpolateZoom",(function(){return g.a})),n.d(t,"interpolateRgb",(function(){return b.a})),n.d(t,"interpolateRgbBasis",(function(){return b.b})),n.d(t,"interpolateRgbBasisClosed",(function(){return b.c})),n.d(t,"interpolateHsl",(function(){return x})),n.d(t,"interpolateHslLong",(function(){return O})),n.d(t,"interpolateLab",(function(){return j})),n.d(t,"interpolateHcl",(function(){return S})),n.d(t,"interpolateHclLong",(function(){return E})),n.d(t,"interpolateCubehelix",(function(){return W})),n.d(t,"interpolateCubehelixLong",(function(){return V})),n.d(t,"piecewise",(function(){return q.a})),n.d(t,"quantize",(function(){return $}));var r=n(156),a=n(289),i=n(202),o=n(286),u=n(288),s=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},c=n(60),l=function(e,t){var n=Object(c.c)(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},f=n(95),d=n(162),h=n(290),p=n(399),v=n(287),m=n(337),g=n(401),b=n(166),y=n(72);function w(e){return function(t,n){var r=e((t=Object(y.f)(t)).h,(n=Object(y.f)(n)).h),a=Object(c.a)(t.s,n.s),i=Object(c.a)(t.l,n.l),o=Object(c.a)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var x=w(c.c),O=w(c.a),k=n(752);function j(e,t){var n=Object(c.a)((e=Object(k.a)(e)).l,(t=Object(k.a)(t)).l),r=Object(c.a)(e.a,t.a),a=Object(c.a)(e.b,t.b),i=Object(c.a)(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function _(e){return function(t,n){var r=e((t=Object(k.b)(t)).h,(n=Object(k.b)(n)).h),a=Object(c.a)(t.c,n.c),i=Object(c.a)(t.l,n.l),o=Object(c.a)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var S=_(c.c),E=_(c.a),C=n(96),A=n(212),T=-.14861,N=1.78277,I=-.29227,D=-.90649,R=1.97294,F=R*D,M=R*N,P=N*I-D*T;function L(e){if(e instanceof B)return new B(e.h,e.s,e.l,e.opacity);e instanceof y.b||(e=Object(y.h)(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(P*r+F*t-M*n)/(P+F-M),i=r-a,o=(R*(n-a)-I*i)/D,u=Math.sqrt(o*o+i*i)/(R*a*(1-a)),s=u?Math.atan2(o,i)*A.a-120:NaN;return new B(s<0?s+360:s,u,a,e.opacity)}function z(e,t,n,r){return 1===arguments.length?L(e):new B(e,t,n,null==r?1:r)}function B(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function U(e){return function t(n){function r(t,r){var a=e((t=z(t)).h,(r=z(r)).h),i=Object(c.a)(t.s,r.s),o=Object(c.a)(t.l,r.l),u=Object(c.a)(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}Object(C.a)(B,z,Object(C.b)(y.a,{brighter:function(e){return e=null==e?y.c:Math.pow(y.c,e),new B(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?y.d:Math.pow(y.d,e),new B(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*A.b,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new y.b(255*(t+n*(T*r+N*a)),255*(t+n*(I*r+D*a)),255*(t+n*(R*r)),this.opacity)}}));var W=U(c.c),V=U(c.a),q=n(400),$=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({pow_:function(e,t){var n=Object(u.a)(e,"base","pow"),s=Object(u.a)(t,"exp","pow"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.hc,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(20),i=n(99),o=n(125);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=u(e,"float32"),s=Object(o.a)(e,"float32");return Object(i.a)(n,s)}var c=Object(a.D)(Object(a.O)(e),t);return r.a.makeTensor(c,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({lessEqual_:function(e,t){var n=Object(u.a)(e,"a","lessEqual","string_or_numeric"),c=Object(u.a)(t,"b","lessEqual","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Bb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var u={paddings:t,constantValue:n},s={x:o};return r.a.runKernel(a.fc,s,u)}})},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(526)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(43);function a(){var e;Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function i(){var e;Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||(e=console).log.apply(e,arguments)}},function(e,t,n){"use strict";t.a=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}},function(e,t,n){"use strict";function r(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}n.d(t,"b",(function(){return r})),t.a=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T})),n.d(t,"i",(function(){return I})),n.d(t,"c",(function(){return D})),n.d(t,"f",(function(){return R})),n.d(t,"e",(function(){return P})),n.d(t,"d",(function(){return L})),n.d(t,"k",(function(){return B})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return W})),n.d(t,"j",(function(){return V})),n.d(t,"b",(function(){return q}));var r=n(4),a=n(14),i=n(3),o=n(11),u=n(0),s=n(134),c=n(165),l=n(6),f=n(429),d=n(430),h=n(431),p=n(432),v=n(433),m=n(434),g=n(435),b=n(436),y=n(437),w=n(438),x=n(439),O=n(440),k=n(441),j=n(442),_=n(443),S=n(444),E=n(445),C=n(446),A=n(447),T=function(){function e(){var t;Object(i.a)(this,e);var n=[f,d,h,p,v,m,g,b,y,w,x,O,k,j,_,S,E,C,A],r=(t=[]).concat.apply(t,Object(a.a)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object(o.a)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.node,i=[],o=[],u=[],s=a.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?i.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||u.push(e[n.name]),e}),{}),c=[],f=[],d={},h={};null!=n&&(d=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var a=Object(l.b)(e),i=Object(r.a)(a,3),o=i[0],u=i[2],c=s[o];if(null!=c.outputs){var f=c.outputs.indexOf(u);if(-1!==f){var d="".concat(o,":").concat(f);t.inputNames[n]=d}}t.inputs.push(c),c.children.push(t)}))})),0===Object.keys(h).length?p.forEach((function(e){var t=s[e];0===t.children.length&&f.push(t)})):Object.keys(h).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=s[n];null!=a&&(a.signatureKey=h[e],f.push(a))})),Object.keys(d).length>0?Object.keys(d).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=s[n];a&&(a.signatureKey=d[e],c.push(a))})):c=i;var v={};null!=e.library&&null!=e.library.function&&(v=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var m={nodes:s,inputs:c,outputs:f,weights:o,placeholders:i,signature:n,functions:v};return u.length>0&&(m.initNodes=u),m}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Object(c.a)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=I(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=I(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=W(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=W(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=R(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=R(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=U(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=U(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=D(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=D(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=q(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=q(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=B(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=V(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=V(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=P(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=L(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=M(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=M(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,a=[],i={};null!=n&&(i=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&a.push(e[n.name]),e}),{}));var o=[],u=[];e.signature.inputArg.forEach((function(e){var t=Object(l.b)(e.name),n=Object(r.a)(t,1)[0],a={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:F(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,o.push(a),i[n]=a})),Object.keys(i).forEach((function(e){var t=i[e];t.inputNames.forEach((function(e,n){var a=Object(l.b)(e),o=Object(r.a)(a,3),u=o[0],s=o[2],c=i[u];if(null!=c.outputs){var f=c.outputs.indexOf(s);if(-1!==f){var d="".concat(u,":").concat(f);t.inputNames[n]=d}}t.inputs.push(c),c.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=Object(l.b)(s[e.name]),n=Object(r.a)(t,2),a=n[0],o=n[1],c=i[a];null!=c&&(c.defaultOutput=o,u.push(c))}));var c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:u,weights:a,placeholders:[],signature:c}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function N(t,n){var r=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var n=Object(u.env)().global;if("undefined"!==typeof n.atob)return n.atob(t);if("undefined"!==typeof e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?r:r.toLowerCase()}function I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?N(a.s,r):n}function D(e,t,n){var r=e[t];return r?r.b:n}function R(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function F(e){switch("string"===typeof e&&(e=s.a[e]),e){case s.a.DT_FLOAT:return"float32";case s.a.DT_INT32:case s.a.DT_INT64:case s.a.DT_INT8:case s.a.DT_UINT8:return"int32";case s.a.DT_BOOL:return"bool";case s.a.DT_DOUBLE:return"float32";case s.a.DT_STRING:return"string";default:return null}}function M(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function P(e,t,n){var r=e[t];return r&&r.type?F(r.type):n}function L(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return F(e)})):n}function z(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function B(e,t,n){var r=e[t];return r&&r.shape?z(r.shape):n}function U(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function W(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return N(e,r)})):n}function V(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return z(e)})):n}function q(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(218).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return s}));var r=n(343),a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t};function i(e){return o(void 0,e)}function o(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=o(e[n],t[n]));return e}var u=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function s(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function c(){return"object"===typeof self&&self.self===self}var l=function(e){function t(n,r,a){var i=e.call(this,r)||this;return i.code=n,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,f.prototype.create),i}return Object(r.b)(t,e),t}(Error),f=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},a=this.service+"/"+e,i=this.errors[e],o=i?d(i,r):"Error",u=this.serviceName+": "+o+" ("+a+").",s=new l(a,u,r);return s},e}();function d(e,t){return e.replace(h,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var h=/\{\$([^}]+)}/g;function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var a=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(a<<1|a>>>31)}var i,o,u=this.chain_[0],s=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^s&(c^l),o=1518500249):(i=s^c^l,o=1859775393):r<60?(i=s&c|l&(s|c),o=2400959708):(i=s^c^l,o=3395469782);a=(u<<5|u>>>27)+i+f+o+n[r]&4294967295;f=l,l=c,c=4294967295&(s<<30|s>>>2),s=u,u=a}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,a=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(a[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(a),i=0;break}}else for(;r<t;)if(a[i]=e[r],++r,++i===this.blockSize){this.compress_(a),i=0;break}}this.inbuf_=i,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[n]>>a&255,++r;return e}}();function v(e,t){var n=new m(e,t);return n.subscribe.bind(n)}var m=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var a=r[n];if(a in e&&"function"===typeof e[a])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=g),void 0===r.error&&(r.error=g),void 0===r.complete&&(r.complete=g);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function g(){}}).call(this,n(141))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({complex_:function(e,t){var n=Object(i.a)(e,"real","complex"),u=Object(i.a)(t,"imag","complex");o.e(n.shape,u.shape,"real and imag shapes, ".concat(n.shape," and ").concat(u.shape,", ")+"must match in call to tf.complex().");var s={real:n,imag:u};return r.a.runKernel(a.A,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(37),u=n(12);var s=Object(u.b)({logicalAnd_:function(e,t){var n=Object(i.a)(e,"a","logicalAnd","bool"),u=Object(i.a)(t,"b","logicalAnd","bool");Object(o.a)(n.shape,u.shape);var s={a:n,b:u};return r.a.runKernel(a.Gb,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","split"),u={x:o},s={numOrSizeSplits:t,axis:n};return r.a.runKernel(a.Pc,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.b)(e,"tensors","stack","string_or_numeric");o.b(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.b(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var u=n,s={axis:t};return r.a.runKernel(a.ec,u,s)}})},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return m}));var r=n(4),a=n(43),i=n(172),o=n(94),u=Object(i.a)("kernelRegistry",(function(){return new Map})),s=Object(i.a)("gradRegistry",(function(){return new Map}));function c(e,t){var n=g(e,t);return u.get(n)}function l(e){return s.get(e)}function f(e){for(var t=u.entries(),n=[];;){var a=t.next(),i=a.done,o=a.value;if(i)break;var s=Object(r.a)(o,2),c=s[0],l=s[1],f=c.split("_");Object(r.a)(f,1)[0]===e&&n.push(l)}return n}function d(e){var t=e.kernelName,n=e.backendName,r=g(t,n);u.has(r)&&o.b("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),u.set(r,e)}function h(e){var t=e.kernelName;s.has(t)&&Object(a.c)().getBool("DEBUG")&&o.b("Overriding the gradient for '".concat(t,"'")),s.set(t,e)}function p(e,t){var n=g(e,t);if(!u.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));u.delete(n)}function v(e){if(!s.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));s.delete(e)}function m(e,t){f(e).forEach((function(e){d(Object.assign({},e,{backendName:t}))}))}function g(e,t){return"".concat(t,"_").concat(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","expandDims","string_or_numeric");o.b(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var u={input:n},s={dim:t};return r.a.runKernel(a.cb,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return A})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return p}));var r=n(29);function a(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&a(e),s=t&&a(t),c=u||s;if(e&&a(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,d=o.length;d>=0;d--){var h=o[d];"."===h?i(o,d):".."===h?(i(o,d),f++):f&&(i(o,d),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&a(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=u(t),a=u(n);return r!==t||a!==n?e(r,a):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(132);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function v(e,t,n,a){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Object(r.a)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(i.key=n),a?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=o(i.pathname,a.pathname)):i.pathname=a.pathname:i.pathname||(i.pathname="/"),i}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var i="function"===typeof e?e(t,n):e;"string"===typeof i?"function"===typeof r?r(i,a):a(!0):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function y(e,t){t(window.confirm(e))}var w="popstate",x="hashchange";function O(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),b||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,u=void 0!==o&&o,s=i.getUserConfirmation,f=void 0===s?y:s,m=i.keyLength,k=void 0===m?6:m,j=e.basename?h(l(e.basename)):"";function _(e){var t=e||{},n=t.key,r=t.state,a=window.location,i=a.pathname+a.search+a.hash;return j&&(i=d(i,j)),v(i,r,n)}function S(){return Math.random().toString(36).substr(2,k)}var E=g();function C(e){Object(r.a)(B,e),B.length=t.length,E.notifyListeners(B.location,B.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||I(_(e.state))}function T(){I(_(O()))}var N=!1;function I(e){if(N)N=!1,C();else{E.confirmTransitionTo(e,"POP",f,(function(t){t?C({action:"POP",location:e}):function(e){var t=B.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(N=!0,M(a))}(e)}))}}var D=_(O()),R=[D.key];function F(e){return j+p(e)}function M(e){t.go(e)}var P=0;function L(e){1===(P+=e)&&1===e?(window.addEventListener(w,A),a&&window.addEventListener(x,T)):0===P&&(window.removeEventListener(w,A),a&&window.removeEventListener(x,T))}var z=!1;var B={length:t.length,action:"POP",location:D,createHref:F,push:function(e,r){var a="PUSH",i=v(e,r,S(),B.location);E.confirmTransitionTo(i,a,f,(function(e){if(e){var r=F(i),o=i.key,s=i.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=R.indexOf(B.location.key),l=R.slice(0,c+1);l.push(i.key),R=l,C({action:a,location:i})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",i=v(e,r,S(),B.location);E.confirmTransitionTo(i,a,f,(function(e){if(e){var r=F(i),o=i.key,s=i.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=R.indexOf(B.location.key);-1!==c&&(R[c]=i.key),C({action:a,location:i})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=E.setPrompt(e);return z||(L(1),z=!0),function(){return z&&(z=!1,L(-1)),t()}},listen:function(e){var t=E.appendListener(e);return L(1),function(){L(-1),t()}}};return B}var j="hashchange",_={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function S(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function E(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function C(e){window.location.replace(S(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),b||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),a=n.getUserConfirmation,i=void 0===a?y:a,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?h(l(e.basename)):"",f=_[u],m=f.encodePath,w=f.decodePath;function x(){var e=w(E());return s&&(e=d(e,s)),v(e)}var O=g();function k(e){Object(r.a)(B,e),B.length=t.length,O.notifyListeners(B.location,B.action)}var A=!1,T=null;function N(){var e,t,n=E(),r=m(n);if(n!==r)C(r);else{var a=x(),o=B.location;if(!A&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(T===p(a))return;T=null,function(e){if(A)A=!1,k();else{var t="POP";O.confirmTransitionTo(e,t,i,(function(n){n?k({action:t,location:e}):function(e){var t=B.location,n=F.lastIndexOf(p(t));-1===n&&(n=0);var r=F.lastIndexOf(p(e));-1===r&&(r=0);var a=n-r;a&&(A=!0,M(a))}(e)}))}}(a)}}var I=E(),D=m(I);I!==D&&C(D);var R=x(),F=[p(R)];function M(e){t.go(e)}var P=0;function L(e){1===(P+=e)&&1===e?window.addEventListener(j,N):0===P&&window.removeEventListener(j,N)}var z=!1;var B={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=S(window.location.href)),n+"#"+m(s+p(e))},push:function(e,t){var n="PUSH",r=v(e,void 0,void 0,B.location);O.confirmTransitionTo(r,n,i,(function(e){if(e){var t=p(r),a=m(s+t);if(E()!==a){T=t,function(e){window.location.hash=e}(a);var i=F.lastIndexOf(p(B.location)),o=F.slice(0,i+1);o.push(t),F=o,k({action:n,location:r})}else k()}}))},replace:function(e,t){var n="REPLACE",r=v(e,void 0,void 0,B.location);O.confirmTransitionTo(r,n,i,(function(e){if(e){var t=p(r),a=m(s+t);E()!==a&&(T=t,C(a));var i=F.indexOf(p(B.location));-1!==i&&(F[i]=t),k({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return z||(L(1),z=!0),function(){return z&&(z=!1,L(-1)),t()}},listen:function(e){var t=O.appendListener(e);return L(1),function(){L(-1),t()}}};return B}function T(e,t,n){return Math.min(Math.max(e,t),n)}function N(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,a=t.initialEntries,i=void 0===a?["/"]:a,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=g();function f(e){Object(r.a)(w,e),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function d(){return Math.random().toString(36).substr(2,c)}var h=T(u,0,i.length-1),m=i.map((function(e){return v(e,void 0,"string"===typeof e?d():e.key||d())})),b=p;function y(e){var t=T(w.index+e,0,w.entries.length-1),r=w.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var w={length:m.length,action:"POP",location:m[h],index:h,entries:m,createHref:b,push:function(e,t){var r="PUSH",a=v(e,t,d(),w.location);l.confirmTransitionTo(a,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,a):n.push(a),f({action:r,location:a,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",a=v(e,t,d(),w.location);l.confirmTransitionTo(a,r,n,(function(e){e&&(w.entries[w.index]=a,f({action:r,location:a}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return w}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(56),s=n(12),c=n(19);var l=Object(s.b)({conv2d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],d=arguments.length>6?arguments[6]:void 0,h=Object(i.a)(e,"x","conv2d"),p=Object(i.a)(t,"filter","conv2d"),v=h,m=!1;3===h.rank&&(m=!0,v=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.b(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.b(4===p.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),null!=d&&o.b(o.v(s),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(s,".")}));var g="NHWC"===l?v.shape[3]:v.shape[1];o.b(g===p.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],".")})),o.b(u.h(n,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")}));var b={x:v,filter:p},y={strides:n,pad:s,dataFormat:l,dilations:f,dimRoundingMode:d},w=r.a.runKernel(a.D,b,y);return m?Object(c.a)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({greaterEqual_:function(e,t){var n=Object(u.a)(e,"a","greaterEqual","string_or_numeric"),c=Object(u.a)(t,"b","greaterEqual","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.qb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({clone_:function(e){var t={x:Object(i.a)(e,"x","clone","string_or_numeric")};return r.a.runKernel(a.sb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({sigmoid_:function(e){var t={x:Object(i.a)(e,"x","sigmoid")};return r.a.runKernel(a.Cc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({tile_:function(e,t){var n=Object(i.a)(e,"x","tile","string_or_numeric");o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var u={x:n},s={reps:t};return r.a.runKernel(a.cd,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","max"),u={x:o},s={reductionIndices:t,keepDims:n};return r.a.runKernel(a.Jb,u,s)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return v}));var r=n(2),a=n.n(r),i=n(15),o=n(0);function u(e,t){return s(e,t)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(p(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var u=e[o],c=s(u,t,n,r);i[o]=c}return r.delete(e),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return l(e,t)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(p(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=l(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var u in r)o(u);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function f(e){return null===e?null:p(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function d(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n){var r,i,u,c,l,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,s(t,n,r),i=0,u=Array.from(r.keys());case 3:if(!(i<u.length)){e.next=14;break}if(c=u[i],l=r.get(c),!o.util.isPromise(l)){e.next=11;break}return e.next=9,l;case 9:f=e.sent,r.set(c,f);case 11:i++,e.next=3;break;case 14:return d=s(t,n,r),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=!1;o.env().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(579).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof o.Tensor)&&!(e instanceof Promise)&&!t)}function v(e){return null==e||(null===(t=e)||"object"!==typeof t&&"function"!==typeof t)||Array.isArray(e)||"object"===typeof e&&e instanceof o.Tensor||o.util.isTypedArray(e);var t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return c}));var r=n(35),a=n(77),i=n(69),o="ionViewWillLeave",u="ionViewDidLeave",s="ionViewWillUnload",c=function(e){return new Promise((function(t,n){Object(a.f)((function(){l(e),f(e).then((function(n){n.animation&&n.animation.destroy(),d(e),t(n)}),(function(t){d(e),n(t)}))}))}))},l=function(e){var t=e.enteringEl,n=e.leavingEl;_(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),j(t,!1),t.style.setProperty("pointer-events","none"),n&&(j(n,!1),n.style.setProperty("pointer-events","none"))},f=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(n){switch(n.label){case 0:return[4,h(e)];case 1:return t=n.sent(),[2,t&&a.a.isBrowser?p(t,e):v(e)]}}))}))},d=function(e){var t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},h=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return e.leavingEl&&e.animated&&0!==e.duration?e.animationBuilder?[2,e.animationBuilder]:"ios"!==e.mode?[3,2]:[4,Promise.resolve().then(n.bind(null,322))]:[2,void 0];case 1:return t=r.sent().iosTransitionAnimation,[3,4];case 2:return[4,Promise.resolve().then(n.bind(null,323))];case 3:t=r.sent().mdTransitionAnimation,r.label=4;case 4:return[2,t]}}))}))},p=function(e,t){return Object(r.a)(void 0,void 0,void 0,(function(){var n,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,m(t,!0)];case 1:return r.sent(),n=e(t.baseEl,t),y(t.enteringEl,t.leavingEl),[4,b(n,t)];case 2:return a=r.sent(),t.progressCallback&&t.progressCallback(void 0),a&&w(t.enteringEl,t.leavingEl),[2,{hasCompleted:a,animation:n}]}}))}))},v=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return t=e.enteringEl,n=e.leavingEl,[4,m(e,!1)];case 1:return r.sent(),y(t,n),w(t,n),[2,{hasCompleted:!0}]}}))}))},m=function(e,t){return Object(r.a)(void 0,void 0,void 0,(function(){var n,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=void 0!==e.deepWait?e.deepWait:t,a=n?[k(e.enteringEl),k(e.leavingEl)]:[O(e.enteringEl),O(e.leavingEl)],[4,Promise.all(a)];case 1:return r.sent(),[4,g(e.viewIsReady,e.enteringEl)];case 2:return r.sent(),[2]}}))}))},g=function(e,t){return Object(r.a)(void 0,void 0,void 0,(function(){return Object(r.c)(this,(function(n){switch(n.label){case 0:return e?[4,e(t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},b=function(e,t){var n=t.progressCallback,r=new Promise((function(t){e.onFinish((function(e){return t(1===e)}))}));return n?(e.progressStart(!0),n(e)):e.play(),r},y=function(e,t){x(t,o),x(e,"ionViewWillEnter")},w=function(e,t){x(e,"ionViewDidEnter"),x(t,u)},x=function(e,t){if(e){var n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},O=function(e){return e?new Promise((function(t){return Object(i.c)(e,t)})):Promise.resolve()},k=function e(t){return Object(r.a)(void 0,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(n=t)?null==n.componentOnReady?[3,2]:[4,n.componentOnReady()]:[3,4];case 1:if(null!=r.sent())return[2];r.label=2;case 2:return[4,Promise.all(Array.from(n.children).map(e))];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},j=function(e,t){t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},_=function(e,t,n){void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},S=function(e){if(e.classList.contains("ion-page"))return e;var t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e}},function(e,t,n){var r=n(87);e.exports=function(e,t,n){return new r(e,n).compare(new r(t,n))}},function(e,t,n){var r=n(331),a=n(163),i=n(143),o=n(144),u=function(){"use strict";function e(t,n){var r=this;if(i(this,e),n=c(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof l)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((function(e){return r.parseRange(e.trim())})).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(e){return!y(e[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var u,s=a(this.set);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(1===f.length&&w(f[0])){this.set=[f];break}}}catch(d){s.e(d)}finally{s.f()}}}this.format()}return o(e,[{key:"format",value:function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(e){var t=this;e=e.trim();var n=Object.keys(this.options).join(","),i="parseRange:".concat(n,":").concat(e),o=s.get(i);if(o)return o;var u=this.options.loose,c=u?p[v.HYPHENRANGELOOSE]:p[v.HYPHENRANGE];e=e.replace(c,I(this.options.includePrerelease)),f("hyphen replace",e),e=e.replace(p[v.COMPARATORTRIM],m),f("comparator trim",e,p[v.COMPARATORTRIM]),e=(e=(e=e.replace(p[v.TILDETRIM],g)).replace(p[v.CARETTRIM],b)).split(/\s+/).join(" ");var d,h=u?p[v.COMPARATORLOOSE]:p[v.COMPARATOR],w=e.split(" ").map((function(e){return O(e,t.options)})).join(" ").split(/\s+/).map((function(e){return N(e,t.options)})).filter(this.options.loose?function(e){return!!e.match(h)}:function(){return!0}).map((function(e){return new l(e,t.options)})),x=(w.length,new Map),k=a(w);try{for(k.s();!(d=k.n()).done;){var j=d.value;if(y(j))return[j];x.set(j.value,j)}}catch(S){k.e(S)}finally{k.f()}x.size>1&&x.has("")&&x.delete("");var _=r(x.values());return s.set(i,_),_}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((function(e){return x(e,n)&&t.set.some((function(t){return x(t,n)&&e.every((function(e){return t.every((function(t){return e.intersects(t,n)}))}))}))}))}},{key:"test",value:function(e){if(!e)return!1;if("string"===typeof e)try{e=new d(e,this.options)}catch(n){return!1}for(var t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}]),e}();e.exports=u;var s=new(n(607))({max:1e3}),c=n(243),l=n(245),f=n(242),d=n(87),h=n(176),p=h.re,v=h.t,m=h.comparatorTrimReplace,g=h.tildeTrimReplace,b=h.caretTrimReplace,y=function(e){return"<0.0.0-0"===e.value},w=function(e){return""===e.value},x=function(e,t){for(var n=!0,r=e.slice(),a=r.pop();n&&r.length;)n=r.every((function(e){return a.intersects(e,t)})),a=r.pop();return n},O=function(e,t){return f("comp",e,t),e=S(e,t),f("caret",e),e=j(e,t),f("tildes",e),e=C(e,t),f("xrange",e),e=T(e,t),f("stars",e),e},k=function(e){return!e||"x"===e.toLowerCase()||"*"===e},j=function(e,t){return e.trim().split(/\s+/).map((function(e){return _(e,t)})).join(" ")},_=function(e,t){var n=t.loose?p[v.TILDELOOSE]:p[v.TILDE];return e.replace(n,(function(t,n,r,a,i){var o;return f("tilde",e,t,n,r,a,i),k(n)?o="":k(r)?o=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):k(a)?o=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):i?(f("replaceTilde pr",i),o=">=".concat(n,".").concat(r,".").concat(a,"-").concat(i," <").concat(n,".").concat(+r+1,".0-0")):o=">=".concat(n,".").concat(r,".").concat(a," <").concat(n,".").concat(+r+1,".0-0"),f("tilde return",o),o}))},S=function(e,t){return e.trim().split(/\s+/).map((function(e){return E(e,t)})).join(" ")},E=function(e,t){f("caret",e,t);var n=t.loose?p[v.CARETLOOSE]:p[v.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(function(t,n,a,i,o){var u;return f("caret",e,t,n,a,i,o),k(n)?u="":k(a)?u=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):k(i)?u="0"===n?">=".concat(n,".").concat(a,".0").concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".0").concat(r," <").concat(+n+1,".0.0-0"):o?(f("replaceCaret pr",o),u="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(+n+1,".0.0-0")):(f("no pr"),u="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i," <").concat(+n+1,".0.0-0")),f("caret return",u),u}))},C=function(e,t){return f("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return A(e,t)})).join(" ")},A=function(e,t){e=e.trim();var n=t.loose?p[v.XRANGELOOSE]:p[v.XRANGE];return e.replace(n,(function(n,r,a,i,o,u){f("xRange",e,n,r,a,i,o,u);var s=k(a),c=s||k(i),l=c||k(o),d=l;return"="===r&&d&&(r=""),u=t.includePrerelease?"-0":"",s?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(i=0),o=0,">"===r?(r=">=",c?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",c?a=+a+1:i=+i+1),"<"===r&&(u="-0"),n="".concat(r+a,".").concat(i,".").concat(o).concat(u)):c?n=">=".concat(a,".0.0").concat(u," <").concat(+a+1,".0.0-0"):l&&(n=">=".concat(a,".").concat(i,".0").concat(u," <").concat(a,".").concat(+i+1,".0-0")),f("xRange return",n),n}))},T=function(e,t){return f("replaceStars",e,t),e.trim().replace(p[v.STAR],"")},N=function(e,t){return f("replaceGTE0",e,t),e.trim().replace(p[t.includePrerelease?v.GTE0PRE:v.GTE0],"")},I=function(e){return function(t,n,r,a,i,o,u,s,c,l,f,d,h){return n=k(r)?"":k(a)?">=".concat(r,".0.0").concat(e?"-0":""):k(i)?">=".concat(r,".").concat(a,".0").concat(e?"-0":""):o?">=".concat(n):">=".concat(n).concat(e?"-0":""),s=k(c)?"":k(l)?"<".concat(+c+1,".0.0-0"):k(f)?"<".concat(c,".").concat(+l+1,".0-0"):d?"<=".concat(c,".").concat(l,".").concat(f,"-").concat(d):e?"<".concat(c,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(s),"".concat(n," ").concat(s).trim()}},D=function(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var a=0;a<e.length;a++)if(f(e[a].semver),e[a].semver!==l.ANY&&e[a].semver.prerelease.length>0){var i=e[a].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(405),o=n(406);t.getDrawArea=function(e){if(e instanceof HTMLElement)return e;if(i.isSurface(e))return e.drawArea;if(i.isSurfaceInfo(e))return o.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")},t.shallowEquals=function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++){var i=n[a];if(e[i]!==t[i])return!1}return!0},t.nextFrame=function(){return a(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return requestAnimationFrame(e)}));case 2:case"end":return e.stop()}}),e)})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({log_:function(e){var t={x:Object(i.a)(e,"x","log")};return r.a.runKernel(a.Db,t)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"formatDefaultLocale",(function(){return g})),n.d(t,"format",(function(){return l})),n.d(t,"formatPrefix",(function(){return f})),n.d(t,"formatLocale",(function(){return m})),n.d(t,"formatSpecifier",(function(){return o})),n.d(t,"precisionFixed",(function(){return b})),n.d(t,"precisionPrefix",(function(){return y})),n.d(t,"precisionRound",(function(){return w}));var r=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},a=function(e){return(e=r(Math.abs(e)))?e[1]:NaN},i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){return new u(e)}function u(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}o.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,c,l,f,d=function(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")},h={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return d(100*e,t)},r:d,s:function(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],i=n[1],o=i-(s=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+r(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},p=function(e){return e},v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],m=function(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}):p,i=e.currency,u=e.decimal,c=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):p,l=e.percent||"%";function f(e){var t=(e=o(e)).fill,n=e.align,a=e.sign,f=e.symbol,d=e.zero,p=e.width,m=e.comma,g=e.precision,b=e.trim,y=e.type;"n"===y?(m=!0,y="g"):h[y]||(null==g&&(g=12),b=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var w="$"===f?i[0]:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?i[1]:/[%p]/.test(y)?l:"",O=h[y],k=/[defgprs%]/.test(y);function j(e){var i,o,l,f=w,h=x;if("c"===y)h=O(e)+h,e="";else{var j=(e=+e)<0;if(e=O(Math.abs(e),g),b&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(a>0){if(!+e[r])break e;a=0}}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),j&&0===+e&&(j=!1),f=(j?"("===a?a:"-":"-"===a||"("===a?"":a)+f,h=("s"===y?v[8+s/3]:"")+h+(j&&"("===a?")":""),k)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){h=(46===l?u+e.slice(i+1):e.slice(i))+h,e=e.slice(0,i);break}}m&&!d&&(e=r(e,1/0));var _=f.length+e.length+h.length,S=_<p?new Array(p-_+1).join(t):"";switch(m&&d&&(e=r(S+e,S.length?p-h.length:1/0),S=""),n){case"<":e=f+e+h+S;break;case"=":e=f+S+e+h;break;case"^":e=S.slice(0,_=S.length>>1)+f+e+h+S.slice(_);break;default:e=S+f+e+h}return c(e)}return g=null==g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),j.toString=function(){return e+""},j}return{format:f,formatPrefix:function(e,t){var n=f(((e=o(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(a(t)/3))),i=Math.pow(10,-r),u=v[8+r/3];return function(e){return n(i*e)+u}}}};function g(e){return c=m(e),l=c.format,f=c.formatPrefix,c}g({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var b=function(e){return Math.max(0,-a(Math.abs(e)))},y=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(t)/3)))-a(Math.abs(e)))},w=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a(t)-a(e))+1}},function(e,t,n){"use strict";var r=n(204),a=n(230);t.a=function(e,t,n,i){return Object(r.a)(e,t,n,i),function(){Object(a.a)(e,t,n,i)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return R})),n.d(t,"f",(function(){return I}));var r=n(86),a=n(5),i=n.n(a),o=(n(33),n(106)),u=n(338),s=n(132),c=n(29),l=n(339),f=n.n(l),d=(n(358),n(45)),h=n(413),p=n.n(h),v=function(e){var t=Object(u.a)();return t.displayName=e,t}("Router-History"),m=function(e){var t=Object(u.a)();return t.displayName=e,t}("Router"),g=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return i.a.createElement(m.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.a.createElement(v.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.a.Component);i.a.Component;var b=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.a.Component);var y={},w=0;function x(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(y[e])return y[e];var t=f.a.compile(e);return w<1e4&&(y[e]=t,w++),t}(e)(t,{pretty:!0})}function O(e){var t=e.computedMatch,n=e.to,r=e.push,a=void 0!==r&&r;return i.a.createElement(m.Consumer,null,(function(e){e||Object(s.a)(!1);var r=e.history,u=e.staticContext,l=a?r.push:r.replace,f=Object(o.c)(t?"string"===typeof n?x(n,t.params):Object(c.a)({},n,{pathname:x(n.pathname,t.params)}):n);return u?(l(f),null):i.a.createElement(b,{onMount:function(){l(f)},onUpdate:function(e,t){var n=Object(o.c)(t.to);Object(o.f)(n,Object(c.a)({},f,{key:n.key}))||l(f)},to:n})}))}var k={},j=0;function _(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=void 0!==a&&a,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=k[n]||(k[n]={});if(r[e])return r[e];var a=[],i={regexp:f()(e,a,t),keys:a};return j<1e4&&(r[e]=i,j++),i}(n,{end:i,strict:u,sensitive:c}),a=r.regexp,o=r.keys,s=a.exec(e);if(!s)return null;var l=s[0],d=s.slice(1),h=e===l;return i&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var S=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(m.Consumer,null,(function(t){t||Object(s.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?_(n.pathname,e.props):t.match,a=Object(c.a)({},t,{location:n,match:r}),o=e.props,u=o.children,l=o.component,f=o.render;return Array.isArray(u)&&0===u.length&&(u=null),i.a.createElement(m.Provider,{value:a},a.match?u?"function"===typeof u?u(a):u:l?i.a.createElement(l,a):f?f(a):null:"function"===typeof u?u(a):null)}))},t}(i.a.Component);function E(e){return"/"===e.charAt(0)?e:"/"+e}function C(e,t){if(!e)return t;var n=E(e);return 0!==t.pathname.indexOf(n)?t:Object(c.a)({},t,{pathname:t.pathname.substr(n.length)})}function A(e){return"string"===typeof e?e:Object(o.e)(e)}function T(e){return function(){Object(s.a)(!1)}}function N(){}i.a.Component;i.a.Component;function I(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=Object(d.a)(t,["wrappedComponentRef"]);return i.a.createElement(m.Consumer,null,(function(t){return t||Object(s.a)(!1),i.a.createElement(e,Object(c.a)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,p()(n,e)}var D=i.a.useContext;function R(){return D(v)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InlineIcon=t.Icon=void 0;var r,a=(r=n(5))&&r.__esModule?r:{default:r};function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=0,s=/(-?[0-9.]*[0-9]+[0-9.]*)/g,c=/^-?[0-9.]*[0-9]+[0-9.]*$/g,l=["width","height","inline","hFlip","vFlip","flip","rotate","align","color","box"],f={left:0,top:0,width:16,height:16,rotate:0,hFlip:!1,vFlip:!1};var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._item=t}var t,n,r;return t=e,r=[{key:"splitAttributes",value:function(e){var t={icon:Object.create(null),node:Object.create(null)};return Object.keys(e).forEach((function(n){t[-1===l.indexOf(n)?"node":"icon"][n]=e[n]})),t}},{key:"calculateDimension",value:function(e,t,n){if(1===t)return e;if(n=void 0===n?100:n,"number"===typeof e)return Math.ceil(e*t*n)/n;var r=e.split(s);if(null===r||!r.length)return null;for(var a,i=[],o=r.shift(),u=c.test(o);;){if(u?(a=parseFloat(o),isNaN(a)?i.push(o):i.push(Math.ceil(a*t*n)/n)):i.push(o),void 0===(o=r.shift()))return i.join("");u=!u}}},{key:"replaceIDs",value:function(e){var t,n,r=/\sid="(\S+)"/g,a=[];function i(e,t,n){for(var r=0;-1!==(r=n.indexOf(e,r));)n=n.slice(0,r)+t+n.slice(r+e.length),r+=t.length;return n}for(;t=r.exec(e);)a.push(t[1]);return a.length?(n="IconifyId-"+Date.now().toString(16)+"-"+(16777216*Math.random()|0).toString(16)+"-",a.forEach((function(t){var r=n+u;u++,e=i('="'+t+'"','="'+r+'"',e),e=i('="#'+t+'"','="#'+r+'"',e),e=i("(#"+t+")","(#"+r+")",e)})),e):e}}],(n=[{key:"getAttributes",value:function(t){var n=this._item;"object"!==i(t)&&(t=Object.create(null));var r={horizontal:"center",vertical:"middle",slice:!1},a={rotate:n.rotate,hFlip:n.hFlip,vFlip:n.vFlip},o=Object.create(null),u=Object.create(null),s=!0===t.inline||"true"===t.inline||"1"===t.inline,c={left:n.left,top:s?n.inlineTop:n.top,width:n.width,height:s?n.inlineHeight:n.height};if(["hFlip","vFlip"].forEach((function(e){void 0===t[e]||!0!==t[e]&&"true"!==t[e]&&"1"!==t[e]||(a[e]=!a[e])})),void 0!==t.flip&&t.flip.toLowerCase().split(/[\s,]+/).forEach((function(e){switch(e){case"horizontal":a.hFlip=!a.hFlip;break;case"vertical":a.vFlip=!a.vFlip}})),void 0!==t.rotate){var l=t.rotate;if("number"===typeof l)a.rotate+=l;else if("string"===typeof l){var f=l.replace(/^-?[0-9.]*/,"");if(""===f)l=parseInt(l),isNaN(l)||(a.rotate+=l);else if(f!==l){var d=!1;switch(f){case"%":d=25;break;case"deg":d=90}d&&(l=parseInt(l.slice(0,l.length-f.length)),isNaN(l)||(a.rotate+=Math.round(l/d)))}}}var h,p=[];switch(a.hFlip?a.vFlip?a.rotate+=2:(p.push("translate("+(c.width+c.left)+" "+(0-c.top)+")"),p.push("scale(-1 1)"),c.top=c.left=0):a.vFlip&&(p.push("translate("+(0-c.left)+" "+(c.height+c.top)+")"),p.push("scale(1 -1)"),c.top=c.left=0),a.rotate%4){case 1:h=c.height/2+c.top,p.unshift("rotate(90 "+h+" "+h+")"),0===c.left&&0===c.top||(h=c.left,c.left=c.top,c.top=h),c.width!==c.height&&(h=c.width,c.width=c.height,c.height=h);break;case 2:p.unshift("rotate(180 "+(c.width/2+c.left)+" "+(c.height/2+c.top)+")");break;case 3:h=c.width/2+c.left,p.unshift("rotate(-90 "+h+" "+h+")"),0===c.left&&0===c.top||(h=c.left,c.left=c.top,c.top=h),c.width!==c.height&&(h=c.width,c.width=c.height,c.height=h)}var v,m,g=t.width?t.width:null,b=t.height?t.height:null;null===g&&null===b&&(b="1em"),null!==g&&null!==b?(v=g,m=b):null!==g?(v=g,m=e.calculateDimension(v,c.height/c.width)):(m=b,v=e.calculateDimension(m,c.width/c.height)),!1!==v&&(u.width="auto"===v?c.width:v),!1!==m&&(u.height="auto"===m?c.height:m),s&&0!==n.verticalAlign&&(o["vertical-align"]=n.verticalAlign+"em"),void 0!==t.align&&t.align.toLowerCase().split(/[\s,]+/).forEach((function(e){switch(e){case"left":case"right":case"center":r.horizontal=e;break;case"top":case"bottom":case"middle":r.vertical=e;break;case"crop":r.slice=!0;break;case"meet":r.slice=!1}})),u.preserveAspectRatio=function(e){var t;switch(e.horizontal){case"left":t="xMin";break;case"right":t="xMax";break;default:t="xMid"}switch(e.vertical){case"top":t+="YMin";break;case"bottom":t+="YMax";break;default:t+="YMid"}return t+(e.slice?" slice":" meet")}(r),u.viewBox=c.left+" "+c.top+" "+c.width+" "+c.height;var y=e.replaceIDs(n.body);return void 0!==t.color&&(y=y.replace(/currentColor/g,t.color)),p.length&&(y='<g transform="'+p.join(" ")+'">'+y+"</g>"),!0!==t.box&&"true"!==t.box&&"1"!==t.box||(y+='<rect x="'+c.left+'" y="'+c.top+'" width="'+c.width+'" height="'+c.height+'" fill="rgba(0, 0, 0, 0)" />'),{attributes:u,body:y,style:o}}},{key:"getSVG",value:function(t,n){var r=e.splitAttributes(t),a=this.getAttributes(r.icon),i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"';return n&&Object.keys(r.node).forEach((function(e){i+=" "+e+'="'+r.node[e]+'"'})),Object.keys(a.attributes).forEach((function(e){i+=" "+e+'="'+a.attributes[e]+'"'})),i+=' style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);',Object.keys(a.style).forEach((function(e){i+=" "+e+": "+a.style[e]+";"})),t&&void 0!==t.style&&(i+=t.style),i+='">',i+=a.body+"</svg>"}}])&&o(t.prototype,n),r&&o(t,r),e}();function h(e,t){if("object"!==i(e.icon))return null;var n=d.splitAttributes(e),r=n.icon,o=n.node;delete o.icon,void 0===r.inline&&(r.inline=t);var u=new d(function(e){var t,n=Object.create(null);for(t in f)n[t]=f[t];for(t in e)n[t]=e[t];return void 0===n.inlineTop&&(n.inlineTop=n.top),void 0===n.inlineHeight&&(n.inlineHeight=n.height),void 0===n.verticalAlign&&(n.verticalAlign=n.height%7===0&&n.height%8!==0?-.143:-.125),n}(e.icon)).getAttributes(r),s={transform:"rotate(360deg)"};if(void 0!==u.style["vertical-align"]&&(s.verticalAlign=u.style["vertical-align"]),void 0!==e.style)for(var c in e.style)s[c]=e.style[c];var l,h={xmlns:"http://www.w3.org/2000/svg",focusable:!1,style:s};for(l in o)h[l]=o[l];for(l in u.attributes)h[l]=u.attributes[l];return h.dangerouslySetInnerHTML={__html:u.body},a.default.createElement("svg",h,null)}var p=function(e){return h(e,!1)};t.Icon=p;t.InlineIcon=function(e){return h(e,!0)};var v=p;t.default=v},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(14);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var u=n(t,e[i=r+(a-r>>>1)]);u>0?r=i+1:(a=i,o=!u)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return c(e,t,n,r,a,0)}function u(e,t,n,r,a,i){return c(e,t,n,r,a,0,!1,i,!0)}function s(e,t,n,r,a,i){return c(e,t,n,r,a,i,!0)}function c(e,t,n,i,o,u){for(var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=[],v=0;v<t.length;v++)t[v]>o&&p.push({score:t[v],boxIndex:v,suppressBeginIndex:0});p.sort(d);for(var m=u>0?-.5/u:0,g=[],b=[];g.length<n&&p.length>0;){var y=p.pop(),w=y.score,x=y.boxIndex,O=y.suppressBeginIndex;if(w<o)break;for(var k=!1,j=g.length-1;j>=O;--j){var _=l(e,x,g[j]);if(_>=i){k=!0;break}if(y.score=y.score*f(i,m,_),y.score<=o)break}y.suppressBeginIndex=g.length,k||(y.score===w?(g.push(x),b.push(y.score)):y.score>o&&a(p,y,d))}var S=g.length,E=n-S;c&&E>0&&(g.push.apply(g,Object(r.a)(new Array(E).fill(0))),b.push.apply(b,Object(r.a)(new Array(E).fill(0))));var C={selectedIndices:g};return s&&(C.selectedScores=b),h&&(C.validOutputs=S),C}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(u-i)*(s-o),p=(f-c)*(d-l);if(h<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(u,f),b=Math.min(s,d),y=Math.max(g-v,0)*Math.max(b-m,0);return y/(h+p-y)}function f(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13),a=n(20),i=n(99);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=o(e,"float32"),u=o(e,"float32");return Object(i.a)(n,u)}var s=Object(a.F)(Object(a.O)(e),t);return r.a.makeTensor(s,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({relu_:function(e){var t={x:Object(i.a)(e,"x","relu")};return r.a.runKernel(a.oc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","step"),o={x:n},u={alpha:t};return r.a.runKernel(a.Tc,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","unstack","string_or_numeric");o.b(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var u={value:n},s={axis:t};return r.a.runKernel(a.hd,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(19);var s=n(12);var c=Object(s.b)({batchNorm_:function(e,t,n,s,c,l){null==l&&(l=.001);var f,d,h=Object(i.a)(e,"x","batchNorm"),p=Object(i.a)(t,"mean","batchNorm"),v=Object(i.a)(n,"variance","batchNorm");null!=c&&(f=Object(i.a)(c,"scale","batchNorm")),null!=s&&(d=Object(i.a)(s,"offset","batchNorm")),o.b(p.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.b(null==d||p.rank===d.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.b(null==f||p.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m={x:function(e){return 0===e.rank||1===e.rank?Object(u.a)(e,[1,1,1,e.size]):2===e.rank?Object(u.a)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(u.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(h),scale:f,offset:d,mean:p,variance:v},g={varianceEpsilon:l},b=r.a.runKernel(a.kb,m,g);return Object(u.a)(b,h.shape)}})},function(e,t,n){var r=n(537);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7),a=n(84);function i(e,t,n){var i=Object(r.c)(e,n);return Object(a.a)(e,t,i,n)}},function(e,t,n){"use strict";var r="Invariant failed";t.a=function(e,t){if(!e)throw new Error(r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=Function.prototype.bind.call(Function.prototype.call,[].slice);function a(e,t){return r(e.querySelectorAll(t))}},function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}))},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","mean"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.Qb,u,s)}})},function(e,t,n){"use strict";var r=n(48);n.d(t,"a",(function(){return r.a}));var a="8.9.0";r.a.registerVersion("firebase",a,"app"),r.a.SDK_VERSION=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return N})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return p})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return m}));var r=n(35),a=n(78),i=n(213),o=n(69),u=0,s=new WeakMap,c=function(e){return{create:function(t){return b(e,t)},dismiss:function(t,n,r){return k(document,t,n,e,r)},getTop:function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return[2,j(document,e)]}))}))}}},l=c("ion-alert"),f=c("ion-action-sheet"),d=c("ion-loading"),h=c("ion-modal"),p=c("ion-picker"),v=c("ion-popover"),m=c("ion-toast"),g=function(e){"undefined"!==typeof document&&O(document);var t=u++;e.overlayIndex=t,e.hasAttribute("id")||(e.id="ion-overlay-"+t)},b=function(e,t){return"undefined"!==typeof customElements?customElements.whenDefined(e).then((function(){var n=document.createElement(e);return n.classList.add("overlay-hidden"),Object.assign(n,t),A(document).appendChild(n),new Promise((function(e){return Object(o.c)(n,e)}))})):Promise.resolve()},y='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',w="input:not([type=hidden]), textarea, button, select",x=function(e,t){var n=j(t),r=e.target;if(n&&r)if(n===r)n.lastFocus=void 0;else{var a=Object(o.g)(n);if(!a.contains(r))return;var i=a.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(r))n.lastFocus=r;else{var u=n.lastFocus;!function(e,t){var n=e.querySelector(y),r=n&&n.shadowRoot;r&&(n=r.querySelector(w)||n),n?n.focus():t.focus()}(i,n),u===t.activeElement&&function(e,t){var n=Array.from(e.querySelectorAll(y)),r=n.length>0?n[n.length-1]:null,a=r&&r.shadowRoot;a&&(r=a.querySelector(w)||r),r?r.focus():t.focus()}(i,n),n.lastFocus=t.activeElement}}},O=function(e){0===u&&(u=1,e.addEventListener("focus",(function(t){return x(t,e)}),!0),e.addEventListener("ionBackButton",(function(t){var n=j(e);n&&n.backdropDismiss&&t.detail.register(i.OVERLAY_BACK_BUTTON_PRIORITY,(function(){return n.dismiss(void 0,M)}))})),e.addEventListener("keyup",(function(t){if("Escape"===t.key){var n=j(e);n&&n.backdropDismiss&&n.dismiss(void 0,M)}})))},k=function(e,t,n,r,a){var i=j(e,r,a);return i?i.dismiss(t,n):Promise.reject("overlay does not exist")},j=function(e,t,n){var r=function(e,t){return void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter((function(e){return e.overlayIndex>0}))}(e,t);return void 0===n?r[r.length-1]:r.find((function(e){return e.id===n}))},_=function(e){void 0===e&&(e=!1);var t=A(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},S=function(e,t,n,i,o){return Object(r.a)(void 0,void 0,void 0,(function(){var u,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:return e.presented?[2]:(_(!0),e.presented=!0,e.willPresent.emit(),u=Object(a.b)(e),s=e.enterAnimation?e.enterAnimation:a.c.get(t,"ios"===u?n:i),[4,T(e,s,e.el,o)]);case 1:return r.sent()&&e.didPresent.emit(),"ION-TOAST"!==e.el.tagName&&E(e.el),e.keyboardClose&&e.el.focus(),[2]}}))}))},E=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(t=document.activeElement)?((n=t&&t.shadowRoot)&&(t=n.querySelector(w)||t),[4,e.onDidDismiss()]):[2];case 1:return r.sent(),t.focus(),[2]}}))}))},C=function(e,t,n,i,o,u,c){return Object(r.a)(void 0,void 0,void 0,(function(){var l,f,d;return Object(r.c)(this,(function(r){switch(r.label){case 0:if(!e.presented)return[2,!1];_(!1),e.presented=!1,r.label=1;case 1:return r.trys.push([1,4,,5]),e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),l=Object(a.b)(e),f=e.leaveAnimation?e.leaveAnimation:a.c.get(i,"ios"===l?o:u),"gesture"===n?[3,3]:[4,T(e,f,e.el,c)];case 2:r.sent(),r.label=3;case 3:return e.didDismiss.emit({data:t,role:n}),s.delete(e),[3,5];case 4:return d=r.sent(),console.error(d),[3,5];case 5:return e.el.remove(),[2,!0]}}))}))},A=function(e){return e.querySelector("ion-app")||e.body},T=function(e,t,n,i){return Object(r.a)(void 0,void 0,void 0,(function(){var o,u,c;return Object(r.c)(this,(function(l){switch(l.label){case 0:return n.classList.remove("overlay-hidden"),o=n.shadowRoot||e.el,u=t(o,i),e.animated&&a.c.getBoolean("animated",!0)||u.duration(0),e.keyboardClose&&u.beforeAddWrite((function(){var e=n.ownerDocument.activeElement;e&&e.matches("input, ion-input, ion-textarea")&&e.blur()})),c=s.get(e)||[],s.set(e,Object(r.d)(Object(r.d)([],c),[u])),[4,u.play()];case 1:return l.sent(),[2,!0]}}))}))},N=function(e,t){var n,r=new Promise((function(e){return n=e}));return I(e,t,(function(e){n(e.detail)})),r},I=function(e,t,n){Object(o.a)(e,t,(function r(a){Object(o.b)(e,t,r),n(a)}))},D=function(e){return"cancel"===e||e===M},R=function(e){return e()},F=function(e,t){if("function"===typeof e)return a.c.get("_zoneGate",R)((function(){try{return e(t)}catch(n){console.error(n)}}))},M="backdrop"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),a=n(117),i={prepend:!1};t.subSurface=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.getDrawArea(e),u=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},i,n),l=o.querySelector("div[data-name=".concat(t,"]"));if(!l){if((l=document.createElement("div")).setAttribute("class","".concat(u)),l.dataset.name=t,c.title){var f=document.createElement("div");f.setAttribute("class","subsurface-title ".concat(s)),f.innerText=c.title,l.appendChild(f)}c.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l},t.getDefaultWidth=function(e){for(var t=0,n=e;n&&0===n.clientWidth;)n=n.parentElement,t=50;return n.clientWidth-t},t.getDefaultHeight=function(e){return 0===e.clientHeight?200:e.clientHeight}},function(e,t,n){"use strict";var r,a,i,o,u;n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(u||(u={}));var s={float32:o,int32:a,bool:i,complex64:u};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return s[e][t]}function l(e){return c(e,"int32")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(13),a=n(8);function i(e,t,n){var i={shape:e,value:t,dtype:n};return r.a.runKernel(a.fb,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(27),l=n(12);var f=Object(l.b)({maximum_:function(e,t){var n=Object(u.a)(e,"a","maximum"),l=Object(u.a)(t,"b","maximum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),l=Object(c.a)(l,"int32")),Object(s.a)(n.shape,l.shape);var h={a:n,b:l};return a.a.runKernel(i.Pb,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({batchToSpaceND_:function(e,t,n){var u=Object(i.a)(e,"x","batchToSpaceND"),s=t.reduce((function(e,t){return e*t}));o.b(u.rank>=1+t.length,(function(){return"input rank is ".concat(u.rank," but should be > than blockShape.length ").concat(t.length)})),o.b(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),o.b(u.shape[0]%s===0,(function(){return"input tensor batch is ".concat(u.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(s)}));var c={x:u},l={blockShape:t,crops:n};return r.a.runKernel(a.t,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12),s=n(19);var c=Object(u.b)({depthwiseConv2d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=Object(i.a)(e,"x","depthwiseConv2d"),h=Object(i.a)(t,"filter","depthwiseConv2d"),p=d,v=!1;3===d.rank&&(v=!0,p=Object(s.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===p.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(p.rank,".")})),o.b(4===h.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")})),o.b(p.shape[3]===h.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(p.shape[3],") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],".")})),null!=f&&o.b(o.v(u),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")}));var m={x:p,filter:h},g={strides:n,pad:u,dataFormat:c,dilations:l,dimRoundingMode:f},b=r.a.runKernel(a.P,m,g);return v?Object(s.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({equal_:function(e,t){var n=Object(u.a)(e,"a","equal","string_or_numeric"),c=Object(u.a)(t,"b","equal","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Z,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=Object(i.a)(e,"x","gather"),s=Object(i.a)(t,"indices","gather","int32"),c={x:u,indices:s},l={axis:n,batchDims:o};return r.a.runKernel(a.ob,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({logicalNot_:function(e){var t={x:Object(i.a)(e,"x","logicalNot","bool")};return r.a.runKernel(a.Hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({spaceToBatchND_:function(e,t,n){var u=Object(i.a)(e,"x","spaceToBatchND");o.b(u.rank>=1+t.length,(function(){return"input rank ".concat(u.rank," should be > than [blockShape] ").concat(t.length)})),o.b(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),o.b(u.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(u.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var s={x:u},c={blockShape:t,paddings:n};return r.a.runKernel(a.Jc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n(20),i=n(12),o=n(19);var u=Object(i.b)({squeeze_:function(e,t){var n=Object(r.a)(e,"x","squeeze");return Object(o.a)(n,Object(a.Q)(n.shape,t).newShape)}})},function(e,t,n){"use strict";var r=n(72),a=n(166),i=n(289),o=n(288),u=n(95),s=n(290),c=n(287),l=n(211),f=n(162);t.a=function(e,t){var n,d=typeof t;return null==t||"boolean"===d?Object(l.a)(t):("number"===d?u.a:"string"===d?(n=Object(r.e)(t))?(t=n,a.a):c.a:t instanceof r.e?a.a:t instanceof Date?o.a:Object(f.b)(t)?f.a:Array.isArray(t)?i.b:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?s.a:u.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(228);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a=!("undefined"===typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(109),u=n(12),s=n(19);var c=Object(u.b)({broadcastTo_:function(e,t){var n=Object(i.a)(e,"broadcastTo","x"),u=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var c=n.shape.slice();c.length<t.length;)c.unshift(1);n=Object(s.a)(n,c)}for(var l=n.shape,f=Array.from(t),d=t.length-1;d>=0;d--)if(l[d]===t[d])f[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(u,"] cannot be broadcast to [").concat(t,"]."));if(0===f.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return Object(o.a)(n);var h={x:n},p={reps:f};return r.a.runKernel(a.cd,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(3),a=n(11),i=n(312),o=(n(207),function(){function e(t,n,a,o,u){Object(r.a)(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=u||Math.random();this.random=i.alea(s.toString())}return Object(a.a)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var u=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*u,n=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}()),u=function(){function e(t,n,a,u){Object(r.a)(this,e),this.alpha=t,this.beta=1/n,this.dtype=a;var s=u||Math.random();this.randu=i.alea(s.toString()),this.randn=new o(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return Object(a.a)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;if(Object(r.a)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=o,null==u&&(u=Math.random()),"number"===typeof u&&(u=u.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(u)}return Object(a.a)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(13),a=n(8);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:e,stop:t,step:n,dtype:i};return r.a.runKernel(a.kc,{},o)}},function(e,t,n){"use strict";function r(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}n.d(t,"b",(function(){return r})),t.a=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}},function(e,t,n){var r=n(324);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},function(e,t,n){var r,a=n(163),i=function(e){var t="b",n="w",r=-1,i="p",o="b",u="k",s="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",c=["1-0","0-1","1/2-1/2","*"],l={b:[16,32,17,15],w:[-16,-32,-17,-15]},f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},d=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],h=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],p={p:0,n:1,b:2,r:3,q:4,k:5},v={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},m={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},g={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},b={w:[{square:g.a1,flag:m.QSIDE_CASTLE},{square:g.h1,flag:m.KSIDE_CASTLE}],b:[{square:g.a8,flag:m.QSIDE_CASTLE},{square:g.h8,flag:m.KSIDE_CASTLE}]},y=new Array(128),w={w:r,b:r},x=n,O={w:0,b:0},k=r,j=0,_=1,S=[],E={},C={};function A(e){"undefined"===typeof e&&(e=!1),y=new Array(128),w={w:r,b:r},x=n,O={w:0,b:0},k=r,j=0,_=1,S=[],e||(E={}),C={},M(R())}function T(){for(var e=[],t={},n=function(e){e in C&&(t[e]=C[e])};S.length>0;)e.push(J());for(n(R());e.length>0;)Y(e.pop()),n(R());C=t}function N(){I(s)}function I(e,a){"undefined"===typeof a&&(a=!1);var i=e.split(/\s+/),o=i[0],u=0;if(!D(e).valid)return!1;A(a);for(var s=0;s<o.length;s++){var c=o.charAt(s);if("/"===c)u+=8;else if(-1!=="0123456789".indexOf(c))u+=parseInt(c,10);else{var l=c<"a"?n:t;L({type:c.toLowerCase(),color:l},te(u)),u++}}return x=i[1],i[2].indexOf("K")>-1&&(O.w|=m.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(O.w|=m.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(O.b|=m.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(O.b|=m.QSIDE_CASTLE),k="-"===i[3]?r:g[i[3]],j=parseInt(i[4],10),_=parseInt(i[5],10),M(R()),!0}function D(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",a="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",o="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",s="1st field (piece positions) does not contain 8 '/'-delimited rows.",c="1st field (piece positions) is invalid [consecutive numbers].",l="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",h=e.split(/\s+/);if(6!==h.length)return{valid:!1,error_number:1,error:n};if(isNaN(h[5])||parseInt(h[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(h[4])||parseInt(h[4],10)<0)return{valid:!1,error_number:3,error:a};if(!/^(-|[abcdefgh][36])$/.test(h[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(h[2]))return{valid:!1,error_number:5,error:o};if(!/^(w|b)$/.test(h[1]))return{valid:!1,error_number:6,error:u};var p=h[0].split("/");if(8!==p.length)return{valid:!1,error_number:7,error:s};for(var v=0;v<p.length;v++){for(var m=0,g=!1,b=0;b<p[v].length;b++)if(isNaN(p[v][b])){if(!/^[prnbqkPRNBQK]$/.test(p[v][b]))return{valid:!1,error_number:9,error:l};m+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:c};m+=parseInt(p[v][b],10),g=!0}if(8!==m)return{valid:!1,error_number:10,error:f}}return"3"==h[3][1]&&"w"==h[1]||"6"==h[3][1]&&"b"==h[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:t}}function R(){for(var e=0,t="",a=g.a8;a<=g.h1;a++){if(null==y[a])e++;else{e>0&&(t+=e,e=0);var i=y[a].color,o=y[a].type;t+=i===n?o.toUpperCase():o.toLowerCase()}a+1&136&&(e>0&&(t+=e),a!==g.h1&&(t+="/"),e=0,a+=8)}var u="";O.w&m.KSIDE_CASTLE&&(u+="K"),O.w&m.QSIDE_CASTLE&&(u+="Q"),O.b&m.KSIDE_CASTLE&&(u+="k"),O.b&m.QSIDE_CASTLE&&(u+="q"),u=u||"-";var s=k===r?"-":te(k);return[t,x,u,s,j,_].join(" ")}function F(e){for(var t=0;t<e.length;t+=2)"string"===typeof e[t]&&"string"===typeof e[t+1]&&(E[e[t]]=e[t+1]);return E}function M(e){S.length>0||(e!==s?(E.SetUp="1",E.FEN=e):(delete E.SetUp,delete E.FEN))}function P(e){var t=y[g[e]];return t?{type:t.type,color:t.color}:null}function L(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in g))return!1;var n=g[t];return(e.type!=u||w[e.color]==r||w[e.color]==n)&&(y[n]={type:e.type,color:e.color},e.type===u&&(w[e.color]=n),M(R()),!0)}function z(e,t,n,r,a){var o={color:x,from:t,to:n,flags:r,piece:e[t].type};return a&&(o.flags|=m.PROMOTION,o.promotion=a),e[n]?o.captured=e[n].type:r&m.EP_CAPTURE&&(o.captured=i),o}function B(e){function t(e,t,n,r,a){if(e[n].type!==i||0!==Z(r)&&7!==Z(r))t.push(z(e,n,r,a));else for(var u=["q","r",o,"n"],s=0,c=u.length;s<c;s++)t.push(z(e,n,r,a,u[s]))}var n=[],r=x,a=ne(r),u={b:1,w:6},s=g.a8,c=g.h1,d=!1,h="undefined"===typeof e||!("legal"in e)||e.legal;if("undefined"!==typeof e&&"square"in e){if(!(e.square in g))return[];s=c=g[e.square],d=!0}for(var p=s;p<=c;p++)if(136&p)p+=7;else{var v=y[p];if(null!=v&&v.color===r)if(v.type===i){var b=p+l[r][0];if(null==y[b]){t(y,n,p,b,m.NORMAL);b=p+l[r][1];u[r]===Z(p)&&null==y[b]&&t(y,n,p,b,m.BIG_PAWN)}for(j=2;j<4;j++){136&(b=p+l[r][j])||(null!=y[b]&&y[b].color===a?t(y,n,p,b,m.CAPTURE):b===k&&t(y,n,p,k,m.EP_CAPTURE))}}else for(var j=0,_=f[v.type].length;j<_;j++){var S=f[v.type][j];for(b=p;!(136&(b+=S));){if(null!=y[b]){if(y[b].color===r)break;t(y,n,p,b,m.CAPTURE);break}if(t(y,n,p,b,m.NORMAL),"n"===v.type||"k"===v.type)break}}}if(!d||c===w[r]){if(O[r]&m.KSIDE_CASTLE){var E=(C=w[r])+2;null!=y[C+1]||null!=y[E]||V(a,w[r])||V(a,C+1)||V(a,E)||t(y,n,w[r],E,m.KSIDE_CASTLE)}if(O[r]&m.QSIDE_CASTLE){var C;E=(C=w[r])-2;null!=y[C-1]||null!=y[C-2]||null!=y[C-3]||V(a,w[r])||V(a,C-1)||V(a,E)||t(y,n,w[r],E,m.QSIDE_CASTLE)}}if(!h)return n;var A=[];for(p=0,_=n.length;p<_;p++)Y(n[p]),q(r)||A.push(n[p]),J();return A}function U(e,t){var n="";if(e.flags&m.KSIDE_CASTLE)n="O-O";else if(e.flags&m.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=B({legal:!t}),r=e.from,a=e.to,i=e.piece,o=0,u=0,s=0,c=0,l=n.length;c<l;c++){var f=n[c].from,d=n[c].to;i===n[c].piece&&r!==f&&a===d&&(o++,Z(r)===Z(f)&&u++,ee(r)===ee(f)&&s++)}if(o>0)return u>0&&s>0?te(r):s>0?te(r).charAt(1):te(r).charAt(0);return""}(e,t);e.piece!==i&&(n+=e.piece.toUpperCase()+r),e.flags&(m.CAPTURE|m.EP_CAPTURE)&&(e.piece===i&&(n+=te(e.from)[0]),n+="x"),n+=te(e.to),e.flags&m.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return Y(e),$()&&(H()?n+="#":n+="+"),J(),n}function W(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function V(e,r){for(var a=g.a8;a<=g.h1;a++)if(136&a)a+=7;else if(null!=y[a]&&y[a].color===e){var o=y[a],u=a-r,s=u+119;if(d[s]&1<<p[o.type]){if(o.type===i){if(u>0){if(o.color===n)return!0}else if(o.color===t)return!0;continue}if("n"===o.type||"k"===o.type)return!0;for(var c=h[s],l=a+c,f=!1;l!==r;){if(null!=y[l]){f=!0;break}l+=c}if(!f)return!0}}return!1}function q(e){return V(ne(e),w[e])}function $(){return q(x)}function H(){return $()&&0===B().length}function G(){return!$()&&0===B().length}function K(){for(var e={},t=[],n=0,r=0,a=g.a8;a<=g.h1;a++)if(r=(r+1)%2,136&a)a+=7;else{var i=y[a];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===o&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e.b||1===e.n))return!0;if(n===e.b+2){var u=0,s=t.length;for(a=0;a<s;a++)u+=t[a];if(0===u||u===s)return!0}return!1}function X(){for(var e=[],t={},n=!1;;){var r=J();if(!r)break;e.push(r)}for(;;){var a=R().split(" ").slice(0,4).join(" ");if(t[a]=a in t?t[a]+1:1,t[a]>=3&&(n=!0),!e.length)break;Y(e.pop())}return n}function Y(e){var n=x,a=ne(n);if(function(e){S.push({move:e,kings:{b:w.b,w:w.w},turn:x,castling:{b:O.b,w:O.w},ep_square:k,half_moves:j,move_number:_})}(e),y[e.to]=y[e.from],y[e.from]=null,e.flags&m.EP_CAPTURE&&(x===t?y[e.to-16]=null:y[e.to+16]=null),e.flags&m.PROMOTION&&(y[e.to]={type:e.promotion,color:n}),y[e.to].type===u){if(w[y[e.to].color]=e.to,e.flags&m.KSIDE_CASTLE){var o=e.to-1,s=e.to+1;y[o]=y[s],y[s]=null}else if(e.flags&m.QSIDE_CASTLE){o=e.to+1,s=e.to-2;y[o]=y[s],y[s]=null}O[n]=""}if(O[n])for(var c=0,l=b[n].length;c<l;c++)if(e.from===b[n][c].square&&O[n]&b[n][c].flag){O[n]^=b[n][c].flag;break}if(O[a])for(c=0,l=b[a].length;c<l;c++)if(e.to===b[a][c].square&&O[a]&b[a][c].flag){O[a]^=b[a][c].flag;break}k=e.flags&m.BIG_PAWN?"b"===x?e.to-16:e.to+16:r,e.piece===i||e.flags&(m.CAPTURE|m.EP_CAPTURE)?j=0:j++,x===t&&_++,x=ne(x)}function J(){var e=S.pop();if(null==e)return null;var n=e.move;w=e.kings,x=e.turn,O=e.castling,k=e.ep_square,j=e.half_moves,_=e.move_number;var r,a,o=x,u=ne(x);if(y[n.from]=y[n.to],y[n.from].type=n.piece,y[n.to]=null,n.flags&m.CAPTURE)y[n.to]={type:n.captured,color:u};else if(n.flags&m.EP_CAPTURE){var s;s=o===t?n.to-16:n.to+16,y[s]={type:i,color:u}}n.flags&(m.KSIDE_CASTLE|m.QSIDE_CASTLE)&&(n.flags&m.KSIDE_CASTLE?(r=n.to+1,a=n.to-1):n.flags&m.QSIDE_CASTLE&&(r=n.to-2,a=n.to+1),y[r]=y[a],y[a]=null);return n}function Q(e,t){var n=W(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var a=r[1],i=r[2],o=r[3],u=r[4]}for(var s=B(),c=0,l=s.length;c<l;c++){if(n===W(U(s[c]))||t&&n===W(U(s[c],!0)))return s[c];if(r&&(!a||a.toLowerCase()==s[c].piece)&&g[i]==s[c].from&&g[o]==s[c].to&&(!u||u.toLowerCase()==s[c].promotion))return s[c]}return null}function Z(e){return e>>4}function ee(e){return 15&e}function te(e){var t=ee(e),n=Z(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ne(e){return e===n?t:n}function re(e){var t=ae(e);t.san=U(t,!1),t.to=te(t.to),t.from=te(t.from);var n="";for(var r in m)m[r]&t.flags&&(n+=v[r]);return t.flags=n,t}function ae(e){var t=e instanceof Array?[]:{};for(var n in e)t[n]="object"===typeof n?ae(e[n]):e[n];return t}function ie(e){return e.replace(/^\s+|\s+$/g,"")}function oe(e){for(var t=B({legal:!1}),n=0,r=x,a=0,i=t.length;a<i;a++){if(Y(t[a]),!q(r))if(e-1>0)n+=oe(e-1);else n++;J()}return n}return I("undefined"===typeof e?s:e),{WHITE:n,BLACK:t,PAWN:i,KNIGHT:"n",BISHOP:o,ROOK:"r",QUEEN:"q",KING:u,SQUARES:function(){for(var e=[],t=g.a8;t<=g.h1;t++)136&t?t+=7:e.push(te(t));return e}(),FLAGS:v,load:function(e){return I(e)},reset:function(){return N()},moves:function(e){for(var t=B(e),n=[],r=0,a=t.length;r<a;r++)"undefined"!==typeof e&&"verbose"in e&&e.verbose?n.push(re(t[r])):n.push(U(t[r],!1));return n},in_check:function(){return $()},in_checkmate:function(){return H()},in_stalemate:function(){return G()},in_draw:function(){return j>=100||G()||K()||X()},insufficient_material:function(){return K()},in_threefold_repetition:function(){return X()},game_over:function(){return j>=100||H()||G()||K()||X()},validate_fen:function(e){return D(e)},fen:function(){return R()},board:function(){for(var e=[],t=[],n=g.a8;n<=g.h1;n++)null==y[n]?t.push(null):t.push({type:y[n].type,color:y[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e},pgn:function(e){var t="object"===typeof e&&"string"===typeof e.newline_char?e.newline_char:"\n",n="object"===typeof e&&"number"===typeof e.max_width?e.max_width:0,r=[],i=!1;for(var o in E)r.push("["+o+' "'+E[o]+'"]'+t),i=!0;i&&S.length&&r.push(t);for(var u=function(e){var t=C[R()];if("undefined"!==typeof t){var n=e.length>0?" ":"";e="".concat(e).concat(n,"{").concat(t,"}")}return e},s=[];S.length>0;)s.push(J());var c=[],l="";for(0===s.length&&c.push(u(""));s.length>0;){l=u(l);var f=s.pop();S.length||"b"!==f.color?"w"===f.color&&(l.length&&c.push(l),l=_+"."):l=_+". ...",l=l+" "+U(f,!1),Y(f)}if(l.length&&c.push(u(l)),"undefined"!==typeof E.Result&&c.push(E.Result),0===n)return r.join("")+c.join(" ");var d=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},h=function(e,i){var o,u=a(i.split(" "));try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s){if(e+s.length>n){for(;d();)e--;r.push(t),e=0}r.push(s),e+=s.length,r.push(" "),e++}}}catch(c){u.e(c)}finally{u.f()}return d()&&e--,e},p=0;for(o=0;o<c.length;o++)p+c[o].length>n&&c[o].includes("{")?p=h(p,c[o]):(p+c[o].length>n&&0!==o?(" "===r[r.length-1]&&r.pop(),r.push(t),p=0):0!==o&&(r.push(" "),p++),r.push(c[o]),p+=c[o].length);return r.join("")},load_pgn:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy;function r(e){return e.replace(/\\/g,"\\")}var a="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+r(a)+")|.)*\\])(?:"+r(a)+"){2}"),o=i.test(e)?i.exec(e)[1]:"";N();var u=function(e,t){for(var n="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",a={},i=e.split(new RegExp(r(n))),o="",u="",s=0;s<i.length;s++)o=i[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[s].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),ie(o).length>0&&(a[o]=u);return a}(o,t);for(var s in u)F([s,u[s]]);if("1"===u.SetUp&&(!("FEN"in u)||!I(u.FEN,!0)))return!1;for(var l=function(e){return e=e.replace(new RegExp(r(a),"g")," "),"{".concat(function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}(e.slice(1,e.length-1)),"}")},f=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},d=e.replace(o,"").replace(new RegExp("({[^}]*})+?|;([^".concat(r(a),"]*)"),"g"),(function(e,t,n){return void 0!==t?l(t):" "+l("{".concat(n.slice(1),"}"))})).replace(new RegExp(r(a),"g")," "),h=/(\([^\(\)]+\))+?/g;h.test(d);)d=d.replace(h,"");var p=ie(d=(d=(d=d.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));p=p.join(",").replace(/,,+/g,",").split(",");for(var v="",m=0;m<p.length-1;m++){var g=f(p[m]);if(void 0===g){if(null==(v=Q(p[m],n)))return!1;Y(v)}else C[R()]=g}if(void 0!==(g=f(p[p.length-1]))&&(C[R()]=g,p.pop()),v=p[p.length-1],c.indexOf(v)>-1)(function(e){for(var t in e)return!0;return!1})(E)&&"undefined"===typeof E.Result&&F(["Result",v]);else{if(null==(v=Q(v,n)))return!1;Y(v)}return!0},header:function(){return F(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=g.a8;t<=g.h1;t++){if(0===ee(t)&&(e+=" "+"87654321"[Z(t)]+" |"),null==y[t])e+=" . ";else{var r=y[t].type;e+=" "+(y[t].color===n?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return x},move:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy,r=null;if("string"===typeof e)r=Q(e,n);else if("object"===typeof e)for(var a=B(),i=0,o=a.length;i<o;i++)if(e.from===te(a[i].from)&&e.to===te(a[i].to)&&(!("promotion"in a[i])||e.promotion===a[i].promotion)){r=a[i];break}if(!r)return null;var u=re(r);return Y(r),u},undo:function(){var e=J();return e?re(e):null},clear:function(){return A()},put:function(e,t){return L(e,t)},get:function(e){return P(e)},remove:function(e){return function(e){var t=P(e);return y[g[e]]=null,t&&t.type===u&&(w[t.color]=r),M(R()),t}(e)},perft:function(e){return oe(e)},square_color:function(e){if(e in g){var t=g[e];return(Z(t)+ee(t))%2===0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=("undefined"!==typeof e&&"verbose"in e&&e.verbose);S.length>0;)t.push(J());for(;t.length>0;){var a=t.pop();r?n.push(re(a)):n.push(U(a)),Y(a)}return n},get_comment:function(){return C[R()]},set_comment:function(e){C[R()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=C[R()];return delete C[R()],e},get_comments:function(){return T(),Object.keys(C).map((function(e){return{fen:e,comment:C[e]}}))},delete_comments:function(){return T(),Object.keys(C).map((function(e){var t=C[e];return delete C[e],{fen:e,comment:t}}))}}};t.Chess=i,void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={};function a(e){return r[e]}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(72),a=n(202),i=n(286),o=n(60);function u(e){return function(t){var n,a,i=t.length,o=new Array(i),u=new Array(i),s=new Array(i);for(n=0;n<i;++n)a=Object(r.g)(t[n]),o[n]=a.r||0,u[n]=a.g||0,s[n]=a.b||0;return o=e(o),u=e(u),s=e(s),a.opacity=1,function(e){return a.r=o(e),a.g=u(e),a.b=s(e),a+""}}}t.a=function e(t){var n=Object(o.b)(t);function a(e,t){var a=n((e=Object(r.g)(e)).r,(t=Object(r.g)(t)).r),i=n(e.g,t.g),u=n(e.b,t.b),s=Object(o.a)(e.opacity,t.opacity);return function(t){return e.r=a(t),e.g=i(t),e.b=u(t),e.opacity=s(t),e+""}}return a.gamma=e,a}(1);var s=u(a.b),c=u(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","min"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.Rb,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var u=Object(i.a)(e,"indices","oneHot","int32"),s={indices:u},c={depth:t,onValue:n,offValue:o};return r.a.runKernel(a.cc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({real_:function(e){var t={input:Object(i.a)(e,"input","real")};return r.a.runKernel(a.lc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(20),o=n(12);var u=Object(o.b)({ifft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.rb,t)}})},function(e,t,n){"use strict";var r=n(5),a=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};t.a=function(e,t){return Object(r.useMemo)((function(){return function(e,t){var n=a(e),r=a(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])}},function(e,t,n){"use strict";(function(e,r){var a;function i(){if(null==a){var t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof e)t=e;else if("undefined"!==typeof r)t=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}a=t}return a}function o(e,t){var n=function(){var e=i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))}).call(this,n(141),n(175))},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,a=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return n(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(t)-1,s=Object.keys(t).sort(a&&a(t));for(o="",n=0;n<s.length;n++){var c=s[n],l=e(t[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return i.splice(u,1),"{"+o+"}"}}(e)}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,u,s=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))a.call(n,l)&&(s[l]=n[l]);if(r){u=r(n);for(var f=0;f<u.length;f++)i.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){var r=n(241).MAX_SAFE_COMPONENT_LENGTH,a=n(242),i=(t=e.exports={}).re=[],o=t.src=[],u=t.t={},s=0,c=function(e,t,n){var r=s++;a(r,t),u[e]=r,o[r]=t,i[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION","(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")")),c("MAINVERSIONLOOSE","(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")")),c("PRERELEASEIDENTIFIER","(?:".concat(o[u.NUMERICIDENTIFIER],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[u.NUMERICIDENTIFIERLOOSE],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASE","(?:-(".concat(o[u.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIER],")*))")),c("PRERELEASELOOSE","(?:-?(".concat(o[u.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIERLOOSE],")*))")),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD","(?:\\+(".concat(o[u.BUILDIDENTIFIER],"(?:\\.").concat(o[u.BUILDIDENTIFIER],")*))")),c("FULLPLAIN","v?".concat(o[u.MAINVERSION]).concat(o[u.PRERELEASE],"?").concat(o[u.BUILD],"?")),c("FULL","^".concat(o[u.FULLPLAIN],"$")),c("LOOSEPLAIN","[v=\\s]*".concat(o[u.MAINVERSIONLOOSE]).concat(o[u.PRERELEASELOOSE],"?").concat(o[u.BUILD],"?")),c("LOOSE","^".concat(o[u.LOOSEPLAIN],"$")),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE","".concat(o[u.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),c("XRANGEIDENTIFIER","".concat(o[u.NUMERICIDENTIFIER],"|x|X|\\*")),c("XRANGEPLAIN","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:".concat(o[u.PRERELEASE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[u.PRERELEASELOOSE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAIN],"$")),c("XRANGELOOSE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAINLOOSE],"$")),c("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:$|[^\\d])"),c("COERCERTL",o[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM","(\\s*)".concat(o[u.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",c("TILDE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAIN],"$")),c("TILDELOOSE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("LONECARET","(?:\\^)"),c("CARETTRIM","(\\s*)".concat(o[u.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",c("CARET","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAIN],"$")),c("CARETLOOSE","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("COMPARATORLOOSE","^".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],")$|^$")),c("COMPARATOR","^".concat(o[u.GTLT],"\\s*(").concat(o[u.FULLPLAIN],")$|^$")),c("COMPARATORTRIM","(\\s*)".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],"|").concat(o[u.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE","^\\s*(".concat(o[u.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAIN],")")+"\\s*$"),c("HYPHENRANGELOOSE","^\\s*(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(e,t,n){var r=n(241).MAX_LENGTH,a=n(176),i=a.re,o=a.t,u=n(87),s=n(243);e.exports=function(e,t){if(t=s(t),e instanceof u)return e;if("string"!==typeof e)return null;if(e.length>r)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new u(e,t)}catch(n){return null}}},function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT_ACTIONS",(function(){return YQ})),n.d(t,"guessMode",(function(){return iZ})),n.d(t,"vega",(function(){return GQ})),n.d(t,"vegaLite",(function(){return KQ}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return D})),n.d(r,"deepClone",(function(){return R})),n.d(r,"getValueByPointer",(function(){return P})),n.d(r,"applyOperation",(function(){return L})),n.d(r,"applyPatch",(function(){return z})),n.d(r,"applyReducer",(function(){return B})),n.d(r,"validator",(function(){return U})),n.d(r,"validate",(function(){return W})),n.d(r,"_areEquals",(function(){return V}));var a={};n.r(a),n.d(a,"unobserve",(function(){return G})),n.d(a,"observe",(function(){return K})),n.d(a,"generate",(function(){return X})),n.d(a,"compare",(function(){return J}));var i={};n.r(i),n.d(i,"aggregate",(function(){return zu})),n.d(i,"bin",(function(){return Bu})),n.d(i,"collect",(function(){return Wu})),n.d(i,"compare",(function(){return Vu})),n.d(i,"countpattern",(function(){return $u})),n.d(i,"cross",(function(){return Hu})),n.d(i,"density",(function(){return Yu})),n.d(i,"dotbin",(function(){return ts})),n.d(i,"expression",(function(){return ns})),n.d(i,"extent",(function(){return as})),n.d(i,"facet",(function(){return os})),n.d(i,"field",(function(){return us})),n.d(i,"filter",(function(){return cs})),n.d(i,"flatten",(function(){return ls})),n.d(i,"fold",(function(){return fs})),n.d(i,"formula",(function(){return ds})),n.d(i,"generate",(function(){return hs})),n.d(i,"impute",(function(){return ms})),n.d(i,"joinaggregate",(function(){return gs})),n.d(i,"kde",(function(){return bs})),n.d(i,"key",(function(){return ys})),n.d(i,"load",(function(){return xs})),n.d(i,"lookup",(function(){return ks})),n.d(i,"multiextent",(function(){return js})),n.d(i,"multivalues",(function(){return Ss})),n.d(i,"params",(function(){return Cs})),n.d(i,"pivot",(function(){return As})),n.d(i,"prefacet",(function(){return Ts})),n.d(i,"project",(function(){return Ns})),n.d(i,"proxy",(function(){return Is})),n.d(i,"quantile",(function(){return Ds})),n.d(i,"relay",(function(){return Rs})),n.d(i,"sample",(function(){return Fs})),n.d(i,"sequence",(function(){return Ms})),n.d(i,"sieve",(function(){return Ps})),n.d(i,"subflow",(function(){return is})),n.d(i,"timeunit",(function(){return Ls})),n.d(i,"tupleindex",(function(){return Bs})),n.d(i,"values",(function(){return Us})),n.d(i,"window",(function(){return Hs}));var o={};n.r(o),n.d(o,"bound",(function(){return qg})),n.d(o,"identifier",(function(){return Gg})),n.d(o,"mark",(function(){return Kg})),n.d(o,"overlap",(function(){return Xg})),n.d(o,"render",(function(){return nb})),n.d(o,"viewlayout",(function(){return jb}));var u={};n.r(u),n.d(u,"axisticks",(function(){return Sb})),n.d(u,"datajoin",(function(){return Eb})),n.d(u,"encode",(function(){return Ab})),n.d(u,"legendentries",(function(){return Tb})),n.d(u,"linkpath",(function(){return Fb})),n.d(u,"pie",(function(){return Bb})),n.d(u,"scale",(function(){return Vb})),n.d(u,"sortitems",(function(){return Gb})),n.d(u,"stack",(function(){return Qb}));var s={};n.r(s),n.d(s,"contour",(function(){return PO})),n.d(s,"geojson",(function(){return BO})),n.d(s,"geopath",(function(){return UO})),n.d(s,"geopoint",(function(){return WO})),n.d(s,"geoshape",(function(){return VO})),n.d(s,"graticule",(function(){return qO})),n.d(s,"heatmap",(function(){return $O})),n.d(s,"isocontour",(function(){return EO})),n.d(s,"kde2d",(function(){return RO})),n.d(s,"projection",(function(){return GO}));var c={};n.r(c),n.d(c,"force",(function(){return xk}));var l={};n.r(l),n.d(l,"nest",(function(){return jj})),n.d(l,"pack",(function(){return Tj})),n.d(l,"partition",(function(){return Ij})),n.d(l,"stratify",(function(){return Dj})),n.d(l,"tree",(function(){return Mj})),n.d(l,"treelinks",(function(){return Pj})),n.d(l,"treemap",(function(){return Bj}));var f={};n.r(f),n.d(f,"label",(function(){return u_}));var d={};n.r(d),n.d(d,"loess",(function(){return c_})),n.d(d,"regression",(function(){return f_}));var h={};n.r(h),n.d(h,"voronoi",(function(){return P_}));var p={};n.r(p),n.d(p,"wordcloud",(function(){return J_}));var v={};n.r(v),n.d(v,"crossfilter",(function(){return aS})),n.d(v,"resolvefilter",(function(){return iS}));var m={};n.r(m),n.d(m,"Debug",(function(){return te.a})),n.d(m,"Error",(function(){return te.b})),n.d(m,"Info",(function(){return te.c})),n.d(m,"None",(function(){return te.d})),n.d(m,"Warn",(function(){return te.e})),n.d(m,"accessor",(function(){return te.f})),n.d(m,"accessorFields",(function(){return te.g})),n.d(m,"accessorName",(function(){return te.h})),n.d(m,"array",(function(){return te.i})),n.d(m,"ascending",(function(){return te.j})),n.d(m,"clampRange",(function(){return te.k})),n.d(m,"compare",(function(){return te.l})),n.d(m,"constant",(function(){return te.m})),n.d(m,"debounce",(function(){return te.n})),n.d(m,"error",(function(){return te.o})),n.d(m,"extend",(function(){return te.p})),n.d(m,"extent",(function(){return te.q})),n.d(m,"extentIndex",(function(){return te.r})),n.d(m,"falsy",(function(){return te.s})),n.d(m,"fastmap",(function(){return te.t})),n.d(m,"field",(function(){return te.u})),n.d(m,"flush",(function(){return te.v})),n.d(m,"hasOwnProperty",(function(){return te.w})),n.d(m,"id",(function(){return te.x})),n.d(m,"identity",(function(){return te.y})),n.d(m,"inherits",(function(){return te.z})),n.d(m,"inrange",(function(){return te.A})),n.d(m,"isArray",(function(){return te.B})),n.d(m,"isBoolean",(function(){return te.C})),n.d(m,"isDate",(function(){return te.D})),n.d(m,"isFunction",(function(){return te.E})),n.d(m,"isIterable",(function(){return te.F})),n.d(m,"isNumber",(function(){return te.G})),n.d(m,"isObject",(function(){return te.H})),n.d(m,"isRegExp",(function(){return te.I})),n.d(m,"isString",(function(){return te.J})),n.d(m,"key",(function(){return te.K})),n.d(m,"lerp",(function(){return te.L})),n.d(m,"logger",(function(){return te.M})),n.d(m,"lruCache",(function(){return te.N})),n.d(m,"merge",(function(){return te.O})),n.d(m,"mergeConfig",(function(){return te.P})),n.d(m,"one",(function(){return te.Q})),n.d(m,"pad",(function(){return te.R})),n.d(m,"panLinear",(function(){return te.S})),n.d(m,"panLog",(function(){return te.T})),n.d(m,"panPow",(function(){return te.U})),n.d(m,"panSymlog",(function(){return te.V})),n.d(m,"peek",(function(){return te.W})),n.d(m,"quarter",(function(){return te.X})),n.d(m,"repeat",(function(){return te.Y})),n.d(m,"span",(function(){return te.Z})),n.d(m,"splitAccessPath",(function(){return te.ab})),n.d(m,"stringValue",(function(){return te.bb})),n.d(m,"toBoolean",(function(){return te.cb})),n.d(m,"toDate",(function(){return te.db})),n.d(m,"toNumber",(function(){return te.eb})),n.d(m,"toSet",(function(){return te.fb})),n.d(m,"toString",(function(){return te.gb})),n.d(m,"truncate",(function(){return te.hb})),n.d(m,"truthy",(function(){return te.ib})),n.d(m,"utcquarter",(function(){return te.jb})),n.d(m,"visitArray",(function(){return te.kb})),n.d(m,"writeConfig",(function(){return te.lb})),n.d(m,"zero",(function(){return te.mb})),n.d(m,"zoomLinear",(function(){return te.nb})),n.d(m,"zoomLog",(function(){return te.ob})),n.d(m,"zoomPow",(function(){return te.pb})),n.d(m,"zoomSymlog",(function(){return te.qb})),n.d(m,"Dataflow",(function(){return so})),n.d(m,"EventStream",(function(){return Wi})),n.d(m,"MultiPulse",(function(){return to})),n.d(m,"Operator",(function(){return zi})),n.d(m,"Parameters",(function(){return Mi})),n.d(m,"Pulse",(function(){return Ji})),n.d(m,"Transform",(function(){return lo})),n.d(m,"changeset",(function(){return Ri})),n.d(m,"definition",(function(){return ho})),n.d(m,"ingest",(function(){return Ci})),n.d(m,"isTuple",(function(){return _i})),n.d(m,"transform",(function(){return po})),n.d(m,"transforms",(function(){return fo})),n.d(m,"tupleid",(function(){return Si})),n.d(m,"bandwidthNRD",(function(){return Io})),n.d(m,"bin",(function(){return Do})),n.d(m,"bootstrapCI",(function(){return Mo})),n.d(m,"cumulativeLogNormal",(function(){return Jo})),n.d(m,"cumulativeNormal",(function(){return $o})),n.d(m,"cumulativeUniform",(function(){return ru})),n.d(m,"densityLogNormal",(function(){return Yo})),n.d(m,"densityNormal",(function(){return qo})),n.d(m,"densityUniform",(function(){return nu})),n.d(m,"dotbin",(function(){return Po})),n.d(m,"quantileLogNormal",(function(){return Qo})),n.d(m,"quantileNormal",(function(){return Ho})),n.d(m,"quantileUniform",(function(){return au})),n.d(m,"quantiles",(function(){return To})),n.d(m,"quartiles",(function(){return No})),n.d(m,"random",(function(){return Ro})),n.d(m,"randomInteger",(function(){return zo})),n.d(m,"randomKDE",(function(){return Ko})),n.d(m,"randomLCG",(function(){return Lo})),n.d(m,"randomLogNormal",(function(){return Zo})),n.d(m,"randomMixture",(function(){return eu})),n.d(m,"randomNormal",(function(){return Go})),n.d(m,"randomUniform",(function(){return iu})),n.d(m,"regressionExp",(function(){return du})),n.d(m,"regressionLinear",(function(){return lu})),n.d(m,"regressionLoess",(function(){return gu})),n.d(m,"regressionLog",(function(){return fu})),n.d(m,"regressionPoly",(function(){return vu})),n.d(m,"regressionPow",(function(){return hu})),n.d(m,"regressionQuad",(function(){return pu})),n.d(m,"sampleCurve",(function(){return xu})),n.d(m,"sampleLogNormal",(function(){return Xo})),n.d(m,"sampleNormal",(function(){return Vo})),n.d(m,"sampleUniform",(function(){return tu})),n.d(m,"setRandom",(function(){return Fo})),n.d(m,"DATE",(function(){return _n})),n.d(m,"DAY",(function(){return Sn})),n.d(m,"DAYOFYEAR",(function(){return En})),n.d(m,"HOURS",(function(){return Cn})),n.d(m,"MILLISECONDS",(function(){return Nn})),n.d(m,"MINUTES",(function(){return An})),n.d(m,"MONTH",(function(){return kn})),n.d(m,"QUARTER",(function(){return On})),n.d(m,"SECONDS",(function(){return Tn})),n.d(m,"TIME_UNITS",(function(){return In})),n.d(m,"WEEK",(function(){return jn})),n.d(m,"YEAR",(function(){return xn})),n.d(m,"dayofyear",(function(){return zn})),n.d(m,"timeBin",(function(){return Ar})),n.d(m,"timeFloor",(function(){return tr})),n.d(m,"timeInterval",(function(){return ur})),n.d(m,"timeOffset",(function(){return lr})),n.d(m,"timeSequence",(function(){return hr})),n.d(m,"timeUnitSpecifier",(function(){return Mn})),n.d(m,"timeUnits",(function(){return Rn})),n.d(m,"utcFloor",(function(){return ar})),n.d(m,"utcInterval",(function(){return sr})),n.d(m,"utcOffset",(function(){return fr})),n.d(m,"utcSequence",(function(){return pr})),n.d(m,"utcdayofyear",(function(){return $n})),n.d(m,"utcweek",(function(){return Hn})),n.d(m,"week",(function(){return Bn})),n.d(m,"loader",(function(){return yi})),n.d(m,"read",(function(){return bi})),n.d(m,"inferType",(function(){return xe})),n.d(m,"inferTypes",(function(){return Oe})),n.d(m,"typeParsers",(function(){return be})),n.d(m,"format",(function(){return qe})),n.d(m,"formats",(function(){return $e})),n.d(m,"responseType",(function(){return He})),n.d(m,"Bounds",(function(){return Rh})),n.d(m,"CanvasHandler",(function(){return cm})),n.d(m,"CanvasRenderer",(function(){return pm})),n.d(m,"Gradient",(function(){return Ud})),n.d(m,"GroupItem",(function(){return Mh})),n.d(m,"Handler",(function(){return qv})),n.d(m,"Item",(function(){return Fh})),n.d(m,"Marks",(function(){return Cv})),n.d(m,"RenderType",(function(){return rg})),n.d(m,"Renderer",(function(){return Hv})),n.d(m,"ResourceLoader",(function(){return Ph})),n.d(m,"SVGHandler",(function(){return mm})),n.d(m,"SVGRenderer",(function(){return Bm})),n.d(m,"SVGStringRenderer",(function(){return eg})),n.d(m,"Scenegraph",(function(){return Mv})),n.d(m,"boundClip",(function(){return fg})),n.d(m,"boundContext",(function(){return ap})),n.d(m,"boundItem",(function(){return Av})),n.d(m,"boundMark",(function(){return Nv})),n.d(m,"boundStroke",(function(){return Bh})),n.d(m,"domChild",(function(){return Bv})),n.d(m,"domClear",(function(){return Uv})),n.d(m,"domCreate",(function(){return Lv})),n.d(m,"domFind",(function(){return zv})),n.d(m,"font",(function(){return Ov})),n.d(m,"fontFamily",(function(){return xv})),n.d(m,"fontSize",(function(){return mv})),n.d(m,"intersect",(function(){return og})),n.d(m,"intersectBoxLine",(function(){return vp})),n.d(m,"intersectPath",(function(){return fp})),n.d(m,"intersectPoint",(function(){return dp})),n.d(m,"intersectRule",(function(){return pp})),n.d(m,"lineHeight",(function(){return gv})),n.d(m,"markup",(function(){return Dm})),n.d(m,"multiLineOffset",(function(){return yv})),n.d(m,"pathCurves",(function(){return Vd})),n.d(m,"pathEqual",(function(){return hg})),n.d(m,"pathParse",(function(){return Hd})),n.d(m,"pathRectangle",(function(){return mh})),n.d(m,"pathRender",(function(){return rh})),n.d(m,"pathSymbols",(function(){return uh})),n.d(m,"pathTrail",(function(){return gh})),n.d(m,"point",(function(){return Vv})),n.d(m,"renderModule",(function(){return ig})),n.d(m,"resetSVGClipId",(function(){return Ih})),n.d(m,"resetSVGDefIds",(function(){return pg})),n.d(m,"sceneEqual",(function(){return dg})),n.d(m,"sceneFromJSON",(function(){return Rv})),n.d(m,"scenePickVisit",(function(){return Sp})),n.d(m,"sceneToJSON",(function(){return Dv})),n.d(m,"sceneVisit",(function(){return _p})),n.d(m,"sceneZOrder",(function(){return jp})),n.d(m,"serializeXML",(function(){return Rm})),n.d(m,"textMetrics",(function(){return lv})),n.d(m,"interpolate",(function(){return fd})),n.d(m,"interpolateColors",(function(){return sd})),n.d(m,"interpolateRange",(function(){return ud})),n.d(m,"quantizeInterpolator",(function(){return cd})),n.d(m,"scale",(function(){return Jf})),n.d(m,"scheme",(function(){return vd})),n.d(m,"projection",(function(){return dO})),n.d(m,"View",(function(){return FT})),n.d(m,"defaultLocale",(function(){return mi})),n.d(m,"formatLocale",(function(){return si})),n.d(m,"locale",(function(){return vi})),n.d(m,"resetDefaultLocale",(function(){return gi})),n.d(m,"timeFormatLocale",(function(){return hi})),n.d(m,"expressionFunction",(function(){return CA})),n.d(m,"parse",(function(){return UR})),n.d(m,"runtimeContext",(function(){return LA})),n.d(m,"codegenExpression",(function(){return EE})),n.d(m,"parseExpression",(function(){return jE})),n.d(m,"parseSelector",(function(){return HT})),n.d(m,"version",(function(){return VR}));var g={};n.r(g),n.d(g,"invalidSpec",(function(){return OL})),n.d(g,"FIT_NON_SINGLE",(function(){return kL})),n.d(g,"containerSizeNonSingle",(function(){return jL})),n.d(g,"containerSizeNotCompatibleWithAutosize",(function(){return _L})),n.d(g,"droppingFit",(function(){return SL})),n.d(g,"cannotProjectOnChannelWithoutField",(function(){return EL})),n.d(g,"cannotProjectAggregate",(function(){return CL})),n.d(g,"nearestNotSupportForContinuous",(function(){return AL})),n.d(g,"selectionNotSupported",(function(){return TL})),n.d(g,"selectionNotFound",(function(){return NL})),n.d(g,"SCALE_BINDINGS_CONTINUOUS",(function(){return IL})),n.d(g,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return DL})),n.d(g,"noSameUnitLookup",(function(){return RL})),n.d(g,"noSuchRepeatedValue",(function(){return FL})),n.d(g,"columnsNotSupportByRowCol",(function(){return ML})),n.d(g,"CONCAT_CANNOT_SHARE_AXIS",(function(){return PL})),n.d(g,"unrecognizedParse",(function(){return LL})),n.d(g,"differentParse",(function(){return zL})),n.d(g,"invalidTransformIgnored",(function(){return BL})),n.d(g,"NO_FIELDS_NEEDS_AS",(function(){return UL})),n.d(g,"customFormatTypeNotAllowed",(function(){return WL})),n.d(g,"encodingOverridden",(function(){return VL})),n.d(g,"projectionOverridden",(function(){return qL})),n.d(g,"REPLACE_ANGLE_WITH_THETA",(function(){return $L})),n.d(g,"primitiveChannelDef",(function(){return HL})),n.d(g,"invalidFieldType",(function(){return GL})),n.d(g,"invalidFieldTypeForCountAggregate",(function(){return KL})),n.d(g,"invalidAggregate",(function(){return XL})),n.d(g,"missingFieldType",(function(){return YL})),n.d(g,"droppingColor",(function(){return JL})),n.d(g,"emptyFieldDef",(function(){return QL})),n.d(g,"latLongDeprecated",(function(){return ZL})),n.d(g,"LINE_WITH_VARYING_SIZE",(function(){return ez})),n.d(g,"incompatibleChannel",(function(){return tz})),n.d(g,"invalidEncodingChannel",(function(){return nz})),n.d(g,"facetChannelShouldBeDiscrete",(function(){return rz})),n.d(g,"facetChannelDropped",(function(){return az})),n.d(g,"discreteChannelCannotEncode",(function(){return iz})),n.d(g,"lineWithRange",(function(){return oz})),n.d(g,"orientOverridden",(function(){return uz})),n.d(g,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return sz})),n.d(g,"RANGE_STEP_DEPRECATED",(function(){return cz})),n.d(g,"cannotUseScalePropertyWithNonColor",(function(){return lz})),n.d(g,"unaggregateDomainHasNoEffectForRawField",(function(){return fz})),n.d(g,"unaggregateDomainWithNonSharedDomainOp",(function(){return dz})),n.d(g,"unaggregatedDomainWithLogScale",(function(){return hz})),n.d(g,"cannotApplySizeToNonOrientedMark",(function(){return pz})),n.d(g,"scaleTypeNotWorkWithChannel",(function(){return vz})),n.d(g,"scaleTypeNotWorkWithFieldDef",(function(){return mz})),n.d(g,"scalePropertyNotWorkWithScaleType",(function(){return gz})),n.d(g,"scaleTypeNotWorkWithMark",(function(){return bz})),n.d(g,"stepDropped",(function(){return yz})),n.d(g,"mergeConflictingProperty",(function(){return wz})),n.d(g,"mergeConflictingDomainProperty",(function(){return xz})),n.d(g,"independentScaleMeansIndependentGuide",(function(){return Oz})),n.d(g,"domainSortDropped",(function(){return kz})),n.d(g,"MORE_THAN_ONE_SORT",(function(){return jz})),n.d(g,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return _z})),n.d(g,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return Sz})),n.d(g,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return Ez})),n.d(g,"INVALID_CHANNEL_FOR_AXIS",(function(){return Cz})),n.d(g,"cannotStackRangedMark",(function(){return Az})),n.d(g,"cannotStackNonLinearScale",(function(){return Tz})),n.d(g,"stackNonSummativeAggregate",(function(){return Nz})),n.d(g,"invalidTimeUnit",(function(){return Iz})),n.d(g,"droppedDay",(function(){return Dz})),n.d(g,"errorBarCenterAndExtentAreNotNeeded",(function(){return Rz})),n.d(g,"errorBarCenterIsUsedWithWrongExtent",(function(){return Fz})),n.d(g,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return Mz})),n.d(g,"errorBarCenterIsNotNeeded",(function(){return Pz})),n.d(g,"errorBand1DNotSupport",(function(){return Lz})),n.d(g,"channelRequiredForBinned",(function(){return zz})),n.d(g,"domainRequiredForThresholdScale",(function(){return Bz}));var b={};n.r(b),n.d(b,"compile",(function(){return YJ})),n.d(b,"extractTransforms",(function(){return eQ})),n.d(b,"normalize",(function(){return Rq})),n.d(b,"version",(function(){return tQ}));var y={};n.r(y),n.d(y,"dark",(function(){return aQ})),n.d(y,"excel",(function(){return oQ})),n.d(y,"fivethirtyeight",(function(){return fQ})),n.d(y,"ggplot2",(function(){return hQ})),n.d(y,"googlecharts",(function(){return RQ})),n.d(y,"latimes",(function(){return yQ})),n.d(y,"quartz",(function(){return OQ})),n.d(y,"urbaninstitute",(function(){return TQ})),n.d(y,"version",(function(){return FQ})),n.d(y,"vox",(function(){return jQ}));var w=n(2),x=n.n(w),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=Object.prototype.hasOwnProperty;function j(e,t){return k.call(e,t)}function _(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)j(e,r)&&t.push(r);return t}function S(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function E(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function C(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function A(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function T(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(T(e[t]))return!0}else if("object"===typeof e){var r=_(e),a=r.length;for(t=0;t<a;t++)if(T(e[r[t]]))return!0}return!1}function N(e,t){var n=[e];for(var r in t){var a="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof a&&n.push(r+": "+a)}return n.join("\n")}var I=function(e){function t(t,n,r,a,i){var o=this.constructor,u=e.call(this,N(t,{name:n,index:r,operation:a,tree:i}))||this;return u.name=n,u.index=r,u.operation=a,u.tree=i,Object.setPrototypeOf(u,o.prototype),u.message=N(t,{name:n,index:r,operation:a,tree:i}),u}return O(t,e),t}(Error),D=I,R=S,F={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=P(n,this.path);r&&(r=S(r));var a=L(n,{op:"remove",path:this.from}).removed;return L(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=P(n,this.from);return L(n,{op:"add",path:this.path,value:S(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:V(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},M={add:function(e,t,n){return E(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:F.move,copy:F.copy,test:F.test,_get:F._get};function P(e,t){if(""==t)return e;var n={op:"_get",path:t};return L(e,n),n.value}function L(e,t,n,r,a,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):U(t,0)),""===t.path){var o={newDocument:e};if("add"===t.op)return o.newDocument=t.value,o;if("replace"===t.op)return o.newDocument=t.value,o.removed=e,o;if("move"===t.op||"copy"===t.op)return o.newDocument=P(e,t.from),"move"===t.op&&(o.removed=e),o;if("test"===t.op){if(o.test=V(e,t.value),!1===o.test)throw new D("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o.newDocument=e,o}if("remove"===t.op)return o.removed=e,o.newDocument=null,o;if("_get"===t.op)return t.value=e,o;if(n)throw new D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return o}r||(e=S(e));var u=(t.path||"").split("/"),s=e,c=1,l=u.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:U;;){if((d=u[c])&&-1!=d.indexOf("~")&&(d=A(d)),a&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===s[d]?f=u.slice(0,c).join("/"):c==l-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),c++,Array.isArray(s)){if("-"===d)d=s.length;else{if(n&&!E(d))throw new D("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);E(d)&&(d=~~d)}if(c>=l){if(n&&"add"===t.op&&d>s.length)throw new D("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(o=M[t.op].call(t,s,d,e)).test)throw new D("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}}else if(c>=l){if(!1===(o=F[t.op].call(t,s,d,e)).test)throw new D("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}if(s=s[d],n&&c<l&&(!s||"object"!==typeof s))throw new D("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}function z(e,t,n,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=!0),n&&!Array.isArray(t))throw new D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=S(e));for(var i=new Array(t.length),o=0,u=t.length;o<u;o++)i[o]=L(e,t[o],n,!0,a,o),e=i[o].newDocument;return i.newDocument=e,i}function B(e,t,n){var r=L(e,t);if(!1===r.test)throw new D("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function U(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new D("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!F[e.op])throw new D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new D("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new D('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new D("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&T(e.value))throw new D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var a=e.path.split("/").length,i=r.split("/").length;if(a!==i+1&&a!==i)throw new D("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new D("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=W([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new D("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function W(e,t,n){try{if(!Array.isArray(e))throw new D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)z(S(t),S(e),n||!0);else{n=n||U;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(a){if(a instanceof D)return a;throw a}}function V(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,a,i=Array.isArray(e),o=Array.isArray(t);if(i&&o){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!V(e[n],t[n]))return!1;return!0}if(i!=o)return!1;var u=Object.keys(e);if((r=u.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(u[n]))return!1;for(n=r;0!==n--;)if(!V(e[a=u[n]],t[a]))return!1;return!0}return e!==e&&t!==t}var q=new WeakMap,$=function(e){this.observers=new Map,this.obj=e},H=function(e,t){this.callback=e,this.observer=t};function G(e,t){t.unobserve()}function K(e,t){var n,r=function(e){return q.get(e)}(e);if(r){var a=function(e,t){return e.observers.get(t)}(r,t);n=a&&a.observer}else r=new $(e),q.set(e,r);if(n)return n;if(n={},r.value=S(e),t){n.callback=t,n.next=null;var i=function(){X(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(i)};"undefined"!==typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=e,n.unobserve=function(){X(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new H(t,n)),n}function X(e,t){void 0===t&&(t=!1);var n=q.get(e.object);Y(n.value,e.object,e.patches,"",t),e.patches.length&&z(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Y(e,t,n,r,a){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var i=_(t),o=_(e),u=!1,s=o.length-1;s>=0;s--){var c=e[f=o[s]];if(!j(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(a&&n.push({op:"test",path:r+"/"+C(f),value:S(c)}),n.push({op:"remove",path:r+"/"+C(f)}),u=!0):(a&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var l=t[f];"object"==typeof c&&null!=c&&"object"==typeof l&&null!=l&&Array.isArray(c)===Array.isArray(l)?Y(c,l,n,r+"/"+C(f),a):c!==l&&(!0,a&&n.push({op:"test",path:r+"/"+C(f),value:S(c)}),n.push({op:"replace",path:r+"/"+C(f),value:S(l)}))}}if(u||i.length!=o.length)for(s=0;s<i.length;s++){var f;j(e,f=i[s])||void 0===t[f]||n.push({op:"add",path:r+"/"+C(f),value:S(t[f])})}}}function J(e,t,n){void 0===n&&(n=!1);var r=[];return Y(e,t,r,"",n),r}Object.assign({},r,a,{JsonPatchError:I,deepClone:S,escapePathComponent:C,unescapePathComponent:A});var Q=n(314),Z=n.n(Q),ee=n(342),te=n(1),ne=n(15),re=/^([A-Za-z]+:)?\/\//,ae=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ie=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,oe="file://";function ue(e,t){return se.apply(this,arguments)}function se(){return(se=Object(ne.a)(x.a.mark((function e(t,n){var r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,a=r.href,e.abrupt("return",r.localFile?this.file(a):this.http(a,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=Object(ne.a)(x.a.mark((function e(t,n){var r,a,i,o,u,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(te.p)({},this.options,n),r=this.fileAccess,a={href:null},s=ae.test(t.replace(ie,"")),null!=t&&"string"===typeof t&&s||Object(te.o)("Sanitize failure, invalid URI: "+Object(te.bb)(t)),c=re.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||"/"===u[u.length-1]||(t="/"+t),t=u+t),o=(i=t.startsWith(oe))||"file"===n.mode||"http"!==n.mode&&!c&&r,i?t=t.slice(oe.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(a,"localFile",{value:!!o}),a.href=t,n.target&&(a.target=n.target+""),n.rel&&(a.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin+""),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function fe(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:de}function de(){return he.apply(this,arguments)}function he(){return(he=Object(ne.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(te.o)("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return e?function(){var t=Object(ne.a)(x.a.mark((function t(n,r){var a,i,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(te.p)({},this.options.http,r),i=r&&r.response,t.next=4,e(n,a);case 4:return o=t.sent,t.abrupt("return",o.ok?Object(te.E)(o[i])?o[i]():o.text():Object(te.o)(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():ve}function ve(){return me.apply(this,arguments)}function me(){return(me=Object(ne.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(te.o)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(e){return!Number.isNaN(+e)&&!(e instanceof Date)},be={boolean:te.cb,integer:te.eb,number:te.eb,date:te.db,string:te.gb,unknown:te.y},ye=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return ge(e)&&Number.isInteger(+e)},ge,function(e){return!Number.isNaN(Date.parse(e))}],we=["boolean","integer","number","date"];function xe(e,t){if(!e||!e.length)return"unknown";for(var n,r,a,i=e.length,o=ye.length,u=ye.map((function(e,t){return t+1})),s=0,c=0;s<i;++s)for(r=t?e[s][t]:e[s],n=0;n<o;++n)if(u[n]&&(null!=(a=r)&&a===a)&&!ye[n](r)&&(u[n]=0,++c===ye.length))return"string";return we[u.reduce((function(e,t){return 0===e?t:e}),0)-1]}function Oe(e,t){return t.reduce((function(t,n){return t[n]=xe(e,n),t}),{})}var ke={},je={};function _e(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Se(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Ee(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ce(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Ee(-t,6):t>9999?"+"+Ee(t,6):Ee(t,4))+"-"+Ee(e.getUTCMonth()+1,2)+"-"+Ee(e.getUTCDate(),2)+(i?"T"+Ee(n,2)+":"+Ee(r,2)+":"+Ee(a,2)+"."+Ee(i,3)+"Z":a?"T"+Ee(n,2)+":"+Ee(r,2)+":"+Ee(a,2)+"Z":r||n?"T"+Ee(n,2)+":"+Ee(r,2)+"Z":"")}var Ae=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,u=0,s=i<=0,c=!1;function l(){if(s)return je;if(c)return c=!1,ke;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return s=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==je;){for(var f=[];r!==ke&&r!==je;)f.push(r),r=l();t&&null==(f=t(f,u++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?Ce(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=_e(e);return function(r,a){return t(n(r),a,e)}}(e,t):_e(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=Se(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Se(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}};function Te(e){var t=function(t,n){var r={delimiter:e};return Ne(t,n?Object(te.p)(n,r):r)};return t.responseType="text",t}function Ne(e,t){return t.header&&(e=t.header.map(te.bb).join(t.delimiter)+"\n"+e),Ae(t.delimiter).parse(e+"")}Ne.responseType="text";var Ie=n(308),De=function(e){return e},Re=function(e){if(null==e)return De;var t,n,r=e.scale[0],a=e.scale[1],i=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*r+i,l[1]=(n+=e[1])*a+o;s<c;)l[s]=e[s],++s;return l}},Fe=function(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return Me(e,t)}))}:Me(e,t)};function Me(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=Pe(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function Pe(e,t){var n=Re(e.transform),r=e.arcs;function a(e,t){t.length&&t.pop();for(var a=r[e<0?~e:e],i=0,o=a.length;i<o;++i)t.push(n(a[i],i));e<0&&function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n}(t,o)}function i(e){return n(e)}function o(e){for(var t=[],n=0,r=e.length;n<r;++n)a(e[n],t);return t.length<2&&t.push(t[0]),t}function u(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function s(e){return e.map(u)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=i(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(i);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=s(t.arcs);break;case"MultiPolygon":n=t.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(t)}var Le=function(e,t){var n={},r={},a={},i=[],o=-1;function u(e,t){for(var r in e){var a=e[r];delete t[a.start],delete a.start,delete a.end,a.forEach((function(e){n[e<0?~e:e]=1})),i.push(a)}}return t.forEach((function(n,r){var a,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=t[++o],t[o]=n,t[r]=a)})),t.forEach((function(t){var n,i,o=function(t){var n,r=e.arcs[t<0?~t:t],a=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,a]:[a,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,i=r[s]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=a[c.end=i.end]=c}else r[n.start]=a[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(t),n.start=u,i=a[u]){delete a[i.end];var l=i===n?n:i.concat(n);r[l.start=i.start]=a[l.end=n.end]=l}else r[n.start]=a[n.end]=n;else r[(n=[t]).start=u]=a[n.end=s]=n})),u(a,r),u(r,a),t.forEach((function(e){n[e<0?~e:e]||i.push([e])})),i},ze=function(e){return Pe(e,Be.apply(this,arguments))};function Be(e,t,n){var r,a,i;if(arguments.length>1)r=Ue(e,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:Le(e,r)}}function Ue(e,t,n){var r,a=[],i=[];function o(e){var t=e<0?~e:e;(i[t]||(i[t]=[])).push({i:e,g:r})}function u(e){e.forEach(o)}function s(e){e.forEach(u)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":u(t.arcs);break;case"MultiLineString":case"Polygon":s(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(s)}(t.arcs)}}(t),i.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}var We={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function Ve(e,t){var n,r,a,i;return e=Object(Ie.a)(e,t),t&&t.feature?(n=Fe,a=t.feature):t&&t.mesh?(n=ze,a=t.mesh,i=We[t.filter]):Object(te.o)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):Object(te.o)("Invalid TopoJSON object: "+a))&&r.features||[r]}Ve.responseType="json";var qe={dsv:Ne,csv:Te(","),tsv:Te("\t"),json:Ie.a,topojson:Ve};function $e(e,t){return arguments.length>1?(qe[e]=t,this):Object(te.w)(qe,e)?qe[e]:null}function He(e){var t=$e(e);return t&&t.responseType||"text"}var Ge=Math.sqrt(50),Ke=Math.sqrt(10),Xe=Math.sqrt(2),Ye=function(e,t,n){var r,a,i,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=Je(e,t,n))||!isFinite(o))return[];if(o>0){var s=Math.round(e/o),c=Math.round(t/o);for(s*o<e&&++s,c*o>t&&--c,i=new Array(a=c-s+1);++u<a;)i[u]=(s+u)*o}else{o=-o;var l=Math.round(e*o),f=Math.round(t*o);for(l/o<e&&++l,f/o>t&&--f,i=new Array(a=f-l+1);++u<a;)i[u]=(l+u)/o}return r&&i.reverse(),i};function Je(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=Ge?10:i>=Ke?5:i>=Xe?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=Ge?10:i>=Ke?5:i>=Xe?2:1)}function Qe(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=Ge?a*=10:i>=Ke?a*=5:i>=Xe&&(a*=2),t<e?-a:a}var Ze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function et(e){if(!(t=Ze.exec(e)))throw new Error("invalid format: "+e);var t;return new tt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function tt(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}et.prototype=tt.prototype,tt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function nt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var rt,at,it,ot,ut=function(e){return(e=nt(Math.abs(e)))?e[1]:NaN},st=function(e,t){var n=nt(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},ct={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return st(100*e,t)},r:st,s:function(e,t){var n=nt(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(rt=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+nt(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},lt=function(e){return e},ft=Array.prototype.map,dt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],ht=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?lt:(t=ft.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?lt:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ft.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=et(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,v=e.comma,m=e.precision,g=e.trim,b=e.type;"n"===b?(v=!0,b="g"):ct[b]||(void 0===m&&(m=12),g=!0,b="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var y="$"===d?a:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===d?i:/[%p]/.test(b)?s:"",x=ct[b],O=/[defgprs%]/.test(b);function k(e){var a,i,s,d=y,k=w;if("c"===b)k=x(e)+k,e="";else{var j=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:x(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),j&&0===+e&&"+"!==f&&(j=!1),d=(j?"("===f?f:c:"-"===f||"("===f?"":f)+d,k=("s"===b?dt[8+rt/3]:"")+k+(j&&"("===f?")":""),O)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){k=(46===s?o+e.slice(a+1):e.slice(a))+k,e=e.slice(0,a);break}}v&&!h&&(e=r(e,1/0));var _=d.length+e.length+k.length,S=_<p?new Array(p-_+1).join(t):"";switch(v&&h&&(e=r(S+e,S.length?p-k.length:1/0),S=""),n){case"<":e=d+e+k+S;break;case"=":e=d+S+e+k;break;case"^":e=S.slice(0,_=S.length>>1)+d+e+k+S.slice(_);break;default:e=S+d+e+k}return u(e)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=et(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(ut(t)/3))),a=Math.pow(10,-r),i=dt[8+r/3];return function(e){return n(a*e)+i}}}};at=ht({thousands:",",grouping:[3],currency:["$",""]}),it=at.format,ot=at.formatPrefix;var pt=n(23),vt=new Date,mt=new Date;function gt(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return gt((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return vt.setTime(+t),mt.setTime(+r),e(vt),e(mt),Math.floor(n(vt,mt))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var bt=1e3,yt=6e4,wt=36e5,xt=864e5,Ot=6048e5,kt=2592e6,jt=31536e6,_t=gt((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yt)/xt}),(function(e){return e.getDate()-1})),St=_t;_t.range;function Et(e){return gt((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yt)/Ot}))}var Ct=Et(0),At=Et(1),Tt=Et(2),Nt=Et(3),It=Et(4),Dt=Et(5),Rt=Et(6),Ft=(Ct.range,At.range,Tt.range,Nt.range,It.range,Dt.range,Rt.range,gt((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/xt}),(function(e){return e.getUTCDate()-1}))),Mt=Ft;Ft.range;function Pt(e){return gt((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ot}))}var Lt=Pt(0),zt=Pt(1),Bt=Pt(2),Ut=Pt(3),Wt=Pt(4),Vt=Pt(5),qt=Pt(6),$t=(Lt.range,zt.range,Bt.range,Ut.range,Wt.range,Vt.range,qt.range,gt((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));$t.every=function(e){return isFinite(e=Math.floor(e))&&e>0?gt((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Ht=$t,Gt=($t.range,gt((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Kt=Gt,Xt=(Gt.range,gt((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*bt-e.getMinutes()*yt)}),(function(e,t){e.setTime(+e+t*wt)}),(function(e,t){return(t-e)/wt}),(function(e){return e.getHours()}))),Yt=Xt,Jt=(Xt.range,gt((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*bt)}),(function(e,t){e.setTime(+e+t*yt)}),(function(e,t){return(t-e)/yt}),(function(e){return e.getMinutes()}))),Qt=Jt,Zt=(Jt.range,gt((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*bt)}),(function(e,t){return(t-e)/bt}),(function(e){return e.getUTCSeconds()}))),en=Zt,tn=(Zt.range,gt((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));tn.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?gt((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):tn:null};var nn=tn,rn=(tn.range,gt((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));rn.every=function(e){return isFinite(e=Math.floor(e))&&e>0?gt((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var an,on,un,sn,cn,ln,fn,dn=rn,hn=(rn.range,gt((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),pn=hn,vn=(hn.range,gt((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*wt)}),(function(e,t){return(t-e)/wt}),(function(e){return e.getUTCHours()}))),mn=vn,gn=(vn.range,gt((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*yt)}),(function(e,t){return(t-e)/yt}),(function(e){return e.getUTCMinutes()}))),bn=gn,yn=(gn.range,function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}),wn=function(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return yn(e(t),n)}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}};var xn="year",On="quarter",kn="month",jn="week",_n="date",Sn="day",En="dayofyear",Cn="hours",An="minutes",Tn="seconds",Nn="milliseconds",In=[xn,On,kn,jn,_n,Sn,En,Cn,An,Tn,Nn],Dn=In.reduce((function(e,t,n){return e[t]=1+n,e}),{});function Rn(e){var t=Object(te.i)(e).slice(),n={};return t.length||Object(te.o)("Missing time unit."),t.forEach((function(e){Object(te.w)(Dn,e)?n[e]=1:Object(te.o)("Invalid time unit: ".concat(e,"."))})),(n[jn]||n[Sn]?1:0)+(n[On]||n[kn]||n[_n]?1:0)+(n[En]?1:0)>1&&Object(te.o)("Incompatible time units: ".concat(e)),t.sort((function(e,t){return Dn[e]-Dn[t]})),t}var Fn=(an={},Object(pt.a)(an,xn,"%Y "),Object(pt.a)(an,On,"Q%q "),Object(pt.a)(an,kn,"%b "),Object(pt.a)(an,_n,"%d "),Object(pt.a)(an,jn,"W%U "),Object(pt.a)(an,Sn,"%a "),Object(pt.a)(an,En,"%j "),Object(pt.a)(an,Cn,"%H:00"),Object(pt.a)(an,An,"00:%M"),Object(pt.a)(an,Tn,":%S"),Object(pt.a)(an,Nn,".%L"),Object(pt.a)(an,"".concat(xn,"-").concat(kn),"%Y-%m "),Object(pt.a)(an,"".concat(xn,"-").concat(kn,"-").concat(_n),"%Y-%m-%d "),Object(pt.a)(an,"".concat(Cn,"-").concat(An),"%H:%M"),an);function Mn(e,t){var n,r,a=Object(te.p)({},Fn,t),i=Rn(e),o=i.length,u="",s=0;for(s=0;s<o;)for(n=i.length;n>s;--n)if(null!=a[r=i.slice(s,n).join("-")]){u+=a[r],s=n;break}return u.trim()}var Pn=new Date;function Ln(e){return Pn.setFullYear(e),Pn.setMonth(0),Pn.setDate(1),Pn.setHours(0,0,0,0),Pn}function zn(e){return Un(new Date(e))}function Bn(e){return Wn(new Date(e))}function Un(e){return St.count(Ln(e.getFullYear())-1,e)}function Wn(e){return Ct.count(Ln(e.getFullYear())-1,e)}function Vn(e){return Ln(e).getDay()}function qn(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(-1,t,n,r,a,i,o);return u.setFullYear(e),u}return new Date(e,t,n,r,a,i,o)}function $n(e){return Gn(new Date(e))}function Hn(e){return Kn(new Date(e))}function Gn(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return Mt.count(t-1,e)}function Kn(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return Lt.count(t-1,e)}function Xn(e){return Pn.setTime(Date.UTC(e,0,1)),Pn.getUTCDay()}function Yn(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(Date.UTC(-1,t,n,r,a,i,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,a,i,o))}function Jn(e,t,n,r,a){var i=t||1,o=Object(te.W)(e),u=function(e,t,a){return function(e,t,n,r){var a=n<=1?e:r?function(t,a){return r+n*Math.floor((e(t,a)-r)/n)}:function(t,r){return n*Math.floor(e(t,r)/n)};return t?function(e,n){return t(a(e,n),n)}:a}(n[a=a||e],r[a],e===o&&i,t)},s=new Date,c=Object(te.fb)(e),l=c[xn]?u(xn):Object(te.m)(2012),f=c[kn]?u(kn):c[On]?u(On):te.mb,d=c[jn]&&c[Sn]?u(Sn,1,jn+Sn):c[jn]?u(jn,1):c[Sn]?u(Sn,1):c[_n]?u(_n,1):c[En]?u(En,1):te.Q,h=c[Cn]?u(Cn):te.mb,p=c[An]?u(An):te.mb,v=c[Tn]?u(Tn):te.mb,m=c[Nn]?u(Nn):te.mb;return function(e){s.setTime(+e);var t=l(s);return a(t,f(s),d(s,t),h(s),p(s),v(s),m(s))}}function Qn(e,t,n){return t+7*e-(n+6)%7}var Zn=(on={},Object(pt.a)(on,xn,(function(e){return e.getFullYear()})),Object(pt.a)(on,On,(function(e){return Math.floor(e.getMonth()/3)})),Object(pt.a)(on,kn,(function(e){return e.getMonth()})),Object(pt.a)(on,_n,(function(e){return e.getDate()})),Object(pt.a)(on,Cn,(function(e){return e.getHours()})),Object(pt.a)(on,An,(function(e){return e.getMinutes()})),Object(pt.a)(on,Tn,(function(e){return e.getSeconds()})),Object(pt.a)(on,Nn,(function(e){return e.getMilliseconds()})),Object(pt.a)(on,En,(function(e){return Un(e)})),Object(pt.a)(on,jn,(function(e){return Wn(e)})),Object(pt.a)(on,jn+Sn,(function(e,t){return Qn(Wn(e),e.getDay(),Vn(t))})),Object(pt.a)(on,Sn,(function(e,t){return Qn(1,e.getDay(),Vn(t))})),on),er=(un={},Object(pt.a)(un,On,(function(e){return 3*e})),Object(pt.a)(un,jn,(function(e,t){return Qn(e,0,Vn(t))})),un);function tr(e,t){return Jn(e,t||1,Zn,er,qn)}var nr=(sn={},Object(pt.a)(sn,xn,(function(e){return e.getUTCFullYear()})),Object(pt.a)(sn,On,(function(e){return Math.floor(e.getUTCMonth()/3)})),Object(pt.a)(sn,kn,(function(e){return e.getUTCMonth()})),Object(pt.a)(sn,_n,(function(e){return e.getUTCDate()})),Object(pt.a)(sn,Cn,(function(e){return e.getUTCHours()})),Object(pt.a)(sn,An,(function(e){return e.getUTCMinutes()})),Object(pt.a)(sn,Tn,(function(e){return e.getUTCSeconds()})),Object(pt.a)(sn,Nn,(function(e){return e.getUTCMilliseconds()})),Object(pt.a)(sn,En,(function(e){return Gn(e)})),Object(pt.a)(sn,jn,(function(e){return Kn(e)})),Object(pt.a)(sn,Sn,(function(e,t){return Qn(1,e.getUTCDay(),Xn(t))})),Object(pt.a)(sn,jn+Sn,(function(e,t){return Qn(Kn(e),e.getUTCDay(),Xn(t))})),sn),rr=(cn={},Object(pt.a)(cn,On,(function(e){return 3*e})),Object(pt.a)(cn,jn,(function(e,t){return Qn(e,0,Xn(t))})),cn);function ar(e,t){return Jn(e,t||1,nr,rr,Yn)}var ir=(ln={},Object(pt.a)(ln,xn,Ht),Object(pt.a)(ln,On,Kt.every(3)),Object(pt.a)(ln,kn,Kt),Object(pt.a)(ln,jn,Ct),Object(pt.a)(ln,_n,St),Object(pt.a)(ln,Sn,St),Object(pt.a)(ln,En,St),Object(pt.a)(ln,Cn,Yt),Object(pt.a)(ln,An,Qt),Object(pt.a)(ln,Tn,en),Object(pt.a)(ln,Nn,nn),ln),or=(fn={},Object(pt.a)(fn,xn,dn),Object(pt.a)(fn,On,pn.every(3)),Object(pt.a)(fn,kn,pn),Object(pt.a)(fn,jn,Lt),Object(pt.a)(fn,_n,Mt),Object(pt.a)(fn,Sn,Mt),Object(pt.a)(fn,En,Mt),Object(pt.a)(fn,Cn,mn),Object(pt.a)(fn,An,bn),Object(pt.a)(fn,Tn,en),Object(pt.a)(fn,Nn,nn),fn);function ur(e){return ir[e]}function sr(e){return or[e]}function cr(e,t,n){return e?e.offset(t,n):void 0}function lr(e,t,n){return cr(ur(e),t,n)}function fr(e,t,n){return cr(sr(e),t,n)}function dr(e,t,n,r){return e?e.range(t,n,r):void 0}function hr(e,t,n,r){return dr(ur(e),t,n,r)}function pr(e,t,n,r){return dr(sr(e),t,n,r)}var vr=1e3,mr=6e4,gr=36e5,br=864e5,yr=2592e6,wr=31536e6,xr=[xn,kn,_n,Cn,An,Tn,Nn],Or=xr.slice(0,-1),kr=Or.slice(0,-1),jr=kr.slice(0,-1),_r=jr.slice(0,-1),Sr=[xn,kn],Er=[xn],Cr=[[Or,1,vr],[Or,5,5e3],[Or,15,15e3],[Or,30,3e4],[kr,1,mr],[kr,5,3e5],[kr,15,9e5],[kr,30,18e5],[jr,1,gr],[jr,3,108e5],[jr,6,216e5],[jr,12,432e5],[_r,1,br],[[xn,jn],1,6048e5],[Sr,1,yr],[Sr,3,7776e6],[Er,1,wr]];function Ar(e){var t,n,r=e.extent,a=e.maxbins||40,i=Math.abs(Object(te.Z)(r))/a,o=wn((function(e){return e[2]})).right(Cr,i);return o===Cr.length?(t=Er,n=Qe(r[0]/wr,r[1]/wr,a)):o?(t=(o=Cr[i/Cr[o-1][2]<Cr[o][2]/i?o-1:o])[0],n=o[1]):(t=xr,n=Math.max(Qe(r[0],r[1],a),1)),{units:t,step:n}}function Tr(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Nr(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ir(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Dr(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=Gr(a),l=Kr(a),f=Gr(i),d=Kr(i),h=Gr(o),p=Kr(o),v=Gr(u),m=Kr(u),g=Gr(s),b=Kr(s),y={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:va,e:va,f:wa,g:Na,G:Da,H:ma,I:ga,j:ba,L:ya,m:xa,M:Oa,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ni,s:ri,S:ka,u:ja,U:_a,V:Ea,w:Ca,W:Aa,x:null,X:null,y:Ta,Y:Ia,Z:Ra,"%":ti},w={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Fa,e:Fa,f:Ba,g:Ja,G:Za,H:Ma,I:Pa,j:La,L:za,m:Ua,M:Wa,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ni,s:ri,S:Va,u:qa,U:$a,V:Ga,w:Ka,W:Xa,x:null,X:null,y:Ya,Y:Qa,Z:ei,"%":ti},x={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return j(e,t,n,r)},d:ia,e:ia,f:fa,g:ta,G:ea,H:ua,I:ua,j:oa,L:la,m:aa,M:sa,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:ra,Q:ha,s:pa,S:ca,u:Yr,U:Jr,V:Qr,w:Xr,W:Zr,x:function(e,t,r){return j(e,n,t,r)},X:function(e,t,n){return j(e,r,t,n)},y:ta,Y:ea,Z:na,"%":da};function O(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=Ur[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function k(e,t){return function(n){var r,a,i=Ir(1900,void 0,1);if(j(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=Nr(Ir(i.y,0,1))).getUTCDay(),r=a>4||0===a?zt.ceil(r):zt(r),r=Mt.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=Tr(Ir(i.y,0,1))).getDay(),r=a>4||0===a?At.ceil(r):At(r),r=St.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?Nr(Ir(i.y,0,1)).getUTCDay():Tr(Ir(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Nr(i)):Tr(i)}}function j(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=x[a in Ur?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return y.x=O(n,y),y.X=O(r,y),y.c=O(t,y),w.x=O(n,w),w.X=O(r,w),w.c=O(t,w),{format:function(e){var t=O(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=O(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var Rr,Fr,Mr,Pr,Lr,zr,Br,Ur={"-":"",_:" ",0:"0"},Wr=/^\s*\d+/,Vr=/^%/,qr=/[\\^$*+?|[\]().{}]/g;function $r(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Hr(e){return e.replace(qr,"\\$&")}function Gr(e){return new RegExp("^(?:"+e.map(Hr).join("|")+")","i")}function Kr(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function Xr(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Yr(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Jr(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qr(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Zr(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ea(e,t,n){var r=Wr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ta(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function na(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ra(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function aa(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ia(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function oa(e,t,n){var r=Wr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ua(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sa(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ca(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function la(e,t,n){var r=Wr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fa(e,t,n){var r=Wr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function da(e,t,n){var r=Vr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ha(e,t,n){var r=Wr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function pa(e,t,n){var r=Wr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function va(e,t){return $r(e.getDate(),t,2)}function ma(e,t){return $r(e.getHours(),t,2)}function ga(e,t){return $r(e.getHours()%12||12,t,2)}function ba(e,t){return $r(1+St.count(Ht(e),e),t,3)}function ya(e,t){return $r(e.getMilliseconds(),t,3)}function wa(e,t){return ya(e,t)+"000"}function xa(e,t){return $r(e.getMonth()+1,t,2)}function Oa(e,t){return $r(e.getMinutes(),t,2)}function ka(e,t){return $r(e.getSeconds(),t,2)}function ja(e){var t=e.getDay();return 0===t?7:t}function _a(e,t){return $r(Ct.count(Ht(e)-1,e),t,2)}function Sa(e){var t=e.getDay();return t>=4||0===t?It(e):It.ceil(e)}function Ea(e,t){return e=Sa(e),$r(It.count(Ht(e),e)+(4===Ht(e).getDay()),t,2)}function Ca(e){return e.getDay()}function Aa(e,t){return $r(At.count(Ht(e)-1,e),t,2)}function Ta(e,t){return $r(e.getFullYear()%100,t,2)}function Na(e,t){return $r((e=Sa(e)).getFullYear()%100,t,2)}function Ia(e,t){return $r(e.getFullYear()%1e4,t,4)}function Da(e,t){var n=e.getDay();return $r((e=n>=4||0===n?It(e):It.ceil(e)).getFullYear()%1e4,t,4)}function Ra(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$r(t/60|0,"0",2)+$r(t%60,"0",2)}function Fa(e,t){return $r(e.getUTCDate(),t,2)}function Ma(e,t){return $r(e.getUTCHours(),t,2)}function Pa(e,t){return $r(e.getUTCHours()%12||12,t,2)}function La(e,t){return $r(1+Mt.count(dn(e),e),t,3)}function za(e,t){return $r(e.getUTCMilliseconds(),t,3)}function Ba(e,t){return za(e,t)+"000"}function Ua(e,t){return $r(e.getUTCMonth()+1,t,2)}function Wa(e,t){return $r(e.getUTCMinutes(),t,2)}function Va(e,t){return $r(e.getUTCSeconds(),t,2)}function qa(e){var t=e.getUTCDay();return 0===t?7:t}function $a(e,t){return $r(Lt.count(dn(e)-1,e),t,2)}function Ha(e){var t=e.getUTCDay();return t>=4||0===t?Wt(e):Wt.ceil(e)}function Ga(e,t){return e=Ha(e),$r(Wt.count(dn(e),e)+(4===dn(e).getUTCDay()),t,2)}function Ka(e){return e.getUTCDay()}function Xa(e,t){return $r(zt.count(dn(e)-1,e),t,2)}function Ya(e,t){return $r(e.getUTCFullYear()%100,t,2)}function Ja(e,t){return $r((e=Ha(e)).getUTCFullYear()%100,t,2)}function Qa(e,t){return $r(e.getUTCFullYear()%1e4,t,4)}function Za(e,t){var n=e.getUTCDay();return $r((e=n>=4||0===n?Wt(e):Wt.ceil(e)).getUTCFullYear()%1e4,t,4)}function ei(){return"+0000"}function ti(){return"%"}function ni(e){return+e}function ri(e){return Math.floor(+e/1e3)}function ai(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function ii(e){var t=ai(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=et(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=et(null==i?",f":i);var o,u=Qe(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ut(t)/3)))-ut(Math.abs(e)))}(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ut(t)-ut(e))+1}(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=function(e){return Math.max(0,-ut(Math.abs(e)))}(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function oi(){return zr=ii({format:it,formatPrefix:ot})}function ui(e){return ii(ht(e))}function si(e){return arguments.length?zr=ui(e):zr}function ci(e,t,n){n=n||{},Object(te.H)(n)||Object(te.o)("Invalid time multi-format specifier: ".concat(n));var r=t(Tn),a=t(An),i=t(Cn),o=t(_n),u=t(jn),s=t(kn),c=t(On),l=t(xn),f=e(n[Nn]||".%L"),d=e(n[Tn]||":%S"),h=e(n[An]||"%I:%M"),p=e(n[Cn]||"%I %p"),v=e(n[_n]||n[Sn]||"%a %d"),m=e(n[jn]||"%b %d"),g=e(n[kn]||"%B"),b=e(n[On]||"%B"),y=e(n[xn]||"%Y");return function(e){return(r(e)<e?f:a(e)<e?d:i(e)<e?h:o(e)<e?p:s(e)<e?u(e)<e?v:m:l(e)<e?c(e)<e?g:b:y)(e)}}function li(e){var t=ai(e.format),n=ai(e.utcFormat);return{timeFormat:function(e){return Object(te.J)(e)?t(e):ci(t,ur,e)},utcFormat:function(e){return Object(te.J)(e)?n(e):ci(n,sr,e)},timeParse:ai(e.parse),utcParse:ai(e.utcParse)}}function fi(){return Br=li({format:Fr,parse:Mr,utcFormat:Pr,utcParse:Lr})}function di(e){return li(Dr(e))}function hi(e){return arguments.length?Br=di(e):Br}!function(e){Rr=Dr(e),Fr=Rr.format,Mr=Rr.parse,Pr=Rr.utcFormat,Lr=Rr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),oi(),fi();var pi=function(e,t){return Object(te.p)({},e,t)};function vi(e,t){var n=e?ui(e):si(),r=t?di(t):hi();return pi(n,r)}function mi(e,t){var n=arguments.length;return n&&2!==n&&Object(te.o)("defaultLocale expects either zero or two arguments."),n?pi(si(e),hi(t)):pi(si(),hi())}function gi(){return oi(),fi(),mi()}var bi=function(e,t,n,r){var a=$e((t=t||{}).type||"json");return a||Object(te.o)("Unknown data format type: "+t.type),e=a(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;var a=hi();n=n||a.timeParse,r=r||a.utcParse;var i,o,u,s,c,l,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=Oe(e,f));var d=(f=Object.keys(t)).map((function(e){var a,i,o=t[e];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(i=(a=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),("utc"===a[0]?r:n)(i);if(!be[o])throw Error("Illegal format pattern: "+e+":"+o);return be[o]}));for(u=0,c=e.length,l=f.length;u<c;++u)for(i=e[u],s=0;s<l;++s)i[o=f[s]]=d[s](i[o])}(e,t.parse,n,r),Object(te.w)(e,"columns")&&delete e.columns,e};var yi=function(e,t){return function(n){return{options:n||{},sanitize:ce,load:ue,fileAccess:!!t,file:fe(t),http:pe(e)}}}("undefined"!==typeof fetch&&fetch,null);function wi(e){var t=e||te.y,n=[],r={};return n.add=function(e){var a=t(e);return r[a]||(r[a]=1,n.push(e)),n},n.remove=function(e){var a=t(e);if(r[a]){r[a]=0;var i=n.indexOf(e);i>=0&&n.splice(i,1)}return n},n}function xi(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=Object(ne.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var ki=Symbol("vega_id"),ji=1;function _i(e){return!(!e||!Si(e))}function Si(e){return e[ki]}function Ei(e,t){return e[ki]=t,e}function Ci(e){var t=e===Object(e)?e:{data:e};return Si(t)?t:Ei(t,ji++)}function Ai(e){return Ti(e,Ci({}))}function Ti(e,t){for(var n in e)t[n]=e[n];return t}function Ni(e,t){return Ei(t,Si(e))}function Ii(e,t){return e?t?function(n,r){return e(n,r)||Si(t(n))-Si(t(r))}:function(t,n){return e(t,n)||Si(t)-Si(n)}:null}function Di(e){return e&&e.constructor===Ri}function Ri(){var e=[],t=[],n=[],r=[],a=[],i=null,o=!1;return{constructor:Ri,insert:function(t){for(var n=Object(te.i)(t),r=n.length,a=0;a<r;++a)e.push(n[a]);return this},remove:function(e){for(var n=Object(te.E)(e)?r:t,a=Object(te.i)(e),i=a.length,o=0;o<i;++o)n.push(a[o]);return this},modify:function(e,t,r){var i={field:t,value:Object(te.m)(r)};return Object(te.E)(e)?(i.filter=e,a.push(i)):(i.tuple=e,n.push(i)),this},encode:function(e,t){return Object(te.E)(e)?a.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return i=e,this},reflow:function(){return o=!0,this},pulse:function(u,s){var c,l,f,d,h,p,v={},m={};for(c=0,l=s.length;c<l;++c)v[Si(s[c])]=1;for(c=0,l=t.length;c<l;++c)v[Si(h=t[c])]=-1;for(c=0,l=r.length;c<l;++c)d=r[c],s.forEach((function(e){d(e)&&(v[Si(e)]=-1)}));for(c=0,l=e.length;c<l;++c)p=Si(h=e[c]),v[p]?v[p]=1:u.add.push(Ci(e[c]));for(c=0,l=s.length;c<l;++c)h=s[c],v[Si(h)]<0&&u.rem.push(h);function g(e,t,n){n?e[t]=n(e):u.encode=t,o||(m[Si(e)]=e)}for(c=0,l=n.length;c<l;++c)h=(f=n[c]).tuple,d=f.field,(p=v[Si(h)])>0&&(g(h,d,f.value),u.modifies(d));for(c=0,l=a.length;c<l;++c)f=a[c],d=f.filter,s.forEach((function(e){d(e)&&v[Si(e)]>0&&g(e,f.field,f.value)})),u.modifies(f.field);if(o)u.mod=t.length||r.length?s.filter((function(e){return v[Si(e)]>0})):s.slice();else for(p in m)u.mod.push(m[p]);return(i||null==i&&(t.length||r.length))&&u.clean(!0),u}}}var Fi="_:mod:_";function Mi(){Object.defineProperty(this,Fi,{writable:!0,value:{}})}Mi.prototype={set:function(e,t,n,r){var a=this,i=a[e],o=a[Fi];return null!=t&&t>=0?(i[t]!==n||r)&&(i[t]=n,o[t+":"+e]=-1,o[e]=-1):(i!==n||r)&&(a[e]=n,o[e]=Object(te.B)(n)?1+n.length:-1),a},modified:function(e,t){var n=this[Fi];if(!arguments.length){for(var r in n)if(n[r])return!0;return!1}if(Object(te.B)(e)){for(var a=0;a<e.length;++a)if(n[e[a]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this[Fi]={},this}};var Pi=0,Li=new Mi;function zi(e,t,n,r){this.id=++Pi,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Bi(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}zi.prototype={targets:function(){return this._targets||(this._targets=wi(te.x))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:Bi(1),modified:Bi(2),parameters:function(e,t,n){var r=this;t=!1!==t;var a,i,o,u,s=this._argval=this._argval||new Mi,c=this._argops=this._argops||[],l=[],f=function(e,n,a){a instanceof zi?(a!==r&&(t&&a.targets().add(r),l.push(a)),c.push({op:a,name:e,index:n})):s.set(e,n,a)};for(a in e)if(i=e[a],"pulse"===a)Object(te.i)(i).forEach((function(e){e instanceof zi?e!==r&&(e.targets().add(r),l.push(e)):Object(te.o)("Pulse parameters must be operator instances.")})),this.source=i;else if(Object(te.B)(i))for(s.set(a,-1,Array(o=i.length)),u=0;u<o;++u)f(a,u,i[u]);else f(a,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},marshall:function(e){var t,n,r,a,i=this._argval||Li,o=this._argops;if(o){var u=o.length;for(n=0;n<u;++n)a=(r=(t=o[n]).op).modified()&&r.stamp===e,i.set(t.name,t.index,r.value,a);if(o.initonly){for(n=0;n<u;++n)(t=o[n]).op.targets().remove(this);this._argops=null,this._update=null}}return i},detach:function(){var e,t,n,r=this._argops;if(r)for(e=0,t=r.length;e<t;++e)(n=r[e].op)._targets&&n._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t}};var Ui=0;function Wi(e,t,n){this.id=++Ui,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Vi(e,t,n){return new Wi(e,t,n)}function qi(){return(qi=Object(ne.a)(x.a.mark((function e(t,n){var r,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,a=0,e.prev=2,e.next=5,r.loader().load(t,{context:"dataflow",response:He(n&&n.type)});case 5:i=e.sent;try{i=r.parse(i,n)}catch(o){a=-2,r.warn("Data ingestion failed",t,o)}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a=-1,r.warn("Loading failed",t,e.t0);case 13:return e.abrupt("return",{data:i,status:a});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})))).apply(this,arguments)}function $i(){return($i=Object(ne.a)(x.a.mark((function e(t,n,r){var a,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(a=this)._pending||Hi(a)).requests+=1,e.next=4,a.request(n,r);case 4:return o=e.sent,a.pulse(t,a.changeset().remove(te.ib).insert(o.data||[])),i.done(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Hi(e){var t,n=new Promise((function(e){return t=e}));return n.requests=0,n.done=function(){0===--n.requests&&(e._pending=null,t(e))},e._pending=n}Wi.prototype={_filter:te.ib,_apply:te.y,targets:function(){return this._targets||(this._targets=wi(te.x))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,a=0;a<r;++a)n[a].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){var t=Vi(e);return this.targets().add(t),t},apply:function(e){var t=Vi(null,e);return this.targets().add(t),t},merge:function(){var e=Vi();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){var t=Vi();return this.targets().add(Vi(null,null,Object(te.n)(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){var n=!1;return e.targets().add(Vi(null,null,(function(){return n=!0}))),t.targets().add(Vi(null,null,(function(){return n=!1}))),this.filter((function(){return n}))},detach:function(){this._filter=te.ib,this._targets=null}};var Gi={skip:!0};function Ki(e,t,n,r,a,i){var o,u,s=Object(te.p)({},i,Gi);Object(te.E)(n)||(n=Object(te.m)(n)),void 0===r?o=function(t){return e.touch(n(t))}:Object(te.E)(r)?(u=new zi(null,r,a,!1),o=function(t){u.evaluate(t);var r=n(t),a=u.value;Di(a)?e.pulse(r,a,i):e.update(r,a,s)}):o=function(t){return e.update(n(t),r,s)},t.apply(o)}function Xi(e,t,n,r,a,i){if(void 0===r)t.targets().add(n);else{var o=i||{},u=new zi(null,function(e,t){return t=Object(te.E)(t)?t:Object(te.m)(t),e?function(n,r){var a=t(n,r);return e.skip()||(e.skip(a!==this.value).value=a),a}:t}(n,r),a,!1);u.modified(o.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}var Yi={};function Ji(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Qi(e,t){var n=[];return Object(te.kb)(e,t,(function(e){return n.push(e)})),n}function Zi(e,t){var n={};return e.visit(t,(function(e){n[Si(e)]=1})),function(e){return n[Si(e)]?null:e}}function eo(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function to(e,t,n,r){var a=this,i=n.length,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(var u=0;u<i;++u){var s=n[u];if(s.stamp===t){if(s.fields){var c=a.fields||(a.fields={});for(var l in s.fields)c[l]=1}s.changed(a.ADD)&&(o|=a.ADD),s.changed(a.REM)&&(o|=a.REM),s.changed(a.MOD)&&(o|=a.MOD)}}this.changes=o}function no(){return(no=Object(ne.a)(x.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(a=this)._pulse){e.next=3;break}return e.abrupt("return",ao(a));case 3:if(!a._pending){e.next=6;break}return e.next=6,a._pending;case 6:if(!n){e.next=9;break}return e.next=9,xi(a,n);case 9:if(a._touched.length){e.next=12;break}return a.debug("Dataflow invoked, but nothing to do."),e.abrupt("return",a);case 12:o=++a._clock,a._pulse=new Ji(a,o,t),a._touched.forEach((function(e){return a._enqueue(e,!0)})),a._touched=wi(te.x),u=0,e.prev=17;case 18:if(!(a._heap.size()>0)){e.next=35;break}if((s=a._heap.pop()).rank===s.qrank){e.next=23;break}return a._enqueue(s,!0),e.abrupt("continue",18);case 23:if(!(c=s.run(a._getPulse(s,t))).then){e.next=30;break}return e.next=27,c;case 27:c=e.sent,e.next=31;break;case 30:c.async&&(i.push(c.async),c=Yi);case 31:c!==Yi&&s._targets&&s._targets.forEach((function(e){return a._enqueue(e)})),++u,e.next=18;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(17),a._heap.clear(),l=e.t0;case 41:if(a._input={},a._pulse=null,a.debug("Pulse ".concat(o,": ").concat(u," operators")),l&&(a._postrun=[],a.error(l)),!a._postrun.length){e.next=55;break}f=a._postrun.sort((function(e,t){return t.priority-e.priority})),a._postrun=[],d=0;case 49:if(!(d<f.length)){e.next=55;break}return e.next=52,xi(a,f[d].callback);case 52:++d,e.next=49;break;case 55:if(!r){e.next=58;break}return e.next=58,xi(a,r);case 58:return i.length&&Promise.all(i).then((function(e){return a.runAsync(null,(function(){e.forEach((function(e){try{e(a)}catch(t){a.error(t)}}))}))})),e.abrupt("return",a);case 60:case"end":return e.stop()}}),e,this,[[17,37]])})))).apply(this,arguments)}function ro(){return(ro=Object(ne.a)(x.a.mark((function e(t,n,r){var a,i=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=5;break}return e.next=3,this._running;case 3:e.next=0;break;case 5:return a=function(){return i._running=null},(this._running=this.evaluate(t,n,r)).then(a,a),e.abrupt("return",this._running);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ao(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Ji.prototype={StopPropagation:Yi,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new Ji(this.dataflow).init(this,e)},clone:function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){var e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||((e=new Ji(this.dataflow).init(this)).add=e.source,e.rem=[]),e},init:function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Zi(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){var t=this.fields||(this.fields={});return Object(te.B)(e)?e.forEach((function(e){return t[e]=!0})):t[e]=!0,this},modified:function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Object(te.B)(e)?e.some((function(e){return n[e]})):n[e]:!!n)},filter:function(e,t){var n=this;return 1&e&&(n.addF=eo(n.addF,t)),2&e&&(n.remF=eo(n.remF,t)),4&e&&(n.modF=eo(n.modF,t)),16&e&&(n.srcF=eo(n.srcF,t)),n},materialize:function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=Qi(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Qi(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Qi(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){var n=this,r=t;if(16&e)return Object(te.kb)(n.source,n.srcF,r),n;1&e&&Object(te.kb)(n.add,n.addF,r),2&e&&Object(te.kb)(n.rem,n.remF,r),4&e&&Object(te.kb)(n.mod,n.modF,r);var a=n.source;if(8&e&&a){var i=n.add.length+n.mod.length;i===a.length||(i?Object(te.kb)(a,Zi(n,5),r):Object(te.kb)(a,n.srcF,r))}return n}},Object(te.z)(to,Ji,{fork:function(e){var t=new Ji(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},changed:function(e){return this.changes&e},modified:function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Object(te.B)(e)?e.some((function(e){return n[e]})):n[e]:0},filter:function(){Object(te.o)("MultiPulse does not support filtering.")},materialize:function(){Object(te.o)("MultiPulse does not support materialization.")},visit:function(e,t){var n=this,r=n.pulses,a=r.length,i=0;if(e&n.SOURCE)for(;i<a;++i)r[i].visit(e,t);else for(;i<a;++i)r[i].stamp===n.stamp&&r[i].visit(e,t);return n}});var io={skip:!1,force:!1};function oo(e){var t=[];return{clear:function(){return t=[]},size:function(){return t.length},peek:function(){return t[0]},push:function(n){return t.push(n),uo(t,0,t.length-1,e)},pop:function(){var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function(e,t,n){var r,a=t,i=e.length,o=e[t],u=1+(t<<1);for(;u<i;)(r=u+1)<i&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=1+((t=u)<<1);e[t]=o,uo(e,a,t,n)}(t,0,e)):n=r,n}}}function uo(e,t,n,r){for(var a,i,o=e[n];n>t&&r(o,a=e[i=n-1>>1])<0;)e[n]=a,n=i;return e[n]=o}function so(){this.logger(Object(te.M)()),this.logLevel(te.b),this._clock=0,this._rank=0,this._locale=mi();try{this._loader=yi()}catch(e){}this._touched=wi(te.x),this._input={},this._pulse=null,this._heap=oo((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}function co(e){return function(){return this._log[e].apply(this,arguments)}}function lo(e,t){zi.call(this,e,null,t)}so.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:co("error"),warn:co("warn"),info:co("info"),debug:co("debug"),logLevel:co("level"),cleanThreshold:1e4,add:function(e,t,n,r){var a,i=1;return e instanceof zi?a=e:e&&e.prototype instanceof zi?a=new e:Object(te.E)(e)?a=new zi(null,e):(i=0,a=new zi(e,t)),this.rank(a),i&&(r=n,n=t),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a},connect:function(e,t){for(var n=e.rank,r=t.length,a=0;a<r;++a)if(n<t[a].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){for(var t,n,r,a=[e];a.length;)if(this.rank(t=a.pop()),n=t._targets)for(r=n.length;--r>=0;)a.push(t=n[r]),t===e&&Object(te.o)("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||io);var r=new Ji(this,this._clock+(this._pulse?0:1)),a=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,a),this},touch:function(e,t){var n=t||io;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){var r=n||io;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:Ri,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){var n=this.locale();return bi(e,t,n.timeParse,n.utcParse)},preload:function(e,t,n){return $i.apply(this,arguments)},request:function(e,t){return qi.apply(this,arguments)},events:function(e,t,n,r){for(var a,i=this,o=Vi(n,r),u=function(e){e.dataflow=i;try{o.receive(e)}catch(t){i.error(t)}finally{i.run()}},s=(a="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):Object(te.i)(e)).length,c=0;c<s;++c)a[c].addEventListener(t,u);return o},on:function(e,t,n,r,a){return(e instanceof zi?Xi:Ki)(this,e,t,n,r,a),this},evaluate:function(e,t,n){return no.apply(this,arguments)},run:function(e,t,n){return this._pulse?ao(this):(this.evaluate(e,t,n),this)},runAsync:function(e,t,n){return ro.apply(this,arguments)},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},_enqueue:function(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){var n=e.source,r=this._clock;return n&&Object(te.B)(n)?new to(this,r,n.map((function(e){return e.pulse})),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Yi&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},Object(te.z)(lo,zi,{run:function(e){var t,n=this;return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then((function(e){return n.pulse=e})):t!==e.StopPropagation&&(this.pulse=t),t)},evaluate:function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});var fo={};function ho(e){var t=po(e);return t&&t.Definition||null}function po(e){return e=e&&e.toLowerCase(),Object(te.w)(fo,e)?fo[e]:null}var vo=n(9),mo=n(4);function go(e,t){var n;if(void 0===t){var r,a=Object(vo.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(vo.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function bo(e,t){var n;if(void 0===t){var r,a=Object(vo.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(vo.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function yo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yn;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,u=Math.log(i),s=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*s*(i-s)/i)*(o-i/2<0?-1:1),l=Math.max(n,Math.floor(t-o*s/i+c)),f=Math.min(r,Math.floor(t+(i-o)*s/i+c));yo(e,t,l,f,a)}var d=e[t],h=n,p=r;for(wo(e,n,t),a(e[r],d)>0&&wo(e,n,r);h<p;){for(wo(e,h,p),++h,--p;a(e[h],d)<0;)++h;for(;a(e[p],d)>0;)--p}0===a(e[n],d)?wo(e,n,p):wo(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function wo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var xo=x.a.mark(ko),Oo=function(e){return null===e?NaN:+e};function ko(e,t){var n,r,a,i,o,u,s;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=Object(vo.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:i=-1,o=Object(vo.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),xo,null,[[2,13,16,19],[23,34,37,40]])}function jo(e,t,n){if(r=(e=Float64Array.from(ko(e,n))).length){if((t=+t)<=0||r<2)return bo(e);if(t>=1)return go(e);var r,a=(r-1)*t,i=Math.floor(a),o=go(yo(e,i).subarray(0,i+1));return o+(bo(e.subarray(i+1))-o)*(a-i)}}function _o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oo;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}function So(e,t){var n=function(e,t){var n,r=0,a=0,i=0;if(void 0===t){var o,u=Object(vo.a)(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(i+=(n=s-a)*(s-(a+=n/++r)))}}catch(h){u.e(h)}finally{u.f()}}else{var c,l=-1,f=Object(vo.a)(e);try{for(f.s();!(c=f.n()).done;){var d=c.value;null!=(d=t(d,++l,e))&&(d=+d)>=d&&(i+=(n=d-a)*(d-(a+=n/++r)))}}catch(h){f.e(h)}finally{f.f()}}if(r>1)return i/(r-1)}(e,t);return n?Math.sqrt(n):n}var Eo=function(e,t){return jo(e,.5,t)},Co=x.a.mark(Ao);function Ao(e,t){var n,r,a,i,o,u,s;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null!=t){c.next=21;break}n=Object(vo.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&""!==a&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=41;break;case 21:i=-1,o=Object(vo.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=33;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&""!==s&&(s=+s)>=s)){c.next=31;break}return c.next=31,s;case 31:c.next=25;break;case 33:c.next=38;break;case 35:c.prev=35,c.t1=c.catch(23),o.e(c.t1);case 38:return c.prev=38,o.f(),c.finish(38);case 41:case"end":return c.stop()}}),Co,null,[[2,13,16,19],[23,35,38,41]])}function To(e,t,n){var r=Float64Array.from(Ao(e,n));return r.sort(yn),t.map((function(e){return _o(r,e)}))}function No(e,t){return To(e,[.25,.5,.75],t)}function Io(e,t){var n=e.length,r=So(e,t),a=No(e,t),i=(a[2]-a[0])/1.34;return 1.06*(Math.min(r,i)||r||Math.abs(a[0])||1)*Math.pow(n,-.2)}function Do(e){var t,n,r,a,i,o,u=e.maxbins||20,s=e.base||10,c=Math.log(s),l=e.divide||[5,2],f=e.extent[0],d=e.extent[1],h=e.span||d-f||Math.abs(f)||1;if(e.step)t=e.step;else if(e.steps){for(a=h/u,i=0,o=e.steps.length;i<o&&e.steps[i]<a;++i);t=e.steps[Math.max(0,i-1)]}else{for(n=Math.ceil(Math.log(u)/c),r=e.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(h)/c)-n));Math.ceil(h/t)>u;)t*=s;for(i=0,o=l.length;i<o;++i)(a=t/l[i])>=r&&h/a<=u&&(t=a)}var p=(a=Math.log(t))>=0?0:1+~~(-a/c),v=Math.pow(s,-p-1);return(e.nice||void 0===e.nice)&&(f=f<(a=Math.floor(f/t+v)*t)?a-t:a,d=Math.ceil(d/t)*t),{start:f,stop:d===f?f+t:d,step:t}}var Ro=Math.random;function Fo(e){Ro=e}function Mo(e,t,n,r){if(!e.length)return[void 0,void 0];var a,i,o,u,s=Float64Array.from(Ao(e,r)),c=s.length,l=t;for(o=0,u=Array(l);o<l;++o){for(a=0,i=0;i<c;++i)a+=s[~~(Ro()*c)];u[o]=a/c}return u.sort(yn),[jo(u,n/2),jo(u,1-n/2)]}function Po(e,t,n,r){r=r||function(e){return e};for(var a,i=e.length,o=new Float64Array(i),u=0,s=1,c=r(e[0]),l=c,f=c+t;s<i;++s){if((a=r(e[s]))>=f){for(l=(c+l)/2;u<s;++u)o[u]=l;f=a+t,c=a}l=a}for(l=(c+l)/2;u<s;++u)o[u]=l;return n?function(e,t){var n,r,a=e.length,i=0,o=1;for(;e[i]===e[o];)++o;for(;o<a;){for(n=o+1;e[o]===e[n];)++n;if(e[o]-e[o-1]<t){for(r=o+(i+n-o-o>>1);r<o;)e[r++]=e[o];for(;r>o;)e[r--]=e[i]}i=o,o=n}return e}(o,t+t/4):o}function Lo(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function zo(e,t){var n,r,a;null==t&&(t=e,e=0);var i={min:function(e){return arguments.length?(a=r-(n=e||0),i):n},max:function(e){return arguments.length?(a=(r=e||0)-n,i):r},sample:function(){return n+Math.floor(a*Ro())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/a:0},cdf:function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/a},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*a):NaN}};return i.min(e).max(t)}var Bo=Math.sqrt(2*Math.PI),Uo=Math.SQRT2,Wo=NaN;function Vo(e,t){e=e||0,t=null==t?1:t;var n,r,a=0,i=0;if(Wo===Wo)a=Wo,Wo=NaN;else{do{n=(a=2*Ro()-1)*a+(i=2*Ro()-1)*i}while(0===n||n>1);a*=r=Math.sqrt(-2*Math.log(n)/n),Wo=i*r}return e+a*t}function qo(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*Bo)}function $o(e,t,n){var r,a=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(a);if(i>37)r=0;else{var o=Math.exp(-i*i/2);i<7.07106781186547?(r=o*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=o/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return a>0?1-r:r}function Ho(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Uo*function(e){var t,n=-Math.log((1-e)*(1+e));t=n<6.25?1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return t*e}(2*e-1)}function Go(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return Vo(n,r)},pdf:function(e){return qo(e,n,r)},cdf:function(e){return $o(e,n,r)},icdf:function(e){return Ho(e,n,r)}};return a.mean(e).stdev(t)}function Ko(e,t){var n=Go(),r=0,a={data:function(n){return arguments.length?(e=n,r=n?n.length:0,a.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=Io(e)),a):t},sample:function(){return e[~~(Ro()*r)]+t*n.sample()},pdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.pdf((a-e[o])/t);return i/t/r},cdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.cdf((a-e[o])/t);return i/r},icdf:function(){throw Error("KDE icdf not supported.")}};return a.data(e)}function Xo(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Vo()*t)}function Yo(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Bo*e)}function Jo(e,t,n){return $o(Math.log(e),t,n)}function Qo(e,t,n){return Math.exp(Ho(e,t,n))}function Zo(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return Xo(n,r)},pdf:function(e){return Yo(e,n,r)},cdf:function(e){return Jo(e,n,r)},icdf:function(e){return Qo(e,n,r)}};return a.mean(e).stdev(t)}function eu(e,t){var n,r=0;function a(e){var t,n=[],a=0;for(t=0;t<r;++t)a+=n[t]=null==e[t]?1:+e[t];for(t=0;t<r;++t)n[t]/=a;return n}var i={weights:function(e){return arguments.length?(n=a(t=e||[]),i):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample:function(){for(var t=Ro(),a=e[r-1],i=n[0],o=0;o<r-1;i+=n[++o])if(t<i){a=e[o];break}return a.sample()},pdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].pdf(t);return a},cdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].cdf(t);return a},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)}function tu(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Ro()}function nu(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function ru(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function au(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function iu(e,t){var n,r,a={min:function(e){return arguments.length?(n=e||0,a):n},max:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return tu(n,r)},pdf:function(e){return nu(e,n,r)},cdf:function(e){return ru(e,n,r)},icdf:function(e){return au(e,n,r)}};return null==t&&(t=null==e?1:e,e=0),a.min(e).max(t)}function ou(e,t,n,r){var a=r-e*e,i=Math.abs(a)<1e-24?0:(n-e*t)/a;return[t-i*e,i]}function uu(e,t,n,r){e=e.filter((function(e){var r=t(e),a=n(e);return null!=r&&(r=+r)>=r&&null!=a&&(a=+a)>=a})),r&&e.sort((function(e,n){return t(e)-t(n)}));var a,i,o,u,s=e.length,c=new Float64Array(s),l=new Float64Array(s),f=0,d=0,h=0,p=Object(vo.a)(e);try{for(p.s();!(u=p.n()).done;)o=u.value,c[f]=a=+t(o),l[f]=i=+n(o),d+=(a-d)/++f,h+=(i-h)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<s;++f)c[f]-=d,l[f]-=h;return[c,l,d,h]}function su(e,t,n,r){var a,i,o,u=-1,s=Object(vo.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;a=t(c),i=n(c),null!=a&&(a=+a)>=a&&null!=i&&(i=+i)>=i&&r(a,i,++u)}}catch(l){s.e(l)}finally{s.f()}}function cu(e,t,n,r,a){var i=0,o=0;return su(e,t,n,(function(e,t){var n=t-a(e),u=t-r;i+=n*n,o+=u*u})),1-i/o}function lu(e,t,n){var r=0,a=0,i=0,o=0,u=0;su(e,t,n,(function(e,t){++u,r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=ou(r,a,i,o),c=function(e){return s[0]+s[1]*e};return{coef:s,predict:c,rSquared:cu(e,t,n,a,c)}}function fu(e,t,n){var r=0,a=0,i=0,o=0,u=0;su(e,t,n,(function(e,t){++u,e=Math.log(e),r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=ou(r,a,i,o),c=function(e){return s[0]+s[1]*Math.log(e)};return{coef:s,predict:c,rSquared:cu(e,t,n,a,c)}}function du(e,t,n){var r,a,i,o=uu(e,t,n),u=Object(mo.a)(o,4),s=u[0],c=(u[1],u[2]),l=u[3],f=0,d=0,h=0,p=0,v=0;su(e,t,n,(function(e,t){r=s[v++],a=Math.log(t),f+=(t*a-f)/v,d+=((i=r*t)-d)/v,h+=(i*a-h)/v,p+=(r*i-p)/v}));var m=ou(d/l,f/l,h/l,p/l),g=Object(mo.a)(m,2),b=g[0],y=g[1],w=function(e){return Math.exp(b+y*(e-c))};return{coef:[Math.exp(b-y*c),y],predict:w,rSquared:cu(e,t,n,l,w)}}function hu(e,t,n){var r=0,a=0,i=0,o=0,u=0,s=0;su(e,t,n,(function(e,t){var n=Math.log(e),c=Math.log(t);++s,r+=(n-r)/s,a+=(c-a)/s,i+=(n*c-i)/s,o+=(n*n-o)/s,u+=(t-u)/s}));var c=ou(r,a,i,o),l=function(e){return c[0]*Math.pow(e,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:cu(e,t,n,u,l)}}function pu(e,t,n){var r,a,i,o,u=uu(e,t,n),s=Object(mo.a)(u,4),c=s[0],l=s[1],f=s[2],d=s[3],h=c.length,p=0,v=0,m=0,g=0,b=0;for(r=0;r<h;)a=c[r],i=l[r++],p+=((o=a*a)-p)/r,v+=(o*a-v)/r,m+=(o*o-m)/r,g+=(a*i-g)/r,b+=(o*i-b)/r;var y=m-p*p,w=p*y-v*v,x=(b*p-g*v)/w,O=(g*y-b*v)/w,k=-x*p,j=function(e){return x*(e-=f)*e+O*e+k+d};return{coef:[k-O*f+x*f*f+d,O-2*x*f,x],predict:j,rSquared:cu(e,t,n,d,j)}}function vu(e,t,n,r){if(1===r)return lu(e,t,n);if(2===r)return pu(e,t,n);var a,i,o,u,s,c=uu(e,t,n),l=Object(mo.a)(c,4),f=l[0],d=l[1],h=l[2],p=l[3],v=f.length,m=[],g=[],b=r+1;for(a=0;a<b;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a)*d[o];for(m.push(u),s=new Float64Array(b),i=0;i<b;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a+i);s[i]=u}g.push(s)}g.push(m);var y=function(e){var t,n,r,a,i,o=e.length-1,u=[];for(t=0;t<o;++t){for(a=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][a])&&(a=n);for(r=t;r<o+1;++r)i=e[r][t],e[r][t]=e[r][a],e[r][a]=i;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(i=0,r=n+1;r<o;++r)i+=e[r][n]*u[r];u[n]=(e[o][n]-i)/e[n][n]}return u}(g),w=function(e){e-=h;var t=p+y[0]+y[1]*e+y[2]*e*e;for(a=3;a<b;++a)t+=y[a]*Math.pow(e,a);return t};return{coef:mu(b,y,-h,p),predict:w,rSquared:cu(e,t,n,p,w)}}function mu(e,t,n,r){var a,i,o,u,s=Array(e);for(a=0;a<e;++a)s[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,s[a]+=o,i=1;i<=a;++i)u*=(a+1-i)/i,s[a-i]+=o*Math.pow(n,i)*u;return s[0]+=r,s}function gu(e,t,n,r){for(var a=uu(e,t,n,!0),i=Object(mo.a)(a,4),o=i[0],u=i[1],s=i[2],c=i[3],l=o.length,f=Math.max(2,~~(r*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=2;){for(var m=[0,f-1],g=0;g<l;++g){for(var b=o[g],y=m[0],w=m[1],x=b-o[y]>o[w]-b?y:w,O=0,k=0,j=0,_=0,S=0,E=1/Math.abs(o[x]-b||1),C=y;C<=w;++C){var A=o[C],T=u[C],N=bu(Math.abs(b-A)*E)*p[C],I=A*N;O+=N,k+=I,j+=T*N,_+=T*I,S+=A*I}var D=ou(k/O,j/O,_/O,S/O),R=Object(mo.a)(D,2),F=R[0],M=R[1];d[g]=F+M*b,h[g]=Math.abs(u[g]-d[g]),yu(o,g+1,m)}if(2===v)break;var P=Eo(h);if(Math.abs(P)<1e-12)break;for(var L,z,B=0;B<l;++B)L=h[B]/(6*P),p[B]=L>=1?1e-12:(z=1-L*L)*z}return function(e,t,n,r){for(var a,i=e.length,o=[],u=0,s=0,c=[];u<i;++u)a=e[u]+n,c[0]===a?c[1]+=(t[u]-c[1])/++s:(s=0,c[1]+=r,c=[a,t[u]],o.push(c));return c[1]+=r,o}(o,d,s,c)}function bu(e){return(e=1-e*e*e)*e*e}function yu(e,t,n){var r=e[t],a=n[0],i=n[1]+1;if(!(i>=e.length))for(;t>a&&e[i]-r<=r-e[a];)n[0]=++a,n[1]=i,++i}var wu=.1*Math.PI/180;function xu(e,t,n,r){n=n||25,r=Math.max(n,r||200);var a=function(t){return[t,e(t)]},i=t[0],o=t[1],u=o-i,s=u/r,c=[a(i)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(a(i+f/n*u));return c.push(a(o)),c}l.push(a(o));for(var d=n;--d>0;)l.push(a(i+d/n*u));for(var h=c[0],p=l[l.length-1];p;){var v=a((h[0]+p[0])/2);v[0]-h[0]>=s&&Ou(h,v,p)>wu?l.push(v):(h=p,c.push(p),l.pop()),p=l[l.length-1]}return c}function Ou(e,t,n){var r=Math.atan2(n[1]-e[1],n[0]-e[0]),a=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-a)}var ku=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i};function ju(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,a=String(t[0](e));r<n;++r)a+="|"+t[r](e);return a}):function(){return""};var t}function _u(e,t,n){return n||e+(t?"_"+t:"")}var Su=function(){},Eu={init:Su,add:Su,rem:Su,idx:0},Cu={values:{init:function(e){return e.cell.store=!0},value:function(e){return e.cell.data.values()},idx:-1},count:{value:function(e){return e.cell.num}},__count__:{value:function(e){return e.missing+e.valid}},missing:{value:function(e){return e.missing}},valid:{value:function(e){return e.valid}},sum:{init:function(e){return e.sum=0},value:function(e){return e.sum},add:function(e,t){return e.sum+=+t},rem:function(e,t){return e.sum-=t}},product:{init:function(e){return e.product=1},value:function(e){return e.valid?e.product:void 0},add:function(e,t){return e.product*=t},rem:function(e,t){return e.product/=t}},mean:{init:function(e){return e.mean=0},value:function(e){return e.valid?e.mean:void 0},add:function(e,t){return e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:function(e,t){return e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}},average:{value:function(e){return e.valid?e.mean:void 0},req:["mean"],idx:1},variance:{init:function(e){return e.dev=0},value:function(e){return e.valid>1?e.dev/(e.valid-1):void 0},add:function(e,t){return e.dev+=e.mean_d*(t-e.mean)},rem:function(e,t){return e.dev-=e.mean_d*(t-e.mean)},req:["mean"],idx:1},variancep:{value:function(e){return e.valid>1?e.dev/e.valid:void 0},req:["variance"],idx:2},stdev:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(e){return e.valid>1?Math.sqrt(e.dev/e.valid):void 0},req:["variance"],idx:2},stderr:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(e){return e.cell.data.distinct(e.get)},req:["values"],idx:3},ci0:{value:function(e){return e.cell.data.ci0(e.get)},req:["values"],idx:3},ci1:{value:function(e){return e.cell.data.ci1(e.get)},req:["values"],idx:3},median:{value:function(e){return e.cell.data.q2(e.get)},req:["values"],idx:3},q1:{value:function(e){return e.cell.data.q1(e.get)},req:["values"],idx:3},q3:{value:function(e){return e.cell.data.q3(e.get)},req:["values"],idx:3},min:{init:function(e){return e.min=void 0},value:function(e){return e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min},add:function(e,t){(t<e.min||void 0===e.min)&&(e.min=t)},rem:function(e,t){t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:function(e){return e.max=void 0},value:function(e){return e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max},add:function(e,t){(t>e.max||void 0===e.max)&&(e.max=t)},rem:function(e,t){t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:function(e){return e.argmin=void 0},value:function(e){return e.argmin||e.cell.data.argmin(e.get)},add:function(e,t,n){t<e.min&&(e.argmin=n)},rem:function(e,t){t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(e){return e.argmax=void 0},value:function(e){return e.argmax||e.cell.data.argmax(e.get)},add:function(e,t,n){t>e.max&&(e.argmax=n)},rem:function(e,t){t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},Au=Object.keys(Cu);function Tu(e,t){return Cu[e](t)}function Nu(e,t){return e.idx-t.idx}function Iu(){var e=this;this.valid=0,this.missing=0,this._ops.forEach((function(t){return t.init(e)}))}function Du(e,t){var n=this;null!=e&&""!==e?e===e&&(++this.valid,this._ops.forEach((function(r){return r.add(n,e,t)}))):++this.missing}function Ru(e,t){var n=this;null!=e&&""!==e?e===e&&(--this.valid,this._ops.forEach((function(r){return r.rem(n,e,t)}))):--this.missing}function Fu(e){var t=this;return this._out.forEach((function(n){return e[n.out]=n.value(t)})),e}function Mu(e,t){var n=t||te.y,r=function(e){var t={};return e.forEach((function(e){return t[e.name]=e})),e.forEach((function e(n){n.req&&n.req.forEach((function(n){t[n]||e(t[n]=Cu[n]())}))})),Object.values(t).sort(Nu)}(e),a=e.slice().sort(Nu);function i(e){this._ops=r,this._out=a,this.cell=e,this.init()}return i.prototype.init=Iu,i.prototype.add=Du,i.prototype.rem=Ru,i.prototype.set=Fu,i.prototype.get=n,i.fields=e.map((function(e){return e.out})),i}function Pu(e){this._key=e?Object(te.u)(e):Si,this.reset()}Au.forEach((function(e){Cu[e]=function(e,t){return function(n){return Object(te.p)({name:e,out:n||e},Eu,t)}}(e,Cu[e])}));var Lu=Pu.prototype;function zu(e){lo.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Lu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Lu.add=function(e){this._add.push(e)},Lu.rem=function(e){this._rem.push(e)},Lu.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,a=this._rem,i=this._key,o=r.length,u=a.length,s=Array(o-u),c={};for(e=0;e<u;++e)c[i(a[e])]=1;for(e=0,t=0;e<o;++e)c[i(n=r[e])]?c[i(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Lu.distinct=function(e){for(var t,n=this.values(),r={},a=n.length,i=0;--a>=0;)t=e(n[a])+"",Object(te.w)(r,t)||(r[t]=1,++i);return i},Lu.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Object(te.r)(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Lu.argmin=function(e){return this.extent(e)[0]||{}},Lu.argmax=function(e){return this.extent(e)[1]||{}},Lu.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},Lu.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},Lu.quartile=function(e){return this._get===e&&this._q||(this._q=No(this.values(),e),this._get=e),this._q},Lu.q1=function(e){return this.quartile(e)[0]},Lu.q2=function(e){return this.quartile(e)[1]},Lu.q3=function(e){return this.quartile(e)[2]},Lu.ci=function(e){return this._get===e&&this._ci||(this._ci=Mo(this.values(),1e3,.05,e),this._get=e),this._ci},Lu.ci0=function(e){return this.ci(e)[0]},Lu.ci1=function(e){return this.ci(e)[1]},zu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Au},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Object(te.z)(zu,lo,{transform:function(e,t){var n=this,r=this,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return r.stamp=a.stamp,r.value&&(i||t.modified(r._inputs,!0))?(r._prev=r.value,r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(r.value=r.value||r.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),a.modifies(r._outputs),r._drop=!1!==e.drop,e.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),t.clean()&&r._drop&&a.clean(!0).runAfter((function(){return n.clean()})),r.changes(a)},cross:function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),a=n.length;function i(e){var t,i,o,u;for(t in e)for(o=e[t].tuple,i=0;i<a;++i)r[i][u=o[n[i]]]=u}i(e._prev),i(t),function i(o,u,s){var c=n[s],l=r[s++];for(var f in l){var d=o?o+"|"+f:f;u[c]=l[f],s<a?i(d,u,s):t[d]||e.cell(d,u)}}("",{},0)},init:function(e){var t=this._inputs=[],n=this._outputs=[],r={};function a(e){for(var n,a=Object(te.i)(Object(te.g)(e)),i=a.length,o=0;o<i;++o)r[n=a[o]]||(r[n]=1,t.push(n))}this._dims=Object(te.i)(e.groupby),this._dnames=this._dims.map((function(e){var t=Object(te.h)(e);return a(e),n.push(t),t})),this.cellkey=e.key?e.key:ju(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var i,o,u,s,c,l,f=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=f.length,v={};for(p!==d.length&&Object(te.o)("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)i=f[l],o=d[l],null==i&&"count"!==o&&Object(te.o)("Null aggregate field specified."),c=_u(o,s=Object(te.h)(i),h[l]),n.push(c),"count"!==o?((u=v[s])||(a(i),(u=v[s]=[]).field=i,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Tu(o,c))):this._counts.push(c);return this._measures=this._measures.map((function(e){return Mu(e,e.field)})),{}},cellkey:ju(),cell:function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,a=r.length;n.agg=Array(a);for(var i=0;i<a;++i)n.agg[i]=new r[i](n)}return n.store&&(n.data=new Pu),n},newtuple:function(e,t){for(var n=this._dnames,r=this._dims,a=r.length,i={},o=0;o<a;++o)i[n[o]]=r[o](e);return t?Ni(t.tuple,i):Ci(i)},clean:function(){var e=this.value;for(var t in e)0===e[t].num&&delete e[t]},add:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,!this._countOnly){n.store&&n.data.add(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].add(r[a].get(e),e)}},rem:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,!this._countOnly){n.store&&n.data.rem(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].rem(r[a].get(e),e)}},celltuple:function(e){var t=e.tuple,n=this._counts;e.store&&e.data.values();for(var r=0,a=n.length;r<a;++r)t[n[r]]=e.num;if(!this._countOnly)for(var i=e.agg,o=0,u=i.length;o<u;++o)i[o].set(t);return t},changes:function(e){var t,n,r,a,i=this._adds,o=this._mods,u=this._prev,s=this._drop,c=e.add,l=e.rem,f=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,a=this._alen;r<a;++r)c.push(this.celltuple(i[r])),i[r]=null;for(r=0,a=this._mlen;r<a;++r)(0===(t=o[r]).num&&s?l:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e}});function Bu(e){lo.call(this,null,e)}function Uu(e,t,n){var r=e,a=t||[],i=n||[],o={},u=0;return{add:function(e){return i.push(e)},remove:function(e){return o[r(e)]=++u},size:function(){return a.length},data:function(e,t){return u&&(a=a.filter((function(e){return!o[r(e)]})),o={},u=0),t&&e&&a.sort(e),i.length&&(a=e?Object(te.O)(e,a,i.sort(e)):a.concat(i),i=[]),a}}}function Wu(e){lo.call(this,[],e)}function Vu(e){zi.call(this,null,qu,e)}function qu(e){return this.value&&!e.modified()?this.value:Object(te.l)(e.fields,e.orders)}function $u(e){lo.call(this,null,e)}function Hu(e){lo.call(this,null,e)}Bu.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Object(te.z)(Bu,lo,{transform:function(e,t){var n,r=!1!==e.interval,a=this._bins(e),i=a.start,o=a.step,u=e.as||["bin0","bin1"],s=u[0],c=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Object(te.g)(e.field))?t.ADD_MOD:t.ADD,t.visit(n,r?function(e){var t=a(e);e[s]=t,e[c]=null==t?null:i+o*(1+(t-i)/o)}:function(e){return e[s]=a(e)}),t.modifies(r?u:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,a=Do(e),i=a.step,o=a.start,u=o+Math.ceil((a.stop-o)/i)*i;null!=(t=e.anchor)&&(n=t-(o+i*Math.floor((t-o)/i)),o+=n,u+=n);var s=function(e){var t=Object(te.eb)(r(e));return null==t?null:t<o?-1/0:t>u?1/0:(t=Math.max(o,Math.min(t,u-i)),o+i*Math.floor(1e-14+(t-o)/i))};return s.start=o,s.stop=a.stop,s.step=i,this.value=Object(te.f)(s,Object(te.g)(r),e.name||"bin_"+Object(te.h)(r))}}),Wu.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(te.z)(Wu,lo,{transform:function(e,t){var n=t.fork(t.ALL),r=Uu(Si,this.value,n.materialize(n.ADD).add),a=e.sort,i=t.changed()||a&&(e.modified("sort")||t.modified(a.fields));return n.visit(n.REM,r.remove),this.modified(i),this.value=n.source=r.data(Ii(a),i),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),Object(te.z)(Vu,zi),$u.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Object(te.z)($u,lo,{transform:function(e,t){var n=function(t){return function(n){for(var r,a=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,i)||[],s=0,c=a.length;s<c;++s)o.test(r=a[s])||t(r)}},r=this._parameterCheck(e,t),a=this._counts,i=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],c=n((function(e){return a[e]=1+(a[e]||0)})),l=n((function(e){return a[e]-=1}));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,s)},_parameterCheck:function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){var n,r,a,i=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in i)r=o[n],a=i[n]||0,!r&&a?(o[n]=r=Ci({}),r[u]=n,r[s]=a,c.add.push(r)):0===a?(r&&c.rem.push(r),i[n]=null,o[n]=null):r[s]!==a&&(r[s]=a,c.mod.push(r));return c.modifies(t)}}),Hu.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(te.z)(Hu,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],a=r[0],i=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),u=this.value;return o?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var a,i,o=[],u={},s=e.length,c=0;c<s;++c)for(u[t]=i=e[c],a=0;a<s;++a)u[n]=e[a],r(u)&&(o.push(Ci(u)),(u={})[t]=i);return o}(u,a,i,e.filter||te.ib)):n.mod=u,n.source=this.value,n.modifies(r)}});var Gu={kde:Ko,mixture:eu,normal:Go,lognormal:Zo,uniform:iu},Ku="function";function Xu(e,t){var n=e.function;Object(te.w)(Gu,n)||Object(te.o)("Unknown distribution function: "+n);var r=Gu[n]();for(var a in e)"field"===a?r.data((e.from||t()).map(e[a])):"distributions"===a?r[a](e[a].map((function(e){return Xu(e,t)}))):typeof r[a]===Ku&&r[a](e[a]);return r}function Yu(e){lo.call(this,null,e)}var Ju=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Qu={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ju},{name:"weights",type:"number",array:!0}]};function Zu(e,t){return e?e.map((function(e,n){return t[n]||Object(te.h)(e)})):null}function es(e,t,n){var r,a,i,o,u,s,c=[],l=function(e){return e(o)};if(null==t)c.push(e.map(n));else for(r={},a=0,i=e.length;a<i;++a)o=e[a],(s=r[u=t.map(l)])||(r[u]=s=[],s.dims=u,c.push(s)),s.push(n(o));return c}Yu.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ju.concat(Qu)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(te.z)(Yu,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=Xu(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),a=e.steps||e.minsteps||25,i=e.steps||e.maxsteps||200,o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&Object(te.o)("Invalid density method: "+o),e.extent||r.data||Object(te.o)("Missing density extent parameter."),o=r[o];var u=e.as||["value","density"],s=xu(o,e.extent||Object(te.q)(r.data()),a,i).map((function(e){var t={};return t[u[0]]=e[0],t[u[1]]=e[1],Ci(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});function ts(e){lo.call(this,null,e)}ts.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function ns(e){zi.call(this,null,rs,e),this.modified(!0)}function rs(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:Object(te.f)((function(n){return t(n,e)}),Object(te.g)(t),Object(te.h)(t))}function as(e){lo.call(this,[void 0,void 0],e)}function is(e,t){zi.call(this,e),this.parent=t,this.count=0}function os(e){lo.call(this,{},e),this._keys=Object(te.t)();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function us(e){zi.call(this,null,ss,e)}function ss(e){return this.value&&!e.modified()?this.value:Object(te.B)(e.name)?Object(te.i)(e.name).map((function(e){return Object(te.u)(e)})):Object(te.u)(e.name,e.as)}function cs(e){lo.call(this,Object(te.t)(),e)}function ls(e){lo.call(this,[],e)}function fs(e){lo.call(this,[],e)}function ds(e){lo.call(this,null,e)}function hs(e){lo.call(this,[],e)}Object(te.z)(ts,lo,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;for(var n,r=t.materialize(t.SOURCE).source,a=es(t.source,e.groupby,te.y),i=e.smooth||!1,o=e.field,u=e.step||function(e,t){return Object(te.Z)(Object(te.q)(e,t))/30}(r,o),s=Ii((function(e,t){return o(e)-o(t)})),c=e.as||"bin",l=a.length,f=1/0,d=-1/0,h=0;h<l;++h){var p=a[h].sort(s);n=-1;var v,m=Object(vo.a)(Po(p,u,i,o));try{for(m.s();!(v=m.n()).done;){var g=v.value;g<f&&(f=g),g>d&&(d=g),p[++n][c]=g}}catch(b){m.e(b)}finally{m.f()}}return this.value={start:f,stop:d,step:u},t.reflow(!0).modifies(c)}}),Object(te.z)(ns,zi),as.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(te.z)(as,lo,{transform:function(e,t){var n=this.value,r=e.field,a=t.changed()||t.modified(r.fields)||e.modified("field"),i=n[0],o=n[1];if((a||null==i)&&(i=1/0,o=-1/0),t.visit(a?t.SOURCE:t.ADD,(function(e){var t=Object(te.eb)(r(e));null!=t&&(t<i&&(i=t),t>o&&(o=t))})),!Number.isFinite(i)||!Number.isFinite(o)){var u=Object(te.h)(r);u&&(u=' for field "'.concat(u,'"')),t.dataflow.warn("Infinite extent".concat(u,": [").concat(i,", ").concat(o,"]")),i=o=void 0}this.value=[i,o]}}),Object(te.z)(is,zi,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),Object(te.z)(os,lo,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){var a,i,o=this.value,u=Object(te.w)(o,e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(i=r||(i=this._group[e])&&i.tuple,a=n.dataflow,u=new is(n.fork(n.NO_SOURCE),this),a.add(u).connect(t(a,e,i)),o[e]=u,this.activate(u)),u},clean:function(){var e=this.value,t=0;for(var n in e)if(0===e[n].count){var r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){var a=this._targets.filter((function(e){return e&&e.count>0}));this.initTargets(a)}},initTargets:function(e){for(var t=this._targets,n=t.length,r=e?e.length:0,a=0;a<r;++a)t[a]=e[a];for(;a<n&&null!=t[a];++a)t[a]=null;t.active=r},transform:function(e,t){var n=this,r=t.dataflow,a=e.key,i=e.subflow,o=this._keys,u=e.modified("key"),s=function(e){return n.subflow(e,i,t)};return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(function(e){var t=Si(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(function(e){var t=a(e);o.set(Si(e),t),s(t).add(e)})),u||t.modified(a.fields)?t.visit(t.MOD,(function(e){var t=Si(e),n=o.get(t),r=a(e);n===r?s(r).mod(e):(o.set(t,r),s(n).rem(e),s(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){s(o.get(Si(e))).mod(e)})),u&&t.visit(t.REFLOW,(function(e){var t=Si(e),n=o.get(t),r=a(e);n!==r&&(o.set(t,r),s(n).rem(e),s(r).add(e))})),t.clean()?r.runAfter((function(){n.clean(),o.clean()})):o.empty>r.cleanThreshold&&r.runAfter(o.clean),t}}),Object(te.z)(us,zi),cs.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(te.z)(cs,lo,{transform:function(e,t){var n=t.dataflow,r=this.value,a=t.fork(),i=a.add,o=a.rem,u=a.mod,s=e.expr,c=!0;function l(t){var n=Si(t),a=s(t,e),l=r.get(n);a&&l?(r.delete(n),i.push(t)):a||l?c&&a&&!l&&u.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(function(e){var t=Si(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(function(t){s(t,e)?i.push(t):r.set(Si(t),1)})),t.visit(t.MOD,l),e.modified()&&(c=!1,t.visit(t.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),a}}),ls.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(te.z)(ls,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=Zu(r,e.as||[]),i=e.index||null,o=a.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,u,s,c=r.map((function(t){return t(e)})),l=c.reduce((function(e,t){return Math.max(e,t.length)}),0),f=0;f<l;++f){for(u=Ai(e),t=0;t<o;++t)u[a[t]]=null==(s=c[t][f])?null:s;i&&(u[i]=f),n.add.push(u)}})),this.value=n.source=n.add,i&&n.modifies(i),n.modifies(a)}}),fs.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(te.z)(fs,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(te.h),i=e.as||["key","value"],o=i[0],u=i[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,i=0;i<s;++i)(t=Ai(e))[o]=a[i],t[u]=r[i](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(i)}}),ds.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(te.z)(ds,lo,{transform:function(e,t){var n=e.expr,r=e.as,a=e.modified(),i=e.initonly?t.ADD:a?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(i,(function(t){return t[r]=n(t,e)}))}}),Object(te.z)(hs,lo,{transform:function(e,t){var n,r,a,i=t.fork(t.ALL),o=e.generator,u=this.value,s=e.size-u.length;if(s>0){for(n=[];--s>=0;)n.push(a=Ci(o(e))),u.push(a);i.add=i.add.length?i.materialize(i.ADD).add.concat(n):n}else r=u.slice(0,-s),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(r):r,u=u.slice(-s);return i.source=this.value=u,i}});var ps={value:"value",median:Eo,mean:function(e,t){var n=0,r=0;if(void 0===t){var a,i=Object(vo.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(f){i.e(f)}finally{i.f()}}else{var u,s=-1,c=Object(vo.a)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=t(l,++s,e))&&(l=+l)>=l&&(++n,r+=l)}}catch(f){c.e(f)}finally{c.f()}}if(n)return r/n},min:bo,max:go},vs=[];function ms(e){lo.call(this,[],e)}function gs(e){zu.call(this,e)}function bs(e){lo.call(this,null,e)}function ys(e){zi.call(this,null,ws,e)}function ws(e){return this.value&&!e.modified()?this.value:Object(te.K)(e.fields,e.flat)}function xs(e){lo.call(this,[],e),this._pending=null}function Os(e,t,n){n.forEach(Ci);var r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function ks(e){lo.call(this,{},e)}function js(e){zi.call(this,null,_s,e)}function _s(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.extents,a=r.length,i=1/0,o=-1/0;for(t=0;t<a;++t)(n=r[t])[0]<i&&(i=n[0]),n[1]>o&&(o=n[1]);return[i,o]}function Ss(e){zi.call(this,null,Es,e)}function Es(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Cs(e){lo.call(this,null,e)}function As(e){zu.call(this,e)}function Ts(e){os.call(this,e)}function Ns(e){lo.call(this,null,e)}function Is(e){lo.call(this,null,e)}function Ds(e){lo.call(this,null,e)}ms.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(te.z)(ms,lo,{transform:function(e,t){var n,r,a,i,o,u,s,c,l,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||ps.value;if(null!=ps[n])return n===ps.value?(t=void 0!==e.value?e.value:0,function(){return t}):ps[n];Object(te.o)("Unrecognized imputation method: "+n)}(e),p=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),v=Object(te.h)(e.field),m=Object(te.h)(e.key),g=(e.groupby||[]).map(te.h),b=function(e,t,n,r){var a,i,o,u,s,c,l,f,d=function(e){return e(f)},h=[],p=r?r.slice():[],v={},m={};for(p.forEach((function(e,t){return v[e]=t+1})),u=0,l=e.length;u<l;++u)c=n(f=e[u]),s=v[c]||(v[c]=p.push(c)),(o=m[i=(a=t?t.map(d):vs)+""])||(o=m[i]=[],h.push(o),o.values=a),o[s-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),y=[],w=this.value,x=b.domain.length;for(o=0,c=b.length;o<c;++o)for(a=(n=b[o]).values,r=NaN,s=0;s<x;++s)if(null==n[s]){for(i=b.domain[s],f={_impute:!0},u=0,l=a.length;u<l;++u)f[g[u]]=a[u];f[m]=i,f[v]=Number.isNaN(r)?r=h(n,p):r,y.push(Ci(f))}return y.length&&(d.add=d.materialize(d.ADD).add.concat(y)),w.length&&(d.rem=d.materialize(d.REM).rem.concat(w)),this.value=y,d}}),gs.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Au},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Object(te.z)(gs,zu,{transform:function(e,t){var n,r=this,a=e.modified();return r.value&&(a||t.modified(r._inputs,!0))?(n=r.value=a?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Object(te.p)(e,n[r.cellkey(e)].tuple)})),t.reflow(a).modifies(this._outputs)},changes:function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0}}),bs.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(te.z)(bs,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,a=es(r,e.groupby,e.field),i=(e.groupby||[]).map(te.h),o=e.bandwidth,u=e.cumulative?"cdf":"pdf",s=e.as||["value","density"],c=[],l=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==u&&"cdf"!==u&&Object(te.o)("Invalid density method: "+u),"shared"===e.resolve&&(l||(l=Object(te.q)(r,e.field)),f=d=e.steps||d),a.forEach((function(t){var n=Ko(t,o)[u],r=e.counts?t.length:1;xu(n,l||Object(te.q)(t),f,d).forEach((function(e){for(var n={},a=0;a<i.length;++a)n[i[a]]=t.dims[a];n[s[0]]=e[0],n[s[1]]=e[1]*r,c.push(Ci(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),Object(te.z)(ys,zi),Object(te.z)(xs,lo,{transform:function(e,t){var n=this,r=t.dataflow;return this._pending?Os(this,t,this._pending):function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?Os(this,t,r.parse(e.values,e.format)):e.async?{async:r.request(e.url,e.format).then((function(e){return n._pending=Object(te.i)(e.data),function(e){return e.touch(n)}}))}:r.request(e.url,e.format).then((function(e){return Os(n,t,Object(te.i)(e.data))}))}}),ks.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(te.z)(ks,lo,{transform:function(e,t){var n,r,a=e.fields,i=e.index,o=e.values,u=null==e.default?null:e.default,s=e.modified(),c=a.length,l=s?t.SOURCE:t.ADD,f=t,d=e.as;return o?(r=o.length,c>1&&!d&&Object(te.o)('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==c*r&&Object(te.o)('The "as" parameter has too few output field names.'),d=d||o.map(te.h),n=function(e){for(var t,n,s=0,l=0;s<c;++s)if(null==(n=i.get(a[s](e))))for(t=0;t<r;++t,++l)e[d[l]]=u;else for(t=0;t<r;++t,++l)e[d[l]]=o[t](n)}):(d||Object(te.o)("Missing output field names."),n=function(e){for(var t,n=0;n<c;++n)t=i.get(a[n](e)),e[d[n]]=null==t?u:t}),s?f=t.reflow(!0):l|=a.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(l,n),f.modifies(d)}}),Object(te.z)(js,zi),Object(te.z)(Ss,zi),Object(te.z)(Cs,lo,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),As.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Au,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Object(te.z)(As,zu,{_transform:zu.prototype.transform,transform:function(e,t){return this._transform(function(e,t){var n=e.field,r=e.value,a=("count"===e.op?"__count__":e.op)||"sum",i=Object(te.g)(n).concat(Object(te.g)(r)),o=function(e,t,n){var r={},a=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,a.push(n))})),a.sort(te.j),t?a.slice(0,t):a}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return a})),fields:o.map((function(e){return function(e,t,n,r){return Object(te.f)((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,i)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)}}),Object(te.z)(Ts,os,{transform:function(e,t){var n=this,r=e.subflow,a=e.field,i=function(e){return n.subflow(Si(e),r,t,e)};return(e.modified("field")||a&&t.modified(Object(te.g)(a)))&&Object(te.o)("PreFacet does not support field modification."),this.initTargets(),a?(t.visit(t.MOD,(function(e){var t=i(e);a(e).forEach((function(e){return t.mod(e)}))})),t.visit(t.ADD,(function(e){var t=i(e);a(e).forEach((function(e){return t.add(Ci(e))}))})),t.visit(t.REM,(function(e){var t=i(e);a(e).forEach((function(e){return t.rem(e)}))}))):(t.visit(t.MOD,(function(e){return i(e).mod(e)})),t.visit(t.ADD,(function(e){return i(e).add(e)})),t.visit(t.REM,(function(e){return i(e).rem(e)}))),t.clean()&&t.runAfter((function(){return n.clean()})),t}}),Ns.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(te.z)(Ns,lo,{transform:function(e,t){var n,r=t.fork(t.NO_SOURCE),a=e.fields,i=Zu(e.fields,e.as||[]),o=a?function(e,t){return function(e,t,n,r){for(var a=0,i=n.length;a<i;++a)t[r[a]]=n[a](e);return t}(e,t,a,i)}:Ti;return this.value?n=this.value:(t=t.addAll(),n=this.value={}),t.visit(t.REM,(function(e){var t=Si(e);r.rem.push(n[t]),n[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,Ci({}));n[Si(e)]=t,r.add.push(t)})),t.visit(t.MOD,(function(e){r.mod.push(o(e,n[Si(e)]))})),r}}),Object(te.z)(Is,lo,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),Ds.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Rs(e){lo.call(this,null,e)}function Fs(e){lo.call(this,[],e),this.count=0}function Ms(e){lo.call(this,null,e)}function Ps(e){lo.call(this,null,e),this.modified(!0)}function Ls(e){lo.call(this,null,e)}Object(te.z)(Ds,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;var a=es(t.materialize(t.SOURCE).source,e.groupby,e.field),i=(e.groupby||[]).map(te.h),o=[],u=e.step||.01,s=e.probs||ku(u/2,1-1e-14,u),c=s.length;return a.forEach((function(e){for(var t=To(e,s),n=0;n<c;++n){for(var a={},u=0;u<i.length;++u)a[i[u]]=e.dims[u];a[r[0]]=s[n],a[r[1]]=t[n],o.push(Ci(a))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),Object(te.z)(Rs,lo,{transform:function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=Si(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=Ai(e);r[Si(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){var t=r[Si(e)];for(var a in e)t[a]=e[a],n.modifies(a);n.mod.push(t)}))),n}}),Fs.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(te.z)(Fs,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),a=e.size,i=this.value.reduce((function(e,t){return e[Si(t)]=1,e}),{}),o=this.value,u=this.count,s=0;function c(e){var t,r;o.length<a?o.push(e):(r=~~((u+1)*Ro()))<o.length&&r>=s&&(t=o[r],i[Si(t)]&&n.rem.push(t),o[r]=e),++u}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=Si(e);i[t]&&(i[t]=-1,n.rem.push(e)),--u})),o=o.filter((function(e){return-1!==i[Si(e)]}))),(t.rem.length||r)&&o.length<a&&t.source&&(s=u=o.length,t.visit(t.SOURCE,(function(e){i[Si(e)]||c(e)})),s=-1),r&&o.length>a){for(var l=o.length-a,f=0;f<l;++f)i[Si(o[f])]=-1,n.rem.push(o[f]);o=o.slice(l)}return t.mod.length&&t.visit(t.MOD,(function(e){i[Si(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,c),(t.add.length||s<0)&&(n.add=o.filter((function(e){return!i[Si(e)]}))),this.count=u,this.value=n.source=o,n}}),Ms.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(te.z)(Ms,lo,{transform:function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ku(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,Ci(t)})),n.add=t.add.concat(this.value),n}}}),Object(te.z)(Ps,lo,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});var zs=["unit0","unit1"];function Bs(e){lo.call(this,Object(te.t)(),e)}function Us(e){lo.call(this,null,e)}Ls.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:In,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:zs}]},Object(te.z)(Ls,lo,{transform:function(e,t){var n=e.field,r=!1!==e.interval,a="utc"===e.timezone,i=this._floor(e,t),o=(a?sr:ur)(i.unit).offset,u=e.as||zs,s=u[0],c=u[1],l=i.step,f=i.start||1/0,d=i.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(Object(te.g)(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(function(e){var t,a,u=n(e);null==u?(e[s]=null,r&&(e[c]=null)):(e[s]=t=a=i(u),r&&(e[c]=a=o(t,l)),t<f&&(f=t),a>d&&(d=a))})),i.start=f,i.stop=d,t.modifies(r?u:s)},_floor:function(e,t){var n="utc"===e.timezone,r=e.units?{units:e.units,step:e.step||1}:Ar({extent:e.extent||Object(te.q)(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=r.units,i=r.step,o=Rn(a),u=this.value||{},s=(n?ar:tr)(o,i);return s.unit=Object(te.W)(o),s.units=o,s.step=i,s.start=u.start,s.stop=u.stop,this.value=s}}),Object(te.z)(Bs,lo,{transform:function(e,t){var n=t.dataflow,r=e.field,a=this.value,i=function(e){return a.set(r(e),e)},o=!0;return e.modified("field")||t.modified(r.fields)?(a.clear(),t.visit(t.SOURCE,i)):t.changed()?(t.visit(t.REM,(function(e){return a.delete(r(e))})),t.visit(t.ADD,i)):o=!1,this.modified(o),a.empty>n.cleanThreshold&&n.runAfter(a.clean),t.fork()}}),Object(te.z)(Us,lo,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ii(e.sort)):t.source).map(e.field))}});var Ws={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Ws.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){return e=0},next:function(t){var n=t.data,r=t.compare,a=t.index;if(e<a){for(;a+1<n.length&&!r(n[a],n[a+1]);)++a;e=a}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||Object(te.o)("ntile num must be greater than zero.");var n=Ws.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,a=n.data;return r<a.length?e(a[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return(t=+t)>0||Object(te.o)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){var t;return{init:function(){return t=null},next:function(n){var r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){var t,n;return{init:function(){return t=null,n=-1},next:function(r){var a=r.data;return r.index<=n?t:(n=function(e,t,n){for(var r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,a,r.index))<0?(n=a.length,t=null):t=e(a[n])}}}};var Vs=Object.keys(Ws);function qs(e){var t=Object(te.i)(e.ops),n=Object(te.i)(e.fields),r=Object(te.i)(e.params),a=Object(te.i)(e.as),i=this.outputs=[],o=this.windows=[],u={},s={},c=[],l=[],f=!0;function d(e){Object(te.i)(Object(te.g)(e)).forEach((function(e){return u[e]=1}))}d(e.sort),t.forEach((function(e,t){var u=n[t],h=Object(te.h)(u),p=_u(e,h,a[t]);if(d(u),i.push(p),Object(te.w)(Ws,e))o.push(function(e,t,n,r){var a=Ws[e](t,n);return{init:a.init||te.mb,update:function(e,t){t[r]=a.next(e)}}}(e,n[t],r[t],p));else{if(null==u&&"count"!==e&&Object(te.o)("Null aggregate field specified."),"count"===e)return void c.push(p);f=!1;var v=s[h];v||((v=s[h]=[]).field=u,l.push(v)),v.push(Tu(e,p))}})),(c.length||l.length)&&(this.cell=function(e,t,n){e=e.map((function(e){return Mu(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var a=e.length,i=r.agg=Array(a),o=0;o<a;++o)i[o]=new e[o](r);if(r.store)var u=r.data=new Pu;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<a;++t)i[t].add(i[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<a;++t)i[t].rem(i[t].get(e),e)}},r.set=function(e){var a,o;for(u&&u.values(),a=0,o=t.length;a<o;++a)e[t[a]]=r.num;if(!n)for(a=0,o=i.length;a<o;++a)i[a].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<a;++e)i[e].init()},r}(l,c,f)),this.inputs=Object.keys(u)}var $s=qs.prototype;function Hs(e){lo.call(this,{},e),this._mlen=0,this._mods=[]}function Gs(e,t,n,r){var a=r.sort,i=a&&!r.ignorePeers,o=r.frame||[null,0],u=e.data(n),s=u.length,c=i?wn(a):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:a||Object(te.m)(-1)};t.init();for(var f=0;f<s;++f)Ks(l,o,f,s),i&&Xs(l,c),t.update(l,u[f])}function Ks(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Xs(e,t){var n=e.i0,r=e.i1-1,a=e.compare,i=e.data,o=i.length-1;n>0&&!a(i[n],i[n-1])&&(e.i0=t.left(i,i[n])),r<o&&!a(i[r],i[r+1])&&(e.i1=t.right(i,i[r]))}$s.init=function(){this.windows.forEach((function(e){return e.init()})),this.cell&&this.cell.init()},$s.update=function(e,t){var n,r=this.cell,a=this.windows,i=e.data,o=a&&a.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(i[n]);for(n=e.p1;n<e.i1;++n)r.add(i[n]);r.set(t)}for(n=0;n<o;++n)a[n].update(e,t)},Hs.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Vs.concat(Au)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Object(te.z)(Hs,lo,{transform:function(e,t){var n=this;this.stamp=t.stamp;var r=e.modified(),a=Ii(e.sort),i=ju(e.groupby),o=function(e){return n.group(i(e))},u=this.state;u&&!r||(u=this.state=new qs(e)),r||t.modified(u.inputs)?(this.value={},t.visit(t.SOURCE,(function(e){return o(e).add(e)}))):(t.visit(t.REM,(function(e){return o(e).remove(e)})),t.visit(t.ADD,(function(e){return o(e).add(e)})));for(var s=0,c=this._mlen;s<c;++s)Gs(this._mods[s],u,a,e);return this._mlen=0,this._mods=[],t.reflow(r).modifies(u.outputs)},group:function(e){var t=this.value[e];return t||(t=this.value[e]=Uu(Si),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});var Ys=n(14);function Js(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qs(e){this._context=e}Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Js(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Js(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Zs=function(){};function ec(e){this._context=e}ec.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Js(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tc(e){this._context=e}tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Js(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nc(e,t){this._basis=new Qs(e),this._beta=t}nc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var rc=function e(t){function n(e){return 1===t?new Qs(e):new nc(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function ac(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ic(e,t){this._context=e,this._k=(1-t)/6}ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ac(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ac(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var oc=function e(t){function n(e){return new ic(e,t)}return n.tension=function(t){return e(+t)},n}(0);function uc(e,t){this._context=e,this._k=(1-t)/6}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ac(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sc=function e(t){function n(e){return new uc(e,t)}return n.tension=function(t){return e(+t)},n}(0);function cc(e,t){this._context=e,this._k=(1-t)/6}cc.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ac(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lc=function e(t){function n(e){return new cc(e,t)}return n.tension=function(t){return e(+t)},n}(0),fc=Math.abs,dc=Math.atan2,hc=Math.cos,pc=Math.max,vc=Math.min,mc=Math.sin,gc=Math.sqrt,bc=1e-12,yc=Math.PI,wc=yc/2,xc=2*yc;function Oc(e){return e>1?0:e<-1?yc:Math.acos(e)}function kc(e){return e>=1?wc:e<=-1?-wc:Math.asin(e)}function jc(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>bc){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>bc){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function _c(e,t){this._context=e,this._alpha=t}_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Sc=function e(t){function n(e){return t?new _c(e,t):new ic(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ec(e,t){this._context=e,this._alpha=t}Ec.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Cc=function e(t){function n(e){return t?new Ec(e,t):new cc(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ac(e,t){this._context=e,this._alpha=t}Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Tc=function e(t){function n(e){return t?new Ac(e,t):new uc(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Nc(e){this._context=e}Nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Ic=function(e){return new Nc(e)};function Dc(e){this._context=e}Dc.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Rc(e){return e<0?-1:1}function Fc(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(Rc(i)+Rc(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function Mc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Pc(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function Lc(e){this._context=e}function zc(e){this._context=new Bc(e)}function Bc(e){this._context=e}function Uc(e){this._context=e}function Wc(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pc(this,this._t0,Mc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pc(this,Mc(this,n=Fc(this,e,t)),n);break;default:Pc(this,this._t0,n=Fc(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(zc.prototype=Object.create(Lc.prototype)).point=function(e,t){Lc.prototype.point.call(this,t,e)},Bc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},Uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Wc(e),a=Wc(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Vc(e,t){this._context=e,this._t=t}Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var qc=Math.PI,$c=2*qc,Hc=1e-6,Gc=$c-Hc;function Kc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Xc(){return new Kc}Kc.prototype=Xc.prototype={constructor:Kc,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Hc)if(Math.abs(l*u-s*c)>Hc&&a){var d=n-i,h=r-o,p=u*u+s*s,v=d*d+h*h,m=Math.sqrt(p),g=Math.sqrt(f),b=a*Math.tan((qc-Math.acos((p+f-v)/(2*m*g)))/2),y=b/g,w=b/m;Math.abs(y-1)>Hc&&(this._+="L"+(e+y*c)+","+(t+y*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>c*h)+","+(this._x1=e+w*u)+","+(this._y1=t+w*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>Hc||Math.abs(this._y1-c)>Hc)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%$c+$c),f>Gc?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>Hc&&(this._+="A"+n+","+n+",0,"+ +(f>=qc)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Yc=Xc,Jc=function(e){return function(){return e}};function Qc(e){return e.innerRadius}function Zc(e){return e.outerRadius}function el(e){return e.startAngle}function tl(e){return e.endAngle}function nl(e){return e&&e.padAngle}function rl(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,d=f*s-l*c;if(!(d*d<bc))return[e+(d=(l*(t-i)-f*(e-a))/d)*s,t+d*c]}function al(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/gc(u*u+s*s),l=c*s,f=-c*u,d=e+l,h=t+f,p=n+l,v=r+f,m=(d+p)/2,g=(h+v)/2,b=p-d,y=v-h,w=b*b+y*y,x=a-i,O=d*v-p*h,k=(y<0?-1:1)*gc(pc(0,x*x*w-O*O)),j=(O*y-b*k)/w,_=(-O*b-y*k)/w,S=(O*y+b*k)/w,E=(-O*b+y*k)/w,C=j-m,A=_-g,T=S-m,N=E-g;return C*C+A*A>T*T+N*N&&(j=S,_=E),{cx:j,cy:_,x01:-l,y01:-f,x11:j*(a/x-1),y11:_*(a/x-1)}}Array.prototype.slice;var il=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)};function ol(e){return e[0]}function ul(e){return e[1]}var sl=function(e,t){var n=Jc(!0),r=null,a=Ic,i=null;function o(o){var u,s,c,l=(o=il(o)).length,f=!1;for(null==r&&(i=a(c=Yc())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?ol:Jc(e),t="function"===typeof t?t:void 0===t?ul:Jc(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Jc(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Jc(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:Jc(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},cl=function(e,t,n){var r=null,a=Jc(!0),i=null,o=Ic,u=null;function s(s){var c,l,f,d,h,p=(s=il(s)).length,v=!1,m=new Array(p),g=new Array(p);for(null==i&&(u=o(h=Yc())),c=0;c<=p;++c){if(!(c<p&&a(d=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(m[f],g[f]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+e(d,c,s),g[c]=+t(d,c,s),u.point(r?+r(d,c,s):m[c],n?+n(d,c,s):g[c]))}if(h)return u=null,h+""||null}function c(){return sl().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?ol:Jc(+e),t="function"===typeof t?t:Jc(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?ul:Jc(+n),s.x=function(t){return arguments.length?(e="function"===typeof t?t:Jc(+t),r=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:Jc(+t),s):e},s.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Jc(+e),s):r},s.y=function(e){return arguments.length?(t="function"===typeof e?e:Jc(+e),n=null,s):t},s.y0=function(e){return arguments.length?(t="function"===typeof e?e:Jc(+e),s):t},s.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Jc(+e),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:Jc(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s},ll={draw:function(e,t){var n=Math.sqrt(t/yc);e.moveTo(n,0),e.arc(0,0,n,0,xc)}},fl=(Math.sqrt(1/3),Math.sin(yc/10)/Math.sin(7*yc/10));Math.sin(xc/10),Math.cos(xc/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function dl(e,t){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var hl=function(){return"undefined"!==typeof Image?Image:null},pl=wn(yn),vl=pl.right,ml=pl.left,gl=(wn(Oo).center,vl);function bl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function yl(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var wl=Symbol("implicit");function xl(){var e=new Map,t=[],n=[],r=wl;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==wl)return r;e.set(i,o=t.push(a))}return n[(o-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,i=Object(vo.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=o+"";e.has(u)||e.set(u,t.push(o))}}catch(s){i.e(s)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return xl(t,n).unknown(r)},bl.apply(a,arguments),a}var Ol=n(119);function kl(e,t,n,r){var a,i=Qe(e,t,n);switch((r=Object(Ol.formatSpecifier)(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=Object(Ol.precisionPrefix)(i,o))||(r.precision=a),Object(Ol.formatPrefix)(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=Object(Ol.precisionRound)(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=Object(Ol.precisionFixed)(i))||(r.precision=a-2*("%"===r.type))}return Object(Ol.format)(r)}var jl=n(156),_l=n(95),Sl=n(399);function El(e){return+e}var Cl=[0,1];function Al(e){return e}function Tl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Nl(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Tl(a,r),i=n(o,i)):(r=Tl(r,a),i=n(i,o)),function(e){return i(r(e))}}function Il(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Tl(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=gl(e,t,1,r)-1;return i[n](a[n](t))}}function Dl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Rl(){var e,t,n,r,a,i,o=Cl,u=Cl,s=jl.a,c=Al;function l(){var e=Math.min(o.length,u.length);return c!==Al&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Il:Nl,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),_l.a)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,El),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=Sl.a,l()},f.clamp=function(e){return arguments.length?(c=!!e||Al,l()):c!==Al},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function Fl(){return Rl()(Al,Al)}function Ml(e){var t=e.domain;return e.ticks=function(e){var n=t();return Ye(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return kl(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=Je(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Pl(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Ll(e){return Math.log(e)}function zl(e){return Math.exp(e)}function Bl(e){return-Math.log(-e)}function Ul(e){return-Math.exp(-e)}function Wl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vl(e){return function(t){return-e(-t)}}function ql(e){var t,n,r=e(Ll,zl),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Wl:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=Vl(t),n=Vl(n),e(Bl,Ul)):e(Ll,zl),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r,o=a(),u=o[0],s=o[o.length-1];(r=s<u)&&(d=u,u=s,s=d);var c,l,f,d=t(u),h=t(s),p=null==e?10:+e,v=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(l=1,c=n(d);l<i;++l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}}else for(;d<=h;++d)for(l=i-1,c=n(d);l>=1;--l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}2*v.length<p&&(v=Ye(u,s,p))}else v=Ye(d,h,Math.min(h-d,p)).map(n);return r?v.reverse():v},r.tickFormat=function(e,a){if(null==a&&(a=10===i?".0e":","),"function"!==typeof a&&(a=Object(Ol.format)(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(Pl(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function $l(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Gl(e){return e<0?-e*e:e*e}function Kl(e){var t=e(Al,Al),n=1;function r(){return 1===n?e(Al,Al):.5===n?e(Hl,Gl):e($l(n),$l(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Ml(t)}function Xl(){var e=Kl(Rl());return e.copy=function(){return Dl(e,Xl()).exponent(e.exponent())},bl.apply(e,arguments),e}function Yl(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jl(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ql(e){var t=1,n=e(Yl(t),Jl(t));return n.constant=function(n){return arguments.length?e(Yl(t=+n),Jl(t)):t},Ml(n)}function Zl(e,t,n,r,a,i){var o=[[en,1,bt],[en,5,5e3],[en,15,15e3],[en,30,3e4],[i,1,yt],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,wt],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,xt],[r,2,1728e5],[n,1,Ot],[t,1,kt],[t,3,7776e6],[e,1,jt]];function u(t,n,r){var a=Math.abs(n-t)/r,i=wn((function(e){return Object(mo.a)(e,3)[2]})).right(o,a);if(i===o.length)return e.every(Qe(t/jt,n/jt,r));if(0===i)return nn.every(Math.max(Qe(t,n,r),1));var u=Object(mo.a)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var ef=Zl(dn,pn,Lt,Mt,mn,bn),tf=Object(mo.a)(ef,2),nf=tf[0],rf=tf[1],af=Zl(Ht,Kt,Ct,St,Yt,Qt),of=Object(mo.a)(af,2),uf=of[0],sf=of[1];function cf(e){return new Date(e)}function lf(e){return e instanceof Date?+e:+new Date(+e)}function ff(e,t,n,r,a,i,o,u,s,c){var l=Fl(),f=l.invert,d=l.domain,h=c(".%L"),p=c(":%S"),v=c("%I:%M"),m=c("%I %p"),g=c("%a %d"),b=c("%b %d"),y=c("%B"),w=c("%Y");function x(e){return(s(e)<e?h:u(e)<e?p:o(e)<e?v:i(e)<e?m:r(e)<e?a(e)<e?g:b:n(e)<e?y:w)(e)}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?d(Array.from(e,lf)):d().map(cf)},l.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?x:c(t)},l.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Pl(n,e)):l},l.copy=function(){return Dl(l,ff(e,t,n,r,a,i,o,u,s,c))},l}function df(){var e,t,n,r,a,i=0,o=1,u=Al,s=!1;function c(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=Object(mo.a)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=Object(mo.a)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(jl.a),c.rangeRound=l(Sl.a),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function hf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pf(){var e=Ml(df()(Al));return e.copy=function(){return hf(e,pf())},yl.apply(e,arguments)}function vf(){var e=Kl(df());return e.copy=function(){return hf(e,vf()).exponent(e.exponent())},yl.apply(e,arguments)}var mf=n(400);function gf(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=Al,d=!1;function h(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=Object(mo.a)(n,3))[0],i=r[1],o=r[2],f=Object(mf.a)(e,[a,i,o]),h):[f(0),f(.5),f(1)]}}return h.domain=function(o){var f,d;return arguments.length?(f=o,d=Object(mo.a)(f,3),u=d[0],s=d[1],c=d[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,h):[u,s,c]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(jl.a),h.rangeRound=p(Sl.a),h.unknown=function(e){return arguments.length?(o=e,h):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,h}}function bf(){var e=Kl(gf());return e.copy=function(){return hf(e,bf()).exponent(e.exponent())},yl.apply(e,arguments)}var yf,wf,xf=n(88);function Of(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}var kf="linear",jf="log",_f="pow",Sf="sqrt",Ef="symlog",Cf="time",Af="utc",Tf="sequential",Nf="diverging",If="quantile",Df="quantize",Rf="threshold",Ff="ordinal",Mf="point",Pf="band",Lf="bin-ordinal",zf="continuous",Bf="discrete",Uf="discretizing",Wf="interpolating",Vf="temporal";function qf(){var e,t,n=xl().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=Of(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=ku(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,vl(c,f)-1),o=f===d?n:vl(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return qf().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function $f(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return $f(t())},e}var Hf=Array.prototype.map;function Gf(e){return Hf.call(e,te.eb)}var Kf=Array.prototype.slice;var Xf={};function Yf(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=Object(te.fb)(Object(te.i)(n)),r}function Jf(e,t,n){return arguments.length>1?(Xf[e]=Yf(e,t,n),this):Qf(e)?Xf[e]:void 0}function Qf(e){return Object(te.w)(Xf,e)}function Zf(e,t){var n=Xf[e];return n&&n.metadata[t]}function ed(e){return Zf(e,zf)}function td(e){return Zf(e,Bf)}function nd(e){return Zf(e,Uf)}function rd(e){return Zf(e,jf)}function ad(e){return Zf(e,Wf)}function id(e){return Zf(e,If)}Jf("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,El),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,El):[0,1],Ml(r)})),Jf(kf,(function e(){var t=Fl();return t.copy=function(){return Dl(t,e())},bl.apply(t,arguments),Ml(t)}),zf),Jf(jf,(function e(){var t=ql(Rl()).domain([1,10]);return t.copy=function(){return Dl(t,e()).base(t.base())},bl.apply(t,arguments),t}),[zf,jf]),Jf(_f,Xl,zf),Jf(Sf,(function(){return Xl.apply(null,arguments).exponent(.5)}),zf),Jf(Ef,(function e(){var t=Ql(Rl());return t.copy=function(){return Dl(t,e()).constant(t.constant())},bl.apply(t,arguments)}),zf),Jf(Cf,(function(){return bl.apply(ff(uf,sf,Ht,Kt,Ct,St,Yt,Qt,en,Fr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[zf,Vf]),Jf(Af,(function(){return bl.apply(ff(nf,rf,dn,pn,Lt,Mt,mn,bn,en,Pr).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[zf,Vf]),Jf(Tf,pf,[zf,Wf]),Jf("".concat(Tf,"-").concat(kf),pf,[zf,Wf]),Jf("".concat(Tf,"-").concat(jf),(function e(){var t=ql(df()).domain([1,10]);return t.copy=function(){return hf(t,e()).base(t.base())},yl.apply(t,arguments)}),[zf,Wf,jf]),Jf("".concat(Tf,"-").concat(_f),vf,[zf,Wf]),Jf("".concat(Tf,"-").concat(Sf),(function(){return vf.apply(null,arguments).exponent(.5)}),[zf,Wf]),Jf("".concat(Tf,"-").concat(Ef),(function e(){var t=Ql(df());return t.copy=function(){return hf(t,e()).constant(t.constant())},yl.apply(t,arguments)}),[zf,Wf]),Jf("".concat(Nf,"-").concat(kf),(function e(){var t=Ml(gf()(Al));return t.copy=function(){return hf(t,e())},yl.apply(t,arguments)}),[zf,Wf]),Jf("".concat(Nf,"-").concat(jf),(function e(){var t=ql(gf()).domain([.1,1,10]);return t.copy=function(){return hf(t,e()).base(t.base())},yl.apply(t,arguments)}),[zf,Wf,jf]),Jf("".concat(Nf,"-").concat(_f),bf,[zf,Wf]),Jf("".concat(Nf,"-").concat(Sf),(function(){return bf.apply(null,arguments).exponent(.5)}),[zf,Wf]),Jf("".concat(Nf,"-").concat(Ef),(function e(){var t=Ql(gf());return t.copy=function(){return hf(t,e()).constant(t.constant())},yl.apply(t,arguments)}),[zf,Wf]),Jf(If,(function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=_o(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[gl(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=Object(vo.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(yn),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},bl.apply(o,arguments)}),[Uf,If]),Jf(Df,(function e(){var t,n=0,r=1,a=1,i=[.5],o=[0,1];function u(e){return null!=e&&e<=e?o[gl(i,e,0,a)]:t}function s(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return u}return u.domain=function(e){var t,a;return arguments.length?(t=e,a=Object(mo.a)(t,2),n=a[0],r=a[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(a=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},bl.apply(Ml(u),arguments)}),Uf),Jf(Rf,(function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[gl(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},bl.apply(i,arguments)}),Uf),Jf(Lf,(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(gl(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=Gf(e),r):t.slice()},r.range=function(e){return arguments.length?(n=Kf.call(e),r):n.slice()},r.tickFormat=function(e,n){return kl(t[0],Object(te.W)(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[Bf,Uf]),Jf(Ff,xl,Bf),Jf(Pf,qf,Bf),Jf(Mf,(function(){return $f(qf().paddingInner(1))}),Bf);var od=["clamp","base","constant","exponent"];function ud(e,t){var n=t[0],r=Object(te.W)(t)-n;return function(t){return e(n+t*r)}}function sd(e,t,n){return Object(mf.a)(fd(t||"rgb",n),e)}function cd(e,t){for(var n=new Array(t),r=t+1,a=0;a<t;)n[a]=e(++a/r);return n}function ld(e,t,n){var r,a,i,o=n-t;return o&&Number.isFinite(o)?(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),i=Jf(a)().domain([t,n]).range([0,1]),od.forEach((function(t){return e[t]?i[t](e[t]()):0})),i):Object(te.m)(.5)}function fd(e,t){var n=xf[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function dd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function hd(e,t){for(var n in e)vd(n,t(e[n]))}var pd={};function vd(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(pd[e]=t,this):pd[e]}hd({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},dd),hd({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return sd(dd(e))}));var md="symbol",gd=function(e){return Object(te.B)(e)?e.map((function(e){return String(e)})):String(e)},bd=function(e,t){return e[1]-t[1]},yd=function(e,t){return t[1]-e[1]};function wd(e,t,n){var r;return Object(te.G)(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(Object(te.Z)(e.domain())/n||1)))),Object(te.H)(t)&&(r=t.step,t=t.interval),Object(te.J)(t)&&(t=e.type===Cf?ur(t):e.type==Af?sr(t):Object(te.o)("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function xd(e,t,n){var r=e.range(),a=r[0],i=Object(te.W)(r),o=bd;if(a>i&&(r=i,i=a,a=r,o=yd),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],Object(te.W)(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}function Od(e,t){return e.bins?xd(e,e.bins):e.ticks?e.ticks(t):e.domain()}function kd(e,t,n,r,a,i){var o=t.type,u=gd;if(o===Cf||a===Cf)u=e.timeFormat(r);else if(o===Af||a===Af)u=e.utcFormat(r);else if(rd(o)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=jd(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function jd(e,t,n){var r=Od(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var _d=(yf={},Object(pt.a)(yf,If,"quantiles"),Object(pt.a)(yf,Df,"thresholds"),Object(pt.a)(yf,Rf,"domain"),yf),Sd=(wf={},Object(pt.a)(wf,If,"quantiles"),Object(pt.a)(wf,Df,"domain"),wf);function Ed(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=Object(te.W)(e),t}(e.bins):e.type===jf?jd(e,t,!0):_d[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[_d[e.type]]()):Od(e,t)}function Cd(e,t,n,r,a,i,o){var u=Sd[t.type]&&i!==Cf&&i!==Af?function(e,t,n){var r,a=t[Sd[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):kd(e,t,n,a,i,o);return r===md&&function(e){return _d[e.type]||e.bins}(t)?Ad(u):"discrete"===r?Nd(u):Id(u)}var Ad=function(e){return function(t,n,r){var a=Td(r[n+1],Td(r.max,1/0)),i=Dd(t,e),o=Dd(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},Td=function(e,t){return null!=e?e:t},Nd=function(e){return function(t,n){return n?e(t):null}},Id=function(e){return function(t){return e(t)}},Dd=function(e,t){return Number.isFinite(e)?t(e):null};function Rd(e,t,n,r){var a=r||t.type;return Object(te.J)(n)&&Zf(a,Vf)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==Cf?n||a!==Af?Cd(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function Fd(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=Rd(e,t,n.format,n.formatType);if(nd(t.type)){var i=Ed(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(td(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(Object(te.W)(l)))}var Md=0;var Pd="p_";function Ld(e){return e&&e.gradient}function zd(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?Pd:"";return a||(a=e.id="gradient_"+Md++,"radial"===r?(e.x1=Bd(e.x1,.5),e.y1=Bd(e.y1,.5),e.r1=Bd(e.r1,0),e.x2=Bd(e.x2,.5),e.y2=Bd(e.y2,.5),e.r2=Bd(e.r2,.5),i=Pd):(e.x1=Bd(e.x1,0),e.y1=Bd(e.y1,0),e.x2=Bd(e.x2,1),e.y2=Bd(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function Bd(e,t){return null!=e?e:t}function Ud(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}var Wd={basis:{curve:function(e){return new Qs(e)}},"basis-closed":{curve:function(e){return new ec(e)}},"basis-open":{curve:function(e){return new tc(e)}},bundle:{curve:rc,tension:"beta",value:.85},cardinal:{curve:oc,tension:"tension",value:0},"cardinal-open":{curve:sc,tension:"tension",value:0},"cardinal-closed":{curve:lc,tension:"tension",value:0},"catmull-rom":{curve:Sc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Cc,tension:"alpha",value:.5},"catmull-rom-open":{curve:Tc,tension:"alpha",value:.5},linear:{curve:Ic},"linear-closed":{curve:function(e){return new Dc(e)}},monotone:{horizontal:function(e){return new zc(e)},vertical:function(e){return new Lc(e)}},natural:{curve:function(e){return new Uc(e)}},step:{curve:function(e){return new Vc(e,.5)}},"step-after":{curve:function(e){return new Vc(e,1)}},"step-before":{curve:function(e){return new Vc(e,0)}}};function Vd(e,t,n){var r=Object(te.w)(Wd,e)&&Wd[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var qd={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},$d=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Hd(e){var t,n,r,a,i,o,u,s,c,l,f=[],d=e.slice().replace($d[0],"###$1").split($d[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=(t=d[u]).slice(1).trim().replace($d[2],"$1###$2").replace($d[3],"$1###$2").split($d[4]),r=[i=t.charAt(0)],s=0,l=n.length;s<l;++s)(a=+n[s])===a&&r.push(a);if(o=qd[i.toLowerCase()],r.length-1>o){var h=r.length;for(s=1,f.push([i].concat(r.slice(s,s+=o))),i="M"===i?"L":"m"===i?"l":i;s<h;s+=o)f.push([i].concat(r.slice(s,s+o)))}else f.push(r)}return f}var Gd=Math.PI/180,Kd=Math.PI/2,Xd=2*Math.PI,Yd=Math.sqrt(3)/2,Jd={},Qd={},Zd=[].join;function eh(e){var t=Zd.call(e);if(Qd[t])return Qd[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,h=c*u,p=Math.cos(a),v=Math.sin(a),m=Math.cos(i),g=Math.sin(i),b=.5*(i-a),y=Math.sin(.5*b),w=8/3*y*y/Math.sin(b),x=n+p-w*v,O=r+v+w*p,k=n+m,j=r+g,_=k+w*g,S=j-w*m;return Qd[t]=[l*x+f*O,d*x+h*O,l*_+f*S,d*_+h*S,l*k+f*j,d*k+h*j]}var th=["l",0,0,0,0,0,0,0];function nh(e,t,n){var r=th[0]=e[0];if("a"===r||"A"===r)th[1]=t*e[1],th[2]=n*e[2],th[3]=e[3],th[4]=e[4],th[5]=e[5],th[6]=t*e[6],th[7]=n*e[7];else if("h"===r||"H"===r)th[1]=t*e[1];else if("v"===r||"V"===r)th[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)th[a]=(a%2==1?t:n)*e[a];return th}function rh(e,t,n,r,a,i){var o,u,s,c,l,f=null,d=0,h=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var m=0,g=t.length;m<g;++m){switch(o=t[m],1===a&&1===i||(o=nh(o,a,i)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],e.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],e.moveTo(d+n,h+r);break;case"c":u=d+o[5],s=h+o[6],p=d+o[3],v=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,v+r,u+n,s+r),d=u,h=s;break;case"C":d=o[5],h=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,d+n,h+r);break;case"s":u=d+o[3],s=h+o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,d+o[1]+n,h+o[2]+r,u+n,s+r),p=d+o[1],v=h+o[2],d=u,h=s;break;case"S":u=o[3],s=o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"q":u=d+o[3],s=h+o[4],p=d+o[1],v=h+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"t":u=d+o[1],s=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,v=h):"t"===f[0]?(p=2*d-c,v=2*h-l):"q"===f[0]&&(p=2*d-p,v=2*h-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=s,p=(d=u)+o[1],v=h+o[2];break;case"T":u=o[1],s=o[2],p=2*d-p,v=2*h-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"a":ah(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":ah(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":e.closePath()}f=o}}function ah(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=Zd.call(arguments);if(Jd[c])return Jd[c];var l=o*Gd,f=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+f*(s-t)*.5,p=d*(s-t)*.5-f*(u-e)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=d/n,g=f/n,b=-f/r,y=d/r,w=m*u+g*s,x=b*u+y*s,O=m*e+g*t,k=b*e+y*t,j=1/((O-w)*(O-w)+(k-x)*(k-x))-.25;j<0&&(j=0);var _=Math.sqrt(j);i==a&&(_=-_);var S=.5*(w+O)-_*(k-x),E=.5*(x+k)+_*(O-w),C=Math.atan2(x-E,w-S),A=Math.atan2(k-E,O-S)-C;A<0&&1===i?A+=Xd:A>0&&0===i&&(A-=Xd);for(var T=Math.ceil(Math.abs(A/(Kd+.001))),N=[],I=0;I<T;++I){var D=C+I*A/T,R=C+(I+1)*A/T;N[I]=[S,E,D,R,n,r,f,d]}return Jd[c]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=eh(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var ih=.5773502691896257,oh={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Xd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n,a=r-n*ih,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n,a=r-n*ih;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Yd*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function uh(e){return Object(te.w)(oh,e)?oh[e]:function(e){if(!Object(te.w)(sh,e)){var t=Hd(e);sh[e]={draw:function(e,n){rh(e,t,0,0,Math.sqrt(n)/2)}}}return sh[e]}(e)}var sh={};var ch=.448084975506;function lh(e){return e.x}function fh(e){return e.y}function dh(e){return e.width}function hh(e){return e.height}function ph(e){return"function"===typeof e?e:function(){return+e}}function vh(e,t,n){return Math.max(t,Math.min(e,n))}function mh(){var e=lh,t=fh,n=dh,r=hh,a=ph(0),i=a,o=a,u=a,s=null;function c(c,l,f){var d,h=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),m=+r.call(this,c),g=Math.min(v,m)/2,b=vh(+a.call(this,c),0,g),y=vh(+i.call(this,c),0,g),w=vh(+o.call(this,c),0,g),x=vh(+u.call(this,c),0,g);if(s||(s=d=Yc()),b<=0&&y<=0&&w<=0&&x<=0)s.rect(h,p,v,m);else{var O=h+v,k=p+m;s.moveTo(h+b,p),s.lineTo(O-y,p),s.bezierCurveTo(O-ch*y,p,O,p+ch*y,O,p+y),s.lineTo(O,k-x),s.bezierCurveTo(O,k-ch*x,O-ch*x,k,O-x,k),s.lineTo(h+w,k),s.bezierCurveTo(h+ch*w,k,h,k-ch*w,h,k-w),s.lineTo(h,p+b),s.bezierCurveTo(h,p+ch*b,h+ch*b,p,h+b,p),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=ph(t),c):e},c.y=function(e){return arguments.length?(t=ph(e),c):t},c.width=function(e){return arguments.length?(n=ph(e),c):n},c.height=function(e){return arguments.length?(r=ph(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=ph(e),i=null!=t?ph(t):a,u=null!=n?ph(n):a,o=null!=r?ph(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}function gh(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,h=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-d,o-h),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+d,o+h),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,Xd);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,d=!1;for(null==s&&(s=l=Yc()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&(d=!d)&&(a=0),d&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function bh(e,t){return null!=e?e:t}var yh=function(e){return e.x||0},wh=function(e){return e.y||0},xh=function(e){return!(!1===e.defined)},Oh=function(){var e=Qc,t=Zc,n=Jc(0),r=null,a=el,i=tl,o=nl,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=a.apply(this,arguments)-wc,h=i.apply(this,arguments)-wc,p=fc(h-d),v=h>d;if(u||(u=s=Yc()),f<l&&(c=f,f=l,l=c),f>bc)if(p>xc-bc)u.moveTo(f*hc(d),f*mc(d)),u.arc(0,0,f,d,h,!v),l>bc&&(u.moveTo(l*hc(h),l*mc(h)),u.arc(0,0,l,h,d,v));else{var m,g,b=d,y=h,w=d,x=h,O=p,k=p,j=o.apply(this,arguments)/2,_=j>bc&&(r?+r.apply(this,arguments):gc(l*l+f*f)),S=vc(fc(f-l)/2,+n.apply(this,arguments)),E=S,C=S;if(_>bc){var A=kc(_/l*mc(j)),T=kc(_/f*mc(j));(O-=2*A)>bc?(w+=A*=v?1:-1,x-=A):(O=0,w=x=(d+h)/2),(k-=2*T)>bc?(b+=T*=v?1:-1,y-=T):(k=0,b=y=(d+h)/2)}var N=f*hc(b),I=f*mc(b),D=l*hc(x),R=l*mc(x);if(S>bc){var F,M=f*hc(y),P=f*mc(y),L=l*hc(w),z=l*mc(w);if(p<yc&&(F=rl(N,I,L,z,M,P,D,R))){var B=N-F[0],U=I-F[1],W=M-F[0],V=P-F[1],q=1/mc(Oc((B*W+U*V)/(gc(B*B+U*U)*gc(W*W+V*V)))/2),$=gc(F[0]*F[0]+F[1]*F[1]);E=vc(S,(l-$)/(q-1)),C=vc(S,(f-$)/(q+1))}}k>bc?C>bc?(m=al(L,z,N,I,f,C,v),g=al(M,P,D,R,f,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<S?u.arc(m.cx,m.cy,C,dc(m.y01,m.x01),dc(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,C,dc(m.y01,m.x01),dc(m.y11,m.x11),!v),u.arc(0,0,f,dc(m.cy+m.y11,m.cx+m.x11),dc(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,C,dc(g.y11,g.x11),dc(g.y01,g.x01),!v))):(u.moveTo(N,I),u.arc(0,0,f,b,y,!v)):u.moveTo(N,I),l>bc&&O>bc?E>bc?(m=al(D,R,M,P,l,-E,v),g=al(N,I,L,z,l,-E,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),E<S?u.arc(m.cx,m.cy,E,dc(m.y01,m.x01),dc(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,E,dc(m.y01,m.x01),dc(m.y11,m.x11),!v),u.arc(0,0,l,dc(m.cy+m.y11,m.cx+m.x11),dc(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,E,dc(g.y11,g.x11),dc(g.y01,g.x01),!v))):u.arc(0,0,l,x,w,v):u.lineTo(D,R)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-yc/2;return[hc(r)*n,mc(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Jc(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Jc(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:Jc(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Jc(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:Jc(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:Jc(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:Jc(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),kh=cl().x(yh).y1(wh).y0((function(e){return(e.y||0)+(e.height||0)})).defined(xh),jh=cl().y(wh).x1(yh).x0((function(e){return(e.x||0)+(e.width||0)})).defined(xh),_h=sl().x(yh).y(wh).defined(xh),Sh=mh().x(yh).y(wh).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return bh(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return bh(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return bh(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return bh(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),Eh=function(e,t){var n=null;function r(){var r;if(n||(n=r=Yc()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:Jc(e||ll),t="function"===typeof t?t:Jc(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:Jc(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:Jc(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return uh(e.shape||"circle")})).size((function(e){return bh(e.size,64)})),Ch=gh().x(yh).y(wh).defined(xh).size((function(e){return e.size||1}));function Ah(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Th(e,t,n,r){return Sh.context(e)(t,n,r)}var Nh=1;function Ih(){Nh=1}function Dh(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+Nh++),o=a.clipping[i]||(a.clipping[i]={id:i});return Object(te.E)(r)?o.path=r(null):Ah(n)?o.path=Th(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function Rh(e){this.clear(),e&&this.union(e)}function Fh(e){this.mark=e,this.bounds=this.bounds||new Rh}function Mh(e){Fh.call(this,e),this.items=this.items||[]}function Ph(e){this._pending=0,this._loader=e||yi()}function Lh(e){e._pending+=1}function zh(e){e._pending-=1}function Bh(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}Rh.prototype={clone:function(){return new Rh(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},Object(te.z)(Mh,Fh),Ph.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return Lh(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return zh(t),e})).catch((function(){return zh(t),null}))},loadImage:function(e){var t=this,n=hl();return Lh(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=Object(te.w)(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return zh(t)},a.onerror=function(){return zh(t)},a.src=r,a})).catch((function(e){return zh(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var Uh,Wh,Vh,qh,$h,Hh,Gh,Kh,Xh=Xd-1e-8,Yh=function(e,t){return Uh.add(e,t)},Jh=function(e,t){return Yh(Wh=e,Vh=t)},Qh=function(e){return Yh(e,Uh.y1)},Zh=function(e){return Yh(Uh.x1,e)},ep=function(e,t){return $h*e+Gh*t},tp=function(e,t){return Hh*e+Kh*t},np=function(e,t){return Yh(ep(e,t),tp(e,t))},rp=function(e,t){return Jh(ep(e,t),tp(e,t))};function ap(e,t){return Uh=e,t?(qh=t*Gd,$h=Kh=Math.cos(qh),Hh=Math.sin(qh),Gh=-Hh):($h=Kh=1,qh=Hh=Gh=0),ip}var ip={beginPath:function(){},closePath:function(){},moveTo:rp,lineTo:rp,rect:function(e,t,n,r){qh?(np(e+n,t),np(e+n,t+r),np(e,t+r),rp(e,t)):(Yh(e+n,t+r),Jh(e,t))},quadraticCurveTo:function(e,t,n,r){var a=ep(e,t),i=tp(e,t),o=ep(n,r),u=tp(n,r);op(Wh,a,o,Qh),op(Vh,i,u,Zh),Jh(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=ep(e,t),u=tp(e,t),s=ep(n,r),c=tp(n,r),l=ep(a,i),f=tp(a,i);up(Wh,o,s,l,Qh),up(Vh,u,c,f,Zh),Jh(l,f)},arc:function(e,t,n,r,a,i){if(r+=qh,a+=qh,Wh=n*Math.cos(a)+e,Vh=n*Math.sin(a)+t,Math.abs(a-r)>Xh)Yh(e-n,t-n),Yh(e+n,t+n);else{var o,u,s=function(r){return Yh(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=Xd)<0&&(r+=Xd),(a%=Xd)<0&&(a+=Xd),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=Xd,o=r-r%Kd,u=0;u<4&&o>a;++u,o-=Kd)s(o);else for(o=r-r%Kd+Kd,u=0;u<4&&o<a;++u,o+=Kd)s(o)}}};function op(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function up(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(sp(c,e,t,n,r)),0<l&&l<1&&a(sp(l,e,t,n,r))}function sp(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var cp=(cp=dl(1,1))?cp.getContext("2d"):null,lp=new Rh;function fp(e){return function(t,n){if(!cp)return!0;e(cp,t),lp.clear().union(t.bounds).intersect(n).round();for(var r=lp.x1,a=lp.y1,i=lp.x2,o=lp.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(cp.isPointInPath(s,u))return!0;return!1}}function dp(e,t){return t.contains(e.x||0,e.y||0)}function hp(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(lp.set(n,r,n+a,r+i))}function pp(e,t){var n=e.x||0,r=e.y||0;return vp(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function vp(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,h=r-t,p=a-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(i=-h,o=-(c-t)),1===s&&(i=h,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=d-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>m)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<m&&(m=u)}}return!0}function mp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function gp(e,t){return null==e?t:e}function bp(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function yp(e,t,n){return Ld(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+gp(t.x1,.5)*a,n.y1+gp(t.y1,.5)*i,Math.max(a,i)*gp(t.r1,0),n.x1+gp(t.x2,.5)*a,n.y1+gp(t.y2,.5)*i,Math.max(a,i)*gp(t.r2,.5));else{var o=gp(t.x1,0),u=gp(t.y1,0),s=gp(t.x2,1),c=gp(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=dl(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=bp(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return bp(r,t.stops)}(e,n,t.bounds):n}function wp(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=yp(e,t,t.fill),!0)}var xp=[];function Op(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=yp(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||xp),e.lineDashOffset=t.strokeDashOffset||0),!0))}function kp(e,t){return e.zindex-t.zindex||e.index-t.index}function jp(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(kp)}function _p(e,t){var n,r,a=e.items;if(a&&a.length){var i=jp(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function Sp(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=jp(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function Ep(e){return function(t,n,r){_p(n,(function(n){r&&!r.intersects(n.bounds)||Cp(e,t,n,n)}))}}function Cp(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(mp(t,n),n.fill&&wp(t,n,a)&&t.fill(),n.stroke&&Op(t,n,a)&&t.stroke()))}function Ap(e){return e=e||te.ib,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,Sp(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function Tp(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function Np(e){return Ap(Tp(e))}function Ip(e,t){return"translate("+e+","+t+")"}function Dp(e){return"rotate("+e+")"}function Rp(e){return Ip(e.x||0,e.y||0)}function Fp(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=Gd),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return Ip(e.x||0,e.y||0)+(e.angle?" "+Dp(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(ap(e,n.angle),n),Bh(e,n).translate(n.x||0,n.y||0)},draw:Ep(r),pick:Np(r),isect:n||fp(r)}}var Mp=Fp("arc",(function(e,t){return Oh.context(e)(t)}));function Pp(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a,i=Tp(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(ap(e),r),Bh(e,r[0]))},draw:(a=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||Cp(a,e,t.items[0],t.items)}),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null)},isect:dp,tip:n}}var Lp=Pp("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?jh:kh).curve(Vd(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function zp(e,t){e.beginPath(),Ah(t)?Th(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Bp(e){var t=gp(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Up(e,t){var n=Bp(t);e("d",Th(null,t,n,n))}function Wp(e,t,n,r){var a=Bp(t);e.beginPath(),Th(e,t,(n||0)+a,(r||0)+a)}var Vp=Tp(Wp),qp=Tp(Wp,!1),$p=Tp(Wp,!0);var Hp={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",Rp(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Bh(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;_p(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(Wp(e,t,a,i),mp(e,t),t.fill&&wp(e,t,u)&&e.fill(),t.stroke&&!o&&Op(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&zp(e,t),n&&n.translate(-a,-i),_p(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(Wp(e,t,a,i),mp(e,t),Op(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return Sp(t,(function(c){var l,f,d,h=c.bounds;if(!h||h.contains(a,i)){f=c.x||0,d=c.y||0;var p=f+(c.width||0),v=d+(c.height||0),m=c.clip;if(!m||!(a<f||a>p||i<d||i>v)){if(e.save(),e.translate(f,d),f=a-f,d=i-d,m&&Ah(c)&&!$p(e,c,u,s))return e.restore(),null;var g=c.strokeForeground,b=!1!==t.interactive;return b&&g&&c.stroke&&qp(e,c,u,s)?(e.restore(),c):(!(l=Sp(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&b&&(c.fill||!g&&c.stroke)&&Vp(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:hp,content:function(e,t,n){e("clip-path",t.clip?Dh(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),Up(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Up(e,t):e("d","")}},Gp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Kp(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function Xp(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function Yp(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function Jp(e,t){return"center"===e?t/2:"right"===e?t:0}function Qp(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Zp={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=Kp(t,n),a=Xp(t,r),i=Yp(t,r),o=(t.x||0)-Jp(t.align,a),u=(t.y||0)-Qp(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Gp["xmlns:xlink"],"xlink:href"),e("transform",Ip(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=Xp(t,n),a=Yp(t,n),i=(t.x||0)-Jp(t.align,r),o=(t.y||0)-Qp(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;_p(t,(function(t){if(!n||n.intersects(t.bounds)){var a=Kp(t,r),i=Xp(t,a),o=Yp(t,a);if(0!==i&&0!==o){var u,s,c,l,f=(t.x||0)-Jp(t.align,i),d=(t.y||0)-Qp(t.baseline,o);!1!==t.aspect&&(s=a.width/a.height,c=t.width/t.height,s===s&&c===c&&s!==c&&(c<s?(d+=(o-(l=i/s))/2,o=l):(f+=(i-(l=o*s))/2,i=l))),(a.complete||a.toDataURL)&&(mp(e,t),e.globalAlpha=null!=(u=t.opacity)?u:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(a,f,d,i,o))}}}))},pick:Ap(),isect:te.ib,get:Kp,xOffset:Jp,yOffset:Qp},ev=Pp("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return _h.curve(Vd(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function tv(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*Gd,s=t.pathCache;s&&s.path===n||((t.pathCache=s=Hd(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),rh(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):rh(e,s,r,a,i,o)}var nv={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return Ip(e.x||0,e.y||0)+(e.angle?" "+Dp(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return tv(ap(e,t.angle),t)?e.set(0,0,0,0):Bh(e,t,!0)},draw:Ep(tv),pick:Np(tv),isect:fp(tv)};function rv(e,t){e.beginPath(),Th(e,t)}var av={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Th(null,t))},bound:function(e,t){var n,r;return Bh(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:Ep(rv),pick:Np(rv),isect:hp};function iv(e,t,n){var r,a,i,o;return!(!t.stroke||!Op(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var ov={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",Rp(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Bh(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){_p(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&iv(e,t,r)&&(mp(e,t),e.stroke())}}))},pick:Ap((function(e,t,n,r){return!!e.isPointInStroke&&(iv(e,t,1)&&e.isPointInStroke(n,r))})),isect:pp},uv=Fp("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),sv=Fp("symbol",(function(e,t){return Eh.context(e)(t)}),dp),cv=Object(te.N)(),lv={height:mv,measureWidth:pv,estimateWidth:dv,width:dv,canvas:fv};function fv(e){lv.width=e&&cp?pv:dv}function dv(e,t){return hv(wv(e,t),mv(e))}function hv(e,t){return~~(.8*e.length*t)}function pv(e,t){return mv(e)<=0||!(t=wv(e,t))?0:vv(t,Ov(e))}function vv(e,t){var n="(".concat(t,") ").concat(e),r=cv.get(n);return void 0===r&&(cp.font=t,r=cp.measureText(e).width,cv.set(n,r)),r}function mv(e){return null!=e.fontSize?+e.fontSize||0:11}function gv(e){return null!=e.lineHeight?e.lineHeight:mv(e)+2}function bv(e){return t=e.lineBreak&&e.text&&!Object(te.B)(e.text)?e.text.split(e.lineBreak):e.text,Object(te.B)(t)?t.length>1?t:t[0]:t;var t}function yv(e){var t=bv(e);return(Object(te.B)(t)?t.length-1:0)*gv(e)}function wv(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(lv.width===pv){var t=Ov(e);return function(e){return vv(e,t)}}var n=mv(e);return function(e){return hv(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function xv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Ov(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+mv(e)+"px "+xv(e,t)}function kv(e){var t=e.baseline,n=mv(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*gv(e):"line-bottom"===t?.29*n-.5*gv(e):0)}fv(!0);var jv={left:"start",center:"middle",right:"end"},_v=new Rh;function Sv(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-Kd,n+=a*Math.cos(t),r+=a*Math.sin(t)),_v.x1=n,_v.y1=r,_v}function Ev(e,t,n){var r,a=lv.height(t),i=t.align,o=Sv(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+kv(t)-Math.round(.8*a),f=bv(t);if(Object(te.B)(f)?(a+=gv(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,lv.width(t,n))}),0)):r=lv.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*Gd,u,s);else if(2===n)return e.rotatedPoints(t.angle*Gd,u,s);return e}var Cv={arc:Mp,area:Lp,group:Hp,image:Zp,line:ev,path:nv,rect:av,rule:ov,shape:uv,symbol:sv,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+kv(t),i=Sv(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",jv[t.align]||"start"),s?(n=Ip(o,u)+" "+Dp(s),(r||a)&&(n+=" "+Ip(r,a))):n=Ip(o+r,u+a),e("transform",n)},bound:Ev,draw:function(e,t,n){_p(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=Ov(t),e.textAlign=t.align||"left",a=(r=Sv(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*Gd),a=i=0),a+=t.dx||0,i+=(t.dy||0)+kv(t),s=bv(t),mp(e,t),Object(te.B)(s))for(u=gv(t),o=0;o<s.length;++o)c=wv(t,s[o]),t.fill&&wp(e,t,l)&&e.fillText(c,a,i),t.stroke&&Op(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=wv(t,s),t.fill&&wp(e,t,l)&&e.fillText(c,a,i),t.stroke&&Op(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:Ap((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Sv(t),u=o.x1,s=o.y1,c=Ev(_v,t,1),l=-t.angle*Gd,f=Math.cos(l),d=Math.sin(l),h=f*a-d*i+(u-f*u+d*s),p=d*a+f*i+(s-d*u-f*s);return c.contains(h,p)})),isect:function(e,t){var n=Ev(_v,e,2);return vp(t,n[0],n[1],n[2],n[3])||vp(t,n[0],n[1],n[4],n[5])||vp(t,n[4],n[5],n[6],n[7])||vp(t,n[2],n[3],n[6],n[7])}},trail:Pp("trail",(function(e,t){return Ch.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null}))};function Av(e,t,n){var r=Cv[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new Rh),e,n)}var Tv={mark:null};function Nv(e,t,n){var r,a,i,o,u=Cv[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?i=c[0]:(Tv.mark=e,i=Tv),o=Av(i,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Rh,l)for(r=0,a=c.length;r<a;++r)t.union(Av(c[r],s,n));return e.bounds=t}var Iv=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Dv(e,t){return JSON.stringify(e,Iv,t)}function Rv(e){return Fv("string"===typeof e?JSON.parse(e):e)}function Fv(e){var t,n,r,a=e.marktype,i=e.items;if(i)for(n=0,r=i.length;n<r;++n)t=a?"mark":"group",i[n][t]=e,i[n].zindex&&(i[n][t].zdirty=!0),"group"===(a||t)&&Fv(i[n]);return a&&Nv(e),e}function Mv(e){arguments.length?this.root=Rv(e):(this.root=Pv({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Mh(this.root)])}function Pv(e,t){var n={bounds:new Rh,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Lv(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function zv(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Bv(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=Lv(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function Uv(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Wv(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Vv(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function qv(e,t){this._active=null,this._handlers={},this._loader=e||yi(),this._tooltip=t||$v}function $v(e,t,n,r){e.element().setAttribute("title",r||"")}function Hv(e){this._el=null,this._bgcolor=null,this._loader=new Ph(e)}Mv.prototype={toJSON:function(e){return Dv(this.root,e||0)},mark:function(e,t,n){var r=Pv(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},qv.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,Object(Ys.a)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,Object(Ys.a)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=Lv(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=Cv[o.marktype]).tip){for((i=Vv(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},Hv.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var Gv="dragenter",Kv="dragleave",Xv="dragover",Yv="mousedown",Jv="mousemove",Qv="mouseout",Zv="mouseover",em="click",tm="mousewheel",nm="touchstart",rm="touchmove",am="touchend",im=["keydown","keypress","keyup",Gv,Kv,Xv,Yv,"mouseup",Jv,Qv,Zv,em,"dblclick","wheel",tm,nm,rm,am],om=Jv,um=Qv,sm=em;function cm(e,t){qv.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function lm(e,t){(function(e){return e===nm||e===rm||e===am?[nm,rm,am]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function fm(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function dm(e){return function(t){this.fire(e,t),this._active=null}}Object(te.z)(cm,qv,{initialize:function(e,t,n){var r=this;return this._canvas=e&&zv(e,"canvas"),[em,Yv,Jv,Qv,Kv].forEach((function(e){return lm(r,e)})),qv.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:im,DOMMouseScroll:function(e){this.fire(tm,e)},mousemove:fm(Jv,Zv,Qv),dragover:fm(Xv,Gv,Kv),mouseout:dm(Qv),dragleave:dm(Kv),mousedown:function(e){this._down=this._active,this.fire(Yv,e)},click:function(e){this._down===this._active&&(this.fire(em,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nm,e,!0)},touchmove:function(e){this.fire(rm,e,!0)},touchend:function(e){this.fire(am,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===sm&&r&&r.href?this.handleHref(t,r,r.href):e!==om&&e!==um||this.handleTooltip(t,r,e!==um),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(lm(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=Vv(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return Cv[e.marktype].pick.call(this,i,e,t,n,r,a)}});var hm="undefined"!==typeof window&&window.devicePixelRatio||1;function pm(e){Hv.call(this,e),this._options={},this._redraw=!1,this._dirty=new Rh,this._tempb=new Rh}var vm=Hv.prototype;function mm(e,t){qv.call(this,e,t);var n=this;n._hrefHandler=gm(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=gm(n,(function(e,t){n.handleTooltip(e,t,e.type!==um)}))}Object(te.z)(pm,Hv,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:dl(1,1,this._options.type),e&&this._canvas&&(Uv(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),vm.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(vm.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?hm:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||Object(te.o)("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){var t,n,r,a=this.context(),i=this._origin,o=this._width,u=this._height,s=this._dirty,c=(t=i,n=o,r=u,(new Rh).set(0,0,n,r).translate(-t[0],-t[1]));a.save();var l=this._redraw||s.empty()?(this._redraw=!1,c.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(a,c.intersect(s),i);return this.clear(-i[0],-i[1],o,u),this.draw(a,e,l),a.restore(),s.clear(),this},draw:function(e,t,n){var r=Cv[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Object(te.E)(n)?(e.beginPath(),n(e),e.clip()):zp(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var gm=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};Object(te.z)(mm,qv,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(sm,this._hrefHandler),r.removeEventListener(om,this._tooltipHandler),r.removeEventListener(um,this._tooltipHandler)),this._svg=r=e&&zv(e,"svg"),r&&(r.addEventListener(sm,this._hrefHandler),r.addEventListener(om,this._tooltipHandler),r.addEventListener(um,this._tooltipHandler)),qv.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:gm(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var bm="aria-hidden",ym="aria-label",wm="role",xm="aria-roledescription",Om="graphics-object",km="graphics-symbol",jm=function(e,t,n){var r;return r={},Object(pt.a)(r,wm,e),Object(pt.a)(r,xm,t),Object(pt.a)(r,ym,n||void 0),r},_m=Object(te.fb)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Sm={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?Nm(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(td(u)?"discrete":u," scale")+" with ".concat(Fd(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?Nm(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Object(te.W)(e)}(i))+" with ".concat(Fd(s,u,e));var c}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(Tm(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(Tm(e),"'")}}},Em={ariaRole:wm,ariaRoleDescription:xm,description:ym};function Cm(e,t){var n=!1===t.aria;if(e(bm,n||void 0),n||null==t.description)for(var r in Em)e(Em[r],void 0);else{var a=t.mark.marktype;e(ym,t.description),e(wm,t.ariaRole||("group"===a?Om:km)),e(xm,t.ariaRoleDescription||"".concat(a," mark"))}}function Am(e){return!1===e.aria?Object(pt.a)({},bm,!0):_m[e.role]?null:Sm[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return jm(t.role||km,t.desc,n.description||r(n))}catch(a){return null}}(e,Sm[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return jm(n?Om:km,"".concat(t," mark container"),e.description)}(e)}function Tm(e){return Object(te.i)(e.text).join(" ")}function Nm(e){try{return Object(te.i)(Object(te.W)(e.items).items[0].text).join(" ")}catch(t){return null}}var Im=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function Dm(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(Im(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=Im(e),u},toString:function(){return e}};return u}var Rm=function(e){return Fm(Dm(),e)+""};function Fm(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes())for(var i=t.childNodes,o=i.length,u=0;u<o;u++){var s=i[u];3===s.nodeType?e.text(s.nodeValue):Fm(e,s)}return e.close()}var Mm={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Pm={fill:"none","stroke-miterlimit":10},Lm="http://www.w3.org/2000/xmlns/",zm=Gp.xmlns;function Bm(e){Hv.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Um=Hv.prototype;function Wm(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function Vm(e,t,n){var r,a,i;if("radial"===t.gradient){var o=Bv(e,n++,"pattern",zm);Jm(o,{id:Pd+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Jm(o=Bv(o,0,"rect",zm),{width:1,height:1,fill:"url(".concat(Zm(),"#").concat(t.id,")")}),Jm(e=Bv(e,n++,"radialGradient",zm),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Jm(e=Bv(e,n++,"linearGradient",zm),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=Bv(e,r,"stop",zm)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return Uv(e,r),n}function qm(e,t,n){return(e=Bv(e,n,"clipPath",zm)).setAttribute("id",t.id),t.path?Bv(e,0,"path",zm).setAttribute("d",t.path):Jm(Bv(e,0,"rect",zm),{x:0,y:0,width:t.width,height:t.height}),Uv(e,1),n+1}function $m(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=Lv(i=t.ownerDocument,r,zm),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=Lv(i,"path",zm);o.appendChild(u),u.__data__=e;var s=Lv(i,"g",zm);o.appendChild(s),s.__data__=e;var c=Lv(i,"path",zm);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Object(te.z)(Bm,Hv,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=Bv(e,0,"svg",zm),this._svg.setAttributeNS(Lm,"xmlns",zm),this._svg.setAttributeNS(Lm,"xmlns:xlink",Gp["xmlns:xlink"]),this._svg.setAttribute("version",Gp.version),this._svg.setAttribute("class","marks"),Uv(e,1),this._root=Bv(this._svg,0,"g",zm),Jm(this._root,Pm),Uv(this._svg,1)),this.background(this._bgcolor),Um.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Um.background.apply(this,arguments)},resize:function(e,t,n,r){return Um.resize.call(this,e,t,n,r),this._svg&&(Jm(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),Jm(e=Bv(t,0,"rect",zm),{width:this._width,height:this._height,fill:n}));var r=Rm(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),Uv(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=Cv[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Wm(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,Wm(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a=this._svg,i=Cv[t.marktype],o=!1===t.interactive?"none":null,u="g"===i.tag,s=null,c=0,l=$m(t,e,n,"g",a);l.setAttribute("class",Wv(t));var f=Am(t);for(var d in f)Qm(l,d,f[d]);u||Qm(l,"pointer-events",o),Qm(l,"clip-path",t.clip?Dh(this,t,t.group):null);var h=function(e){var t=r.isDirty(e),n=$m(e,l,s,i.tag,a);t&&(r._update(i,n,e),u&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;_p(n,(function(n){r=e.mark(t,n,r),++a})),Uv(t,1+a)}(r,n,e)),s=n,++c};return i.nested?t.items.length&&h(t.items[0]):_p(t,h),Uv(l,c),l},_update:function(e,t,n){Hm=t,Gm=t.__values__,Cm(Xm,n),e.attr(Xm,n,this);var r=Km[e.type];r&&r.call(this,e,t,n),Hm&&this.style(Hm,n)},style:function(e,t){if(null!=t)for(var n in Mm){var r="font"===n?xv(t):t[n];if(r!==Gm[n]){var a=Mm[n];null==r?e.removeAttribute(a):(Ld(r)&&(r=zd(r,this._defs.gradient,Zm())),e.setAttribute(a,r+"")),Gm[n]=r}}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=Bv(e,1,"defs",zm)),r=Vm(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=Bv(e,1,"defs",zm)),r=qm(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):Uv(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var Hm=null,Gm=null,Km={group:function(e,t,n){var r=Hm=t.childNodes[2];Gm=r.__values__,e.foreground(Xm,n,this),Gm=t.__values__,Hm=t.childNodes[1],e.content(Xm,n,this);var a=Hm=t.childNodes[0];e.background(Xm,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==Gm.events&&(Qm(r,"pointer-events",i),Qm(a,"pointer-events",i),Gm.events=i),n.strokeForeground&&n.stroke){var o=n.fill;Qm(r,"display",null),this.style(a,n),Qm(a,"stroke",null),o&&(n.fill=null),Gm=r.__values__,this.style(r,n),o&&(n.fill=o),Hm=null}else Qm(r,"display","none")},image:function(e,t,n){!1===n.smooth?(Ym(t,"image-rendering","optimizeSpeed"),Ym(t,"image-rendering","pixelated")):Ym(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=bv(n);Object(te.B)(u)?(r=(a=u.map((function(e){return wv(n,e)}))).join("\n"))!==Gm.text&&(Uv(t,0),i=t.ownerDocument,o=gv(n),a.forEach((function(e,r){var a=Lv(i,"tspan",zm);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),Gm.text=r):(a=wv(n,u))!==Gm.text&&(t.textContent=a,Gm.text=a),Qm(t,"font-family",xv(n)),Qm(t,"font-size",mv(n)+"px"),Qm(t,"font-style",n.fontStyle),Qm(t,"font-variant",n.fontVariant),Qm(t,"font-weight",n.fontWeight)}};function Xm(e,t,n){t!==Gm[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(Hm,e,t,n):Qm(Hm,e,t),Gm[e]=t)}function Ym(e,t,n){n!==Gm[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Gm[t]=n)}function Jm(e,t){for(var n in t)Qm(e,n,t[n])}function Qm(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Zm(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function eg(e){Hv.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Object(te.z)(eg,Hv,{svg:function(){return this._text},_render:function(e){var t=Dm();t.open("svg",Object(te.p)({},Gp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Pm,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=Cv[t.marktype],a=r.tag,i=[Cm,r.attr];e.open("g",{class:Wv(t),"clip-path":t.clip?Dh(this,t,t.group):null},Am(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=bv(o);if(Object(te.B)(s))for(var c={x:0,dy:gv(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(wv(o,s[l])).close();else e.text(wv(o,s))}else if("g"===a){var f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),_p(o,(function(t){return n.mark(e,t)})),e.close(),f&&h?(d&&(o.fill=null),o.stroke=h,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),d&&(o.fill=d)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):_p(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=xv(t),e["font-size"]=mv(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var i in Mm){var o=t[i],u=Mm[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(Ld(o)&&(o=zd(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:Pd+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var tg="canvas",ng="none",rg={Canvas:tg,PNG:"png",SVG:"svg",None:ng},ag={};function ig(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ag[e]=t,this):ag[e]}function og(e,t,n){var r=[],a=(new Rh).union(t),i=e.marktype;return i?ug(e,a,n,r):"group"===i?sg(e,a,n,r):Object(te.o)("Intersect scene must be mark node or group item.")}function ug(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)sg(a[u],t,n,r);else for(var s=Cv[i].isect;u<o;++u){var c=a[u];cg(c,t,s)&&r.push(c)}}return r}function sg(e,t,n,r){n&&n(e.mark)&&cg(e,t,Cv.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)ug(a[s],t,n,r);t.translate(o,u)}return r}function cg(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}ag.canvas=ag.png={renderer:pm,headless:pm,handler:cm},ag.svg={renderer:Bm,headless:eg,handler:mm},ag.none={};var lg=new Rh;function fg(e){var t=e.clip;if(Object(te.E)(t))t(ap(lg.clear()));else{if(!t)return;lg.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(lg)}function dg(e,t,n){return e===t||("path"===n?hg(e,t):e instanceof Date&&t instanceof Date?+e===+t:Object(te.G)(e)&&Object(te.G)(t)?Math.abs(e-t)<=1e-9:e&&t&&(Object(te.H)(e)||Object(te.H)(t))?function(e,t){var n,r,a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(a.sort(),i.sort(),r=a.length-1;r>=0;r--)if(a[r]!=i[r])return!1;for(r=a.length-1;r>=0;r--)if(!dg(e[n=a[r]],t[n],n))return!1;return typeof e===typeof t}(e,t):e==t)}function hg(e,t){return dg(Hd(e),Hd(t))}function pg(){Ih(),Md=0}var vg="top",mg="left",gg="right",bg="bottom",yg="start",wg="middle",xg="end",Og="group",kg="axis",jg="title",_g="frame",Sg="scope",Eg="legend",Cg="row-header",Ag="row-footer",Tg="row-title",Ng="column-header",Ig="column-footer",Dg="column-title",Rg="padding",Fg="fit",Mg="fit-x",Pg="fit-y",Lg="none",zg="all",Bg="each",Ug="flush",Wg="column",Vg="row";function qg(e){lo.call(this,null,e)}function $g(e,t,n){return t(e.bounds.clear(),e,n)}Object(te.z)(qg,lo,{transform:function(e,t){var n,r=t.dataflow,a=e.mark,i=a.marktype,o=Cv[i],u=o.bound,s=a.bounds;if(o.nested)a.items.length&&r.dirty(a.items[0]),s=$g(a,u),a.items.forEach((function(e){e.bounds.clear().union(s)}));else if(i===Og||e.modified())switch(t.visit(t.MOD,(function(e){return r.dirty(e)})),s.clear(),a.items.forEach((function(e){return s.union($g(e,u))})),a.role){case kg:case Eg:case jg:t.reflow()}else n=t.changed(t.REM),t.visit(t.ADD,(function(e){s.union($g(e,u))})),t.visit(t.MOD,(function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union($g(e,u))})),n&&(s.clear(),a.items.forEach((function(e){return s.union(e.bounds)})));return fg(a),t.modifies("bounds")}});var Hg=":vega_identifier:";function Gg(e){lo.call(this,0,e)}function Kg(e){lo.call(this,null,e)}function Xg(e){lo.call(this,null,e)}Gg.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(te.z)(Gg,lo,{transform:function(e,t){var n,r=(n=t.dataflow)._signals[Hg]||(n._signals[Hg]=n.add(0)),a=e.as,i=r.value;return t.visit(t.ADD,(function(e){return e[a]=e[a]||++i})),r.set(this.value=i),t}}),Object(te.z)(Kg,lo,{transform:function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===Og?Mh:Fh;return t.visit(t.ADD,(function(e){return r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});var Yg={parity:function(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function(e,t){var n;return e.filter((function(e,r){return r&&Jg(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)}))}},Jg=function(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)},Qg=function(e,t){for(var n,r=1,a=e.length,i=e[0].bounds;r<a;i=n,++r)if(Jg(i,n=e[r].bounds,t))return!0},Zg=function(e){var t=e.bounds;return t.width()>1&&t.height()>1},eb=function(e){return e.forEach((function(e){return e.opacity=1})),e},tb=function(e,t){return e.reflow(t.modified()).modifies("opacity")};function nb(e){lo.call(this,null,e)}Object(te.z)(Xg,lo,{transform:function(e,t){var n,r,a=Yg[e.method]||Yg.parity,i=e.separation||0,o=t.materialize(t.SOURCE).source;if(o&&o.length){if(!e.method)return e.modified("method")&&(eb(o),t=tb(t,e)),t;if((o=o.filter(Zg)).length){if(e.sort&&(o=o.slice().sort(e.sort)),n=eb(o),t=tb(t,e),n.length>=3&&Qg(n,i)){do{n=a(n,i)}while(n.length>=3&&Qg(n,i));n.length<3&&!Object(te.W)(o).opacity&&(n.length>1&&(Object(te.W)(n).opacity=0),Object(te.W)(o).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(r=function(e,t,n){var r=e.range(),a=new Rh;return t===vg||t===bg?a.set(r[0],-1/0,r[1],1/0):a.set(-1/0,r[0],1/0,r[1]),a.expand(n||1),function(e){return a.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((function(e){r(e)||(e.opacity=0)})));var u=n[0].mark.bounds.clear();return o.forEach((function(e){e.opacity&&u.union(e.bounds)})),t}}}}),Object(te.z)(nb,lo,{transform:function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){return n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var rb=new Rh;function ab(e,t,n){return e[t]===n?0:(e[t]=n,1)}function ib(e){var t=e.items[0].orient;return t===mg||t===gg}function ob(e,t,n,r){var a,i,o=t.items[0],u=o.datum,s=null!=o.translate?o.translate:.5,c=o.orient,l=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(u),f=o.range,d=o.offset,h=o.position,p=o.minExtent,v=o.maxExtent,m=u.title&&o.items[l[2]].items[0],g=o.titlePadding,b=o.bounds,y=m&&yv(m),w=0,x=0;switch(rb.clear().union(b),b.clear(),(a=l[0])>-1&&b.union(o.items[a].bounds),(a=l[1])>-1&&b.union(o.items[a].bounds),c){case vg:w=h||0,x=-d,i=Math.max(p,Math.min(v,-b.y1)),b.add(0,-i).add(f,0),m&&ub(e,m,i,g,y,0,-1,b);break;case mg:w=-d,x=h||0,i=Math.max(p,Math.min(v,-b.x1)),b.add(-i,0).add(0,f),m&&ub(e,m,i,g,y,1,-1,b);break;case gg:w=n+d,x=h||0,i=Math.max(p,Math.min(v,b.x2)),b.add(0,0).add(i,f),m&&ub(e,m,i,g,y,1,1,b);break;case bg:w=h||0,x=r+d,i=Math.max(p,Math.min(v,b.y2)),b.add(0,0).add(f,i),m&&ub(e,m,i,g,0,0,1,b);break;default:w=o.x,x=o.y}return Bh(b.translate(w,x),o),ab(o,"x",w+s)|ab(o,"y",x+s)&&(o.bounds=rb,e.dirty(o),o.bounds=b,e.dirty(o)),o.mark.bounds.clear().union(b)}function ub(e,t,n,r,a,i,o,u){var s=t.bounds;if(t.auto){var c=o*(n+a+r),l=0,f=0;e.dirty(t),i?l=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(s.translate(-l,-f)),e.dirty(t)}u.union(s)}var sb=function(e,t){return Math.floor(Math.min(e,t))},cb=function(e,t){return Math.ceil(Math.max(e,t))};function lb(e){return(new Rh).set(0,0,e.width||0,e.height||0)}function fb(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function db(e,t,n){var r=Object(te.H)(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function hb(e){return e<0?Math.ceil(-e):0}function pb(e,t,n){var r,a,i,o,u,s,c,l,f,d,h,p=!n.nodirty,v=n.bounds===Ug?lb:fb,m=rb.set(0,0,0,0),g=db(n.align,Wg),b=db(n.align,Vg),y=db(n.padding,Wg),w=db(n.padding,Vg),x=n.columns||t.length,O=x<=0?1:Math.ceil(t.length/x),k=t.length,j=Array(k),_=Array(x),S=0,E=Array(k),C=Array(O),A=0,T=Array(k),N=Array(k),I=Array(k);for(a=0;a<x;++a)_[a]=0;for(a=0;a<O;++a)C[a]=0;for(a=0;a<k;++a)s=t[a],u=I[a]=v(s),s.x=s.x||0,T[a]=0,s.y=s.y||0,N[a]=0,i=a%x,o=~~(a/x),S=Math.max(S,c=Math.ceil(u.x2)),A=Math.max(A,l=Math.ceil(u.y2)),_[i]=Math.max(_[i],c),C[o]=Math.max(C[o],l),j[a]=y+hb(u.x1),E[a]=w+hb(u.y1),p&&e.dirty(t[a]);for(a=0;a<k;++a)a%x===0&&(j[a]=0),a<x&&(E[a]=0);if(g===Bg)for(i=1;i<x;++i){for(h=0,a=i;a<k;a+=x)h<j[a]&&(h=j[a]);for(a=i;a<k;a+=x)j[a]=h+_[i-1]}else if(g===zg){for(h=0,a=0;a<k;++a)a%x&&h<j[a]&&(h=j[a]);for(a=0;a<k;++a)a%x&&(j[a]=h+S)}else for(g=!1,i=1;i<x;++i)for(a=i;a<k;a+=x)j[a]+=_[i-1];if(b===Bg)for(o=1;o<O;++o){for(h=0,r=(a=o*x)+x;a<r;++a)h<E[a]&&(h=E[a]);for(a=o*x;a<r;++a)E[a]=h+C[o-1]}else if(b===zg){for(h=0,a=x;a<k;++a)h<E[a]&&(h=E[a]);for(a=x;a<k;++a)E[a]=h+A}else for(b=!1,o=1;o<O;++o)for(r=(a=o*x)+x;a<r;++a)E[a]+=C[o-1];for(f=0,a=0;a<k;++a)f=j[a]+(a%x?f:0),T[a]+=f-t[a].x;for(i=0;i<x;++i)for(d=0,a=i;a<k;a+=x)d+=E[a],N[a]+=d-t[a].y;if(g&&db(n.center,Wg)&&O>1)for(a=0;a<k;++a)(f=(u=g===zg?S:_[a%x])-I[a].x2-t[a].x-T[a])>0&&(T[a]+=f/2);if(b&&db(n.center,Vg)&&1!==x)for(a=0;a<k;++a)(d=(u=b===zg?A:C[~~(a/x)])-I[a].y2-t[a].y-N[a])>0&&(N[a]+=d/2);for(a=0;a<k;++a)m.union(I[a].translate(T[a],N[a]));switch(f=db(n.anchor,"x"),d=db(n.anchor,"y"),db(n.anchor,Wg)){case xg:f-=m.width();break;case wg:f-=m.width()/2}switch(db(n.anchor,Vg)){case xg:d-=m.height();break;case wg:d-=m.height()/2}for(f=Math.round(f),d=Math.round(d),m.clear(),a=0;a<k;++a)t[a].mark.bounds.clear();for(a=0;a<k;++a)(s=t[a]).x+=T[a]+=f,s.y+=N[a]+=d,m.union(s.mark.bounds.union(s.bounds.translate(T[a],N[a]))),p&&e.dirty(s);return m}function vb(e,t,n){var r,a,i,o,u,s,c,l=function(e){for(var t,n,r,a,i,o,u,s=e.items,c=s.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(u=(o=s[l]).items,o.marktype===Og)switch(o.role){case kg:case Eg:case jg:break;case Cg:(t=f.rowheaders).push.apply(t,Object(Ys.a)(u));break;case Ag:(n=f.rowfooters).push.apply(n,Object(Ys.a)(u));break;case Ng:(r=f.colheaders).push.apply(r,Object(Ys.a)(u));break;case Ig:(a=f.colfooters).push.apply(a,Object(Ys.a)(u));break;case Tg:f.rowtitle=u[0];break;case Dg:f.coltitle=u[0];break;default:(i=f.marks).push.apply(i,Object(Ys.a)(u))}return f}(t),f=l.marks,d=n.bounds===Ug?mb:gb,h=n.offset,p=n.columns||f.length,v=p<=0?1:Math.ceil(f.length/p),m=v*p,g=pb(e,f,n);g.empty()&&g.set(0,0,0,0),l.rowheaders&&(s=db(n.headerBand,Vg,null),r=bb(e,l.rowheaders,f,p,v,-db(h,"rowHeader"),sb,0,d,"x1",0,p,1,s)),l.colheaders&&(s=db(n.headerBand,Wg,null),a=bb(e,l.colheaders,f,p,p,-db(h,"columnHeader"),sb,1,d,"y1",0,1,p,s)),l.rowfooters&&(s=db(n.footerBand,Vg,null),i=bb(e,l.rowfooters,f,p,v,db(h,"rowFooter"),cb,0,d,"x2",p-1,p,1,s)),l.colfooters&&(s=db(n.footerBand,Wg,null),o=bb(e,l.colfooters,f,p,p,db(h,"columnFooter"),cb,1,d,"y2",m-p,1,p,s)),l.rowtitle&&(u=db(n.titleAnchor,Vg),c=db(h,"rowTitle"),c=u===xg?i+c:r-c,s=db(n.titleBand,Vg,.5),yb(e,l.rowtitle,c,0,g,s)),l.coltitle&&(u=db(n.titleAnchor,Wg),c=db(h,"columnTitle"),c=u===xg?o+c:a-c,s=db(n.titleBand,Wg,.5),yb(e,l.coltitle,c,1,g,s))}function mb(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function gb(e,t){return e.bounds[t]}function bb(e,t,n,r,a,i,o,u,s,c,l,f,d,h){var p,v,m,g,b,y,w,x,O,k=n.length,j=0,_=0;if(!k)return j;for(p=l;p<k;p+=f)n[p]&&(j=o(j,s(n[p],c)));if(!t.length)return j;for(t.length>a&&(e.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),j+=i,v=0,g=t.length;v<g;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(p=l,v=0,g=t.length;v<g;++v,p+=f){for(b=(y=t[v]).mark.bounds,m=p;m>=0&&null==(w=n[m]);m-=d);u?(x=null==h?w.x:Math.round(w.bounds.x1+h*w.bounds.width()),O=j):(x=j,O=null==h?w.y:Math.round(w.bounds.y1+h*w.bounds.height())),b.union(y.bounds.translate(x-(y.x||0),O-(y.y||0))),y.x=x,y.y=O,e.dirty(y),_=o(_,b[c])}return _}function yb(e,t,n,r,a,i){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(a.x1+i*a.width()):u=Math.round(a.y1+i*a.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function wb(e,t,n,r,a,i,o){var u=function(e,t){var n=e[t]||{};return function(t,r){return null!=n[t]?n[t]:null!=e[t]?e[t]:r}}(n,t),s=function(e,t){var n=-1/0;return e.forEach((function(e){null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,u("offset",0)),c=u("anchor",yg),l=c===xg?1:c===wg?.5:0,f={align:Bg,bounds:u("bounds",Ug),columns:"vertical"===u("direction")?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case mg:f.anchor={x:Math.floor(r.x1)-s,column:xg,y:l*(o||r.height()+2*r.y1),row:c};break;case gg:f.anchor={x:Math.ceil(r.x2)+s,y:l*(o||r.height()+2*r.y1),row:c};break;case vg:f.anchor={y:Math.floor(a.y1)-s,row:xg,x:l*(i||a.width()+2*a.x1),column:c};break;case bg:f.anchor={y:Math.ceil(a.y2)+s,x:l*(i||a.width()+2*a.x1),column:c};break;case"top-left":f.anchor={x:s,y:s};break;case"top-right":f.anchor={x:i-s,y:s,column:xg};break;case"bottom-left":f.anchor={x:s,y:o-s,row:xg};break;case"bottom-right":f.anchor={x:i-s,y:o-s,column:xg,row:xg}}return f}function xb(e,t){var n,r,a=t.items[0],i=a.datum,o=a.orient,u=a.bounds,s=a.x,c=a.y;return a._bounds?a._bounds.clear().union(u):a._bounds=u.clone(),u.clear(),function(e,t,n){var r=t.padding,a=r-n.x,i=r-n.y;if(t.datum.title){var o=t.items[1].items[0],u=o.anchor,s=t.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case mg:a+=Math.ceil(o.bounds.width())+s;break;case gg:case bg:break;default:i+=o.bounds.height()+s}switch((a||i)&&kb(e,n,a,i),o.orient){case mg:l+=Ob(t,n,o,u,1,1);break;case gg:c+=Ob(t,n,o,xg,0,0)+s,l+=Ob(t,n,o,u,1,1);break;case bg:c+=Ob(t,n,o,u,0,0),l+=Ob(t,n,o,xg,-1,0,1)+s;break;default:c+=Ob(t,n,o,u,0,0)}(c||l)&&kb(e,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(kb(e,n,-c,0),kb(e,o,-c,0))}else(a||i)&&kb(e,n,a,i)}(e,a,a.items[0].items[0]),u=function(e,t){return e.items.forEach((function(e){return t.union(e.bounds)})),t.x1=e.padding,t.y1=e.padding,t}(a,u),n=2*a.padding,r=2*a.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),"symbol"===i.type&&function(e){var t=e.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(a.items[0].items[0].items[0].items),o!==Lg&&(a.x=s=0,a.y=c=0),a.width=n,a.height=r,Bh(u.set(s,c,s+n,c+r),a),a.mark.bounds.clear().union(u),a}function Ob(e,t,n,r,a,i,o){var u="symbol"!==e.datum.type,s=n.datum.vgrad,c=(!u||!i&&s||o?t:t.items[0]).bounds[a?"y2":"x2"]-e.padding,l=s&&i?c:0,f=s&&i?0:c,d=a<=0?0:yv(n);return Math.round(r===yg?l:r===xg?f-d:.5*(c-d))}function kb(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function jb(e){lo.call(this,null,e)}function _b(e,t){var n=0;if(void 0===t){var r,a=Object(vo.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;(i=+i)&&(n+=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(vo.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;(c=+t(c,++u,e))&&(n+=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function Sb(e){lo.call(this,null,e)}function Eb(e){lo.call(this,null,e)}function Cb(){return Ci({})}function Ab(e){lo.call(this,null,e)}function Tb(e){lo.call(this,[],e)}Object(te.z)(jb,lo,{transform:function(e,t){var n,r=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&vb(r,t,e.layout),function(e,t,n){var r,a,i,o,u,s=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),f=(new Rh).set(0,0,c,l),d=f.clone(),h=f.clone(),p=[];for(o=0,u=s.length;o<u;++o)switch((a=s[o]).role){case kg:(ib(a)?d:h).union(ob(e,a,c,l));break;case jg:r=a;break;case Eg:p.push(xb(e,a));break;case _g:case Sg:case Cg:case Ag:case Tg:case Ng:case Ig:case Dg:d.union(a.bounds),h.union(a.bounds);break;default:f.union(a.bounds)}if(p.length){var v={};for(var m in p.forEach((function(e){(i=e.orient||gg)!==Lg&&(v[i]||(v[i]=[])).push(e)})),v){var g=v[m];pb(e,g,wb(g,m,n.legends,d,h,c,l))}p.forEach((function(t){var r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===Fg)switch(t.orient){case mg:case gg:f.add(r.x1,0).add(r.x2,0);break;case vg:case bg:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,a){var i,o=t.items[0],u=o.frame,s=o.orient,c=o.anchor,l=o.offset,f=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],p=s===mg||s===gg?r:n,v=0,m=0,g=0,b=0,y=0;if(u!==Og?s===mg?(v=a.y2,p=a.y1):s===gg?(v=a.y1,p=a.y2):(v=a.x1,p=a.x2):s===mg&&(v=r,p=0),i=c===yg?v:c===xg?p:(v+p)/2,h&&h.text){switch(s){case vg:case bg:y=d.bounds.height()+f;break;case mg:b=d.bounds.width()+f;break;case gg:b=-d.bounds.width()-f}rb.clear().union(h.bounds),rb.translate(b-(h.x||0),y-(h.y||0)),ab(h,"x",b)|ab(h,"y",y)&&(e.dirty(h),h.bounds.clear().union(rb),h.mark.bounds.clear().union(rb),e.dirty(h)),rb.clear().union(h.bounds)}else rb.clear();switch(rb.union(d.bounds),s){case vg:m=i,g=a.y1-rb.height()-l;break;case mg:m=a.x1-rb.width()-l,g=i;break;case gg:m=a.x2+rb.width()+l,g=i;break;case bg:m=i,g=a.y2+l;break;default:m=o.x,g=o.y}return ab(o,"x",m)|ab(o,"y",g)&&(rb.translate(m,g),e.dirty(o),o.bounds.clear().union(rb),t.bounds.clear().union(rb),e.dirty(o)),o.bounds}(e,r,c,l,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){var a=r.autosize||{},i=a.type;if(e._autosize<1||!i)return;var o=e._width,u=e._height,s=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-s)),h=Math.max(0,Math.ceil(n.y2-l));if(a.contains===Rg){var p=e.padding();o-=p.left+p.right,u-=p.top+p.bottom}i===Lg?(c=0,f=0,s=o,l=u):i===Fg?(s=Math.max(0,o-c-d),l=Math.max(0,u-f-h)):i===Mg?(s=Math.max(0,o-c-d),u=l+f+h):i===Pg?(o=s+c+d,l=Math.max(0,u-f-h)):"pad"===i&&(o=s+c+d,u=l+f+h);e._resizeView(o,u,s,l,[c,f],a.resize)}(e,t,f,n)}(r,t,e)})),(n=e.mark.group)&&"legend-entry"!==n.mark.role?t.reflow():t}}),Object(te.z)(Sb,lo,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,i=e.scale,o=wd(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),u=e.format||kd(n,i,o,e.formatSpecifier,e.formatType,!!e.values),s=e.values?xd(i,e.values,o):Od(i,o);return a&&(r.rem=a),a=s.map((function(e,t){return Ci({index:t/(s.length-1||1),value:e,label:u(e)})})),e.extra&&a.length&&a.push(Ci({index:-1,extra:{value:a[0].value},label:""})),r.source=a,r.add=a,this.value=a,r}}),Object(te.z)(Eb,lo,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.item||Cb,i=e.key||Si,o=this.value;return Object(te.B)(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(i))&&Object(te.o)("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=function(e){var t=Object(te.t)().test((function(e){return e.exit}));return t.lookup=function(n){return t.get(e(n))},t}(i)),t.visit(t.ADD,(function(e){var t=i(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=a(e),o.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=i(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=i(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),Object(te.z)(Ab,lo,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,a=e.encoders,i=t.encode;if(Object(te.B)(i)){if(!n.changed()&&!i.every((function(e){return a[e]})))return t.StopPropagation;i=i[0],n.encode=null}var o="enter"===i,u=a.update||te.s,s=a.enter||te.s,c=a.exit||te.s,l=(i&&!o?a[i]:u)||te.s;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){s(t,e),u(t,e)})),n.modifies(s.output),n.modifies(u.output),l!==te.s&&l!==u&&(t.visit(t.ADD,(function(t){l(t,e)})),n.modifies(l.output))),t.changed(t.REM)&&c!==te.s&&(t.visit(t.REM,(function(t){c(t,e)})),n.modifies(c.output)),o||l!==te.s){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,(function(t){var a=s(t,e)||r;(l(t,e)||a)&&n.mod.push(t)})),n.mod.length&&n.modifies(s.output)):t.visit(f,(function(t){(l(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation}}),Object(te.z)(Tb,lo,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,a,i,o,u=t.dataflow.locale(),s=t.fork(t.NO_SOURCE|t.NO_FIELDS),c=this.value,l=e.type||md,f=e.scale,d=+e.limit,h=wd(f,null==e.count?5:e.count,e.minstep),p=!!e.values||l===md,v=e.format||Cd(u,f,h,l,e.formatSpecifier,e.formatType,p),m=e.values||Ed(f,h);return c&&(s.rem=c),l===md?(d&&m.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=m.slice(0,d-1),o=!0):c=m,Object(te.E)(a=e.size)?(e.values||0!==f(c[0])||(c=c.slice(1)),i=c.reduce((function(t,n){return Math.max(t,a(n,e))}),0)):a=Object(te.m)(i=a||8),c=c.map((function(t,n){return Ci({index:n,label:v(t,n,c),value:t,offset:i,size:a(t,e)})})),o&&(o=m[c.length],c.push(Ci({index:c.length,label:"\u2026".concat(m.length-c.length," entries"),value:o,offset:i,size:a(o,e)})))):"gradient"===l?(n=f.domain(),r=ld(f,n[0],Object(te.W)(n)),m.length<3&&!e.values&&n[0]!==Object(te.W)(n)&&(m=[n[0],Object(te.W)(n)]),c=m.map((function(e,t){return Ci({index:t,label:v(e,t,m),value:e,perc:r(e)})}))):(a=m.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],a=+Object(te.W)(t),i=a-r;if(e.type===Rf){var o=n?i/n:.1;i=(a+=o)-(r-=o)}return function(e){return(e-r)/i}}(f),c=m.map((function(e,t){return Ci({index:t,label:v(e,t,m),value:e,perc:t?r(e):0,perc2:t===a?1:r(m[t+1])})}))),s.source=c,s.add=c,this.value=c,s}});var Nb=function(e){return e.source.x},Ib=function(e){return e.source.y},Db=function(e){return e.target.x},Rb=function(e){return e.target.y};function Fb(e){lo.call(this,{},e)}Fb.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(te.z)(Fb,lo,{transform:function(e,t){var n=e.sourceX||Nb,r=e.sourceY||Ib,a=e.targetX||Db,i=e.targetY||Rb,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",c=zb.get(s+"-"+u)||zb.get(s);return c||Object(te.o)("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=c(n(e),r(e),a(e),i(e))})),t.reflow(e.modified()).modifies(o)}});var Mb=function(e,t,n,r){return"M"+e+","+t+"L"+n+","+r},Pb=function(e,t,n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(i,a)/Math.PI+" 0 1 "+n+","+r},Lb=function(e,t,n,r){var a=n-e,i=r-t,o=.2*(a+i),u=.2*(i-a);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r},zb=Object(te.t)({line:Mb,"line-radial":function(e,t,n,r){return Mb(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:Pb,"arc-radial":function(e,t,n,r){return Pb(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:Lb,"curve-radial":function(e,t,n,r){return Lb(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n);return"M"+t*a+","+t*i+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var a=(e+n)/2;return"M"+e+","+t+"C"+a+","+t+" "+a+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var a=(t+r)/2;return"M"+e+","+t+"C"+e+","+a+" "+n+","+a+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*a+","+t*i+"C"+s*a+","+s*i+" "+s*o+","+s*u+" "+r*o+","+r*u}});function Bb(e){lo.call(this,null,e)}Bb.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(te.z)(Bb,lo,{transform:function(e,t){var n,r,a,i=e.as||["startAngle","endAngle"],o=i[0],u=i[1],s=e.field||te.Q,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(s),h=d.length,p=c,v=(l-c)/_b(d),m=ku(h);for(e.sort&&m.sort((function(e,t){return d[e]-d[t]})),n=0;n<h;++n)a=d[m[n]],(r=f[m[n]])[o]=p,r[u]=p+=a*v;return this.value=d,t.reflow(e.modified()).modifies(i)}});function Ub(e){return ed(e)&&e!==Tf}var Wb=Object(te.fb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Vb(e){lo.call(this,null,e),this.modified(!0)}function qb(e,t,n){rd(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+Object(te.bb)(t)));return t}function $b(e,t,n){return Object(te.E)(e)&&(t||n)?ud(e,Hb(t||[0,1],n)):e}function Hb(e,t){return t?e.slice().reverse():e}function Gb(e){lo.call(this,null,e)}Object(te.z)(Vb,lo,{transform:function(e,t){var n=t.dataflow,r=this.value,a=function(e){var t,n=e.type,r="";if(n===Tf)return"sequential-linear";(function(e){var t=e.type;return ed(t)&&t!==Cf&&t!==Af&&(e.scheme||e.range&&e.range.length&&e.range.every(te.J))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||kf).toLowerCase()}(e);for(a in r&&a===r.type||(this.value=r=Jf(a)()),e)if(!Wb[a]){if("padding"===a&&Ub(r.type))continue;Object(te.E)(r[a])?r[a](e[a]):n.warn("Unsupported scale property: "+a)}return function(e,t,n){var r=e.type,a=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==Pf&&e!==Mf&&Object(te.o)("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,a=e===Mf?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Of(n,a,r)]}(r,t,n);else if(t.scheme&&(i=function(e,t,n){var r,a=t.schemeExtent;Object(te.B)(t.scheme)?r=sd(t.scheme,t.interpolate,t.interpolateGamma):(r=vd(t.scheme.toLowerCase()))||Object(te.o)("Unrecognized scheme name: ".concat(t.scheme));return n=e===Rf?n+1:e===Lf?n-1:e===If||e===Df?+t.schemeCount||5:n,ad(e)?$b(r,a,t.reverse):Object(te.E)(r)?cd($b(r,a),n):e===Ff?r:r.slice(0,n)}(r,t,n),Object(te.E)(i))){if(e.interpolator)return e.interpolator(i);Object(te.o)("Scale type ".concat(r," does not support interpolating color schemes."))}if(i&&ad(r))return e.interpolator(sd(Hb(i,t.reverse),t.interpolate,t.interpolateGamma));i&&t.interpolate&&e.interpolate?e.interpolate(fd(t.interpolate,t.interpolateGamma)):Object(te.E)(e.round)?e.round(a):Object(te.E)(e.rangeRound)&&e.interpolate(a?Sl.a:jl.a);i&&e.range(Hb(i,t.reverse))}(r,e,function(e,t,n){var r=t.bins;if(r&&!Object(te.B)(r)){var a=e.domain(),i=a[0],o=Object(te.W)(a),u=r.step,s=null==r.start?i:r.start,c=null==r.stop?o:r.stop;u||Object(te.o)("Scale bins parameter missing step property."),s<i&&(s=u*Math.ceil(i/u)),c>o&&(c=u*Math.floor(o/u)),r=ku(s,c+u/2,u)}r?e.bins=r:e.bins&&delete e.bins;e.type===Lf&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){var r=function(e,t,n){return t?(e.domain(qb(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var a,i,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&function(e){var t=e.type;return!e.bins&&(t===kf||t===_f||t===Sf)}(e);if(!o)return 0;Ub(u)&&t.padding&&o[0]!==Object(te.W)(o)&&(o=function(e,t,n,r,a,i){var o=Math.abs(Object(te.W)(n)-n[0]),u=o/(o-2*r),s=e===jf?Object(te.ob)(t,null,u):e===Sf?Object(te.pb)(t,null,u,.5):e===_f?Object(te.pb)(t,null,u,a||1):e===Ef?Object(te.qb)(t,null,u,i||1):Object(te.nb)(t,null,u);return(t=t.slice())[0]=s[0],t[t.length-1]=s[1],t}(u,o,t.range,t.padding,t.exponent,t.constant));if((s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[a]<0&&(o[a]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[a]=t.domainMax),null!=t.domainMid)){var c=(i=t.domainMid)>o[a]?a+1:i<o[0]?0:a;c!==a&&n.warn("Scale domainMid exceeds domain min or max.",i),o.splice(c,0,i)}e.domain(qb(u,o,n)),u===Ff&&e.unknown(t.domainImplicit?wl:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&wd(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Object(te.z)(Gb,lo,{transform:function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ii(e.sort)),this.modified(n),t}});var Kb="zero",Xb="center",Yb="normalize",Jb=["y0","y1"];function Qb(e){lo.call(this,null,e)}function Zb(e,t,n,r,a){for(var i,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(i=e[s])[r]=o,i[a]=o+=Math.abs(n(i))}function ey(e,t,n,r,a){for(var i,o=1/e.sum,u=0,s=e.length,c=0,l=0;c<s;++c)(i=e[c])[r]=u,i[a]=u=o*(l+=Math.abs(n(i)))}function ty(e,t,n,r,a){for(var i,o,u=0,s=0,c=e.length,l=0;l<c;++l)(i=+n(o=e[l]))<0?(o[r]=s,o[a]=s+=i):(o[r]=u,o[a]=u+=i)}Qb.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Kb,values:[Kb,Xb,Yb]},{name:"as",type:"string",array:!0,length:2,default:Jb}]},Object(te.z)(Qb,lo,{transform:function(e,t){var n,r,a,i,o=e.as||Jb,u=o[0],s=o[1],c=Ii(e.sort),l=e.field||te.Q,f=e.offset===Xb?Zb:e.offset===Yb?ey:ty;for(n=function(e,t,n,r){var a,i,o,u,s,c,l,f,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(a={},i=0,o=e.length;i<o;++i)s=e[i],(l=a[c=t.map(p)])||(a[c]=l=[],h.push(l)),l.push(s);for(c=0,d=0,u=h.length;c<u;++c){for(i=0,f=0,o=(l=h[c]).length;i<o;++i)f+=Math.abs(r(l[i]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return h.max=d,h}(t.source,e.groupby,c,l),r=0,a=n.length,i=n.max;r<a;++r)f(n[r],i,l,u,s);return t.reflow(e.modified()).modifies(o)}});var ny=function(e){return e};function ry(e,t){e&&iy.hasOwnProperty(e.type)&&iy[e.type](e,t)}var ay={Feature:function(e,t){ry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)ry(n[r].geometry,t)}},iy={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){oy(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)oy(n[r],t,0)},Polygon:function(e,t){uy(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)uy(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)ry(n[r],t)}};function oy(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function uy(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)oy(e[n],t,1);t.polygonEnd()}var sy=function(e,t){e&&ay.hasOwnProperty(e.type)?ay[e.type](e,t):ry(e,t)},cy=n(3),ly=n(11),fy=function(){function e(){Object(cy.a)(this,e),this._partials=new Float64Array(32),this._n=0}return Object(ly.a)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();var dy=1e-6,hy=1e-12,py=Math.PI,vy=py/2,my=py/4,gy=2*py,by=180/py,yy=py/180,wy=Math.abs,xy=Math.atan,Oy=Math.atan2,ky=Math.cos,jy=Math.ceil,_y=Math.exp,Sy=(Math.floor,Math.hypot),Ey=Math.log,Cy=Math.pow,Ay=Math.sin,Ty=Math.sign||function(e){return e>0?1:e<0?-1:0},Ny=Math.sqrt,Iy=Math.tan;function Dy(e){return e>1?0:e<-1?py:Math.acos(e)}function Ry(e){return e>1?vy:e<-1?-vy:Math.asin(e)}function Fy(){}var My,Py,Ly,zy,By=new fy,Uy=new fy,Wy={point:Fy,lineStart:Fy,lineEnd:Fy,polygonStart:function(){Wy.lineStart=Vy,Wy.lineEnd=Hy},polygonEnd:function(){Wy.lineStart=Wy.lineEnd=Wy.point=Fy,By.add(wy(Uy)),Uy=new fy},result:function(){var e=By/2;return By=new fy,e}};function Vy(){Wy.point=qy}function qy(e,t){Wy.point=$y,My=Ly=e,Py=zy=t}function $y(e,t){Uy.add(zy*e-Ly*t),Ly=e,zy=t}function Hy(){$y(My,Py)}var Gy=Wy,Ky=1/0,Xy=Ky,Yy=-Ky,Jy=Yy;var Qy,Zy,ew,tw,nw={point:function(e,t){e<Ky&&(Ky=e);e>Yy&&(Yy=e);t<Xy&&(Xy=t);t>Jy&&(Jy=t)},lineStart:Fy,lineEnd:Fy,polygonStart:Fy,polygonEnd:Fy,result:function(){var e=[[Ky,Xy],[Yy,Jy]];return Yy=Jy=-(Xy=Ky=1/0),e}},rw=0,aw=0,iw=0,ow=0,uw=0,sw=0,cw=0,lw=0,fw=0,dw={point:hw,lineStart:pw,lineEnd:gw,polygonStart:function(){dw.lineStart=bw,dw.lineEnd=yw},polygonEnd:function(){dw.point=hw,dw.lineStart=pw,dw.lineEnd=gw},result:function(){var e=fw?[cw/fw,lw/fw]:sw?[ow/sw,uw/sw]:iw?[rw/iw,aw/iw]:[NaN,NaN];return rw=aw=iw=ow=uw=sw=cw=lw=fw=0,e}};function hw(e,t){rw+=e,aw+=t,++iw}function pw(){dw.point=vw}function vw(e,t){dw.point=mw,hw(ew=e,tw=t)}function mw(e,t){var n=e-ew,r=t-tw,a=Ny(n*n+r*r);ow+=a*(ew+e)/2,uw+=a*(tw+t)/2,sw+=a,hw(ew=e,tw=t)}function gw(){dw.point=hw}function bw(){dw.point=ww}function yw(){xw(Qy,Zy)}function ww(e,t){dw.point=xw,hw(Qy=ew=e,Zy=tw=t)}function xw(e,t){var n=e-ew,r=t-tw,a=Ny(n*n+r*r);ow+=a*(ew+e)/2,uw+=a*(tw+t)/2,sw+=a,cw+=(a=tw*e-ew*t)*(ew+e),lw+=a*(tw+t),fw+=3*a,hw(ew=e,tw=t)}var Ow=dw;function kw(e){this._context=e}kw.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,gy)}},result:Fy};var jw,_w,Sw,Ew,Cw,Aw=new fy,Tw={point:Fy,lineStart:function(){Tw.point=Nw},lineEnd:function(){jw&&Iw(_w,Sw),Tw.point=Fy},polygonStart:function(){jw=!0},polygonEnd:function(){jw=null},result:function(){var e=+Aw;return Aw=new fy,e}};function Nw(e,t){Tw.point=Iw,_w=Ew=e,Sw=Cw=t}function Iw(e,t){Ew-=e,Cw-=t,Aw.add(Ny(Ew*Ew+Cw*Cw)),Ew=e,Cw=t}var Dw=Tw;function Rw(){this._string=[]}function Fw(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}Rw.prototype={_radius:4.5,_circle:Fw(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Fw(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var Mw=function(e,t){var n,r,a=4.5;function i(e){return e&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),sy(e,n(r))),r.result()}return i.area=function(e){return sy(e,n(Gy)),Gy.result()},i.measure=function(e){return sy(e,n(Dw)),Dw.result()},i.bounds=function(e){return sy(e,n(nw)),nw.result()},i.centroid=function(e){return sy(e,n(Ow)),Ow.result()},i.projection=function(t){return arguments.length?(n=null==t?(e=null,ny):(e=t).stream,i):e},i.context=function(e){return arguments.length?(r=null==e?(t=null,new Rw):new kw(t=e),"function"!==typeof a&&r.pointRadius(a),i):t},i.pointRadius=function(e){return arguments.length?(a="function"===typeof e?e:(r.pointRadius(+e),+e),i):a},i.projection(e).context(t)},Pw=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Fy,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},Lw=function(e,t){return wy(e[0]-t[0])<dy&&wy(e[1]-t[1])<dy};function zw(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Bw=function(e,t,n,r,a){var i,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(Lw(r,o)){if(!r[2]&&!o[2]){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}o[0]+=2e-6}u.push(n=new zw(r,e,null,!0)),s.push(n.o=new zw(r,null,n,!1)),u.push(n=new zw(o,e,null,!1)),s.push(n.o=new zw(o,null,n,!0))}})),u.length){for(s.sort(t),Uw(u),Uw(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(i=0,o=c.length;i<o;++i)a.point((l=c[i])[0],l[1]);else r(d.x,d.n.x,1,a);d=d.n}else{if(h)for(c=d.p.z,i=c.length-1;i>=0;--i)a.point((l=c[i])[0],l[1]);else r(d.x,d.p.x,-1,a);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);a.lineEnd()}}};function Uw(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function Ww(e){return[Oy(e[1],e[0]),Ry(e[2])]}function Vw(e){var t=e[0],n=e[1],r=ky(n);return[r*ky(t),r*Ay(t),Ay(n)]}function qw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $w(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Hw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Gw(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Kw(e){var t=Ny(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Xw(e){return wy(e[0])<=py?e[0]:Ty(e[0])*((wy(e[0])+py)%gy-py)}var Yw=x.a.mark(Jw);function Jw(e){var t,n,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=Object(vo.a)(e),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=8;break}return r=n.value,a.delegateYield(r,"t0",6);case 6:a.next=3;break;case 8:a.next=13;break;case 10:a.prev=10,a.t1=a.catch(1),t.e(a.t1);case 13:return a.prev=13,t.f(),a.finish(13);case 16:case"end":return a.stop()}}),Yw,null,[[1,10,13,16]])}function Qw(e){return Array.from(Jw(e))}var Zw=function(e,t,n,r){return function(a){var i,o,u,s=t(a),c=Pw(),l=t(c),f=!1,d={point:h,lineStart:v,lineEnd:m,polygonStart:function(){d.point=g,d.lineStart=b,d.lineEnd=y,o=[],i=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=m,o=Qw(o);var e=function(e,t){var n=Xw(t),r=t[1],a=Ay(r),i=[Ay(n),-ky(n),0],o=0,u=0,s=new fy;1===a?r=vy+dy:-1===a&&(r=-vy-dy);for(var c=0,l=e.length;c<l;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=Xw(h),v=h[1]/2+my,m=Ay(v),g=ky(v),b=0;b<d;++b,p=w,m=O,g=k,h=y){var y=f[b],w=Xw(y),x=y[1]/2+my,O=Ay(x),k=ky(x),j=w-p,_=j>=0?1:-1,S=_*j,E=S>py,C=m*O;if(s.add(Oy(C*_*Ay(S),g*k+C*ky(S))),o+=E?j+_*gy:j,E^p>=n^w>=n){var A=$w(Vw(h),Vw(y));Kw(A);var T=$w(i,A);Kw(T);var N=(E^j>=0?-1:1)*Ry(T[2]);(r>N||r===N&&(A[0]||A[1]))&&(u+=E^j>=0?1:-1)}}return(o<-1e-6||o<dy&&s<-1e-12)^1&u}(i,r);o.length?(f||(a.polygonStart(),f=!0),Bw(o,tx,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(t,n){e(t,n)&&a.point(t,n)}function p(e,t){s.point(e,t)}function v(){d.point=p,s.lineStart()}function m(){d.point=h,s.lineEnd()}function g(e,t){u.push([e,t]),l.point(e,t)}function b(){l.lineStart(),u=[]}function y(){g(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),d=c.result(),h=d.length;if(u.pop(),i.push(u),u=null,h)if(1&s){if((t=(n=d[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else h>1&&2&s&&d.push(d.pop().concat(d.shift())),o.push(d.filter(ex))}return d}};function ex(e){return e.length>1}function tx(e,t){return((e=e.x)[0]<0?e[1]-vy-dy:vy-e[1])-((t=t.x)[0]<0?t[1]-vy-dy:vy-t[1])}var nx=Zw((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var u=i>0?py:-py,s=wy(i-n);wy(s-py)<dy?(e.point(n,r=(r+o)/2>0?vy:-vy),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(i,r),t=0):a!==u&&s>=py&&(wy(n-a)<dy&&(n-=a*dy),wy(i-u)<dy&&(i-=u*dy),r=function(e,t,n,r){var a,i,o=Ay(e-n);return wy(o)>dy?xy((Ay(t)*(i=ky(r))*Ay(n)-Ay(r)*(a=ky(t))*Ay(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=i,r=o),a=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*vy,r.point(-py,a),r.point(0,a),r.point(py,a),r.point(py,0),r.point(py,-a),r.point(0,-a),r.point(-py,-a),r.point(-py,0),r.point(-py,a);else if(wy(e[0]-t[0])>dy){var i=e[0]<t[0]?py:-py;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-py,-vy]);var rx=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function ax(e,t){return[wy(e)>py?e+Math.round(-e/gy)*gy:e,t]}function ix(e,t,n){return(e%=gy)?t||n?rx(ux(e),sx(t,n)):ux(e):t||n?sx(t,n):ax}function ox(e){return function(t,n){return[(t+=e)>py?t-gy:t<-py?t+gy:t,n]}}function ux(e){var t=ox(e);return t.invert=ox(-e),t}function sx(e,t){var n=ky(e),r=Ay(e),a=ky(t),i=Ay(t);function o(e,t){var o=ky(t),u=ky(e)*o,s=Ay(e)*o,c=Ay(t),l=c*n+u*r;return[Oy(s*a-l*i,u*n-c*r),Ry(l*a+s*i)]}return o.invert=function(e,t){var o=ky(t),u=ky(e)*o,s=Ay(e)*o,c=Ay(t),l=c*a-s*i;return[Oy(s*a+c*i,u*n+l*r),Ry(l*n-u*r)]},o}ax.invert=ax;function cx(e,t,n,r,a,i){if(n){var o=ky(t),u=Ay(t),s=r*n;null==a?(a=t+r*gy,i=t-s/2):(a=lx(o,a),i=lx(o,i),(r>0?a<i:a>i)&&(a+=r*gy));for(var c,l=a;r>0?l>i:l<i;l-=s)c=Ww([o,-u*ky(l),-u*Ay(l)]),e.point(c[0],c[1])}}function lx(e,t){(t=Vw(t))[0]-=e,Kw(t);var n=Dy(-t[1]);return((-t[2]<0?-n:n)+gy-dy)%gy}var fx=function(e){var t=ky(e),n=6*yy,r=t>0,a=wy(t)>dy;function i(e,n){return ky(e)*ky(n)>t}function o(e,n,r){var a=[1,0,0],i=$w(Vw(e),Vw(n)),o=qw(i,i),u=i[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=$w(a,i),d=Gw(a,c);Hw(d,Gw(i,l));var h=f,p=qw(d,h),v=qw(h,h),m=p*p-v*(qw(d,d)-1);if(!(m<0)){var g=Ny(m),b=Gw(h,(-p-g)/v);if(Hw(b,d),b=Ww(b),!r)return b;var y,w=e[0],x=n[0],O=e[1],k=n[1];x<w&&(y=w,w=x,x=y);var j=x-w,_=wy(j-py)<dy;if(!_&&k<O&&(y=O,O=k,k=y),_||j<dy?_?O+k>0^b[1]<(wy(b[0]-w)<dy?O:k):O<=b[1]&&b[1]<=k:j>py^(w<=b[0]&&b[0]<=x)){var S=Gw(h,(-p+g)/v);return Hw(S,d),[b,Ww(S)]}}}function u(t,n){var a=r?e:py-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return Zw(i,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,d){var h,p=[f,d],v=i(f,d),m=r?v?0:u(f,d):v?u(f+(f<0?py:-py),d):0;if(!t&&(c=s=v)&&e.lineStart(),v!==s&&(!(h=o(t,p))||Lw(t,h)||Lw(p,h))&&(p[2]=1),v!==s)l=0,v?(e.lineStart(),h=o(p,t),e.point(h[0],h[1])):(h=o(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(a&&t&&r^v){var g;m&n||!(g=o(p,t,!0))||(l=0,r?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1],3)))}!v||t&&Lw(t,p)||e.point(p[0],p[1]),t=p,s=v,n=m},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,a,i){cx(i,e,n,a,t,r)}),r?[0,-e]:[-py,e-py])},dx=1e9,hx=-dx;function px(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,u,c){var l=0,f=0;if(null==a||(l=o(a,u))!==(f=o(i,u))||s(a,i)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function o(r,a){return wy(r[0]-e)<dy?a>0?0:3:wy(r[0]-n)<dy?a>0?2:1:wy(r[1]-t)<dy?a>0?1:0:a>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,d,h,p,v,m,g,b,y=o,w=Pw(),x={point:O,lineStart:function(){x.point=k,c&&c.push(l=[]);g=!0,m=!1,p=v=NaN},lineEnd:function(){s&&(k(f,d),h&&m&&w.rejoin(),s.push(w.result()));x.point=O,m&&y.lineEnd()},polygonStart:function(){y=w,s=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var i,o,u=c[n],s=1,l=u.length,f=u[0],d=f[0],h=f[1];s<l;++s)i=d,o=h,d=(f=u[s])[0],h=f[1],o<=r?h>r&&(d-i)*(r-o)>(h-o)*(e-i)&&++t:h<=r&&(d-i)*(r-o)<(h-o)*(e-i)&&--t;return t}(),n=b&&t,a=(s=Qw(s)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&Bw(s,u,t,i,o),o.polygonEnd());y=o,s=c=l=null}};function O(e,t){a(e,t)&&y.point(e,t)}function k(i,o){var u=a(i,o);if(c&&l.push([i,o]),g)f=i,d=o,h=u,g=!1,u&&(y.lineStart(),y.point(i,o));else if(u&&m)y.point(i,o);else{var s=[p=Math.max(hx,Math.min(dx,p)),v=Math.max(hx,Math.min(dx,v))],w=[i=Math.max(hx,Math.min(dx,i)),o=Math.max(hx,Math.min(dx,o))];!function(e,t,n,r,a,i){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,d=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*d),l<1&&(t[0]=u+l*f,t[1]=s+l*d),!0}}}}}(s,w,e,t,n,r)?u&&(y.lineStart(),y.point(i,o),b=!1):(m||(y.lineStart(),y.point(s[0],s[1])),y.point(w[0],w[1]),u||y.lineEnd(),b=!1)}p=i,v=o,m=u}return x}}function vx(e){return function(t){var n=new mx;for(var r in e)n[r]=e[r];return n.stream=t,n}}function mx(){}function gx(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),sy(n,e.stream(nw)),t(nw.result()),null!=r&&e.clipExtent(r),e}function bx(e,t,n){return gx(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,u])}),n)}function yx(e,t,n){return bx(e,[[0,0],t],n)}function wx(e,t,n){return gx(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])}),n)}function xx(e,t,n){return gx(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])}),n)}mx.prototype={constructor:mx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ox=ky(30*yy),kx=function(e,t){return+t?function(e,t){function n(r,a,i,o,u,s,c,l,f,d,h,p,v,m){var g=c-r,b=l-a,y=g*g+b*b;if(y>4*t&&v--){var w=o+d,x=u+h,O=s+p,k=Ny(w*w+x*x+O*O),j=Ry(O/=k),_=wy(wy(O)-1)<dy||wy(i-f)<dy?(i+f)/2:Oy(x,w),S=e(_,j),E=S[0],C=S[1],A=E-r,T=C-a,N=b*A-g*T;(N*N/y>t||wy((g*A+b*T)/y-.5)>.3||o*d+u*h+s*p<Ox)&&(n(r,a,i,o,u,s,E,C,_,w/=k,x/=k,O,v,m),m.point(E,C),n(E,C,_,w,x,O,c,l,f,d,h,p,v,m))}}return function(t){var r,a,i,o,u,s,c,l,f,d,h,p,v={point:m,lineStart:g,lineEnd:y,polygonStart:function(){t.polygonStart(),v.lineStart=w},polygonEnd:function(){t.polygonEnd(),v.lineStart=g}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function g(){l=NaN,v.point=b,t.lineStart()}function b(r,a){var i=Vw([r,a]),o=e(r,a);n(l,f,c,d,h,p,l=o[0],f=o[1],c=r,d=i[0],h=i[1],p=i[2],16,t),t.point(l,f)}function y(){v.point=m,t.lineEnd()}function w(){g(),v.point=x,v.lineEnd=O}function x(e,t){b(r=e,t),a=l,i=f,o=d,u=h,s=p,v.point=b}function O(){n(l,f,c,d,h,p,a,i,r,o,u,s,16,t),v.lineEnd=y,y()}return v}}(e,t):function(e){return vx({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var jx=vx({point:function(e,t){this.stream.point(e*yy,t*yy)}});function _x(e,t,n,r,a,i){if(!i)return function(e,t,n,r,a){function i(i,o){return[t+e*(i*=r),n-e*(o*=a)]}return i.invert=function(i,o){return[(i-t)/e*r,(n-o)/e*a]},i}(e,t,n,r,a);var o=ky(i),u=Ay(i),s=o*e,c=u*e,l=o/e,f=u/e,d=(u*n-o*t)/e,h=(u*t+o*n)/e;function p(e,i){return[s*(e*=r)-c*(i*=a)+t,n-c*e-s*i]}return p.invert=function(e,t){return[r*(l*e-f*t+d),a*(h-f*e-l*t)]},p}function Sx(e){return Ex((function(){return e}))()}function Ex(e){var t,n,r,a,i,o,u,s,c,l,f=150,d=480,h=250,p=0,v=0,m=0,g=0,b=0,y=0,w=1,x=1,O=null,k=nx,j=null,_=ny,S=.5;function E(e){return s(e[0]*yy,e[1]*yy)}function C(e){return(e=s.invert(e[0],e[1]))&&[e[0]*by,e[1]*by]}function A(){var e=_x(f,0,0,w,x,y).apply(null,t(p,v)),r=_x(f,d-e[0],h-e[1],w,x,y);return n=ix(m,g,b),u=rx(t,r),s=rx(n,u),o=kx(u,S),T()}function T(){return c=l=null,E}return E.stream=function(e){return c&&l===e?c:c=jx(function(e){return vx({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(o(_(l=e)))))},E.preclip=function(e){return arguments.length?(k=e,O=void 0,T()):k},E.postclip=function(e){return arguments.length?(_=e,j=r=a=i=null,T()):_},E.clipAngle=function(e){return arguments.length?(k=+e?fx(O=e*yy):(O=null,nx),T()):O*by},E.clipExtent=function(e){return arguments.length?(_=null==e?(j=r=a=i=null,ny):px(j=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1]),T()):null==j?null:[[j,r],[a,i]]},E.scale=function(e){return arguments.length?(f=+e,A()):f},E.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],A()):[d,h]},E.center=function(e){return arguments.length?(p=e[0]%360*yy,v=e[1]%360*yy,A()):[p*by,v*by]},E.rotate=function(e){return arguments.length?(m=e[0]%360*yy,g=e[1]%360*yy,b=e.length>2?e[2]%360*yy:0,A()):[m*by,g*by,b*by]},E.angle=function(e){return arguments.length?(y=e%360*yy,A()):y*by},E.reflectX=function(e){return arguments.length?(w=e?-1:1,A()):w<0},E.reflectY=function(e){return arguments.length?(x=e?-1:1,A()):x<0},E.precision=function(e){return arguments.length?(o=kx(u,S=e*e),T()):Ny(S)},E.fitExtent=function(e,t){return bx(E,e,t)},E.fitSize=function(e,t){return yx(E,e,t)},E.fitWidth=function(e,t){return wx(E,e,t)},E.fitHeight=function(e,t){return xx(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&C,A()}}function Cx(e){var t=0,n=py/3,r=Ex(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*yy,n=e[1]*yy):[t*by,n*by]},a}function Ax(e,t){var n=Ay(e),r=(n+Ay(t))/2;if(wy(r)<dy)return function(e){var t=ky(e);function n(e,n){return[e*t,Ay(n)/t]}return n.invert=function(e,n){return[e/t,Ry(n*t)]},n}(e);var a=1+n*(2*r-n),i=Ny(a)/r;function o(e,t){var n=Ny(a-2*r*Ay(t))/r;return[n*Ay(e*=r),i-n*ky(e)]}return o.invert=function(e,t){var n=i-t,o=Oy(e,wy(n))*Ty(n);return n*r<0&&(o-=py*Ty(e)*Ty(n)),[o/r,Ry((a-(e*e+n*n)*r*r)/(2*r))]},o}var Tx=function(){return Cx(Ax).scale(155.424).center([0,33.6442])},Nx=function(){return Tx().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ix(e){return function(t,n){var r=ky(t),a=ky(n),i=e(r*a);return i===1/0?[2,0]:[i*a*Ay(t),i*Ay(n)]}}function Dx(e){return function(t,n){var r=Ny(t*t+n*n),a=e(r),i=Ay(a),o=ky(a);return[Oy(t*i,r*o),Ry(r&&n*i/r)]}}var Rx=Ix((function(e){return Ny(2/(1+e))}));Rx.invert=Dx((function(e){return 2*Ry(e/2)}));var Fx=Ix((function(e){return(e=Dy(e))&&e/Ay(e)}));Fx.invert=Dx((function(e){return e}));function Mx(e,t){return[e,Ey(Iy((vy+t)/2))]}Mx.invert=function(e,t){return[e,2*xy(_y(t))-vy]};function Px(e){var t,n,r,a=Sx(e),i=a.center,o=a.scale,u=a.translate,s=a.clipExtent,c=null;function l(){var i=py*o(),u=a(function(e){function t(t){return(t=e(t[0]*yy,t[1]*yy))[0]*=by,t[1]*=by,t}return e=ix(e[0]*yy,e[1]*yy,e.length>2?e[2]*yy:0),t.invert=function(t){return(t=e.invert(t[0]*yy,t[1]*yy))[0]*=by,t[1]*=by,t},t}(a.rotate()).invert([0,0]));return s(null==c?[[u[0]-i,u[1]-i],[u[0]+i,u[1]+i]]:e===Mx?[[Math.max(u[0]-i,c),t],[Math.min(u[0]+i,n),r]]:[[c,Math.max(u[1]-i,t)],[n,Math.min(u[1]+i,r)]])}return a.scale=function(e){return arguments.length?(o(e),l()):o()},a.translate=function(e){return arguments.length?(u(e),l()):u()},a.center=function(e){return arguments.length?(i(e),l()):i()},a.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),l()):null==c?null:[[c,t],[n,r]]},l()}function Lx(e){return Iy((vy+e)/2)}function zx(e,t){var n=ky(e),r=e===t?Ay(e):Ey(n/ky(t))/Ey(Lx(t)/Lx(e)),a=n*Cy(Lx(e),r)/r;if(!r)return Mx;function i(e,t){a>0?t<-vy+dy&&(t=-vy+dy):t>vy-dy&&(t=vy-dy);var n=a/Cy(Lx(t),r);return[n*Ay(r*e),a-n*ky(r*e)]}return i.invert=function(e,t){var n=a-t,i=Ty(r)*Ny(e*e+n*n),o=Oy(e,wy(n))*Ty(n);return n*r<0&&(o-=py*Ty(e)*Ty(n)),[o/r,2*xy(Cy(a/i,1/r))-vy]},i}function Bx(e,t){return[e,t]}Bx.invert=Bx;function Ux(e,t){var n=ky(e),r=e===t?Ay(e):(n-ky(t))/(t-e),a=n/r+e;if(wy(r)<dy)return Bx;function i(e,t){var n=a-t,i=r*e;return[n*Ay(i),a-n*ky(i)]}return i.invert=function(e,t){var n=a-t,i=Oy(e,wy(n))*Ty(n);return n*r<0&&(i-=py*Ty(e)*Ty(n)),[i/r,a-Ty(r)*Ny(e*e+n*n)]},i}var Wx=1.340264,Vx=-.081106,qx=893e-6,$x=.003796,Hx=Ny(3)/2;function Gx(e,t){var n=Ry(Hx*Ay(t)),r=n*n,a=r*r*r;return[e*ky(n)/(Hx*(Wx+3*Vx*r+a*(7*qx+9*$x*r))),n*(Wx+Vx*r+a*(qx+$x*r))]}Gx.invert=function(e,t){for(var n,r=t,a=r*r,i=a*a*a,o=0;o<12&&(i=(a=(r-=n=(r*(Wx+Vx*a+i*(qx+$x*a))-t)/(Wx+3*Vx*a+i*(7*qx+9*$x*a)))*r)*a*a,!(wy(n)<hy));++o);return[Hx*e*(Wx+3*Vx*a+i*(7*qx+9*$x*a))/ky(r),Ry(Ay(r)/Hx)]};function Kx(e,t){var n=ky(t),r=ky(e)*n;return[n*Ay(e)/r,Ay(t)/r]}Kx.invert=Dx(xy);function Xx(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Xx.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(wy(n)>dy&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]};function Yx(e,t){return[ky(t)*Ay(e),Ay(t)]}Yx.invert=Dx(Ry);function Jx(e,t){var n=ky(t),r=1+ky(e)*n;return[n*Ay(e)/r,Ay(t)/r]}Jx.invert=Dx((function(e){return 2*xy(e)}));function Qx(e,t){return[Ey(Iy((vy+t)/2)),-e]}Qx.invert=function(e,t){return[-t,2*xy(_y(e))-vy]};var Zx=Math.abs,eO=(Math.atan,Math.atan2,Math.ceil,Math.cos),tO=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),nO=(Math.tan,Math.PI),rO=nO/2,aO=(Math.SQRT1_2,oO(2));oO(nO);function iO(e){return e>1?rO:e<-1?-rO:Math.asin(e)}function oO(e){return e>0?Math.sqrt(e):0}function uO(e,t){var n,r=e*tO(t),a=30;do{t-=n=(t+tO(t)-r)/(1+eO(t))}while(Zx(n)>1e-6&&--a>0);return t/2}var sO=function(e,t,n){function r(r,a){return[e*r*eO(a=uO(n,a)),t*tO(a)]}return r.invert=function(r,a){return a=iO(a/t),[r/(e*eO(a)),iO((2*a+tO(2*a))/n)]},r}(aO/rO,aO,nO),cO=Mw(),lO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function fO(e,t){return function n(){var r=t();return r.type=e,r.path=Mw().projection(r),r.copy=r.copy||function(){var e=n();return lO.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function dO(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(pO[e]=fO(e,t),this):pO[e]||null}function hO(e){return e&&e.path||cO}var pO={albers:Nx,albersusa:function(){var e,t,n,r,a,i,o=Nx(),u=Tx().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Tx().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){i=[e,t]}};function l(e){var t=e[0],o=e[1];return i=null,n.point(t,o),i||(r.point(t,o),i)||(a.point(t,o),i)}function f(){return e=t=null,l}return l.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?u:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:o).invert(e)},l.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),u.stream(n),s.stream(n)])},l.precision=function(e){return arguments.length?(o.precision(e),u.precision(e),s.precision(e),f()):o.precision()},l.scale=function(e){return arguments.length?(o.scale(e),u.scale(.35*e),s.scale(e),l.translate(o.translate())):o.scale()},l.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),i=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[i-.455*t,l-.238*t],[i+.455*t,l+.238*t]]).stream(c),r=u.translate([i-.307*t,l+.201*t]).clipExtent([[i-.425*t+dy,l+.12*t+dy],[i-.214*t-dy,l+.234*t-dy]]).stream(c),a=s.translate([i-.205*t,l+.212*t]).clipExtent([[i-.214*t+dy,l+.166*t+dy],[i-.115*t-dy,l+.234*t-dy]]).stream(c),f()},l.fitExtent=function(e,t){return bx(l,e,t)},l.fitSize=function(e,t){return yx(l,e,t)},l.fitWidth=function(e,t){return wx(l,e,t)},l.fitHeight=function(e,t){return xx(l,e,t)},l.scale(1070)},azimuthalequalarea:function(){return Sx(Rx).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Sx(Fx).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return Cx(zx).scale(109.5).parallels([30,30])},conicequalarea:Tx,conicequidistant:function(){return Cx(Ux).scale(131.154).center([0,13.9389])},equalEarth:function(){return Sx(Gx).scale(177.158)},equirectangular:function(){return Sx(Bx).scale(152.63)},gnomonic:function(){return Sx(Kx).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,a,i,o,u=1,s=0,c=0,l=1,f=1,d=0,h=null,p=1,v=1,m=vx({point:function(e,t){var n=y([e,t]);this.stream.point(n[0],n[1])}}),g=ny;function b(){return p=u*l,v=u*f,i=o=null,y}function y(n){var r=n[0]*p,a=n[1]*v;if(d){var i=a*e-r*t;r=r*e+a*t,a=i}return[r+s,a+c]}return y.invert=function(n){var r=n[0]-s,a=n[1]-c;if(d){var i=a*e+r*t;r=r*e-a*t,a=i}return[r/p,a/v]},y.stream=function(e){return i&&o===e?i:i=m(g(o=e))},y.postclip=function(e){return arguments.length?(g=e,h=n=r=a=null,b()):g},y.clipExtent=function(e){return arguments.length?(g=null==e?(h=n=r=a=null,ny):px(h=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),b()):null==h?null:[[h,n],[r,a]]},y.scale=function(e){return arguments.length?(u=+e,b()):u},y.translate=function(e){return arguments.length?(s=+e[0],c=+e[1],b()):[s,c]},y.angle=function(n){return arguments.length?(t=Ay(d=n%360*yy),e=ky(d),b()):d*by},y.reflectX=function(e){return arguments.length?(l=e?-1:1,b()):l<0},y.reflectY=function(e){return arguments.length?(f=e?-1:1,b()):f<0},y.fitExtent=function(e,t){return bx(y,e,t)},y.fitSize=function(e,t){return yx(y,e,t)},y.fitWidth=function(e,t){return wx(y,e,t)},y.fitHeight=function(e,t){return xx(y,e,t)},y},mercator:function(){return Px(Mx).scale(961/gy)},mollweide:function(){return Sx(sO).scale(169.529)},naturalEarth1:function(){return Sx(Xx).scale(175.295)},orthographic:function(){return Sx(Yx).scale(249.5).clipAngle(90.000001)},stereographic:function(){return Sx(Jx).scale(250).clipAngle(142)},transversemercator:function(){var e=Px(Qx),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var vO in pO)dO(vO,pO[vO]);function mO(e,t,n){var r=ku(e,t-dy,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function gO(e,t,n){var r=ku(e,t-dy,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function bO(){var e,t,n,r,a,i,o,u,s,c,l,f,d=10,h=d,p=90,v=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:b()}}function b(){return ku(jy(r/p)*p,n,p).map(l).concat(ku(jy(u/v)*v,o,v).map(f)).concat(ku(jy(t/d)*d,e,d).filter((function(e){return wy(e%p)>dy})).map(s)).concat(ku(jy(i/h)*h,a,h).filter((function(e){return wy(e%v)>dy})).map(c))}return g.lines=function(){return b().map((function(e){return{type:"LineString",coordinates:e}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(u).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),g.precision(m)):[[r,u],[n,o]]},g.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],i=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),i>a&&(n=i,i=a,a=n),g.precision(m)):[[t,i],[e,a]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(p=+e[0],v=+e[1],g):[p,v]},g.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],g):[d,h]},g.precision=function(d){return arguments.length?(m=+d,s=mO(i,a,90),c=gO(t,e,m),l=mO(u,o,90),f=gO(r,n,m),g):m},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var yO=n(72);function wO(){}var xO=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OO(){var e=1,t=1,n=o;function r(e,t){return t.map((function(t){return a(e,t)}))}function a(r,a){var o=[],u=[];return function(n,r,a){var o,u,s,c,l,f,d=new Array,h=new Array;o=u=-1,c=n[0]>=r,xO[c<<1].forEach(p);for(;++o<e-1;)s=c,c=n[o+1]>=r,xO[s|c<<1].forEach(p);xO[c<<0].forEach(p);for(;++u<t-1;){for(o=-1,c=n[u*e+e]>=r,l=n[u*e]>=r,xO[c<<1|l<<2].forEach(p);++o<e-1;)s=c,c=n[u*e+e+o+1]>=r,f=l,l=n[u*e+o+1]>=r,xO[s|c<<1|l<<2|f<<3].forEach(p);xO[c|l<<3].forEach(p)}o=-1,l=n[u*e]>=r,xO[l<<2].forEach(p);for(;++o<e-1;)f=l,l=n[u*e+o+1]>=r,xO[l<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+o,e[0][1]+u],s=[e[1][0]+o,e[1][1]+u],c=i(r),l=i(s);(t=h[c])?(n=d[l])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(s),a(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(s),h[t.end=l]=t):(t=d[l])?(n=h[c])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(s),a(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=c]=t):d[c]=h[l]={start:c,end:l,ring:[r,s]}}xO[l<<3].forEach(p)}(r,a,(function(e){n(e,r,a),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):u.push(e)})),u.forEach((function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==kO((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:a,coordinates:o}}function i(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,r,a){n.forEach((function(n){var i,o=n[0],u=n[1],s=0|o,c=0|u,l=r[c*e+s];o>0&&o<e&&s===o&&(i=r[c*e+s-1],n[0]=o+(a-i)/(l-i)-.5),u>0&&u<t&&c===u&&(i=r[(c-1)*e+s],n[1]=u+(a-i)/(l-i)-.5)}))}return r.contour=a,r.size=function(n){if(!arguments.length)return[e,t];var a=Math.floor(n[0]),i=Math.floor(n[1]);return a>=0&&i>=0||Object(te.o)("invalid size"),e=a,t=i,r},r.smooth=function(e){return arguments.length?(n=e?o:wO,r):n===o},r}function kO(e,t){for(var n,r=-1,a=t.length;++r<a;)if(n=jO(e,t[r]))return n;return 0}function jO(e,t){for(var n=t[0],r=t[1],a=-1,i=0,o=e.length,u=o-1;i<o;u=i++){var s=e[i],c=s[0],l=s[1],f=e[u],d=f[0],h=f[1];if(_O(s,f,t))return 0;l>r!==h>r&&n<(d-c)*(r-l)/(h-l)+c&&(a=-a)}return a}function _O(e,t,n){var r,a,i,o;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(a=e[r=+(e[0]===t[0])],i=n[r],o=t[r],a<=i&&i<=o||o<=i&&i<=a)}function SO(e,t,n){return function(r){var a=Object(te.q)(r),i=n?Math.min(a[0],0):a[0],o=a[1],u=o-i,s=t?Qe(i,o,e):u/(e+1);return ku(i+s,o,s)}}function EO(e){lo.call(this,null,e)}function CO(e,t,n,r,a){var i=e.x1||0,o=e.y1||0,u=t*n<0;function s(e){e.forEach(c)}function c(e){u&&e.reverse(),e.forEach(l)}function l(e){e[0]=(e[0]-i)*t+r,e[1]=(e[1]-o)*n+a}return function(e){return e.coordinates.forEach(s),e}}function AO(e,t,n){var r=e>=0?e:Io(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function TO(e){return Object(te.E)(e)?e:Object(te.m)(+e)}function NO(){var e=function(e){return e[0]},t=function(e){return e[1]},n=te.Q,r=[-1,-1],a=960,i=500,o=2;function u(u,s){var c=AO(r[0],u,e)>>o,l=AO(r[1],u,t)>>o,f=c?c+2:0,d=l?l+2:0,h=2*f+(a>>o),p=2*d+(i>>o),v=new Float32Array(h*p),m=new Float32Array(h*p),g=v;u.forEach((function(r){var a=f+(+e(r)>>o),i=d+(+t(r)>>o);a>=0&&a<h&&i>=0&&i<p&&(v[a+i*h]+=+n(r))})),c>0&&l>0?(IO(h,p,v,m,c),DO(h,p,m,v,l),IO(h,p,v,m,c),DO(h,p,m,v,l),IO(h,p,v,m,c),DO(h,p,m,v,l)):c>0?(IO(h,p,v,m,c),IO(h,p,m,v,c),IO(h,p,v,m,c),g=m):l>0&&(DO(h,p,v,m,l),DO(h,p,m,v,l),DO(h,p,v,m,l),g=m);for(var b=s?Math.pow(2,-2*o):1/_b(g),y=0,w=h*p;y<w;++y)g[y]*=b;return{values:g,scale:1<<o,width:h,height:p,x1:f,y1:d,x2:f+(a>>o),y2:d+(i>>o)}}return u.x=function(t){return arguments.length?(e=TO(t),u):e},u.y=function(e){return arguments.length?(t=TO(e),u):t},u.weight=function(e){return arguments.length?(n=TO(e),u):n},u.size=function(e){if(!arguments.length)return[a,i];var t=+e[0],n=+e[1];return t>=0&&n>=0||Object(te.o)("invalid size"),a=t,i=n,u},u.cellSize=function(e){return arguments.length?((e=+e)>=1||Object(te.o)("invalid cell size"),o=Math.floor(Math.log(e)/Math.LN2),u):1<<o},u.bandwidth=function(e){return arguments.length?(1===(e=Object(te.i)(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&Object(te.o)("invalid bandwidth"),r=e,u):r},u}function IO(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<t;++o)for(var u=0,s=0;u<e+a;++u)u<e&&(s+=n[u+o*e]),u>=a&&(u>=i&&(s-=n[u-i+o*e]),r[u-a+o*e]=s/Math.min(u+1,e-1+i-u,i))}function DO(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<e;++o)for(var u=0,s=0;u<t+a;++u)u<t&&(s+=n[o+u*e]),u>=a&&(u>=i&&(s-=n[o+(u-i)*e]),r[o+(u-a)*e]=s/Math.min(u+1,t-1+i-u,i))}function RO(e){lo.call(this,null,e)}EO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(te.z)(EO,lo,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,a=e.field||te.y,i=OO().smooth(!1!==e.smooth),o=e.thresholds||function(e,t,n){var r=SO(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((function(e){return go(t(e).values)})))}(r,a,e),u=null===e.as?null:e.as||"contour",s=[];return r.forEach((function(t){var n=a(t),r=i.size([n.width,n.height])(n.values,Object(te.B)(o)?o:o(n.values));!function(e,t,n,r){var a=r.scale||t.scale,i=r.translate||t.translate;Object(te.E)(a)&&(a=a(n,r));Object(te.E)(i)&&(i=i(n,r));if((1===a||null==a)&&!i)return;var o=(Object(te.G)(a)?a:a[0])||1,u=(Object(te.G)(a)?a:a[1])||1,s=i&&i[0]||0,c=i&&i[1]||0;e.forEach(CO(t,o,u,s,c))}(r,n,t,e),r.forEach((function(e){s.push(Ti(t,Ci(null!=u?Object(pt.a)({},u,e):e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=s,n}}),RO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var FO=["x","y","weight","size","cellSize","bandwidth"];function MO(e,t){return FO.forEach((function(n){return null!=t[n]?e[n](t[n]):0})),e}function PO(e){lo.call(this,null,e)}Object(te.z)(RO,lo,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=function(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(te.h),o=MO(NO(),e),u=e.as||"grid";return n=a.map((function(t){return Ci(function(e,t){for(var n=0;n<i.length;++n)e[i[n]]=t[n];return e}(Object(pt.a)({},u,o(t,e.counts)),t.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),PO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(te.z)(PO,lo,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=OO().smooth(!1!==e.smooth),o=e.values,u=e.thresholds||SO(e.count||10,e.nice,!!o),s=e.size;return o||(o=t.materialize(t.SOURCE).source,r=CO(n=MO(NO(),e)(o,!0),n.scale||1,n.scale||1,0,0),s=[n.width,n.height],o=n.values),u=Object(te.B)(u)?u:u(o),o=i.size(s)(o,u),r&&o.forEach(r),this.value&&(a.rem=this.value),this.value=a.source=a.add=(o||[]).map(Ci),a}});var LO="Feature",zO="FeatureCollection";function BO(e){lo.call(this,null,e)}function UO(e){lo.call(this,null,e)}function WO(e){lo.call(this,null,e)}function VO(e){lo.call(this,null,e)}function qO(e){lo.call(this,[],e),this.generator=bO()}function $O(e){lo.call(this,null,e)}function HO(e){if(!Object(te.E)(e))return!1;var t=Object(te.fb)(Object(te.g)(e));return t.$x||t.$y||t.$value||t.$max}function GO(e){lo.call(this,null,e),this.modified(!0)}function KO(e,t,n){Object(te.E)(e[t])&&e[t](n)}BO.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(te.z)(BO,lo,{transform:function(e,t){var n,r=this._features,a=this._points,i=e.fields,o=i&&i[0],u=i&&i[1],s=e.geojson||!i&&te.y,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Object(te.g)(s))||o&&t.modified(Object(te.g)(o))||u&&t.modified(Object(te.g)(u)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=a=[]),s&&t.visit(c,(function(e){return r.push(s(e))})),o&&u&&(t.visit(c,(function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&a.push([t,n])})),r=r.concat({type:LO,geometry:{type:"MultiPoint",coordinates:a}})),this.value={type:zO,features:r}}}),UO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(te.z)(UO,lo,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.field||te.y,i=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=hO(e.projection),n.materialize().reflow()):o=a===te.y||t.modified(a.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(function(e){return e[i]=r(a(e))})),r.pointRadius(u),n.modifies(i)}}),WO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(te.z)(WO,lo,{transform:function(e,t){var n,r=e.projection,a=e.fields[0],i=e.fields[1],o=e.as||["x","y"],u=o[0],s=o[1];function c(e){var t=r([a(e),i(e)]);t?(e[u]=t[0],e[s]=t[1]):(e[u]=void 0,e[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(a.fields)||t.modified(i.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)}}),VO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(te.z)(VO,lo,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.as||"shape",i=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var a=e.pointRadius(),i=e.pointRadius(n)(t(r));return e.pointRadius(a),i};return r.context=function(t){return e.context(t),r},r}(hO(e.projection),e.field||Object(te.u)("datum"),e.pointRadius),n.materialize().reflow(),i=n.SOURCE),n.visit(i,(function(e){return e[a]=r})),n.modifies(a)}}),qO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(te.z)(qO,lo,{transform:function(e,t){var n,r=this.value,a=this.generator;if(!r.length||e.modified())for(var i in e)Object(te.E)(a[i])&&a[i](e[i]);return n=a(),r.length?t.mod.push(Ni(r[0],n)):t.add.push(Ci(n)),r[0]=n,t}}),$O.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(te.z)($O,lo,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,a=e.field||te.y,i=function(e,t){var n;Object(te.E)(e)?(n=function(n){return e(n,t)}).dep=HO(e):e?n=Object(te.m)(e):(n=function(e){return e.$value/e.$max||0}).dep=!0;return n}(e.opacity,e),o=function(e,t){var n;Object(te.E)(e)?(n=function(n){return Object(yO.g)(e(n,t))}).dep=HO(e):n=Object(te.m)(Object(yO.g)(e||"#888"));return n}(e.color,e),u=e.as||"image",s={$x:0,$y:0,$value:0,$max:r?go(n.map((function(e){return go(a(e).values)}))):0};return n.forEach((function(e){var t=a(e),n=Object(te.p)({},e,s);r||(n.$max=go(t.values||[])),e[u]=function(e,t,n,r){for(var a=e.width,i=e.height,o=e.x1||0,u=e.y1||0,s=e.x2||a,c=e.y2||i,l=e.values,f=l?function(e){return l[e]}:te.mb,d=dl(s-o,c-u),h=d.getContext("2d"),p=h.getImageData(0,0,s-o,c-u),v=p.data,m=u,g=0;m<c;++m){t.$y=m-u;for(var b=o,y=m*a;b<s;++b,g+=4){t.$x=b-o,t.$value=f(b+y);var w=n(t);v[g+0]=w.r,v[g+1]=w.g,v[g+2]=w.b,v[g+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,o.dep?o:Object(te.m)(o(n)),i.dep?i:Object(te.m)(i(n)))})),t.reflow(!0).modifies(u)}}),Object(te.z)(GO,lo,{transform:function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=dO((e||"mercator").toLowerCase());t||Object(te.o)("Unrecognized projection type: "+e);return t()}(e.type),lO.forEach((function(t){null!=e[t]&&KO(n,t,e[t])}))):lO.forEach((function(t){e.modified(t)&&KO(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=function(e){return 1===(e=Object(te.i)(e)).length?e[0]:{type:zO,features:e.reduce((function(e,t){return e.concat(function(e){return e.type===zO?e.features:Object(te.i)(e).filter((function(e){return null!=e})).map((function(e){return e.type===LO?e:{type:LO,geometry:e}}))}(t))}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XO(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,u,s,c,l,f,d,h=e._root,p={data:r},v=e._x0,m=e._y0,g=e._x1,b=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((c=t>=(i=(v+g)/2))?v=i:g=i,(l=n>=(o=(m+b)/2))?m=o:b=o,a=h,!(h=h[f=l<<1|c]))return a[f]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,a?a[f]=p:e._root=p,e;do{a=a?a[f]=new Array(4):e._root=new Array(4),(c=t>=(i=(v+g)/2))?v=i:g=i,(l=n>=(o=(m+b)/2))?m=o:b=o}while((f=l<<1|c)===(d=(s>=o)<<1|u>=i));return a[d]=h,a[f]=p,e}var YO=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function JO(e){return e[0]}function QO(e){return e[1]}function ZO(e,t,n){var r=new ek(null==t?JO:t,null==n?QO:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function ek(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function tk(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nk=ZO.prototype=ek.prototype;nk.copy=function(){var e,t,n=new ek(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=tk(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=tk(t));return n},nk.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return XO(this.cover(t,n),t,n,e)},nk.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),u=new Array(i),s=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,u[n]=a,r<s&&(s=r),r>l&&(l=r),a<c&&(c=a),a>f&&(f=a));if(s>l||c>f)return this;for(this.cover(s,c).cover(l,f),n=0;n<i;++n)XO(this,o[n],u[n],e[n]);return this},nk.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,u,s=a-n||1,c=this._root;n>e||e>=a||r>t||t>=i;)switch(u=(t<r)<<1|e<n,(o=new Array(4))[u]=c,c=o,s*=2,u){case 0:a=n+s,i=r+s;break;case 1:n=a-s,i=r+s;break;case 2:a=n+s,r=i-s;break;case 3:n=a-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},nk.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},nk.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nk.find=function(e,t,n){var r,a,i,o,u,s,c,l=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],v=this._root;for(v&&p.push(new YO(v,l,f,d,h)),null==n?n=1/0:(l=e-n,f=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(a=s.x0)>d||(i=s.y0)>h||(o=s.x1)<l||(u=s.y1)<f))if(v.length){var m=(a+o)/2,g=(i+u)/2;p.push(new YO(v[3],m,g,o,u),new YO(v[2],a,g,m,u),new YO(v[1],m,i,o,g),new YO(v[0],a,i,m,g)),(c=(t>=g)<<1|e>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var b=e-+this._x.call(null,v.data),y=t-+this._y.call(null,v.data),w=b*b+y*y;if(w<n){var x=Math.sqrt(n=w);l=e-x,f=t-x,d=e+x,h=t+x,r=v.data}}return r},nk.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,u,s,c,l,f,d,h=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!h)return this;if(h.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(l=o>=(s=(v+g)/2))?v=s:g=s,t=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(a=h.next)&&delete h.next,r?(a?r.next=a:delete r.next,this):t?(a?t[f]=a:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=a,this)},nk.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},nk.root=function(){return this._root},nk.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},nk.visit=function(e){var t,n,r,a,i,o,u=[],s=this._root;for(s&&u.push(new YO(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&s.length){var c=(r+i)/2,l=(a+o)/2;(n=s[3])&&u.push(new YO(n,c,l,i,o)),(n=s[2])&&u.push(new YO(n,r,l,c,o)),(n=s[1])&&u.push(new YO(n,c,a,i,l)),(n=s[0])&&u.push(new YO(n,r,a,c,l))}return this},nk.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new YO(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,u=t.y0,s=t.x1,c=t.y1,l=(o+s)/2,f=(u+c)/2;(i=a[0])&&n.push(new YO(i,o,u,l,f)),(i=a[1])&&n.push(new YO(i,l,u,s,f)),(i=a[2])&&n.push(new YO(i,o,f,l,c)),(i=a[3])&&n.push(new YO(i,l,f,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},nk.x=function(e){return arguments.length?(this._x=e,this):this._x},nk.y=function(e){return arguments.length?(this._y=e,this):this._y};var rk=function(e){return function(){return e}},ak=function(e){return 1e-6*(e()-.5)};function ik(e){return e.x+e.vx}function ok(e){return e.y+e.vy}var uk=n(753),sk=n(233),ck=4294967296;function lk(e){return e.x}function fk(e){return e.y}var dk=Math.PI*(3-Math.sqrt(5)),hk=function(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),i=0,o=.6,u=new Map,s=Object(sk.c)(f),c=Object(uk.a)("tick","end"),l=function(){var e=1;return function(){return(e=(1664525*e+1013904223)%ck)/ck}}();function f(){d(),c.call("tick",t),n<r&&(s.stop(),c.call("end",t))}function d(r){var s,c,l=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(i-n)*a,u.forEach((function(e){e(n)})),s=0;s<l;++s)null==(c=e[s]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(.5+n),i=n*dk;t.x=a*Math.cos(i),t.y=a*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,l),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return s.restart(f),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),u.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(i=+e,t):i},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(l=e,u.forEach(p),t):l},force:function(e,n){return arguments.length>1?(null==n?u.delete(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var a,i,o,u,s,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(a=t-(u=e[c]).x)*a+(i=n-u.y)*i)<r&&(s=u,r=o);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}};function pk(e){return e.index}function vk(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}var mk={center:function(e,t){var n,r=1;function a(){var a,i,o=n.length,u=0,s=0;for(a=0;a<o;++a)u+=(i=n[a]).x,s+=i.y;for(u=(u/o-e)*r,s=(s/o-t)*r,a=0;a<o;++a)(i=n[a]).x-=u,i.y-=s}return null==e&&(e=0),null==t&&(t=0),a.initialize=function(e){n=e},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(e){return arguments.length?(t=+e,a):t},a.strength=function(e){return arguments.length?(r=+e,a):r},a},collide:function(e){var t,n,r,a=1,i=1;function o(){for(var e,o,s,c,l,f,d,h=t.length,p=0;p<i;++p)for(o=ZO(t,ik,ok).visitAfter(u),e=0;e<h;++e)s=t[e],f=n[s.index],d=f*f,c=s.x+s.vx,l=s.y+s.vy,o.visit(v);function v(e,t,n,i,o){var u=e.data,h=e.r,p=f+h;if(!u)return t>c+p||i<c-p||n>l+p||o<l-p;if(u.index>s.index){var v=c-u.x-u.vx,m=l-u.y-u.vy,g=v*v+m*m;g<p*p&&(0===v&&(g+=(v=ak(r))*v),0===m&&(g+=(m=ak(r))*m),g=(p-(g=Math.sqrt(g)))/g*a,s.vx+=(v*=g)*(p=(h*=h)/(d+h)),s.vy+=(m*=g)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,a,i=t.length;for(n=new Array(i),r=0;r<i;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!==typeof e&&(e=rk(null==e?1:+e)),o.initialize=function(e,n){t=e,r=n,s()},o.iterations=function(e){return arguments.length?(i=+e,o):i},o.strength=function(e){return arguments.length?(a=+e,o):a},o.radius=function(t){return arguments.length?(e="function"===typeof t?t:rk(+t),s(),o):e},o},nbody:function(){var e,t,n,r,a,i=rk(-30),o=1,u=1/0,s=.81;function c(n){var a,i=e.length,o=ZO(e,lk,fk).visitAfter(f);for(r=n,a=0;a<i;++a)t=e[a],o.visit(d)}function l(){if(e){var t,n,r=e.length;for(a=new Array(r),t=0;t<r;++t)n=e[t],a[n.index]=+i(n,t,e)}}function f(e){var t,n,r,i,o,u=0,s=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(u+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{u+=a[t.data.index]}while(t=t.next)}e.value=u}function d(e,i,c,l){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=l-i,p=f*f+d*d;if(h*h/s<p)return p<u&&(0===f&&(p+=(f=ak(n))*f),0===d&&(p+=(d=ak(n))*d),p<o&&(p=Math.sqrt(o*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=u)){(e.data!==t||e.next)&&(0===f&&(p+=(f=ak(n))*f),0===d&&(p+=(d=ak(n))*d),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(h=a[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return c.initialize=function(t,r){e=t,n=r,l()},c.strength=function(e){return arguments.length?(i="function"===typeof e?e:rk(+e),l(),c):i},c.distanceMin=function(e){return arguments.length?(o=e*e,c):Math.sqrt(o)},c.distanceMax=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c.theta=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c},link:function(e){var t,n,r,a,i,o,u=pk,s=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},c=rk(30),l=1;function f(r){for(var a=0,u=e.length;a<l;++a)for(var s,c,f,d,h,p,v,m=0;m<u;++m)c=(s=e[m]).source,d=(f=s.target).x+f.vx-c.x-c.vx||ak(o),h=f.y+f.vy-c.y-c.vy||ak(o),d*=p=((p=Math.sqrt(d*d+h*h))-n[m])/p*r*t[m],h*=p,f.vx-=d*(v=i[m]),f.vy-=h*v,c.vx+=d*(v=1-v),c.vy+=h*v}function d(){if(r){var o,s,c=r.length,l=e.length,f=new Map(r.map((function(e,t){return[u(e,t,r),e]})));for(o=0,a=new Array(c);o<l;++o)(s=e[o]).index=o,"object"!==typeof s.source&&(s.source=vk(f,s.source)),"object"!==typeof s.target&&(s.target=vk(f,s.target)),a[s.source.index]=(a[s.source.index]||0)+1,a[s.target.index]=(a[s.target.index]||0)+1;for(o=0,i=new Array(l);o<l;++o)s=e[o],i[o]=a[s.source.index]/(a[s.source.index]+a[s.target.index]);t=new Array(l),h(),n=new Array(l),p()}}function h(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+s(e[n],n,e)}function p(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,o=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(u=e,f):u},f.iterations=function(e){return arguments.length?(l=+e,f):l},f.strength=function(e){return arguments.length?(s="function"===typeof e?e:rk(+e),h(),f):s},f.distance=function(e){return arguments.length?(c="function"===typeof e?e:rk(+e),p(),f):c},f},x:function(e){var t,n,r,a=rk(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vx+=(r[i]-a.x)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=rk(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:rk(+e),o(),i):a},i.x=function(t){return arguments.length?(e="function"===typeof t?t:rk(+t),o(),i):e},i},y:function(e){var t,n,r,a=rk(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vy+=(r[i]-a.y)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=rk(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:rk(+e),o(),i):a},i.y=function(t){return arguments.length?(e="function"===typeof t?t:rk(+t),o(),i):e},i}},gk="forces",bk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],yk=["static","iterations"],wk=["x","y","vx","vy"];function xk(e){lo.call(this,null,e)}function Ok(e,t,n,r){var a,i,o,u,s=Object(te.i)(t.forces);for(a=0,i=bk.length;a<i;++a)(o=bk[a])!==gk&&t.modified(o)&&e[o](t[o]);for(a=0,i=s.length;a<i;++a)u=gk+a,(o=n||t.modified(gk,a)?jk(s[a]):r&&kk(s[a],r)?e.force(u):null)&&e.force(u,o);for(i=e.numForces||0;a<i;++a)e.force(gk+a,null);return e.numForces=s.length,e}function kk(e,t){var n,r;for(n in e)if(Object(te.E)(r=e[n])&&t.modified(Object(te.g)(r)))return 1;return 0}function jk(e){var t,n;for(n in Object(te.w)(mk,e.force)||Object(te.o)("Unrecognized force: "+e.force),t=mk[e.force](),e)Object(te.E)(t[n])&&_k(t[n],e[n],e);return t}function _k(e,t,n){e(Object(te.E)(t)?function(e){return t(e,n)}:t)}function Sk(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}xk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:wk}]},Object(te.z)(xk,lo,{transform:function(e,t){var n,r,a=this.value,i=t.changed(t.ADD_REM),o=e.modified(bk),u=e.iterations||300;if(a?(i&&(t.modifies("index"),a.nodes(t.source)),(o||t.changed(t.MOD))&&Ok(a,e,0,t)):(this.value=a=function(e,t){var n=hk(e),r=n.stop,a=n.restart,i=!1;return n.stopped=function(){return i},n.restart=function(){return i=!1,a()},n.stop=function(){return i=!0,r()},Ok(n,t,!0).on("end",(function(){return i=!0}))}(t.source,e),a.on("tick",(n=t.dataflow,r=this,function(){return n.touch(r).run()})),e.static||(i=!0,a.tick()),t.modifies("index")),o||i||e.modified(yk)||t.changed()&&e.restart)if(a.alpha(Math.max(a.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(a.alphaMin(),1/u)),e.static)for(a.stop();--u>=0;)a.tick();else if(a.stopped()&&a.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){for(var n,r=t.dataflow,a=this._argops,i=0,o=a.length;i<o;++i)if((n=a[i]).name===gk&&"link"===n.op._argval.force)for(var u,s=n.op._argops,c=0,l=s.length;c<l;++c)if("links"===s[c].name&&(u=s[c].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(wk)}});var Ek=x.a.mark(Ck);function Ck(){var e,t,n,r,a,i;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[e=this];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){o.next=8;break}return o.next=5,e;case 5:if(r=e.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),Ek,this)}function Ak(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Nk)):void 0===t&&(t=Tk);for(var n,r,a,i,o,u=new Rk(e),s=[u];n=s.pop();)if((a=t(n.data))&&(o=(a=Array.from(a)).length))for(n.children=a,i=o-1;i>=0;--i)s.push(r=a[i]=new Rk(a[i])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Dk)}function Tk(e){return e.children}function Nk(e){return Array.isArray(e)?e[1]:null}function Ik(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Dk(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Rk(e){this.data=e,this.depth=this.height=0,this.parent=null}Rk.prototype=Ak.prototype=Object(pt.a)({constructor:Rk,count:function(){return this.eachAfter(Sk)},each:function(e,t){var n,r=-1,a=Object(vo.a)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.call(t,i,++r,this)}}catch(o){a.e(o)}finally{a.f()}return this},eachAfter:function(e,t){for(var n,r,a,i=this,o=[i],u=[],s=-1;i=o.pop();)if(u.push(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r]);for(;i=u.pop();)e.call(t,i,++s,this);return this},eachBefore:function(e,t){for(var n,r,a=this,i=[a],o=-1;a=i.pop();)if(e.call(t,a,++o,this),n=a.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(e,t){var n,r=-1,a=Object(vo.a)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e.call(t,i,++r,this))return i}}catch(o){a.e(o)}finally{a.f()}},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;e=n.pop(),t=r.pop();for(;e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Ak(this).eachBefore(Ik)}},Symbol.iterator,Ck);var Fk=function(e){for(var t,n,r=0,a=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,i=[];r<a;)t=e[r],n&&Lk(n,t)?++r:(n=Bk(i=Mk(i,t)),r=0);return n};function Mk(e,t){var n,r;if(zk(t,e))return[t];for(n=0;n<e.length;++n)if(Pk(t,e[n])&&zk(Uk(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Pk(Uk(e[n],e[r]),t)&&Pk(Uk(e[n],t),e[r])&&Pk(Uk(e[r],t),e[n])&&zk(Wk(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Pk(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return n<0||n*n<r*r+a*a}function Lk(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function zk(e,t){for(var n=0;n<t.length;++n)if(!Lk(e,t[n]))return!1;return!0}function Bk(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return Uk(e[0],e[1]);case 3:return Wk(e[0],e[1],e[2])}var t}function Uk(e,t){var n=e.x,r=e.y,a=e.r,i=t.x,o=t.y,u=t.r,s=i-n,c=o-r,l=u-a,f=Math.sqrt(s*s+c*c);return{x:(n+i+s/f*l)/2,y:(r+o+c/f*l)/2,r:(f+a+u)/2}}function Wk(e,t,n){var r=e.x,a=e.y,i=e.r,o=t.x,u=t.y,s=t.r,c=n.x,l=n.y,f=n.r,d=r-o,h=r-c,p=a-u,v=a-l,m=s-i,g=f-i,b=r*r+a*a-i*i,y=b-o*o-u*u+s*s,w=b-c*c-l*l+f*f,x=h*p-d*v,O=(p*w-v*y)/(2*x)-r,k=(v*m-p*g)/x,j=(h*y-d*w)/(2*x)-a,_=(d*g-h*m)/x,S=k*k+_*_-1,E=2*(i+O*k+j*_),C=O*O+j*j-i*i,A=-(S?(E+Math.sqrt(E*E-4*S*C))/(2*S):C/E);return{x:r+O+k*A,y:a+j+_*A,r:A}}function Vk(e,t,n){var r,a,i,o,u=e.x-t.x,s=e.y-t.y,c=u*u+s*s;c?(a=t.r+n.r,a*=a,o=e.r+n.r,a>(o*=o)?(r=(c+o-a)/(2*c),i=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*u-i*s,n.y=e.y-r*s+i*u):(r=(c+a-o)/(2*c),i=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*u-i*s,n.y=t.y+r*s+i*u)):(n.x=t.x+n.r,n.y=t.y)}function qk(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function $k(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,i=(t.y*n.r+n.y*t.r)/r;return a*a+i*i}function Hk(e){this._=e,this.next=null,this.previous=null}function Gk(e){if(!(i=(t=e,e="object"===typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,a,i,o,u,s,c,l,f,d;if((n=e[0]).x=0,n.y=0,!(i>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(i>2))return n.r+r.r;Vk(r,n,a=e[2]),n=new Hk(n),r=new Hk(r),a=new Hk(a),n.next=a.previous=r,r.next=n.previous=a,a.next=r.previous=n;e:for(s=3;s<i;++s){Vk(n._,r._,a=e[s]),a=new Hk(a),c=r.next,l=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(qk(c._,a._)){r=c,n.next=r,r.previous=n,--s;continue e}f+=c._.r,c=c.next}else{if(qk(l._,a._)){(n=l).next=r,r.previous=n,--s;continue e}d+=l._.r,l=l.previous}}while(c!==l.next);for(a.previous=n,a.next=r,n.next=r.previous=r=a,o=$k(n);(a=a.next)!==r;)(u=$k(a))<o&&(n=a,o=u);r=n.next}for(n=[r._],a=r;(a=a.next)!==r;)n.push(a._);for(a=Fk(n),s=0;s<i;++s)(n=e[s]).x-=a.x,n.y-=a.y;return a.r}function Kk(e){return null==e?null:Xk(e)}function Xk(e){if("function"!==typeof e)throw new Error;return e}function Yk(){return 0}var Jk=function(e){return function(){return e}};function Qk(e){return Math.sqrt(e.value)}function Zk(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function ej(e,t){return function(n){if(r=n.children){var r,a,i,o=r.length,u=e(n)*t||0;if(u)for(a=0;a<o;++a)r[a].r+=u;if(i=Gk(r),u)for(a=0;a<o;++a)r[a].r-=u;n.r=i+u}}}function tj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var nj=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},rj=function(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(r-t)/e.value;++u<s;)(i=o[u]).y0=n,i.y1=a,i.x0=t,i.x1=t+=i.value*c},aj={depth:-1},ij={};function oj(e){return e.id}function uj(e){return e.parentId}var sj=function(){var e=oj,t=uj;function n(n){var r,a,i,o,u,s,c,l=Array.from(n),f=l.length,d=new Map;for(a=0;a<f;++a)r=l[a],u=l[a]=new Rk(r),null!=(s=e(r,a,n))&&(s+="")&&(c=u.id=s,d.set(c,d.has(c)?ij:u)),null!=(s=t(r,a,n))&&(s+="")&&(u.parent=s);for(a=0;a<f;++a)if(s=(u=l[a]).parent){if(!(o=d.get(s)))throw new Error("missing: "+s);if(o===ij)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(i)throw new Error("multiple roots");i=u}if(!i)throw new Error("no root");if(i.parent=aj,i.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(Dk),i.parent=null,f>0)throw new Error("cycle");return i}return n.id=function(t){return arguments.length?(e=Xk(t),n):e},n.parentId=function(e){return arguments.length?(t=Xk(e),n):t},n};function cj(e,t){return e.parent===t.parent?1:2}function lj(e){var t=e.children;return t?t[0]:e.t}function fj(e){var t=e.children;return t?t[t.length-1]:e.t}function dj(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function hj(e,t,n){return e.a.parent===t.parent?e.a:n}function pj(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}pj.prototype=Object.create(Rk.prototype);function vj(e,t){return e.parent===t.parent?1:2}function mj(e,t){return e+t.x}function gj(e,t){return Math.max(e,t.y)}var bj=function(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(a-n)/e.value;++u<s;)(i=o[u]).x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*c},yj=(1+Math.sqrt(5))/2;function wj(e,t,n,r,a,i){for(var o,u,s,c,l,f,d,h,p,v,m,g=[],b=t.children,y=0,w=0,x=b.length,O=t.value;y<x;){s=a-n,c=i-r;do{l=b[w++].value}while(!l&&w<x);for(f=d=l,m=l*l*(v=Math.max(c/s,s/c)/(O*e)),p=Math.max(d/m,m/f);w<x;++w){if(l+=u=b[w].value,u<f&&(f=u),u>d&&(d=u),m=l*l*v,(h=Math.max(d/m,m/f))>p){l-=u;break}p=h}g.push(o={value:l,dice:s<c,children:b.slice(y,w)}),o.dice?rj(o,n,r,a,O?r+=c*l/O:i):bj(o,n,r,O?n+=s*l/O:a,i),O-=l,y=w}return g}var xj=function e(t){function n(e,n,r,a,i){wj(t,e,n,r,a,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(yj),Oj=function e(t){function n(e,n,r,a,i){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,c,l,f=-1,d=o.length,h=e.value;++f<d;){for(s=(u=o[f]).children,c=u.value=0,l=s.length;c<l;++c)u.value+=s[c].value;u.dice?rj(u,n,r,a,h?r+=(i-r)*u.value/h:i):bj(u,n,r,h?n+=(a-n)*u.value/h:a,i),h-=u.value}else e._squarify=o=wj(t,e,n,r,a,i),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(yj);function kj(e,t,n){var r={};return e.each((function(e){var a=e.data;n(a)&&(r[t(a)]=e)})),e.lookup=r,e}function jj(e){lo.call(this,null,e)}jj.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var _j=function(e){return e.values};function Sj(){var e=[],t={entries:function(e){return r(n(e,0),0)},key:function(n){return e.push(n),t}};function n(t,r){if(r>=e.length)return t;for(var a,i,o,u=t.length,s=e[r++],c={},l={},f=-1;++f<u;)(o=c[a=s(i=t[f])+""])?o.push(i):c[a]=[i];for(a in c)l[a]=n(c[a],r);return l}function r(t,n){if(++n>e.length)return t;var a=[];for(var i in t)a.push({key:i,values:r(t[i],n)});return a}return t}function Ej(e){lo.call(this,null,e)}Object(te.z)(jj,lo,{transform:function(e,t){t.source||Object(te.o)("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),a=t.clone(),i=this.value;return(!i||r||t.changed())&&(i&&i.each((function(e){e.children&&_i(e.data)&&a.rem.push(e.data)})),this.value=i=Ak({values:Object(te.i)(e.keys).reduce((function(e,t){return e.key(t),e}),Sj()).entries(a.source)},_j),n&&i.each((function(e){e.children&&(e=Ci(e.data),a.add.push(e),a.source.push(e))})),kj(i,Si,Si)),a.source.root=i,a}});var Cj=function(e,t){return e.parent===t.parent?1:2};Object(te.z)(Ej,lo,{transform:function(e,t){t.source&&t.source.root||Object(te.o)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,a=t.source.root,i=e.as||r;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(Ii(e.sort,(function(e){return e.data}))),function(e,t,n){for(var r,a=0,i=t.length;a<i;++a)(r=t[a])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?Cj:te.Q);try{this.value=n(a)}catch(o){Object(te.o)(o)}return a.each((function(e){return function(e,t,n){for(var r=e.data,a=t.length-1,i=0;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,i)})),t.reflow(e.modified()).modifies(i).modifies("leaf")}});var Aj=["x","y","r","depth","children"];function Tj(e){Ej.call(this,e)}Tj.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Aj.length,default:Aj}]},Object(te.z)(Tj,Ej,{layout:function(){var e=null,t=1,n=1,r=Yk;function a(a){return a.x=t/2,a.y=n/2,e?a.eachBefore(Zk(e)).eachAfter(ej(r,.5)).eachBefore(tj(1)):a.eachBefore(Zk(Qk)).eachAfter(ej(Yk,1)).eachAfter(ej(r,a.r/Math.min(t,n))).eachBefore(tj(Math.min(t,n)/(2*a.r))),a}return a.radius=function(t){return arguments.length?(e=Kk(t),a):e},a.size=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.padding=function(e){return arguments.length?(r="function"===typeof e?e:Jk(+e),a):r},a},params:["radius","size","padding"],fields:Aj});var Nj=["x0","y0","x1","y1","depth","children"];function Ij(e){Ej.call(this,e)}function Dj(e){lo.call(this,null,e)}Ij.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Nj.length,default:Nj}]},Object(te.z)(Ij,Ej,{layout:function(){var e=1,t=1,n=0,r=!1;function a(a){var i=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/i,a.eachBefore(function(e,t){return function(r){r.children&&rj(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var a=r.x0,i=r.y0,o=r.x1-n,u=r.y1-n;o<a&&(a=o=(a+o)/2),u<i&&(i=u=(i+u)/2),r.x0=a,r.y0=i,r.x1=o,r.y1=u}}(t,i)),r&&a.eachBefore(nj),a}return a.round=function(e){return arguments.length?(r=!!e,a):r},a.size=function(n){return arguments.length?(e=+n[0],t=+n[1],a):[e,t]},a.padding=function(e){return arguments.length?(n=+e,a):n},a},params:["size","round","padding"],fields:Nj}),Dj.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(te.z)(Dj,lo,{transform:function(e,t){t.source||Object(te.o)("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),i=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),i&&(n=a.source.length?kj(sj().id(e.key).parentId(e.parentKey)(a.source),e.key,te.ib):kj(sj()([{}]),e.key,e.key)),a.source.root=this.value=n,a}});var Rj={tidy:function(){var e=cj,t=1,n=1,r=null;function a(a){var s=function(e){for(var t,n,r,a,i,o=new pj(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(i=r.length),a=i-1;a>=0;--a)u.push(n=t.children[a]=new pj(r[a],a)),n.parent=t;return(o.parent=new pj(null,0)).children=[o],o}(a);if(s.eachAfter(i),s.parent.m=-s.z,s.eachBefore(o),r)a.eachBefore(u);else{var c=a,l=a,f=a;a.eachBefore((function(e){e.x<c.x&&(c=e),e.x>l.x&&(l=e),e.depth>f.depth&&(f=e)}));var d=c===l?1:e(c,l)/2,h=d-c.x,p=t/(l.x+d+h),v=n/(f.depth||1);a.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*v}))}return a}function i(t){var n=t.children,r=t.parent.children,a=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,a=e.children,i=a.length;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,n,r){if(n){for(var a,i=t,o=t,u=n,s=i.parent.children[0],c=i.m,l=o.m,f=u.m,d=s.m;u=fj(u),i=lj(i),u&&i;)s=lj(s),(o=fj(o)).a=t,(a=u.z+f-i.z-c+e(u._,i._))>0&&(dj(hj(u,t,r),t,a),c+=a,l+=a),f+=u.m,c+=i.m,d+=s.m,l+=o.m;u&&!fj(o)&&(o.t=u,o.m+=f-l),i&&!lj(s)&&(s.t=i,s.m+=c-d,r=t)}return r}(t,a,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=t,e.y=e.depth*n}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a},cluster:function(){var e=vj,t=1,n=1,r=!1;function a(a){var i,o=0;a.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(mj,0)/e.length}(n),t.y=function(e){return 1+e.reduce(gj,0)}(n)):(t.x=i?o+=e(t,i):0,t.y=0,i=t)}));var u=function(e){for(var t;t=e.children;)e=t[0];return e}(a),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(a),c=u.x-e(u,s)/2,l=s.x+e(s,u)/2;return a.eachAfter(r?function(e){e.x=(e.x-a.x)*t,e.y=(a.y-e.y)*n}:function(e){e.x=(e.x-c)/(l-c)*t,e.y=(1-(a.y?e.y/a.y:1))*n})}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a}},Fj=["x","y","depth","children"];function Mj(e){Ej.call(this,e)}function Pj(e){lo.call(this,[],e)}Mj.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Fj.length,default:Fj}]},Object(te.z)(Mj,Ej,{layout:function(e){var t=e||"tidy";if(Object(te.w)(Rj,t))return Rj[t]();Object(te.o)("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Fj}),Pj.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(te.z)(Pj,lo,{transform:function(e,t){var n=this.value,r=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),i={};return r||Object(te.o)("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,(function(e){return i[Si(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&i[Si(t)]&&i[Si(n)]&&a.add.push(Ci({source:n,target:t}))})),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){return i[Si(e)]=1})),n.forEach((function(e){(i[Si(e.source)]||i[Si(e.target)])&&a.mod.push(e)}))),a}});var Lj={binary:function(e,t,n,r,a){var i,o,u=e.children,s=u.length,c=new Array(s+1);for(c[0]=o=i=0;i<s;++i)c[i+1]=o+=u[i].value;!function e(t,n,r,a,i,o,s){if(t>=n-1){var l=u[t];return l.x0=a,l.y0=i,l.x1=o,void(l.y1=s)}var f=c[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var v=h+p>>>1;c[v]<d?h=v+1:p=v}d-c[h-1]<c[h]-d&&t+1<h&&--h;var m=c[h]-f,g=r-m;if(o-a>s-i){var b=r?(a*g+o*m)/r:o;e(t,h,m,a,i,b,s),e(h,n,g,b,i,o,s)}else{var y=r?(i*g+s*m)/r:s;e(t,h,m,a,i,o,y),e(h,n,g,a,y,o,s)}}(0,s,e.value,t,n,r,a)},dice:rj,slice:bj,slicedice:function(e,t,n,r,a){(1&e.depth?bj:rj)(e,t,n,r,a)},squarify:xj,resquarify:Oj},zj=["x0","y0","x1","y1","depth","children"];function Bj(e){Ej.call(this,e)}Bj.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zj.length,default:zj}]},Object(te.z)(Bj,Ej,{layout:function(){var e=function(){var e=xj,t=!1,n=1,r=1,a=[0],i=Yk,o=Yk,u=Yk,s=Yk,c=Yk;function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),a=[0],t&&e.eachBefore(nj),e}function f(t){var n=a[t.depth],r=t.x0+n,l=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t.x0=r,t.y0=l,t.x1=f,t.y1=d,t.children&&(n=a[t.depth+1]=i(t)/2,r+=c(t)-n,l+=o(t)-n,(f-=u(t)-n)<r&&(r=f=(r+f)/2),(d-=s(t)-n)<l&&(l=d=(l+d)/2),e(t,r,l,f,d))}return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=Xk(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(i="function"===typeof e?e:Jk(+e),l):i},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o="function"===typeof e?e:Jk(+e),l):o},l.paddingRight=function(e){return arguments.length?(u="function"===typeof e?e:Jk(+e),l):u},l.paddingBottom=function(e){return arguments.length?(s="function"===typeof e?e:Jk(+e),l):s},l.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:Jk(+e),l):c},l}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Object(te.w)(Lj,t)?e.tile(Lj[t]):Object(te.o)("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:zj});function Uj(e,t,n,r){var a=e.width,i=e.height,o=n||r,u=dl(a,i).getContext("2d");t.forEach((function(e){return Wj(u,e,o)}));var s,c,l,f,d,h=new Uint32Array(u.getImageData(0,0,a,i).data.buffer),p=e.bitmap(),v=o&&e.bitmap();for(c=0;c<i;++c)for(s=0;s<a;++s)(d=4278190080&h[c*a+s])&&(l=e(s),f=e(c),r||p.set(l,f),o&&268435456^d&&v.set(l,f));return[p,v]}function Wj(e,t,n){if(t.length){var r=t[0].mark.marktype;"group"===r?t.forEach((function(t){t.items.forEach((function(t){return Wj(e,t.items,n)}))})):Cv[r].draw(e,{items:n?t.map(Vj):t})}}function Vj(e){var t=Ti(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}var qj=31,$j=new Uint32Array(33),Hj=new Uint32Array(33);Hj[0]=0,$j[0]=~Hj[0];for(var Gj=1;Gj<=32;++Gj)Hj[Gj]=Hj[Gj-1]<<1|1,$j[Gj]=~Hj[Gj];function Kj(e,t,n){var r=Math.max(1,Math.sqrt(e*t/1e6)),a=~~((e+2*n+r)/r),i=~~((t+2*n+r)/r),o=function(e){return~~((e+n)/r)};return o.invert=function(e){return e*r-n},o.bitmap=function(){return function(e,t){var n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function a(e,t){n[e]&=t}return{array:n,get:function(t,r){var a=r*e+t;return n[a>>>5]&1<<(a&qj)},set:function(t,n){var a=n*e+t;r(a>>>5,1<<(a&qj))},clear:function(t,n){var r=n*e+t;a(r>>>5,~(1<<(r&qj)))},getRange:function(t,r,a,i){for(var o,u,s,c,l=i;l>=r;--l)if((s=(o=l*e+t)>>>5)===(c=(u=l*e+a)>>>5)){if(n[s]&$j[o&qj]&Hj[1+(u&qj)])return!0}else{if(n[s]&$j[o&qj])return!0;if(n[c]&Hj[1+(u&qj)])return!0;for(var f=s+1;f<c;++f)if(n[f])return!0}return!1},setRange:function(t,n,a,i){for(var o,u,s,c,l;n<=i;++n)if((s=(o=n*e+t)>>>5)===(c=(u=n*e+a)>>>5))r(s,$j[o&qj]&Hj[1+(u&qj)]);else for(r(s,$j[o&qj]),r(c,Hj[1+(u&qj)]),l=s+1;l<c;++l)r(l,4294967295)},clearRange:function(t,n,r,i){for(var o,u,s,c,l;n<=i;++n)if((s=(o=n*e+t)>>>5)===(c=(u=n*e+r)>>>5))a(s,Hj[o&qj]|$j[1+(u&qj)]);else for(a(s,Hj[o&qj]),a(c,$j[1+(u&qj)]),l=s+1;l<c;++l)a(l,0)},outOfBounds:function(n,r,a,i){return n<0||r<0||i>=t||a>=e}}}(a,i)},o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Xj(e,t,n,r,a,i){var o=n/2;return e-o<0||e+o>a||t-(o=r/2)<0||t+o>i}function Yj(e,t,n,r,a,i,o,u){var s=a*i/(2*r),c=e(t-s),l=e(t+s),f=e(n-(i/=2)),d=e(n+i);return o.outOfBounds(c,f,l,d)||o.getRange(c,f,l,d)||u&&u.getRange(c,f,l,d)}var Jj=[-1,-1,1,1],Qj=[-1,1,-1,1];var Zj=["right","center","left"],e_=["bottom","middle","top"];function t_(e,t,n,r,a,i,o,u,s,c,l,f){return!(a.outOfBounds(e,n,t,r)||(f&&i?i.getRange(e,n,t,r)||!function(e,t,n,r,a){return a[0]<=e&&n<=a[2]&&a[3]<=t&&r<=a[5]}(o,s,u,c,l):a.getRange(e,n,t,r)))}var n_={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},r_={naive:function(e,t,n,r){var a=e.width,i=e.height;return function(e){for(var t,n,o,u,s,c,l,f=e.datum.datum.items[r].items,d=f.length,h=e.datum.fontSize,p=lv.width(e.datum,e.datum.text),v=0,m=0;m<d;++m)t=f[m].x,o=f[m].y,s=(t+(n=void 0===f[m].x2?t:f[m].x2))/2,c=(o+(u=void 0===f[m].y2?o:f[m].y2))/2,(l=Math.abs(n-t+u-o))>=v&&(v=l,e.x=s,e.y=c);return s=p/2,c=h/2,t=e.x-s,n=e.x+s,o=e.y-c,u=e.y+c,e.align="center",t<0&&n<=a?e.align="left":0<=t&&a<n&&(e.align="right"),e.baseline="middle",o<0&&u<=i?e.baseline="top":0<=o&&i<u&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1];function s(t,n,r,s,c){var l,f=e.invert(t),d=e.invert(n),h=r,p=i;if(!Xj(f,d,s,c,a,i)&&!Yj(e,f,d,c,s,h,o,u)&&!Yj(e,f,d,c,s,c,o,null)){for(;p-h>=1;)Yj(e,f,d,c,s,l=(h+p)/2,o,u)?p=l:h=l;if(h>r)return[f,d,h,!0]}}return function(t){for(var u,c,l,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_=t.datum.datum.items[r].items,S=_.length,E=t.datum.fontSize,C=lv.width(t.datum,t.datum.text),A=n?E:0,T=!1,N=!1,I=0,D=0;D<S;++D){for(u=_[D].x,l=_[D].y,u>(c=void 0===_[D].x2?u:_[D].x2)&&(j=u,u=c,c=j),l>(f=void 0===_[D].y2?l:_[D].y2)&&(j=l,l=f,f=j),g=~~(((m=e(u))+(b=e(c)))/2),w=~~(((y=e(l))+(x=e(f)))/2),p=g;p>=m;--p)for(v=w;v>=y;--v)if(k=s(p,v,A,C,E)){var R=k,F=Object(mo.a)(R,4);t.x=F[0],t.y=F[1],A=F[2],T=F[3]}for(p=g;p<=b;++p)for(v=w;v<=x;++v)if(k=s(p,v,A,C,E)){var M=k,P=Object(mo.a)(M,4);t.x=P[0],t.y=P[1],A=P[2],T=P[3]}T||n||(d=(u+c)/2,h=(l+f)/2,(O=Math.abs(c-u+f-l))>=I&&!Xj(d,h,C,E,a,i)&&!Yj(e,d,h,E,C,E,o,null)&&(I=O,t.x=d,t.y=h,N=!0))}return!(!T&&!N)&&(d=C/2,h=E/2,o.setRange(e(t.x-d),e(t.y-h),e(t.x+d),e(t.y+h)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1],s=e.bitmap();return function(t){for(var c,l,f,d,h,p,v,m,g,b,y,w,x=t.datum.datum.items[r].items,O=x.length,k=t.datum.fontSize,j=lv.width(t.datum,t.datum.text),_=[],S=n?k:0,E=!1,C=!1,A=0,T=0;T<O;++T){for(c=x[T].x,f=x[T].y,l=void 0===x[T].x2?c:x[T].x2,d=void 0===x[T].y2?f:x[T].y2,_.push([e((c+l)/2),e((f+d)/2)]);_.length;){var N=_.pop(),I=Object(mo.a)(N,2);if(v=I[0],m=I[1],!(o.get(v,m)||u.get(v,m)||s.get(v,m))){s.set(v,m);for(var D=0;D<4;++D)h=v+Jj[D],p=m+Qj[D],s.outOfBounds(h,p,h,p)||_.push([h,p]);if(h=e.invert(v),p=e.invert(m),g=S,b=i,!Xj(h,p,j,k,a,i)&&!Yj(e,h,p,k,j,g,o,u)&&!Yj(e,h,p,k,j,k,o,null)){for(;b-g>=1;)Yj(e,h,p,k,j,y=(g+b)/2,o,u)?b=y:g=y;g>S&&(t.x=h,t.y=p,S=g,E=!0)}}}E||n||(h=(c+l)/2,p=(f+d)/2,(w=Math.abs(l-c+d-f))>=A&&!Xj(h,p,j,k,a,i)&&!Yj(e,h,p,k,j,k,o,null)&&(A=w,t.x=h,t.y=p,C=!0))}return!(!E&&!C)&&(h=j/2,p=k/2,o.setRange(e(t.x-h),e(t.y-p),e(t.x+h),e(t.y+p)),t.align="center",t.baseline="middle",!0)}}};function a_(e,t,n,r,a,i,o,u,s,c,l){if(!e.length)return e;var f,d,h=Math.max(r.length,a.length),p=function(e,t){for(var n=new Float64Array(t),r=e.length,a=0;a<r;++a)n[a]=e[a]||0;for(var i=r;i<t;++i)n[i]=n[r-1];return n}(r,h),v=function(e,t){for(var n=new Int8Array(t),r=e.length,a=0;a<r;++a)n[a]|=n_[e[a]];for(var i=r;i<t;++i)n[i]=n[r-1];return n}(a,h),m=(f=e[0].datum)&&f.mark&&f.mark.marktype,g="group"===m&&e[0].datum.items[s].marktype,b="area"===g,y=function(e,t,n,r){var a=function(e){return[e.x,e.x,e.x,e.y,e.y,e.y]};return e?"line"===e||"area"===e?function(e){return a(e.datum)}:"line"===t?function(e){var t=e.datum.items[r].items;return a(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:function(e){var t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:a}(m,g,u,s),w=Kj(t[0],t[1],c),x=b&&"naive"===l,O=e.map((function(e){return{datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)}}));if(!x){n&&O.sort((function(e,t){return n(e.datum,t.datum)}));for(var k=!1,j=0;j<v.length&&!k;++j)k=5===v[j]||p[j]<0;m&&(o||b)&&(i=[e.map((function(e){return e.datum}))].concat(i)),d=i.length?Uj(w,i,k,b):function(e,t){var n=e.bitmap();return(t||[]).forEach((function(t){return n.set(e(t.boundary[0]),e(t.boundary[3]))})),[n,void 0]}(w,o&&O)}var _=b?r_[l](w,d,o,s):function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1],s=r.length;return function(t){var c=t.boundary,l=t.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>a||c[3]>i)return!1;for(var f,d,h,p,v,m,g,b,y,w,x,O,k,j,_,S=0,E=0;E<s;++E){if(f=(3&n[E])-1,d=(n[E]>>>2&3)-1,h=0===f&&0===d||r[E]<0,p=f&&d?Math.SQRT1_2:1,v=r[E]<0?-1:1,m=c[1+f]+r[E]*f*p,b=(x=c[4+d]+v*l*d/2+r[E]*d*p)-l/2,y=x+l/2,O=e(m),j=e(b),_=e(y),!S){if(!t_(O,O,j,_,o,u,m,m,b,y,c,h))continue;S=lv.width(t.datum,t.datum.text)}if(g=(w=m+v*S*f/2)+S/2,t_(O=e(m=w-S/2),k=e(g),j,_,o,u,m,g,b,y,c,h))return t.x=f?f*v<0?g:m:w,t.y=d?d*v<0?y:b:x,t.align=Zj[f*v+1],t.baseline=e_[d*v+1],o.setRange(O,j,k,_),!0}return!1}}(w,d,v,p);return O.forEach((function(e){return e.opacity=+_(e)})),O}var i_=["x","y","opacity","align","baseline"],o_=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function u_(e){lo.call(this,null,e)}function s_(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}function c_(e){lo.call(this,null,e)}u_.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:o_},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:i_.length,default:i_}]},Object(te.z)(u_,lo,{transform:function(e,t){var n=e.modified();if(n||t.changed(t.ADD_REM)||function(n){var r=e[n];return Object(te.E)(r)&&t.modified(r.fields)}("sort")){e.size&&2===e.size.length||Object(te.o)("Size parameter should be specified as a [width, height] array.");var r=e.as||i_;return a_(t.materialize(t.SOURCE).source,e.size,e.sort,Object(te.i)(e.offset||1),Object(te.i)(e.anchor||o_),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((function(e){var t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}}),c_.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(te.z)(c_,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=s_(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(te.h),i=a.length,o=e.as||[Object(te.h)(e.x),Object(te.h)(e.y)],u=[];r.forEach((function(t){gu(t,e.x,e.y,e.bandwidth||.3).forEach((function(e){for(var n={},r=0;r<i;++r)n[a[r]]=t.dims[r];n[o[0]]=e[0],n[o[1]]=e[1],u.push(Ci(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});var l_={linear:lu,log:fu,exp:du,pow:hu,quad:pu,poly:vu};function f_(e){lo.call(this,null,e)}f_.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(l_)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(te.z)(f_,lo,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=s_(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(te.h),i=e.method||"linear",o=e.order||3,u=function(e,t){return"poly"===e?t:"quad"===e?2:1}(i,o),s=e.as||[Object(te.h)(e.x),Object(te.h)(e.y)],c=l_[i],l=[],f=e.extent;Object(te.w)(l_,i)||Object(te.o)("Invalid regression method: "+i),null!=f&&"log"===i&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((function(n){if(n.length<=u)t.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=c(n,e.x,e.y,o);if(e.params)l.push(Ci({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var d=f||Object(te.q)(n,e.x),h=function(e){for(var t={},r=0;r<a.length;++r)t[a[r]]=n.dims[r];t[s[0]]=e[0],t[s[1]]=e[1],l.push(Ci(t))};"linear"===i?d.forEach((function(e){return h([e,r.predict(e)])})):xu(r.predict,d,25,200).forEach(h)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});var d_=Math.pow(2,-52),h_=new Uint32Array(512),p_=function(){function e(t){Object(cy.a)(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return Object(ly.a)(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,a=this._hullHash,i=e.length>>1,o=1/0,u=1/0,s=-1/0,c=-1/0,l=0;l<i;l++){var f=e[2*l],d=e[2*l+1];f<o&&(o=f),d<u&&(u=d),f>s&&(s=f),d>c&&(c=d),this._ids[l]=l}for(var h,p,v,m=(o+s)/2,g=(u+c)/2,b=1/0,y=0;y<i;y++){var w=v_(m,g,e[2*y],e[2*y+1]);w<b&&(h=y,b=w)}var x=e[2*h],O=e[2*h+1];b=1/0;for(var k=0;k<i;k++)if(k!==h){var j=v_(x,O,e[2*k],e[2*k+1]);j<b&&j>0&&(p=k,b=j)}for(var _=e[2*p],S=e[2*p+1],E=1/0,C=0;C<i;C++)if(C!==h&&C!==p){var A=y_(x,O,_,S,e[2*C],e[2*C+1]);A<E&&(v=C,E=A)}var T=e[2*v],N=e[2*v+1];if(E===1/0){for(var I=0;I<i;I++)this._dists[I]=e[2*I]-e[0]||e[2*I+1]-e[1];w_(this._ids,this._dists,0,i-1);for(var D=new Uint32Array(i),R=0,F=0,M=-1/0;F<i;F++){var P=this._ids[F];this._dists[P]>M&&(D[R++]=P,M=this._dists[P])}return this.hull=D.subarray(0,R),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(g_(x,O,_,S,T,N)){var L=p,z=_,B=S;p=v,_=T,S=N,v=L,T=z,N=B}var U=function(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s);return{x:e+(c*l-u*f)*d,y:t+(o*f-s*l)*d}}(x,O,_,S,T,N);this._cx=U.x,this._cy=U.y;for(var W=0;W<i;W++)this._dists[W]=v_(e[2*W],e[2*W+1],U.x,U.y);w_(this._ids,this._dists,0,i-1),this._hullStart=h;var V=3;n[h]=t[v]=p,n[p]=t[h]=v,n[v]=t[p]=h,r[h]=0,r[p]=1,r[v]=2,a.fill(-1),a[this._hashKey(x,O)]=h,a[this._hashKey(_,S)]=p,a[this._hashKey(T,N)]=v,this.trianglesLen=0,this._addTriangle(h,p,v,-1,-1,-1);for(var q,$,H=0;H<this._ids.length;H++){var G=this._ids[H],K=e[2*G],X=e[2*G+1];if(!(H>0&&Math.abs(K-q)<=d_&&Math.abs(X-$)<=d_)&&(q=K,$=X,G!==h&&G!==p&&G!==v)){for(var Y=0,J=0,Q=this._hashKey(K,X);J<this._hashSize&&(-1===(Y=a[(Q+J)%this._hashSize])||Y===n[Y]);J++);for(var Z=Y=t[Y],ee=void 0;ee=n[Z],!g_(K,X,e[2*Z],e[2*Z+1],e[2*ee],e[2*ee+1]);)if((Z=ee)===Y){Z=-1;break}if(-1!==Z){var te=this._addTriangle(Z,G,n[Z],-1,-1,r[Z]);r[G]=this._legalize(te+2),r[Z]=te,V++;for(var ne=n[Z];ee=n[ne],g_(K,X,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,G,ee,r[G],-1,r[ne]),r[G]=this._legalize(te+2),n[ne]=ne,V--,ne=ee;if(Z===Y)for(;g_(K,X,e[2*(ee=t[Z])],e[2*ee+1],e[2*Z],e[2*Z+1]);)te=this._addTriangle(ee,G,Z,-1,r[Z],r[ee]),this._legalize(te+2),r[ee]=te,n[Z]=Z,V--,Z=ee;this._hullStart=t[G]=Z,n[Z]=t[ne]=G,n[G]=ne,a[this._hashKey(K,X)]=G,a[this._hashKey(e[2*Z],e[2*Z+1])]=Z}}}this.hull=new Uint32Array(V);for(var re=0,ae=this._hullStart;re<V;re++)this.hull[re]=ae,ae=n[ae];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,a=0,i=0;;){var o=n[e],u=e-e%3;if(i=u+(e+2)%3,-1!==o){var s=o-o%3,c=u+(e+1)%3,l=s+(o+2)%3,f=t[i],d=t[e],h=t[c],p=t[l];if(b_(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=f;var v=n[l];if(-1===v){var m=this._hullStart;do{if(this._hullTri[m]===l){this._hullTri[m]=e;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(e,v),this._link(o,n[i]),this._link(i,l);var g=s+(o+1)%3;a<h_.length&&(h_[a++]=g)}else{if(0===a)break;e=h_[--a]}}else{if(0===a)break;e=h_[--a]}}return i}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,a,i){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,a),this._link(o+2,i),this.trianglesLen+=3,o}}],[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O_,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k_,a=t.length,i=new Float64Array(2*a),o=0;o<a;o++){var u=t[o];i[2*o]=n(u),i[2*o+1]=r(u)}return new e(i)}}]),e}();function v_(e,t,n,r){var a=e-n,i=t-r;return a*a+i*i}function m_(e,t,n,r,a,i){var o=(r-t)*(a-e),u=(n-e)*(i-t);return Math.abs(o-u)>=33306690738754716e-32*Math.abs(o+u)?o-u:0}function g_(e,t,n,r,a,i){return(m_(a,i,e,t,n,r)||m_(e,t,n,r,a,i)||m_(n,r,a,i,e,t))<0}function b_(e,t,n,r,a,i,o,u){var s=e-o,c=t-u,l=n-o,f=r-u,d=a-o,h=i-u,p=l*l+f*f,v=d*d+h*h;return s*(f*v-p*h)-c*(l*v-p*d)+(s*s+c*c)*(l*h-f*d)<0}function y_(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s),h=(c*l-u*f)*d,p=(o*f-s*l)*d;return h*h+p*p}function w_(e,t,n,r){if(r-n<=20)for(var a=n+1;a<=r;a++){for(var i=e[a],o=t[i],u=a-1;u>=n&&t[e[u]]>o;)e[u+1]=e[u--];e[u+1]=i}else{var s=n+1,c=r;x_(e,n+r>>1,s),t[e[n]]>t[e[r]]&&x_(e,n,r),t[e[s]]>t[e[r]]&&x_(e,s,r),t[e[n]]>t[e[s]]&&x_(e,n,s);for(var l=e[s],f=t[l];;){do{s++}while(t[e[s]]<f);do{c--}while(t[e[c]]>f);if(c<s)break;x_(e,s,c)}e[n+1]=e[c],e[c]=l,r-s+1>=c-n?(w_(e,t,s,r),w_(e,t,n,c-1)):(w_(e,t,n,c-1),w_(e,t,s,r))}}function x_(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function O_(e){return e[0]}function k_(e){return e[1]}var j_=1e-6,__=function(){function e(){Object(cy.a)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(ly.a)(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(a):(Math.abs(this._x1-r)>j_||Math.abs(this._y1-a)>j_)&&(this._+="L"+r+","+a),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=a))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),S_=function(){function e(){Object(cy.a)(this,e),this._=[]}return Object(ly.a)(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),E_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=Object(mo.a)(n,4),a=r[0],i=r[1],o=r[2],u=r[3];if(Object(cy.a)(this,e),!((o=+o)>=(a=+a))||!((u=+u)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=o,this.xmin=a,this.ymax=u,this.ymin=i,this._init()}return Object(ly.a)(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n=this.delaunay,r=n.points,a=n.hull,i=n.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2),s=0,c=0,l=i.length;s<l;s+=3,c+=2){var f=2*i[s],d=2*i[s+1],h=2*i[s+2],p=r[f],v=r[f+1],m=r[d],g=r[d+1],b=r[h],y=r[h+1],w=m-p,x=g-v,O=b-p,k=y-v,j=w*w+x*x,_=O*O+k*k,S=2*(w*k-x*O);if(S)if(Math.abs(S)<1e-8)e=(p+b)/2,t=(v+y)/2;else{var E=1/S;e=p+(k*j-x*_)*E,t=v+(w*_-O*j)*E}else e=(p+b)/2-1e8*k,t=(v+y)/2+1e8*O;u[c]=e,u[c+1]=t}var C,A,T,N=a[a.length-1],I=4*N,D=r[2*N],R=r[2*N+1];o.fill(0);for(var F=0;F<a.length;++F)C=I,A=D,T=R,I=4*(N=a[F]),D=r[2*N],R=r[2*N+1],o[C+2]=o[I]=T-R,o[C+3]=o[I+1]=D-A}},{key:"render",value:function(e){var t=null==e?e=new __:void 0,n=this.delaunay,r=n.halfedges,a=n.inedges,i=n.hull,o=this.circumcenters,u=this.vectors;if(i.length<=1)return null;for(var s=0,c=r.length;s<c;++s){var l=r[s];if(!(l<s)){var f=2*Math.floor(s/3),d=2*Math.floor(l/3),h=o[f],p=o[f+1],v=o[d],m=o[d+1];this._renderSegment(h,p,v,m,e)}}for(var g,b=i[i.length-1],y=0;y<i.length;++y){g=b,b=i[y];var w=2*Math.floor(a[b]/3),x=o[w],O=o[w+1],k=4*g,j=this._project(x,O,u[k+2],u[k+3]);j&&this._renderSegment(x,O,j[0],j[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new __:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new __:void 0,r=this._clip(e);if(null!==r&&r.length){t.moveTo(r[0],r[1]);for(var a=r.length;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(var i=2;i<a;i+=2)r[i]===r[i-2]&&r[i+1]===r[i-1]||t.lineTo(r[i],r[i+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:x.a.mark((function e(){var t,n,r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,r=t.length/2;case 2:if(!(n<r)){e.next=11;break}if(!(a=this.cellPolygon(n))){e.next=8;break}return a.index=n,e.next=8,a;case 8:++n,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new S_;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,a){var i,o=this._regioncode(e,t),u=this._regioncode(n,r);0===o&&0===u?(a.moveTo(e,t),a.lineTo(n,r)):(i=this._clipSegment(e,t,n,r,o,u))&&(a.moveTo(i[0],i[1]),a.lineTo(i[2],i[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:x.a.mark((function e(t){var n,r,a,i,o,u,s,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=Object(vo.a)(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=25;break}if(i=a.value,!(o=this._clip(i))){e.next=23;break}u=0,s=n.length;case 10:if(!(u<s)){e.next=23;break}c=0,l=o.length;case 12:if(!(c<l)){e.next=20;break}if(n[u]!=o[c]||n[u+1]!=o[c+1]||n[(u+2)%s]!=o[(c+l-2)%l]||n[(u+3)%s]!=o[(c+l-1)%l]){e.next=17;break}return e.next=16,i;case 16:return e.abrupt("break",23);case 17:c+=2,e.next=12;break;case 20:u+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,a=n.halfedges,i=n.triangles,o=r[e];if(-1===o)return null;var u=[],s=o;do{var c=Math.floor(s/3);if(u.push(t[2*c],t[2*c+1]),i[s=s%3===2?s-2:s+1]!==e)break;s=a[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,a,i,o,u=t.length,s=null,c=t[u-2],l=t[u-1],f=this._regioncode(c,l),d=0;d<u;d+=2)if(n=c,r=l,c=t[d],l=t[d+1],a=f,f=this._regioncode(c,l),0===a&&0===f)i=o,o=0,s?s.push(c,l):s=[c,l];else{var h=void 0,p=void 0,v=void 0,m=void 0,g=void 0;if(0===a){if(null===(h=this._clipSegment(n,r,c,l,a,f)))continue;var b=h,y=Object(mo.a)(b,4);p=y[0],v=y[1],m=y[2],g=y[3]}else{if(null===(h=this._clipSegment(c,l,n,r,f,a)))continue;var w=h,x=Object(mo.a)(w,4);m=x[0],g=x[1],p=x[2],v=x[3],i=o,o=this._edgecode(p,v),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(p,v):s=[p,v]}i=o,o=this._edgecode(m,g),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(m,g):s=[m,g]}if(s)i=o,o=this._edgecode(s[0],s[1]),i&&o&&this._edge(e,i,o,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,a,i){for(;;){if(0===a&&0===i)return[e,t,n,r];if(a&i)return null;var o=void 0,u=void 0,s=a||i;8&s?(o=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):4&s?(o=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):2&s?(u=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),a?(e=o,t=u,a=this._regioncode(e,t)):(n=o,r=u,i=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,a,i){var o,u=Array.from(t);if((o=this._project(u[0],u[1],n,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],a,i))&&u.push(o[0],o[1]),u=this._clipFinite(e,u))for(var s,c=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);c<l;c+=2)s=f,f=this._edgecode(u[c],u[c+1]),s&&f&&(c=this._edge(e,s,f,u,c),l=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(e,t,n,r,a){for(;t!==n;){var i=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,i=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,i=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,i=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,i=this.xmin,o=this.ymin}r[a]===i&&r[a+1]===o||!this.contains(e,i,o)||(r.splice(a,0,i,o),a+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,c=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[c]||r[u+1]===r[s+1]&&r[s+1]===r[c+1])&&(r.splice(s,2),u-=2)}return a}},{key:"_project",value:function(e,t,n,r){var a,i,o,u=1/0;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<u&&(o=this.ymin,i=e+(u=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<u&&(o=this.ymax,i=e+(u=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<u&&(i=this.xmax,o=t+(u=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<u&&(i=this.xmin,o=t+(u=a)*r)}return[i,o]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),e}(),C_=x.a.mark(M_),A_=2*Math.PI,T_=Math.pow;function N_(e){return e[0]}function I_(e){return e[1]}function D_(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var R_=function(){function e(t){Object(cy.a)(this,e),this._delaunator=new p_(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return Object(ly.a)(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var a=2*t[r],i=2*t[r+1],o=2*t[r+2];if((n[o]-n[a])*(n[i+1]-n[a+1])-(n[i]-n[a])*(n[o+1]-n[a+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],a=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],i=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]),o=0,u=t.length/2;o<u;++o){var s=D_(t[2*o],t[2*o+1],i);t[2*o]=s[0],t[2*o+1]=s[1]}this._delaunator=new p_(t)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),h=this._hullIndex.fill(-1),p=0,v=c.length;p<v;++p){var m=f[p%3===2?p-2:p+1];-1!==c[p]&&-1!==d[m]||(d[m]=p)}for(var g=0,b=l.length;g<b;++g)h[l[g]]=g;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],d[l[0]]=1,2===l.length&&(d[l[1]]=0))}},{key:"voronoi",value:function(e){return new E_(this,e)}},{key:"neighbors",value:x.a.mark((function e(t){var n,r,a,i,o,u,s,c,l,f,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,a=this._hullIndex,i=this.halfedges,o=this.triangles,!(u=this.collinear)){e.next=10;break}if(!((s=u.indexOf(t))>0)){e.next=6;break}return e.next=6,u[s-1];case 6:if(!(s<u.length-1)){e.next=9;break}return e.next=9,u[s+1];case 9:return e.abrupt("return");case 10:if(-1!==(c=n[t])){e.next=13;break}return e.abrupt("return");case 13:l=c,f=-1;case 14:return e.next=16,f=o[l];case 16:if(o[l=l%3===2?l-2:l+1]===t){e.next=19;break}return e.abrupt("return");case 19:if(-1!==(l=i[l])){e.next=26;break}if((d=r[(a[t]+1)%r.length])===f){e.next=25;break}return e.next=25,d;case 25:return e.abrupt("return");case 26:if(l!==c){e.next=14;break}case 27:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,a=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==a;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,a=this.hull,i=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[e]||!s.length)return(e+1)%(s.length>>1);var c=e,l=T_(t-s[2*e],2)+T_(n-s[2*e+1],2),f=r[e],d=f;do{var h=u[d],p=T_(t-s[2*h],2)+T_(n-s[2*h+1],2);if(p<l&&(l=p,c=h),u[d=d%3===2?d-2:d+1]!==e)break;if(-1===(d=o[d])){if((d=a[(i[e]+1)%a.length])!==h&&T_(t-s[2*d],2)+T_(n-s[2*d+1],2)<l)return d;break}}while(d!==f);return c}},{key:"render",value:function(e){for(var t=null==e?e=new __:void 0,n=this.points,r=this.halfedges,a=this.triangles,i=0,o=r.length;i<o;++i){var u=r[i];if(!(u<i)){var s=2*a[i],c=2*a[u];e.moveTo(n[s],n[s+1]),e.lineTo(n[c],n[c+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new __:void 0,r=this.points,a=0,i=r.length;a<i;a+=2){var o=r[a],u=r[a+1];e.moveTo(o+t,u),e.arc(o,u,t,0,A_)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new __:void 0,n=this.hull,r=this.points,a=2*n[0],i=n.length;e.moveTo(r[a],r[a+1]);for(var o=1;o<i;++o){var u=2*n[o];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new S_;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new __:void 0,r=this.points,a=this.triangles,i=2*a[e*=3],o=2*a[e+1],u=2*a[e+2];return t.moveTo(r[i],r[i+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:x.a.mark((function e(){var t,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,r=t.length/3;case 2:if(!(n<r)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new S_;return this.renderTriangle(e,t),t.value()}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N_,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I_,a=arguments.length>3?arguments[3]:void 0;return new e("length"in t?F_(t,n,r,a):Float64Array.from(M_(t,n,r,a)))}}]),e}();function F_(e,t,n,r){for(var a=e.length,i=new Float64Array(2*a),o=0;o<a;++o){var u=e[o];i[2*o]=t.call(r,u,o,e),i[2*o+1]=n.call(r,u,o,e)}return i}function M_(e,t,n,r){var a,i,o,u;return x.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a=0,i=Object(vo.a)(e),s.prev=2,i.s();case 4:if((o=i.n()).done){s.next=13;break}return u=o.value,s.next=8,t.call(r,u,a,e);case 8:return s.next=10,n.call(r,u,a,e);case 10:++a;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),i.e(s.t0);case 18:return s.prev=18,i.f(),s.finish(18);case 21:case"end":return s.stop()}}),C_,null,[[2,15,18,21]])}function P_(e){lo.call(this,null,e)}P_.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var L_=[-1e5,-1e5,1e5,1e5];function z_(e){for(var t=e[0][0],n=e[0][1],r=e.length-1;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}Object(te.z)(P_,lo,{transform:function(e,t){var n=e.as||"path",r=t.source;if(!r||!r.length)return t;var a=e.size;a=a?[0,0,a[0],a[1]]:(a=e.extent)?[a[0][0],a[0][1],a[1][0],a[1][1]]:L_;for(var i=this.value=R_.from(r,e.x,e.y).voronoi(a),o=0,u=r.length;o<u;++o){var s=i.cellPolygon(o);r[o][n]=s?z_(s):null}return t.reflow(e.modified()).modifies(n)}});var B_=Math.PI/180,U_=2048;function W_(){var e,t,n,r,a,i,o,u=[256,256],s=H_,c=[],l=Math.random,f={};function d(e,t,n){for(var r,a,i,o,c,f=t.x,d=t.y,h=Math.sqrt(u[0]*u[0]+u[1]*u[1]),p=s(u),v=l()<.5?1:-1,m=-v;(r=p(m+=v))&&(a=~~r[0],i=~~r[1],!(Math.min(Math.abs(a),Math.abs(i))>=h));)if(t.x=f+a,t.y=d+i,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>u[0]||t.y+t.y1>u[1])&&(!n||!q_(t,e,u[0]))&&(!n||(c=n,(o=t).x+o.x1>c[0].x&&o.x+o.x0<c[1].x&&o.y+o.y1>c[0].y&&o.y+o.y0<c[1].y))){for(var g,b=t.sprite,y=t.width>>5,w=u[0]>>5,x=t.x-(y<<4),O=127&x,k=32-O,j=t.y1-t.y0,_=(t.y+t.y0)*w+(x>>5),S=0;S<j;S++){g=0;for(var E=0;E<=y;E++)e[_+E]|=g<<k|(E<y?(g=b[S*y+E])>>>O:0);_+=w}return t.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=U_/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(dl()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((u[0]>>5)*u[1]),h=null,p=c.length,v=-1,m=[],g=c.map((function(u){return{text:e(u),font:t(u),style:r(u),weight:a(u),rotate:i(u),size:~~(n(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(e,t){return t.size-e.size}));++v<p;){var b=g[v];b.x=u[0]*(l()+.5)>>1,b.y=u[1]*(l()+.5)>>1,V_(s,b,g,v),b.hasText&&d(f,b,h)&&(m.push(b),h?$_(h,b):h=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=u[0]>>1,b.y-=u[1]>>1)}return m},f.words=function(e){return arguments.length?(c=e,f):c},f.size=function(e){return arguments.length?(u=[+e[0],+e[1]],f):u},f.font=function(e){return arguments.length?(t=G_(e),f):t},f.fontStyle=function(e){return arguments.length?(r=G_(e),f):r},f.fontWeight=function(e){return arguments.length?(a=G_(e),f):a},f.rotate=function(e){return arguments.length?(i=G_(e),f):i},f.text=function(t){return arguments.length?(e=G_(t),f):e},f.spiral=function(e){return arguments.length?(s=K_[e]||e,f):s},f.fontSize=function(e){return arguments.length?(n=G_(e),f):n},f.padding=function(e){return arguments.length?(o=G_(e),f):o},f.random=function(e){return arguments.length?(l=e,f):l},f}function V_(e,t,n,r){if(!t.sprite){var a=e.context,i=e.ratio;a.clearRect(0,0,2048/i,U_/i);var o,u,s,c,l,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/i)+"px "+t.font,o=a.measureText(t.text+"m").width*i,s=t.size<<1,t.rotate){var v=Math.sin(t.rotate*B_),m=Math.cos(t.rotate*B_),g=o*m,b=o*v,y=s*m,w=s*v;o=Math.max(Math.abs(g+w),Math.abs(g-w))+31>>5<<5,s=~~Math.max(Math.abs(b+y),Math.abs(b-y))}else o=o+31>>5<<5;if(s>h&&(h=s),f+o>=2048&&(f=0,d+=h,h=0),d+s>=U_)break;a.translate((f+(o>>1))/i,(d+(s>>1))/i),t.rotate&&a.rotate(t.rotate*B_),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=o,t.height=s,t.xoff=f,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var x=a.getImageData(0,0,2048/i,U_/i).data,O=[];--r>=0;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,c=0;c<s*u;c++)O[c]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,j=-1;for(l=0;l<s;l++){for(c=0;c<o;c++){var _=u*l+(c>>5),S=x[2048*(d+l)+(f+c)<<2]?1<<31-c%32:0;O[_]|=S,k|=S}k?j=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+j,t.sprite=O.slice(0,(t.y1-t.y0)*u)}}}function q_(e,t,n){n>>=5;for(var r,a=e.sprite,i=e.width>>5,o=e.x-(i<<4),u=127&o,s=32-u,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=i;d++)if((r<<s|(d<i?(r=a[f*i+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function $_(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function H_(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function G_(e){return"function"===typeof e?e:function(){return e}}var K_={archimedean:H_,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},X_=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Y_=["text","font","rotate","fontSize","fontStyle","fontWeight"];function J_(e){lo.call(this,W_(),e)}J_.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:X_}]},Object(te.z)(J_,lo,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||Object(te.o)("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||Y_.some((function(n){var r=e[n];return Object(te.E)(r)&&t.modified(r.fields)}))){var r,a=t.materialize(t.SOURCE).source,i=this.value,o=e.as||X_,u=e.fontSize||14;if(Object(te.E)(u)?r=e.fontSizeRange:u=Object(te.m)(u),r){var s=u,c=Jf("sqrt")().domain(Object(te.q)(a,s)).range(r);u=function(e){return c(s(e))}}a.forEach((function(e){e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));for(var l,f,d=i.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(Ro).layout(),h=i.size(),p=h[0]>>1,v=h[1]>>1,m=d.length,g=0;g<m;++g)(f=(l=d[g]).datum)[o[0]]=l.x+p,f[o[1]]=l.y+v,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return t.reflow(n).modifies(o)}}});var Q_=function(e){return new Uint8Array(e)},Z_=function(e){return new Uint16Array(e)},eS=function(e){return new Uint32Array(e)};function tS(e,t,n){var r=(t<257?Q_:t<65537?Z_:eS)(e);return n&&r.set(n),r}function nS(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,a=this,i=a.bisect(a.range,e.value),o=e.index,u=i[0],s=i[1],c=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<c;++n)t[o[n]]|=r;return a}}}function rS(){var e=eS(0),t=[],n=0;return{insert:function(r,a,i){if(!a.length)return[];var o,u,s,c,l,f,d,h=n,p=a.length,v=eS(p),m=Array(p);for(s=0;s<p;++s)m[s]=r(a[s]),v[s]=s;if(d=v,(f=m).sort.call(d,(function(e,t){var n=f[e],r=f[t];return n<r?-1:n>r?1:0})),c=f,l=d,m=Array.from(l,(function(e){return c[e]})),h)o=t,u=e,t=Array(h+p),e=eS(h+p),function(e,t,n,r,a,i,o,u,s){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)t[l]<a[f]?(u[c]=t[l],s[c]=n[l++]):(u[c]=a[f],s[c]=i[f++]+e);for(;l<r;++l,++c)u[c]=t[l],s[c]=n[l];for(;f<o;++f,++c)u[c]=a[f],s[c]=i[f]+e}(i,o,u,h,m,v,p,t,e);else{if(i>0)for(s=0;s<p;++s)v[s]+=i;t=m,e=v}return n=h+p,{index:v,value:m}},remove:function(r,a){var i,o,u,s=n;for(o=0;!a[e[o]]&&o<s;++o);for(u=o;o<s;++o)a[i=e[o]]||(e[u]=i,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var a;return r?a=r.length:(r=t,a=n),[ml(r,e[0],0,a),vl(r,e[1],0,a)]},reindex:function(t){for(var r=0,a=n;r<a;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function aS(e){lo.call(this,function(){var e=8,t=[],n=eS(0),r=tS(0,e),a=tS(0,e);return{data:function(){return t},seen:function(){return e=n,r=t.length,n=e.length>=r?e:((a=a||new e.constructor(r)).set(e),a);var e,r,a},add:function(e){for(var n,r=0,a=t.length,i=e.length;r<i;++r)(n=e[r])._index=a++,t.push(n)},remove:function(e,n){var i,o,u,s=t.length,c=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)c[o]=t[o],l[o]=o;for(u=o;o<s;++o)i=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],a[u]=a[o],c[u]=i,i._index=u++),r[o]=0;return t=c,l},size:function(){return t.length},curr:function(){return r},prev:function(){return a},reset:function(e){return a[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=tS(t,e,r),a=tS(t,e))}}}(),e),this._indices=null,this._dims=null}function iS(e){lo.call(this,null,e)}aS.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Object(te.z)(aS,lo,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){for(var n,r,a=e.fields,i=e.query,o=this._indices={},u=this._dims=[],s=i.length,c=0;c<s;++c)r=o[n=a[c].fname]||(o[n]=rS()),u.push(nS(r,c,i[c]));return this.eval(e,t)},reinit:function(e,t){var n,r,a,i,o,u,s,c,l,f=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,v=this._dims,m=this.value,g=m.curr(),b=m.prev(),y=m.all(),w=f.rem=f.add,x=f.mod,O=h.length,k={};if(b.set(g),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,c=(i=t.mod).length;s<c;++s)u[i[s]._index]=1;for(s=0;s<O;++s)l=d[s],(!v[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=k[a=l.fname])||(p[a]=r=rS(),k[a]=n=r.insert(l,t.source,0)),v[s]=nS(r,s,h[s]).onAdd(n,g));for(s=0,c=m.data().length;s<c;++s)o[s]||(b[s]!==g[s]?w.push(s):u[s]&&g[s]!==y&&x.push(s));return m.mask=(1<<O)-1,f},eval:function(e,t){var n=t.materialize().fork(),r=this._dims.length,a=0;return t.rem.length&&(this.remove(e,t,n),a|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(a|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),a|=(1<<r)-1),t.mod.length&&(this.modify(t,n),a|=(1<<r)-1),this.value.mask=a,n},insert:function(e,t,n){var r,a,i,o=t.add,u=this.value,s=this._dims,c=this._indices,l=e.fields,f={},d=n.add,h=u.size()+o.length,p=s.length,v=u.size();u.resize(h,p),u.add(o);var m=u.curr(),g=u.prev(),b=u.all();for(r=0;r<p;++r)i=f[a=l[r].fname]||(f[a]=c[a].insert(l[r],o,v)),s[r].onAdd(i,m);for(;v<h;++v)g[v]=b,m[v]!==b&&d.push(v)},modify:function(e,t){var n,r,a,i=t.mod,o=this.value,u=o.curr(),s=o.all(),c=e.mod;for(n=0,r=c.length;n<r;++n)u[a=c[n]._index]!==s&&i.push(a)},remove:function(e,t,n){var r,a,i,o,u=this._indices,s=this.value,c=s.curr(),l=s.prev(),f=s.all(),d={},h=n.rem,p=t.rem;for(r=0,a=p.length;r<a;++r)d[i=p[r]._index]=1,l[i]=o=c[i],c[i]=f,o!==f&&h.push(i);for(i in u)u[i].remove(a,d);return this.reindex(t,a,d),d},reindex:function(e,t,n){var r=this._indices,a=this.value;e.runAfter((function(){var e=a.remove(t,n);for(var i in r)r[i].reindex(e)}))},update:function(e,t,n){var r,a,i=this._dims,o=e.query,u=t.stamp,s=i.length,c=0;for(n.filters=0,a=0;a<s;++a)e.modified("query",a)&&(r=a,++c);if(1===c)c=i[r].one,this.incrementOne(i[r],o[r],n.add,n.rem);else for(a=0,c=0;a<s;++a)e.modified("query",a)&&(c|=i[a].one,this.incrementAll(i[a],o[a],u,n.add),n.rem=n.add);return c},incrementAll:function(e,t,n,r){var a,i,o,u=this.value,s=u.seen(),c=u.curr(),l=u.prev(),f=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],v=h[1],m=d[0],g=d[1],b=e.one;if(p<m)for(a=p,i=Math.min(m,v);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;else if(p>m)for(a=m,i=Math.min(p,g);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;if(v>g)for(a=Math.max(p,g),i=v;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;else if(v<g)for(a=Math.max(m,v),i=g;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;e.range=t.slice()},incrementOne:function(e,t,n,r){var a,i,o,u=this.value.curr(),s=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=c[0],p=c[1],v=e.one;if(f<h)for(a=f,i=Math.min(h,d);a<i;++a)u[o=s[a]]^=v,n.push(o);else if(f>h)for(a=h,i=Math.min(f,p);a<i;++a)u[o=s[a]]^=v,r.push(o);if(d>p)for(a=Math.max(f,p),i=d;a<i;++a)u[o=s[a]]^=v,n.push(o);else if(d<p)for(a=Math.max(h,d),i=p;a<i;++a)u[o=s[a]]^=v,r.push(o);e.range=t.slice()}}),iS.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(te.z)(iS,lo,{transform:function(e,t){var n=~(e.ignore||0),r=e.filter,a=r.mask;if(0===(a&n))return t.StopPropagation;var i=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),c=function(e){return u[e]&n?null:o[e]};return i.filter(i.MOD,c),a&a-1?(i.filter(i.ADD,(function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null})),i.filter(i.REM,(function(e){var t=u[e]&n;return t&&!(t^t^s[e]&n)?o[e]:null}))):(i.filter(i.ADD,c),i.filter(i.REM,(function(e){return(u[e]&n)===a?o[e]:null}))),i.filter(i.SOURCE,(function(e){return c(e._index)}))}});var oS,uS,sS,cS,lS,fS="RawCode",dS="Literal",hS="Property",pS="Identifier",vS="ArrayExpression",mS="BinaryExpression",gS="CallExpression",bS="ConditionalExpression",yS="LogicalExpression",wS="MemberExpression",xS="ObjectExpression",OS="UnaryExpression";function kS(e){this.type=e}kS.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case vS:return e.elements;case mS:case yS:return[e.left,e.right];case gS:return[e.callee].concat(e.arguments);case bS:return[e.test,e.consequent,e.alternate];case wS:return[e.object,e.property];case xS:return e.properties;case hS:return[e.key,e.value];case OS:return[e.argument];case pS:case dS:case fS:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(oS={})[1]="Boolean",oS[2]="<end>",oS[3]="Identifier",oS[4]="Keyword",oS[5]="Null",oS[6]="Numeric",oS[7]="Punctuator",oS[8]="String",oS[9]="RegularExpression";var jS="Identifier",_S="Unexpected token %0",SS="Invalid regular expression",ES="Invalid regular expression: missing /",CS="Octal literals are not allowed in strict mode.",AS="ILLEGAL",TS="Disabled.",NS=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),IS=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function DS(e,t){if(!e)throw new Error("ASSERT: "+t)}function RS(e){return e>=48&&e<=57}function FS(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function MS(e){return"01234567".indexOf(e)>=0}function PS(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function LS(e){return 10===e||13===e||8232===e||8233===e}function zS(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&NS.test(String.fromCharCode(e))}function BS(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&IS.test(String.fromCharCode(e))}var US={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function WS(){for(;sS<cS;){var e=uS.charCodeAt(sS);if(!PS(e)&&!LS(e))break;++sS}}function VS(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)sS<cS&&FS(uS[sS])?(r=uS[sS++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):iE({},_S,AS);return String.fromCharCode(a)}function qS(){var e,t,n,r;for(t=0,"}"===(e=uS[sS])&&iE({},_S,AS);sS<cS&&FS(e=uS[sS++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&iE({},_S,AS),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function $S(){var e,t;for(e=uS.charCodeAt(sS++),t=String.fromCharCode(e),92===e&&(117!==uS.charCodeAt(sS)&&iE({},_S,AS),++sS,(e=VS("u"))&&"\\"!==e&&zS(e.charCodeAt(0))||iE({},_S,AS),t=e);sS<cS&&BS(e=uS.charCodeAt(sS));)++sS,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==uS.charCodeAt(sS)&&iE({},_S,AS),++sS,(e=VS("u"))&&"\\"!==e&&BS(e.charCodeAt(0))||iE({},_S,AS),t+=e);return t}function HS(){var e,t;return e=sS,{type:1===(t=92===uS.charCodeAt(sS)?$S():function(){var e,t;for(e=sS++;sS<cS;){if(92===(t=uS.charCodeAt(sS)))return sS=e,$S();if(!BS(t))break;++sS}return uS.slice(e,sS)}()).length?3:US.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:sS}}function GS(){var e,t,n,r,a=sS,i=uS.charCodeAt(sS),o=uS[sS];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++sS,{type:7,value:String.fromCharCode(i),start:a,end:sS};default:if(61===(e=uS.charCodeAt(sS+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return sS+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:sS};case 33:case 61:return sS+=2,61===uS.charCodeAt(sS)&&++sS,{type:7,value:uS.slice(a,sS),start:a,end:sS}}}return">>>="===(r=uS.substr(sS,4))?{type:7,value:r,start:a,end:sS+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:sS+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:sS+=2}:("//"===t&&iE({},_S,AS),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++sS}:void iE({},_S,AS))}function KS(){var e,t,n;if(DS(RS((n=uS[sS]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=sS,e="","."!==n){if(e=uS[sS++],n=uS[sS],"0"===e){if("x"===n||"X"===n)return++sS,function(e){for(var t="";sS<cS&&FS(uS[sS]);)t+=uS[sS++];return 0===t.length&&iE({},_S,AS),zS(uS.charCodeAt(sS))&&iE({},_S,AS),{type:6,value:parseInt("0x"+t,16),start:e,end:sS}}(t);if(MS(n))return function(e){for(var t="0"+uS[sS++];sS<cS&&MS(uS[sS]);)t+=uS[sS++];return(zS(uS.charCodeAt(sS))||RS(uS.charCodeAt(sS)))&&iE({},_S,AS),{type:6,value:parseInt(t,8),octal:!0,start:e,end:sS}}(t);n&&RS(n.charCodeAt(0))&&iE({},_S,AS)}for(;RS(uS.charCodeAt(sS));)e+=uS[sS++];n=uS[sS]}if("."===n){for(e+=uS[sS++];RS(uS.charCodeAt(sS));)e+=uS[sS++];n=uS[sS]}if("e"===n||"E"===n)if(e+=uS[sS++],"+"!==(n=uS[sS])&&"-"!==n||(e+=uS[sS++]),RS(uS.charCodeAt(sS)))for(;RS(uS.charCodeAt(sS));)e+=uS[sS++];else iE({},_S,AS);return zS(uS.charCodeAt(sS))&&iE({},_S,AS),{type:6,value:parseFloat(e),start:t,end:sS}}function XS(){var e,t,n,r;return lS=null,WS(),e=sS,t=function(){var e,t,n,r;for(DS("/"===(e=uS[sS]),"Regular expression literal must start with a slash"),t=uS[sS++],n=!1,r=!1;sS<cS;)if(t+=e=uS[sS++],"\\"===e)LS((e=uS[sS++]).charCodeAt(0))&&iE({},ES),t+=e;else if(LS(e.charCodeAt(0)))iE({},ES);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||iE({},ES),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";sS<cS&&BS((e=uS[sS]).charCodeAt(0));)++sS,"\\"===e&&sS<cS?iE({},_S,AS):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&iE({},SS,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";iE({},SS)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){iE({},SS)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:sS}}function YS(){if(WS(),sS>=cS)return{type:2,start:sS,end:sS};var e=uS.charCodeAt(sS);return zS(e)?HS():40===e||41===e||59===e?GS():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(DS("'"===(e=uS[sS])||'"'===e,"String literal must starts with a quote"),t=sS,++sS;sS<cS;){if((n=uS[sS++])===e){e="";break}if("\\"===n)if((n=uS[sS++])&&LS(n.charCodeAt(0)))"\r"===n&&"\n"===uS[sS]&&++sS;else switch(n){case"u":case"x":"{"===uS[sS]?(++sS,a+=qS()):a+=VS(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:MS(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),sS<cS&&MS(uS[sS])&&(i=!0,r=8*r+"01234567".indexOf(uS[sS++]),"0123".indexOf(n)>=0&&sS<cS&&MS(uS[sS])&&(r=8*r+"01234567".indexOf(uS[sS++]))),a+=String.fromCharCode(r)):a+=n}else{if(LS(n.charCodeAt(0)))break;a+=n}}return""!==e&&iE({},_S,AS),{type:8,value:a,octal:i,start:t,end:sS}}():46===e?RS(uS.charCodeAt(sS+1))?KS():GS():RS(e)?KS():GS()}function JS(){var e=lS;return sS=e.end,lS=YS(),sS=e.end,e}function QS(){var e=sS;lS=YS(),sS=e}function ZS(e,t,n){var r=new kS("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function eE(e,t){var n=new kS("CallExpression");return n.callee=e,n.arguments=t,n}function tE(e){var t=new kS(jS);return t.name=e,t}function nE(e){var t=new kS("Literal");return t.value=e.value,t.raw=uS.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function rE(e,t,n){var r=new kS("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function aE(e,t,n){var r=new kS("Property");return r.key=t,r.value=n,r.kind=e,r}function iE(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return DS(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=sS,n.description=a,n}function oE(e){2===e.type&&iE(e,"Unexpected end of input"),6===e.type&&iE(e,"Unexpected number"),8===e.type&&iE(e,"Unexpected string"),3===e.type&&iE(e,"Unexpected identifier"),4===e.type&&iE(e,"Unexpected reserved word"),iE(e,_S,e.value)}function uE(e){var t=JS();7===t.type&&t.value===e||oE(t)}function sE(e){return 7===lS.type&&lS.value===e}function cE(e){return 4===lS.type&&lS.value===e}function lE(){var e=[];for(sS=lS.start,uE("[");!sE("]");)sE(",")?(JS(),e.push(null)):(e.push(OE()),sE("]")||uE(","));return JS(),function(e){var t=new kS("ArrayExpression");return t.elements=e,t}(e)}function fE(){sS=lS.start;var e=JS();return 8===e.type||6===e.type?(e.octal&&iE(e,CS),nE(e)):tE(e.value)}function dE(){var e,t,n;return sS=lS.start,3===(e=lS).type?(n=fE(),uE(":"),aE("init",n,OE())):2!==e.type&&7!==e.type?(t=fE(),uE(":"),aE("init",t,OE())):void oE(e)}function hE(){var e,t,n=[],r={},a=String;for(sS=lS.start,uE("{");!sE("}");)t="$"+((e=dE()).key.type===jS?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?iE({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),sE("}")||uE(",");return uE("}"),function(e){var t=new kS("ObjectExpression");return t.properties=e,t}(n)}var pE={if:1};function vE(){var e,t,n;if(sE("("))return function(){uE("(");var e=kE();return uE(")"),e}();if(sE("["))return lE();if(sE("{"))return hE();if(e=lS.type,sS=lS.start,3===e||pE[lS.value])n=tE(JS().value);else if(8===e||6===e)lS.octal&&iE(lS,CS),n=nE(JS());else{if(4===e)throw new Error(TS);1===e?((t=JS()).value="true"===t.value,n=nE(t)):5===e?((t=JS()).value=null,n=nE(t)):sE("/")||sE("/=")?(n=nE(XS()),QS()):oE(JS())}return n}function mE(){var e=[];if(uE("("),!sE(")"))for(;sS<cS&&(e.push(OE()),!sE(")"));)uE(",");return uE(")"),e}function gE(){return uE("."),function(){sS=lS.start;var e=JS();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||oE(e),tE(e.value)}()}function bE(){uE("[");var e=kE();return uE("]"),e}function yE(){var e=function(){var e;for(e=vE();;)if(sE("."))e=rE(".",e,gE());else if(sE("("))e=eE(e,mE());else{if(!sE("["))break;e=rE("[",e,bE())}return e}();if(7===lS.type&&(sE("++")||sE("--")))throw new Error(TS);return e}function wE(){var e,t;if(7!==lS.type&&4!==lS.type)t=yE();else{if(sE("++")||sE("--"))throw new Error(TS);if(sE("+")||sE("-")||sE("~")||sE("!"))e=JS(),t=wE(),t=function(e,t){var n=new kS("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(cE("delete")||cE("void")||cE("typeof"))throw new Error(TS);t=yE()}}return t}function xE(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function OE(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=lS,s=wE(),0===(a=xE(r=lS)))return s;for(r.prec=a,JS(),t=[e,lS],i=[s,r,o=wE()];(a=xE(lS))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=ZS(u,s,o),i.push(n);(r=JS()).prec=a,i.push(r),t.push(lS),n=wE(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=ZS(i[c-1].value,i[c-2],n),c-=2;return n}(),sE("?")&&(JS(),t=OE(),uE(":"),e=function(e,t,n){var r=new kS("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,OE())),e}function kE(){var e=OE();if(sE(","))throw new Error(TS);return e}function jE(e){sS=0,cS=(uS=e).length,lS=null,QS();var t=kE();if(2!==lS.type)throw new Error("Unexpect token after expression.");return t}var _E={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function SE(e){function t(t,n,r){return function(a){return function(t,n,r,a){var i=e(n[0]);return r&&(i=r+"("+i+")",0===r.lastIndexOf("new ",0)&&(i="("+i+")")),i+"."+t+(a<0?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}(t,a,n,r)}}var n="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&Object(te.o)("Missing arguments to clamp function."),t.length>3&&Object(te.o)("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:a,test:t("test",a),if:function(t){t.length<3&&Object(te.o)("Missing arguments to if function."),t.length>3&&Object(te.o)("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function EE(e){var t=(e=e||{}).allowed?Object(te.fb)(e.allowed):{},n=e.forbidden?Object(te.fb)(e.forbidden):{},r=e.constants||_E,a=(e.functions||SE)(f),i=e.globalvar,o=e.fieldvar,u=Object(te.E)(i)?i:function(e){return"".concat(i,'["').concat(e,'"]')},s={},c={},l=0;function f(e){if(Object(te.J)(e))return e;var t=d[e.type];return null==t&&Object(te.o)("Unsupported type: "+e.type),t(e)}var d={Literal:function(e){return e.raw},Identifier:function(e){var a=e.name;return l>0?a:Object(te.w)(n,a)?Object(te.o)("Illegal identifier: "+a):Object(te.w)(r,a)?r[a]:Object(te.w)(t,a)?a:(s[a]=1,u(a))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(l+=1);var r=f(e.property);return n===o&&(c[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Object(te.o)("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=Object(te.w)(a,t)&&a[t];return r||Object(te.o)("Unrecognized function: "+t),Object(te.E)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+" "+e.operator+" "+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){l+=1;var t=f(e.key);return l-=1,t+":"+f(e.value)}};function h(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(c)};return s={},c={},t}return h.functions=a,h.constants=r,h}var CE,AE,TE,NE,IE,DE=new fy,RE=new fy,FE={point:Fy,lineStart:Fy,lineEnd:Fy,polygonStart:function(){DE=new fy,FE.lineStart=ME,FE.lineEnd=PE},polygonEnd:function(){var e=+DE;RE.add(e<0?gy+e:e),this.lineStart=this.lineEnd=this.point=Fy},sphere:function(){RE.add(gy)}};function ME(){FE.point=LE}function PE(){zE(CE,AE)}function LE(e,t){FE.point=zE,CE=e,AE=t,TE=e*=yy,NE=ky(t=(t*=yy)/2+my),IE=Ay(t)}function zE(e,t){var n=(e*=yy)-TE,r=n>=0?1:-1,a=r*n,i=ky(t=(t*=yy)/2+my),o=Ay(t),u=IE*o,s=NE*i+u*ky(a),c=u*r*Ay(a);DE.add(Oy(c,s)),TE=e,NE=i,IE=o}var BE,UE,WE,VE,qE,$E,HE,GE,KE,XE,YE,JE={point:QE,lineStart:eC,lineEnd:tC,polygonStart:function(){JE.point=nC,JE.lineStart=rC,JE.lineEnd=aC,KE=new fy,FE.polygonStart()},polygonEnd:function(){FE.polygonEnd(),JE.point=QE,JE.lineStart=eC,JE.lineEnd=tC,DE<0?(BE=-(WE=180),UE=-(VE=90)):KE>dy?VE=90:KE<-1e-6&&(UE=-90),YE[0]=BE,YE[1]=WE},sphere:function(){BE=-(WE=180),UE=-(VE=90)}};function QE(e,t){XE.push(YE=[BE=e,WE=e]),t<UE&&(UE=t),t>VE&&(VE=t)}function ZE(e,t){var n=Vw([e*yy,t*yy]);if(GE){var r=$w(GE,n),a=$w([r[1],-r[0],0],r);Kw(a),a=Ww(a);var i,o=e-qE,u=o>0?1:-1,s=a[0]*by*u,c=wy(o)>180;c^(u*qE<s&&s<u*e)?(i=a[1]*by)>VE&&(VE=i):c^(u*qE<(s=(s+360)%360-180)&&s<u*e)?(i=-a[1]*by)<UE&&(UE=i):(t<UE&&(UE=t),t>VE&&(VE=t)),c?e<qE?iC(BE,e)>iC(BE,WE)&&(WE=e):iC(e,WE)>iC(BE,WE)&&(BE=e):WE>=BE?(e<BE&&(BE=e),e>WE&&(WE=e)):e>qE?iC(BE,e)>iC(BE,WE)&&(WE=e):iC(e,WE)>iC(BE,WE)&&(BE=e)}else XE.push(YE=[BE=e,WE=e]);t<UE&&(UE=t),t>VE&&(VE=t),GE=n,qE=e}function eC(){JE.point=ZE}function tC(){YE[0]=BE,YE[1]=WE,JE.point=QE,GE=null}function nC(e,t){if(GE){var n=e-qE;KE.add(wy(n)>180?n+(n>0?360:-360):n)}else $E=e,HE=t;FE.point(e,t),ZE(e,t)}function rC(){FE.lineStart()}function aC(){nC($E,HE),FE.lineEnd(),wy(KE)>dy&&(BE=-(WE=180)),YE[0]=BE,YE[1]=WE,GE=null}function iC(e,t){return(t-=e)<0?t+360:t}function oC(e,t){return e[0]-t[0]}function uC(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var sC,cC,lC,fC,dC,hC,pC,vC,mC,gC,bC,yC,wC,xC,OC,kC,jC={sphere:Fy,point:_C,lineStart:EC,lineEnd:TC,polygonStart:function(){jC.lineStart=NC,jC.lineEnd=IC},polygonEnd:function(){jC.lineStart=EC,jC.lineEnd=TC}};function _C(e,t){e*=yy;var n=ky(t*=yy);SC(n*ky(e),n*Ay(e),Ay(t))}function SC(e,t,n){++sC,lC+=(e-lC)/sC,fC+=(t-fC)/sC,dC+=(n-dC)/sC}function EC(){jC.point=CC}function CC(e,t){e*=yy;var n=ky(t*=yy);xC=n*ky(e),OC=n*Ay(e),kC=Ay(t),jC.point=AC,SC(xC,OC,kC)}function AC(e,t){e*=yy;var n=ky(t*=yy),r=n*ky(e),a=n*Ay(e),i=Ay(t),o=Oy(Ny((o=OC*i-kC*a)*o+(o=kC*r-xC*i)*o+(o=xC*a-OC*r)*o),xC*r+OC*a+kC*i);cC+=o,hC+=o*(xC+(xC=r)),pC+=o*(OC+(OC=a)),vC+=o*(kC+(kC=i)),SC(xC,OC,kC)}function TC(){jC.point=_C}function NC(){jC.point=DC}function IC(){RC(yC,wC),jC.point=_C}function DC(e,t){yC=e,wC=t,e*=yy,t*=yy,jC.point=RC;var n=ky(t);xC=n*ky(e),OC=n*Ay(e),kC=Ay(t),SC(xC,OC,kC)}function RC(e,t){e*=yy;var n=ky(t*=yy),r=n*ky(e),a=n*Ay(e),i=Ay(t),o=OC*i-kC*a,u=kC*r-xC*i,s=xC*a-OC*r,c=Sy(o,u,s),l=Ry(c),f=c&&-l/c;mC.add(f*o),gC.add(f*u),bC.add(f*s),cC+=l,hC+=l*(xC+(xC=r)),pC+=l*(OC+(OC=a)),vC+=l*(kC+(kC=i)),SC(xC,OC,kC)}var FC=n(752);var MC="intersect",PC="union",LC="index:unit";function zC(e,t){for(var n,r,a=t.fields,i=t.values,o=a.length,u=0;u<o;++u)if((r=a[u]).getter=te.u.getter||Object(te.u)(r.field),n=r.getter(e),Object(te.D)(n)&&(n=Object(te.eb)(n)),Object(te.D)(i[u])&&(i[u]=Object(te.eb)(i[u])),Object(te.D)(i[u][0])&&(i[u]=i[u].map(te.eb)),"E"===r.type){if(Object(te.B)(i[u])?i[u].indexOf(n)<0:n!==i[u])return!1}else if("R"===r.type){if(!Object(te.A)(n,i[u]))return!1}else if("R-RE"===r.type){if(!Object(te.A)(n,i[u],!0,!1))return!1}else if("R-E"===r.type){if(!Object(te.A)(n,i[u],!1,!1))return!1}else if("R-LE"===r.type&&!Object(te.A)(n,i[u],!1,!0))return!1;return!0}var BC=Object(te.u)("_vgsid_"),UC=function(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return(r=e(t))<(a=n)?-1:r>a?1:r>=a?0:NaN;var r,a}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}(BC),WC=UC.left,VC=UC.right;var qC={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t},R_union:function(e,t){var n=Object(te.eb)(t[0]),r=Object(te.eb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Object(te.eb)(t[0]),r=Object(te.eb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function $C(e,t,n,r){t[0].type!==dS&&Object(te.o)("First argument to selection functions must be a string literal.");var a=t[0].value,i="unit",o="@unit",u=":"+a;(t.length>=2&&Object(te.W)(t).value)!==MC||Object(te.w)(r,o)||(r["@unit"]=n.getData(a).indataRef(n,i)),Object(te.w)(r,u)||(r[u]=n.getData(a).tuplesRef())}function HC(e){var t=this.context.data[e];return t?t.values.value:[]}var GC=function(e){return function(t,n){return this.context.dataflow.locale()[e](n)(t)}},KC=GC("format"),XC=GC("timeFormat"),YC=GC("utcFormat"),JC=GC("timeParse"),QC=GC("utcParse"),ZC=new Date(2e3,0,1);function eA(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(ZC.setYear(2e3),ZC.setMonth(e),ZC.setDate(t),XC.call(this,ZC,n)):""}function tA(e,t,n,r){t[0].type!==dS&&Object(te.o)("First argument to data functions must be a string literal.");var a=t[0].value,i=":"+a;if(!Object(te.w)(i,r))try{r[i]=n.getData(a).tuplesRef()}catch(o){}}function nA(e,t,n,r){if(t[0].type===dS)rA(n,r,t[0].value);else for(e in n.scales)rA(n,r,e)}function rA(e,t,n){var r="%"+n;if(!Object(te.w)(t,r))try{t[r]=e.scaleRef(n)}catch(a){}}function aA(e,t){var n;return Object(te.E)(e)?e:Object(te.J)(e)?(n=t.scales[e])&&n.value:void 0}function iA(e,t,n){t.__bandwidth=function(e){return e&&e.bandwidth?e.bandwidth():0},n._bandwidth=nA,n._range=nA,n._scale=nA;var r=function(t){return"_["+(t.type===dS?Object(te.bb)("%"+t.value):Object(te.bb)("%")+"+"+e(t))+"]"};return{_bandwidth:function(e){return"this.__bandwidth(".concat(r(e[0]),")")},_range:function(e){return"".concat(r(e[0]),".range()")},_scale:function(t){return"".concat(r(t[0]),"(").concat(e(t[1]),")")}}}function oA(e,t){return function(n,r,a){if(n){var i=aA(n,(a||this).context);return i&&i.path[e](r)}return t(r)}}var uA=oA("area",(function(e){return RE=new fy,sy(e,FE),2*RE})),sA=oA("bounds",(function(e){var t,n,r,a,i,o,u;if(VE=WE=-(BE=UE=1/0),XE=[],sy(e,JE),n=XE.length){for(XE.sort(oC),t=1,i=[r=XE[0]];t<n;++t)uC(r,(a=XE[t])[0])||uC(r,a[1])?(iC(r[0],a[1])>iC(r[0],r[1])&&(r[1]=a[1]),iC(a[0],r[1])>iC(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,t=0,r=i[n=i.length-1];t<=n;r=a,++t)a=i[t],(u=iC(r[1],a[0]))>o&&(o=u,BE=a[0],WE=r[1])}return XE=YE=null,BE===1/0||UE===1/0?[[NaN,NaN],[NaN,NaN]]:[[BE,UE],[WE,VE]]})),cA=oA("centroid",(function(e){sC=cC=lC=fC=dC=hC=pC=vC=0,mC=new fy,gC=new fy,bC=new fy,sy(e,jC);var t=+mC,n=+gC,r=+bC,a=Sy(t,n,r);return a<hy&&(t=hC,n=pC,r=vC,cC<dy&&(t=lC,n=fC,r=dC),(a=Sy(t,n,r))<hy)?[NaN,NaN]:[Oy(n,t)*by,Ry(r/a)*by]}));function lA(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function fA(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dA(e){var t=Object(yO.g)(e);return.2126*fA(t.r)+.7152*fA(t.g)+.0722*fA(t.b)}function hA(e,t){return e===t||e!==e&&t!==t||(Object(te.B)(e)?!(!Object(te.B)(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!hA(e[n],t[n]))return!1;return!0}(e,t):!(!Object(te.H)(e)||!Object(te.H)(t))&&pA(e,t))}function pA(e,t){for(var n in e)if(!hA(e[n],t[n]))return!1;return!0}function vA(e){return function(t){return pA(e,t)}}var mA={};function gA(e){return Object(te.B)(e)||ArrayBuffer.isView(e)?e:null}function bA(e){return gA(e)||(Object(te.J)(e)?e:null)}var yA=function(e){return e.data};function wA(e,t){var n=HC.call(t,e);return n.root&&n.root.lookup||{}}var xA=function(){return"undefined"!==typeof window&&window||null};var OA={random:function(){return Ro()},cumulativeNormal:$o,cumulativeLogNormal:Jo,cumulativeUniform:ru,densityNormal:qo,densityLogNormal:Yo,densityUniform:nu,quantileNormal:Ho,quantileLogNormal:Qo,quantileUniform:au,sampleNormal:Vo,sampleLogNormal:Xo,sampleUniform:tu,isArray:te.B,isBoolean:te.C,isDate:te.D,isDefined:function(e){return void 0!==e},isNumber:te.G,isObject:te.H,isRegExp:te.I,isString:te.J,isTuple:_i,isValid:function(e){return null!=e&&e===e},toBoolean:te.cb,toDate:te.db,toNumber:te.eb,toString:te.gb,indexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=bA(e)).indexOf.apply(t,r)},join:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=gA(e)).join.apply(t,r)},lastindexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=bA(e)).lastIndexOf.apply(t,r)},replace:function(e,t,n){return Object(te.E)(n)&&Object(te.o)("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return gA(e).slice().reverse()},slice:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=bA(e)).slice.apply(t,r)},flush:te.v,lerp:te.L,merge:function(){var e=[].slice.call(arguments);return e.unshift({}),te.p.apply(void 0,Object(Ys.a)(e))},pad:te.R,peek:te.W,pluck:function(e,t){var n=mA[t]||(mA[t]=Object(te.u)(t));return Object(te.B)(e)?e.map(n):n(e)},span:te.Z,inrange:te.A,truncate:te.hb,rgb:yO.g,lab:FC.a,hcl:FC.b,hsl:yO.f,luminance:dA,contrast:function(e,t){var n=dA(e),r=dA(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:ku,format:KC,utcFormat:YC,utcParse:QC,utcOffset:fr,utcSequence:pr,timeFormat:XC,timeParse:JC,timeOffset:lr,timeSequence:hr,timeUnitSpecifier:Mn,monthFormat:function(e){return eA.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return eA.call(this,e,1,"%b")},dayFormat:function(e){return eA.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return eA.call(this,0,2+e,"%a")},quarter:te.X,utcquarter:te.jb,week:Bn,utcweek:Hn,dayofyear:zn,utcdayofyear:$n,warn:function(){return lA(this.context.dataflow,"warn",arguments)},info:function(){return lA(this.context.dataflow,"info",arguments)},debug:function(){return lA(this.context.dataflow,"debug",arguments)},extent:te.q,inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];var r=Object(mo.a)(e,2),a=r[0],i=r[1],o=(new Rh).set(a[0],a[1],i[0],i[1]);return og(n||this.context.dataflow.scenegraph().root,o,function(e){var t=null;if(e){var n=Object(te.i)(e.marktype),r=Object(te.i)(e.markname);t=function(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))},clampRange:te.k,pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){var e=xA();return e?e.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){var e=xA();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return Of(e||0,t||0,n||0)},setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(te.ib).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?rh(n,t=t||Hd(e)):e}},panLinear:te.S,panLog:te.T,panPow:te.U,panSymlog:te.V,zoomLinear:te.nb,zoomLog:te.ob,zoomPow:te.pb,zoomSymlog:te.qb,encode:function(e,t,n){if(e){var r=this.context.dataflow,a=e.mark.source;r.pulse(a,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,a,i){var o,u,s=this.context.dataflow,c=this.context.data[e],l=c.input,f=s.stamp(),d=c.changes;if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!d||d.stamp<f)&&(c.changes=d=s.changeset(),d.stamp=f,s.runAfter((function(){c.modified=!0,s.pulse(l,d).run()}),!0,1)),n&&(o=!0===n?te.ib:Object(te.B)(n)||_i(n)?n:vA(n),d.remove(o)),t&&d.insert(t),r&&(o=vA(r),l.value.some(o)?d.remove(o):d.insert(r)),a)for(u in i)d.modify(a,u,i[u]);return 1}},kA=["view","item","group","xy","x","y"],jA="this.",_A={},SA={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_[".concat(Object(te.bb)("$"+e),"]")},functions:function(e){var t=SE(e);for(var n in kA.forEach((function(e){return t[e]="event.vega."+e})),OA)t[n]=jA+n;return Object(te.p)(t,iA(e,OA,_A)),t},constants:_E,visitors:_A},EA=EE(SA);function CA(e,t,n){return 1===arguments.length?OA[e]:(OA[e]=t,n&&(_A[e]=n),EA&&(EA.functions[e]=jA+e),this)}function AA(e,t){var n,r={};try{n=jE(e=Object(te.J)(e)?e:Object(te.bb)(e)+"")}catch(i){Object(te.o)("Expression parse error: "+e)}n.visit((function(e){if(e.type===gS){var n=e.callee.name,a=SA.visitors[n];a&&a(n,e.arguments,t,r)}}));var a=EA(n);return a.globals.forEach((function(e){var n="$"+e;!Object(te.w)(r,n)&&t.getSignal(e)&&(r[n]=t.signalRef(e))})),{$expr:Object(te.p)({code:a.code},t.options.ast?{ast:n}:null),$fields:a.fields,$params:r}}CA("bandwidth",(function(e,t){var n=aA(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),nA),CA("copy",(function(e,t){var n=aA(e,(t||this).context);return n?n.copy():void 0}),nA),CA("domain",(function(e,t){var n=aA(e,(t||this).context);return n?n.domain():[]}),nA),CA("range",(function(e,t){var n=aA(e,(t||this).context);return n&&n.range?n.range():[]}),nA),CA("invert",(function(e,t,n){var r=aA(e,(n||this).context);return r?Object(te.B)(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),nA),CA("scale",(function(e,t,n){var r=aA(e,(n||this).context);return r?r(t):void 0}),nA),CA("gradient",(function(e,t,n,r,a){e=aA(e,(a||this).context);var i=Ud(t,n),o=e.domain(),u=o[0],s=Object(te.W)(o),c=te.y;return s-u?c=ld(e,u,s):e=(e.interpolator?Jf("sequential")().interpolator(e.interpolator()):Jf("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,s=1]),e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==Object(te.W)(o)&&o.push(s)),o.forEach((function(t){return i.stop(c(t),e(t))})),i}),nA),CA("geoArea",uA,nA),CA("geoBounds",sA,nA),CA("geoCentroid",cA,nA),CA("geoShape",(function(e,t,n){var r=aA(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),nA),CA("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],a=r?r.value.get(n):void 0;return a?a.count:a}),(function(e,t,n,r){t[0].type!==dS&&Object(te.o)("First argument to indata must be a string literal."),t[1].type!==dS&&Object(te.o)("Second argument to indata must be a string literal.");var a=t[0].value,i=t[1].value,o="@"+i;Object(te.w)(o,r)||(r[o]=n.getData(a).indataRef(n,i))})),CA("data",HC,tA),CA("treePath",(function(e,t,n){var r=wA(e,this),a=r[t],i=r[n];return a&&i?a.path(i).map(yA):void 0}),tA),CA("treeAncestors",(function(e,t){var n=wA(e,this)[t];return n?n.ancestors().map(yA):void 0}),tA),CA("vlSelectionTest",(function(e,t,n){for(var r,a,i,o,u,s=this.context.data[e],c=s?s.values.value:[],l=s?s[LC]&&s[LC].value:void 0,f=n===MC,d=c.length,h=0;h<d;++h)if(r=c[h],l&&f){if(-1===(i=(a=a||{})[o=r.unit]||0))continue;if(u=zC(t,r),a[o]=u?-1:++i,u&&1===l.size)return!0;if(!u&&i===l.get(o).count)return!1}else if(f^(u=zC(t,r)))return u;return d&&f}),$C),CA("vlSelectionIdTest",(function(e,t,n){var r=this.context.data[e],a=r?r.values.value:[],i=r?r[LC]&&r[LC].value:void 0,o=n===MC,u=BC(t),s=WC(a,u);if(s===a.length)return!1;if(BC(a[s])!==u)return!1;if(i&&o){if(1===i.size)return!0;if(VC(a,u)-s<i.size)return!1}return!0}),$C),CA("vlSelectionResolve",(function(e,t,n,r){for(var a,i,o,u,s,c,l,f,d,h,p,v=this.context.data[e],m=v?v.values.value:[],g={},b={},y={},w=m.length,x=0;x<w;++x){for(u=(a=m[x]).unit,i=a.fields,o=a.values,h=0,p=i.length;h<p;++h)s=i[h],l=(c=g[s.field]||(g[s.field]={}))[u]||(c[u]=[]),y[s.field]=f=s.type.charAt(0),d=qC[f+"_union"],c[u]=d(l,Object(te.i)(o[h]));n&&(l=b[u]||(b[u]=[])).push(Object(te.i)(o).reduce((function(e,t,n){return e[i[n].field]=t,e}),{}))}return t=t||PC,Object.keys(g).forEach((function(e){g[e]=Object.keys(g[e]).map((function(t){return g[e][t]})).reduce((function(n,r){return void 0===n?r:qC[y[e]+"_"+t](n,r)}))})),m=Object.keys(b),n&&m.length&&(g[r?"vlPoint":"vlMulti"]=t===PC?Object(pt.a)({},"or",m.reduce((function(e,t){return e.push.apply(e,Object(Ys.a)(b[t])),e}),[])):Object(pt.a)({},"and",m.map((function(e){return Object(pt.a)({},"or",b[e])})))),g}),$C),CA("vlSelectionTuples",(function(e,t){return e.map((function(e){return Object(te.p)({values:t.fields.map((function(t){return(t.getter||(t.getter=Object(te.u)(t.field)))(e.datum)}))},t)}))}));var TA=Object(te.fb)(["rule"]),NA=Object(te.fb)(["group","image","rect"]);function IA(e){return(e+"").toLowerCase()}function DA(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");var r=Function.apply(void 0,Object(Ys.a)(t.concat(n)));return e&&e.functions?r.bind(e.functions):r}var RA={operator:function(e,t){return DA(e,["_"],t.code)},parameter:function(e,t){return DA(e,["datum","_"],t.code)},event:function(e,t){return DA(e,["event"],t.code)},handler:function(e,t){return DA(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";"))},encode:function(e,t){var n=t.marktype,r=t.channels,a="var o=item,datum=o.datum,m=0,$;";for(var i in r){var o="o["+Object(te.bb)(i)+"]";a+="$=".concat(r[i].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return a+=function(e,t){var n="";return TA[t]||(e.x2&&(e.x?(NA[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(NA[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),DA(e,["item","_"],a+="return m;")},codegen:{get:function(e){var t="[".concat(e.map(te.bb).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){var n,r=Function("a","b","var u, v; return "+e.map((function(e,r){var a,i,o=t[r];return e.path?(a="a".concat(e.path),i="b".concat(e.path)):((n=n||{})["f"+r]=e,a="this.f".concat(r,"(a)"),i="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(a,i,-o,o)})).join("")+"0;");return n?r.bind(n):r}}};function FA(e,t,n){if(!e||!Object(te.H)(e))return e;for(var r,a=0,i=MA.length;a<i;++a)if(r=MA[a],Object(te.w)(e,r.key))return r.parse(e,t,n);return e}var MA=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Object(te.o)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(te.K)(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);var r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=Object(te.f)(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(te.u)(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){var n=e.$encode,r={};for(var a in n){var i=n[a];r[a]=Object(te.f)(t.encodeExpression(i.$expr),i.$fields),r[a].output=i.$output}return r}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(te.i)(e.$compare).map((function(e){return e&&e.$tupleid?Si:e}));return t.fn[n]||(t.fn[n]=Object(te.l)(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,a){var i=t.fork().parse(n),o=i.get(n.operators[0].id),u=i.signals.parent;return u&&u.set(a),o.detachSubflow=function(){return t.detach(i)},o}}},{key:"$tupleid",parse:function(){return Si}}];var PA={skip:!0};function LA(e,t,n,r){return new zA(e,t,n,r)}function zA(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||RA,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function BA(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}zA.prototype=BA.prototype={fork:function(){var e=new BA(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((function(t){return t!==e}));for(var t=Object.keys(e.nodes),n=0,r=t;n<r.length;n++){var a=r[n];e.nodes[a]._targets=null}for(var i=0,o=t;i<o.length;i++){var u=o[i];e.nodes[u].detach()}e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,r=n.dataflow,a=e.value;if(n.set(e.id,t),"collect"===IA(e.type)&&a&&(a.$ingest?r.ingest(t,a.$ingest,a.$format):a.$request?r.preload(t,a.$request,a.$format):r.pulse(t,r.changeset().insert(a))),e.root&&(n.root=t),e.parent){var i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((function(){i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data){var o=function(r){var a=n.data[r]||(n.data[r]={});e.data[r].forEach((function(e){return a[e]=t}))};for(var u in e.data)o(u)}},resolve:function(){return(this.unresolved||[]).forEach((function(e){return e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[IA(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,a){this.dataflow.on(t,n,r,a,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){var t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((function(e){return t.parseOperator(e)})),n.forEach((function(e){return t.parseOperatorParameters(e)})),(e.streams||[]).forEach((function(e){return t.parseStream(e)})),(e.updates||[]).forEach((function(e){return t.parseUpdate(e)})),t.resolve()},parseOperator:function(e){var t=this;"operator"!==IA(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){var t=this;if(e.params){var n=t.get(e.id);n||Object(te.o)("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};var n=this;for(var r in e){var a=e[r];t[r]=Object(te.B)(a)?a.map((function(e){return FA(e,n,t)})):FA(a,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,a=null!=e.stream?n.get(e.stream):void 0;e.source?a=n.events(e.source,e.type,r):e.merge&&(a=(t=e.merge.map((function(e){return n.get(e)})))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((function(e){return n.get(e)})),a=a.between(t[0],t[1])),e.filter&&(a=a.filter(r)),null!=e.throttle&&(a=a.throttle(+e.throttle)),null!=e.debounce&&(a=a.debounce(+e.debounce)),null==a&&Object(te.o)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&a.consume(!0),n.stream(e,a)},parseUpdate:function(e){var t,n=this,r=Object(te.H)(r=e.source)?r.$ref:r,a=n.get(r),i=e.update,o=void 0;a||Object(te.o)("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),i&&i.$expr&&(i.$params&&(o=n.parseParameters(i.$params)),i=n.handlerExpression(i.$expr)),n.update(e,a,t,i,o)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var a=t.signals[n];e.signals(n,a)&&(r[n]=a.value)}))}if(e.data){var a=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(a[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,a=e.signals;Object.keys(a||{}).forEach((function(e){n.update(t.signals[e],a[e],PA)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(te.ib).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};function UA(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}var WA="default";function VA(e,t){var n=e.globalCursor()?"undefined"!==typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function qA(e,t){var n=e._runtime.data;return Object(te.w)(n,t)||Object(te.o)("Unrecognized data set: "+t),n[t]}function $A(e,t){Di(t)||Object(te.o)("Second argument to changes must be a changeset.");var n=qA(this,e);return n.modified=!0,this.pulse(n.input,t)}function HA(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function GA(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function KA(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function XA(e){var t=KA(e),n=HA(e),r=GA(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(a){e.error(a)}}))}function YA(e,t,n){var r,a,i=e._renderer,o=i&&i.canvas();return o&&(a=KA(e),(r=Vv(t.changedTouches?t.changedTouches[0]:t,o))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function a(e){var n,a=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){a=n;break}return a&&a.mark&&a.mark.interactive?a:{}}function i(e){if(!e)return n;Object(te.J)(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Object(te.m)(e),item:Object(te.m)(t||{}),group:a,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t}var JA="view",QA={trap:!1};function ZA(e,t,n,r){e._eventListeners.push({type:n,sources:Object(te.i)(t),handler:r})}function eT(e,t,n){var r=e._eventConfig&&e._eventConfig[t];return!(!1===r||Object(te.H)(r)&&!r[n])||(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1)}function tT(e){return e.item}function nT(e){return e.item.mark.source}function rT(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function aT(e,t,n){var r=document.createElement(e);for(var a in t)r.setAttribute(a,t[a]);return null!=n&&(r.textContent=n),r}function iT(e,t,n,r){var a=n.event||"input",i=function(){return e.update(t.value)};r.signal(n.signal,t.value),t.addEventListener(a,i),ZA(r,t,a,i),e.set=function(e){t.value=e,t.dispatchEvent(function(e){return"undefined"!==typeof Event?new Event(e):{type:e}}(a))}}function oT(e,t,n,r){var a=r.signal(n.signal),i=aT("div",{class:"vega-bind"}),o="radio"===n.input?i:i.appendChild(aT("label"));o.appendChild(aT("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(i);var u=uT;switch(n.input){case"checkbox":u=sT;break;case"select":u=cT;break;case"radio":u=lT;break;case"range":u=fT}u(e,o,n,a)}function uT(e,t,n,r){var a=aT("input");for(var i in n)"signal"!==i&&"element"!==i&&a.setAttribute("input"===i?"type":i,n[i]);a.setAttribute("name",n.signal),a.value=r,t.appendChild(a),a.addEventListener("input",(function(){return e.update(a.value)})),e.elements=[a],e.set=function(e){return a.value=e}}function sT(e,t,n,r){var a={type:"checkbox",name:n.signal};r&&(a.checked=!0);var i=aT("input",a);t.appendChild(i),i.addEventListener("change",(function(){return e.update(i.checked)})),e.elements=[i],e.set=function(e){return i.checked=!!e||null}}function cT(e,t,n,r){var a=aT("select",{name:n.signal}),i=n.labels||[];n.options.forEach((function(e,t){var n={value:e};dT(e,r)&&(n.selected=!0),a.appendChild(aT("option",n,(i[t]||e)+""))})),t.appendChild(a),a.addEventListener("change",(function(){e.update(n.options[a.selectedIndex])})),e.elements=[a],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(dT(n.options[t],e))return void(a.selectedIndex=t)}}function lT(e,t,n,r){var a=aT("span",{class:"vega-bind-radio"}),i=n.labels||[];t.appendChild(a),e.elements=n.options.map((function(t,o){var u={type:"radio",name:n.signal,value:t};dT(t,r)&&(u.checked=!0);var s=aT("input",u);s.addEventListener("change",(function(){return e.update(t)}));var c=aT("label",{},(i[o]||t)+"");return c.prepend(s),a.appendChild(c),s})),e.set=function(t){for(var n=e.elements,r=n.length,a=0;a<r;++a)dT(n[a].value,t)&&(n[a].checked=!0)}}function fT(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var a=null!=n.max?n.max:Math.max(100,+r)||100,i=n.min||Math.min(0,a,+r)||0,o=n.step||Qe(i,a,100),u=aT("input",{type:"range",name:n.signal,min:i,max:a,step:o});u.value=r;var s=aT("span",{},+r);t.appendChild(u),t.appendChild(s);var c=function(){s.textContent=u.value,e.update(+u.value)};u.addEventListener("input",c),u.addEventListener("change",c),e.elements=[u],e.set=function(e){u.value=e,s.textContent=e}}function dT(e,t){return e===t||e+""===t+""}function hT(e,t,n,r,a,i){return(t=t||new r(e.loader())).initialize(n,HA(e),GA(e),KA(e),a,i).background(e.background())}function pT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function vT(e,t,n){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(r){t=null,e.error(r)}return t}var mT=function(e){return+e||0};function gT(e){return Object(te.H)(e)?{top:mT(e.top),bottom:mT(e.bottom),left:mT(e.left),right:mT(e.right)}:function(e){return{top:e,bottom:e,left:e,right:e}}(mT(e))}function bT(e,t,n,r){return yT.apply(this,arguments)}function yT(){return(yT=Object(ne.a)(x.a.mark((function e(t,n,r,a){var i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ig(n),(o=i&&i.headless)||Object(te.o)("Unrecognized renderer type: "+n),e.next=4,t.runAsync();case 4:return e.abrupt("return",hT(t,null,null,o,r,a).renderAsync(t._scenegraph.root));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wT(){return(wT=Object(ne.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t!==rg.Canvas&&t!==rg.SVG&&t!==rg.PNG&&Object(te.o)("Unrecognized image type: "+t),e.next=3,bT(this,t,n);case 3:return r=e.sent,e.abrupt("return",t===rg.SVG?xT(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function xT(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function OT(){return(OT=Object(ne.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(this,rg.Canvas,t,n);case 2:return r=e.sent,e.abrupt("return",r.canvas());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function kT(){return(kT=Object(ne.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(this,rg.SVG,t);case 2:return n=e.sent,e.abrupt("return",n.svg());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var jT="width",_T="height",ST="padding",ET={skip:!0};function CT(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ST?r.left+r.right:0)}function AT(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ST?r.top+r.bottom:0)}function TT(e,t){return t.modified&&Object(te.B)(t.input.value)&&e.indexOf("_:vega:_")}function NT(e,t){return!("parent"===e||t instanceof fo.proxy)}function IT(e,t,n,r){var a=e.element();a&&a.setAttribute("title",function(e){return null==e?"":Object(te.B)(e)?DT(e):Object(te.H)(e)&&!Object(te.D)(e)?(t=e,Object.keys(t).map((function(e){var n=t[e];return e+": "+(Object(te.B)(n)?DT(n):RT(n))})).join("\n")):e+"";var t}(r))}function DT(e){return"["+e.map(RT).join(", ")+"]"}function RT(e){return Object(te.B)(e)?"[\u2026]":Object(te.H)(e)&&!Object(te.D)(e)?"{\u2026}":e}function FT(e,t){var n=this;if(t=t||{},so.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){var r=Object(te.p)({},e.locale,t.locale);n.locale(vi(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||rg.Canvas,n._scenegraph=new Mv;var a=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||IT,n._redraw=!0,n._handler=(new cm).scene(a),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){var t=Object(te.p)({defaults:{}},e),n=function(e,t){t.forEach((function(t){Object(te.B)(e[t])&&(e[t]=Object(te.fb)(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);var i=function(e,t,n){return LA(e,fo,OA,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((function(e){return{state:null,param:Object(te.p)({},e)}})),i.root&&i.root.set(a),a.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(a.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=CT(n,n._width),n._viewHeight=AT(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,a=t.padding;function i(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=CT(e,t.size),i()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=AT(e,t.size),i()}),{size:r});var o=e.add(null,i,{pad:a});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=a.rank+1}(n),function(e){e.add(null,(function(t){return e._background=t.bg,e._resize=1,t.bg}),{bg:e._signals.background})}(n),function(e){var t=e._signals.cursor||(e._signals.cursor=e.add({user:WA,item:null}));e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,a=r?Object(te.J)(r)?r:r.user:WA,i=n.item&&n.item.cursor||null;return r&&a===r.user&&i==r.item?r:{user:a,item:i}})),e.add(null,(function(t){var n=t.cursor,r=this.value;return Object(te.J)(n)||(r=n.item,n=n.user),VA(e,n&&n!==WA?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function MT(e,t){return Object(te.w)(e._signals,t)?e._signals[t]:Object(te.o)("Unrecognized signal name: "+Object(te.bb)(t))}function PT(e,t){var n=(e._targets||[]).filter((function(e){return e._update&&e._update.handler===t}));return n.length?n[0]:null}function LT(e,t,n,r){var a=PT(n,r);return a||((a=pT(e,(function(){return r(t,n.value)}))).handler=r,e.on(n,null,a)),e}function zT(e,t,n){var r=PT(t,n);return r&&t._targets.remove(r),e}Object(te.z)(FT,so,{evaluate:function(e,t,n){var r=this;return Object(ne.a)(x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,so.prototype.evaluate.call(r,e,t);case 2:if(!r._redraw&&!r._resize){a.next=14;break}if(a.prev=3,!r._renderer){a.next=8;break}return r._resize&&(r._resize=0,XA(r)),a.next=8,r._renderer.renderAsync(r._scenegraph.root);case 8:r._redraw=!1,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),r.error(a.t0);case 14:return n&&xi(r,n),a.abrupt("return",r);case 16:case"end":return a.stop()}}),a,null,[[3,11]])})))()},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){var t=null!=e?e+"":null;return t!==this._desc&&UA(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){var r=MT(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",gT(e)):gT(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(ig(e)||Object(te.o)("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(so.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(MT(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,a,i){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(jT,n,ET),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(_T,r,ET),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===a[0]&&o._origin[1]===a[1]||(o._resize=1,o._origin=a),u&&o.run("enter"),i&&o.runAfter((function(e){return e.resize()}))}),!1,1)},addEventListener:function(e,t,n){var r=t;return n&&!1===n.trap||((r=pT(this,t)).raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,a=this._handler.handlers(e),i=a.length;--i>=0;)if(r=a[i].type,n=a[i].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return LT(this,e,MT(this,e),t)},removeSignalListener:function(e,t){return zT(this,MT(this,e),t)},addDataListener:function(e,t){return LT(this,e,qA(this,e).values,t)},removeDataListener:function(e,t){return zT(this,qA(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){var t=VA(this,null);this._globalCursor=!!e,t&&VA(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new sk.a,a=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?Object(sk.b)():+n,r._restart((function i(o){o+=a,r._restart(i,a+=t,n),e(o)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,a=this,i=new Wi(n),o=function(n,r){a.runAsync(null,(function(){e===JA&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,a=n.allow;return!1!==r&&!0!==a&&(!0===r||!1===a||(r?r[t]:a?!a[t]:e.preventDefault()))}(a,t)&&n.preventDefault(),i.receive(YA(a,n,r))}))};if("timer"===e)eT(a,"timer",t)&&a.timer(o,t);else if(e===JA)eT(a,"view",t)&&a.addEventListener(t,o,QA);else if("window"===e?eT(a,"window",t)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&eT(a,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);ZA(a,r,t,o)}else a.warn("Can not resolve event source: "+e);return i},finalize:function(){var e,t,n,r=this._tooltip,a=this._timers,i=this._eventListeners;for(e=a.length;--e>=0;)a[e].stop();for(e=i.length;--e>=0;)for(t=(n=i[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",tT),nT,rT(e)),this.on(this.events("view","mouseout",tT),nT,rT(t)),this},data:function(e,t){return arguments.length<2?qA(this,e).values.value:$A.call(this,e,Ri().remove(te.ib).insert(t))},change:$A,insert:function(e,t){return $A.call(this,e,Ri().insert(t))},remove:function(e,t){return $A.call(this,e,Ri().remove(t))},scale:function(e){var t=this._runtime.scales;return Object(te.w)(t,e)||Object(te.o)("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){var n=this,r=n._renderType,a=n._eventConfig.bind,i=ig(r);e=n._el=e?vT(n,e,!0):null,function(e){var t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),UA(t,e.description()))}(n),i||n.error("Unrecognized renderer type: "+r);var o=i.handler||cm,u=e?i.renderer:i.headless;return n._renderer=u?hT(n,n._renderer,e,u):null,n._handler=function(e,t,n,r){var a=new r(e.loader(),pT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,KA(e),e);return t&&t.handlers().forEach((function(e){a.on(e.type,e.handler)})),a}(n,n._handler,e,o),n._redraw=!0,e&&"none"!==a&&(t=t?n._elBind=vT(n,t,!0):e.appendChild(aT("form",{class:"vega-bindings"})),n._bind.forEach((function(e){e.param.element&&"container"!==a&&(e.element=vT(n,e.param.element,!!e.param.input))})),n._bind.forEach((function(e){!function(e,t,n){if(t){var r=n.param,a=n.state;a||(a=n.state={elements:null,active:!1,set:null,update:function(t){t!=e.signal(r.signal)&&e.runAsync(null,(function(){a.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(a.update=Object(te.n)(r.debounce,a.update))),(null==r.input&&r.element?iT:oT)(a,t,r,e),a.active||(e.on(e._signals[r.signal],null,(function(){a.source?a.source=!1:a.set(e.signal(r.signal))})),a.active=!0)}}(n,e.element||t,e)}))),n},toImageURL:function(e,t){return wT.apply(this,arguments)},toCanvas:function(e,t){return OT.apply(this,arguments)},toSVG:function(e){return kT.apply(this,arguments)},getState:function(e){return this._runtime.getState(e||{data:TT,signals:NT,recurse:!0})},setState:function(e){return this.runAsync(null,(function(t){t._trigger=!1,t._runtime.setState(e)}),(function(e){e._trigger=!0})),this}});var BT,UT,WT="[",VT="]",qT=/[[\]{}]/,$T={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function HT(e,t,n){return BT=t||"view",UT=n||$T,KT(e.trim()).map(XT)}function GT(e,t,n,r,a){for(var i,o=e.length,u=0;t<o;++t){if(i=e[t],!u&&i===n)return t;a&&a.indexOf(i)>=0?--u:r&&r.indexOf(i)>=0&&++u}return t}function KT(e){for(var t=[],n=e.length,r=0,a=0;a<n;)a=GT(e,a,",","[{","]}"),t.push(e.substring(r,a).trim()),r=++a;if(0===t.length)throw"Empty event selector: "+e;return t}function XT(e){return"["===e[0]?function(e){var t,n=e.length,r=1;if((r=GT(e,r,VT,WT,VT))===n)throw"Empty between selector: "+e;if(2!==(t=KT(e.substring(1,r))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;t=t.map(XT);var a=XT(e.slice(1).trim());if(a.between)return{between:t,stream:a};a.between=t;return a}(e):function(e){var t,n,r={source:BT},a=[],i=[0,0],o=0,u=0,s=e.length,c=0;if("}"===e[s-1]){if(!((c=e.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+e;try{i=function(e){var t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(c+1,s-1))}catch(f){throw"Invalid throttle specification: "+e}s=(e=e.slice(0,c).trim()).length,c=0}if(!s)throw e;"@"===e[0]&&(o=++c);(t=GT(e,c,":"))<s&&(a.push(e.substring(u,t).trim()),u=c=++t);if((c=GT(e,c,WT))===s)a.push(e.substring(u,s).trim());else if(a.push(e.substring(u,c).trim()),n=[],(u=++c)===s)throw"Unmatched left bracket: "+e;for(;c<s;){if((c=GT(e,c,VT))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,c).trim()),c<s-1&&e[++c]!==WT)throw"Expected left bracket: "+e;u=++c}if(!(s=a.length)||qT.test(a[s-1]))throw"Invalid event selector: "+e;s>1?(r.type=a[1],o?r.markname=a[0].slice(1):(l=a[0],UT[l]?r.marktype=a[0]:r.source=a[0])):r.type=a[0];var l;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);i[0]&&(r.throttle=i[0]);i[1]&&(r.debounce=i[1]);return r}(e)}function YT(e){return Object(te.H)(e)?e:{type:e||"pad"}}var JT=function(e){return+e||0};function QT(e){return Object(te.H)(e)?e.signal?e:{top:JT(e.top),bottom:JT(e.bottom),left:JT(e.left),right:JT(e.right)}:{top:t=JT(e),bottom:t,left:t,right:t};var t}var ZT=function(e){return Object(te.H)(e)&&!Object(te.B)(e)?Object(te.p)({},e):{value:e}};function eN(e,t,n,r){return null!=n?(Object(te.H)(n)&&!Object(te.B)(n)||Object(te.B)(n)&&n.length&&Object(te.H)(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function tN(e,t,n){for(var r in t)eN(e,r,t[r]);for(var a in n)eN(e,a,n[a],"update")}function nN(e,t,n){for(var r in t)n&&Object(te.w)(n,r)||(e[r]=Object(te.p)(e[r]||{},t[r]));return e}function rN(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var aN="mark",iN="frame",oN="scope",uN="legend-label",sN="title-text",cN="title-subtitle";function lN(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var fN=function(e){return Object(te.J)(e)?Object(te.bb)(e):e.signal?"(".concat(e.signal,")"):vN(e)};function dN(e){if(null!=e.gradient)return function(e){var t=[e.start,e.stop,e.count].map((function(e){return null==e?null:Object(te.bb)(e)}));for(;t.length&&null==Object(te.W)(t);)t.pop();return t.unshift(fN(e.gradient)),"gradient(".concat(t.join(","),")")}(e);var t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?hN("hcl",e.h,e.c,e.l):e.h||e.s?hN("hsl",e.h,e.s,e.l):e.l||e.a?hN("lab",e.l,e.a,e.b):e.r||e.g||e.b?hN("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?vN(e.field):void 0!==e.value?Object(te.bb)(e.value):void 0;return null!=e.scale&&(t=function(e,t){var n=fN(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1===+e.band?"":"*"+pN(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(pN(e.exponent),")")),null!=e.mult&&(t+="*".concat(pN(e.mult))),null!=e.offset&&(t+="+".concat(pN(e.offset))),e.round&&(t="round(".concat(t,")")),t}var hN=function(e,t,n,r){return"(".concat(e,"(").concat([t,n,r].map(dN).join(","),")+'')")};function pN(e){return Object(te.H)(e)?"("+dN(e)+")":e}function vN(e){return mN(Object(te.H)(e)?e:{datum:e})}function mN(e){var t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Object(te.o)("Invalid field reference: "+Object(te.bb)(e));return e.signal||(r=Object(te.J)(r)?Object(te.ab)(r).map(te.bb).join("]["):mN(r)),t+"["+r+"]"}function gN(e,t,n,r,a,i){var o={};for(var u in(i=i||{}).encoders={$encode:o},e=function(e,t,n,r,a){var i,o,u,s={},c={};for(o in o="lineBreak","text"!==t||null==a[o]||rN(o,e)||lN(s,o,a[o]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===iN?a.group:n===aN?Object(te.p)({},a.mark,a[t]):null)rN(o,e)||("fill"===o||"stroke"===o)&&(rN("fill",e)||rN("stroke",e))||lN(s,o,u[o]);for(o in Object(te.i)(r).forEach((function(t){var n=a.style&&a.style[t];for(var r in n)rN(r,e)||lN(s,r,n[r])})),e=Object(te.p)({},e),s)(u=s[o]).signal?(i=i||{})[o]=u:c[o]=u;return e.enter=Object(te.p)(c,e.enter),i&&(e.update=Object(te.p)(i,e.update)),e}(e,t,n,r,a.config))o[u]=bN(e[u],t,i,a);return i}function bN(e,t,n,r){var a,i={},o={};for(var u in e)null!=e[u]&&(i[u]=yN((a=e[u],Object(te.B)(a)?function(e){var t="";return e.forEach((function(e){var n=dN(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===Object(te.W)(t)&&(t+="null"),t}(a):dN(a)),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function yN(e,t,n,r){var a=AA(e,t);return a.$fields.forEach((function(e){return r[e]=1})),Object(te.p)(n,a.$params),a.$expr}var wN=["value","update","init","react","bind"];function xN(e,t){Object(te.o)(e+' for "outer" push: '+Object(te.bb)(t))}function ON(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||xN("No prior signal definition",n),wN.forEach((function(t){void 0!==e[t]&&xN("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function kN(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function jN(e,t,n,r){return new kN(e,t,n,r)}function _N(e,t){return jN("operator",e,t)}function SN(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function EN(e,t){return t?{$field:e,$name:t}:{$field:e}}var CN=EN("key");function AN(e,t){return{$compare:e,$order:t}}function TN(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var NN="scope",IN="view";function DN(e){return e&&e.signal}function RN(e){if(DN(e))return!0;if(Object(te.H)(e))for(var t in e)if(RN(e[t]))return!0;return!1}function FN(e,t){return null!=e?e:t}function MN(e){return e&&e.signal||e}var PN="timer";function LN(e,t){return(e.merge?zN:e.stream?BN:e.type?UN:Object(te.o)("Invalid stream specification: "+Object(te.bb)(e)))(e,t)}function zN(e,t){var n=WN({merge:e.merge.map((function(e){return LN(e,t)}))},e,t);return t.addStream(n).id}function BN(e,t){var n=WN({stream:LN(e.stream,t)},e,t);return t.addStream(n).id}function UN(e,t){var n,r;e.type===PN?(n=t.event(PN,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===NN?IN:r||IN,e.type);var a=WN({stream:n},e,t);return 1===Object.keys(a).length?n:t.addStream(a).id}function WN(e,t,n){var r=t.between;return r&&(2!==r.length&&Object(te.o)('Stream "between" parameter must have 2 entries: '+Object(te.bb)(t)),e.between=[LN(r[0],n),LN(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===NN&&r.push("inScope(event.item)"),r.length&&(e.filter=AA("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}var VN={code:"_.$value",ast:{type:"Identifier",value:"value"}};function qN(e,t,n){var r=e.encode,a={target:n},i=e.events,o=e.update,u=[];i||Object(te.o)("Signal update missing events specification."),Object(te.J)(i)&&(i=HT(i,t.isSubscope()?NN:IN)),i=Object(te.i)(i).filter((function(e){return e.signal||e.scale?(u.push(e),0):1})),u.length>1&&(u=[$N(u)]),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=r&&(o&&Object(te.o)("Signal encode and update are mutually exclusive."),o="encode(item(),"+Object(te.bb)(r)+")"),a.update=Object(te.J)(o)?AA(o,t):null!=o.expr?AA(o.expr,t):null!=o.value?o.value:null!=o.signal?{$expr:VN,$params:{$value:t.signalRef(o.signal)}}:Object(te.o)("Invalid signal update specification."),e.force&&(a.options={force:!0}),u.forEach((function(e){return t.addUpdate(Object(te.p)(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):LN(e,t)}}(e,t),a))}))}function $N(e){return{signal:"["+e.map((function(e){return e.scale?'scale("'+e.scale+'")':e.signal}))+"]"}}var HN=function(e){return function(t,n,r){return jN(e,n,t||void 0,r)}},GN=HN("aggregate"),KN=HN("axisticks"),XN=HN("bound"),YN=HN("collect"),JN=HN("compare"),QN=HN("datajoin"),ZN=HN("encode"),eI=HN("expression"),tI=HN("facet"),nI=HN("field"),rI=HN("key"),aI=HN("legendentries"),iI=HN("load"),oI=HN("mark"),uI=HN("multiextent"),sI=HN("multivalues"),cI=HN("overlap"),lI=HN("params"),fI=HN("prefacet"),dI=HN("projection"),hI=HN("proxy"),pI=HN("relay"),vI=HN("render"),mI=HN("scale"),gI=HN("sieve"),bI=HN("sortitems"),yI=HN("viewlayout"),wI=HN("values"),xI=0,OI={min:"min",max:"max",count:"sum"};function kI(e,t){var n,r,a=t.getScale(e.name).params;for(n in a.domain=EI(e.domain,e,t),null!=e.range&&(a.range=FI(e,t,a)),null!=e.interpolate&&function(e,t){t.interpolate=jI(e.type||e),null!=e.gamma&&(t.interpolateGamma=jI(e.gamma))}(e.interpolate,a),null!=e.nice&&(a.nice=(r=e.nice,Object(te.H)(r)?{interval:jI(r.interval),step:jI(r.step)}:jI(r))),null!=e.bins&&(a.bins=function(e,t){return e.signal||Object(te.B)(e)?_I(e,t):t.objectProperty(e)}(e.bins,t)),e)Object(te.w)(a,n)||"name"===n||(a[n]=jI(e[n],t))}function jI(e,t){return Object(te.H)(e)?e.signal?t.signalRef(e.signal):Object(te.o)("Unsupported object: "+Object(te.bb)(e)):e}function _I(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return jI(e,t)}))}function SI(e){Object(te.o)("Can not find data set: "+Object(te.bb)(e))}function EI(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Object(te.B)(e)?CI:e.fields?TI:AI)(e,t,n);null==t.domainMin&&null==t.domainMax||Object(te.o)("No scale domain defined for domainMin/domainMax to override.")}function CI(e,t,n){return e.map((function(e){return jI(e,n)}))}function AI(e,t,n){var r=n.getData(e.data);return r||SI(e.data),td(t.type)?r.valuesRef(n,e.field,II(e.sort,!1)):id(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function TI(e,t,n){var r=e.data,a=e.fields.reduce((function(e,t){return t=Object(te.J)(t)?{data:r,field:t}:Object(te.B)(t)||t.signal?function(e,t){var n="_:vega:_"+xI++,r=YN({});if(Object(te.B)(e))r.value={$ingest:e};else if(e.signal){var a="setdata("+Object(te.bb)(n)+","+e.signal+")";r.params.input=t.signalRef(a)}return t.addDataPipeline(n,[r,gI({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(td(t.type)?NI:id(t.type)?DI:RI)(e,n,a)}function NI(e,t,n){var r,a,i=II(e.sort,!0),o=n.map((function(e){var n=t.getData(e.data);return n||SI(e.data),n.countsRef(t,e.field,i)})),u={groupby:CN,pulse:o};i&&(r=i.op||"count",a=i.field?TN(r,i.field):"count",u.ops=[OI[r]],u.fields=[t.fieldRef(a)],u.as=[a]),r=t.add(GN(u));var s=t.add(YN({pulse:SN(r)}));return a=t.add(wI({field:CN,sort:t.sortRef(i),pulse:SN(s)})),SN(a)}function II(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!OI[e.op]&&Object(te.o)("Multiple domain scales can not be sorted using "+e.op):Object(te.o)("No field provided for sort aggregate op: "+e.op):Object(te.H)(e)?e.field="key":e={field:"key"}),e}function DI(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||SI(e.data),n.domainRef(t,e.field)}));return SN(t.add(sI({values:r})))}function RI(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||SI(e.data),n.extentRef(t,e.field)}));return SN(t.add(uI({extents:r})))}function FI(e,t,n){var r=t.config.range,a=e.range;if(a.signal)return t.signalRef(a.signal);if(Object(te.J)(a)){if(r&&Object(te.w)(r,a))return FI(e=Object(te.p)({},e,{range:r[a]}),t,n);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=td(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(te.o)("Unrecognized scale range value: "+Object(te.bb)(a))}else{if(a.scheme)return n.scheme=Object(te.B)(a.scheme)?_I(a.scheme,t):jI(a.scheme,t),a.extent&&(n.schemeExtent=_I(a.extent,t)),void(a.count&&(n.schemeCount=jI(a.count,t)));if(a.step)return void(n.rangeStep=jI(a.step,t));if(td(e.type)&&!Object(te.B)(a))return EI(a,e,t);Object(te.B)(a)||Object(te.o)("Unsupported range type: "+Object(te.bb)(a))}return a.map((function(e){return(Object(te.B)(e)?_I:jI)(e,t)}))}function MI(e,t,n){return Object(te.B)(e)?e.map((function(e){return MI(e,t,n)})):Object(te.H)(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Object(te.o)("Unsupported parameter object: "+Object(te.bb)(e)):e}var PI="top",LI="left",zI="right",BI="bottom",UI="center",WI="index",VI="label",qI="perc",$I="value",HI="guide-label",GI="guide-title",KI="group-title",XI="group-subtitle",YI="symbol",JI="gradient",QI="discrete",ZI="size",eD=[ZI,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],tD={name:1,style:1,interactive:1},nD={value:0},rD={value:1},aD="group",iD="rect",oD="rule",uD="text";function sD(e){return e.type=aD,e.interactive=e.interactive||!1,e}function cD(e,t){var n=function(n,r){return FN(e[n],FN(t[n],r))};return n.isVertical=function(n){return"vertical"===FN(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection))},n.gradientLength=function(){return FN(e.gradientLength,t.gradientLength||t.gradientWidth)},n.gradientThickness=function(){return FN(e.gradientThickness,t.gradientThickness||t.gradientHeight)},n.entryColumns=function(){return FN(e.columns,FN(t.columns,+n.isVertical(!0)))},n}function lD(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function fD(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}var dD=fD(Object(te.bb)(LI),Object(te.bb)(zI),Object(te.bb)(UI));function hD(e,t){return t?e?Object(te.H)(e)?Object.assign({},e,{offset:hD(e.offset,t)}):{value:e,offset:t}:t:e}function pD(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=nN(e.encode,t,tD)):e.interactive=!1,e}function vD(e,t,n,r){var a,i,o,u,s,c=cD(e,n),l=c.isVertical(),f=c.gradientThickness(),d=c.gradientLength();l?(i=[0,1],o=[0,0],u=f,s=d):(i=[0,0],o=[1,0],u=d,s=f);var h={enter:a={opacity:nD,x:nD,y:nD,width:ZT(u),height:ZT(s)},update:Object(te.p)({},a,{opacity:rD,fill:{gradient:t,start:i,stop:o}}),exit:{opacity:nD}};return tN(h,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),pD({type:iD,role:"legend-gradient",encode:h},r)}function mD(e,t,n,r,a){var i,o,u,s,c=cD(e,n),l=c.isVertical(),f=c.gradientThickness(),d=c.gradientLength(),h="";l?(i="y",u="y2",o="x",s="width",h="1-"):(i="x",u="x2",o="y",s="height");var p={opacity:nD,fill:{scale:t,field:$I}};p[i]={signal:h+"datum."+qI,mult:d},p[o]=nD,p[u]={signal:h+"datum.perc2",mult:d},p[s]=ZT(f);var v={enter:p,update:Object(te.p)({},p,{opacity:rD}),exit:{opacity:nD}};return tN(v,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),pD({type:iD,role:"legend-band",key:$I,from:a,encode:v},r)}var gD="datum.".concat(qI,'<=0?"').concat(LI,'":datum.').concat(qI,'>=1?"').concat(zI,'":"').concat(UI,'"'),bD="datum.".concat(qI,'<=0?"').concat(BI,'":datum.').concat(qI,'>=1?"').concat(PI,'":"').concat("middle",'"');function yD(e,t,n,r){var a,i,o,u,s=cD(e,t),c=s.isVertical(),l=ZT(s.gradientThickness()),f=s.gradientLength(),d=s("labelOverlap"),h="",p={enter:a={opacity:nD},update:i={opacity:rD,text:{field:VI}},exit:{opacity:nD}};return tN(p,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:FN(e.labelLimit,t.gradientLabelLimit)}),c?(a.align={value:"left"},a.baseline=i.baseline={signal:bD},o="y",u="x",h="1-"):(a.align=i.align={signal:gD},a.baseline={value:"top"},o="x",u="y"),a[o]=i[o]={signal:h+"datum."+qI,mult:f},a[u]=i[u]=l,l.offset=FN(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:s("labelSeparation"),method:d,order:"datum.index"}:void 0,pD({type:uD,role:uN,style:HI,key:$I,from:r,encode:p,overlap:d},n)}function wD(e,t,n,r,a){var i,o,u,s,c,l=cD(e,t),f=n.entries,d=!(!f||!f.interactive),h=f?f.name:void 0,p=l("clipHeight"),v=l("symbolOffset"),m={data:"value"},g="(".concat(a,") ? datum.").concat("offset"," : datum.").concat(ZI),b=p?ZT(p):{field:ZI},y="datum.".concat(WI),w="max(1, ".concat(a,")");b.mult=.5,i={enter:o={opacity:nD,x:{signal:g,mult:.5,offset:v},y:b},update:u={opacity:rD,x:o.x,y:o.y},exit:{opacity:nD}};var x=null,O=null;e.fill||(x=t.symbolBaseFillColor,O=t.symbolBaseStrokeColor),tN(i,{fill:l("symbolFillColor",x),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",O),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),eD.forEach((function(t){e[t]&&(u[t]=o[t]={scale:e[t],field:$I})}));var k=pD({type:"symbol",role:"legend-symbol",key:$I,from:m,clip:!!p||void 0,encode:i},n.symbols),j=ZT(v);j.offset=l("labelOffset"),tN(i={enter:o={opacity:nD,x:{signal:g,offset:j},y:b},update:u={opacity:rD,text:{field:VI},x:o.x,y:o.y},exit:{opacity:nD}},{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});var _=pD({type:uD,role:uN,style:HI,key:$I,from:m,encode:i},n.labels);return i={enter:{noBound:{value:!p},width:nD,height:p?ZT(p):nD,opacity:nD},exit:{opacity:nD},update:u={opacity:rD,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(s="ceil(item.mark.items.length / ".concat(w,")"),u.row.signal="".concat(y,"%").concat(s),u.column.signal="floor(".concat(y," / ").concat(s,")"),c={field:["row",y]}):(u.row.signal="floor(".concat(y," / ").concat(w,")"),u.column.signal="".concat(y," % ").concat(w),c={field:y}),u.column.signal="(".concat(a,")?").concat(u.column.signal,":").concat(y),sD({role:oN,from:r={facet:{data:r,name:"value",groupby:WI}},encode:nN(i,f,tD),marks:[k,_],name:h,interactive:d,sort:c})}var xD='item.orient === "left"',OD='item.orient === "right"',kD="(".concat(xD," || ").concat(OD,")"),jD="datum.vgrad && ".concat(kD),_D=fD('"top"','"bottom"','"middle"'),SD=fD('"right"','"left"','"center"'),ED="datum.vgrad && ".concat(OD," ? (").concat(SD,") : (").concat(kD," && !(datum.vgrad && ").concat(xD,')) ? "left" : ').concat(dD),CD="item._anchor || (".concat(kD,' ? "middle" : "start")'),AD="".concat(jD," ? (").concat(xD," ? -90 : 90) : 0"),TD="".concat(kD," ? (datum.vgrad ? (").concat(OD,' ? "bottom" : "top") : ').concat(_D,') : "top"');function ND(e,t){var n;return Object(te.H)(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ID(e.path)+")":e.sphere&&(n="geoShape("+ID(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ID(e){return Object(te.H)(e)&&e.signal?e.signal:Object(te.bb)(e)}function DD(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===aD?oN:t||aN:t}function RD(e){return{marktype:e.type,name:e.name||void 0,role:e.role||DD(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function FD(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function MD(e,t){var n=ho(e.type);n||Object(te.o)("Unrecognized transform type: "+Object(te.bb)(e.type));var r=jN(n.type.toLowerCase(),null,PD(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function PD(e,t,n){for(var r={},a=e.params.length,i=0;i<a;++i){var o=e.params[i];r[o.name]=LD(o,t,n)}return r}function LD(e,t,n){var r=e.type,a=t[e.name];return"index"===r?function(e,t,n){Object(te.J)(t.from)||Object(te.o)('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==a?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(Object(te.B)(r)||Object(te.o)("Expected an array of sub-parameters. Instead: "+Object(te.bb)(r)),r.map((function(t){return BD(e,t,n)}))):BD(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!DN(a)?a.map((function(t){return zD(e,t,n)})):zD(e,a,n):void(e.required&&Object(te.o)("Missing required "+Object(te.bb)(t.type)+" parameter: "+Object(te.bb)(e.name)))}function zD(e,t,n){var r=e.type;if(DN(t))return qD(r)?Object(te.o)("Expression references can not be signals."):$D(r)?n.fieldRef(t):HD(r)?n.compareRef(t):n.signalRef(t.signal);var a=e.expr||$D(r);return a&&UD(t)?n.exprRef(t.expr,t.as):a&&WD(t)?EN(t.field,t.as):qD(r)?AA(t,n):VD(r)?SN(n.getData(t).values):$D(r)?EN(t):HD(r)?n.compareRef(t):t}function BD(e,t,n){for(var r,a=e.params.length,i=0;i<a;++i){for(var o in(r=e.params[i]).key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||Object(te.o)("Unsupported parameter: "+Object(te.bb)(t));var u=Object(te.p)(PD(r,t,n),r.key);return SN(n.add(lI(u)))}var UD=function(e){return e&&e.expr},WD=function(e){return e&&e.field},VD=function(e){return"data"===e},qD=function(e){return"expr"===e},$D=function(e){return"field"===e},HD=function(e){return"compare"===e};function GD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:SN(t.getData(e.data).output)}function KD(e,t,n,r,a){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=a,this.index={}}function XD(e){return Object(te.J)(e)?e:null}function YD(e,t,n){var r,a=TN(n.op,n.field);if(t.ops){for(var i=0,o=t.as.length;i<o;++i)if(t.as[i]===a)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(a))}function JD(e,t,n,r,a,i,o){var u,s,c=t[n]||(t[n]={}),l=function(e){return Object(te.H)(e)?("descending"===e.order?"-":"+")+TN(e.op,e.field):""}(i),f=XD(a);if(null!=f&&(e=t.scope,u=c[f+=l?"|"+l:""]),!u){var d=i?{field:CN,pulse:t.countsRef(e,a,i)}:{field:e.fieldRef(a),pulse:SN(t.output)};l&&(d.sort=e.sortRef(i)),s=e.add(jN(r,void 0,d)),o&&(t.index[a]=s),u=SN(s),null!=f&&(c[f]=u)}return u}function QD(e,t,n){var r=e.remove,a=e.insert,i=e.toggle,o=e.modify,u=e.values,s=t.add(_N()),c=AA("if("+e.trigger+',modify("'+n+'",'+[a,r,i,o,u].map((function(e){return null==e?"null":e})).join(",")+"),0)",t);s.update=c.$expr,s.params=c.$params}function ZD(e,t){var n,r,a,i,o,u,s,c=DD(e),l=e.type===aD,f=e.from&&e.from.facet,d=e.overlap,h=e.layout||c===oN||c===iN,p=c===aN||h||f,v=function(e,t,n){var r,a,i,o,u;return e?(r=e.facet)&&(t||Object(te.o)("Only group marks can be faceted."),null!=r.field?o=u=GD(r,n):(e.data?u=SN(n.getData(e.data).aggregate):((i=MD(Object(te.p)({type:"aggregate",groupby:Object(te.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),i.params.pulse=GD(r,n),o=u=SN(n.add(i))),a=n.keyRef(r.groupby,!0))):o=SN(n.add(YN(null,[{}]))),o||(o=GD(e,n)),{key:a,pulse:o,parent:u}}(e.from,l,t),m=SN(r=t.add(QN({key:v.key||(e.key?EN(e.key):void 0),pulse:v.pulse,clean:!l})));r=a=t.add(YN({pulse:m})),r=t.add(oI({markdef:RD(e),interactive:FD(e.interactive,t),clip:ND(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:SN(r)}));var g=SN(r);(r=i=t.add(ZN(gN(e.encode,e.type,c,e.style,t,{mod:!1,pulse:g})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=MD(e,t),a=n.metadata;(a.generates||a.changes)&&Object(te.o)("Mark transforms should not generate new data."),a.nomod||(i.params.mod=!0),n.params.pulse=SN(r),t.add(r=n)})),e.sort&&(r=t.add(bI({sort:t.compareRef(e.sort),pulse:SN(r)})));var b=SN(r);(f||h)&&(u=SN(h=t.add(yI({layout:t.objectProperty(e.layout),legends:t.legends,mark:g,pulse:b}))));var y=t.add(XN({mark:g,pulse:u||b}));s=SN(y),l&&(p&&((n=t.operators).pop(),h&&n.pop()),t.pushState(b,u||s,m),f?function(e,t,n){var r,a=e.from.facet,i=a.name,o=GD(a,t);a.name||Object(te.o)("Facet must have a name: "+Object(te.bb)(a)),a.data||Object(te.o)("Facet must reference a data set: "+Object(te.bb)(a)),a.field?r=t.add(fI({field:t.fieldRef(a.field),pulse:o})):a.groupby?r=t.add(tI({key:t.keyRef(a.groupby),group:SN(t.proxy(n.parent)),pulse:o})):Object(te.o)("Facet must specify groupby or field: "+Object(te.bb)(a));var u=t.fork(),s=u.add(YN()),c=u.add(gI({pulse:SN(s)}));u.addData(i,new KD(u,s,s,c)),u.addSignal("parent",null),r.params.subflow={$subflow:u.parse(e).toRuntime()}}(e,t,v):p?function(e,t,n){var r=t.add(fI({pulse:n.pulse})),a=t.fork();a.add(gI()),a.addSignal("parent",null),r.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,v):t.parse(e),t.popState(),p&&(h&&n.push(h),n.push(y))),d&&(s=function(e,t,n){var r=e.method,a=e.bound,i=e.separation,o={separation:DN(i)?n.signalRef(i.signal):i,method:DN(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(o.sort=n.compareRef({field:e.order}));if(a){var u=a.tolerance;o.boundTolerance=DN(u)?n.signalRef(u.signal):+u,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient}return SN(n.add(cI(o)))}(d,s,t));var w=t.add(vI({pulse:s})),x=t.add(gI({pulse:SN(w)},void 0,t.parent()));null!=e.name&&(o=e.name,t.addData(o,new KD(t,a,w,x)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&Object(te.o)("Marks only support modify triggers."),QD(e,t,o)})))}function eR(e,t){var n,r,a,i=t.config.legend,o=e.encode||{},u=cD(e,i),s=o.legend||{},c=s.name||void 0,l=s.interactive,f=s.style,d={},h=0;eD.forEach((function(t){return e[t]?(d[t]=e[t],h=h||e[t]):0})),h||Object(te.o)("Missing valid scale for legend.");var p=function(e,t){var n=e.type||YI;e.type||1!==function(e){return eD.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=ed(t)?JI:nd(t)?QI:YI);return n!==JI?n:nd(t)?QI:JI}(e,t.scaleType(h)),v={title:null!=e.title,scales:d,type:p,vgrad:"symbol"!==p&&u.isVertical()},m=SN(t.add(YN(null,[v]))),g=SN(t.add(aI(r={type:p,scale:t.scaleRef(h),count:t.objectProperty(u("tickCount")),limit:t.property(u("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===JI?(a=[vD(e,h,i,o.gradient),yD(e,i,o.labels,g)],r.count=r.count||t.signalRef("max(2,2*floor((".concat(MN(u.gradientLength()),")/100))"))):p===QI?a=[mD(e,h,i,o.gradient,g),yD(e,i,o.labels,g)]:(n=function(e,t){var n=cD(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,i),a=[wD(e,i,o,g,MN(n.columns))],r.size=function(e,t,n){var r=MN(nR("size",e,n)),a=MN(nR("strokeWidth",e,n)),i=MN(function(e,t,n){return lD("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,HI));return AA("max(ceil(sqrt(".concat(r,")+").concat(a,"),").concat(i,")"),t)}(e,t,a[0].marks)),a=[sD({role:"legend-entry",from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:a,layout:n,interactive:l})],v.title&&a.push(function(e,t,n,r){var a=cD(e,t),i={enter:{opacity:nD},update:{opacity:rD,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:nD}};return tN(i,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:CD},angle:{signal:AD},align:{signal:ED},baseline:{signal:TD},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),pD({type:uD,role:"legend-title",style:GI,from:r,encode:i},n)}(e,i,o.title,m)),ZD(sD({role:"legend",from:m,encode:nN(tR(u,e,i),s,tD),marks:a,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:c,interactive:l,style:f}),t)}function tR(e,t,n){var r={enter:{},update:{}};return tN(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function nR(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):lD(e,n[0].encode)}KD.fromEntries=function(e,t){var n=t.length,r=t[n-1],a=t[n-2],i=t[0],o=null,u=1;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=SN(t[u-1]),e.add(t[u]),"aggregate"===t[u].type&&(o=t[u]);return new KD(e,i,a,r,o)},KD.prototype={countsRef:function(e,t,n){var r,a,i,o=this,u=o.counts||(o.counts={}),s=XD(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&YD(e,r.agg.params,n):(i={groupby:e.fieldRef(t,"key"),pulse:SN(o.output)},n&&n.field&&YD(e,i,n),a=e.add(GN(i)),r=e.add(YN({pulse:SN(a)})),r={agg:a,ref:SN(r)},null!=s&&(u[s]=r)),r.ref},tuplesRef:function(){return SN(this.values)},extentRef:function(e,t){return JD(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return JD(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return JD(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return JD(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return JD(e,this,"indata","tupleindex",t,!0,!0)}};var rR='item.orient==="'.concat(LI,'"?-90:item.orient==="').concat(zI,'"?90:0');function aR(e,t){var n=cD(e=Object(te.J)(e)?{text:e}:e,t.config.title),r=e.encode||{},a=r.group||{},i=a.name||void 0,o=a.interactive,u=a.style,s=[],c=SN(t.add(YN(null,[{}])));return s.push(function(e,t,n,r){var a={value:0},i=e.text,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return tN(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),pD({type:uD,role:sN,style:KI,from:r,encode:o},n)}(e,n,function(e){var t=e.encode;return t&&t.title||Object(te.p)({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&s.push(function(e,t,n,r){var a={value:0},i=e.subtitle,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return tN(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),pD({type:uD,role:cN,style:XI,from:r,encode:o},n)}(e,n,r.subtitle,c)),ZD(sD({role:"title",from:c,encode:iR(n,a),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:i,interactive:o,style:u}),t)}function iR(e,t){var n={enter:{},update:{}};return tN(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:dD},angle:{signal:rR},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),nN(n,t,tD)}function oR(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(MD(e,t))})),e.on&&e.on.forEach((function(n){QD(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,a,i,o,u,s=[],c=null,l=!1,f=!1;e.values?DN(e.values)||RN(e.format)?(s.push(sR(t,e)),s.push(c=uR())):s.push(c=uR({$ingest:e.values,$format:e.format})):e.url?RN(e.url)||RN(e.format)?(s.push(sR(t,e)),s.push(c=uR())):s.push(c=uR({$request:e.url,$format:e.format})):e.source&&(c=r=Object(te.i)(e.source).map((function(e){return SN(t.getData(e).output)})),s.push(null));for(a=0,i=n.length;a<i;++a)u=(o=n[a]).metadata,c||u.source||s.push(c=uR()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=o:u.changes&&(c=null);r&&(i=r.length-1,s[0]=pI({derive:l,pulse:i?r:r[0]}),(l||i)&&s.splice(1,0,uR()));c||s.push(uR());return s.push(gI({})),s}(e,t,n))}function uR(e){var t=YN({},e);return t.metadata={source:!0},t}function sR(e,t){return iI({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var cR=function(e){return e===BI||e===PI},lR=function(e,t,n){return DN(e)?mR(e.signal,t,n):e===LI||e===PI?t:n},fR=function(e,t,n){return DN(e)?pR(e.signal,t,n):cR(e)?t:n},dR=function(e,t,n){return DN(e)?vR(e.signal,t,n):cR(e)?n:t},hR=function(e,t,n){return DN(e)?gR(e.signal,t,n):e===PI?{value:t}:{value:n}},pR=function(e,t,n){return yR("".concat(e," === '").concat(PI,"' || ").concat(e," === '").concat(BI,"'"),t,n)},vR=function(e,t,n){return yR("".concat(e," !== '").concat(PI,"' && ").concat(e," !== '").concat(BI,"'"),t,n)},mR=function(e,t,n){return xR("".concat(e," === '").concat(LI,"' || ").concat(e," === '").concat(PI,"'"),t,n)},gR=function(e,t,n){return xR("".concat(e," === '").concat(PI,"'"),t,n)},bR=function(e,t,n){return xR("".concat(e," === '").concat(zI,"'"),t,n)},yR=function(e,t,n){return t=null!=t?ZT(t):t,n=null!=n?ZT(n):n,wR(t)&&wR(n)?(t=t?t.signal||Object(te.bb)(t.value):null,n=n?n.signal||Object(te.bb)(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[Object(te.p)({test:e},t)].concat(n||[])},wR=function(e){return null==e||1===Object.keys(e).length},xR=function(e,t,n){return{signal:"".concat(e," ? (").concat(OR(t),") : (").concat(OR(n),")")}},OR=function(e){return DN(e)?e.signal:null==e?null:Object(te.bb)(e)},kR=function(e,t){var n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function jR(e,t,n,r){var a;if(t&&Object(te.w)(t,e))return t[e];if(Object(te.w)(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][a]}if(e.startsWith("label")){switch(e){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][a]}return null}function _R(e){var t,n={},r=Object(vo.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a)for(var i in a)n[i]=1}}catch(o){r.e(o)}finally{r.f()}return Object.keys(n)}function SR(e,t){return{scale:e.scale,range:t}}function ER(e,t,n,r,a){var i,o,u,s=cD(e,t),c=e.orient,l=e.gridScale,f=lR(c,1,-1),d=function(e,t){if(1===t);else if(Object(te.H)(e)){for(var n=e=Object(te.p)({},e);null!=n.mult;){if(!Object(te.H)(n.mult))return n.mult=DN(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=Object(te.p)({},n.mult)}n.mult=t}else e=DN(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,f),h={enter:i={opacity:nD},update:u={opacity:rD},exit:o={opacity:nD}};tN(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});var p={scale:e.scale,field:$I,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")},v=fR(c,{signal:"height"},{signal:"width"}),m=l?{scale:l,range:0,mult:f,offset:d}:{value:0,offset:d},g=l?{scale:l,range:1,mult:f,offset:d}:Object(te.p)(v,{mult:f,offset:d});return i.x=u.x=fR(c,p,m),i.y=u.y=dR(c,p,m),i.x2=u.x2=dR(c,g),i.y2=u.y2=fR(c,g),o.x=fR(c,p),o.y=dR(c,p),pD({type:oD,role:"axis-grid",key:$I,from:r,encode:h},n)}function CR(e,t,n,r,a){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+a+")"}}function AR(e,t,n,r,a,i){var o,u=cD(e,t),s=e.orient,c=e.scale,l=lR(s,-1,1),f=MN(u("labelFlush")),d=MN(u("labelFlushOffset")),h=u("labelAlign"),p=u("labelBaseline"),v=0===f||!!f,m=ZT(a);m.mult=l,m.offset=ZT(u("labelPadding")||0),m.offset.mult=l;var g={scale:c,field:$I,band:.5,offset:hD(i.offset,u("labelOffset"))},b=fR(s,v?CR(c,f,'"left"','"right"','"center"'):{value:"center"},function(e,t,n){return DN(e)?bR(e.signal,t,n):e===zI?{value:t}:{value:n}}(s,"left","right")),y=fR(s,hR(s,"bottom","top"),v?CR(c,f,'"top"','"bottom"','"middle"'):{value:"middle"}),w=CR(c,f,"-(".concat(d,")"),d,0);v=v&&d;var x={opacity:nD,x:fR(s,g,m),y:dR(s,g,m)},O={enter:x,update:o={opacity:rD,text:{field:VI},x:x.x,y:x.y,align:b,baseline:y},exit:{opacity:nD,x:x.x,y:x.y}};tN(O,{dx:!h&&v?fR(s,w):null,dy:!p&&v?dR(s,w):null}),tN(O,{angle:u("labelAngle"),fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontWeight:u("labelFontWeight"),fontStyle:u("labelFontStyle"),limit:u("labelLimit"),lineHeight:u("labelLineHeight")},{align:h,baseline:p});var k=u("labelBound"),j=u("labelOverlap");return j=j||k?{separation:u("labelSeparation"),method:j,order:"datum.index",bound:k?{scale:c,orient:s,tolerance:k}:null}:void 0,o.align!==b&&(o.align=kR(o.align,b)),o.baseline!==y&&(o.baseline=kR(o.baseline,y)),pD({type:uD,role:"axis-label",style:HI,key:$I,from:r,encode:O,overlap:j},n)}function TR(e,t,n,r){var a,i,o=cD(e,t),u=e.orient,s=lR(u,-1,1),c={enter:a={opacity:nD,anchor:ZT(o("titleAnchor",null)),align:{signal:dD}},update:i=Object(te.p)({},a,{opacity:rD,text:ZT(e.title)}),exit:{opacity:nD}},l={signal:'lerp(range("'.concat(e.scale,'"), ').concat(fD(0,1,.5),")")};return i.x=fR(u,l),i.y=dR(u,l),a.angle=fR(u,nD,function(e,t){return 0===t?0:DN(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t}}(s,90)),a.baseline=fR(u,hR(u,BI,PI),{value:BI}),i.angle=a.angle,i.baseline=a.baseline,tN(c,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),function(e,t,n,r){var a=function(e,t){return null!=e?(n.update[t]=kR(ZT(e),n.update[t]),!1):!rN(t,r)},i=a(e("titleX"),"x"),o=a(e("titleY"),"y");n.enter.auto=o===i?ZT(o):fR(t,ZT(o),ZT(i))}(o,u,c,n),c.update.align=kR(c.update.align,a.align),c.update.angle=kR(c.update.angle,a.angle),c.update.baseline=kR(c.update.baseline,a.baseline),pD({type:uD,role:"axis-title",style:GI,from:r,encode:c},n)}function NR(e,t){var n,r=function(e,t){var n,r,a,i,o,u,s,c,l=t.config,f=l.style,d=l.axis,h="band"===t.scaleType(e.scale)&&l.axisBand,p=e.orient;if(DN(p)){var v=_R([l.axisX,l.axisY]),m=_R([l.axisTop,l.axisBottom,l.axisLeft,l.axisRight]);n={};var g,b=Object(vo.a)(v);try{for(b.s();!(g=b.n()).done;)n[a=g.value]=fR(p,jR(a,l.axisX,d,f),jR(a,l.axisY,d,f))}catch(x){b.e(x)}finally{b.f()}r={};var y,w=Object(vo.a)(m);try{for(w.s();!(y=w.n()).done;)r[a=y.value]=(i=p.signal,o=jR(a,l.axisTop,d,f),u=jR(a,l.axisBottom,d,f),s=jR(a,l.axisLeft,d,f),c=jR(a,l.axisRight,d,f),{signal:(null!=s?"".concat(i," === '").concat(LI,"' ? (").concat(OR(s),") : "):"")+(null!=u?"".concat(i," === '").concat(BI,"' ? (").concat(OR(u),") : "):"")+(null!=c?"".concat(i," === '").concat(zI,"' ? (").concat(OR(c),") : "):"")+(null!=o?"".concat(i," === '").concat(PI,"' ? (").concat(OR(o),") : "):"")+"(null)"})}catch(x){w.e(x)}finally{w.f()}}else n=p===PI||p===BI?l.axisX:l.axisY,r=l["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?Object(te.p)({},d,n,r,h):d}(e,t),a=e.encode||{},i=a.axis||{},o=i.name||void 0,u=i.interactive,s=i.style,c=cD(e,r),l=function(e){var t,n,r=e("tickBand"),a=e("tickOffset");return r?r.signal?(t={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},n={signal:"(".concat(r.signal,") === 'extent'")},Object(te.H)(a)||(a={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(a)})):"extent"===r?(t=1,n=!0,a=0):(t=.5,n=!1):(t=e("bandPosition"),n=e("tickExtra")),{extra:n,band:t,offset:a}}(c),f={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:null!=e.title},d=SN(t.add(YN({},[f]))),h=SN(t.add(KN({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];return f.grid&&p.push(ER(e,r,a.grid,h,l)),f.ticks&&(n=c("tickSize"),p.push(function(e,t,n,r,a,i){var o,u,s,c=cD(e,t),l=e.orient,f=lR(l,-1,1),d={enter:o={opacity:nD},update:s={opacity:rD},exit:u={opacity:nD}};tN(d,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});var h=ZT(a);h.mult=f;var p={scale:e.scale,field:$I,band:i.band,extra:i.extra,offset:i.offset,round:c("tickRound")};return s.y=o.y=fR(l,nD,p),s.y2=o.y2=fR(l,h),u.x=fR(l,p),s.x=o.x=dR(l,nD,p),s.x2=o.x2=dR(l,h),u.y=dR(l,p),pD({type:oD,role:"axis-tick",key:$I,from:r,encode:d},n)}(e,r,a.ticks,h,n,l))),f.labels&&(n=f.ticks?n:0,p.push(AR(e,r,a.labels,h,n,l))),f.domain&&p.push(function(e,t,n,r){var a,i,o=cD(e,t),u=e.orient,s={enter:a={opacity:nD},update:i={opacity:rD},exit:{opacity:nD}};tN(s,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});var c=SR(e,0),l=SR(e,1);return a.x=i.x=fR(u,c,nD),a.x2=i.x2=fR(u,l),a.y=i.y=dR(u,c,nD),a.y2=i.y2=dR(u,l),pD({type:oD,role:"axis-domain",from:r,encode:s},n)}(e,r,a.domain,d)),f.title&&p.push(TR(e,r,a.title,d)),ZD(sD({role:"axis",from:d,encode:nN(IR(c,e),i,tD),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:u,style:s}),t)}function IR(e,t){var n={enter:{},update:{}};return tN(n,{orient:e("orient"),offset:e("offset")||0,position:FN(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function DR(e,t,n){var r=Object(te.i)(e.signals),a=Object(te.i)(e.scales);return n||r.forEach((function(e){return ON(e,t)})),Object(te.i)(e.projections).forEach((function(e){return function(e,t){var n=t.config.projection||{},r={};for(var a in e)"name"!==a&&(r[a]=MI(e[a],a,t));for(var i in n)null==r[i]&&(r[i]=MI(n[i],i,t));t.addProjection(e.name,r)}(e,t)})),a.forEach((function(e){return function(e,t){var n=e.type||"linear";Qf(n)||Object(te.o)("Unrecognized scale type: "+Object(te.bb)(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)})),Object(te.i)(e.data).forEach((function(e){return oR(e,t)})),a.forEach((function(e){return kI(e,t)})),(n||r).forEach((function(e){return function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?Object(te.o)("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=AA(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){return qN(e,t,n.id)}))}(e,t)})),Object(te.i)(e.axes).forEach((function(e){return NR(e,t)})),Object(te.i)(e.marks).forEach((function(e){return ZD(e,t)})),Object(te.i)(e.legends).forEach((function(e){return eR(e,t)})),e.title&&aR(e.title,t),t.parseLambdas(),t}function RR(e,t){var n=t.config,r=SN(t.root=t.add(_N())),a=function(e,t){var n=function(n){return FN(e[n],t[n])},r=[FR("background",n("background")),FR("autosize",YT(n("autosize"))),FR("padding",QT(n("padding"))),FR("width",n("width")||0),FR("height",n("height")||0)],a=r.reduce((function(e,t){return e[t.name]=t,e}),{}),i={};return Object(te.i)(e.signals).forEach((function(e){Object(te.w)(a,e.name)?e=Object(te.p)(a[e.name],e):r.push(e),i[e.name]=e})),Object(te.i)(t.signals).forEach((function(e){Object(te.w)(i,e.name)||Object(te.w)(a,e.name)||r.push(e)})),r}(e,n);a.forEach((function(e){return ON(e,t)})),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;var i=t.add(YN()),o=t.add(ZN(gN(function(e){return nN({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e)}(e.encode),aD,iN,e.style,t,{pulse:SN(i)}))),u=t.add(yI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:SN(o)}));t.operators.pop(),t.pushState(SN(o),SN(u),null),DR(e,t,a),t.operators.push(u);var s=t.add(XN({mark:r,pulse:SN(u)}));return s=t.add(vI({pulse:SN(s)})),s=t.add(gI({pulse:SN(s)})),t.addData("root",new KD(t,i,i,s)),t}function FR(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function MR(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function PR(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function LR(e){return(Object(te.B)(e)?zR:BR)(e)}function zR(e){for(var t=e.length,n="[",r=0;r<t;++r){var a=e[r];n+=(r>0?",":"")+(Object(te.H)(a)?a.signal||LR(a):Object(te.bb)(a))}return n+"]"}function BR(e){var t,n,r="{",a=0;for(t in e)n=e[t],r+=(++a>1?",":"")+Object(te.bb)(t)+":"+(Object(te.H)(n)?n.signal||LR(n):Object(te.bb)(n));return r+"}"}function UR(e,t,n){return Object(te.H)(e)||Object(te.o)("Input Vega specification must be an object."),RR(e,new MR(t=Object(te.P)(function(){var e="sans-serif",t="#4c78a8",n="#000",r="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}MR.prototype=PR.prototype={parse:function(e){return DR(e,this)},fork:function(){return new PR(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},proxy:function(e){var t=e instanceof kN?SN(e):e;return this.add(hI({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},pushState:function(e,t,n){this._encode.push(SN(this.add(gI({pulse:e})))),this._parent.push(t),this._lookup.push(n?SN(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return Object(te.W)(this._parent)},encode:function(){return Object(te.W)(this._encode)},lookup:function(){return Object(te.W)(this._lookup)},markpath:function(){var e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(Object(te.J)(e))return EN(e,t);e.signal||Object(te.o)("Unsupported field reference: "+Object(te.bb)(e));var n=e.signal,r=this.field[n];if(!r){var a={name:this.signalRef(n)};t&&(a.as=t),this.field[n]=r=SN(this.add(nI(a)))}return r},compareRef:function(e){var t=this,n=!1,r=function(e){return DN(e)?(n=!0,t.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(n=!0,t.exprRef(e.expr)):e},a=Object(te.i)(e.field).map(r),i=Object(te.i)(e.order).map(r);return n?SN(this.add(JN({fields:a,orders:i}))):AN(a,i)},keyRef:function(e,t){var n=!1,r=this.signals;return e=Object(te.i)(e).map((function(e){return DN(e)?(n=!0,SN(r[e.signal])):e})),n?SN(this.add(rI({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;var t=TN(e.op,e.field),n=e.order||"ascending";return n.signal?SN(this.add(JN({fields:t,orders:this.signalRef(n.signal)}))):AN(t,n)},event:function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return Object(te.w)(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&Object(te.o)("Duplicate signal name: "+Object(te.bb)(e));var n=t instanceof kN?t:this.add(_N(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||Object(te.o)("Unrecognized signal name: "+Object(te.bb)(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?SN(this.signals[e]):(Object(te.w)(this.lambdas,e)||(this.lambdas[e]=this.add(_N(null))),SN(this.lambdas[e]))},parseLambdas:function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],a=AA(r,this),i=this.lambdas[r];i.params=a.$params,i.update=a.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&Object(te.H)(e)?this.signalRef(e.signal||LR(e)):e},exprRef:function(e,t){var n={expr:AA(e,this)};return t&&(n.expr.$name=t),SN(this.add(eI(n)))},addBinding:function(e,t){this.bindings||Object(te.o)("Nested signals do not support binding: "+Object(te.bb)(e)),this.bindings.push(Object(te.p)({signal:e},t))},addScaleProj:function(e,t){Object(te.w)(this.scales,e)&&Object(te.o)("Duplicate scale or projection name: "+Object(te.bb)(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,mI(t))},addProjection:function(e,t){this.addScaleProj(e,dI(t))},getScale:function(e){return this.scales[e]||Object(te.o)("Unrecognized scale name: "+Object(te.bb)(e)),this.scales[e]},scaleRef:function(e){return SN(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return Object(te.w)(this.data,e)&&Object(te.o)("Duplicate data set name: "+Object(te.bb)(e)),this.data[e]=t},getData:function(e){return this.data[e]||Object(te.o)("Undefined data set name: "+Object(te.bb)(e)),this.data[e]},addDataPipeline:function(e,t){return Object(te.w)(this.data,e)&&Object(te.o)("Duplicate data set name: "+Object(te.bb)(e)),this.addData(e,KD.fromEntries(this,t))}};var WR="5.20.0";Object(te.p)(fo,i,o,u,s,c,f,l,d,h,p,v);var VR=WR,qR=n(451),$R=function(e,t,n){return e.fields=t||[],e.fname=n,e};var HR=function(e){return 1===e.length?GR(e[0]):KR(e)},GR=function(e){return function(t){return t[e]}},KR=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}},XR=function(e){throw Error(e)},YR=function(e){var t,n,r,a=[],i=null,o=0,u=e.length,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===i)c(),i=null,o=-1;else{if(i)continue;t===o&&'"'===r||t===o&&"'"===r?(t=n+1,i=r):"."!==r||o?"["===r?(n>t&&c(),o=t=n+1):"]"===r&&(o||XR("Access path missing open bracket: "+e),o>0&&c(),o=0,t=n+1):n>t?c():t=n+1}return o&&XR("Access path missing closing bracket: "+e),i&&XR("Access path missing closing quote: "+e),n>t&&(n++,c()),a},JR=function(e,t,n){var r=YR(e);return e=1===r.length?r[0]:e,$R((n&&n.get||HR)(r),[e],t||e)},QR=[],ZR=(JR("id"),$R((function(e){return e}),QR,"identity"));$R((function(){return 0}),QR,"zero"),$R((function(){return 1}),QR,"one"),$R((function(){return!0}),QR,"true"),$R((function(){return!1}),QR,"false");function eF(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var tF=Array.isArray,nF=function(e){return e===Object(e)},rF=function(e){return"__proto__"!==e};function aF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=oF(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;iF(e,n,t[n],r)}return e}),{})}function iF(e,t,n,r){var a,i;if(rF(t))if(nF(n)&&!tF(n))for(a in i=nF(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?iF(i,a,n[a]):rF(a)&&(i[a]=n[a]);else e[t]=n}function oF(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}var uF=function(e){return null!=e?tF(e)?e:[e]:[]},sF=function(e){return"function"===typeof e},cF=Object.prototype.hasOwnProperty,lF=function(e,t){return cF.call(e,t)},fF=function(e){return"boolean"===typeof e},dF=function(e){return"number"===typeof e},hF=function(e){return"string"===typeof e};function pF(e){return tF(e)?"["+e.map(pF)+"]":nF(e)||hF(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var vF=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t};function mF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var gF=n(452),bF=n.n(gF),yF=n(453),wF=n.n(yF),xF=n(173),OF=n.n(xF);function kF(e){return!!e.or}function jF(e){return!!e.and}function _F(e){return!!e.not}function SF(e,t){if(_F(e))SF(e.not,t);else if(jF(e)){var n,r=Object(vo.a)(e.and);try{for(r.s();!(n=r.n()).done;){SF(n.value,t)}}catch(o){r.e(o)}finally{r.f()}}else if(kF(e)){var a,i=Object(vo.a)(e.or);try{for(i.s();!(a=i.n()).done;){SF(a.value,t)}}catch(o){i.e(o)}finally{i.f()}}else t(e)}function EF(e,t){return _F(e)?{not:EF(e.not,t)}:jF(e)?{and:e.and.map((function(e){return EF(e,t)}))}:kF(e)?{or:e.or.map((function(e){return EF(e,t)}))}:t(e)}var CF=wF.a,AF=bF.a;function TF(e,t){var n,r={},a=Object(vo.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;lF(e,i)&&(r[i]=e[i])}}catch(o){a.e(o)}finally{a.f()}return r}function NF(e,t){var n,r=Object.assign({},e),a=Object(vo.a)(t);try{for(a.s();!(n=a.n()).done;){delete r[n.value]}}catch(i){a.e(i)}finally{a.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat(Object(Ys.a)(this).map((function(e){return OF()(e)})).join(","),")")};var IF=OF.a;function DF(e){if(dF(e))return e;var t=hF(e)?e:OF()(e);if(t.length<250)return t;for(var n=0,r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function RF(e){return!1===e||null===e}function FF(e,t){return e.indexOf(t)>-1}function MF(e,t){var n,r=0,a=Object(vo.a)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=Object(mo.a)(n.value,2),o=i[0];if(t(i[1],o,r++))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}function PF(e,t){var n,r=0,a=Object(vo.a)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=Object(mo.a)(n.value,2),o=i[0];if(!t(i[1],o,r++))return!1}}catch(u){a.e(u)}finally{a.f()}return!0}function LF(e,t){var n,r=Object(vo.a)(qF(t));try{for(r.s();!(n=r.n()).done;){var a=n.value;iF(e,a,t[a],!0)}}catch(i){r.e(i)}finally{r.f()}}function zF(e,t){var n,r,a=[],i={},o=Object(vo.a)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;(n=t(u))in i||(i[n]=1,a.push(u))}}catch(s){o.e(s)}finally{o.f()}return a}function BF(e,t){var n,r=Object(vo.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.has(a))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function UF(e){var t,n=new Set,r=Object(vo.a)(e);try{var a=function(){var e,r=t.value,a=YR(r).map((function(e,t){return 0===t?e:"[".concat(e,"]")})),i=a.map((function(e,t){return a.slice(0,t+1).join("")})),o=Object(vo.a)(i);try{for(o.s();!(e=o.n()).done;){var u=e.value;n.add(u)}}catch(s){o.e(s)}finally{o.f()}};for(r.s();!(t=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return n}function WF(e,t){return void 0===e||void 0===t||BF(UF(e),UF(t))}function VF(e){return 0===qF(e).length}var qF=Object.keys,$F=Object.values;function HF(e){var t=[];for(var n in e)lF(e,n)&&t.push({key:n,value:e[n]});return t}function GF(e){return!0===e||!1===e}function KF(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function XF(e,t){return _F(e)?"!("+XF(e.not,t)+")":jF(e)?"("+e.and.map((function(e){return XF(e,t)})).join(") && (")+")":kF(e)?"("+e.or.map((function(e){return XF(e,t)})).join(") || (")+")":t(e)}function YF(e,t){if(0===t.length)return!0;var n=t.shift();return n in e&&YF(e[n],t)&&delete e[n],VF(e)}function JF(e){return e.charAt(0).toUpperCase()+e.substr(1)}function QF(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=YR(e),r=[],a=1;a<=n.length;a++){var i="[".concat(n.slice(0,a).map(pF).join("]["),"]");r.push("".concat(t).concat(i))}return r.join(" && ")}function ZF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(t,"[").concat(pF(YR(e).join(".")),"]")}function eM(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function tM(e){return"".concat(YR(e).map(eM).join("\\."))}function nM(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function rM(e){return"".concat(YR(e).join("."))}function aM(e){return e?YR(e).length:0}function iM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(void 0!==i)return i}}var oM=42;function uM(e){var t=++oM;return e?String(e)+t:t}function sM(e){return function(e){return 0===e.indexOf("__")}(e)?e:"__".concat(e)}function cM(e){if(void 0!==e)return(e%360+360)%360}function lM(e){return!!dF(e)||!isNaN(e)&&!isNaN(parseFloat(e))}var fM={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function dM(e){return e&&e.condition}var hM=["domain","grid","labels","ticks","title"],pM={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},vM={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},mM=Object.assign(Object.assign({},vM),{style:1,labelExpr:1,encoding:1});function gM(e){return!!mM[e]}qF(mM);var bM={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},yM=bM.arc,wM=bM.area,xM=bM.bar,OM=bM.image,kM=bM.line,jM=bM.point,_M=bM.rect,SM=bM.rule,EM=bM.text,CM=bM.tick,AM=bM.trail,TM=bM.circle,NM=bM.square,IM=bM.geoshape;function DM(e){return FF(["line","area","trail"],e)}function RM(e){return FF(["rect","bar","image","arc"],e)}var FM=qF(bM);function MM(e){return e.type}vF(FM);var PM=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),LM=qF({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),zM={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},BM={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},UM={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function WM(e){return"mark"in e}var VM=function(){function e(t,n){Object(cy.a)(this,e),this.name=t,this.run=n}return Object(ly.a)(e,[{key:"hasMatchingType",value:function(e){return!!WM(e)&&(MM(t=e.mark)?t.type:t)===this.name;var t}}]),e}(),qM={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$M={count:1,min:1,max:1};function HM(e){return!!e&&!!e.argmin}function GM(e){return!!e&&!!e.argmax}qF(qM);function KM(e){return hF(e)&&!!qM[e]}var XM=["count","valid","missing","distinct"];function YM(e){return hF(e)&&FF(XM,e)}var JM=["count","sum","distinct","valid","missing"],QM=vF(["mean","average","median","q1","q3","min","max"]),ZM="row",eP="column",tP="facet",nP="x",rP="y",aP="x2",iP="y2",oP="radius",uP="radius2",sP="theta",cP="theta2",lP="latitude",fP="longitude",dP="latitude2",hP="longitude2",pP="color",vP="fill",mP="stroke",gP="shape",bP="size",yP="angle",wP="opacity",xP="fillOpacity",OP="strokeOpacity",kP="strokeWidth",jP="strokeDash",_P="text",SP="order",EP="detail",CP="key",AP="tooltip",TP="href",NP="url",IP="description",DP={theta:1,theta2:1,radius:1,radius2:1};function RP(e){return e in DP}var FP={longitude:1,longitude2:1,latitude:1,latitude2:1};var MP=qF(FP),PP=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),DP),FP),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function LP(e){return e===pP||e===vP||e===mP}var zP={row:1,column:1,facet:1},BP=qF(zP),UP=Object.assign(Object.assign({},PP),zP),WP=qF(UP),VP=(UP.order,UP.detail,UP.tooltip,mF(UP,["order","detail","tooltip"])),qP=(VP.row,VP.column,VP.facet,mF(VP,["row","column","facet"]));qF(VP),qF(qP);function $P(e){return!!UP[e]}var HP=[aP,iP,dP,hP,cP,uP];function GP(e){return KP(e)!==e}function KP(e){switch(e){case aP:return nP;case iP:return rP;case dP:return lP;case hP:return fP;case cP:return sP;case uP:return oP}return e}function XP(e){if(RP(e))switch(e){case sP:return"startAngle";case cP:return"endAngle";case oP:return"outerRadius";case uP:return"innerRadius"}return e}function YP(e){switch(e){case nP:return aP;case rP:return iP;case lP:return dP;case fP:return hP;case sP:return cP;case oP:return uP}}function JP(e){switch(e){case nP:case aP:return"width";case rP:case iP:return"height"}}qF(PP),PP.x,PP.y,PP.x2,PP.y2,PP.latitude,PP.longitude,PP.latitude2,PP.longitude2,PP.theta,PP.theta2,PP.radius,PP.radius2;var QP=mF(PP,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),ZP=qF(QP),eL={x:1,y:1},tL=qF(eL);function nL(e){return e in eL}var rL={theta:1,radius:1},aL=qF(rL);function iL(e){return"width"===e?nP:rP}QP.text,QP.tooltip,QP.href,QP.url,QP.description,QP.detail,QP.key,QP.order;var oL=mF(QP,["text","tooltip","href","url","description","detail","key","order"]),uL=qF(oL);var sL=Object.assign(Object.assign(Object.assign({},eL),rL),oL),cL=qF(sL);function lL(e){return!!sL[e]}function fL(e,t){return function(e){switch(e){case pP:case vP:case mP:case IP:case EP:case CP:case AP:case TP:case SP:case wP:case xP:case OP:case kP:case tP:case ZM:case eP:return dL;case nP:case rP:case lP:case fP:return hL;case aP:case iP:case dP:case hP:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bP:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case jP:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case gP:return{point:"always",geoshape:"always"};case _P:return{text:"always"};case yP:return{point:"always",square:"always",text:"always"};case NP:return{image:"always"};case sP:case oP:return{text:"always",arc:"always"};case cP:case uP:return{arc:"always"}}}(e)[t]}var dL={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},hL=mF(dL,["geoshape"]);function pL(e){switch(e){case nP:case rP:case sP:case oP:case bP:case yP:case kP:case wP:case xP:case OP:case aP:case iP:case cP:case uP:return;case tP:case ZM:case eP:case gP:case jP:case _P:case AP:case TP:case NP:case IP:return"discrete";case pP:case vP:case mP:return"flexible";case lP:case fP:case dP:case hP:case EP:case CP:case SP:return}}function vL(e){return fF(e)&&(e=NW(e,void 0)),"bin"+qF(e).map((function(t){return yL(e[t])?KF("_".concat(t,"_").concat(Object.entries(e[t]))):KF("_".concat(t,"_").concat(e[t]))})).join("")}function mL(e){return!0===e||bL(e)&&!e.binned}function gL(e){return"binned"===e||bL(e)&&!0===e.binned}function bL(e){return nF(e)}function yL(e){return null===e||void 0===e?void 0:e.selection}function wL(e){switch(e){case ZM:case eP:case bP:case pP:case vP:case mP:case kP:case wP:case xP:case OP:case gP:return 6;case jP:return 4;default:return 10}}var xL=n(306);function OL(e){return"Invalid specification ".concat(JSON.stringify(e),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var kL='Autosize "fit" only works for single views and layered views.';function jL(e){return"".concat("width"==e?"Width":"Height",' "container" only works for single views and layered views.')}function _L(e){var t="width"==e?"x":"y";return"".concat("width"==e?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(t,'".')}function SL(e){return e?'Dropping "fit-'.concat(e,'" because spec has discrete ').concat(JP(e),"."):'Dropping "fit" because spec has discrete size.'}function EL(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function CL(e,t){return'Cannot project a selection on encoding channel "'.concat(e,'" as it uses an aggregate function ("').concat(t,'").')}function AL(e){return'The "nearest" transform is not supported for '.concat(e," marks.")}function TL(e){return"Selection not supported for ".concat(e," yet.")}function NL(e){return'Cannot find a selection named "'.concat(e,'".')}var IL="Scale bindings are currently only supported for scales with unbinned, continuous domains.",DL="Legend bindings are only supported for selections over an individual field or encoding channel.";function RL(e){return'Cannot define and lookup the "'.concat(e,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}function FL(e){return'Unknown repeated value "'.concat(e,'".')}function ML(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}var PL="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function LL(e){return'Unrecognized parse "'.concat(e,'".')}function zL(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}function BL(e){return"Ignoring an invalid transform: ".concat(IF(e),".")}var UL='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function WL(e){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(e," are dropped.")}function VL(e){return"Layer's shared ".concat(e.join(",")," channel ").concat(1===e.length?"is":"are"," overriden.")}function qL(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(IF(t)," is overridden by a child projection ").concat(IF(n),".")}var $L="Arc marks uses theta channel rather than angle, replacing angle with theta.";function HL(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(IF(n),"}.")}function GL(e){return'Invalid field type "'.concat(e,'".')}function KL(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}function XL(e){return'Invalid aggregation operator "'.concat(e,'".')}function YL(e,t){return'Missing type for channel "'.concat(e,'", using "').concat(t,'" instead.')}function JL(e,t){var n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function QL(e,t){return"Dropping ".concat(IF(e),' from channel "').concat(t,'" since it does not contain any data field, datum, value, or signal.')}function ZL(e,t,n){return"".concat(e,"-encoding with type ").concat(t," is deprecated. Replacing with ").concat(n,"-encoding.")}var ez="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function tz(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function nz(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}function rz(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function az(e){return"Facet encoding dropped as ".concat(e.join(" and ")," ").concat(e.length>1?"are":"is"," also specified.")}function iz(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}function oz(e,t){return"Line mark is for continuous lines and thus cannot be used with ".concat(e&&t?"x2 and y2":e?"x2":"y2",". We will use the rule mark (line segments) instead.")}function uz(e,t){return'Specified orient "'.concat(e,'" overridden with "').concat(t,'".')}var sz="Custom domain scale cannot be unioned with default field-based domain.",cz='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function lz(e){return'Cannot use the scale property "'.concat(e,'" with non-color channel.')}function fz(e){return"Using unaggregated domain with raw field has no effect (".concat(IF(e),").")}function dz(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function hz(e){return"Unaggregated domain is currently unsupported for log scale (".concat(IF(e),").")}function pz(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}function vz(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}function mz(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}function gz(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function bz(e,t){return'Scale type "'.concat(t,'" does not work with mark "').concat(e,'".')}function yz(e){return'The step for "'.concat(e,'" is dropped because the ').concat("width"===e?"x":"y"," is continuous.")}function wz(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(IF(n)," and ").concat(IF(r),"). Using ").concat(IF(n),".")}function xz(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(IF(n)," and ").concat(IF(r),"). Using the union of the two domains.")}function Oz(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}function kz(e){return"Dropping sort property ".concat(IF(e),' as unioned domains only support boolean or op "count", "min", and "max".')}var jz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",_z="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Sz="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Ez="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",Cz="Invalid channel for axis.";function Az(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2".')}function Tz(e){return"Cannot stack non-linear scale (".concat(e,").")}function Nz(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'").')}function Iz(e,t){return"Invalid ".concat(e,": ").concat(IF(t),".")}function Dz(e){return"Dropping day from datetime ".concat(IF(e)," as day cannot be combined with other units.")}function Rz(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}function Fz(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}function Mz(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}function Pz(e,t){return"Center is not needed to be specified in ".concat(t," when extent is ").concat(e,".")}function Lz(e){return"1D error band does not support ".concat(e,".")}function zz(e){return"Channel ".concat(e,' is required for "binned" bin.')}function Bz(e){return"Domain for ".concat(e," is required for threshold scale.")}var Uz=function(e,t){var n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&eF(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&eF(t||"warn","WARN",arguments),this},info:function(){return n>=3&&eF(t||"log","INFO",arguments),this},debug:function(){return n>=4&&eF(t||"log","DEBUG",arguments),this}}}(2),Wz=Uz;function Vz(e){return Wz=e}function qz(){return Wz=Uz}function $z(){var e;(e=Wz).warn.apply(e,arguments)}function Hz(e){if(e&&nF(e)){var t,n=Object(vo.a)(nB);try{for(n.s();!(t=n.n()).done;){if(t.value in e)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}var Gz=["january","february","march","april","may","june","july","august","september","october","november","december"],Kz=Gz.map((function(e){return e.substr(0,3)})),Xz=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Yz=Xz.map((function(e){return e.substr(0,3)}));function Jz(e,t){var n=[];if(t&&void 0!==e.day&&qF(e).length>1&&($z(g.droppedDay(e)),delete(e=AF(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){var r=t?function(e){if(lM(e)&&(e=+e),dF(e))return e-1;var t=e.toLowerCase(),n=Gz.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=Kz.indexOf(r);if(-1!==a)return a;throw new Error(g.invalidTimeUnit("month",e))}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var a=t?function(e){if(lM(e)&&(e=+e),dF(e))return e>4&&$z(g.invalidTimeUnit("quarter",e)),e-1;throw new Error(g.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(dF(a)?3*a:a+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var i=t?function(e){if(lM(e)&&(e=+e),dF(e))return e%7;var t=e.toLowerCase(),n=Xz.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=Yz.indexOf(r);if(-1!==a)return a;throw new Error(g.invalidTimeUnit("day",e))}(e.day):e.day;n.push(dF(i)?i+1:i+"+1")}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=e[u[o]];n.push("undefined"===typeof s?0:s)}return n}function Qz(e){var t=Jz(e,!0).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function Zz(e){var t=Jz(e,!1).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function eB(e){var t=Jz(e,!0);return e.utc?+new Date(Date.UTC.apply(Date,Object(Ys.a)(t))):+Object(xL.a)(Date,Object(Ys.a)(t))}var tB={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},nB=qF(tB);function rB(e){return e.startsWith("utc")}var aB={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function iB(e){var t,n=[],r=Object(vo.a)(nB);try{for(r.s();!(t=r.n()).done;){var a=t.value;oB(e,a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function oB(e,t){var n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function uB(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},a=r.end,i=QF(t),o=rB(e)?"utc":"";function u(e){return"quarter"===e?"(".concat(o,"quarter(").concat(i,")-1)"):"".concat(o).concat(e,"(").concat(i,")")}var s,c={},l=Object(vo.a)(nB);try{for(l.s();!(s=l.n()).done;){var f=s.value;oB(e,f)&&(c[f]=u(f),n=f)}}catch(d){l.e(d)}finally{l.f()}return a&&(c[n]+="+1"),Zz(c)}function sB(e){if(e){var t=iB(e);return"timeUnitSpecifier(".concat(OF()(t),", ").concat(OF()(aB),")")}}function cB(e){var t;if(e)return hF(e)?t={unit:e}:nF(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),rB(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function lB(e){var t=cB(e),n=t.utc,r=mF(t,["utc"]);return r.unit?(n?"utc":"")+qF(r).map((function(e){return KF("".concat("unit"===e?"":"_".concat(e,"_")).concat(r[e]))})).join(""):(n?"utc":"")+"timeunit"+qF(r).map((function(e){return KF("_".concat(e,"_").concat(r[e]))})).join("")}function fB(e){return e&&!!e.signal}function dB(e){return!!e.step}function hB(e){return!tF(e)&&("field"in e&&"data"in e)}var pB=qF({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1}),vB={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},mB=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function gB(e){return e&&!!e.field&&void 0!==e.equal}function bB(e){return e&&!!e.field&&void 0!==e.lt}function yB(e){return e&&!!e.field&&void 0!==e.lte}function wB(e){return e&&!!e.field&&void 0!==e.gt}function xB(e){return e&&!!e.field&&void 0!==e.gte}function OB(e){if(e&&e.field){if(tF(e.range)&&2===e.range.length)return!0;if(fB(e.range))return!0}return!1}function kB(e){return e&&!!e.field&&(tF(e.oneOf)||tF(e.in))}function jB(e){return e&&!!e.field&&void 0!==e.valid}function _B(e){return kB(e)||gB(e)||OB(e)||bB(e)||wB(e)||yB(e)||xB(e)}function SB(e,t){return RW(e,{timeUnit:t,wrapTime:!0})}function EB(e,t){return e.map((function(e){return SB(e,t)}))}function CB(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.field,a=null===(t=cB(e.timeUnit))||void 0===t?void 0:t.unit,i=a?"time("+uB(a,r)+")":pW(e,{expr:"datum"});if(gB(e))return i+"==="+SB(e.equal,a);if(bB(e)){var o=e.lt;return"".concat(i,"<").concat(SB(o,a))}if(wB(e)){var u=e.gt;return"".concat(i,">").concat(SB(u,a))}if(yB(e)){var s=e.lte;return"".concat(i,"<=").concat(SB(s,a))}if(xB(e)){var c=e.gte;return"".concat(i,">=").concat(SB(c,a))}if(kB(e))return"indexof([".concat(EB(e.oneOf,a).join(","),"], ").concat(i,") !== -1");if(jB(e))return AB(i,e.valid);if(OB(e)){var l=e.range,f=fB(l)?{signal:"".concat(l.signal,"[0]")}:l[0],d=fB(l)?{signal:"".concat(l.signal,"[1]")}:l[1];if(null!==f&&null!==d&&n)return"inrange("+i+", ["+SB(f,a)+", "+SB(d,a)+"])";var h=[];return null!==f&&h.push("".concat(i," >= ").concat(SB(f,a))),null!==d&&h.push("".concat(i," <= ").concat(SB(d,a))),h.length>0?h.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function AB(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?"isValid(".concat(e,") && isFinite(+").concat(e,")"):"!isValid(".concat(e,") || !isFinite(+").concat(e,")")}function TB(e){var t;return _B(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:null===(t=cB(e.timeUnit))||void 0===t?void 0:t.unit}):e}var NB={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};var IB=NB.quantitative,DB=NB.ordinal,RB=NB.temporal,FB=NB.nominal,MB=NB.geojson,PB=qF(NB);var LB="linear",zB="log",BB="pow",UB="sqrt",WB="symlog",VB="time",qB="utc",$B="quantile",HB="quantize",GB="threshold",KB="point",XB="band",YB={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},JB=qF(YB);function QB(e,t){var n=YB[e],r=YB[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var ZB={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function eU(e){return ZB[e]}var tU=["linear","log","pow","sqrt","symlog","time","utc"],nU=vF(tU),rU=vF(["linear","log","pow","sqrt","symlog"]);var aU=vF(["quantile","quantize","threshold"]),iU=vF(tU.concat(["quantile","quantize","threshold","sequential","identity"])),oU=vF(["ordinal","bin-ordinal","point","band"]);function uU(e){return e in oU}function sU(e){return e in iU}function cU(e){return e in nU}function lU(e){return e in aU}function fU(e){return null===e||void 0===e?void 0:e.selection}var dU={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},hU=(qF(dU),mF(dU,["type","domain","range","scheme"])),pU=qF(hU);!function(){var e,t,n={},r=Object(vo.a)(WP);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=Object(vo.a)(PB);try{for(o.s();!(a=o.n()).done;){var u,s=a.value,c=Object(vo.a)(JB);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=yU(i,s);bU(i,l)&&gU(l,s)&&(n[f]=null!==(e=n[f])&&void 0!==e?e:[],n[f].push(l))}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}}}catch(d){r.e(d)}finally{r.f()}}();function vU(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!FF(["point","band","identity"],e);case"bins":return!FF(["point","band","identity","ordinal"],e);case"round":return cU(e)||"band"===e||"point"===e;case"padding":return cU(e)||FF(["point","band"],e);case"paddingOuter":case"align":return FF(["point","band"],e);case"paddingInner":return"band"===e;case"domainMid":case"clamp":return cU(e);case"nice":return cU(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return sU(e)&&!FF(["log","time","utc","threshold","quantile"],e)}}function mU(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return LP(e)?void 0:g.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function gU(e,t){return FF([DB,FB],t)?void 0===e||uU(e):t===RB?FF([VB,qB,void 0],e):t!==IB||FF([zB,BB,UB,WB,$B,HB,GB,LB,void 0],e)}function bU(e,t){if(!lL(e))return!1;switch(e){case nP:case rP:case sP:case oP:return cU(t)||FF(["band","point"],t);case bP:case kP:case wP:case xP:case OP:case yP:return cU(t)||lU(t)||FF(["band","point","ordinal"],t);case pP:case vP:case mP:return"band"!==t;case jP:return"ordinal"===t||lU(t);case gP:return"ordinal"===t}}function yU(e,t){return e+"_"+t}function wU(e){var t=e.channel,n=e.channelDef,r=e.markDef,a=e.scale,i=e.config,o=SU(e);return tW(n)&&!YM(n.aggregate)&&a&&cU(a.get("type"))&&!1===a.get("zero")?xU({fieldDef:n,channel:t,markDef:r,ref:o,config:i}):o}function xU(e){var t=e.fieldDef,n=e.channel,r=e.markDef,a=e.ref,i=e.config;return DM(r.type)||null===VW("invalid",r,i)?a:[OU(t,n),a]}function OU(e,t){var n=kU(e,!0),r="y"===KP(t)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function kU(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return AB(hF(e)?e:pW(e,{expr:"datum"}),!t)}function jU(e,t,n,r){var a={};if(t&&(a.scale=t),rW(e)){var i=e.datum;Hz(i)?a.signal=Qz(i):fB(i)?a.signal=i.signal:a.value=i}else a.field=pW(e,n);if(r){var o=r.offset,u=r.band;o&&(a.offset=o),u&&(a.band=u)}return a}function _U(e){var t=e.scaleName,n=e.fieldOrDatumDef,r=e.fieldOrDatumDef2,a=e.offset,i=e.startSuffix,o=e.band,u=void 0===o?.5:o,s=0<u&&u<1?"datum":void 0,c=pW(n,{expr:s,suffix:i}),l=void 0!==r?pW(r,{expr:s}):pW(n,{suffix:"end",expr:s}),f={};if(0===u||1===u){f.scale=t;var d=0===u?c:l;f.field=d}else{var h="".concat(u," * ").concat(c," + ").concat(1-u," * ").concat(l);f.signal='scale("'.concat(t,'", ').concat(h,")")}return a&&(f.offset=a),f}function SU(e){var t,n=e.channel,r=e.channelDef,a=e.channel2Def,i=e.markDef,o=e.config,u=e.scaleName,s=e.scale,c=e.stack,l=e.offset,f=e.defaultRef,d=e.band;if(r){if(oW(r)){if(uW(r)){d=null!==d&&void 0!==d?d:YU({channel:n,fieldDef:r,fieldDef2:a,markDef:i,stack:c,config:o,isMidPoint:!0});var h=r.bin,p=r.timeUnit,v=r.type;if(mL(h)||d&&p&&v===RB)return c&&c.impute?jU(r,u,{binSuffix:"mid"},{offset:l}):d?_U({scaleName:u,fieldOrDatumDef:r,band:d,offset:l}):jU(r,u,MW(r,n)?{binSuffix:"range"}:{},{offset:l});if(gL(h)){if(tW(a))return _U({scaleName:u,fieldOrDatumDef:r,fieldOrDatumDef2:a,band:d,offset:l});var m=n===nP?aP:iP;$z(g.channelRequiredForBinned(m))}}var b=null===s||void 0===s?void 0:s.get("type");return jU(r,u,uU(b)?{binSuffix:"range"}:{},{offset:l,band:"band"===b?null!==(t=null!==d&&void 0!==d?d:r.band)&&void 0!==t?t:.5:void 0})}if(sW(r)){var y=r.value,w=l?{offset:l}:{};return Object.assign(Object.assign({},EU(n,y)),w)}}return sF(f)&&(f=f()),f?Object.assign(Object.assign({},f),l?{offset:l}:{}):f}function EU(e,t){return FF(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:FF(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:zW(t)}function CU(e){return e&&"number"!==e&&"time"!==e}function AU(e,t,n){return"".concat(e,"(").concat(t).concat(n?", ".concat(JSON.stringify(n)):"",")")}function TU(e){var t,n,r=e.fieldOrDatumDef,a=e.format,i=e.formatType,o=e.expr,u=e.normalizeStack,s=e.config;if(CU(i))return IU({fieldOrDatumDef:r,format:a,formatType:i,expr:o,config:s});var c=NU(r,o,u);if(DW(r)){var l=function(e,t,n,r,a){return!t||n?(n=hF(n)?n:r,"".concat(a?"utc":"time","Format(").concat(e,", '").concat(n,"')")):function(e,t,n){if(e){var r=sB(e),a=n||rB(e);return"".concat(a?"utc":"time","Format(").concat(t,", ").concat(r,")")}}(t,e,a)}(c,tW(r)?null===(t=cB(r.timeUnit))||void 0===t?void 0:t.unit:void 0,a,s.timeFormat,cW(r)&&(null===(n=r.scale)||void 0===n?void 0:n.type)===qB);return l?{signal:l}:void 0}return a=FU(nW(r),a,s),tW(r)&&mL(r.bin)?{signal:LU(c,pW(r,{expr:o,binSuffix:"end"}),a,i,s)}:a||"quantitative"===nW(r)?{signal:"".concat(MU(c,a))}:{signal:"isValid(".concat(c,") ? ").concat(c,' : ""+').concat(c)}}function NU(e,t,n){return tW(e)?n?"".concat(pW(e,{expr:t,suffix:"end"}),"-").concat(pW(e,{expr:t,suffix:"start"})):pW(e,{expr:t}):function(e){var t=e.datum;return Hz(t)?Qz(t):"".concat(JSON.stringify(t))}(e)}function IU(e){var t=e.fieldOrDatumDef,n=e.format,r=e.formatType,a=e.expr,i=e.normalizeStack,o=e.config,u=e.field;return u=null!==u&&void 0!==u?u:NU(t,a,i),tW(t)&&mL(t.bin)?{signal:LU(u,pW(t,{expr:a,binSuffix:"end"}),n,r,o)}:{signal:AU(r,u,n)}}function DU(e,t,n,r,a,i){var o;if(!CU(r))return DW(e)?function(e,t,n,r){if(e)return e;if(t)return{signal:sB(t)};return r?void 0:n.timeFormat}(n,tW(e)?null===(o=cB(e.timeUnit))||void 0===o?void 0:o.unit:void 0,a,i):FU(t,n,a)}function RU(e,t,n){return e&&(fB(e)||"number"===e||"time"===e)?e:DW(t)&&"time"!==n&&"utc"!==n?"time":void 0}function FU(e,t,n){return hF(t)?t:e===IB?n.numberFormat:void 0}function MU(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function PU(e,t,n,r){var a;return CU(n)?AU(n,e,t):MU(e,null!==(a=hF(t)?t:void 0)&&void 0!==a?a:r.numberFormat)}function LU(e,t,n,r,a){var i=PU(e,n,r,a),o=PU(t,n,r,a);return"".concat(AB(e,!1),' ? "null" : ').concat(i,' + "').concat(" \u2013 ",'" + ').concat(o)}var zU="min",BU={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function UU(e){return e in BU}function WU(e){return!!e&&!!e.encoding}function VU(e){return!!e&&("count"===e.op||!!e.field)}function qU(e){return!!e&&tF(e)}function $U(e){return"row"in e||"column"in e}function HU(e){return!!e&&"header"in e}function GU(e){return"facet"in e}function KU(e){var t=e.field,n=e.timeUnit,r=e.bin,a=e.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),a?{aggregate:a}:{}),{field:t})}function XU(e){return uW(e)&&"sort"in e}function YU(e){var t=e.channel,n=e.fieldDef,r=e.fieldDef2,a=e.markDef,i=e.stack,o=e.config,u=e.isMidPoint;if(oW(n)&&void 0!==n.band)return n.band;if(tW(n)){var s=n.timeUnit,c=n.bin;if(s&&!r)return u?qW("timeUnitBandPosition",a,o):RM(a.type)?qW("timeUnitBand",a,o):0;if(mL(c))return RM(a.type)&&!u?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===t&&u?.5:void 0}function JU(e,t,n,r,a,i){return!!(mL(t.bin)||t.timeUnit&&uW(t)&&"temporal"===t.type)&&!!YU({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:a,config:i})}function QU(e){return!!e&&"condition"in e}function ZU(e){var t=e&&e.condition;return!!t&&!tF(t)&&tW(t)}function eW(e){var t=e&&e.condition;return!!t&&!tF(t)&&oW(t)}function tW(e){return!!e&&(!!e.field||"count"===e.aggregate)}function nW(e){return e&&e.type}function rW(e){return!!e&&"datum"in e}function aW(e){return uW(e)&&mW(e)||iW(e)}function iW(e){return rW(e)&&dF(e.datum)}function oW(e){return tW(e)||rW(e)}function uW(e){return!!e&&("field"in e&&"type"in e||"count"===e.aggregate)}function sW(e){return e&&"value"in e&&"value"in e}function cW(e){return!!e&&("scale"in e||"sort"in e)}function lW(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function fW(e){return!!e&&"legend"in e}function dW(e){return!!e&&("format"in e||"formatType"in e)}function hW(e){return"op"in e}function pW(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.field,o=a.prefix,u=a.suffix,s="";if(gW(e))i=sM("count");else{var c;if(!a.nofn)if(hW(e))c=e.op;else{var l=e.bin,f=e.aggregate,d=e.timeUnit;mL(l)?(c=vL(l),u=(null!==(t=a.binSuffix)&&void 0!==t?t:"")+(null!==(n=a.suffix)&&void 0!==n?n:"")):f?GM(f)?(s='["'.concat(i,'"]'),i="argmax_".concat(f.argmax)):HM(f)?(s='["'.concat(i,'"]'),i="argmin_".concat(f.argmin)):c=String(f):d&&(c=lB(d),u=(!FF(["range","mid"],a.binSuffix)&&a.binSuffix||"")+(null!==(r=a.suffix)&&void 0!==r?r:""))}c&&(i=i?"".concat(c,"_").concat(i):c)}return u&&(i="".concat(i,"_").concat(u)),o&&(i="".concat(o,"_").concat(i)),a.forAs?rM(i):a.expr?ZF(i,a.expr)+s:tM(i)+s}function vW(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return tW(e)&&!!e.bin;case"temporal":return!1}throw new Error(g.invalidFieldType(e.type))}function mW(e){return!vW(e)}function gW(e){return"count"===e.aggregate}var bW=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){var t=e.aggregate,n=e.bin,r=e.timeUnit,a=e.field;if(GM(t))return"".concat(a," for argmax(").concat(t.argmax,")");if(HM(t))return"".concat(a," for argmin(").concat(t.argmin,")");var i=cB(r),o=t||(null===i||void 0===i?void 0:i.unit)||(null===i||void 0===i?void 0:i.maxbins)&&"timeunit"||mL(n)&&"bin";return o?o.toUpperCase()+"("+a+")":a}(e);default:return function(e,t){var n,r=e.field,a=e.bin,i=e.timeUnit,o=e.aggregate;if("count"===o)return t.countTitle;if(mL(a))return"".concat(r," (binned)");if(i){var u=null===(n=cB(i))||void 0===n?void 0:n.unit;if(u)return"".concat(r," (").concat(iB(u).join("-"),")")}else if(o)return GM(o)?"".concat(r," for max ").concat(o.argmax):HM(o)?"".concat(r," for min ").concat(o.argmin):"".concat(JF(o)," of ").concat(r);return r}(e,t)}},yW=bW;function wW(e){yW=e}function xW(){wW(bW)}function OW(e,t,n){var r,a,i=n.allowDisabling,o=n.includeDefault,u=void 0===o||o,s=(null!==(r=kW(e))&&void 0!==r?r:{}).title;if(!tW(e))return s;var c=e,l=u?jW(c,t):void 0;return i?iM(s,c.title,l):null!==(a=null!==s&&void 0!==s?s:c.title)&&void 0!==a?a:l}function kW(e){return lW(e)&&e.axis?e.axis:fW(e)&&e.legend?e.legend:HU(e)&&e.header?e.header:void 0}function jW(e,t){return yW(e,t)}function _W(e){var t;if(dW(e))return{format:e.format,formatType:e.formatType};var n=null!==(t=kW(e))&&void 0!==t?t:{};return{format:n.format,formatType:n.formatType}}function SW(e){return tW(e)?e:ZU(e)?e.condition:void 0}function EW(e){return oW(e)?e:eW(e)?e.condition:void 0}function CW(e,t,n){if(hF(e)||dF(e)||fF(e)){var r=hF(e)?"string":dF(e)?"number":"boolean";return $z(g.primitiveChannelDef(t,r,e)),{value:e}}return oW(e)?AW(e,t,n):eW(e)?Object.assign(Object.assign({},e),{condition:AW(e.condition,t,n)}):e}function AW(e,t,n){if(dW(e)){e.format;var r=e.formatType,a=mF(e,["format","formatType"]);if(CU(r)&&!n.customFormatTypes)return $z(g.customFormatTypeNotAllowed(t)),AW(a,t,n)}else{var i=lW(e)?"axis":fW(e)?"legend":HU(e)?"header":null;if(i&&e[i]){var o=e[i],u=(o.format,o.formatType),s=mF(o,["format","formatType"]);if(CU(u)&&!n.customFormatTypes)return $z(g.customFormatTypeNotAllowed(t)),AW(Object.assign(Object.assign({},e),Object(pt.a)({},i,s)),t,n)}}return tW(e)?TW(e,t):function(e){var t=e.type;if(t)return e;var n=e.datum;return t=dF(n)?"quantitative":hF(n)?"nominal":Hz(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}(e)}function TW(e,t){var n=e.aggregate,r=e.timeUnit,a=e.bin,i=e.field,o=Object.assign({},e);if(!n||KM(n)||GM(n)||HM(n)||($z(g.invalidAggregate(n)),delete o.aggregate),r&&(o.timeUnit=cB(r)),i&&(o.field="".concat(i)),mL(a)&&(o.bin=NW(a,t)),gL(a)&&!nL(t)&&$z("Channel ".concat(t,' should not be used with "binned" bin.')),uW(o)){var u=o.type,s=function(e){if(e)switch(e=e.toLowerCase()){case"q":case IB:return"quantitative";case"t":case RB:return"temporal";case"o":case DB:return"ordinal";case"n":case FB:return"nominal";case MB:return"geojson"}}(u);u!==s&&(o.type=s),"quantitative"!==u&&YM(n)&&($z(g.invalidFieldTypeForCountAggregate(u,n)),o.type="quantitative")}else if(!GP(t)){var c=function(e,t){if(e.timeUnit)return"temporal";if(mL(e.bin))return"quantitative";switch(pL(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(o,t);$z(g.missingFieldType(t,c)),o.type=c}if(uW(o)){var l=function(e,t){var n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case ZM:case eP:case tP:return mW(e)?{compatible:!1,warning:g.facetChannelShouldBeDiscrete(t)}:IW;case nP:case rP:case pP:case vP:case mP:case _P:case EP:case CP:case AP:case TP:case NP:case yP:case sP:case oP:case IP:return IW;case fP:case hP:case lP:case dP:return n!==IB?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:IW;case wP:case xP:case OP:case kP:case bP:case cP:case uP:case aP:case iP:return"nominal"!==n||e.sort?IW:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case jP:return FF(["ordinal","nominal"],e.type)?IW:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case gP:return FF(["ordinal","nominal","geojson"],e.type)?IW:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case SP:return"nominal"!==e.type||"sort"in e?IW:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(o,t),f=l.compatible,d=l.warning;f||$z(d)}if(XU(o)&&hF(o.sort)){var h=o.sort;if(UU(h))return Object.assign(Object.assign({},o),{sort:{encoding:h}});var p=h.substr(1);if("-"===h.charAt(0)&&UU(p))return Object.assign(Object.assign({},o),{sort:{encoding:p,order:"descending"}})}if(HU(o)){var v=o.header,m=v.orient,b=mF(v,["orient"]);if(m)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},b),{labelOrient:v.labelOrient||m,titleOrient:v.titleOrient||m})})}return o}function NW(e,t){return fF(e)?{maxbins:wL(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:wL(t)})}var IW={compatible:!0};function DW(e){var t,n=_W(e).formatType;return"time"===n||!n&&((t=e)&&("temporal"===t.type||tW(t)&&!!t.timeUnit))}function RW(e,t){var n,r,a=t.timeUnit,i=t.type,o=t.wrapTime,u=t.undefinedIfExprNotRequired,s=a&&(null===(n=cB(a))||void 0===n?void 0:n.unit),c=s||"temporal"===i;return fB(e)?r=e.signal:Hz(e)?(c=!0,r=Qz(e)):(hF(e)||dF(e))&&c&&(r="datetime(".concat(JSON.stringify(e),")"),function(e){return!!tB[e]}(s)&&(dF(e)&&e<1e4||hF(e)&&isNaN(Date.parse(e)))&&(r=Qz(Object(pt.a)({},s,e)))),r?o&&c?"time(".concat(r,")"):r:u?void 0:JSON.stringify(e)}function FW(e,t){var n=e.type;return t.map((function(t){var r=RW(t,{timeUnit:tW(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function MW(e,t){return mL(e.bin)?lL(t)&&FF(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function PW(e){var t=e.anchor,n=e.frame,r=e.offset,a=e.orient,i=e.color,o=e.subtitleColor,u=e.subtitleFont,s=e.subtitleFontSize,c=e.subtitleFontStyle,l=e.subtitleFontWeight,f=e.subtitleLineHeight,d=e.subtitlePadding,h=mF(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},h),i?{fill:i}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),a?{orient:a}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),u?{subtitleFont:u}:{}),s?{subtitleFontSize:s}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{});return{titleMarkConfig:p,subtitleMarkConfig:TF(p,["align","baseline","dx","dy","limit"]),nonMark:v,subtitle:m}}function LW(e){return hF(e)||tF(e)&&hF(e[0])}function zW(e){return fB(e)?e:void 0!==e?{value:e}:void 0}function BW(e){return fB(e)?e.signal:pF(e.value)}function UW(e){return fB(e)?e.signal:null==e?null:pF(e)}function WW(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function VW(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel,i=r.ignoreVgConfig;return a&&void 0!==t[a]?t[a]:void 0!==t[e]?t[e]:!i||a&&a!==e?qW(e,t,n,r):void 0}function qW(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel;return iM(a?$W(e,t,n.style):void 0,$W(e,t,n.style),a?n[t.type][a]:void 0,n[t.type][e],a?n.mark[a]:n.mark[e])}function $W(e,t,n){return HW(e,WW(t),n)}function HW(e,t,n){var r;t=uF(t);var a,i=Object(vo.a)(t);try{for(i.s();!(a=i.n()).done;){var o=n[a.value];o&&void 0!==o[e]&&(r=o[e])}}catch(u){i.e(u)}finally{i.f()}return r}function GW(e,t){return uF(e).reduce((function(e,n){var r;return e.field.push(pW(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function KW(e,t){var n=Object(Ys.a)(e);return t.forEach((function(e){var t,r=Object(vo.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(CF(a,e))return}}catch(i){r.e(i)}finally{r.f()}n.push(e)})),n}function XW(e,t){return CF(e,t)||!t?e:e?[].concat(Object(Ys.a)(uF(e)),Object(Ys.a)(uF(t))).join(", "):t}function YW(e,t){var n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((LW(n)||fB(n))&&(LW(r)||fB(r)))return{explicit:e.explicit,value:XW(n,r)};if(LW(n)||fB(n))return{explicit:e.explicit,value:n};if(LW(r)||fB(r))return{explicit:e.explicit,value:r};if(!LW(n)&&!fB(n)&&!LW(r)&&!fB(r))return{explicit:e.explicit,value:KW(n,r)};throw new Error("It should never reach here")}function JW(e,t){var n=e&&e[t];return!!n&&(tF(n)?MF(n,(function(e){return!!e.field})):tW(n)||ZU(n))}function QW(e){return MF(WP,(function(t){if(JW(e,t)){var n=e[t];if(tF(n))return MF(n,(function(e){return!!e.aggregate}));var r=SW(n);return r&&!!r.aggregate}return!1}))}function ZW(e,t){var n=[],r=[],a=[],i=[],o={};return nV(e,(function(u,s){if(tW(u)){var c=u.field,l=u.aggregate,f=u.bin,d=u.timeUnit,h=mF(u,["field","aggregate","bin","timeUnit"]);if(l||d||f){var p,v=kW(u),m=v&&v.title,g=pW(u,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},m?[]:{title:OW(u,t,{allowDisabling:!0})}),h),{field:g});if(l){if(GM(l)?(p="argmax",g=pW({op:"argmax",field:l.argmax},{forAs:!0}),b.field="".concat(g,".").concat(c)):HM(l)?(p="argmin",g=pW({op:"argmin",field:l.argmin},{forAs:!0}),b.field="".concat(g,".").concat(c)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(p=l),p){var y={op:p,as:g};c&&(y.field=c),i.push(y)}}else if(n.push(g),uW(u)&&mL(f)){if(r.push({bin:f,field:c,as:g}),n.push(pW(u,{binSuffix:"end"})),MW(u,s)&&n.push(pW(u,{binSuffix:"range"})),nL(s)){var w={field:g+"_end"};o[s+"2"]=w}b.bin="binned",GP(s)||(b.type=IB)}else if(d){a.push({timeUnit:d,field:c,as:g});var x=uW(u)&&u.type!==RB&&"time";x&&(s===_P||s===AP?b.formatType=x:!function(e){return!!QP[e]}(s)?nL(s)&&(b.axis=Object.assign({formatType:x},b.axis)):b.legend=Object.assign({formatType:x},b.legend))}o[s]=b}else n.push(c),o[s]=e[s]}else o[s]=e[s]})),{bins:r,timeUnits:a,aggregate:i,groupby:n,encoding:o}}function eV(e,t,n){var r=t.type;return qF(e).reduce((function(a,i){if(!$P(i))return $z(g.invalidEncodingChannel(i)),a;var o=e[i];if("angle"!==i||"arc"!==r||e.theta||($z(g.REPLACE_ANGLE_WITH_THETA),i=sP),!function(e,t,n){var r=fL(t,n);if(!r)return!1;if("binned"===r){var a=e[t===aP?nP:rP];return!!(tW(a)&&tW(e[t])&&gL(a.bin))}return!0}(e,i,r))return $z(g.incompatibleChannel(i,r)),a;if(i===bP&&"line"===r){var u=SW(e[i]);if(null===u||void 0===u?void 0:u.aggregate)return $z(g.LINE_WITH_VARYING_SIZE),a}if(i===pP&&(t.filled?"fill"in e:"stroke"in e))return $z(g.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),a;if(i===EP||i===SP&&!tF(o)&&!sW(o)||i===AP&&tF(o))o&&(a[i]=uF(o).reduce((function(e,t){return tW(t)?e.push(TW(t,i)):$z(g.emptyFieldDef(t,i)),e}),[]));else{if(i===AP&&null===o)a[i]=null;else if(!tW(o)&&!rW(o)&&!sW(o)&&!QU(o)&&!fB(o))return $z(g.emptyFieldDef(o,i)),a;a[i]=CW(o,i,n)}return a}),{})}function tV(e){var t,n=[],r=Object(vo.a)(qF(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;if(JW(e,a)){var i,o=e[a],u=uF(o),s=Object(vo.a)(u);try{for(s.s();!(i=s.n()).done;){var c=i.value;tW(c)?n.push(c):ZU(c)&&n.push(c.condition)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return n}function nV(e,t,n){if(e){var r,a=Object(vo.a)(qF(e));try{for(a.s();!(r=a.n()).done;){var i=r.value,o=e[i];if(tF(o)){var u,s=Object(vo.a)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;t.call(n,c,i)}}catch(l){s.e(l)}finally{s.f()}}else t.call(n,o,i)}}catch(l){a.e(l)}finally{a.f()}}}function rV(e,t,n,r){return e?qF(e).reduce((function(n,a){var i=e[a];return tF(i)?i.reduce((function(e,n){return t.call(r,e,n,a)}),n):t.call(r,n,i,a)}),n):n}function aV(e,t){return qF(t).reduce((function(n,r){switch(r){case nP:case rP:case TP:case IP:case NP:case aP:case iP:case sP:case cP:case oP:case uP:case lP:case fP:case dP:case hP:case _P:case gP:case yP:case AP:return n;case SP:if("line"===e||"trail"===e)return n;case EP:case CP:var a=t[r];if(tF(a)||tW(a)){var i,o=Object(vo.a)(uF(a));try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate||n.push(pW(u,{}))}}catch(c){o.e(c)}finally{o.f()}}return n;case bP:if("trail"===e)return n;case pP:case vP:case mP:case wP:case xP:case OP:case jP:case kP:var s=SW(t[r]);return s&&!s.aggregate&&n.push(pW(s,{})),n}}),[])}function iV(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var a=e.map((function(e){var n=e.fieldPrefix,a=e.titlePrefix,i=r?" of ".concat(t.field):"";return{field:n+t.field,type:t.type,title:fB(a)?{signal:a+'"'.concat(escape(i),'"')}:a+i}}));return{tooltip:[].concat(Object(Ys.a)(a),Object(Ys.a)(tV(n)))}}function oV(e){var t=e.axis,n=e.title,r=e.field;return t&&void 0!==t.title?void 0:iM(n,r)}function uV(e,t,n,r,a){var i=n.scale,o=n.axis;return function(u){var s=u.partName,c=u.mark,l=u.positionPrefix,f=u.endPositionPrefix,d=void 0===f?void 0:f,h=u.aria,p=u.extraEncoding,v=void 0===p?{}:p,m=oV(n);return sV(e,s,a,h,{mark:c,encoding:Object.assign(Object.assign(Object.assign(Object(pt.a)({},t,Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},void 0!==m?{title:m}:{}),void 0!==i?{scale:i}:{}),void 0!==o?{axis:o}:{})),hF(d)?Object(pt.a)({},t+"2",{field:d+"_"+n.field}):{}),r),v)})}}function sV(e,t,n,r,a){var i=e.clip,o=e.color,u=e.opacity,s=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},a),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),u?{opacity:u}:{}),MM(a.mark)?a.mark:{type:a.mark}),{style:"".concat(s,"-").concat(t)}),fF(e[t])?{}:e[t]),!1===r?{aria:r}:{})})]:[]}function cV(e,t,n){var r=e.encoding,a="vertical"===t?"y":"x",i=r[a],o=r[a+"2"],u=r[a+"Error"],s=r[a+"Error2"];return{continuousAxisChannelDef:lV(i,n),continuousAxisChannelDef2:lV(o,n),continuousAxisChannelDefError:lV(u,n),continuousAxisChannelDefError2:lV(s,n),continuousAxis:a}}function lV(e,t){if(e&&e.aggregate){var n=e.aggregate,r=mF(e,["aggregate"]);return n!==t&&$z(g.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function fV(e,t){var n=e.mark,r=e.encoding,a=r.x,i=r.y;if(aW(a)){if(aW(i)){var o=tW(a)&&a.aggregate,u=tW(i)&&i.aggregate;if(o||u!==t){if(u||o!==t){if(o===t&&u===t)throw new Error("Both x and y cannot have aggregate");return MM(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(aW(i))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}var dV="boxplot",hV=new VM(dV,vV);function pV(e){return dF(e)?"tukey":e}function vV(e,t){var n,r,a=t.config,i=e.mark,o=(e.encoding,e.selection),u=(e.projection,mF(e,["mark","encoding","selection","projection"])),s=MM(i)?i:{type:i};o&&$z(g.selectionNotSupported("boxplot"));var c,l=null!==(n=s.extent)&&void 0!==n?n:a.boxplot.extent,f=VW("size",s,a),d=pV(l),h=function(e,t,n){var r=fV(e,dV),a=cV(e,r,dV),i=a.continuousAxisChannelDef,o=a.continuousAxis,u=i.field,s=pV(t),c=[].concat(Object(Ys.a)(mV(u)),[{op:"median",field:u,as:"mid_box_"+u},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),l="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_"+u},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(t,', datum["max_').concat(u,'"])'),as:"upper_whisker_"+u},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(t,', datum["min_').concat(u,'"])'),as:"lower_whisker_"+u}],f=e.encoding,d=o,h=(f[d],function(e){var t,n,r=e.tooltip,a=mF(e,["tooltip"]);if(!r)return{filteredEncoding:e};if(tF(r)){var i,o=Object(vo.a)(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate?(t||(t=[]),t.push(u)):(n||(n=[]),n.push(u))}}catch(s){o.e(s)}finally{o.f()}t&&(a.tooltip=t)}else r.aggregate?a.tooltip=r:n=r;return tF(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:a}}(mF(f,["symbol"===typeof d?d:d+""]))),p=h.customTooltipWithoutAggregatedField,v=ZW(h.filteredEncoding,n),m=v.bins,g=v.timeUnits,b=v.aggregate,y=v.groupby,w=v.encoding,x="vertical"===r?"horizontal":"vertical",O=r;return{transform:[].concat(Object(Ys.a)(m),Object(Ys.a)(g),[{aggregate:[].concat(Object(Ys.a)(b),Object(Ys.a)(c)),groupby:y}],l),groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:x,boxOrient:O,customTooltipWithoutAggregatedField:p}}(e,l,a),p=h.transform,v=h.continuousAxisChannelDef,m=h.continuousAxis,b=h.groupby,y=h.aggregate,w=h.encodingWithoutContinuousAxis,x=h.ticksOrient,O=h.boxOrient,k=h.customTooltipWithoutAggregatedField,j=(w.color,w.size),_=mF(w,["color","size"]),S=function(e){return uV(s,m,v,e,a.boxplot)},E=S(_),C=S(w),A=S(Object.assign(Object.assign({},_),j?{size:j}:{})),T=iV([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],v,w),N={type:"tick",color:"black",opacity:1,orient:x,invalid:null},I="min-max"===d?T:iV([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,w),D=[].concat(Object(Ys.a)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:I})),Object(Ys.a)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:I})),Object(Ys.a)(E({partName:"ticks",mark:N,positionPrefix:"lower_whisker",aria:!1,extraEncoding:I})),Object(Ys.a)(E({partName:"ticks",mark:N,positionPrefix:"upper_whisker",aria:!1,extraEncoding:I}))),R=[].concat(Object(Ys.a)("tukey"!==d?D:[]),Object(Ys.a)(C({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:O,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:T})),Object(Ys.a)(A({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},nF(a.boxplot.median)&&a.boxplot.median.color?{color:a.boxplot.median.color}:{}),f?{size:f}:{}),{orient:x,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:T})));if("min-max"!==d){var F='datum["lower_box_'.concat(v.field,'"]'),M='datum["upper_box_'.concat(v.field,'"]'),P="(".concat(M," - ").concat(F,")"),L="".concat(F," - ").concat(l," * ").concat(P),z="".concat(M," + ").concat(l," * ").concat(P),B='datum["'.concat(v.field,'"]'),U={joinaggregate:mV(v.field),groupby:b},W=void 0;"tukey"===d&&(W={transform:[{filter:"(".concat(L," <= ").concat(B,") && (").concat(B," <= ").concat(z,")")},{aggregate:[{op:"min",field:v.field,as:"lower_whisker_"+v.field},{op:"max",field:v.field,as:"upper_whisker_"+v.field},{op:"min",field:"lower_box_"+v.field,as:"lower_box_"+v.field},{op:"max",field:"upper_box_"+v.field,as:"upper_box_"+v.field}].concat(Object(Ys.a)(y)),groupby:b}],layer:D});_.tooltip;var V=mF(_,["tooltip"]),q=v.scale,$=v.axis,H=oV(v),G=sV(s,"outliers",a.boxplot,!0,{transform:[{filter:"(".concat(B," < ").concat(L,") || (").concat(B," > ").concat(z,")")}],mark:"point",encoding:Object.assign(Object.assign(Object(pt.a)({},m,Object.assign(Object.assign(Object.assign({field:v.field,type:v.type},void 0!==H?{title:H}:{}),void 0!==q?{scale:q}:{}),void 0!==$?{axis:$}:{})),V),k?{tooltip:k}:{})})[0];G&&W?c={transform:[U],layer:[G,W]}:G?(c=G).transform.unshift(U):W&&(c=W).transform.unshift(U)}return c?Object.assign(Object.assign({},u),{layer:[c,{transform:p,layer:R}]}):Object.assign(Object.assign({},u),{transform:(null!==(r=u.transform)&&void 0!==r?r:[]).concat(p),layer:R})}function mV(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}var gV="errorbar",bV=new VM(gV,yV);function yV(e,t){var n=t.config,r=xV(e,gV,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,c=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,d=uV(c,o,i,u,n.errorbar),h={type:"tick",orient:s},p=[].concat(Object(Ys.a)(d({partName:"ticks",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:f})),Object(Ys.a)(d({partName:"ticks",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:f})),Object(Ys.a)(d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})));return Object.assign(Object.assign(Object.assign({},l),{transform:a}),p.length>1?{layer:p}:Object.assign({},p[0]))}function wV(e,t){var n=e.encoding;if(function(e){return(oW(e.x)||oW(e.y))&&!oW(e.x2)&&!oW(e.y2)&&!oW(e.xError)&&!oW(e.xError2)&&!oW(e.yError)&&!oW(e.yError2)}(n))return{orient:fV(e,t),inputType:"raw"};var r=function(e){return oW(e.x2)||oW(e.y2)}(n),a=function(e){return oW(e.xError)||oW(e.xError2)||oW(e.yError)||oW(e.yError2)}(n),i=n.x,o=n.y;if(r){if(a)throw new Error("".concat(t," cannot be both type aggregated-upper-lower and aggregated-error"));var u=n.x2,s=n.y2;if(oW(u)&&oW(s))throw new Error("".concat(t," cannot have both x2 and y2"));if(oW(u)){if(aW(i))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(t))}if(oW(s)){if(aW(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(t))}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(oW(l)&&!oW(c))throw new Error("".concat(t," cannot have xError2 without xError"));if(oW(d)&&!oW(f))throw new Error("".concat(t," cannot have yError2 without yError"));if(oW(c)&&oW(f))throw new Error("".concat(t," cannot have both xError and yError with both are quantiative"));if(oW(c)){if(aW(i))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(oW(f)){if(aW(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function xV(e,t,n){var r,a=e.mark,i=e.encoding,o=e.selection,u=(e.projection,mF(e,["mark","encoding","selection","projection"])),s=MM(a)?a:{type:a};o&&$z(g.selectionNotSupported(t));var c=wV(e,t),l=c.orient,f=c.inputType,d=cV(e,l,t),h=d.continuousAxisChannelDef,p=d.continuousAxisChannelDef2,v=d.continuousAxisChannelDefError,m=d.continuousAxisChannelDefError2,b=d.continuousAxis,y=function(e,t,n,r,a,i,o,u){var s,c=[],l=[],f=t.field,d=!1;if("raw"===i){var h,p,v,m=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":u.errorbar.center,b=e.extent?e.extent:"mean"===m?"stderr":"iqr";if("median"===m!==("iqr"===b)&&$z(g.errorBarCenterIsUsedWithWrongExtent(m,b,o)),"stderr"===b||"stdev"===b)c=[{op:b,field:f,as:"extent_"+f},{op:m,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],s=[{fieldPrefix:"center_",titlePrefix:JF(m)},{fieldPrefix:"upper_",titlePrefix:OV(m,b,"+")},{fieldPrefix:"lower_",titlePrefix:OV(m,b,"-")}],d=!0;else e.center&&e.extent&&$z(g.errorBarCenterIsNotNeeded(e.extent,o)),"ci"===b?(h="mean",p="ci0",v="ci1"):(h="median",p="q1",v="q3"),c=[{op:p,field:f,as:"lower_"+f},{op:v,field:f,as:"upper_"+f},{op:h,field:f,as:"center_"+f}],s=[{fieldPrefix:"upper_",titlePrefix:OW({field:f,aggregate:v,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:OW({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:OW({field:f,aggregate:h,type:"quantitative"},u,{allowDisabling:!1})}]}else{(e.center||e.extent)&&$z(g.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===i?(s=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===i&&(s=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],a?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(a.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y,w=Object(vo.a)(l);try{for(w.s();!(y=w.n()).done;){var x=y.value;s.push({fieldPrefix:x.as.substring(0,6),titlePrefix:nM(nM(x.calculate,'datum["',""),'"]',"")})}}catch(O){w.e(O)}finally{w.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:s,tooltipTitleWithFieldName:d}}(s,h,p,v,m,f,t,n),w=y.errorBarSpecificAggregate,x=y.postAggregateCalculates,O=y.tooltipSummary,k=y.tooltipTitleWithFieldName,j=i,_=b,S=(j[_],"x"===b?"x2":"y2"),E=(j[S],"x"===b?"xError":"yError"),C=(j[E],"x"===b?"xError2":"yError2"),A=(j[C],ZW(mF(j,["symbol"===typeof _?_:_+"","symbol"===typeof S?S:S+"","symbol"===typeof E?E:E+"","symbol"===typeof C?C:C+""]),n)),T=A.bins,N=A.timeUnits,I=A.aggregate,D=A.groupby,R=A.encoding,F=[].concat(Object(Ys.a)(I),Object(Ys.a)(w)),M="raw"!==f?[]:D,P=iV(O,h,R,k);return{transform:[].concat(Object(Ys.a)(null!==(r=u.transform)&&void 0!==r?r:[]),Object(Ys.a)(T),Object(Ys.a)(N),Object(Ys.a)(0===F.length?[]:[{aggregate:F,groupby:M}]),Object(Ys.a)(x)),groupby:M,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:R,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:s,outerSpec:u,tooltipEncoding:P}}function OV(e,t,n){return JF(e)+" "+n+" "+t}var kV="errorband",jV=new VM(kV,_V);function _V(e,t){var n=t.config,r=xV(e,kV,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,c=r.outerSpec,l=r.tooltipEncoding,f=s,d=uV(f,o,i,u,n.errorband),h=void 0!==e.encoding.x&&void 0!==e.encoding.y,p={type:h?"area":"rect"},v={type:h?"line":"rule"},m=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return h?(p=Object.assign(Object.assign(Object.assign({},p),m),{ariaRoleDescription:"errorband"}),v=Object.assign(Object.assign({},v),m)):f.interpolate?$z(g.errorBand1DNotSupport("interpolate")):f.tension&&$z(g.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},c),{transform:a,layer:[].concat(Object(Ys.a)(d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})),Object(Ys.a)(d({partName:"borders",mark:v,positionPrefix:"lower",aria:!1,extraEncoding:l})),Object(Ys.a)(d({partName:"borders",mark:v,positionPrefix:"upper",aria:!1,extraEncoding:l})))})}var SV={};function EV(e,t,n){var r=new VM(e,t);SV[e]={normalizer:r,parts:n}}EV(dV,vV,["box","median","outliers","rule","ticks"]),EV(gV,yV,["ticks","rule"]),EV(kV,_V,["band","borders"]);var CV=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],AV=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],TV={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},NV={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},IV=(qF(NV),"_vgsid_"),DV={single:{on:"click",fields:[IV],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[IV],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function RV(e){return!!e&&("legend"===e||!!e.legend)}function FV(e){return RV(e)&&nF(e)}function MV(e){return"concat"in e}function PV(e){return"vconcat"in e}function LV(e){return"hconcat"in e}function zV(e){return nF(e)&&void 0!==e.step}function BV(e){return e.view||e.width||e.height}var UV=qF({align:1,bounds:1,center:1,columns:1,spacing:1});function WV(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function VV(e,t){var n=qV(e,t);return zV(n)?n.step:$V}function qV(e,t){var n;return iM(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}var $V=20;var HV={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:$V},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:BM,circle:{},geoshape:{},image:{},line:{},point:{},rect:UM,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:DV,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},GV=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],KV={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},XV={blue:GV[0],orange:GV[1],red:GV[2],teal:GV[3],green:GV[4],yellow:GV[5],purple:GV[6],pink:GV[7],brown:GV[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function YV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:nF(e)?Object.assign(Object.assign({},XV),e):XV}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function JV(e){return{signals:[{name:"fontSize",value:nF(e)?Object.assign(Object.assign({},KV),e):KV}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function QV(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function ZV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.font,r=e.fontSize,a=mF(e,["color","font","fontSize"]);return aF({},HV,n?QV(n):{},t?YV(t):{},r?JV(r):{},a||{})}var eq=["view"].concat(Object(Ys.a)(FM)),tq=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],nq=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function rq(e){e=AF(e);var t,n=Object(vo.a)(tq);try{for(n.s();!(t=n.n()).done;){delete e[t.value]}}catch(k){n.e(k)}finally{n.f()}if(e.axis)for(var r in e.axis)dM(e.axis[r])&&delete e.axis[r];if(e.legend){var a,i=Object(vo.a)(CV);try{for(i.s();!(a=i.n()).done;){var o=a.value;delete e.legend[o]}}catch(k){i.e(k)}finally{i.f()}}if(e.mark){var u,s=Object(vo.a)(LM);try{for(s.s();!(u=s.n()).done;){var c=u.value;delete e.mark[c]}}catch(k){s.e(k)}finally{s.f()}e.mark.tooltip&&nF(e.mark.tooltip)&&delete e.mark.tooltip}var l,f=Object(vo.a)(eq);try{for(f.s();!(l=f.n()).done;){var d,h=l.value,p=Object(vo.a)(LM);try{for(p.s();!(d=p.n()).done;){var v=d.value;delete e[h][v]}}catch(k){p.e(k)}finally{p.f()}var m=nq[h];if(m){var g,b=Object(vo.a)(m);try{for(b.s();!(g=b.n()).done;){var y=g.value;delete e[h][y]}}catch(k){b.e(k)}finally{b.f()}}aq(e,h)}}catch(k){f.e(k)}finally{f.f()}var w,x=Object(vo.a)(qF(SV));try{for(x.s();!(w=x.n()).done;){delete e[w.value]}}catch(k){x.e(k)}finally{x.f()}for(var O in function(e){var t=PW(e.title),n=t.titleMarkConfig,r=t.subtitleMarkConfig,a=t.subtitle;VF(n)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),n));VF(r)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),r));VF(a)?delete e.title:e.title=a}(e),e)nF(e[O])&&VF(e[O])&&delete e[O];return VF(e)?void 0:e}function aq(e,t,n,r){var a=r?e[t][r]:e[t];"view"===t&&(n="cell");var i=Object.assign(Object.assign({},a),e.style[null!==n&&void 0!==n?n:t]);VF(i)||(e.style[null!==n&&void 0!==n?n:t]=i),r||delete e[t]}function iq(e){return"layer"in e}var oq=n(28),uq=n(26),sq=n(16),cq=n(17),lq=function(){function e(){Object(cy.a)(this,e)}return Object(ly.a)(e,[{key:"map",value:function(e,t){return GU(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):LV(e)?this.mapHConcat(e,t):PV(e)?this.mapVConcat(e,t):MV(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}},{key:"mapLayerOrUnit",value:function(e,t){if(iq(e))return this.mapLayer(e,t);if(WM(e))return this.mapUnit(e,t);throw new Error(g.invalidSpec(e))}},{key:"mapLayer",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{layer:e.layer.map((function(e){return n.mapLayerOrUnit(e,t)}))})}},{key:"mapHConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapVConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapConcat",value:function(e,t){var n=this,r=e.concat,a=mF(e,["concat"]);return Object.assign(Object.assign({},a),{concat:r.map((function(e){return n.map(e,t)}))})}},{key:"mapFacet",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}},{key:"mapRepeat",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}]),e}(),fq={zero:1,center:1,normalize:1};function dq(e){return e in fq}var hq=new Set([yM,xM,wM,SM,jM,TM,NM,kM,EM,CM]),pq=new Set([xM,wM,yM]);function vq(e,t){var n,r,a="x"===t?"y":"radius",i=e[t],o=e[a];if(tW(i)&&tW(o))if("quantitative"===nW(i)&&"quantitative"===nW(o)){if(i.stack)return t;if(o.stack)return a;var u=tW(i)&&!!i.aggregate;if(u!==(tW(o)&&!!o.aggregate))return u?t:a;var s=null===(n=i.scale)||void 0===n?void 0:n.type,c=null===(r=o.scale)||void 0===r?void 0:r.type;if(s&&"linear"!==s)return a;if(c&&"linear"!==c)return t}else{if("quantitative"===nW(i))return t;if("quantitative"===nW(o))return a}else{if("quantitative"===nW(i))return t;if("quantitative"===nW(o))return a}}function mq(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function gq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=MM(e)?e.type:e;if(!hq.has(r))return null;var a=vq(t,"x")||vq(t,"theta");if(!a)return null;var i=t[a],o=tW(i)?pW(i,{}):void 0,u=mq(a),s=t[u],c=tW(s)?pW(s,{}):void 0;c===o&&(c=void 0,s=void 0,u=void 0);var l,f=ZP.reduce((function(e,n){if("tooltip"!==n&&JW(t,n)){var r,a=t[n],i=Object(vo.a)(uF(a));try{for(i.s();!(r=i.n()).done;){var o=SW(r.value);if(!o.aggregate){var u=pW(o,{});u&&u===c||e.push({channel:n,fieldDef:o})}}}catch(s){i.e(s)}finally{i.f()}}return e}),[]);if(void 0!==i.stack?l=fF(i.stack)?i.stack?"zero":null:i.stack:f.length>0&&pq.has(r)&&(l="zero"),!l||!dq(l))return null;if(QW(t)&&0===f.length)return null;if(i.scale&&i.scale.type&&i.scale.type!==LB){if(n.disallowNonLinearStack)return null;$z(g.cannotStackNonLinearScale(i.scale.type))}return oW(t[YP(a)])?(void 0!==i.stack&&$z(g.cannotStackRangedMark(a)),null):(tW(i)&&i.aggregate&&!FF(JM,i.aggregate)&&$z(g.stackNonSummativeAggregate(i.aggregate)),{groupbyChannel:s?u:void 0,groupbyField:c,fieldChannel:a,impute:null!==i.impute&&DM(r),stackBy:f,offset:l})}function bq(e){e.point,e.line;var t=mF(e,["point","line"]);return qF(t).length>1?t:t.type}function yq(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){var r=n[t];e[r]&&(e=Object.assign(Object.assign({},e),Object(pt.a)({},r,NF(e[r],["point","line"]))))}return e}function wq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===e.point?{opacity:0}:e.point?nF(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?nF(t.point)?t.point:{}:void 0}function xq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}var Oq=function(){function e(){Object(cy.a)(this,e),this.name="path-overlay"}return Object(ly.a)(e,[{key:"hasMatchingType",value:function(e,t){if(WM(e)){var n=e.mark,r=e.encoding,a=MM(n)?n:{type:n};switch(a.type){case"line":case"rule":case"trail":return!!wq(a,t[a.type],r);case"area":return!!wq(a,t[a.type],r)||!!xq(a,t[a.type])}}return!1}},{key:"run",value:function(e,t,n){var r=t.config,a=e.selection,i=e.projection,o=e.encoding,u=e.mark,s=mF(e,["selection","projection","encoding","mark"]),c=MM(u)?u:{type:u},l=wq(c,r[c.type],o),f="area"===c.type&&xq(c,r[c.type]),d=[Object.assign(Object.assign({},a?{selection:a}:{}),{mark:bq(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:NF(o,["shape"])})],h=gq(c,o),p=o;if(h){var v=h.fieldChannel,m=h.offset;p=Object.assign(Object.assign({},o),Object(pt.a)({},v,Object.assign(Object.assign({},o[v]),m?{stack:m}:{})))}return f&&d.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"line"},TF(c,["clip","interpolate","tension","tooltip"])),f),encoding:p})),l&&d.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},TF(c,["clip","tooltip"])),l),encoding:p})),n(Object.assign(Object.assign({},s),{layer:d}),Object.assign(Object.assign({},t),{config:yq(r)}))}}]),e}(),kq=function(){function e(){Object(cy.a)(this,e),this.name="RangeStep"}return Object(ly.a)(e,[{key:"hasMatchingType",value:function(e){var t;if(WM(e)&&e.encoding){var n,r=Object(vo.a)(tL);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=e.encoding[a];if(i&&oW(i)&&(null===(t=null===i||void 0===i?void 0:i.scale)||void 0===t?void 0:t.rangeStep))return!0}}catch(o){r.e(o)}finally{r.f()}}return!1}},{key:"run",value:function(e){var t,n,r={},a=Object.assign({},e.encoding),i=Object(vo.a)(tL);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=JP(o),s=a[o];if(s&&oW(s)&&(null===(t=null===s||void 0===s?void 0:s.scale)||void 0===t?void 0:t.rangeStep)){var c=s.scale,l=mF(s,["scale"]),f=c,d=(f.rangeStep,mF(f,["rangeStep"]));r[u]={step:c.rangeStep},$z(g.RANGE_STEP_DEPRECATED),a=Object.assign(Object.assign({},a),Object(pt.a)({},o,Object.assign(Object.assign({},l),VF(d)?{}:{scale:d})))}}}catch(h){i.e(h)}finally{i.f()}return Object.assign(Object.assign(Object.assign({},r),e),{encoding:a})}}]),e}();function jq(e,t){return t?$U(e)?Tq(e,t):Eq(e,t):e}function _q(e,t){return t?Tq(e,t):e}function Sq(e,t,n){var r,a=t[e];return(r=a)&&!hF(r)&&"repeat"in r?a.repeat in n?Object.assign(Object.assign({},t),Object(pt.a)({},e,n[a.repeat])):void $z(g.noSuchRepeatedValue(a.repeat)):t}function Eq(e,t){if(void 0!==(e=Sq("field",e,t))){if(null===e)return null;if(XU(e)&&VU(e.sort)){var n=Sq("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function Cq(e,t){if(tW(e))return Eq(e,t);var n=Sq("datum",e,t);return n===e||n.type||(n.type="nominal"),n}function Aq(e,t){if(!oW(e)){if(eW(e)){var n=Cq(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});e.condition;return mF(e,["condition"])}return e}var r=Cq(e,t);return r||(QU(e)?{condition:e.condition}:void 0)}function Tq(e,t){var n={};for(var r in e)if(lF(e,r)){var a=e[r];if(tF(a))n[r]=a.map((function(e){return Aq(e,t)})).filter((function(e){return e}));else{var i=Aq(a,t);void 0!==i&&(n[r]=i)}}return n}var Nq=function(){function e(){Object(cy.a)(this,e),this.name="RuleForRangedLine"}return Object(ly.a)(e,[{key:"hasMatchingType",value:function(e){if(WM(e)){var t=e.encoding;if("line"===e.mark){var n,r=Object(vo.a)(HP);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=t[KP(a)];if(t[a]&&(tW(i)&&!gL(i.bin)||rW(i)))return!0}}catch(o){r.e(o)}finally{r.f()}}}return!1}},{key:"run",value:function(e,t,n){var r=e.encoding;return $z(g.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},e),{mark:"rule"}),t)}}]),e}();function Iq(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=qF(t).reduce((function(e,t){return n[t]&&e.push(t),e}),[]);r.length>0&&$z(g.encodingOverridden(r))}var a=Object.assign(Object.assign({},null!==t&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{});return VF(a)?void 0:a}function Dq(e){var t=e.parentProjection,n=e.projection;return t&&n&&$z(g.projectionOverridden({parentProjection:t,projection:n})),null!==n&&void 0!==n?n:t}function Rq(e,t){void 0===t&&(t=ZV(e.config));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fq.map(e,{config:t})}(e,t),r=function(e,t,n){var r=t.width,a=t.height,i=WM(e)||iq(e),o={};i?"container"==r&&"container"==a?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==a&&(o.type="fit-y",o.contains="padding"):("container"==r&&($z(g.containerSizeNonSingle("width")),r=void 0),"container"==a&&($z(g.containerSizeNonSingle("height")),a=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?Mq(n.autosize):{}),Mq(e.autosize));"fit"!==u.type||i||($z(g.FIT_NON_SINGLE),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&$z(g.containerSizeNotCompatibleWithAutosize("width"));"container"==a&&"fit"!=u.type&&"fit-y"!=u.type&&$z(g.containerSizeNotCompatibleWithAutosize("height"));if(CF(u,{type:"pad"}))return;return u}(n,{width:e.width,height:e.height,autosize:e.autosize},t);return Object.assign(Object.assign({},n),r?{autosize:r}:{})}var Fq=new(function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){var e;return Object(cy.a)(this,n),(e=t.apply(this,arguments)).nonFacetUnitNormalizers=[hV,bV,jV,new Oq,new Nq,new kq],e}return Object(ly.a)(n,[{key:"map",value:function(e,t){if(WM(e)){var r=JW(e.encoding,ZM),a=JW(e.encoding,eP),i=JW(e.encoding,tP);if(r||a||i)return this.mapFacetedUnit(e,t)}return Object(oq.a)(Object(uq.a)(n.prototype),"map",this).call(this,e,t)}},{key:"mapUnit",value:function(e,t){var n=t.parentEncoding,r=t.parentProjection,a=Object.assign(Object.assign({},e),{encoding:_q(e.encoding,t.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(a,t);var i,o=this.mapLayerOrUnit.bind(this),u=Object(vo.a)(this.nonFacetUnitNormalizers);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s.hasMatchingType(a,t.config))return s.run(a,t,o)}}catch(c){u.e(c)}finally{u.f()}return a}},{key:"mapRepeat",value:function(e,t){return function(e){return!tF(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}},{key:"mapLayerRepeat",value:function(e,t){var n=this,r=e.repeat,a=e.spec,i=mF(e,["repeat","spec"]),o=r.row,u=r.column,s=r.layer,c=t.repeater,l=void 0===c?{}:c,f=t.repeaterPrefix,d=void 0===f?"":f;return o||u?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),u?{column:u}:{}),spec:{repeat:{layer:s},spec:a}}),t):Object.assign(Object.assign({},i),{layer:s.map((function(e){var r=Object.assign(Object.assign({},l),{layer:e}),i=(a.name||"")+d+"child__layer_".concat(KF(e)),o=n.mapLayerOrUnit(a,Object.assign(Object.assign({},t),{repeater:r,repeaterPrefix:i}));return o.name=i,o}))})}},{key:"mapNonLayerRepeat",value:function(e,t){var n,r=e,a=r.repeat,i=r.spec,o=r.data,u=mF(e,["repeat","spec","data"]);!tF(a)&&e.columns&&(e=NF(e,["columns"]),$z(g.columnsNotSupportByRowCol("repeat")));var s,c=[],l=t.repeater,f=void 0===l?{}:l,d=t.repeaterPrefix,h=void 0===d?"":d,p=!tF(a)&&a.row||[f?f.row:null],v=!tF(a)&&a.column||[f?f.column:null],m=tF(a)&&a||[f?f.repeat:null],b=Object(vo.a)(m);try{for(b.s();!(s=b.n()).done;){var y,w=s.value,x=Object(vo.a)(p);try{for(x.s();!(y=x.n()).done;){var O,k=y.value,j=Object(vo.a)(v);try{for(j.s();!(O=j.n()).done;){var _=O.value,S={repeat:w,row:k,column:_,layer:f.layer},E=(i.name||"")+h+"child__"+(tF(a)?"".concat(KF(w)):(a.row?"row_".concat(KF(k)):"")+(a.column?"column_".concat(KF(_)):"")),C=this.map(i,Object.assign(Object.assign({},t),{repeater:S,repeaterPrefix:E}));C.name=E,c.push(NF(C,["data"]))}}catch(T){j.e(T)}finally{j.f()}}}catch(T){x.e(T)}finally{x.f()}}}catch(T){b.e(T)}finally{b.f()}var A=tF(a)?e.columns:a.column?a.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},u),{columns:A,concat:c})}},{key:"mapFacet",value:function(e,t){return $U(e.facet)&&e.columns&&(e=NF(e,["columns"]),$z(g.columnsNotSupportByRowCol("facet"))),Object(oq.a)(Object(uq.a)(n.prototype),"mapFacet",this).call(this,e,t)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(e,t){var n=e.encoding,r=e.projection,a=t.parentEncoding,i=t.parentProjection,o=t.config,u=Dq({parentProjection:i,projection:r}),s=Iq({parentEncoding:a,encoding:_q(n,t.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),u?{projection:u}:{}),s?{encoding:s}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(e,t){var n=e.encoding,r=n.row,a=n.column,i=n.facet,o=mF(n,["row","column","facet"]),u=e.mark,s=e.width,c=e.projection,l=e.height,f=e.view,d=e.selection,h=(e.encoding,mF(e,["mark","width","projection","height","view","selection","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:a,facet:i},t),v=p.facetMapping,m=p.layout,g=_q(o,t.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},h),m),{facet:v,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{width:s}:{}),l?{height:l}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:u,encoding:g}),d?{selection:d}:{})}),t)}},{key:"getFacetMappingAndLayout",value:function(e,t){var n,r=e.row,a=e.column,i=e.facet;if(r||a){i&&$z(g.facetChannelDropped([].concat(Object(Ys.a)(r?[ZM]:[]),Object(Ys.a)(a?[eP]:[]))));for(var o={},u={},s=0,c=[ZM,eP];s<c.length;s++){var l=c[s],f=e[l];if(f){f.align,f.center,f.spacing,f.columns;var d=mF(f,["align","center","spacing","columns"]);o[l]=d;for(var h=0,p=["align","center","spacing"];h<p.length;h++){var v=p[h];void 0!==f[v]&&(u[v]=null!==(n=u[v])&&void 0!==n?n:{},u[v][l]=f[v])}}}return{facetMapping:o,layout:u}}var m=i.align,b=i.center,y=i.spacing,w=i.columns;return{facetMapping:jq(mF(i,["align","center","spacing","columns"]),t.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},m?{align:m}:{}),b?{center:b}:{}),y?{spacing:y}:{}),w?{columns:w}:{})}}},{key:"mapLayer",value:function(e,t){var r=t.parentEncoding,a=t.parentProjection,i=mF(t,["parentEncoding","parentProjection"]),o=e.encoding,u=e.projection,s=mF(e,["encoding","projection"]),c=Object.assign(Object.assign({},i),{parentEncoding:Iq({parentEncoding:r,encoding:o}),parentProjection:Dq({parentProjection:a,projection:u})});return Object(oq.a)(Object(uq.a)(n.prototype),"mapLayer",this).call(this,s,c)}}]),n}(lq));function Mq(e){return hF(e)?{type:e}:null!==e&&void 0!==e?e:{}}var Pq=["background","padding"];function Lq(e){return Pq.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}var zq=n(38),Bq=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(cy.a)(this,e),this.explicit=t,this.implicit=n}return Object(ly.a)(e,[{key:"clone",value:function(){return new e(AF(this.explicit),AF(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(e){return iM(this.explicit[e],this.implicit[e])}},{key:"getWithExplicit",value:function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}},{key:"set",value:function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}},{key:"copyKeyFromSplit",value:function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}},{key:"copyKeyFromObject",value:function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}},{key:"copyAll",value:function(e){var t,n=Object(vo.a)(qF(e.combine()));try{for(n.s();!(t=n.n()).done;){var r=t.value,a=e.getWithExplicit(r);this.setWithExplicit(r,a)}}catch(i){n.e(i)}finally{n.f()}}}]),e}();function Uq(e){return{explicit:!0,value:e}}function Wq(e){return{explicit:!1,value:e}}function Vq(e){return function(t,n,r,a){var i=e(t.value,n.value);return i>0?t:i<0?n:qq(t,n,r,a)}}function qq(e,t,n,r){return e.explicit&&t.explicit&&$z(g.mergeConflictingProperty(n,r,e.value,t.value)),e}function $q(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qq;return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:CF(e.value,t.value)?e:a(e,t,n,r)}var Hq=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(cy.a)(this,n),(e=t.call(this,r,a)).explicit=r,e.implicit=a,e.parseNothing=i,e}return Object(ly.a)(n,[{key:"clone",value:function(){var e=Object(oq.a)(Object(uq.a)(n.prototype),"clone",this).call(this);return e.parseNothing=this.parseNothing,e}}]),n}(Bq);function Gq(e){return"url"in e}function Kq(e){return"values"in e}function Xq(e){return"name"in e&&!Gq(e)&&!Kq(e)&&!Yq(e)}function Yq(e){return e&&(Jq(e)||Qq(e)||Zq(e))}function Jq(e){return"sequence"in e}function Qq(e){return"sphere"in e}function Zq(e){return"graticule"in e}var e$="main",t$="raw";function n$(e){return"filter"in e}function r$(e){return"lookup"in e}function a$(e){return"pivot"in e}function i$(e){return"density"in e}function o$(e){return"quantile"in e}function u$(e){return"regression"in e}function s$(e){return"loess"in e}function c$(e){return"sample"in e}function l$(e){return"window"in e}function f$(e){return"joinaggregate"in e}function d$(e){return"flatten"in e}function h$(e){return"calculate"in e}function p$(e){return"bin"in e}function v$(e){return"impute"in e}function m$(e){return"timeUnit"in e}function g$(e){return"aggregate"in e}function b$(e){return"stack"in e}function y$(e){return"fold"in e}function w$(e,t,n,r){var a=QU(t)&&t.condition,i=r(t);if(a){var o=uF(a).map((function(t){var n=r(t),a=function(e){return e.selection}(t)?fK(e,t.selection):hK(e,t.test);return Object.assign({test:a},n)}));return Object(pt.a)({},n,[].concat(Object(Ys.a)(o),Object(Ys.a)(void 0!==i?[i]:[])))}return void 0!==i?Object(pt.a)({},n,i):{}}function x$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=e.encoding[t];return w$(e,n,t,(function(t){return O$(t,e.config)}))}function O$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(e){if(sW(e))return zW(e.value);if(oW(e)){var r=_W(e),a=r.format,i=r.formatType;return TU({fieldOrDatumDef:e,format:a,formatType:i,expr:n,config:t})}}}function k$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.encoding,r=e.markDef,a=e.config,i=e.stack,o=n.tooltip;if(tF(o))return{tooltip:_$({tooltip:o},i,a,t)};var u=t.reactiveGeom?"datum.datum":"datum";return w$(e,o,"tooltip",(function(e){var o=O$(e,a,u);if(o)return o;if(null!==e){var s=VW("tooltip",r,a);return!0===s&&(s={content:"encoding"}),hF(s)?{value:s}:nF(s)?"encoding"===s.content?_$(n,i,a,t):{signal:u}:void 0}}))}function j$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i={},o=a?"datum.datum":"datum",u=[];function s(r,a){var s,c=KP(a),l=uW(r)?r:Object.assign(Object.assign({},r),{type:e[c].type}),f=uF(OW(l,n,{allowDisabling:!1})).join(", ");if(nL(a)){var d="x"===a?"x2":"y2",h=SW(e[d]);if(gL(l.bin)&&h){var p=pW(l,{expr:o}),v=pW(h,{expr:o}),m=_W(l);s=LU(p,v,m.format,m.formatType,n),i[d]=!0}else if(t&&t.fieldChannel===a&&"normalize"===t.offset){var g=_W(l);s=TU({fieldOrDatumDef:l,format:g.format,formatType:g.formatType,expr:o,config:n,normalizeStack:!0}).signal}}s=null!==s&&void 0!==s?s:O$(l,n,o).signal,u.push({channel:a,key:f,value:s})}nV(e,(function(e,t){tW(e)?s(e,t):ZU(e)&&s(e.condition,t)}));for(var c={},l=0,f=u;l<f.length;l++){var d=f[l],h=d.channel,p=d.key,v=d.value;i[h]||c[p]||(c[pF(p)]=v)}return c}function _$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i=j$(e,t,n,{reactiveGeom:a}),o=HF(i).map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n)}));return o.length>0?{signal:"{".concat(o.join(", "),"}")}:void 0}function S$(e){var t=VW("aria",e.markDef,e.config);return!1===t?{}:Object.assign(Object.assign(Object.assign({},t?{aria:t}:{}),function(e){var t=e.mark,n=e.markDef,r=e.config;if(!1===r.aria)return{};var a=VW("ariaRoleDescription",n,r);if(null!=a)return{ariaRoleDescription:{value:a}};return t in vB?{}:{ariaRoleDescription:{value:t}}}(e)),function(e){var t=e.encoding,n=e.markDef,r=e.config,a=e.stack,i=t.description;if(i)return w$(e,i,"description",(function(t){return O$(t,e.config)}));var o=VW("description",n,r);if(null!=o)return{description:zW(o)};if(!1===r.aria)return{};var u=j$(t,a,r);if(VF(u))return;return{description:{signal:HF(u).map((function(e){var t=e.key,n=e.value;return"".concat(t,' + ": " + (').concat(n,")")})).join(' + "; " + ')}}}(e))}function E$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.markDef,a=t.encoding,i=t.config,o=n.vgChannel,u=n.defaultRef,s=n.defaultValue;void 0===u&&void 0!==(s=null!==s&&void 0!==s?s:VW(e,r,i,{vgChannel:o,ignoreVgConfig:!0}))&&(u=zW(s));var c=a[e];return w$(t,c,null!==o&&void 0!==o?o:e,(function(n){return SU({channel:e,channelDef:n,markDef:r,config:i,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:u})}))}function C$(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},o=e.markDef,u=e.encoding,s=e.config,c=o.type,l=null!==(t=i.filled)&&void 0!==t?t:VW("filled",o,s),f=FF(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,d=null!==(r=null!==(n=VW(!0===l?"color":void 0,o,s,{vgChannel:"fill"}))&&void 0!==n?n:s.mark[!0===l&&"color"])&&void 0!==r?r:f,h=null!==(a=VW(!1===l?"color":void 0,o,s,{vgChannel:"stroke"}))&&void 0!==a?a:s.mark[!1===l&&"color"],p=l?"fill":"stroke",v=Object.assign(Object.assign({},d?{fill:zW(d)}:{}),h?{stroke:zW(h)}:{});return o.color&&(l?o.fill:o.stroke)&&$z(g.droppingColor("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},v),E$("color",e,{vgChannel:p,defaultValue:l?d:h})),E$("fill",e,{defaultValue:u.fill?d:void 0})),E$("stroke",e,{defaultValue:u.stroke?h:void 0}))}function A$(e,t){var n=t[function(e){switch(e){case nP:return"xOffset";case rP:return"yOffset";case aP:return"x2Offset";case iP:return"y2Offset";case sP:return"thetaOffset";case oP:return"radiusOffset";case cP:return"theta2Offset";case uP:return"radius2Offset"}}(e)];if(n)return n}function T$(e,t,n){var r=n.defaultPos,a=n.vgChannel,i=n.isMidPoint,o=t.encoding,u=t.markDef,s=t.config,c=t.stack,l=o[e],f=o[YP(e)],d=t.scaleName(e),h=t.getScaleComponent(e),p=A$(e,u),v=N$({model:t,defaultPos:r,channel:e,scaleName:d,scale:h}),m=!l&&nL(e)&&(o.latitude||o.longitude)?{field:t.getName(e)}:function(e){var t=e.channel,n=e.channelDef,r=e.isMidPoint,a=e.scaleName,i=e.stack,o=e.offset,u=e.markDef,s=e.config;if(oW(n)&&i&&t===i.fieldChannel){if(tW(n)){var c=YU({channel:t,fieldDef:n,isMidPoint:r,markDef:u,stack:i,config:s});if(void 0!==c)return _U({scaleName:a,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:o})}return jU(n,a,{suffix:"end"},{offset:o})}return wU(e)}({channel:e,channelDef:l,channel2Def:f,markDef:u,config:s,isMidPoint:i,scaleName:d,scale:h,stack:c,offset:p,defaultRef:v});return m?Object(pt.a)({},a||e,m):void 0}function N$(e){var t=e.model,n=e.defaultPos,r=e.channel,a=e.scaleName,i=e.scale,o=t.markDef,u=t.config;return function(){var e=KP(r),s=XP(r),c=VW(r,o,u,{vgChannel:s});if(void 0!==c)return EU(r,c);switch(n){case"zeroOrMin":case"zeroOrMax":if(a){var l=i.get("type");if(FF([zB,VB,qB],l));else if(i.domainDefinitelyIncludesZero())return{scale:a,value:0}}if("zeroOrMin"===n)return"y"===e?{field:{group:"height"}}:{value:0};switch(e){case"radius":return{signal:"min(".concat(t.width.signal,",").concat(t.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=t[JP(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var I$={left:"x",center:"xc",right:"x2"},D$={top:"y",middle:"yc",bottom:"y2"};function R$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===e||"theta"===e)return XP(e);var a="x"===e?"align":"baseline",i=VW(a,t,n);return"x"===e?I$[i||("top"===r?"left":"center")]:D$[i||r]}function F$(e,t,n){var r=n.defaultPos,a=n.defaultPos2;return n.range?M$(e,t,{defaultPos:r,defaultPos2:a}):T$(e,t,{defaultPos:r})}function M$(e,t,n){var r=n.defaultPos,a=n.defaultPos2,i=t.markDef,o=t.config,u=YP(e),s=JP(e),c=function(e,t,n){var r,a=e.encoding,i=e.mark,o=e.markDef,u=e.stack,s=e.config,c=KP(n),l=JP(n),f=XP(n),d=a[c],h=e.scaleName(c),p=e.getScaleComponent(c),v=A$(n in a||n in o?n:c,e.markDef);if(!d&&("x2"===n||"y2"===n)&&(a.latitude||a.longitude))return Object(pt.a)({},f,{field:e.getName(n)});var m=function(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,a=e.markDef,i=e.config,o=e.scaleName,u=e.scale,s=e.stack,c=e.offset,l=e.defaultRef;if(oW(n)&&s&&t.charAt(0)===s.fieldChannel.charAt(0))return jU(n,o,{suffix:"start"},{offset:c});return wU({channel:t,channelDef:r,scaleName:o,scale:u,stack:s,markDef:a,config:i,offset:c,defaultRef:l})}({channel:n,channelDef:d,channel2Def:a[n],markDef:o,config:s,scaleName:h,scale:p,stack:u,offset:v,defaultRef:void 0});if(void 0!==m)return Object(pt.a)({},f,m);return P$(n,o)||P$(n,(r={},Object(pt.a)(r,n,$W(n,o,s.style)),Object(pt.a)(r,l,$W(l,o,s.style)),r))||P$(n,s[i])||P$(n,s.mark)||Object(pt.a)({},f,N$({model:e,defaultPos:t,channel:n,scaleName:h,scale:p})())}(t,a,u),l=c[s]?R$(e,i,o):XP(e);return Object.assign(Object.assign({},T$(e,t,{defaultPos:r,vgChannel:l})),c)}function P$(e,t){var n=JP(e),r=XP(e);return void 0!==t[r]?Object(pt.a)({},r,EU(e,t[r])):void 0!==t[e]?Object(pt.a)({},r,EU(e,t[e])):t[n]?Object(pt.a)({},n,EU(e,t[n])):void 0}function L$(e,t,n){var r,a,i,o,u=e.config,s=e.encoding,c=e.markDef,l=e.stack,f=YP(t),d=JP(t),h=s[t],p=s[f],v=e.getScaleComponent(t),m=v?v.get("type"):void 0,b=e.scaleName(t),y=c.orient,w=null!==(a=null!==(r=s[d])&&void 0!==r?r:s.size)&&void 0!==a?a:VW("size",c,u,{vgChannel:d}),x="bar"===n&&("x"===t?"vertical"===y:"horizontal"===y);if(tW(h)&&(mL(h.bin)||gL(h.bin)||h.timeUnit&&!p)&&!w&&!uU(m)){var O=YU({channel:t,fieldDef:h,stack:l,markDef:c,config:u}),k=null===(i=e.component.axes[t])||void 0===i?void 0:i[0];return function(e){var t,n=e.fieldDef,r=e.fieldDef2,a=e.channel,i=e.band,o=e.scaleName,u=e.markDef,s=e.spacing,c=void 0===s?0:s,l=e.axisTranslate,f=e.reverse,d=e.config,h=YP(a),p=XP(a),v=XP(h),m=A$(a,u);if(mL(n.bin)||n.timeUnit)return t={},Object(pt.a)(t,v,B$({channel:a,fieldDef:n,scaleName:o,markDef:u,band:(1-i)/2,offset:z$(h,c,f,l,m),config:d})),Object(pt.a)(t,p,B$({channel:a,fieldDef:n,scaleName:o,markDef:u,band:1-(1-i)/2,offset:z$(a,c,f,l,m),config:d})),t;if(gL(n.bin)){var b,y,w=jU(n,o,{},{offset:z$(h,c,f,l,m)});if(tW(r))return b={},Object(pt.a)(b,v,w),Object(pt.a)(b,p,jU(r,o,{},{offset:z$(a,c,f,l,m)})),b;if(bL(n.bin)&&n.bin.step)return y={},Object(pt.a)(y,v,w),Object(pt.a)(y,p,{signal:'scale("'.concat(o,'", ').concat(pW(n,{expr:"datum"})," + ").concat(n.bin.step,")"),offset:z$(a,c,f,l,m)}),y}return void $z(g.channelRequiredForBinned(h))}({fieldDef:h,fieldDef2:p,channel:t,markDef:c,scaleName:b,band:O,axisTranslate:null!==(o=null===k||void 0===k?void 0:k.get("translate"))&&void 0!==o?o:.5,spacing:nL(t)?VW("binSpacing",c,u):void 0,reverse:v.get("reverse"),config:u})}return(oW(h)&&uU(m)||x)&&!p?function(e,t,n,r){var a,i,o=r.markDef,u=r.encoding,s=r.config,c=r.stack,l=o.orient,f=r.scaleName(n),d=r.getScaleComponent(n),h=JP(n),p=YP(n),v="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n,m=VW(v?"size":h,o,s,{vgChannel:h});(u.size||void 0!==m)&&(v?i=E$("size",r,{vgChannel:h,defaultValue:m}):$z(g.cannotApplySizeToNonOrientedMark(o.type)));var b=null!==(a=oW(t)?YU({channel:n,fieldDef:t,markDef:o,stack:c,config:s}):void 0)&&void 0!==a?a:1;i=i||Object(pt.a)({},h,function(e,t,n,r,a,i){if(r){var o=r.get("type");if("point"===o||"band"===o){if(void 0!==a[e].discreteBandSize)return{value:a[e].discreteBandSize};if(o===KB){var u=r.get("range");return dB(u)&&dF(u.step)?{value:u.step-2}:{value:$V-2}}return{scale:n,band:i}}return{value:a[e].continuousBandSize}}var s=VV(a.view,t),c=iM(a[e].discreteBandSize,s-2);return void 0!==c?{value:c}:void 0}(e,h,f,d,s,b));var y="band"!==(null===d||void 0===d?void 0:d.get("type"))||!("band"in i[h]),w=R$(n,o,s,y?"middle":"top"),x=A$(n,o),O=wU({channel:n,channelDef:t,markDef:o,config:s,scaleName:f,scale:d,stack:c,offset:x,defaultRef:N$({model:r,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:y?.5:(1-b)/2});if(h)return Object.assign(Object(pt.a)({},w,O),i);var k,j=XP(p),_=i[h],S=x?Object.assign(Object.assign({},_),{offset:x}):_;return k={},Object(pt.a)(k,w,O),Object(pt.a)(k,j,tF(O)?[O[0],Object.assign(Object.assign({},O[1]),{offset:S})]:Object.assign(Object.assign({},O),{offset:S})),k}(n,h,t,e):M$(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function z$(e,t,n,r,a){if(RP(e))return 0;var i="x"===e||"y2"===e?-t/2:t/2;if(fB(n)){var o=UW(a);return{signal:"".concat(n.signal," ? ").concat(r-i).concat(o?"-"+o:""," : ").concat(r+i).concat(o?"+"+o:"")}}if(fB(a)){var u=r+(n?-i:i);return{signal:"".concat(u||"").concat(n?" - ":u?" + ":"").concat(a.signal)}}return a=a||0,r+(n?-a-i:+a+i)}function B$(e){var t=e.channel,n=e.fieldDef,r=e.scaleName,a=e.markDef,i=e.band,o=e.offset,u=e.config;return xU({fieldDef:n,channel:t,markDef:a,ref:_U({scaleName:r,fieldOrDatumDef:n,band:i,offset:o}),config:u})}var U$=new Set(["aria"]);function W$(e,t){var n="include"===t.color?C$(e):{},r=n.fill,a=void 0===r?void 0:r,i=n.stroke,o=void 0===i?void 0:i;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return pB.reduce((function(n,r){return U$.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=zW(e[r])),n}),{})}(e.markDef,t)),V$(e,"fill",a)),V$(e,"stroke",o)),E$("opacity",e)),E$("fillOpacity",e)),E$("strokeOpacity",e)),E$("strokeWidth",e)),E$("strokeDash",e)),k$(e)),x$(e,"href")),S$(e))}function V$(e,t,n){var r=e.config,a=e.mark;if("hide"===VW("invalid",e.markDef,r)&&n&&!DM(a)){var i=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&sU(a)&&(t[i]=!0)}return t}),{}),i=qF(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return kU(e,r)})).join(" ".concat(o," "))}return}(e,{invalid:!0,channels:cL});if(i)return Object(pt.a)({},t,[{test:i,value:null}].concat(Object(Ys.a)(uF(n))))}return n?Object(pt.a)({},t,n):{}}function q$(e){var t=e.config;if(VW("invalid",e.markDef,t)){var n=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&sU(a)&&(t[i]=!0)}return t}),{}),i=qF(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return kU(e,r)})).join(" ".concat(o," "))}return}(e,{channels:tL});if(n)return{defined:{signal:n}}}return{}}function $$(e,t){if(void 0!==t)return Object(pt.a)({},e,zW(t))}var H$="voronoi",G$={has:function(e){return"interval"!==e.type&&e.nearest},parse:function(e,t){if(t.events){var n,r=Object(vo.a)(t.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=e.getName(H$)}}catch(a){r.e(a)}finally{r.f()}}},marks:function(e,t,n){var r=t.project.hasChannel,a=r.x,i=r.y,o=e.mark;if(DM(o))return $z(g.nearestNotSupportForContinuous(o)),n;var u={name:e.getName(H$),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},k$(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:a||!i?"datum.datum.x || 0":"0"},y:{expr:i||!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((function(t,n){var r,a=null!==(r=t.name)&&void 0!==r?r:"";a===e.component.mark[0].name?s=n:a.indexOf(H$)>=0&&(c=!0)})),c||n.splice(s+1,0,u),n}},K$=function(){function e(t,n){Object(cy.a)(this,e),this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}return Object(ly.a)(e,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,e&&e.addChild(this)}},{key:"children",get:function(){return this._children}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);return this._children.splice(t,1),t}},{key:"remove",value:function(){var e,t=this._parent.removeChild(this),n=Object(vo.a)(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r._parent=this._parent,this._parent.addChild(r,t++)}}catch(a){n.e(a)}finally{n.f()}}},{key:"insertAsParentOf",value:function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}},{key:"swapWithParent",value:function(){var e,t=this._parent,n=t.parent,r=Object(vo.a)(this._children);try{for(r.s();!(e=r.n()).done;){e.value.parent=t}}catch(a){r.e(a)}finally{r.f()}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}]),e}(),X$=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;return Object(cy.a)(this,n),(o=t.call(this,e,r)).type=a,o.refCounts=i,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return Object(ly.a)(n,[{key:"clone",value:function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(uM())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(e){this._source=e}}]),n}(K$),Y$=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).formula=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.formula))}},{key:"merge",value:function(e){for(var t in this.formula=Object.assign({},this.formula),e.formula)this.formula[t]&&!e.formula[t].band||(this.formula[t]=e.formula[t]);var n,r=Object(vo.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.removeChild(a),a.parent=this}}catch(i){r.e(i)}finally{r.f()}e.remove()}},{key:"producedFields",value:function(){return new Set($F(this.formula).map((function(e){return e.as})))}},{key:"dependentFields",value:function(){return new Set($F(this.formula).map((function(e){return e.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(DF(this.formula))}},{key:"assemble",value:function(){var e,t=[],n=Object(vo.a)($F(this.formula));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.field,i=r.as,o=cB(r.timeUnit),u=o.unit,s=o.utc,c=mF(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:tM(a),type:"timeunit"},u?{units:iB(u)}:{}),s?{timezone:"utc"}:{}),c),{as:[i,"".concat(i,"_end")]}))}}catch(l){n.e(l)}finally{n.f()}return t}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){var a=n.field,i=n.timeUnit,o=$Y(t)?t.encoding[YP(r)]:void 0,u=$Y(t)&&JU(r,n,o,t.stack,t.markDef,t.config);if(i){var s=pW(n,{forAs:!0});e[DF({as:s,field:a,timeUnit:i})]=Object.assign({as:s,field:a,timeUnit:i},u?{band:!0}:{})}return e}),{});return VF(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t){var r=Object.assign({},t),a=r.timeUnit,i=mF(r,["timeUnit"]),o=cB(a),u=Object.assign(Object.assign({},i),{timeUnit:o});return new n(e,Object(pt.a)({},DF(u),u))}}]),n}(K$),J$="_tuple_fields",Q$=function e(){Object(cy.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={}},Z$={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!RV(e.bind)},parse:function(e,t,n,r){r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:function(e,t,n){var r=t.name,a=t.project,i=t.bind,o=t.init&&t.init[0],u=G$.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return a.items.forEach((function(e,a){var s,c,l=KF("".concat(r,"_").concat(e.field));n.filter((function(e){return e.name===l})).length||n.unshift(Object.assign(Object.assign({name:l},o?{init:gH(o[a])}:{value:null}),{on:t.events?[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(pF(e.field),"] : null")}]:[],bind:null!==(c=null!==(s=i[e.field])&&void 0!==s?s:i[e.channel])&&void 0!==c?c:i}))})),n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.filter((function(e){return e.name===r+CH}))[0],o=r+J$,u=a.items.map((function(e){return KF("".concat(r,"_").concat(e.field))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && ");return u.length&&(i.update="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete i.value,delete i.on,n}},eH="_toggle",tH={has:function(e){return"multi"===e.type&&!!e.toggle},signals:function(e,t,n){return n.concat({name:t.name+eH,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+CH,r=t.name+eH;return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(RH(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},nH={has:function(e){return void 0!==e.clear&&!1!==e.clear},parse:function(e,t,n){n.clear&&(t.clear=hF(n.clear)?HT(n.clear,"scope"):n.clear)},topLevelSignals:function(e,t,n){if(Z$.has(t)){var r,a=Object(vo.a)(t.project.items);try{var i=function(){var e=r.value,a=n.findIndex((function(n){return n.name===KF("".concat(t.name,"_").concat(e.field))}));-1!==a&&n[a].on.push({events:t.clear,update:"null"})};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n},signals:function(e,t,n){function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type){var a,i=Object(vo.a)(t.project.items);try{var o=function(){var e=a.value,t=n.findIndex((function(t){return t.name===e.signals.visual}));(r(t,"[0, 0]"),-1===t)&&r(n.findIndex((function(t){return t.name===e.signals.data})),"null")};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}else{var u=n.findIndex((function(e){return e.name===t.name+CH}));r(u,"null"),tH.has(t)&&r(u=n.findIndex((function(e){return e.name===t.name+eH})),"false")}return n}},rH={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t){var n,r=t.scales=[],a=Object(vo.a)(t.project.items);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.channel;if(lL(o)){var u=e.getScaleComponent(o),s=u?u.get("type"):void 0;if(u&&sU(s)){var c={selection:t.name,field:i.field};u.set("selectionExtent",c,!0),r.push(i)}else $z(g.SCALE_BINDINGS_CONTINUOUS)}}}catch(l){a.e(l)}finally{a.f()}},topLevelSignals:function(e,t,n){var r=t.scales.filter((function(e){return 0===n.filter((function(t){return t.name===e.signals.data})).length}));if(!e.parent||iH(e)||0===r.length)return n;var a=n.filter((function(e){return e.name===t.name}))[0],i=a.update;if(i.indexOf(TH)>=0)a.update="{".concat(r.map((function(e){return"".concat(pF(e.field),": ").concat(e.signals.data)})).join(", "),"}");else{var o,u=Object(vo.a)(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,c="".concat(pF(s.field),": ").concat(s.signals.data);i.indexOf(c)<0&&(i="".concat(i.substring(0,i.length-1),", ").concat(c,"}"))}}catch(l){u.e(l)}finally{u.f()}a.update=i}return n.concat(r.map((function(e){return{name:e.signals.data}})))},signals:function(e,t,n){if(e.parent&&!iH(e)){var r,a=Object(vo.a)(t.scales);try{var i=function(){var e=r.value,t=n.filter((function(t){return t.name===e.signals.data}))[0];t.push="outer",delete t.value,delete t.update};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n}};function aH(e,t){var n=pF(e.scaleName(t));return"domain(".concat(n,")")}function iH(e){var t;return e.parent&&KY(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:iH(e.parent.parent))}var oH={has:function(e){var t="global"===e.resolve&&e.bind&&RV(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==IV;return t&&!n&&$z(g.LEGEND_BINDINGS_PROJECT_LENGTH),t&&n},parse:function(e,t,n,r){var a;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){var i,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=Object(vo.a)(t.events);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.filter=uF(null!==(a=s.filter)&&void 0!==a?a:[]),s.filter.indexOf(o)<0&&s.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var c=FV(t.bind)?t.bind.legend:"click",l=hF(c)?HT(c,"view"):uF(c);t.bind={legend:{merge:l}}},topLevelSignals:function(e,t,n){var r,a=t.name,i=FV(t.bind)&&t.bind.legend,o=function(e){return function(t){var n=AF(t);return n.markname=e,n}},u=Object(vo.a)(t.project.items);try{var s=function(){var e=r.value;if(!e.hasLegend)return"continue";var u="".concat(KF(e.field),"_legend"),s="".concat(a,"_").concat(u);if(0===n.filter((function(e){return e.name===s})).length){var c=i.merge.map(o("".concat(u,"_symbols"))).concat(i.merge.map(o("".concat(u,"_labels")))).concat(i.merge.map(o("".concat(u,"_entries"))));n.unshift(Object.assign(Object.assign({name:s},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : ".concat(s),force:!0}]}))}};for(u.s();!(r=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}return n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.find((function(e){return e.name===r+CH})),o=r+J$,u=a.items.filter((function(e){return e.hasLegend})).map((function(e){return KF("".concat(r,"_").concat(KF(e.field),"_legend"))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && "),c="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");t.events&&u.length>0?i.on.push({events:u.map((function(e){return{signal:e}})),update:c}):u.length>0&&(i.update=c,delete i.value,delete i.on);var l=n.find((function(e){return e.name===r+eH})),f=FV(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var uH="_translate_anchor",sH="_translate_delta",cH={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,a=rH.has(t),i=r+uH,o=t.project.hasChannel,u=o.x,s=o.y,c=HT(t.translate,"scope");return a||(c=c.map((function(e){return e.between[0].markname=r+wH,e}))),n.push({name:i,value:{},on:[{events:c.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: "+(a?aH(e,nP):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: "+(a?aH(e,rP):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+sH,value:{},on:[{events:c,update:"{x: ".concat(i,".x - x(unit), y: ").concat(i,".y - y(unit)}")}]}),void 0!==u&&lH(e,t,u,"width",n),void 0!==s&&lH(e,t,s,"height",n),n}};function lH(e,t,n,r,a){var i,o=t.name,u=o+uH,s=o+sH,c=n.channel,l=rH.has(t),f=a.filter((function(e){return e.name===n.signals[l?"data":"visual"]}))[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(c),p=h.get("type"),v=l&&c===nP?"-":"",m="".concat(u,".extent_").concat(c),g="".concat(v).concat(s,".").concat(c," / ")+(l?"".concat(d):"span(".concat(m,")")),b="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(m,", ").concat(g)+(l&&"pow"===p?", ".concat(null!==(i=h.get("exponent"))&&void 0!==i?i:1):"")+")";f.on.push({events:{signal:s},update:l?b:"clampRange(".concat(b,", 0, ").concat(d,")")})}var fH="_zoom_anchor",dH="_zoom_delta",hH={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,a=rH.has(t),i=r+dH,o=t.project.hasChannel,u=o.x,s=o.y,c=pF(e.scaleName(nP)),l=pF(e.scaleName(rP)),f=HT(t.zoom,"scope");return a||(f=f.map((function(e){return e.markname=r+wH,e}))),n.push({name:r+fH,on:[{events:f,update:a?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:i,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&pH(e,t,u,"width",n),void 0!==s&&pH(e,t,s,"height",n),n}};function pH(e,t,n,r,a){var i,o=t.name,u=n.channel,s=rH.has(t),c=a.filter((function(e){return e.name===n.signals[s?"data":"visual"]}))[0],l=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),d=f.get("type"),h=s?aH(e,u):c.name,p=o+dH,v="".concat(o).concat(fH,".").concat(u),m="".concat(s?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear","(").concat(h,", ").concat(v,", ").concat(p)+(s&&"pow"===d?", ".concat(null!==(i=f.get("exponent"))&&void 0!==i?i:1):"")+")";c.on.push({events:{signal:p},update:s?m:"clampRange(".concat(m,", 0, ").concat(l,")")})}var vH=[{has:function(){return!0},parse:function(e,t,n){var r,a,i,o=t.name,u=null!==(r=t.project)&&void 0!==r?r:t.project=new Q$,s={},c={},l=new Set,f=function(e,t){for(var n="visual"===t?e.channel:e.field,r=KF("".concat(o,"_").concat(n)),a=1;l.has(r);a++)r=KF("".concat(o,"_").concat(n,"_").concat(a));return l.add(r),Object(pt.a)({},t,r)};if(!n.fields&&!n.encodings){var d=e.config.selection[n.type];if(n.init){var h,p=Object(vo.a)(uF(n.init));try{for(p.s();!(h=p.n()).done;){var v,m=h.value,b=Object(vo.a)(qF(m));try{for(b.s();!(v=b.n()).done;){var y=v.value;qP[y]?(n.encodings||(n.encodings=[])).push(y):"interval"===n.type?($z('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(y)}}catch(R){b.e(R)}finally{b.f()}}}catch(R){p.e(R)}finally{p.f()}}else n.encodings=d.encodings,n.fields=d.fields}var w,x=Object(vo.a)(null!==(a=n.fields)&&void 0!==a?a:[]);try{for(x.s();!(w=x.n()).done;){var O=w.value,k={type:"E",field:O};k.signals=Object.assign({},f(k,"data")),u.items.push(k),u.hasField[O]=k}}catch(R){x.e(R)}finally{x.f()}var j,_=Object(vo.a)(null!==(i=n.encodings)&&void 0!==i?i:[]);try{for(_.s();!(j=_.n()).done;){var S=j.value,E=e.fieldDef(S);if(E){var C=E.field;if(E.aggregate){$z(g.cannotProjectAggregate(S,E.aggregate));continue}if(!C){$z(g.cannotProjectOnChannelWithoutField(S));continue}if(E.timeUnit){C=e.vgField(S);var A={timeUnit:E.timeUnit,as:C,field:E.field};c[DF(A)]=A}if(!s[C]){var T="E";if("interval"===t.type)sU(e.getScaleComponent(S).get("type"))&&(T="R");else E.bin&&(T="R-RE");var N={field:C,channel:S,type:T};N.signals=Object.assign(Object.assign({},f(N,"data")),f(N,"visual")),u.items.push(s[C]=N),u.hasField[C]=u.hasChannel[S]=s[C]}}else $z(g.cannotProjectOnChannelWithoutField(S))}}catch(R){_.e(R)}finally{_.f()}if(n.init){var I=function(e){return u.items.map((function(t){return void 0!==e[t.channel]?e[t.channel]:e[t.field]}))};if("interval"===n.type)t.init=I(n.init);else{var D=uF(n.init);t.init=D.map(I)}}VF(c)||(u.timeUnit=new Y$(null,c))},signals:function(e,t,n){var r=t.name+J$;return n.filter((function(e){return e.name===r})).length>0?n:n.concat({name:r,value:t.project.items.map((function(e){e.signals,e.hasLegend;var t=mF(e,["signals","hasLegend"]);return t.field=tM(t.field),t}))})}},tH,rH,oH,cH,hH,Z$,G$,nH];function mH(e,t){var n,r=Object(vo.a)(vH);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.has(e)&&t(a)}}catch(i){r.e(i)}finally{r.f()}}function gH(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ZR;if(tF(e)){var r=e.map((function(e){return gH(e,t,n)}));return t?"[".concat(r.join(", "),"]"):r}return Hz(e)?n(t?Qz(e):eB(e)):t?n(JSON.stringify(e)):e}function bH(e,t){return IH(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,mH(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function yH(e){return e.map((function(e){return e.on&&!e.on.length&&delete e.on,e}))}var wH="_brush",xH="_scale_trigger",OH={signals:function(e,t){var n=t.name,r=n+J$,a=rH.has(t),i=[],o=[],u=[];if(t.translate&&!a){var s="!event.item || event.item.mark.name !== ".concat(pF(n+wH));kH(t,(function(e,t){var n,r=uF(null!==(n=t.between[0].filter)&&void 0!==n?n:t.between[0].filter=[]);return r.indexOf(s)<0&&r.push(s),e}))}t.project.items.forEach((function(n,r){var a=n.channel;if(a===nP||a===rP){var s=t.init?t.init[r]:null,c=function(e,t,n,r){var a=n.channel,i=n.signals.visual,o=n.signals.data,u=rH.has(t),s=pF(e.scaleName(a)),c=e.getScaleComponent(a),l=c?c.get("type"):void 0,f=function(e){return"scale(".concat(s,", ").concat(e,")")},d=e.getSizeSignalRef(a===nP?"width":"height").signal,h="".concat(a,"(unit)"),p=kH(t,(function(e,t){return[].concat(Object(Ys.a)(e),[{events:t.between[0],update:"[".concat(h,", ").concat(h,"]")},{events:t,update:"[".concat(i,"[0], clamp(").concat(h,", 0, ").concat(d,")]")}])}));return p.push({events:{signal:t.name+xH},update:sU(l)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),u?[{name:o,on:[]}]:[Object.assign(Object.assign({name:i},r?{init:gH(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:gH(r)}:{}),{on:[{events:{signal:i},update:"".concat(i,"[0] === ").concat(i,"[1] ? null : invert(").concat(s,", ").concat(i,")")}]})]}(e,t,n,s),l=n.signals.data,f=n.signals.visual,d=pF(e.scaleName(a)),h=sU(e.getScaleComponent(a).get("type"))?"+":"";i.push.apply(i,Object(Ys.a)(c)),o.push(l),u.push({scaleName:e.scaleName(a),expr:"(!isArray(".concat(l,") || ")+"(".concat(h,"invert(").concat(d,", ").concat(f,")[0] === ").concat(h).concat(l,"[0] && ")+"".concat(h,"invert(").concat(d,", ").concat(f,")[1] === ").concat(h).concat(l,"[1]))")})}else $z("Interval selections only support x and y encoding channels.")})),a||i.push({name:n+xH,value:{},on:[{events:u.map((function(e){return{scale:e.scaleName}})),update:u.map((function(e){return e.expr})).join(" && ")+" ? ".concat(n+xH," : {}")}]});var c=t.init,l="unit: ".concat(RH(e),", fields: ").concat(r,", values");return i.concat(Object.assign(Object.assign({name:n+CH},c?{init:"{".concat(l,": ").concat(gH(c),"}")}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+" ? {".concat(l,": [").concat(o,"]} : null")}]}))},modifyExpr:function(e,t){return t.name+CH+", "+("global"===t.resolve?"true":"{unit: ".concat(RH(e),"}"))},marks:function(e,t,n){var r=t.name,a=t.project.hasChannel,i=a.x,o=a.y,u=i&&i.signals.visual,s=o&&o.signals.visual,c="data(".concat(pF(t.name+EH),")");if(rH.has(t))return n;var l={x:void 0!==i?{signal:"".concat(u,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==i?{signal:"".concat(u,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var f,d=Object(vo.a)(qF(l));try{for(d.s();!(f=d.n()).done;){var h=f.value;l[h]=[Object.assign({test:"".concat(c,".length && ").concat(c,"[0].unit === ").concat(RH(e))},l[h]),{value:0}]}}catch(w){d.e(w)}finally{d.f()}}var p=t.mark,v=p.fill,m=p.fillOpacity,g=p.cursor,b=mF(p,["fill","fillOpacity","cursor"]),y=qF(b).reduce((function(e,t){return e[t]=[{test:[void 0!==i&&"".concat(u,"[0] !== ").concat(u,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(e){return e})).join(" && "),value:b[t]},{value:null}],e}),{});return[{name:r+wH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:v},fillOpacity:{value:m}},update:l}}].concat(Object(Ys.a)(n),[{name:r+wH,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},g?{cursor:{value:g}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),y)}}])}};function kH(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):($z("".concat(n," is not an ordered event stream for interval selections.")),e)}),[])}function jH(e,t){var n=t.name,r=n+J$,a=t.project,i="(item().isVoronoi ? datum.datum : datum)",o=a.items.map((function(t){var n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(i,"[").concat(pF(e.vgField(t.channel,{})),"], ")+"".concat(i,"[").concat(pF(e.vgField(t.channel,{binSuffix:"end"})),"]]"):"".concat(i,"[").concat(pF(t.field),"]")})).join(", "),u="unit: ".concat(RH(e),", fields: ").concat(r,", values"),s=t.events;return[{name:n+CH,on:s?[{events:s,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(o,"]} : null"),force:!0}]:[]}]}var _H={signals:jH,modifyExpr:function(e,t){return t.name+CH+", "+("global"===t.resolve?"null":"{unit: ".concat(RH(e),"}"))}},SH={signals:jH,modifyExpr:function(e,t){return t.name+CH+", "+("global"===t.resolve?"true":"{unit: ".concat(RH(e),"}"))}},EH="_store",CH="_tuple",AH="_modify",TH="vlSelectionResolve",NH={single:SH,multi:_H,interval:OH};function IH(e,t){var n=e.component.selection;if(n){var r,a=Object(vo.a)($F(n));try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!0===t(i,NH[i.type]))break}}catch(o){a.e(o)}finally{a.f()}}}function DH(e){for(var t=e.parent;t&&!HY(t);)t=t.parent;return t}function RH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=t.escape,r=n?pF(e.name):e.name,a=DH(e);if(a){var i,o=a.facet,u=Object(vo.a)(BP);try{for(u.s();!(i=u.n()).done;){var s=i.value;o[s]&&(r+=" + '__facet_".concat(s,"_' + (facet[").concat(pF(a.vgField(s)),"])"))}}catch(c){u.e(c)}finally{u.f()}}return r}function FH(e){var t=!1;return IH(e,(function(e){t=t||e.project.items.some((function(e){return e.field===IV}))})),t}var MH,PH,LH,zH,BH,UH="RawCode",WH="Literal",VH="Property",qH="Identifier",$H="ArrayExpression",HH="BinaryExpression",GH="CallExpression",KH="ConditionalExpression",XH="LogicalExpression",YH="MemberExpression",JH="ObjectExpression",QH="UnaryExpression";function ZH(e){this.type=e}ZH.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case $H:return e.elements;case HH:case XH:return[e.left,e.right];case GH:return[e.callee].concat(e.arguments);case KH:return[e.test,e.consequent,e.alternate];case YH:return[e.object,e.property];case JH:return e.properties;case VH:return[e.key,e.value];case QH:return[e.argument];case qH:case WH:case UH:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(MH={})[1]="Boolean",MH[2]="<end>",MH[3]="Identifier",MH[4]="Keyword",MH[5]="Null",MH[6]="Numeric",MH[7]="Punctuator",MH[8]="String",MH[9]="RegularExpression";var eG="Identifier",tG="Unexpected token %0",nG="Invalid regular expression",rG="Invalid regular expression: missing /",aG="Octal literals are not allowed in strict mode.",iG="ILLEGAL",oG="Disabled.",uG=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),sG=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function cG(e,t){if(!e)throw new Error("ASSERT: "+t)}function lG(e){return e>=48&&e<=57}function fG(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function dG(e){return"01234567".indexOf(e)>=0}function hG(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function pG(e){return 10===e||13===e||8232===e||8233===e}function vG(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&uG.test(String.fromCharCode(e))}function mG(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&sG.test(String.fromCharCode(e))}var gG={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function bG(){for(var e;LH<zH&&(hG(e=PH.charCodeAt(LH))||pG(e));)++LH}function yG(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)LH<zH&&fG(PH[LH])?(r=PH[LH++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):FG({},tG,iG);return String.fromCharCode(a)}function wG(){var e,t,n,r;for(t=0,"}"===(e=PH[LH])&&FG({},tG,iG);LH<zH&&fG(e=PH[LH++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&FG({},tG,iG),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function xG(){var e,t;for(e=PH.charCodeAt(LH++),t=String.fromCharCode(e),92===e&&(117!==PH.charCodeAt(LH)&&FG({},tG,iG),++LH,(e=yG("u"))&&"\\"!==e&&vG(e.charCodeAt(0))||FG({},tG,iG),t=e);LH<zH&&mG(e=PH.charCodeAt(LH));)++LH,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==PH.charCodeAt(LH)&&FG({},tG,iG),++LH,(e=yG("u"))&&"\\"!==e&&mG(e.charCodeAt(0))||FG({},tG,iG),t+=e);return t}function OG(){var e,t;return e=LH,{type:1===(t=92===PH.charCodeAt(LH)?xG():function(){var e,t;for(e=LH++;LH<zH;){if(92===(t=PH.charCodeAt(LH)))return LH=e,xG();if(!mG(t))break;++LH}return PH.slice(e,LH)}()).length?3:gG.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:LH}}function kG(){var e,t,n,r,a=LH,i=PH.charCodeAt(LH),o=PH[LH];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++LH,{type:7,value:String.fromCharCode(i),start:a,end:LH};default:if(61===(e=PH.charCodeAt(LH+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return LH+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:LH};case 33:case 61:return LH+=2,61===PH.charCodeAt(LH)&&++LH,{type:7,value:PH.slice(a,LH),start:a,end:LH}}}return">>>="===(r=PH.substr(LH,4))?{type:7,value:r,start:a,end:LH+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:LH+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:LH+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++LH}:void FG({},tG,iG)}function jG(){var e,t,n;if(cG(lG((n=PH[LH]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=LH,e="","."!==n){if(e=PH[LH++],n=PH[LH],"0"===e){if("x"===n||"X"===n)return++LH,function(e){for(var t="";LH<zH&&fG(PH[LH]);)t+=PH[LH++];return 0===t.length&&FG({},tG,iG),vG(PH.charCodeAt(LH))&&FG({},tG,iG),{type:6,value:parseInt("0x"+t,16),start:e,end:LH}}(t);if(dG(n))return function(e){for(var t="0"+PH[LH++];LH<zH&&dG(PH[LH]);)t+=PH[LH++];return(vG(PH.charCodeAt(LH))||lG(PH.charCodeAt(LH)))&&FG({},tG,iG),{type:6,value:parseInt(t,8),octal:!0,start:e,end:LH}}(t);n&&lG(n.charCodeAt(0))&&FG({},tG,iG)}for(;lG(PH.charCodeAt(LH));)e+=PH[LH++];n=PH[LH]}if("."===n){for(e+=PH[LH++];lG(PH.charCodeAt(LH));)e+=PH[LH++];n=PH[LH]}if("e"===n||"E"===n)if(e+=PH[LH++],"+"!==(n=PH[LH])&&"-"!==n||(e+=PH[LH++]),lG(PH.charCodeAt(LH)))for(;lG(PH.charCodeAt(LH));)e+=PH[LH++];else FG({},tG,iG);return vG(PH.charCodeAt(LH))&&FG({},tG,iG),{type:6,value:parseFloat(e),start:t,end:LH}}function _G(){var e,t,n,r;return BH=null,bG(),e=LH,t=function(){var e,t,n,r;for(cG("/"===(e=PH[LH]),"Regular expression literal must start with a slash"),t=PH[LH++],n=!1,r=!1;LH<zH;)if(t+=e=PH[LH++],"\\"===e)pG((e=PH[LH++]).charCodeAt(0))&&FG({},rG),t+=e;else if(pG(e.charCodeAt(0)))FG({},rG);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||FG({},rG),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";LH<zH&&mG((e=PH[LH]).charCodeAt(0));)++LH,"\\"===e&&LH<zH?FG({},tG,iG):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&FG({},nG,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";FG({},nG)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){FG({},nG)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:LH}}function SG(){var e;return bG(),LH>=zH?{type:2,start:LH,end:LH}:vG(e=PH.charCodeAt(LH))?OG():40===e||41===e||59===e?kG():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(cG("'"===(e=PH[LH])||'"'===e,"String literal must starts with a quote"),t=LH,++LH;LH<zH;){if((n=PH[LH++])===e){e="";break}if("\\"===n)if((n=PH[LH++])&&pG(n.charCodeAt(0)))"\r"===n&&"\n"===PH[LH]&&++LH;else switch(n){case"u":case"x":"{"===PH[LH]?(++LH,a+=wG()):a+=yG(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:dG(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),LH<zH&&dG(PH[LH])&&(i=!0,r=8*r+"01234567".indexOf(PH[LH++]),"0123".indexOf(n)>=0&&LH<zH&&dG(PH[LH])&&(r=8*r+"01234567".indexOf(PH[LH++]))),a+=String.fromCharCode(r)):a+=n}else{if(pG(n.charCodeAt(0)))break;a+=n}}return""!==e&&FG({},tG,iG),{type:8,value:a,octal:i,start:t,end:LH}}():46===e?lG(PH.charCodeAt(LH+1))?jG():kG():lG(e)?jG():kG()}function EG(){var e;return LH=(e=BH).end,BH=SG(),LH=e.end,e}function CG(){var e;e=LH,BH=SG(),LH=e}function AG(e,t,n){var r=new ZH("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function TG(e,t){var n=new ZH("CallExpression");return n.callee=e,n.arguments=t,n}function NG(e){var t=new ZH(eG);return t.name=e,t}function IG(e){var t=new ZH("Literal");return t.value=e.value,t.raw=PH.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function DG(e,t,n){var r=new ZH("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function RG(e,t,n){var r=new ZH("Property");return r.key=t,r.value=n,r.kind=e,r}function FG(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return cG(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=LH,n.description=a,n}function MG(e){2===e.type&&FG(e,"Unexpected end of input"),6===e.type&&FG(e,"Unexpected number"),8===e.type&&FG(e,"Unexpected string"),3===e.type&&FG(e,"Unexpected identifier"),4===e.type&&FG(e,"Unexpected reserved word"),FG(e,tG,e.value)}function PG(e){var t=EG();7===t.type&&t.value===e||MG(t)}function LG(e){return 7===BH.type&&BH.value===e}function zG(e){return 4===BH.type&&BH.value===e}function BG(){var e=[];for(LH=BH.start,PG("[");!LG("]");)LG(",")?(EG(),e.push(null)):(e.push(QG()),LG("]")||PG(","));return EG(),function(e){var t=new ZH("ArrayExpression");return t.elements=e,t}(e)}function UG(){var e;return LH=BH.start,8===(e=EG()).type||6===e.type?(e.octal&&FG(e,aG),IG(e)):NG(e.value)}function WG(){var e,t,n;return LH=BH.start,3===(e=BH).type?(n=UG(),PG(":"),RG("init",n,QG())):2!==e.type&&7!==e.type?(t=UG(),PG(":"),RG("init",t,QG())):void MG(e)}function VG(){var e,t,n=[],r={},a=String;for(LH=BH.start,PG("{");!LG("}");)t="$"+((e=WG()).key.type===eG?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?FG({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),LG("}")||PG(",");return PG("}"),function(e){var t=new ZH("ObjectExpression");return t.properties=e,t}(n)}var qG={if:1};function $G(){var e,t,n;if(LG("("))return function(){var e;return PG("("),e=ZG(),PG(")"),e}();if(LG("["))return BG();if(LG("{"))return VG();if(e=BH.type,LH=BH.start,3===e||qG[BH.value])n=NG(EG().value);else if(8===e||6===e)BH.octal&&FG(BH,aG),n=IG(EG());else{if(4===e)throw new Error(oG);1===e?((t=EG()).value="true"===t.value,n=IG(t)):5===e?((t=EG()).value=null,n=IG(t)):LG("/")||LG("/=")?(n=IG(_G()),CG()):MG(EG())}return n}function HG(){var e=[];if(PG("("),!LG(")"))for(;LH<zH&&(e.push(QG()),!LG(")"));)PG(",");return PG(")"),e}function GG(){return PG("."),function(){var e;return LH=BH.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=EG())||MG(e),NG(e.value)}()}function KG(){var e;return PG("["),e=ZG(),PG("]"),e}function XG(){var e=function(){var e;for(e=$G();;)if(LG("."))e=DG(".",e,GG());else if(LG("("))e=TG(e,HG());else{if(!LG("["))break;e=DG("[",e,KG())}return e}();if(7===BH.type&&(LG("++")||LG("--")))throw new Error(oG);return e}function YG(){var e,t;if(7!==BH.type&&4!==BH.type)t=XG();else{if(LG("++")||LG("--"))throw new Error(oG);if(LG("+")||LG("-")||LG("~")||LG("!"))e=EG(),t=YG(),t=function(e,t){var n=new ZH("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(zG("delete")||zG("void")||zG("typeof"))throw new Error(oG);t=XG()}}return t}function JG(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function QG(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=BH,s=YG(),0===(a=JG(r=BH)))return s;for(r.prec=a,EG(),t=[e,BH],i=[s,r,o=YG()];(a=JG(BH))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=AG(u,s,o),i.push(n);(r=EG()).prec=a,i.push(r),t.push(BH),n=YG(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=AG(i[c-1].value,i[c-2],n),c-=2;return n}(),LG("?")&&(EG(),t=QG(),PG(":"),e=function(e,t,n){var r=new ZH("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,QG())),e}function ZG(){var e=QG();if(LG(","))throw new Error(oG);return e}function eK(e,t,n){return e.fields=t||[],e.fname=n,e}function tK(e){return 1===e.length?nK(e[0]):rK(e)}var nK=function(e){return function(t){return t[e]}},rK=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function aK(e){throw Error(e)}function iK(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||aK("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&aK("Access path missing closing bracket: "+e),o&&aK("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function oK(e,t,n){var r=iK(e);return e=1===r.length?r[0]:e,eK((n&&n.get||tK)(r),[e],t||e)}oK("id"),eK((function(e){return e}),[],"identity"),eK((function(){return 0}),[],"zero"),eK((function(){return 1}),[],"one"),eK((function(){return!0}),[],"true"),eK((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;function uK(e){var t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push.apply(t,Object(Ys.a)(uK(e.object))),t.push.apply(t,Object(Ys.a)(uK(e.property)))),t)}function sK(e){return"MemberExpression"===e.object.type?sK(e.object):"datum"===e.object.name}function cK(e){var t=function(e){LH=0,zH=(PH=e).length,BH=null,CG();var t=ZG();if(2!==BH.type)throw new Error("Unexpect token after expression.");return t}(e),n=new Set;return t.visit((function(e){"MemberExpression"===e.type&&sK(e)&&n.add(uK(e).slice(1).join("."))})),n}var lK=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a){var i;return Object(cy.a)(this,n),(i=t.call(this,e)).model=r,i.filter=a,i.expr=hK(i.model,i.filter,Object(zq.a)(i)),i._dependentFields=cK(i.expr),i}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,this.model,AF(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(K$);function fK(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",a=[];function i(t){var i=KF(t),o=e.getSelectionComponent(i,t),u=pF(i+EH);if(o.project.timeUnit){var s=null!==n&&void 0!==n?n:e.component.data.raw,c=o.project.timeUnit.clone();s.parent?c.insertAsParentOf(s):s.parent=c}return"none"!==o.empty&&a.push(u),"vlSelectionTest(".concat(u,", ").concat(r)+("global"===o.resolve?")":", ".concat(pF(o.resolve),")"))}var o=XF(t,i);return(a.length?"!("+a.map((function(e){return"length(data(".concat(e,"))")})).join(" || ")+") || ":"")+"(".concat(o,")")}function dK(e,t){var n=t.encoding,r=t.field;if(n||r){if(n&&!r){var a=e.project.items.filter((function(e){return e.channel===n}));!a.length||a.length>1?(r=e.project.items[0].field,$z((a.length?"Multiple ":"No ")+"matching ".concat(pF(n)," encoding found for selection ").concat(pF(t.selection),". ")+'Using "field": '.concat(pF(r),"."))):r=a[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&$z('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(pF(r),"."));return"".concat(e.name,"[").concat(pF(r),"]")}function hK(e,t,n){return XF(t,(function(t){return hF(t)?t:function(e){return null===e||void 0===e?void 0:e.selection}(t)?fK(e,t.selection,n):CB(t)}))}function pK(e,t){if(e)return tF(e)&&!LW(e)?e.map((function(e){return jW(e,t)})).join(", "):e}function vK(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function mK(e,t,n){var r,a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=e.combine(),u=o.disable,s=o.orient,c=o.scale,l=o.labelExpr,f=o.title,d=o.zindex,h=mF(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(var p in h){var v=pM[p],m=h[p];if(v&&v!==t&&"both"!==v)delete h[p];else if(dM(m)){var g=m.condition,b=mF(m,["condition"]),y=uF(g),w=fM[p];if(w){var x=w.vgProp,O=w.part,k=[].concat(Object(Ys.a)(y.map((function(e){var t=e.test,n=mF(e,["test"]);return Object.assign({test:hK(null,t)},n)}))),[b]);vK(h,O,x,k),delete h[p]}else if(null===w){var j={signal:y.map((function(e){var t=e.test,n=mF(e,["test"]);return"".concat(hK(null,t)," ? ").concat(BW(n)," : ")})).join("")+BW(b)};h[p]=j}}else if(fB(m)){var _=fM[p];if(_){var S=_.vgProp,E=_.part;vK(h,E,S,m),delete h[p]}}}if("grid"===t){if(!h.grid)return;if(h.encode){var C=h.encode.grid;h.encode=Object.assign({},C?{grid:C}:{}),VF(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:s},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:iM(d,0)})}if(i.header||!e.mainExtracted){if(void 0!==l){var A=l;(null===(a=null===(r=h.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&fB(h.encode.labels.update.text)&&(A=nM(l,"datum.label",h.encode.labels.update.text.signal)),vK(h,"labels","text",{signal:A})}if(null===h.labelAlign&&delete h.labelAlign,h.encode){var T,N=Object(vo.a)(hM);try{for(N.s();!(T=N.n()).done;){var I=T.value;e.hasAxisPart(I)||delete h.encode[I]}}catch(R){N.e(R)}finally{N.f()}VF(h.encode)&&delete h.encode}var D=pK(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:s,grid:!1},D?{title:D}:{}),h),!1===n.aria?{aria:!1}:{}),{zindex:iM(d,0)})}}}function gK(e){var t,n=e.component.axes,r=[],a=Object(vo.a)(tL);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(n[i]){var o,u=Object(vo.a)(n[i]);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(!s.get("disable")&&!s.get("gridScale")){var c="x"===i?"height":"width",l=e.getSizeSignalRef(c).signal;c!==l&&r.push({name:c,update:l})}}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){a.e(f)}finally{a.f()}return r}var bK={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},yK={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},wK=qF(bK),xK=qF(yK);function OK(e,t,n,r){return Object.assign.apply(null,[{}].concat(Object(Ys.a)(e.map((function(e){if("axisOrient"===e){var a,i="x"===n?"bottom":"left",o=t["x"===n?"axisBottom":"axisLeft"]||{},u=t["x"===n?"axisTop":"axisRight"]||{},s=new Set([].concat(Object(Ys.a)(qF(o)),Object(Ys.a)(qF(u)))),c={},l=Object(vo.a)(s.values());try{for(l.s();!(a=l.n()).done;){var f=a.value;c[f]={signal:"".concat(r.signal,' === "').concat(i,'" ? ').concat(UW(o[f])," : ").concat(UW(u[f]))}}}catch(d){l.e(d)}finally{l.f()}return c}return t[e]})))))}function kK(e,t,n,r){var a="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in rU?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],i="x"===e?"axisX":"axisY",o=fB(n)?"axisOrient":"axis"+JF(n),u=[].concat(a,Object(Ys.a)(a.map((function(e){return i+e.substr(4)})))),s=["axis",o,i];return{vlOnlyAxisConfig:OK(u,r,e,n),vgAxisConfig:OK(s,r,e,n),axisConfigStyle:jK([].concat(s,Object(Ys.a)(u)),r)}}function jK(e,t){var n,r,a=[{}],i=Object(vo.a)(e);try{for(i.s();!(r=i.n()).done;){var o=null===(n=t[r.value])||void 0===n?void 0:n.style;if(o){o=uF(o);var u,s=Object(vo.a)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;a.push(t.style[c])}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return Object.assign.apply(null,a)}function _K(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=HW(e,n,t.style);if(void 0!==i)return{configFrom:"style",configValue:i};for(var o=0,u=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<u.length;o++){var s=u[o];if(void 0!==(null===(r=a[s])||void 0===r?void 0:r[e]))return{configFrom:s,configValue:a[s][e]}}return{}}var SK={scale:function(e){var t=e.model,n=e.channel;return t.scaleName(n)},format:function(e){var t=e.fieldOrDatumDef,n=e.config,r=e.axis,a=r.format,i=r.formatType;return DU(t,t.type,a,i,n,!0)},formatType:function(e){var t=e.axis,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return RU(a,n,r)},grid:function(e){var t,n=e.fieldOrDatumDef,r=e.axis,a=e.scaleType;return(!tW(n)||!gL(n.bin))&&(null!==(t=r.grid)&&void 0!==t?t:function(e,t){return!uU(e)&&tW(t)&&!mL(null===t||void 0===t?void 0:t.bin)}(a,n))},gridScale:function(e){return function(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e.model,e.channel)},labelAlign:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelAlign||AK(n,r,a)},labelAngle:function(e){return e.labelAngle},labelBaseline:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelBaseline||CK(n,r,a)},labelFlush:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.channel;return null!==(t=n.labelFlush)&&void 0!==t?t:function(e,t){if("x"===t&&FF(["quantitative","temporal"],e))return!0;return}(r.type,a)},labelOverlap:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.scaleType;return null!==(t=n.labelOverlap)&&void 0!==t?t:function(e,t){if("nominal"!==e)return"log"!==t||"greedy";return}(r.type,a)},orient:function(e){return e.orient},tickCount:function(e){var t,n=e.channel,r=e.model,a=e.axis,i=e.fieldOrDatumDef,o=e.scaleType,u="x"===n?"width":"y"===n?"height":void 0,s=u?r.getSizeSignalRef(u):void 0;return null!==(t=a.tickCount)&&void 0!==t?t:function(e){var t,n=e.fieldOrDatumDef,r=e.scaleType,a=e.size;if(!e.values&&!uU(r)&&"log"!==r){if(tW(n)){if(mL(n.bin))return{signal:"ceil(".concat(a.signal,"/10)")};if(n.timeUnit&&FF(["month","hours","day","quarter"],null===(t=cB(n.timeUnit))||void 0===t?void 0:t.unit))return}return{signal:"ceil(".concat(a.signal,"/40)")}}return}({fieldOrDatumDef:i,scaleType:o,size:s,values:a.values})},title:function(e){var t=e.axis,n=e.model,r=e.channel;if(void 0!==t.title)return t.title;var a=TK(n,r);if(void 0!==a)return a;var i=n.typedFieldDef(r),o="x"===r?"x2":"y2",u=n.fieldDef(o);return KW(i?[KU(i)]:[],tW(u)?[KU(u)]:[])},values:function(e){return function(e,t){var n=e.values;if(tF(n))return FW(t,n);if(fB(n))return n;return}(e.axis,e.fieldOrDatumDef)},zindex:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.mark;return null!==(t=n.zindex)&&void 0!==t?t:function(e,t){if("rect"===e&&vW(t))return 1;return 0}(a,r)}};function EK(e){return"(((".concat(e.signal," % 360) + 360) % 360)")}function CK(e,t,n,r){if(void 0!==e){if("x"===n){if(fB(e)){var a=EK(e),i=fB(t)?"(".concat(t.signal,' === "top")'):"top"===t;return{signal:"(45 < ".concat(a," && ").concat(a," < 135) || (225 < ").concat(a," && ").concat(a,' < 315) ? "middle" :')+"(".concat(a," <= 45 || 315 <= ").concat(a,") === ").concat(i,' ? "bottom" : "top"')}}if(45<e&&e<135||225<e&&e<315)return"middle";if(fB(t)){var o=e<=45||315<=e?"===":"!==";return{signal:"".concat(t.signal," ").concat(o,' "top" ? "bottom" : "top"')}}return(e<=45||315<=e)===("top"===t)?"bottom":"top"}if(fB(e)){var u=EK(e),s=fB(t)?"(".concat(t.signal,' === "left")'):"left"===t,c=r?'"middle"':"null";return{signal:"".concat(u," <= 45 || 315 <= ").concat(u," || (135 <= ").concat(u," && ").concat(u," <= 225) ? ").concat(c," : (45 <= ").concat(u," && ").concat(u," <= 135) === ").concat(s,' ? "top" : "bottom"')}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(fB(t)){var l=45<=e&&e<=135?"===":"!==";return{signal:"".concat(t.signal," ").concat(l,' "left" ? "top" : "bottom"')}}return(45<=e&&e<=135)===("left"===t)?"top":"bottom"}}function AK(e,t,n){if(void 0!==e){var r="x"===n,a=r?0:90,i=r?"bottom":"left";if(fB(e)){var o=EK(e),u=fB(t)?"(".concat(t.signal,' === "').concat(i,'")'):t===i;return{signal:"(".concat(a?"("+o+" + 90)":o," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(a," < ").concat(o," && ").concat(o," < ").concat(180+a,") === ").concat(u,' ? "left" : "right"')}}if((e+a)%180===0)return r?null:"center";if(fB(t)){var s=a<e&&e<180+a?"===":"!==",c="".concat(t.signal," ").concat(s,' "').concat(i,'"');return{signal:"".concat(c,' ? "left" : "right"')}}return(a<e&&e<180+a)===(t===i)?"left":"right"}}function TK(e,t){var n="x"===t?"x2":"y2",r=e.fieldDef(t),a=e.fieldDef(n),i=r?r.title:void 0,o=a?a.title:void 0;return i&&o?XW(i,o):i||(o||(void 0!==i?i:void 0!==o?o:void 0))}var NK=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a._dependentFields=cK(a.transform.calculate),a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(DF(this.transform))}}],[{key:"parseAllForSortIndex",value:function(e,t){return t.forEachFieldDef((function(t,r){if(cW(t)&&qU(t.sort)){var a=t.field,i=t.timeUnit,o=t.sort,u=o.map((function(e,t){return"".concat(CB({field:a,timeUnit:i,equal:e})," ? ").concat(t," : ")})).join("")+o.length;e=new n(e,{calculate:u,as:IK(t,r,{forAs:!0})})}})),e}}]),n}(K$);function IK(e,t,n){return pW(e,Object.assign({prefix:t,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function DK(e,t){return FF(["top","bottom"],t)?"column":FF(["left","right"],t)||"row"===e?"row":"column"}function RK(e,t,n,r){var a="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return iM(((null===t||void 0===t?void 0:t.header)||{})[e],a[e],n.header[e])}function FK(e,t,n,r){var a,i={},o=Object(vo.a)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=RK(u,t,n,r);void 0!==s&&(i[u]=s)}}catch(c){o.e(c)}finally{o.f()}return i}var MK=["row","column"],PK=["header","footer"];function LK(e,t){var n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,a=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,i=FK(["titleAnchor","titleAngle","titleOrient"],a,r,t),o=i.titleAnchor,u=i.titleAngle,s=DK(t,i.titleOrient),c=cM(u);return{name:"".concat(t,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),BK(c,s)),zK(s,c,o)),GK(r,a,t,wK,bK))}}function zK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=AK(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function BK(e,t){var n=CK(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function UK(e,t){var n,r=e.component.layoutHeaders[t],a=[],i=Object(vo.a)(PK);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r[o]){var u,s=Object(vo.a)(r[o]);try{for(s.s();!(u=s.n()).done;){var c=qK(e,t,o,r,u.value);null!=c&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return a}function WK(e,t){var n,r=e.sort;return VU(r)?{field:pW(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:tF(r)?{field:IK(e,t,{expr:"datum"}),order:"ascending"}:{field:pW(e,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function VK(e,t,n){var r=FK(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),a=r.format,i=r.formatType,o=r.labelAngle,u=r.labelAnchor,s=r.labelOrient,c=r.labelExpr,l=TU({fieldOrDatumDef:e,format:a,formatType:i,expr:"parent",config:n}).signal,f=DK(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:c?nM(nM(c,"datum.label",l),"datum.value",pW(e,{expr:"parent"})):l}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),BK(o,f)),zK(f,o,u)),GK(n,e,t,xK,yK))}function qK(e,t,n,r,a){if(a){var i=null,o=r.facetFieldDef,u=e.config?e.config:void 0;if(o&&a.labels){var s=FK(["labelOrient"],o,u,t).labelOrient;("row"===t&&!FF(["top","bottom"],s)||"column"===t&&!FF(["left","right"],s))&&(i=VK(o,t,u))}var c=HY(e)&&!$U(e.facet),l=a.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(i||f){var d="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:WK(o,t)}:{}),f&&c?{from:{data:e.getName("facet_domain_".concat(t))}}:{}),i?{title:i}:{}),a.sizeSignal?{encode:{update:Object(pt.a)({},d,a.sizeSignal)}}:{}),f?{axes:l}:{})}}return null}var $K={column:{start:0,end:1},row:{start:1,end:0}};function HK(e,t){return $K[t][e]}function GK(e,t,n,r,a){var i,o={},u=Object(vo.a)(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(a[s]){var c=RK(s,t,e,n);void 0!==c&&(o[a[s]]=c)}}}catch(l){u.e(l)}finally{u.f()}return o}function KK(e){return[].concat(Object(Ys.a)(XK(e,"width")),Object(Ys.a)(XK(e,"height")),Object(Ys.a)(XK(e,"childWidth")),Object(Ys.a)(XK(e,"childHeight")))}function XK(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var a=e.getSizeSignalRef(t).signal;if("step"===r){var i=e.getScaleComponent(n);if(i){var o=i.get("type"),u=i.get("range");if(uU(o)&&dB(u)){var s=e.scaleName(n);if(HY(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[YK(s,u)];return[YK(s,u),{name:a,update:JK(s,i,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var c=a.endsWith("width"),l=c?"containerSize()[0]":"containerSize()[1]",f=WV(e.config.view,c?"width":"height"),d="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:a,init:d,on:[{update:d,events:"window:resize"}]}]}return[{name:a,value:r}]}function YK(e,t){return{name:e+"_step",value:t.step}}function JK(e,t,n){var r=t.get("type"),a=t.get("padding"),i=iM(t.get("paddingOuter"),a),o=t.get("paddingInner");return o="band"===r?void 0!==o?o:a:1,"bandspace(".concat(n,", ").concat(o,", ").concat(i,") * ").concat(e,"_step")}function QK(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function ZK(e,t){return qF(e).reduce((function(n,r){var a=e[r];return Object.assign(Object.assign({},n),w$(t,a,r,(function(e){return fB(e)?e:{value:e.value}})))}),{})}function eX(e,t){if(KY(t)||HY(t))return"shared";if(GY(t))return nL(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function tX(e,t){var n=e.scale[t],r=nL(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&$z(g.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var nX=Object.assign(Object.assign({},NV),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),rX=qF(nX),aX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return n}(Bq),iX={symbols:function(e,t){var n,r,a,i,o,u=t.fieldOrDatumDef,s=t.model,c=t.channel,l=t.legendCmpt;if("symbol"!==t.legendType)return;var f=s.markDef,d=s.encoding,h=s.config,p=s.mark,v=f.filled&&"trail"!==p,m=Object.assign(Object.assign({},function(e,t,n){var r,a=Object(vo.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=qW(i,t.markDef,t.config);void 0!==o&&(e[i]=zW(o))}}catch(u){a.e(u)}finally{a.f()}return e}({},s,PM)),C$(s,{filled:v})),g=null!==(n=oX(d.opacity))&&void 0!==n?n:f.opacity;if(m.fill)if("fill"===c||v&&c===pP)delete m.fill;else if(m.fill.field)l.get("symbolFillColor")?delete m.fill:(m.fill=zW(null!==(r=h.legend.symbolBaseFillColor)&&void 0!==r?r:"black"),m.fillOpacity=zW(null!==g&&void 0!==g?g:1));else if(tF(m.fill)){var b=null!==(o=null!==(i=uX(null!==(a=d.fill)&&void 0!==a?a:d.color))&&void 0!==i?i:f.fill)&&void 0!==o?o:v&&f.color;b&&(m.fill=zW(b))}if(m.stroke)if("stroke"===c||!v&&c===pP)delete m.stroke;else if(m.stroke.field)delete m.stroke;else if(tF(m.stroke)){var y=iM(uX(d.stroke||d.color),f.stroke,v?f.color:void 0);y&&(m.stroke={value:y})}if(c!==wP){var w=tW(u)&&cX(s,l,u);w?m.opacity=[Object.assign({test:w},zW(null!==g&&void 0!==g?g:1)),zW(h.legend.unselectedOpacity)]:g&&(m.opacity=zW(g))}return VF(m=Object.assign(Object.assign({},m),e))?void 0:m},gradient:function(e,t){var n=t.model;if("gradient"!==t.legendType)return;var r={},a=oX(n.encoding.opacity)||n.markDef.opacity;a&&(r.opacity=zW(a));return VF(r=Object.assign(Object.assign({},r),e))?void 0:r},labels:function(e,t){var n=t.fieldOrDatumDef,r=t.model,a=t.channel,i=t.legendCmpt,o=r.legend(a)||{},u=r.config,s=tW(n)?cX(r,i,n):void 0,c=s?[{test:s,value:1},{value:u.legend.unselectedOpacity}]:void 0,l=o.format,f=o.formatType,d=CU(f)?IU({fieldOrDatumDef:n,field:"datum.value",format:l,formatType:f,config:u}):void 0,h=Object.assign(Object.assign(Object.assign({},c?{opacity:c}:{}),d?{text:d}:{}),e);return VF(h)?void 0:h},entries:function(e,t){var n=t.legendCmpt.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}};function oX(e){return sX(e,(function(e,t){return Math.max(e,t.value)}))}function uX(e){return sX(e,(function(e,t){return iM(e,t.value)}))}function sX(e,t){return function(e){var t=e&&e.condition;return!!t&&(tF(t)||sW(t))}(e)?uF(e.condition).reduce(t,e.value):sW(e)?e.value:void 0}function cX(e,t,n){var r=t.get("selections");if(null===r||void 0===r?void 0:r.length){var a=pF(n.field);return r.map((function(e){var t=pF(KF(e)+EH);return"(!length(data(".concat(t,")) || (").concat(e,"[").concat(a,"] && indexof(").concat(e,"[").concat(a,"], datum.value) >= 0))")})).join(" || ")}}var lX={direction:function(e){return e.direction},format:function(e){var t=e.fieldOrDatumDef,n=e.legend,r=e.config,a=n.format,i=n.formatType;return DU(t,t.type,a,i,r,!1)},formatType:function(e){var t=e.legend,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return RU(a,n,r)},gradientLength:function(e){var t,n,r=e.legend,a=e.legendConfig;return null!==(n=null!==(t=r.gradientLength)&&void 0!==t?t:a.gradientLength)&&void 0!==n?n:function(e){var t=e.legendConfig,n=e.model,r=e.direction,a=e.orient,i=e.scaleType,o=t.gradientHorizontalMaxLength,u=t.gradientHorizontalMinLength,s=t.gradientVerticalMaxLength,c=t.gradientVerticalMinLength;if(cU(i))return"horizontal"===r?"top"===a||"bottom"===a?hX(n,"width",u,o):u:hX(n,"height",c,s);return}(e)},labelOverlap:function(e){var t,n,r=e.legend,a=e.legendConfig,i=e.scaleType;return null!==(n=null!==(t=r.labelOverlap)&&void 0!==t?t:a.labelOverlap)&&void 0!==n?n:function(e){if(FF(["quantile","threshold","log"],e))return"greedy";return}(i)},symbolType:function(e){var t,n=e.legend,r=e.markDef,a=e.channel,i=e.encoding;return null!==(t=n.symbolType)&&void 0!==t?t:function(e,t,n,r){var a;if("shape"!==t){var i=null!==(a=uX(n))&&void 0!==a?a:r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,a,i.shape,r.shape)},title:function(e){return OW(e.fieldOrDatumDef,e.config,{allowDisabling:!0})},type:function(e){var t=e.legendType,n=e.scaleType;if(LP(e.channel)&&cU(n)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:function(e){var t=e.fieldOrDatumDef;return function(e,t){var n=e.values;if(tF(n))return FW(t,n);if(fB(n))return n;return}(e.legend,t)}};function fX(e){return iM(e.legend.type,function(e){var t=e.channel,n=e.timeUnit,r=e.scaleType;if(LP(t)){if(FF(["quarter","month","day"],n))return"symbol";if(cU(r))return"gradient"}return"symbol"}(e))}function dX(e){var t,n,r=e.legendConfig,a=e.legendType,i=e.orient;return null!==(n=null!==(t=e.legend.direction)&&void 0!==t?t:r[a?"gradientDirection":"symbolDirection"])&&void 0!==n?n:function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(i,a)}function hX(e,t,n,r){var a=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(a,", ").concat(n,", ").concat(r,")")}}function pX(e){var t=$Y(e)?function(e){for(var t=e.encoding,n={},r=0,a=[pP].concat(Object(Ys.a)(AV));r<a.length;r++){var i=a[r],o=EW(t[i]);o&&e.getScaleComponent(i)&&(i===gP&&tW(o)&&o.type===MB||(n[i]=mX(e,i)))}return n}(e):function(e){var t,n=e.component,r=n.legends,a=n.resolve,i=Object(vo.a)(e.children);try{for(i.s();!(t=i.n()).done;){var o=t.value;pX(o);var u,s=Object(vo.a)(qF(o.component.legends));try{for(s.s();!(u=s.n()).done;){var c=u.value;a.legend[c]=tX(e.component.resolve,c),"shared"===a.legend[c]&&(r[c]=gX(r[c],o.component.legends[c]),r[c]||(a.legend[c]="independent",delete r[c]))}}catch(m){s.e(m)}finally{s.f()}}}catch(m){i.e(m)}finally{i.f()}var l,f=Object(vo.a)(qF(r));try{for(f.s();!(l=f.n()).done;){var d,h=l.value,p=Object(vo.a)(e.children);try{for(p.s();!(d=p.n()).done;){var v=d.value;v.component.legends[h]&&("shared"===a.legend[h]&&delete v.component.legends[h])}}catch(m){p.e(m)}finally{p.f()}}}catch(m){f.e(m)}finally{f.f()}return r}(e);return e.component.legends=t,t}function vX(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===t&&e===(null===r||void 0===r?void 0:r.title))return!0}return e===(n||{})[t]}function mX(e,t){var n,r,a,i=e.legend(t),o=e.markDef,u=e.encoding,s=e.config,c=s.legend,l=new aX({},function(e,t){var n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:Object(pt.a)({},t,n)}(e,t));!function(e,t,n){var r,a=null===(r=e.fieldDef(t))||void 0===r?void 0:r.field;IH(e,(function(e){var r,i,o=null!==(r=e.project.hasField[a])&&void 0!==r?r:e.project.hasChannel[t];if(o&&oH.has(e)){var u=null!==(i=n.get("selections"))&&void 0!==i?i:[];u.push(e.name),n.set("selections",u,!1),o.hasLegend=!0}}))}(e,t,l);var f=void 0!==i?!i:c.disable;if(l.set("disable",f,void 0!==i),f)return l;i=i||{};var d,h=e.getScaleComponent(t).get("type"),p=EW(u[t]),v=tW(p)?null===(n=cB(p.timeUnit))||void 0===n?void 0:n.unit:void 0,m=i.orient||s.legend.orient||"right",g=fX({legend:i,channel:t,timeUnit:v,scaleType:h}),b={legend:i,channel:t,model:e,markDef:o,encoding:u,fieldOrDatumDef:p,legendConfig:c,config:s,scaleType:h,orient:m,legendType:g,direction:dX({legend:i,legendType:g,orient:m,legendConfig:c})},y=Object(vo.a)(rX);try{for(y.s();!(d=y.n()).done;){var w=d.value,x=w in lX?lX[w](b):i[w];if(void 0!==x){var O=vX(x,w,i,e.fieldDef(t));(O||void 0===s.legend[w])&&l.set(w,x,O)}}}catch(I){y.e(I)}finally{y.f()}for(var k=null!==(r=null===i||void 0===i?void 0:i.encoding)&&void 0!==r?r:{},j=l.get("selections"),_={},S={fieldOrDatumDef:p,model:e,channel:t,legendCmpt:l,legendType:g},E=0,C=["labels","legend","title","symbols","gradient","entries"];E<C.length;E++){var A=C[E],T=ZK(null!==(a=k[A])&&void 0!==a?a:{},e),N=A in iX?iX[A](T,S):T;void 0===N||VF(N)||(_[A]=Object.assign(Object.assign(Object.assign({},(null===j||void 0===j?void 0:j.length)&&tW(p)?{name:"".concat(KF(p.field),"_legend_").concat(A)}:{}),(null===j||void 0===j?void 0:j.length)?{interactive:!!j}:{}),{update:N}))}return VF(_)||l.set("encode",_,!!(null===i||void 0===i?void 0:i.encoding)),l}function gX(e,t){var n,r,a,i;if(!e)return t.clone();var o=e.getWithExplicit("orient"),u=t.getWithExplicit("orient");if(!o.explicit||!u.explicit||o.value===u.value){var s,c=!1,l=Object(vo.a)(rX);try{var f=function(){var n=s.value,r=$q(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"symbolType":return function(e,t){if("circle"===t.value)return t;return e}(e,t);case"title":return YW(e,t);case"type":return c=!0,Wq("symbol")}return qq(e,t,n,"legend")}));e.setWithExplicit(n,r)};for(l.s();!(s=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}return c&&((null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&YF(e.implicit,["encode","gradient"]),(null===(i=null===(a=e.explicit)||void 0===a?void 0:a.encode)||void 0===i?void 0:i.gradient)&&YF(e.explicit,["encode","gradient"])),e}}function bX(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function yX(e){var t,n=e.component.legends,r={},a=Object(vo.a)(qF(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=e.getScaleComponent(i),u=IF(o.get("domains"));if(r[u]){var s,c=Object(vo.a)(r[u]);try{for(c.s();!(s=c.n()).done;){gX(s.value,n[i])||r[u].push(n[i])}}catch(l){c.e(l)}finally{c.f()}}else r[u]=[n[i].clone()]}}catch(l){a.e(l)}finally{a.f()}return $F(r).flat().map((function(t){return function(e,t){var n,r,a,i=e.combine(),o=i.disable,u=i.labelExpr,s=(i.selections,mF(i,["disable","labelExpr","selections"]));if(o)return;!1===t.aria&&void 0==s.aria&&(s.aria=!1);if(null===(n=s.encode)||void 0===n?void 0:n.symbols){var c=s.encode.symbols.update;!c.fill||"transparent"===c.fill.value||c.stroke||s.stroke||(c.stroke={value:"transparent"});var f,d=Object(vo.a)(AV);try{for(d.s();!(f=d.n()).done;){var h=f.value;s[h]&&delete c[h]}}catch(l){d.e(l)}finally{d.f()}}s.title||delete s.title;if(void 0!==u){var p=u;(null===(a=null===(r=s.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&fB(s.encode.labels.update.text)&&(p=nM(u,"datum.label",s.encode.labels.update.text.signal)),bX(s,"labels","text",{signal:p})}for(var v in s){var m=s[v];if(fB(m)){var g=TV[v];if(g){var b=g.vgProp;bX(s,g.part,b,m),delete s[v]}}}return s}(t,e.config)})).filter((function(e){return void 0!==e}))}function wX(e){return KY(e)||GY(e)?function(e){return e.children.reduce((function(e,t){return e.concat(t.assembleProjections())}),xX(e))}(e):xX(e)}function xX(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name;if(t.data){var a={signal:"[".concat(t.size.map((function(e){return e.signal})).join(", "),"]")},i=t.data.reduce((function(t,n){var r=fB(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return FF(t,r)||t.push(r),t}),[]);if(i.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:i.length>1?"[".concat(i.join(", "),"]"):i[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var OX=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],kX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;return Object(cy.a)(this,n),(o=t.call(this,Object.assign({},r),{name:e})).specifiedProjection=r,o.size=a,o.data=i,o.merged=!1,o}return Object(ly.a)(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(Bq);function jX(e){e.component.projection=$Y(e)?function(e){var t;if(e.hasProjection){var n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),a=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=r?function(e){for(var t=[],n=e.encoding,r=0,a=[[fP,lP],[hP,dP]];r<a.length;r++){var i=a[r];(EW(n[i[0]])||EW(n[i[1]]))&&t.push({signal:e.getName("geojson_".concat(t.length))})}e.channelHasField(gP)&&e.typedFieldDef(gP).type===MB&&t.push({signal:e.getName("geojson_".concat(t.length))});0===t.length&&t.push(e.requestDataName(e$));return t}(e):void 0;return new kX(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=e.config.projection)&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{}),a,i)}return}(e):function(e){if(0===e.children.length)return;var t,n,r=Object(vo.a)(e.children);try{for(r.s();!(n=r.n()).done;){jX(n.value)}}catch(d){r.e(d)}finally{r.f()}var a=PF(e.children,(function(e){var n=e.component.projection;if(n){if(t){var r=function(e,t){var n=PF(OX,(function(n){return!lF(e.explicit,n)&&!lF(t.explicit,n)||!(!lF(e.explicit,n)||!lF(t.explicit,n)||IF(e.get(n))!==IF(t.get(n)))}));if(IF(e.size)===IF(t.size)){if(n)return e;if(IF(e.explicit)===IF({}))return t;if(IF(t.explicit)===IF({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0}));if(t&&a){var i,o=e.projectionName(!0),u=new kX(o,t.specifiedProjection,t.size,AF(t.data)),s=Object(vo.a)(e.children);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.component.projection;if(l){var f;if(l.isFit)(f=u.data).push.apply(f,Object(Ys.a)(c.component.projection.data));c.renameProjection(l.get("name"),o),l.merged=!0}}}catch(d){s.e(d)}finally{s.f()}return u}return}(e)}var _X=n(208);function SX(e,t){return"".concat(vL(e),"_").concat(t)}function EX(e,t,n){var r,a=SX(null!==(r=NW(n,void 0))&&void 0!==r?r:{},t);return e.getName("".concat(a,"_bins"))}function CX(e,t,n){var r,a;r=function(e){return"as"in e}(e)?hF(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[pW(e,{forAs:!0}),pW(e,{binSuffix:"end",forAs:!0})];var i=Object.assign({},NW(t,void 0)),o=SX(i,e.field),u=function(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}(n,o),s=u.signal,c=u.extentSignal;if(yL(i.extent)){var l=i.extent,f=l.selection;a=dK(n.getSelectionComponent(KF(f),f),l),delete i.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:i,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),a?{span:a}:{})}}var AX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).bins=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.bins))}},{key:"merge",value:function(e,t){var n,r=Object(vo.a)(qF(e.bins));try{for(r.s();!(n=r.n()).done;){var a=n.value;a in this.bins?(t(e.bins[a].signal,this.bins[a].signal),this.bins[a].as=zF([].concat(Object(Ys.a)(this.bins[a].as),Object(Ys.a)(e.bins[a].as)),DF)):this.bins[a]=e.bins[a]}}catch(s){r.e(s)}finally{r.f()}var i,o=Object(vo.a)(e.children);try{for(o.s();!(i=o.n()).done;){var u=i.value;e.removeChild(u),u.parent=this}}catch(s){o.e(s)}finally{o.f()}e.remove()}},{key:"producedFields",value:function(){return new Set($F(this.bins).map((function(e){return e.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set($F(this.bins).map((function(e){return e.field})))}},{key:"hash",value:function(){return"Bin ".concat(DF(this.bins))}},{key:"assemble",value:function(){return $F(this.bins).flatMap((function(e){var t=[],n=Object(_X.a)(e.as),r=n[0],a=n.slice(1),i=e.bin,o=i.extent,u=mF(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:tM(e.field),as:r,signal:e.signal},yL(o)?{extent:null}:{extent:o}),e.span?{span:{signal:"span(".concat(e.span,")")}}:{}),u);!o&&e.extentSignal&&(t.push({type:"extent",field:tM(e.field),signal:e.extentSignal}),s.extent={signal:e.extentSignal}),t.push(s);var c,l=Object(vo.a)(a);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,d=0;d<2;d++)t.push({type:"formula",expr:pW({field:r[d]},{expr:"datum"}),as:f[d]})}catch(h){l.e(h)}finally{l.f()}return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){if(uW(n)&&mL(n.bin)){var a=CX(n,n.bin,t),i=a.key,o=a.binComponent;e[i]=Object.assign(Object.assign(Object.assign({},o),e[i]),function(e,t,n,r){var a,i;if(MW(t,n)){var o=$Y(e)&&null!==(i=null!==(a=e.axis(n))&&void 0!==a?a:e.legend(n))&&void 0!==i?i:{},u=pW(t,{expr:"datum"}),s=pW(t,{expr:"datum",binSuffix:"end"});return{formulaAs:pW(t,{binSuffix:"range",forAs:!0}),formula:LU(u,s,o.format,o.formatType,r)}}return{}}(t,n,r,t.config))}return e}),{});return VF(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t,r){var a=CX(t,t.bin,r),i=a.key,o=a.binComponent;return new n(e,Object(pt.a)({},i,o))}}]),n}(K$),TX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e){var r,a;if(Object(cy.a)(this,n),r=t.call(this,null),Yq(e=null!==e&&void 0!==e?e:{name:"source"})||(a=e.format?Object.assign({},NF(e.format,["parse"])):{}),Kq(e))r._data={values:e.values};else if(Gq(e)){if(r._data={url:e.url},!a.type){var i=/(?:\.([^.]+))?$/.exec(e.url)[1];FF(["json","csv","tsv","dsv","topojson"],i)||(i="json"),a.type=i}}else Qq(e)?r._data={values:[{type:"Sphere"}]}:(Xq(e)||Yq(e))&&(r._data={});return r._generator=Yq(e),e.name&&(r._name=e.name),a&&!VF(a)&&(r._data.format=a),r}return Object(ly.a)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"data",get:function(){return this._data}},{key:"hasName",value:function(){return!!this._name}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(e){this._name=e}},{key:"parent",set:function(e){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),n}(K$);function NX(e){var t,n=Object(vo.a)(e);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,i=Object(vo.a)(a.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.parent!==a)return console.error("Dataflow graph is inconsistent.",a,o),!1}}catch(u){i.e(u)}finally{i.f()}if(!NX(a.children))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}var IX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).params=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(DF(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(K$),DX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).params=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var e;return new Set([null!==(e=this.params.as)&&void 0!==e?e:"data"])}},{key:"hash",value:function(){return"Hash ".concat(DF(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(K$);function RX(e){return e instanceof TX||e instanceof IX||e instanceof DX}var FX=function(){function e(){Object(cy.a)(this,e),this._mutated=!1}return Object(ly.a)(e,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),e}(),MX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){var e;return Object(cy.a)(this,n),(e=t.call(this))._continue=!1,e}return Object(ly.a)(n,[{key:"setContinue",value:function(){this._continue=!0}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(e){var t=e.continueFlag,n=e.mutatedFlag;t&&this.setContinue(),n&&this.setMutated()}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(e){if(RX(e))return!1;var t=e.parent;return this.run(e).continueFlag&&this.optimizeNextFromLeaves(t),this.mutatedFlag}}]),n}(FX),PX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return n}(FX);function LX(e,t,n,r){var a=$Y(r)?r.encoding[YP(t)]:void 0;if(uW(n)&&$Y(r)&&JU(t,n,a,r.stack,r.markDef,r.config))e.add(pW(n,{})),e.add(pW(n,{suffix:"end"})),n.bin&&MW(n,t)&&e.add(pW(n,{binSuffix:"range"}));else if(t in FP){var i=function(e){switch(e){case lP:return"y";case dP:return"y2";case fP:return"x";case hP:return"x2"}}(t);e.add(r.getName(i))}else e.add(pW(n));return e}var zX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a){var i;return Object(cy.a)(this,n),(i=t.call(this,e)).dimensions=r,i.measures=a,i}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),AF(this.measures))}},{key:"groupBy",get:function(){return this.dimensions}},{key:"merge",value:function(e){return function(e,t){if(e.size!==t.size)return!1;var n,r=Object(vo.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(this.dimensions,e.dimensions)?(function(e,t){var n,r,a=Object(vo.a)(qF(t));try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=t[o],s=Object(vo.a)(qF(u));try{for(s.s();!(i=s.n()).done;){var c=i.value;o in e?e[o][c]=new Set([].concat(Object(Ys.a)(null!==(n=e[o][c])&&void 0!==n?n:[]),Object(Ys.a)(u[c]))):e[o]=Object(pt.a)({},c,u[c])}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}}(this.measures,e.measures),!0):(function(){var e;(e=Wz).debug.apply(e,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(e){e.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(Ys.a)(this.dimensions),Object(Ys.a)(qF(this.measures))))}},{key:"producedFields",value:function(){var e,t=new Set,n=Object(vo.a)(qF(this.measures));try{for(n.s();!(e=n.n()).done;){var r,a=e.value,i=Object(vo.a)(qF(this.measures[a]));try{for(i.s();!(r=i.n()).done;){var o=r.value,u=this.measures[a][o];0===u.size?t.add("".concat(o,"_").concat(a)):u.forEach(t.add,t)}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"hash",value:function(){return"Aggregate ".concat(DF({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=Object(vo.a)(qF(this.measures));try{for(a.s();!(e=a.n()).done;){var i,o=e.value,u=Object(vo.a)(qF(this.measures[o]));try{for(u.s();!(i=u.n()).done;){var s,c=i.value,l=Object(vo.a)(this.measures[o][c]);try{for(l.s();!(s=l.n()).done;){var f=s.value;r.push(f),t.push(c),n.push("*"===o?null:tM(o))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){u.e(d)}finally{u.f()}}}catch(d){a.e(d)}finally{a.f()}return{type:"aggregate",groupby:Object(Ys.a)(this.dimensions).map(tM),ops:t,fields:n,as:r}}}],[{key:"makeFromEncoding",value:function(e,t){var r=!1;t.forEachFieldDef((function(e){e.aggregate&&(r=!0)}));var a={},i=new Set;return r?(t.forEachFieldDef((function(e,n){var r,o,u,s,c=e.aggregate,l=e.field;if(c)if("count"===c)a["*"]=null!==(r=a["*"])&&void 0!==r?r:{},a["*"].count=new Set([pW(e,{forAs:!0})]);else{if(HM(c)||GM(c)){var f=HM(c)?"argmin":"argmax",d=c[f];a[d]=null!==(o=a[d])&&void 0!==o?o:{},a[d][f]=new Set([pW({op:f,field:d},{forAs:!0})])}else a[l]=null!==(u=a[l])&&void 0!==u?u:{},a[l][c]=new Set([pW(e,{forAs:!0})]);lL(n)&&"unaggregated"===t.scaleDomain(n)&&(a[l]=null!==(s=a[l])&&void 0!==s?s:{},a[l].min=new Set([pW({field:l,aggregate:"min"},{forAs:!0})]),a[l].max=new Set([pW({field:l,aggregate:"max"},{forAs:!0})]))}else LX(i,n,e,t)})),i.size+qF(a).length===0?null:new n(e,i,a)):null}},{key:"makeFromTransform",value:function(e,t){var r,a,i,o,u=new Set,s={},c=Object(vo.a)(t.aggregate);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=l.op,d=l.field,h=l.as;f&&("count"===f?(s["*"]=null!==(r=s["*"])&&void 0!==r?r:{},s["*"].count=new Set([h||pW(l,{forAs:!0})])):(s[d]=null!==(a=s[d])&&void 0!==a?a:{},s[d][f]=new Set([h||pW(l,{forAs:!0})])))}}catch(g){c.e(g)}finally{c.f()}var p,v=Object(vo.a)(null!==(i=t.groupby)&&void 0!==i?i:[]);try{for(v.s();!(p=v.n()).done;){var m=p.value;u.add(m)}}catch(g){v.e(g)}finally{v.f()}return u.size+qF(s).length===0?null:new n(e,u,s)}}]),n}(K$),BX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;Object(cy.a)(this,n),(o=t.call(this,e)).model=r,o.name=a,o.data=i;var u,s=Object(vo.a)(BP);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=r.facet[c];if(l){var f=l.bin,d=l.sort;o[c]=Object.assign({name:r.getName("".concat(c,"_domain")),fields:[pW(l)].concat(Object(Ys.a)(mL(f)?[pW(l,{binSuffix:"end"})]:[]))},VU(d)?{sortField:d}:tF(d)?{sortIndexField:IK(l,c)}:{})}}}catch(h){s.e(h)}finally{s.f()}return o.childModel=r.child,o}return Object(ly.a)(n,[{key:"hash",value:function(){var e,t="Facet",n=Object(vo.a)(BP);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(t+=" ".concat(r.charAt(0),":").concat(DF(this[r])))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"fields",get:function(){var e,t,n=[],r=Object(vo.a)(BP);try{for(r.s();!(t=r.n()).done;){var a=t.value;(null===(e=this[a])||void 0===e?void 0:e.fields)&&n.push.apply(n,Object(Ys.a)(this[a].fields))}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"dependentFields",value:function(){var e,t=new Set(this.fields),n=Object(vo.a)(BP);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(this[r].sortField&&t.add(this[r].sortField.field),this[r].sortIndexField&&t.add(this[r].sortIndexField))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var e,t={},n=Object(vo.a)(tL);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this.childModel.component.scales[r];if(a&&!a.merged){var i=a.get("type"),o=a.get("range");if(uU(i)&&dB(o)){var u=jY(_Y(this.childModel,r));u?t[r]=u:$z("Unknown field for ".concat(r,". Cannot calculate view size."))}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"assembleRowColumnHeaderData",value:function(e,t,n){var r={row:"y",column:"x"}[e],a=[],i=[],o=[];n&&n[r]&&(t?(a.push("distinct_".concat(n[r])),i.push("max")):(a.push(n[r]),i.push("distinct")),o.push("distinct_".concat(n[r])));var u=this[e],s=u.sortField,c=u.sortIndexField;if(s){var l=s.op,f=void 0===l?zU:l,d=s.field;a.push(d),i.push(f),o.push(pW(s,{forAs:!0}))}else c&&(a.push(c),i.push("max"),o.push(c));return{name:this[e].name,source:null!==t&&void 0!==t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},a.length?{fields:a,ops:i,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(e){var t,n,r,a=this.model.layout.columns,i=this.model.component.layoutHeaders,o=[],u={},s=Object(vo.a)(MK);try{for(s.s();!(r=s.n()).done;){var c,l=r.value,f=Object(vo.a)(PK);try{for(f.s();!(c=f.n()).done;){var d,h=c.value,p=null!==(t=i[l]&&i[l][h])&&void 0!==t?t:[],v=Object(vo.a)(p);try{for(v.s();!(d=v.n()).done;){if((null===(n=d.value.axes)||void 0===n?void 0:n.length)>0){u[l]=!0;break}}}catch(w){v.e(w)}finally{v.f()}}}catch(w){f.e(w)}finally{f.f()}if(u[l]){var m='length(data("'.concat(this.facet.name,'"))'),g="row"===l?a?{signal:"ceil(".concat(m," / ").concat(a,")")}:1:a?{signal:"min(".concat(m,", ").concat(a,")")}:{signal:m};o.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:g}]})}}}catch(w){s.e(w)}finally{s.f()}var b=u.row,y=u.column;return(b||y)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}},{key:"assemble",value:function(){var e,t,n=[],r=null,a=this.getChildIndependentFieldsWithStep(),i=this.column,o=this.row,u=this.facet;if(i&&o&&(a.x||a.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(e=a.x)&&void 0!==e?e:[],null!==(t=a.y)&&void 0!==t?t:[]),c=s.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(var l=0,f=[eP,ZM];l<f.length;l++){var d=f[l];this[d]&&n.push(this.assembleRowColumnHeaderData(d,r,a))}if(u){var h=this.assembleFacetHeaderData(a);h&&n.push.apply(n,Object(Ys.a)(h))}return n}}]),n}(K$);function UX(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function WX(e,t){var n=QF(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=UX(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===t.indexOf("utc:")){var a=UX(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(a,"')")}return $z(g.unrecognizedParse(t)),null}function VX(e){var t={};return SF(e.filter,(function(e){var n;if(_B(e)){var r=null;gB(e)?r=e.equal:OB(e)?r=e.range[0]:kB(e)&&(r=(null!==(n=e.oneOf)&&void 0!==n?n:e.in)[0]),r&&(Hz(r)?t[e.field]="date":dF(r)?t[e.field]="number":hF(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function qX(e){var t={};function n(e){var n;DW(e)?t[e.field]="date":"quantitative"===e.type&&(n=e.aggregate,hF(n)&&FF(["min","max"],n))?t[e.field]="number":aM(e.field)>1?e.field in t||(t[e.field]="flatten"):cW(e)&&VU(e.sort)&&aM(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if(($Y(e)||HY(e))&&e.forEachFieldDef((function(t,r){if(uW(t))n(t);else{var a=KP(r),i=e.fieldDef(a);n(Object.assign(Object.assign({},t),{type:i.type}))}})),$Y(e)){var r=e.mark,a=e.markDef,i=e.encoding;if(DM(r)&&!e.encoding.order){var o=i["horizontal"===a.orient?"y":"x"];tW(o)&&"quantitative"===o.type&&!(o.field in t)&&(t[o.field]="number")}}return t}var $X=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e))._parse=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(DF(this._parse))}},{key:"parse",get:function(){return this._parse}},{key:"merge",value:function(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}},{key:"assembleFormatParse",value:function(){var e,t={},n=Object(vo.a)(qF(this._parse));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this._parse[r];1===aM(r)&&(t[r]=a)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set(qF(this._parse))}},{key:"dependentFields",value:function(){return new Set(qF(this._parse))}},{key:"assembleTransforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qF(this._parse).filter((function(e){return!t||aM(e)>1})).map((function(t){var n=WX(t,e._parse[t]);return n?{type:"formula",expr:n,as:rM(t)}:null})).filter((function(e){return null!==e}))}}],[{key:"makeExplicit",value:function(e,t,n){var r={},a=t.data;return!Yq(a)&&a&&a.format&&a.format.parse&&(r=a.format.parse),this.makeWithAncestors(e,r,{},n)}},{key:"makeWithAncestors",value:function(e,t,r,a){var i,o=Object(vo.a)(qF(r));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=a.getWithExplicit(u);void 0!==s.value&&(s.explicit||s.value===r[u]||"derived"===s.value||"flatten"===r[u]?delete r[u]:$z(g.differentParse(u,r[u],s.value)))}}catch(w){o.e(w)}finally{o.f()}var c,l=Object(vo.a)(qF(t));try{for(l.s();!(c=l.n()).done;){var f=c.value,d=a.get(f);void 0!==d&&(d===t[f]?delete t[f]:$z(g.differentParse(f,t[f],d)))}}catch(w){l.e(w)}finally{l.f()}var h=new Bq(t,r);a.copyAll(h);var p,v={},m=Object(vo.a)(qF(h.combine()));try{for(m.s();!(p=m.n()).done;){var b=p.value,y=h.get(b);null!==y&&(v[b]=y)}}catch(w){m.e(w)}finally{m.f()}return 0===qF(v).length||a.parseNothing?null:new n(e,v)}}]),n}(K$),HX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e){return Object(cy.a)(this,n),t.call(this,e)}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set([IV])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:IV}}}]),n}(K$),GX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=zF(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:pW(e)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=Object(vo.a)(this.transform.joinaggregate);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.push(i.op),r.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field)}}catch(u){a.e(u)}finally{a.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==o?{groupby:o}:{})}}]),n}(K$);var KX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e))._stack=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this._stack))}},{key:"stack",get:function(){return this._stack}},{key:"addDimensions",value:function(e){var t;(t=this._stack.facetby).push.apply(t,Object(Ys.a)(e))}},{key:"dependentFields",value:function(){var e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(DF(this._stack))}},{key:"getGroupbyFields",value:function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[pW(t,{binSuffix:"mid"})]:[pW(t,{}),pW(t,{binSuffix:"end"})]:[pW(t)]:null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,a=t.stackField,i=t.stackby,o=t.sort,u=t.offset,s=t.impute,c=t.as;if(s&&r){var l=r.band,f=void 0===l?.5:l;r.bin&&e.push({type:"formula",expr:"".concat(f,"*")+pW(r,{expr:"datum"})+"+".concat(1-f,"*")+pW(r,{expr:"datum",binSuffix:"end"}),as:pW(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:a,groupby:[].concat(Object(Ys.a)(i),Object(Ys.a)(n)),key:pW(r,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[].concat(Object(Ys.a)(this.getGroupbyFields()),Object(Ys.a)(n)),field:a,sort:o,as:c,offset:u}),e}}],[{key:"makeFromTransform",value:function(e,t){var r=t.stack,a=t.groupby,i=t.as,o=t.offset,u=void 0===o?"zero":o,s=[],c=[];if(void 0!==t.sort){var l,f=Object(vo.a)(t.sort);try{for(f.s();!(l=f.n()).done;){var d=l.value;s.push(d.field),c.push(iM(d.order,"ascending"))}}catch(h){f.e(h)}finally{f.f()}}return new n(e,{stackField:r,groupby:a,offset:u,sort:{field:s,order:c},facetby:[],as:function(e){return tF(e)&&e.every((function(e){return hF(e)}))&&e.length>1}(i)?i:hF(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"]})}},{key:"makeFromEncoding",value:function(e,t){var r=t.stack,a=t.encoding;if(!r)return null;var i,o=r.groupbyChannel,u=r.fieldChannel,s=r.offset,c=r.impute;o&&(i=SW(a[o]));var l,f=function(e){return e.stack.stackBy.reduce((function(e,t){var n=pW(t.fieldDef);return n&&e.push(n),e}),[])}(t),d=t.encoding.order;return l=tF(d)||tW(d)?GW(d):f.reduce((function(e,t){return e.field.push(t),e.order.push("y"===u?"descending":"ascending"),e}),{field:[],order:[]}),new n(e,{dimensionFieldDef:i,stackField:t.vgField(u),facetby:[],stackby:f,sort:l,offset:s,impute:c,as:[t.vgField(u,{suffix:"start",forAs:!0}),t.vgField(u,{suffix:"end",forAs:!0})]})}}]),n}(K$),XX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=zF(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e,t,n=new Set;return(null!==(e=this.transform.groupby)&&void 0!==e?e:[]).forEach(n.add,n),(null!==(t=this.transform.sort)&&void 0!==t?t:[]).forEach((function(e){return n.add(e.field)})),this.transform.window.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(n.add,n),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:pW(e)}},{key:"hash",value:function(){return"WindowTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e,t,n=[],r=[],a=[],i=[],o=Object(vo.a)(this.transform.window);try{for(o.s();!(t=o.n()).done;){var u=t.value;r.push(u.op),a.push(this.getDefaultName(u)),i.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(g){o.e(g)}finally{o.f()}var s=this.transform.frame,c=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&r.every((function(e){return KM(e)})))return Object.assign({type:"joinaggregate",as:a,ops:r,fields:n},void 0!==c?{groupby:c}:{});var l=[],f=[];if(void 0!==this.transform.sort){var d,h=Object(vo.a)(this.transform.sort);try{for(h.s();!(d=h.n()).done;){var p=d.value;l.push(p.field),f.push(null!==(e=p.order)&&void 0!==e?e:"ascending")}}catch(g){h.e(g)}finally{h.f()}}var v={field:l,order:f},m=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:a,ops:r,fields:n,sort:v},void 0!==m?{ignorePeers:m}:{}),void 0!==c?{groupby:c}:{}),void 0!==s?{frame:s}:{})}}]),n}(K$),YX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){var t=e.parent;if(e instanceof $X){if(RX(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof $X)this.setMutated(),t.merge(e);else{if(WF(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}]),n}(MX),JX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"mergeNodes",value:function(e,t){var n,r=t.shift(),a=Object(vo.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.removeChild(i),i.parent=r,i.remove()}}catch(o){a.e(o)}finally{a.f()}}},{key:"run",value:function(e){for(var t=e.children.map((function(e){return e.hash()})),n={},r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);var a,i=Object(vo.a)(qF(n));try{for(i.s();!(a=i.n()).done;){var o=a.value;n[o].length>1&&(this.setMutated(),this.mergeNodes(e,n[o]))}}catch(l){i.e(l)}finally{i.f()}var u,s=Object(vo.a)(e.children);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.run(c)}}catch(l){s.e(l)}finally{s.f()}return this.mutatedFlag}}]),n}(PX),QX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){return e instanceof X$||e.numChildren()>0||e instanceof BX||(this.setMutated(),e.remove()),this.flags}}]),n}(MX),ZX=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){var e;return Object(cy.a)(this,n),(e=t.apply(this,arguments)).fields=new Set,e.prev=null,e}return Object(ly.a)(n,[{key:"run",value:function(e){if(this.setContinue(),e instanceof Y$){var t=e.producedFields();BF(t,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([].concat(Object(Ys.a)(this.fields),Object(Ys.a)(t))),this.prev=e}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),n}(MX),eY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){this.setContinue();var t,n=e.parent.children.filter((function(e){return e instanceof Y$})),r=n.pop(),a=Object(vo.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.setMutated(),r.merge(i)}}catch(o){a.e(o)}finally{a.f()}return this.flags}}]),n}(MX);function tY(e){if(e instanceof BX)if(1!==e.numChildren()||e.children[0]instanceof X$){var t=e.model.component.data.main;nY(t);var n,r=(u=e,function e(t){if(!(t instanceof BX)){var n=t.clone();if(n instanceof X$){var r=cY+n.getSource();n.setSource(r),u.model.component.data.outputNodes[r]=n}else(n instanceof zX||n instanceof KX||n instanceof XX||n instanceof GX)&&n.addDimensions(u.fields);var a,i=Object(vo.a)(t.children.flatMap(e));try{for(i.s();!(a=i.n()).done;)a.value.parent=n}catch(o){i.e(o)}finally{i.f()}return[n]}return t.children.flatMap(e)}),a=e.children.map(r).flat(),i=Object(vo.a)(a);try{for(i.s();!(n=i.n()).done;){n.value.parent=t}}catch(s){i.e(s)}finally{i.f()}}else{var o=e.children[0];(o instanceof zX||o instanceof KX||o instanceof XX||o instanceof GX)&&o.addDimensions(e.fields),o.swapWithParent(),tY(e)}else e.children.map(tY);var u}function nY(e){if(e instanceof X$&&e.type===e$&&1===e.numChildren()){var t=e.children[0];t instanceof BX||(t.swapWithParent(),nY(e))}}var rY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.call(this)}return Object(ly.a)(n,[{key:"run",value:function(e){e instanceof X$&&!e.isRequired()&&(this.setMutated(),e.remove());var t,n=Object(vo.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(PX),aY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e){var r;return Object(cy.a)(this,n),(r=t.call(this)).requiresSelectionId=e&&FH(e),r}return Object(ly.a)(n,[{key:"run",value:function(e){e instanceof HX&&(this.requiresSelectionId&&(RX(e.parent)||e.parent instanceof zX||e.parent instanceof $X)||(this.setMutated(),e.remove()));var t,n=Object(vo.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(PX),iY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){var t=e.parent,n=Object(Ys.a)(t.children),r=t.children.filter((function(e){return e instanceof $X}));if(t.numChildren()>1&&r.length>=1){var a,i={},o=new Set,u=Object(vo.a)(r);try{for(u.s();!(a=u.n()).done;){var s,c=a.value.parse,l=Object(vo.a)(qF(c));try{for(l.s();!(s=l.n()).done;){var f=s.value;f in i?i[f]!==c[f]&&o.add(f):i[f]=c[f]}}catch(x){l.e(x)}finally{l.f()}}}catch(x){u.e(x)}finally{u.f()}var d,h=Object(vo.a)(o);try{for(h.s();!(d=h.n()).done;){delete i[d.value]}}catch(x){h.e(x)}finally{h.f()}if(!VF(i)){this.setMutated();var p,v=new $X(t,i),m=Object(vo.a)(n);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g instanceof $X){var b,y=Object(vo.a)(qF(i));try{for(y.s();!(b=y.n()).done;){var w=b.value;delete g.parse[w]}}catch(x){y.e(x)}finally{y.f()}}t.removeChild(g),g.parent=v,g instanceof $X&&0===qF(g.parse).length&&g.remove()}}catch(x){m.e(x)}finally{m.f()}}}return this.setContinue(),this.flags}}]),n}(MX),oY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){var t,n=e.parent,r=n.children.filter((function(e){return e instanceof zX})),a={},i=Object(vo.a)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,u=DF(o.groupBy);u in a||(a[u]=[]),a[u].push(o)}}catch(v){i.e(v)}finally{i.f()}var s,c=Object(vo.a)(qF(a));try{for(c.s();!(s=c.n()).done;){var l=a[s.value];if(l.length>1){var f,d=l.pop(),h=Object(vo.a)(l);try{for(h.s();!(f=h.n()).done;){var p=f.value;d.merge(p)&&(n.removeChild(p),p.parent=d,p.remove(),this.setMutated())}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){c.e(v)}finally{c.f()}return this.setContinue(),this.flags}}]),n}(MX),uY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e){var r;return Object(cy.a)(this,n),(r=t.call(this)).model=e,r}return Object(ly.a)(n,[{key:"run",value:function(e){var t,n=e.parent,r=!(RX(n)||n instanceof lK||n instanceof $X||n instanceof HX),a=[],i=[],o=Object(vo.a)(n.children);try{for(o.s();!(t=o.n()).done;){var u=t.value;u instanceof AX&&(r&&!WF(n.producedFields(),u.dependentFields())?a.push(u):i.push(u))}}catch(m){o.e(m)}finally{o.f()}if(a.length>0){var s,c=a.pop(),l=Object(vo.a)(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.merge(f,this.model.renameSignal.bind(this.model))}}catch(m){l.e(m)}finally{l.f()}this.setMutated(),n instanceof AX?n.merge(c,this.model.renameSignal.bind(this.model)):c.swapWithParent()}if(i.length>1){var d,h=i.pop(),p=Object(vo.a)(i);try{for(p.s();!(d=p.n()).done;){var v=d.value;h.merge(v,this.model.renameSignal.bind(this.model))}}catch(m){p.e(m)}finally{p.f()}this.setMutated()}return this.setContinue(),this.flags}}]),n}(MX),sY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"run",value:function(e){var t=e.parent,n=Object(Ys.a)(t.children);if(!MF(n,(function(e){return e instanceof X$}))||t.numChildren()<=1)return this.setContinue(),this.flags;var r,a,i=[],o=Object(vo.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u instanceof X$){for(var s=u;1===s.numChildren();){var c=s.children[0];if(!(c instanceof X$))break;s=c}i.push.apply(i,Object(Ys.a)(s.children)),r?(t.removeChild(u),u.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setMutated()):r=s}else i.push(u)}}catch(h){o.e(h)}finally{o.f()}if(i.length){this.setMutated();var l,f=Object(vo.a)(i);try{for(f.s();!(l=f.n()).done;){var d=l.value;d.parent.removeChild(d),d.parent=r}}catch(h){f.e(h)}finally{f.f()}}return this.setContinue(),this.flags}}]),n}(MX),cY="scale_";function lY(e){var t=[];function n(e){if(0===e.numChildren())t.push(e);else{var r,a=Object(vo.a)(e.children);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}}}var r,a=Object(vo.a)(e);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}return t}function fY(e){return e}function dY(e,t){return t.map((function(t){if(e instanceof MX){var n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)})).some(fY)}function hY(e,t){var n=e.sources,r=new Set;return r.add(dY(new rY,n)),r.add(dY(new aY(t),n)),n=n.filter((function(e){return e.numChildren()>0})),r.add(dY(new QX,lY(n))),n=n.filter((function(e){return e.numChildren()>0})),r.add(dY(new YX,lY(n))),r.add(dY(new uY(t),lY(n))),r.add(dY(new ZX,lY(n))),r.add(dY(new iY,lY(n))),r.add(dY(new oY,lY(n))),r.add(dY(new eY,lY(n))),r.add(dY(new JX,n)),r.add(dY(new sY,lY(n))),e.sources=n,r.has(!0)}function pY(e,t){NX(e.sources);for(var n=0,r=0,a=0;a<5&&hY(e,t);a++)n++;e.sources.map(tY);for(var i=0;i<5&&hY(e,t);i++)r++;NX(e.sources),5===Math.max(n,r)&&$z("Maximum optimization runs(".concat(5,") reached."))}var vY=function(){function e(t){Object(cy.a)(this,e),Object.defineProperty(this,"signal",{enumerable:!0,get:t})}return Object(ly.a)(e,null,[{key:"fromName",value:function(t,n){return new e((function(){return t(n)}))}}]),e}();function mY(e){$Y(e)?function(e){var t,n=e.component.scales,r=Object(vo.a)(qF(n));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=gY(e,a);if(n[a].setWithExplicit("domains",i),xY(e,a),e.component.data.isFaceted){for(var o=e;!HY(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[a]){var u,s=Object(vo.a)(i.value);try{for(s.s();!(u=s.n()).done;){var c=u.value;hB(c)&&(c.data=cY+c.data.replace(cY,""))}}catch(l){s.e(l)}finally{s.f()}}}}}catch(l){r.e(l)}finally{r.f()}}(e):function(e){var t,n=Object(vo.a)(e.children);try{for(n.s();!(t=n.n()).done;){mY(t.value)}}catch(h){n.e(h)}finally{n.f()}var r,a=e.component.scales,i=Object(vo.a)(qF(a));try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=void 0,c=null,l=Object(vo.a)(e.children);try{for(l.s();!(o=l.n()).done;){var f=o.value.component.scales[u];if(f){s=void 0===s?f.getWithExplicit("domains"):$q(s,f.getWithExplicit("domains"),"domains","scale",kY);var d=f.get("selectionExtent");c&&d&&c.selection!==d.selection&&$z("The same selection must be used to override scale domains in a layered view."),c=d}}}catch(h){l.e(h)}finally{l.f()}a[u].setWithExplicit("domains",s),c&&a[u].set("selectionExtent",c,!0)}}catch(h){i.e(h)}finally{i.f()}}(e)}function gY(e,t){var n=e.getScaleComponent(t).get("type"),r=e.encoding,a=function(e,t,n,r){if("unaggregated"===e){var a=OY(t,n),i=a.valid,o=a.reason;if(!i)return void $z(o)}else if(void 0===e&&r.useUnaggregatedDomain&&OY(t,n).valid)return"unaggregated";return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return a!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:a})),"x"===t&&EW(r.x2)?EW(r.x)?$q(yY(n,a,e,"x"),yY(n,a,e,"x2"),"domain","scale",kY):yY(n,a,e,"x2"):"y"===t&&EW(r.y2)?EW(r.y)?$q(yY(n,a,e,"y"),yY(n,a,e,"y2"),"domain","scale",kY):yY(n,a,e,"y2"):yY(n,a,e,t)}function bY(e,t,n){var r,a=null===(r=cB(n))||void 0===r?void 0:r.unit;return"temporal"===t||a?function(e,t,n){return e.map((function(e){var r=RW(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}(e,t,a):[e]}function yY(e,t,n,r){var a=EW(n.encoding[r]),i=a.type,o=a.timeUnit;if(function(e){return e&&e.unionWith}(t)){var u=yY(e,void 0,n,r),s=bY(t.unionWith,i,o);return Uq([].concat(Object(Ys.a)(u.value),Object(Ys.a)(s)))}if(fB(t))return Uq([t]);if(t&&"unaggregated"!==t&&!fU(t))return Uq(bY(t,i,o));var c=n.stack;if(c&&r===c.fieldChannel){if("normalize"===c.offset)return Wq([[0,1]]);var l=n.requestDataName(e$);return Wq([{data:l,field:n.vgField(r,{suffix:"start"})},{data:l,field:n.vgField(r,{suffix:"end"})}])}var f=lL(r)&&tW(a)?function(e,t,n){if(!uU(n))return;var r=e.fieldDef(t),a=r.sort;if(qU(a))return{op:"min",field:IK(r,t),order:"ascending"};var i=e.stack,o=i?[].concat(Object(Ys.a)(i.groupbyField?[i.groupbyField]:[]),Object(Ys.a)(i.stackBy.map((function(e){return e.fieldDef.field})))):void 0;if(VU(a))return wY(a,i&&!FF(o,a.field));if(WU(a)){var u=a.encoding,s=a.order,c=e.fieldDef(u),l=c.aggregate,f=c.field,d=i&&!FF(o,f);if(HM(l)||GM(l))return wY({field:pW(c),order:s},d);if(KM(l)||!l)return wY({op:l,field:f,order:s},d)}else{if("descending"===a)return{op:"min",field:e.vgField(t),order:"descending"};if(FF(["ascending",void 0],a))return!0}return}(n,r,e):void 0;if(rW(a))return Wq(bY([a.datum],i,o));var d=a;if("unaggregated"===t){var h=n.requestDataName(e$),p=a.field;return Wq([{data:h,field:pW({field:p,aggregate:"min"})},{data:h,field:pW({field:p,aggregate:"max"})}])}if(mL(d.bin)){if(uU(e))return Wq("bin-ordinal"===e?[]:[{data:GF(f)?n.requestDataName(e$):n.requestDataName(t$),field:n.vgField(r,MW(d,r)?{binSuffix:"range"}:{}),sort:!0!==f&&nF(f)?f:{field:n.vgField(r,{}),op:"min"}}]);var v=d.bin;if(mL(v)){var m=EX(n,d.field,v);return Wq([new vY((function(){var e=n.getSignalName(m);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return Wq([{data:n.requestDataName(e$),field:n.vgField(r,{})}])}if(d.timeUnit&&FF(["time","utc"],e)&&JU(r,d,$Y(n)?n.encoding[YP(r)]:void 0,n.stack,n.markDef,n.config)){var g=n.requestDataName(e$);return Wq([{data:g,field:n.vgField(r)},{data:g,field:n.vgField(r,{suffix:"end"})}])}return Wq(f?[{data:GF(f)?n.requestDataName(e$):n.requestDataName(t$),field:n.vgField(r),sort:f}]:[{data:n.requestDataName(e$),field:n.vgField(r)}])}function wY(e,t){var n=e.op,r=e.field,a=e.order;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:t?"sum":zU},r?{field:tM(r)}:{}),a?{order:a}:{})}function xY(e,t){var n,r=e.component.scales[t],a=e.specifiedScales[t].domain,i=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,o=fU(a)&&a,u=bL(i)&&yL(i.extent)&&i.extent;(o||u)&&r.set("selectionExtent",null!==o&&void 0!==o?o:u,!0)}function OY(e,t){var n=e.aggregate,r=e.type;return n?hF(n)&&!QM[n]?{valid:!1,reason:g.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:g.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:g.unaggregateDomainHasNoEffectForRawField(e)}}function kY(e,t,n,r){return e.explicit&&t.explicit&&$z(g.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[].concat(Object(Ys.a)(e.value),Object(Ys.a)(t.value))}}function jY(e){if(hB(e)&&hF(e.field))return e.field;if(function(e){return!tF(e)&&"fields"in e&&!("data"in e)}(e)){var t,n,r=Object(vo.a)(e.fields);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(hB(a)&&hF(a.field))if(t){if(t!==a.field)return $z(g.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=a.field}}catch(o){r.e(o)}finally{r.f()}return $z(g.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!tF(e)&&"fields"in e&&"data"in e}(e)){$z(g.FACETED_INDEPENDENT_SAME_SOURCE);var i=e.fields[0];return hF(i)?i:void 0}}function _Y(e,t){return function(e){var t=zF(e.map((function(e){return hB(e)?(e.sort,mF(e,["sort"])):e})),DF),n=zF(e.map((function(e){if(hB(e)){var t=e.sort;return void 0===t||GF(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),DF);if(0!==t.length){if(1===t.length){var r=e[0];if(hB(r)&&n.length>0){var a=n[0];if(n.length>1)$z(g.MORE_THAN_ONE_SORT),a=!0;else if(nF(a)&&"field"in a){var i=a.field;r.field===i&&(a=!a.order||{order:a.order})}return Object.assign(Object.assign({},r),{sort:a})}return r}var o,u=zF(n.map((function(e){return GF(e)||!("op"in e)||e.op in $M?e:($z(g.domainSortDropped(e)),!0)})),DF);1===u.length?o=u[0]:u.length>1&&($z(g.MORE_THAN_ONE_SORT),o=!0);var s=zF(e.map((function(e){return hB(e)?e.data:null})),(function(e){return e}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:t.map((function(e){return e.field}))},o?{sort:o}:{}):Object.assign({fields:t},o?{sort:o}:{})}}(e.component.scales[t].get("domains").map((function(t){return hB(t)&&(t.data=e.lookupDataSource(t.data)),t})))}function SY(e){return KY(e)||GY(e)?e.children.reduce((function(e,t){return e.concat(SY(t))}),EY(e)):EY(e)}function EY(e){return qF(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var a,i=r.combine(),o=i.name,u=i.type,s=i.selectionExtent,c=(i.domains,i.range,i.reverse),l=mF(i,["name","type","selectionExtent","domains","range","reverse"]),f=function(e,t,n){if(nL(n)&&dB(e))return{step:{signal:t+"_step"}};return e}(i.range,o,n);s&&(a=function(e,t){var n=t.selection;return{signal:dK(e.getSelectionComponent(n,KF(n)),t)}}(e,s));var d=_Y(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:u},d?{domain:d}:{}),a?{domainRaw:a}:{}),{range:f}),void 0!==c?{reverse:c}:{}),l)),t}),[])}var CY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,{},{name:e})).merged=!1,a.setWithExplicit("type",r),a}return Object(ly.a)(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||MF(this.get("domains"),(function(e){return tF(e)&&2===e.length&&e[0]<=0&&e[1]>=0}))}}]),n}(Bq),AY=["range","scheme"];function TY(e){return"x"===e?"width":"y"===e?"height":void 0}function NY(e,t){var n=e.fieldDef(t);if(n&&n.bin&&mL(n.bin)){var r=EX(e,n.field,n.bin),a=TY(t),i=e.getName(a);return new vY((function(){var t=e.getSignalName(r),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(i)," / (").concat(n,")")}))}}function IY(e,t){var n,r=t.specifiedScales[e],a=t.size,i=t.getScaleComponent(e).get("type"),o=Object(vo.a)(AY);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(void 0!==r[u]){var s=vU(i,u),c=mU(e,u);if(s)if(c)$z(c);else switch(u){case"range":return tF(r.range)&&nL(e)?Uq(r.range.map((function(e){if("width"===e||"height"===e){var n=t.getName(e),r=t.getSignalName.bind(t);return vY.fromName(r,n)}return e}))):Uq(r.range);case"scheme":return Uq(DY(r[u]))}else $z(g.scalePropertyNotWorkWithScaleType(i,u,e))}}}catch(d){o.e(d)}finally{o.f()}if(e===nP||e===rP){var l=e===nP?"width":"height",f=a[l];if(zV(f)){if(uU(i))return Uq({step:f.step});$z(g.stepDropped(l))}}return Wq(function(e,t){var n=t.size,r=t.config,a=t.mark,i=t.encoding,o=t.getSignalName.bind(t),u=EW(i[e]).type,s=t.getScaleComponent(e).get("type"),c=t.specifiedScales[e],l=c.domain,f=c.domainMid;switch(e){case nP:case rP:if(FF(["point","band"],s))if(e!==nP||n.width){if(e===rP&&!n.height){var d=qV(r.view,"height");if(zV(d))return d}}else{var h=qV(r.view,"width");if(zV(h))return h}var p=TY(e),v=t.getName(p);return e===rP&&sU(s)?[vY.fromName(o,v),0]:[0,vY.fromName(o,v)];case bP:var m=RY(a,t.component.scales[e].get("zero"),r),b=function(e,t,n,r){var a={x:NY(n,"x"),y:NY(n,"y")};switch(e){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var i=MY(t,a,r.view);return dF(i)?i-1:new vY((function(){return"".concat(i.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=MY(t,a,r.view);return dF(o)?Math.pow(FY*o,2):new vY((function(){return"pow(".concat(FY," * ").concat(o.signal,", 2)")}))}throw new Error(g.incompatibleChannel("size",e))}(a,n,t,r);return lU(s)?function(e,t,n){var r=function(){var r=UW(t),a=UW(e),i="(".concat(r," - ").concat(a,") / (").concat(n," - 1)");return"sequence(".concat(a,", ").concat(r," + ").concat(i,", ").concat(i,")")};return fB(t)?new vY(r):{signal:r()}}(m,b,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&tF(n)?n.length+1:($z(g.domainRequiredForThresholdScale(r)),3)}}(s,r,l,e)):[m,b];case sP:return[0,2*Math.PI];case yP:return[0,360];case oP:return[0,new vY((function(){var e=t.getSignalName("width"),n=t.getSignalName("height");return"min(".concat(e,",").concat(n,")/2")}))];case kP:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case jP:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case gP:return"symbol";case pP:case vP:case mP:return"ordinal"===s?"nominal"===u?"category":"ordinal":void 0!==f?"diverging":"rect"===a||"geoshape"===a?"heatmap":"ramp";case wP:case xP:case OP:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}(e,t))}function DY(e){return function(e){return!hF(e)&&!!e.name}(e)?Object.assign({scheme:e.name},NF(e,["name"])):{scheme:e}}function RY(e,t,n){if(t)return fB(t)?{signal:"".concat(t.signal," ? 0 : ").concat(RY(e,!1,n))}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(g.incompatibleChannel("size",e))}var FY=.95;function MY(e,t,n){var r=zV(e.width)?e.width.step:VV(n,"width"),a=zV(e.height)?e.height.step:VV(n,"height");return t.x||t.y?new vY((function(){var e=[t.x?t.x.signal:r,t.y?t.y.signal:a];return"min(".concat(e.join(", "),")")})):Math.min(r,a)}function PY(e,t){$Y(e)?function(e,t){var n,r=e.component.scales,a=e.config,i=e.encoding,o=e.markDef,u=e.specifiedScales,s=Object(vo.a)(qF(r));try{for(s.s();!(n=s.n()).done;){var c=n.value,l=u[c],f=r[c],d=e.getScaleComponent(c),h=EW(i[c]),p=l[t],v=d.get("type"),m=d.get("padding"),b=d.get("paddingInner"),y=vU(v,t),w=mU(c,t);if(void 0!==p&&(y?w&&$z(w):$z(g.scalePropertyNotWorkWithScaleType(v,t,c))),y&&void 0===w)if(void 0!==p)f.copyKeyFromObject(t,l);else{var x=t in LY?LY[t]({model:e,channel:c,fieldOrDatumDef:h,scaleType:v,scalePadding:m,scalePaddingInner:b,domain:l.domain,markDef:o,config:a}):a.scale[t];void 0!==x&&f.set(t,x,!1)}}}catch(O){s.e(O)}finally{s.f()}}(e,t):BY(e,t)}var LY={bins:function(e){var t=e.model,n=e.fieldOrDatumDef;return tW(n)?function(e,t){var n=t.bin;if(mL(n)){var r=EX(e,t.field,n);return new vY((function(){return e.getSignalName(r)}))}if(gL(n)&&bL(n)&&void 0!==n.step)return{step:n.step};return}(t,n):void 0},interpolate:function(e){return function(e,t){if(FF([pP,vP,mP],e)&&"nominal"!==t)return"hcl";return}(e.channel,e.fieldOrDatumDef.type)},nice:function(e){return function(e,t,n){var r;if((null===(r=SW(n))||void 0===r?void 0:r.bin)||FF([VB,qB],e))return;return t in eL||void 0}(e.scaleType,e.channel,e.fieldOrDatumDef)},padding:function(e){var t=e.channel,n=e.scaleType,r=e.fieldOrDatumDef,a=e.markDef,i=e.config;return function(e,t,n,r,a,i){if(e in eL){if(cU(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=a.type,u=a.orient;if("bar"===o&&(!tW(r)||!r.bin&&!r.timeUnit)&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return i.continuousBandSize}if(t===KB)return n.pointPadding}return}(t,n,i.scale,r,a,i.bar)},paddingInner:function(e){var t=e.scalePadding,n=e.channel,r=e.markDef,a=e.config;return function(e,t,n,r){if(void 0!==e)return;if(t in eL){var a=r.bandPaddingInner,i=r.barBandPaddingInner,o=r.rectBandPaddingInner;return iM(a,"bar"===n?i:o)}return}(t,n,r.type,a.scale)},paddingOuter:function(e){var t=e.scalePadding,n=e.channel,r=e.scaleType,a=e.markDef,i=e.scalePaddingInner,o=e.config;return function(e,t,n,r,a,i){if(void 0!==e)return;if(t in eL){if(n===XB)return iM(i.bandPaddingOuter,fB(a)?{signal:"".concat(a.signal,"/2")}:a/2)}return}(t,n,r,a.type,i,o.scale)},reverse:function(e){var t=e.fieldOrDatumDef,n=e.scaleType,r=e.channel,a=e.config;return function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return sU(e)&&"descending"===t?fB(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(sU(e)&&"descending"===t)return!0;return}(n,tW(t)?t.sort:void 0,r,a.scale)},zero:function(e){return function(e,t,n,r,a){if(n&&"unaggregated"!==n&&sU(a)){if(tF(n)){var i=n[0],o=n[n.length-1];if(i<=0&&o>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!lU(a))return!0;if((!tW(t)||!t.bin)&&FF([].concat(Object(Ys.a)(tL),Object(Ys.a)(aL)),e)){var u=r.orient;return!FF(["bar","area","line","trail"],r.type)||!("horizontal"===u&&"y"===e||"vertical"===u&&"x"===e)}return!1}(e.channel,e.fieldOrDatumDef,e.domain,e.markDef,e.scaleType)}};function zY(e){$Y(e)?function(e){var t,n=e.component.scales,r=Object(vo.a)(cL);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=n[a];if(i){var o=IY(a,e);i.setWithExplicit("range",o)}}}catch(u){r.e(u)}finally{r.f()}}(e):BY(e,"range")}function BY(e,t){var n,r=e.component.scales,a=Object(vo.a)(e.children);try{for(a.s();!(n=a.n()).done;){var i=n.value;"range"===t?zY(i):PY(i,t)}}catch(h){a.e(h)}finally{a.f()}var o,u=Object(vo.a)(qF(r));try{for(u.s();!(o=u.n()).done;){var s,c=o.value,l=void 0,f=Object(vo.a)(e.children);try{for(f.s();!(s=f.n()).done;){var d=s.value.component.scales[c];if(d)l=$q(l,d.getWithExplicit(t),t,"scale",Vq((function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}catch(h){f.e(h)}finally{f.f()}r[c].setWithExplicit(t,l)}}catch(h){u.e(h)}finally{u.f()}}function UY(e,t,n,r){var a=function(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(LP(e)||"discrete"===pL(e))return"shape"===e&&"ordinal"===t.type&&$z(g.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in eL){if(FF(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&e in rL)return"band";return void 0!==t.band||lW(t)&&(null===(r=t.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return LP(e)?"time":"discrete"===pL(e)?($z(g.discreteChannelCannotEncode(e,"temporal")),"ordinal"):tW(t)&&t.timeUnit&&cB(t.timeUnit).utc?"utc":"time";case"quantitative":return LP(e)?tW(t)&&mL(t.bin)?"bin-ordinal":"linear":"discrete"===pL(e)?($z(g.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(g.invalidFieldType(t.type))}(t,n,r),i=e.type;return lL(t)?void 0!==i?bU(t,i)?tW(n)&&!gU(i,n.type)?($z(g.scaleTypeNotWorkWithFieldDef(i,a)),a):i:($z(g.scaleTypeNotWorkWithChannel(t,i,a)),a):a:null}function WY(e){$Y(e)?e.component.scales=function(e){var t=e.encoding,n=e.mark;return cL.reduce((function(r,a){var i=EW(t[a]);if(i&&n===IM&&a===gP&&i.type===MB)return r;var o=i&&i.scale;if(i&&null!==o&&!1!==o){var u=UY(o=null!==o&&void 0!==o?o:{},a,i,n);r[a]=new CY(e.scaleName(a+"",!0),{value:u,explicit:o.type===u})}return r}),{})}(e):e.component.scales=function(e){var t,n,r=e.component.scales={},a={},i=e.component.resolve,o=Object(vo.a)(e.children);try{for(o.s();!(n=o.n()).done;){var u=n.value;WY(u);var s,c=Object(vo.a)(qF(u.component.scales));try{for(c.s();!(s=c.n()).done;){var l=s.value;if(i.scale[l]=null!==(t=i.scale[l])&&void 0!==t?t:eX(l,e),"shared"===i.scale[l]){var f=a[l],d=u.component.scales[l].getWithExplicit("type");f?QB(f.value,d.value)?a[l]=$q(f,d,"type","scale",VY):(i.scale[l]="independent",delete a[l]):a[l]=d}}}catch(O){c.e(O)}finally{c.f()}}}catch(O){o.e(O)}finally{o.f()}var h,p=Object(vo.a)(qF(a));try{for(p.s();!(h=p.n()).done;){var v=h.value,m=e.scaleName(v,!0),g=a[v];r[v]=new CY(m,g);var b,y=Object(vo.a)(e.children);try{for(y.s();!(b=y.n()).done;){var w=b.value,x=w.component.scales[v];x&&(w.renameScale(x.get("name"),m),x.merged=!0)}}catch(O){y.e(O)}finally{y.f()}}}catch(O){p.e(O)}finally{p.f()}return r}(e)}var VY=Vq((function(e,t){return eU(e)-eU(t)}));var qY=function(){function e(){Object(cy.a)(this,e),this.nameMap={}}return Object(ly.a)(e,[{key:"rename",value:function(e,t){this.nameMap[e]=t}},{key:"has",value:function(e){return void 0!==this.nameMap[e]}},{key:"get",value:function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}]),e}();function $Y(e){return"unit"===(null===e||void 0===e?void 0:e.type)}function HY(e){return"facet"===(null===e||void 0===e?void 0:e.type)}function GY(e){return"concat"===(null===e||void 0===e?void 0:e.type)}function KY(e){return"layer"===(null===e||void 0===e?void 0:e.type)}var XY=function(){function e(t,n,r,a,i,o,u){var s,c,l=this;Object(cy.a)(this,e),this.type=n,this.parent=r,this.config=i,this.view=u,this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=l.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=l.lookupDataSource(e.from.facet.data)),e},this.parent=r,this.config=i,this.name=null!==(s=t.name)&&void 0!==s?s:a,this.title=LW(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new qY,this.projectionNameMap=r?r.projectionNameMap:new qY,this.signalNameMap=r?r.signalNameMap:new qY,this.data=t.data,this.description=t.description,this.transforms=(null!==(c=t.transform)&&void 0!==c?c:[]).map((function(e){return n$(e)?{filter:EF(e.filter,TB)}:e})),this.layout="layer"===n||"unit"===n?{}:function(e,t,n){var r,a,i=n[t],o={},u=i.spacing,s=i.columns;void 0!==u&&(o.spacing=u),void 0!==s&&(GU(e)&&!$U(e.facet)||MV(e))&&(o.columns=s),PV(e)&&(o.columns=1);var c,l=Object(vo.a)(UV);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(void 0!==e[f])if("spacing"===f){var d=e[f];o[f]=dF(d)?d:{row:null!==(r=d.row)&&void 0!==r?r:u,column:null!==(a=d.column)&&void 0!==a?a:u}}else o[f]=e[f]}}catch(h){l.e(h)}finally{l.f()}return o}(t,n,i),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:GU(t)||r&&r.component.data.isFaceted&&void 0===t.data},layoutSize:new Bq,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?AF(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(ly.a)(e,[{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreRange;WY(e),mY(e);var n,r=Object(vo.a)(pU);try{for(r.s();!(n=r.n()).done;){PY(e,n.value)}}catch(a){r.e(a)}finally{r.f()}t||zY(e)}(this)}},{key:"parseProjection",value:function(){jX(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){pX(this)}},{key:"assembleGroupStyle",value:function(){var e,t;if("unit"===this.type||"layer"===this.type)return null!==(t=null===(e=this.view)||void 0===e?void 0:e.style)&&void 0!==t?t:"cell"}},{key:"assembleEncodeFromView",value:function(e){e.style;var t,n=mF(e,["style"]),r={},a=Object(vo.a)(qF(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n[i];void 0!==o&&(r[i]=zW(o))}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(e){var t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=zW(this.description)),"unit"!==this.type&&"layer"!==this.type)?VF(t)?void 0:t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==t&&void 0!==t?t:{})}},{key:"assembleLayout",value:function(){if(this.layout){var e=this.layout,t=e.spacing,n=mF(e,["spacing"]),r=this.component,a=this.config,i=function(e,t){var n,r={},a=Object(vo.a)(BP);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=e[i];if(null===o||void 0===o?void 0:o.facetFieldDef){var u=FK(["titleAnchor","titleOrient"],o.facetFieldDef,t,i),s=u.titleAnchor,c=DK(i,u.titleOrient),l=HK(s,c);void 0!==l&&(r[c]=l)}}}catch(f){a.e(f)}finally{a.f()}return VF(r)?void 0:r}(r.layoutHeaders,a);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),i?{titleBand:i}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var e,t=this.component.layoutHeaders,n=[],r=Object(vo.a)(BP);try{for(r.s();!(e=r.n()).done;){var a=e.value;t[a].title&&n.push(LK(this,a))}}catch(s){r.e(s)}finally{r.f()}var i,o=Object(vo.a)(MK);try{for(o.s();!(i=o.n()).done;){var u=i.value;n=n.concat(UK(this,u))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"assembleAxes",value:function(){return function(e,t){var n=e.x,r=void 0===n?[]:n,a=e.y,i=void 0===a?[]:a;return[].concat(Object(Ys.a)(r.map((function(e){return mK(e,"grid",t)}))),Object(Ys.a)(i.map((function(e){return mK(e,"grid",t)}))),Object(Ys.a)(r.map((function(e){return mK(e,"main",t)}))),Object(Ys.a)(i.map((function(e){return mK(e,"main",t)})))).filter((function(e){return e}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return yX(this)}},{key:"assembleProjections",value:function(){return wX(this)}},{key:"assembleTitle",value:function(){var e,t,n,r=null!==(e=this.title)&&void 0!==e?e:{},a=r.encoding,i=mF(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},PW(this.config.title).nonMark),i),a?{encode:{update:a}}:{});if(o.text)return FF(["unit","layer"],this.type)?FF(["middle",void 0],o.anchor)&&(o.frame=null!==(t=o.frame)&&void 0!==t?t:"group"):o.anchor=null!==(n=o.anchor)&&void 0!==n?n:"start",VF(o)?void 0:o}},{key:"assembleGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||HY(this.parent)?SY(this):[];r.length>0&&(t.scales=r);var a=this.assembleAxes();a.length>0&&(t.axes=a);var i=this.assembleLegends();return i.length>0&&(t.legends=i),t}},{key:"getName",value:function(e){return KF((this.name?this.name+"_":"")+e)}},{key:"requestDataName",value:function(e){var t,n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(t=r[n])&&void 0!==t?t:0)+1,n}},{key:"getSizeSignalRef",value:function(e){if(HY(this.parent)){var t=iL(QK(e)),n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),a=n.get("range");if(uU(r)&&dB(a)){var i=n.get("name"),o=jY(_Y(this,t));return o?{signal:JK(i,n,pW({aggregate:"distinct",field:o},{expr:"datum"}))}:($z("Unknown field for ".concat(t,". Cannot calculate view size.")),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}},{key:"lookupDataSource",value:function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e}},{key:"getSignalName",value:function(e){return this.signalNameMap.get(e)}},{key:"renameSignal",value:function(e,t){this.signalNameMap.rename(e,t)}},{key:"renameScale",value:function(e,t){this.scaleNameMap.rename(e,t)}},{key:"renameProjection",value:function(e,t){this.projectionNameMap.rename(e,t)}},{key:"scaleName",value:function(e,t){return t?this.getName(e):$P(e)&&lL(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}},{key:"projectionName",value:function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}},{key:"getSelectionComponent",value:function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(g.selectionNotFound(t));return n}},{key:"hasAxisOrientSignalRef",value:function(){var e,t;return(null===(e=this.component.axes.x)||void 0===e?void 0:e.some((function(e){return e.hasOrientSignalRef()})))||(null===(t=this.component.axes.y)||void 0===t?void 0:t.some((function(e){return e.hasOrientSignalRef()})))}}]),e}(),YY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"vgField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(e);if(n)return pW(n,t)}},{key:"reduceFieldDef",value:function(e,t){return rV(this.getMapping(),(function(t,n,r){var a=SW(n);return a?e(t,a,r):t}),t)}},{key:"forEachFieldDef",value:function(e,t){nV(this.getMapping(),(function(t,n){var r=SW(t);r&&e(r,n)}),t)}}]),n}(XY),JY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a,i,o,u;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"value",null!==(u=s[1])&&void 0!==u?u:"density"],a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.density].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.density,n=mF(e,["density"]);return Object.assign({type:"kde",field:t},n)}}]),n}(K$),QY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).filter=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(qF(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(DF(this.filter))}},{key:"assemble",value:function(){var e=this,t=qF(this.filter).reduce((function(t,n){var r=e.filter[n],a=pW(r,{expr:"datum"});return null!==r&&("temporal"===r.type?t.push("(isDate(".concat(a,") || (isValid(").concat(a,") && isFinite(+").concat(a,")))")):"quantitative"===r.type&&(t.push("isValid(".concat(a,")")),t.push("isFinite(+".concat(a,")")))),t}),[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}],[{key:"make",value:function(e,t){var r=t.config,a=t.mark;if("filter"!==VW("invalid",t.markDef,r))return null;var i=t.reduceFieldDef((function(e,n,r){var i=lL(r)&&t.getScaleComponent(r);i&&(sU(i.get("type"))&&"count"!==n.aggregate&&!DM(a)&&(e[n.field]=n));return e}),{});return qF(i).length?new n(e,i):null}}]),n}(K$),ZY=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var i=a.transform,o=i.flatten,u=i.as,s=void 0===u?[]:u;return a.transform.as=o.map((function(e,t){var n;return null!==(n=s[t])&&void 0!==n?n:e})),a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(this.parent,AF(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}]),n}(K$),eJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a,i,o,u;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"key",null!==(u=s[1])&&void 0!==u?u:"value"],a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}]),n}(K$),tJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;return Object(cy.a)(this,n),(o=t.call(this,e)).fields=r,o.geojson=a,o.signal=i,o}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var e,t=(null!==(e=this.fields)&&void 0!==e?e:[]).filter(hF);return new Set([].concat(Object(Ys.a)(this.geojson?[this.geojson]:[]),Object(Ys.a)(t)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(DF(this.fields))}},{key:"assemble",value:function(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;for(var r=0,a=0,i=[[fP,lP],[hP,dP]];a<i.length;a++){var o=i[a].map((function(e){var n=EW(t.encoding[e]);return tW(n)?n.field:rW(n)?{expr:"".concat(n.datum)}:sW(n)?{expr:"".concat(n.value)}:void 0}));(o[0]||o[1])&&(e=new n(e,o,null,t.getName("geojson_".concat(r++))))}if(t.channelHasField(gP)){var u=t.typedFieldDef(gP);u.type===MB&&(e=new n(e,null,u.field,t.getName("geojson_".concat(r++))))}return e}}]),n}(K$),nJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;return Object(cy.a)(this,n),(o=t.call(this,e)).projection=r,o.fields=a,o.as=i,o}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,this.projection,AF(this.fields),AF(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(hF))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(DF(this.fields)," ").concat(DF(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(e,t){if(!t.projectionName())return e;for(var r=0,a=[[fP,lP],[hP,dP]];r<a.length;r++){var i=a[r],o=i.map((function(e){var n=EW(t.encoding[e]);return tW(n)?n.field:rW(n)?{expr:"".concat(n.datum)}:sW(n)?{expr:"".concat(n.value)}:void 0})),u=i[0]===hP?"2":"";(o[0]||o[1])&&(e=new n(e,t.projectionName(),o,[t.getName("x"+u),t.getName("y"+u)]))}return e}}]),n}(K$),rJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.impute,this.transform.key].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(e){var t=e.start,n=void 0===t?0:t,r=e.stop,a=e.step,i=[n,r].concat(Object(Ys.a)(a?[a]:[])).join(",");return{signal:"sequence(".concat(i,")")}}},{key:"hash",value:function(){return"Impute ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e,t=this.transform,n=t.impute,r=t.key,a=t.keyvals,i=t.method,o=t.groupby,u=t.value,s=t.frame,c=void 0===s?[null,null]:s,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:r},a?{keyvals:(e=a,void 0!==(null===e||void 0===e?void 0:e.stop)?this.processSequence(a):a)}:{}),{method:"value"}),o?{groupby:o}:{}),{value:i&&"value"!==i?null:u});return i&&"value"!==i?[l,Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[i],fields:[n],frame:c,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:[l]}}],[{key:"makeFromTransform",value:function(e,t){return new n(e,t)}},{key:"makeFromEncoding",value:function(e,t){var r=t.encoding,a=r.x,i=r.y;if(tW(a)&&tW(i)){var o=a.impute?a:i.impute?i:void 0;if(void 0===o)return;var u=a.impute?i:i.impute?a:void 0,s=o.impute,c=s.method,l=s.value,f=s.frame,d=s.keyvals,h=aV(t.mark,r);return new n(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==d?{keyvals:d}:{}),h.length?{groupby:h}:{}))}return null}}]),n}(K$),aJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a,i,o,u;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.loess],a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.loess,this.transform.on].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.loess,n=e.on,r=mF(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}]),n}(K$),iJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a){var i;return Object(cy.a)(this,n),(i=t.call(this,e)).transform=r,i.secondary=a,i}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?uF(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(DF({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:uF(this.transform.as)}:{});else{var t=this.transform.as;hF(t)||($z(g.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(e,t,r,a){var i=t.component.data.sources,o=r.from,u=null;if(function(e){return"data"in e}(o)){var s=xJ(o.data,i);s||(s=new TX(o.data),i.push(s));var c=t.getName("lookup_".concat(a));u=new X$(s,c,"lookup",t.component.data.outputNodeRefCounts),t.component.data.outputNodes[c]=u}else if(function(e){return"selection"in e}(o)){var l=o.selection;if(r=Object.assign({as:l},r),!(u=t.getSelectionComponent(KF(l),l).materialized))throw new Error(g.noSameUnitLookup(l))}return new n(e,r,u.getSource())}}]),n}(K$),oJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a,i,o,u;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"prob",null!==(u=s[1])&&void 0!==u?u:"value"],a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.quantile].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.quantile,n=mF(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}]),n}(K$),uJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a,i,o,u;Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=AF(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.regression],a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.regression,this.transform.on].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.regression,n=e.on,r=mF(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}]),n}(K$),sJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"addDimensions",value:function(e){var t;this.transform.groupby=zF((null!==(t=this.transform.groupby)&&void 0!==t?t:[]).concat(e),(function(e){return e}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.pivot,this.transform.value].concat(Object(Ys.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.pivot,n=e.value,r=e.groupby,a=e.limit,i=e.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},void 0!==a?{limit:a}:{}),void 0!==i?{op:i}:{}),void 0!==r?{groupby:r}:{})}}]),n}(K$),cJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r){var a;return Object(cy.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(null,AF(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(DF(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(K$);function lJ(e){var t=0;return function n(r,a){var i,o,u;if(r instanceof TX&&(r.isGenerator||Gq(r.data)||(e.push(a),a={name:null,source:a.name,transform:[]})),r instanceof $X&&(r.parent instanceof TX&&!a.source?(a.format=Object.assign(Object.assign({},null!==(i=a.format)&&void 0!==i?i:{}),{parse:r.assembleFormatParse()}),(o=a.transform).push.apply(o,Object(Ys.a)(r.assembleTransforms(!0)))):(u=a.transform).push.apply(u,Object(Ys.a)(r.assembleTransforms()))),r instanceof BX){a.name||(a.name="data_".concat(t++)),!a.source||a.transform.length>0?(e.push(a),r.data=a.name):r.data=a.source;var s,c=Object(vo.a)(r.assemble());try{for(c.s();!(s=c.n()).done;){var l=s.value;e.push(l)}}catch(v){c.e(v)}finally{c.f()}}else{var f;if((r instanceof IX||r instanceof DX||r instanceof QY||r instanceof lK||r instanceof NK||r instanceof nJ||r instanceof tJ||r instanceof zX||r instanceof iJ||r instanceof XX||r instanceof GX||r instanceof eJ||r instanceof ZY||r instanceof JY||r instanceof aJ||r instanceof oJ||r instanceof uJ||r instanceof HX||r instanceof cJ||r instanceof sJ)&&a.transform.push(r.assemble()),r instanceof AX||r instanceof Y$||r instanceof rJ||r instanceof KX)(f=a.transform).push.apply(f,Object(Ys.a)(r.assemble()));if(r instanceof X$)if(a.source&&0===a.transform.length)r.setSource(a.source);else if(r.parent instanceof X$)r.setSource(a.name);else{if(a.name||(a.name="data_".concat(t++)),r.setSource(a.name),1===r.numChildren())e.push(a),a={name:null,source:a.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof X$&&(!a.source||a.transform.length>0)&&e.push(a);break;case 1:n(r.children[0],a);break;default:a.name||(a.name="data_".concat(t++));var d=a.name;!a.source||a.transform.length>0?e.push(a):d=a.source;var h,p=Object(vo.a)(r.children);try{for(p.s();!(h=p.n()).done;){n(h.value,{name:null,source:d,transform:[]})}}catch(v){p.e(v)}finally{p.f()}}}}}function fJ(e,t){var n,r,a,i=[],o=lJ(i),u=0,s=Object(vo.a)(e.sources);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.hasName()||(c.dataName="source_".concat(u++));var l=c.assemble();o(c,l)}}catch(A){s.e(A)}finally{s.f()}for(var f=0,d=i;f<d.length;f++){var h=d[f];0===h.transform.length&&delete h.transform}var p,v=0,m=Object(vo.a)(i.entries());try{for(m.s();!(p=m.n()).done;){var g=Object(mo.a)(p.value,2),b=g[0],y=g[1];0!==(null!==(n=y.transform)&&void 0!==n?n:[]).length||y.source||i.splice(v++,0,i.splice(b,1)[0])}}catch(A){m.e(A)}finally{m.f()}for(var w=0,x=i;w<x.length;w++){var O,k=x[w],j=Object(vo.a)(null!==(r=k.transform)&&void 0!==r?r:[]);try{for(j.s();!(O=j.n()).done;){var _=O.value;"lookup"===_.type&&(_.from=e.outputNodes[_.from].getSource())}}catch(A){j.e(A)}finally{j.f()}}for(var S=0,E=i;S<E.length;S++){var C=E[S];C.name in t&&(C.values=t[C.name])}return i}function dJ(e,t){var n,r=e.facet,a=e.config,i=e.child,o=e.component;if(e.channelHasField(t)){var u=r[t],s=RK("title",null,a,t),c=OW(u,a,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(c=tF(c)?c.join(", "):c,c+=" / "+i.component.layoutHeaders[t].title,i.component.layoutHeaders[t].title=null);var l=RK("labelOrient",u,a,t),f=iM((null!==(n=u.header)&&void 0!==n?n:{}).labels,a.header.labels,!0),d=FF(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]=Object(pt.a)({title:c,facetFieldDef:u},d,"facet"===t?[]:[hJ(e,t,f)])}}function hJ(e,t,n){var r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function pJ(e,t){var n,r,a=e.child;if(a.component.axes[t]){var i=e.component,o=i.layoutHeaders,u=i.resolve;if(u.axis[t]=tX(u,t),"shared"===u.axis[t]){var s,c="x"===t?"column":"row",l=o[c],f=Object(vo.a)(a.component.axes[t]);try{for(f.s();!(s=f.n()).done;){var d=s.value,h="top"===(r=d.get("orient"))||"left"===r||fB(r)?"header":"footer";l[h]=null!==(n=l[h])&&void 0!==n?n:[hJ(e,c,!1)];var p=mK(d,"main",e.config,{header:!0});p&&l[h][0].axes.push(p),d.mainExtracted=!0}}catch(v){f.e(v)}finally{f.f()}}}}function vJ(e){mJ(e);var t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";gJ(e,t),gJ(e,n)}function mJ(e){var t,n=Object(vo.a)(e.children);try{for(n.s();!(t=n.n()).done;){t.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function gJ(e,t){var n,r,a=QK(t),i=iL(a),o=e.component.resolve,u=e.component.layoutSize,s=Object(vo.a)(e.children);try{for(s.s();!(r=s.n()).done;){var c=r.value.component.layoutSize.getWithExplicit(a),l=o.scale[i];if("independent"===l&&"step"===c.value){n=void 0;break}if(n){if("independent"===l&&n.value!==c.value){n=void 0;break}n=$q(n,c,a,"")}else n=c}}catch(p){s.e(p)}finally{s.f()}if(n){var f,d=Object(vo.a)(e.children);try{for(d.s();!(f=d.n()).done;){var h=f.value;e.renameSignal(h.getName(a),e.getName(t)),h.component.layoutSize.set(a,"merged",!1)}}catch(p){d.e(p)}finally{d.f()}u.setWithExplicit(t,n)}else u.setWithExplicit(t,{explicit:!1,value:void 0})}function bJ(e,t){var n="width"===t?"x":"y",r=e.config,a=e.getScaleComponent(n);if(a){var i=a.get("type"),o=a.get("range");if(uU(i)){var u=qV(r.view,t);return dB(o)||zV(u)?"step":u}return WV(r.view,t)}if(e.hasProjection||"arc"===e.mark)return WV(r.view,t);var s=qV(r.view,t);return zV(s)?s.step:s}function yJ(e,t,n){return pW(t,Object.assign({suffix:"by_".concat(pW(e))},null!==n&&void 0!==n?n:{}))}var wJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o;return Object(cy.a)(this,n),(o=t.call(this,e,"facet",r,a,i,e.resolve)).child=XJ(e.spec,Object(zq.a)(o),o.getName("child"),void 0,i),o.children=[o.child],o.facet=o.initFacet(e.facet,i),o}return Object(ly.a)(n,[{key:"initFacet",value:function(e,t){return $U(e)?rV(e,(function(e,n,r){return FF([ZM,eP],r)?void 0===n.field?($z(g.emptyFieldDef(n,r)),e):(e[r]=CW(n,r,t),e):($z(g.incompatibleChannel(r,"facet")),e)}),{}):{facet:CW(e,"facet",t)}}},{key:"channelHasField",value:function(e){return!!this.facet[e]}},{key:"fieldDef",value:function(e){return this.facet[e]}},{key:"parseData",value:function(){this.component.data=kJ(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){mJ(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(e){var t,n=Object(vo.a)(BP);try{for(n.s();!(t=n.n()).done;)dJ(e,t.value)}catch(r){n.e(r)}finally{n.f()}pJ(e,"x"),pJ(e,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.child.assembleSelectionTopLevelSignals(e)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(e){return this.child.assembleSelectionData(e)}},{key:"getHeaderLayoutMixins",value:function(){var e,t,n,r,a={},i=Object(vo.a)(BP);try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=Object(vo.a)(PK);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=this.component.layoutHeaders[u],f=l[c],d=l.facetFieldDef;if(d){var h=RK("titleOrient",d,this.config,u);if(FF(["right","bottom"],h)){var p=DK(u,h);a.titleAnchor=null!==(e=a.titleAnchor)&&void 0!==e?e:{},a.titleAnchor[p]="end"}}if(null===f||void 0===f?void 0:f[0]){var v="row"===u?"height":"width",m="header"===c?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(v)||(a[m]=null!==(t=a[m])&&void 0!==t?t:{},a[m][u]=.5),l.title&&(a.offset=null!==(n=a.offset)&&void 0!==n?n:{},a.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(g){s.e(g)}finally{s.f()}}}catch(g){i.e(g)}finally{i.f()}return a}},{key:"assembleDefaultLayout",value:function(){var e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0,a="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(a="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:a})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}},{key:"assembleGroup",value:function(e){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:pW(this.facet.column,{prefix:"distinct"})}}}}:{}),Object(oq.a)(Object(uq.a)(n.prototype),"assembleGroup",this).call(this,e)):Object(oq.a)(Object(uq.a)(n.prototype),"assembleGroup",this).call(this,e)}},{key:"getCardinalityAggregateForChild",value:function(){var e=[],t=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var a=pW(this.child.facet.column);e.push(a),t.push("distinct"),r.push("distinct_".concat(a))}}else{var i,o=Object(vo.a)(tL);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=this.child.component.scales[u];if(s&&!s.merged){var c=s.get("type"),l=s.get("range");if(uU(c)&&dB(l)){var f=jY(_Y(this.child,u));f?(e.push(f),t.push("distinct"),r.push("distinct_".concat(f))):$z("Unknown field for ".concat(u,". Cannot calculate view size."))}}}}catch(d){o.e(d)}finally{o.f()}}return{fields:e,ops:t,as:r}}},{key:"assembleFacet",value:function(){var e,t=this.component.data.facetRoot,n=t.name,r=t.data,a=this.facet,i=a.row,o=a.column,u=this.getCardinalityAggregateForChild(),s=u.fields,c=u.ops,l=u.as,f=[],d=Object(vo.a)(BP);try{for(d.s();!(e=d.n()).done;){var h=e.value,p=this.facet[h];if(p){f.push(pW(p));var v=p.bin,m=p.sort;if(mL(v)&&f.push(pW(p,{binSuffix:"end"})),VU(m)){var g=m.field,b=m.op,y=void 0===b?zU:b,w=yJ(p,m);i&&o?(s.push(w),c.push("max"),l.push(w)):(s.push(g),c.push(y),l.push(w))}else if(tF(m)){var x=IK(p,h);s.push(x),c.push("max"),l.push(x)}}}}catch(k){d.e(k)}finally{d.f()}var O=!!i&&!!o;return Object.assign({name:n,data:r,groupby:f},O||s.length>0?{aggregate:Object.assign(Object.assign({},O?{cross:O}:{}),s.length?{fields:s,ops:c,as:l}:{})}:{})}},{key:"facetSortFields",value:function(e){var t=this.facet[e];return t?VU(t.sort)?[yJ(t,t.sort,{expr:"datum"})]:tF(t.sort)?[IK(t,e,{expr:"datum"})]:[pW(t,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(e){var t=this.facet[e];if(t){var n=t.sort;return[(VU(n)?n.order:!tF(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var e=this.facet,t=this.config;if(e.facet)return VK(e.facet,"facet",t);var n,r={row:["top","bottom"],column:["left","right"]},a=Object(vo.a)(MK);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e[i]){var o=RK("labelOrient",e[i],t,i);if(FF(r[i],o))return VK(e[i],i,t)}}}catch(u){a.e(u)}finally{a.f()}}},{key:"assembleMarks",value:function(){var e=this,t=this.child,n=function(e){var t,n=[],r=lJ(n),a=Object(vo.a)(e.children);try{for(a.s();!(t=a.n()).done;)r(t.value,{source:e.name,name:null,transform:[]})}catch(i){a.e(i)}finally{a.f()}return n}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),i=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},a?{title:a}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:BP.map((function(t){return e.facetSortFields(t)})).flat(),order:BP.map((function(t){return e.facetSortOrder(t)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(function(e,t){if(e.component.selection&&qF(e.component.selection).length){var n=pF(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:HT("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return yH(t)}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),n}(YY);function xJ(e,t){var n,r,a,i,o,u,s,c,l,f,d,h=Object(vo.a)(t);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=p.data;if((!e.name||!p.hasName()||e.name===p.dataName)&&((!(null===(n=e.format)||void 0===n?void 0:n.mesh)||!(null===(r=v.format)||void 0===r?void 0:r.feature))&&(!(null===(a=e.format)||void 0===a?void 0:a.feature)&&!(null===(i=v.format)||void 0===i?void 0:i.feature)||(null===(o=e.format)||void 0===o?void 0:o.feature)===(null===(u=v.format)||void 0===u?void 0:u.feature))&&(!(null===(s=e.format)||void 0===s?void 0:s.mesh)&&!(null===(c=v.format)||void 0===c?void 0:c.mesh)||(null===(l=e.format)||void 0===l?void 0:l.mesh)===(null===(f=v.format)||void 0===f?void 0:f.mesh))))if(Kq(e)&&Kq(v)){if(CF(e.values,v.values))return p}else if(Gq(e)&&Gq(v)){if(e.url===v.url)return p}else if(Xq(e)&&e.name===p.dataName)return p}}catch(m){h.e(m)}finally{h.f()}return null}function OJ(e,t){if(e.data||!e.parent){if(null===e.data){var n=new TX({values:[]});return t.push(n),n}var r=xJ(e.data,t);if(r)return Yq(e.data)||(r.data.format=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];LF(e,null!==o&&void 0!==o?o:{})}return e}({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;var a=new TX(e.data);return t.push(a),a}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function kJ(e){var t,n,r,a,i,o,u,s,c,l,f=OJ(e,e.component.data.sources),d=e.component.data,h=d.outputNodes,p=d.outputNodeRefCounts,v=e.parent?e.parent.component.data.ancestorParse.clone():new Hq,m=e.data;Yq(m)?(Jq(m)?f=new DX(f,m.sequence):Zq(m)&&(f=new IX(f,m.graticule)),v.parseNothing=!0):null===(null===(t=null===m||void 0===m?void 0:m.format)||void 0===t?void 0:t.parse)&&(v.parseNothing=!0),f=null!==(n=$X.makeExplicit(f,e,v))&&void 0!==n?n:f,f=new HX(f);var b=e.parent&&KY(e.parent);($Y(e)||HY(e))&&b&&(f=null!==(r=AX.makeFromEncoding(f,e))&&void 0!==r?r:f),e.transforms.length>0&&(f=function(e,t,n){var r,a,i,o=0,u=Object(vo.a)(t.transforms);try{for(u.s();!(i=u.n()).done;){var s=i.value,c=void 0,l=void 0;if(h$(s))l=e=new NK(e,s),c="derived";else if(n$(s)){var f=VX(s);l=e=null!==(r=$X.makeWithAncestors(e,{},f,n))&&void 0!==r?r:e,e=new lK(e,t,s.filter)}else if(p$(s))l=e=AX.makeFromTransform(e,s,t),c="number";else if(m$(s))c="date",void 0===n.getWithExplicit(s.field).value&&(e=new $X(e,Object(pt.a)({},s.field,c)),n.set(s.field,c,!1)),l=e=Y$.makeFromTransform(e,s);else if(g$(s))l=e=zX.makeFromTransform(e,s),c="number",FH(t)&&(e=new HX(e));else if(r$(s))l=e=iJ.make(e,t,s,o++),c="derived";else if(l$(s))l=e=new XX(e,s),c="number";else if(f$(s))l=e=new GX(e,s),c="number";else if(b$(s))l=e=KX.makeFromTransform(e,s),c="derived";else if(y$(s))l=e=new eJ(e,s),c="derived";else if(d$(s))l=e=new ZY(e,s),c="derived";else if(a$(s))l=e=new sJ(e,s),c="derived";else if(c$(s))e=new cJ(e,s);else if(v$(s))l=e=rJ.makeFromTransform(e,s),c="derived";else if(i$(s))l=e=new JY(e,s),c="derived";else if(o$(s))l=e=new oJ(e,s),c="derived";else if(u$(s))l=e=new uJ(e,s),c="derived";else{if(!s$(s)){$z(g.invalidTransformIgnored(s));continue}l=e=new aJ(e,s),c="derived"}if(l&&void 0!==c){var d,h=Object(vo.a)(null!==(a=l.producedFields())&&void 0!==a?a:[]);try{for(h.s();!(d=h.n()).done;){var p=d.value;n.set(p,c,!1)}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){u.e(v)}finally{u.f()}return e}(f,e,v));var y=function(e){var t={};if($Y(e)&&e.component.selection){var n,r=Object(vo.a)(qF(e.component.selection));try{for(r.s();!(n=r.n()).done;){var a,i=n.value,o=e.component.selection[i],u=Object(vo.a)(o.project.items);try{for(u.s();!(a=u.n()).done;){var s=a.value;!s.channel&&aM(s.field)>1&&(t[s.field]="flatten")}}catch(c){u.e(c)}finally{u.f()}}}catch(c){r.e(c)}finally{r.f()}}return t}(e),w=qX(e);f=null!==(a=$X.makeWithAncestors(f,{},Object.assign(Object.assign({},y),w),v))&&void 0!==a?a:f,$Y(e)&&(f=tJ.parseAll(f,e),f=nJ.parseAll(f,e)),($Y(e)||HY(e))&&(b||(f=null!==(i=AX.makeFromEncoding(f,e))&&void 0!==i?i:f),f=null!==(o=Y$.makeFromEncoding(f,e))&&void 0!==o?o:f,f=NK.parseAllForSortIndex(f,e));var x=e.getName(t$),O=new X$(f,x,t$,p);if(h[x]=O,f=O,$Y(e)){var k=zX.makeFromEncoding(f,e);k&&(f=k,FH(e)&&(f=new HX(f))),f=null!==(u=rJ.makeFromEncoding(f,e))&&void 0!==u?u:f,f=null!==(s=KX.makeFromEncoding(f,e))&&void 0!==s?s:f}$Y(e)&&(f=null!==(c=QY.make(f,e))&&void 0!==c?c:f);var j=e.getName(e$),_=new X$(f,j,e$,p);h[j]=_,f=_,$Y(e)&&function(e,t){IH(e,(function(n){var r=n.name,a=e.getName("lookup_".concat(r));e.component.data.outputNodes[a]=n.materialized=new X$(new lK(t,e,{selection:r}),a,"lookup",e.component.data.outputNodeRefCounts)}))}(e,_);var S=null;if(HY(e)){var E=e.getName("facet");f=null!==(l=function(e,t){var n=t.row,r=t.column;if(n&&r){for(var a=null,i=0,o=[n,r];i<o.length;i++){var u=o[i];if(VU(u.sort)){var s=u.sort,c=s.field,l=s.op;e=a=new GX(e,{joinaggregate:[{op:void 0===l?zU:l,field:c,as:yJ(u,u.sort,{forAs:!0})}],groupby:[pW(u)]})}}return a}return null}(f,e.facet))&&void 0!==l?l:f,S=new BX(f,e,E,_.getSource()),h[E]=S}return Object.assign(Object.assign({},e.component.data),{outputNodes:h,outputNodeRefCounts:p,raw:O,main:_,facetRoot:S,ancestorParse:v})}var jJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i){var o,u,s,c,l;return Object(cy.a)(this,n),o=t.call(this,e,"concat",r,a,i,e.resolve),"shared"!==(null===(s=null===(u=e.resolve)||void 0===u?void 0:u.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(l=null===(c=e.resolve)||void 0===c?void 0:c.axis)||void 0===l?void 0:l.y)||$z(g.CONCAT_CANNOT_SHARE_AXIS),o.children=o.getChildren(e).map((function(e,t){return XJ(e,Object(zq.a)(o),o.getName("concat_"+t),void 0,i)})),o}return Object(ly.a)(n,[{key:"parseData",value:function(){this.component.data=kJ(this);var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=Object(vo.a)(qF(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseAxesAndHeaders()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getChildren",value:function(e){return PV(e)?e.vconcat:LV(e)?e.hconcat:e.concat}},{key:"parseLayoutSize",value:function(){vJ(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(e){return e.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var e,t=KK(this),n=Object(vo.a)(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Ys.a)(r.assembleLayoutSignals()))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleMarks",value:function(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}},{key:"assembleDefaultLayout",value:function(){var e=this.layout.columns;return Object.assign(Object.assign({},null!=e?{columns:e}:{}),{bounds:"full",align:"each"})}}]),n}(XY);var _J=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},vM),{labelExpr:1,encode:1}),SJ=qF(_J),EJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(cy.a)(this,n),(e=t.call(this)).explicit=r,e.implicit=a,e.mainExtracted=i,e}return Object(ly.a)(n,[{key:"clone",value:function(){return new n(AF(this.explicit),AF(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}},{key:"hasOrientSignalRef",value:function(){return fB(this.explicit.orient)}}]),n}(Bq);var CJ={bottom:"top",top:"bottom",left:"right",right:"left"};function AJ(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var a=e[r],i=t[r];if(!!a!==!!i)return;if(a&&i){var o=a.getWithExplicit("orient"),u=i.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=TJ(a,i)}}return e}}function TJ(e,t){var n,r=Object(vo.a)(SJ);try{var a=function(){var r=n.value,a=$q(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",(function(e,t){switch(r){case"title":return YW(e,t);case"gridScale":return{explicit:e.explicit,value:iM(e.value,t.value)}}return qq(e,t,r,"axis")}));e.setWithExplicit(r,a)};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return e}function NJ(e,t,n,r,a){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(fB(n.labelAngle)?n.labelAngle:cM(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===TK(r,a))return!0}return e===n[t]}var IJ=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function DJ(e,t){var n,r,a,i=t.axis(e),o=new EJ,u=EW(t.encoding[e]),s=t.mark,c=t.config,l=(null===i||void 0===i?void 0:i.orient)||(null===(n=c["x"===e?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||function(e){return"x"===e?"bottom":"left"}(e),f=t.getScaleComponent(e).get("type"),d=kK(e,f,l,t.config),h=void 0!==i?!i:_K("disable",c,null===i||void 0===i?void 0:i.style,d).configValue;if(o.set("disable",h,void 0!==i),h)return o;var p,v=function(e,t,n,r,a){var i=null===t||void 0===t?void 0:t.labelAngle;if(void 0!==i)return fB(i)?i:cM(i);var o=_K("labelAngle",e.config,null===t||void 0===t?void 0:t.style,a).configValue;return void 0!==o?cM(o):n===nP&&FF([FB,DB],r.type)?270:void 0}(t,i=i||{},e,u,d),m={fieldOrDatumDef:u,axis:i,channel:e,model:t,scaleType:f,orient:l,labelAngle:v,mark:s,config:c},g=Object(vo.a)(SJ);try{for(g.s();!(p=g.n()).done;){var b=p.value,y=b in SK?SK[b](m):gM(b)?i[b]:void 0,w=void 0!==y,x=NJ(y,b,i,t,e);if(w&&x)o.set(b,y,x);else{var O=gM(b)&&"values"!==b?_K(b,t.config,i.style,d):{},k=O.configValue,j=void 0===k?void 0:k,_=O.configFrom,S=void 0===_?void 0:_,E=void 0!==j;w&&!E?o.set(b,y,x):("vgAxisConfig"!==S||IJ.has(b)&&E||dM(j)||fB(j))&&o.set(b,j,!1)}}}catch(T){g.e(T)}finally{g.f()}var C=null!==(a=i.encoding)&&void 0!==a?a:{},A=hM.reduce((function(n,r){var a;if(!o.hasAxisPart(r))return n;var i=ZK(null!==(a=C[r])&&void 0!==a?a:{},t),u="labels"===r?function(e,t,n){var r,a=e.encoding,i=e.config,o=null!==(r=EW(a[t]))&&void 0!==r?r:EW(a[YP(t)]),u=e.axis(t)||{},s=u.format,c=u.formatType;return CU(c)?Object.assign({text:IU({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n):n}(t,e,i):i;return void 0===u||VF(u)||(n[r]={update:u}),n}),{});return VF(A)||o.set("encode",A,!!i.encoding||void 0!==i.labelAngle),o}function RJ(e){var t,n=e.encoding,r=e.size,a=Object(vo.a)(tL);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=JP(i);zV(r[o])&&aW(n[i])&&(delete r[o],$z(g.stepDropped(o)))}}catch(u){a.e(u)}finally{a.f()}return r}function FJ(e,t,n,r){var a=r.graticule,i=MM(e)?Object.assign({},e):{type:e},o=VW("orient",i,n);if(i.orient=function(e,t,n){switch(e){case jM:case TM:case NM:case EM:case _M:case OM:return}var r=t.x,a=t.y,i=t.x2,o=t.y2;switch(e){case xM:if(tW(r)&&(gL(r.bin)||tW(a)&&a.aggregate&&!r.aggregate))return"vertical";if(tW(a)&&(gL(a.bin)||tW(r)&&r.aggregate&&!a.aggregate))return"horizontal";if(o||i){if(n)return n;if(!i&&(tW(r)&&r.type===IB&&!mL(r.bin)||iW(r)))return"horizontal";if(!o&&(tW(a)&&a.type===IB&&!mL(a.bin)||iW(a)))return"vertical"}case SM:if(i&&(!tW(r)||!gL(r.bin))&&o&&(!tW(a)||!gL(a.bin)))return;case wM:if(o)return tW(a)&&gL(a.bin)?"horizontal":"vertical";if(i)return tW(r)&&gL(r.bin)?"vertical":"horizontal";if(e===SM){if(r&&!a)return"vertical";if(a&&!r)return"horizontal"}case kM:case CM:var u=aW(r),s=aW(a);if(u&&!s)return"tick"!==e?"horizontal":"vertical";if(!u&&s)return"tick"!==e?"vertical":"horizontal";if(u&&s){var c=r,l=a,f=c.type===RB,d=l.type===RB;return f&&!d?"tick"!==e?"vertical":"horizontal":!f&&d?"tick"!==e?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==e?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(i.type,t,o),void 0!==o&&o!==i.orient&&$z(g.orientOverridden(i.orient,o)),"bar"===i.type&&i.orient){var u=VW("cornerRadiusEnd",i,n);if(void 0!==u){var s,c="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:zM[i.orient],l=Object(vo.a)(c);try{for(l.s();!(s=l.n()).done;){i[s.value]=u}}catch(f){l.e(f)}finally{l.f()}void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===VW("opacity",i,n)&&(i.opacity=function(e,t){if(FF([jM,CM,TM,NM],e)&&!QW(t))return.7;return}(i.type,t)),void 0===i.filled&&(i.filled=!a&&function(e,t){var n=qW("filled",e,t),r=e.type;return iM(n,r!==jM&&r!==kM&&r!==SM)}(i,n)),void 0===VW("cursor",i,n)&&(i.cursor=function(e,t,n){if(t.href||e.href||VW("href",e,n))return"pointer";return e.cursor}(i,t,n)),i}function MJ(e,t){e.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),T$("x",e,{defaultPos:"mid"})),T$("y",e,{defaultPos:"mid"})),E$("size",e)),E$("angle",e)),function(e,t,n){if(n)return{shape:{value:n}};return E$("shape",e)}(e,0,t))}function PJ(e){var t,n=e.config,r=e.markDef,a=r.orient,i="horizontal"===a?"width":"height",o=e.getScaleComponent("horizontal"===a?"x":"y"),u=null!==(t=VW("size",r,n,{vgChannel:i}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==u)return u;var s=o?o.get("range"):void 0;return s&&dB(s)&&dF(s.step)?3*s.step/4:3*VV(n.view,i)/4}var LJ={arc:{vgMark:"arc",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),T$("x",e,{defaultPos:"mid"})),T$("y",e,{defaultPos:"mid"})),L$(e,"radius","arc")),L$(e,"theta","arc"))}},area:{vgMark:"area",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),F$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),F$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),q$(e))}},bar:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),L$(e,"x","bar")),L$(e,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(e){return MJ(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(e){return Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},t&&tW(t)&&t.type===MB?{field:pW(t,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),L$(e,"x","image")),L$(e,"y","image")),x$(e,"url"))}},line:{vgMark:"line",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),T$("x",e,{defaultPos:"mid"})),T$("y",e,{defaultPos:"mid"})),E$("size",e,{vgChannel:"strokeWidth"})),q$(e))}},point:{vgMark:"symbol",encodeEntry:function(e){return MJ(e)}},rect:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),L$(e,"x","rect")),L$(e,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function(e){var t=e.markDef.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),F$("x",e,{defaultPos:"horizontal"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==t})),F$("y",e,{defaultPos:"vertical"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==t})),E$("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(e){return MJ(e,"square")}},text:{vgMark:"text",encodeEntry:function(e){var t=e.config;e.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),T$("x",e,{defaultPos:"mid"})),T$("y",e,{defaultPos:"mid"})),x$(e)),E$("size",e,{vgChannel:"fontSize"})),E$("angle",e)),$$("align",function(e,t,n){if(void 0===VW("align",e,n))return"center";return}(e.markDef,0,t))),$$("baseline",function(e,t,n){if(void 0===VW("baseline",e,n))return"middle";return}(e.markDef,0,t))),T$("radius",e,{defaultPos:null,isMidPoint:!0})),T$("theta",e,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,r=n.orient,a="horizontal"===r?"width":"height",i="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),T$("x",e,{defaultPos:"mid",vgChannel:"xc"})),T$("y",e,{defaultPos:"mid",vgChannel:"yc"})),E$("size",e,{defaultValue:PJ(e),vgChannel:a})),Object(pt.a)({},i,zW(VW("thickness",n,t))))}},trail:{vgMark:"trail",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W$(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),T$("x",e,{defaultPos:"mid"})),T$("y",e,{defaultPos:"mid"})),E$("size",e)),q$(e))}}};function zJ(e){return FF([kM,wM,AM],e.mark)?function(e){var t=aV(e.mark,e.encoding),n=VJ(e,{fromPrefix:t.length>0?BJ:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:BJ+e.requestDataName(e$),data:e.requestDataName(e$),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):FF([xM],e.mark)?function(e){var t=mB.some((function(t){return VW(t,e.markDef,e.config)}));if(e.stack&&!e.fieldDef("size")&&t){var n,r,a=VJ(e,{fromPrefix:UJ}),i=Object(mo.a)(a,1)[0],o=e.scaleName(e.stack.fieldChannel),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.vgField(e.stack.fieldChannel,t)},s=function(e,t){var n=[u({prefix:"min",suffix:"start",expr:t}),u({prefix:"max",suffix:"start",expr:t}),u({prefix:"min",suffix:"end",expr:t}),u({prefix:"max",suffix:"end",expr:t})];return"".concat(e,"(").concat(n.map((function(e){return"scale('".concat(o,"',").concat(e,")")})).join(","),")")};"x"===e.stack.fieldChannel?(n=Object.assign(Object.assign({},TF(i.encode.update,["y","yc","y2","height"].concat(Object(Ys.a)(mB)))),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},i.encode.update=Object.assign(Object.assign({},NF(i.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(n=Object.assign(Object.assign({},TF(i.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},i.encode.update=Object.assign(Object.assign({},NF(i.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var c,l=Object(vo.a)(mB);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=qW(f,e.markDef,e.config);i.encode.update[f]?(n[f]=i.encode.update[f],delete i.encode.update[f]):d&&(n[f]=zW(d)),d&&(i.encode.update[f]={value:0})}}catch(v){l.e(v)}finally{l.f()}var h=e.fieldDef(e.stack.groupbyChannel),p=pW(h)?[pW(h)]:[];return((null===h||void 0===h?void 0:h.bin)||(null===h||void 0===h?void 0:h.timeUnit))&&p.push(pW(h,{binSuffix:"end"})),(n=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(t,n){if(i.encode.update[n])return Object.assign(Object.assign({},t),Object(pt.a)({},n,i.encode.update[n]));var r=qW(n,e.markDef,e.config);return void 0!==r?Object.assign(Object.assign({},t),Object(pt.a)({},n,zW(r))):t}),n)).stroke&&(n.strokeForeground={value:!0},n.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(e$),name:UJ+e.requestDataName(e$),groupby:p,aggregate:{fields:[u({suffix:"start"}),u({suffix:"start"}),u({suffix:"end"}),u({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:n},marks:[{type:"group",encode:{update:r},marks:[i]}]}]}return VJ(e)}(e):VJ(e)}var BJ="faceted_path_";var UJ="stack_group_";function WJ(e){var t=e.encoding,n=e.stack,r=e.mark,a=e.markDef,i=e.config,o=t.order;if(!(!tF(o)&&sW(o)&&RF(o.value)||!o&&RF(VW("order",a,i)))){if((tF(o)||tW(o))&&!n)return GW(o,{expr:"datum"});if(DM(r)){var u="horizontal"===a.orient?"y":"x",s=t[u];if(tW(s)){var c=s.sort;return tF(c)?{field:pW(s,{prefix:u,suffix:"sort_index",expr:"datum"})}:VU(c)?{field:pW({aggregate:QW(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:WU(c)?{field:pW(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:pW(s,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function VJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=e.mark,r=e.markDef,a=e.config,i=iM(r.clip,qJ(e),$J(e)),o=WW(r),u=e.encoding.key,s=WJ(e),c=HJ(e),l=VW("aria",r,a),f=LJ[n].postEncodingTransform?LJ[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:LJ[n].vgMark},i?{clip:!0}:{}),o?{style:o}:{}),u?{key:u.field}:{}),s?{sort:s}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:t.fromPrefix+e.requestDataName(e$)},encode:{update:LJ[n].encodeEntry(e)}}),f?{transform:f}:{})]}function qJ(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function $J(e){var t=e.component.projection;return!(!t||t.isFit)||void 0}function HJ(e){if(!e.component.selection)return null;for(var t=qF(e.component.selection).length,n=t,r=e.parent;r&&0===n;)n=qF(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}var GJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a){var i,o,u,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;Object(cy.a)(this,n),(i=t.call(this,e,"unit",r,a,c,void 0,BV(e)?e.view:void 0)).specifiedScales={},i.specifiedAxes={},i.specifiedLegends={},i.specifiedProjection={},i.selection={},i.children=[];var l=MM(e.mark)?e.mark.type:e.mark;i.markDef=FJ(e.mark,null!==(o=e.encoding)&&void 0!==o?o:{},c,{graticule:e.data&&Zq(e.data)});var f=i.encoding=eV(null!==(u=e.encoding)&&void 0!==u?u:{},i.markDef,c);return i.size=RJ({encoding:f,size:BV(e)?Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):s}),i.stack=gq(l,f),i.specifiedScales=i.initScales(l,f),i.specifiedAxes=i.initAxes(f),i.specifiedLegends=i.initLegend(f),i.specifiedProjection=e.projection,i.selection=e.selection,i}return Object(ly.a)(n,[{key:"hasProjection",get:function(){var e=this.encoding,t=this.mark===IM,n=e&&MP.some((function(t){return oW(e[t])}));return t||n}},{key:"scaleDomain",value:function(e){var t=this.specifiedScales[e];return t?t.domain:void 0}},{key:"axis",value:function(e){return this.specifiedAxes[e]}},{key:"legend",value:function(e){return this.specifiedLegends[e]}},{key:"initScales",value:function(e,t){return cL.reduce((function(e,n){var r,a=EW(t[n]);return a&&(e[n]=null!==(r=a.scale)&&void 0!==r?r:{}),e}),{})}},{key:"initAxes",value:function(e){return tL.reduce((function(t,n){var r=e[n];if(oW(r)||n===nP&&oW(e.x2)||n===rP&&oW(e.y2)){var a=oW(r)?r.axis:void 0;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"initLegend",value:function(e){return uL.reduce((function(t,n){var r=EW(e[n]);if(r&&function(e){switch(e){case pP:case vP:case mP:case bP:case gP:case wP:case kP:case jP:return!0;case xP:case OP:case yP:return!1}}(n)){var a=r.legend;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"parseData",value:function(){this.component.data=kJ(this)}},{key:"parseLayoutSize",value:function(){!function(e){var t,n=e.size,r=e.component,a=Object(vo.a)(tL);try{for(a.s();!(t=a.n()).done;){var i=JP(t.value);if(n[i]){var o=n[i];r.layoutSize.set(i,zV(o)?"step":o,!0)}else{var u=bJ(e,i);r.layoutSize.set(i,u,!1)}}}catch(s){a.e(s)}finally{a.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(e,t){var n,r,a={},i=e.config.selection,o=Object(vo.a)(qF(null!==t&&void 0!==t?t:{}));try{var u=function(){var o=r.value,u=AF(t[o]),s=i[u.type],c=(s.fields,s.encodings,mF(s,["fields","encodings"]));for(var l in c)"encodings"===l&&u.fields||"fields"===l&&u.encodings||("mark"===l&&(u[l]=Object.assign(Object.assign({},c[l]),u[l])),void 0!==u[l]&&!0!==u[l]||(u[l]=null!==(n=c[l])&&void 0!==n?n:u[l]));var f=KF(o),d=a[f]=Object.assign(Object.assign({},u),{name:f,events:hF(u.on)?HT(u.on,"scope"):AF(u.on)});mH(d,(function(n){n.has(d)&&n.parse&&n.parse(e,d,u,t[o])}))};for(o.s();!(r=o.n()).done;)u()}catch(s){o.e(s)}finally{o.f()}return a}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=zJ(this)}},{key:"parseAxesAndHeaders",value:function(){var e;this.component.axes=(e=this,tL.reduce((function(t,n){return e.component.scales[n]&&(t[n]=[DJ(n,e)]),t}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(e){return function(e,t){var n=!1;return IH(e,(function(r,a){var i=r.name,o=pF(i+EH);if(0===t.filter((function(e){return e.name===i})).length){var u="global"===r.resolve?"union":r.resolve,s="multi"===r.type?", true)":")";t.push({name:r.name,update:"".concat(TH,"(").concat(o,", ").concat(pF(u)).concat(s)})}n=!0,a.topLevelSignals&&(t=a.topLevelSignals(e,r,t)),mH(r,(function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n&&0===t.filter((function(e){return"unit"===e.name})).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),yH(t)}(this,e)}},{key:"assembleSignals",value:function(){return[].concat(Object(Ys.a)(gK(this)),Object(Ys.a)((t=[],IH(e=this,(function(n,r){var a,i=n.name,o=r.modifyExpr(e,n);(a=t).push.apply(a,Object(Ys.a)(r.signals(e,n))),mH(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:i+AH,on:[{events:{signal:n.name+CH},update:"modify(".concat(pF(n.name+EH),", ").concat(o,")")}]})})),yH(t))));var e,t}},{key:"assembleSelectionData",value:function(e){return function(e,t){var n=Object(Ys.a)(t);return IH(e,(function(t){var r={name:t.name+EH};if(t.init){var a=t.project.items.map((function(e){return e.signals,mF(e,["signals"])})),i=t.init.map((function(e){return gH(e,!1)}));r.values="interval"===t.type?[{unit:RH(e,{escape:!1}),fields:a,values:i}]:i.map((function(t){return{unit:RH(e,{escape:!1}),fields:a,values:t}}))}n.filter((function(e){return e.name===t.name+EH})).length||n.push(r)})),n}(this,e)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return KK(this)}},{key:"assembleMarks",value:function(){var e,t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&KY(this.parent)||(t=bH(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"mark",get:function(){return this.markDef.type}},{key:"channelHasField",value:function(e){return JW(this.encoding,e)}},{key:"fieldDef",value:function(e){return SW(this.encoding[e])}},{key:"typedFieldDef",value:function(e){var t=this.fieldDef(e);return uW(t)?t:null}}]),n}(YY),KJ=function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(e,r,a,i,o){var u;Object(cy.a)(this,n),u=t.call(this,e,"layer",r,a,o,e.resolve,e.view);var s=Object.assign(Object.assign(Object.assign({},i),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});return u.children=e.layer.map((function(e,t){if(iq(e))return new n(e,Object(zq.a)(u),u.getName("layer_"+t),s,o);if(WM(e))return new GJ(e,Object(zq.a)(u),u.getName("layer_"+t),s,o);throw new Error(g.invalidSpec(e))})),u}return Object(ly.a)(n,[{key:"parseData",value:function(){this.component.data=kJ(this);var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseLayoutSize",value:function(){var e;mJ(e=this),gJ(e,"width"),gJ(e,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=Object(vo.a)(qF(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(vo.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(e){var t,n,r=e.component,a=r.axes,i=r.resolve,o={top:0,bottom:0,right:0,left:0},u=Object(vo.a)(e.children);try{for(u.s();!(n=u.n()).done;){var s=n.value;s.parseAxesAndHeaders();var c,l=Object(vo.a)(qF(s.component.axes));try{for(l.s();!(c=l.n()).done;){var f=c.value;i.axis[f]=tX(e.component.resolve,f),"shared"===i.axis[f]&&(a[f]=AJ(a[f],s.component.axes[f]),a[f]||(i.axis[f]="independent",delete a[f]))}}catch(C){l.e(C)}finally{l.f()}}}catch(C){u.e(C)}finally{u.f()}var d,h=Object(vo.a)(tL);try{for(h.s();!(d=h.n()).done;){var p,v=d.value,m=Object(vo.a)(e.children);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g.component.axes[v]){if("independent"===i.axis[v]){a[v]=(null!==(t=a[v])&&void 0!==t?t:[]).concat(g.component.axes[v]);var b,y=Object(vo.a)(g.component.axes[v]);try{for(y.s();!(b=y.n()).done;){var w=b.value,x=w.getWithExplicit("orient"),O=x.value,k=x.explicit;if(!fB(O)){if(o[O]>0&&!k){var j=CJ[O];o[O]>o[j]&&w.set("orient",j,!1)}o[O]++}}}catch(C){y.e(C)}finally{y.f()}}delete g.component.axes[v]}}}catch(C){m.e(C)}finally{m.f()}if("independent"===i.axis[v]&&a[v]&&a[v].length>1){var _,S=Object(vo.a)(a[v]);try{for(S.s();!(_=S.n()).done;){var E=_.value;E.get("grid")&&!E.explicit.grid&&(E.implicit.grid=!1)}}catch(C){S.e(C)}finally{S.f()}}}}catch(C){h.e(C)}finally{h.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleSignals())}),gK(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),KK(this))}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleTitle",value:function(){var e=Object(oq.a)(Object(uq.a)(n.prototype),"assembleTitle",this).call(this);if(e)return e;var t,r=Object(vo.a)(this.children);try{for(r.s();!(t=r.n()).done;){if(e=t.value.assembleTitle())return e}}catch(a){r.e(a)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(e,t){var n,r=Object(vo.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;$Y(a)&&(t=bH(a,t))}}catch(i){r.e(i)}finally{r.f()}return t}(this,this.children.flatMap((function(e){return e.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),yX(this))}}]),n}(XY);function XJ(e,t,n,r,a){if(GU(e))return new wJ(e,t,n,a);if(iq(e))return new KJ(e,t,n,r,a);if(WM(e))return new GJ(e,t,n,r,a);if(function(e){return PV(e)||LV(e)||MV(e)}(e))return new jJ(e,t,n,a);throw new Error(g.invalidSpec(e))}function YJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.logger&&Vz(t.logger),t.fieldTitle&&wW(t.fieldTitle);try{var n=ZV(aF(t.config,e.config)),r=Rq(e,n),a=XJ(r,null,"",void 0,n);a.parse(),pY(a.component.data,a);var i=QJ(a,JJ(e,r.autosize,n,a),e.datasets,e.usermeta);return{spec:i,normalized:r}}finally{t.logger&&qz(),t.fieldTitle&&xW()}}function JJ(e,t,n,r){var a,i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):hF(t)&&(t={type:t}),i&&o&&("fit"===(a=t.type)||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)$z(g.droppingFit()),t.type="pad";else if("step"===i||"step"===o){var u="step"===i?"width":"height";$z(g.droppingFit(iL(u)));var s="width"===u?"height":"width";t.type=function(e){return e?"fit-".concat(iL(e)):"fit"}(s)}return Object.assign(Object.assign(Object.assign({},1===qF(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),Lq(n)),Lq(e))}function QJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=e.config?rq(e.config):void 0,i=[].concat(e.assembleSelectionData([]),fJ(e.component.data,n)),o=e.assembleProjections(),u=e.assembleTitle(),s=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0),l=e.assembleLayoutSignals();return l=l.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),u?{title:u}:{}),s?{style:s}:{}),c?{encode:{update:c}}:{}),{data:i}),o.length>0?{projections:o}:{}),e.assembleGroup([].concat(Object(Ys.a)(l),Object(Ys.a)(e.assembleSelectionTopLevelSignals([]))))),a?{config:a}:{}),r?{usermeta:r}:{})}var ZJ=new(function(e){Object(sq.a)(n,e);var t=Object(cq.a)(n);function n(){return Object(cy.a)(this,n),t.apply(this,arguments)}return Object(ly.a)(n,[{key:"mapUnit",value:function(e,t){var n=t.config;if(e.encoding){var r=e.encoding,a=e.transform,i=ZW(r,n),o=i.bins,u=i.timeUnits,s=i.aggregate,c=i.groupby,l=i.encoding,f=[].concat(Object(Ys.a)(a||[]),Object(Ys.a)(o),Object(Ys.a)(u),Object(Ys.a)(0===s.length?[]:[{aggregate:s,groupby:c}]));return Object.assign(Object.assign(Object.assign({},e),f.length>0?{transform:f}:{}),{encoding:l})}return e}}]),n}(lq));function eQ(e,t){return ZJ.map(e,{config:t})}var tQ=qR.version;var nQ=function(e){var t=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3),n=Object(mo.a)(t,2);return{library:n[0],version:n[1]}},rQ="#fff",aQ={background:"#333",title:{color:rQ,subtitleColor:rQ},style:{"guide-label":{fill:rQ},"guide-title":{fill:rQ}},axis:{domainColor:rQ,gridColor:"#888",tickColor:rQ}},iQ="#4572a7",oQ={background:"#fff",arc:{fill:iQ},area:{fill:iQ},line:{stroke:iQ,strokeWidth:2},path:{stroke:iQ},rect:{fill:iQ},shape:{stroke:iQ},symbol:{fill:iQ,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},uQ="#30a2da",sQ="#cbcbcb",cQ="#f0f0f0",lQ="#333",fQ={arc:{fill:uQ},area:{fill:uQ},axis:{domainColor:sQ,grid:!0,gridColor:sQ,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:sQ,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:cQ,group:{fill:cQ},legend:{labelColor:lQ,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:lQ,titleFontSize:14,titlePadding:10},line:{stroke:uQ,strokeWidth:2},path:{stroke:uQ,strokeWidth:.5},rect:{fill:uQ},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:uQ},bar:{binSpacing:2,fill:uQ,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},dQ="#000",hQ={group:{fill:"#e5e5e5"},arc:{fill:dQ},area:{fill:dQ},line:{stroke:dQ},path:{stroke:dQ},rect:{fill:dQ},shape:{stroke:dQ},symbol:{fill:dQ,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},pQ="Benton Gothic, sans-serif",vQ="#82c6df",mQ="Benton Gothic Bold, sans-serif",gQ="normal",bQ={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},yQ={background:"#ffffff",title:{anchor:"start",color:"#000000",font:mQ,fontSize:22,fontWeight:"normal"},arc:{fill:vQ},area:{fill:vQ},line:{stroke:vQ,strokeWidth:2},path:{stroke:vQ},rect:{fill:vQ},shape:{stroke:vQ},symbol:{fill:vQ,size:30},axis:{labelFont:pQ,labelFontSize:11.5,labelFontWeight:"normal",titleFont:mQ,titleFontSize:13,titleFontWeight:gQ},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:pQ,labelFontSize:11.5,symbolType:"square",titleFont:mQ,titleFontSize:13,titleFontWeight:gQ},range:{category:bQ["category-6"],diverging:bQ["fireandice-6"],heatmap:bQ["fire-7"],ordinal:bQ["fire-7"],ramp:bQ["fire-7"]}},wQ="#ab5787",xQ="#979797",OQ={background:"#f9f9f9",arc:{fill:wQ},area:{fill:wQ},line:{stroke:wQ},path:{stroke:wQ},rect:{fill:wQ},shape:{stroke:wQ},symbol:{fill:wQ,size:30},axis:{domainColor:xQ,domainWidth:.5,gridWidth:.2,labelColor:xQ,tickColor:xQ,tickWidth:.2,titleColor:xQ},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},kQ="#3e5c69",jQ={background:"#fff",arc:{fill:kQ},area:{fill:kQ},line:{stroke:kQ},path:{stroke:kQ},rect:{fill:kQ},shape:{stroke:kQ},symbol:{fill:kQ},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},_Q="#1696d2",SQ="#000000",EQ="Lato",CQ="Lato",AQ={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},TQ={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:EQ},axisX:{domain:!0,domainColor:SQ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:CQ,labelAngle:0,tickColor:SQ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:EQ},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:CQ,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:EQ,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:CQ,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:EQ,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:AQ["six-groups-cat-1"],diverging:AQ["diverging-colors"],heatmap:AQ["diverging-colors"],ordinal:AQ["six-groups-seq"],ramp:AQ["shades-blue"]},area:{fill:_Q},rect:{fill:_Q},line:{color:_Q,stroke:_Q,strokeWidth:5},trail:{color:_Q,stroke:_Q,strokeWidth:0,size:1},path:{stroke:_Q,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:_Q,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:_Q,stroke:null}},arc:{fill:_Q},shape:{stroke:_Q},symbol:{fill:_Q,size:30}},NQ="#3366CC",IQ="#ccc",DQ="Arial, sans-serif",RQ={arc:{fill:NQ},area:{fill:NQ},path:{stroke:NQ},rect:{fill:NQ},shape:{stroke:NQ},symbol:{stroke:NQ},circle:{fill:NQ},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:DQ,fontSize:12},"guide-title":{font:DQ,fontSize:12},"group-title":{font:DQ,fontSize:12}},title:{font:DQ,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:IQ,tickColor:IQ,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},FQ="2.10.0",MQ="vg-tooltip-element",PQ={offsetX:10,offsetY:10,id:MQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function LQ(e,t,n){if(Object(te.B)(e))return"[".concat(e.map((function(e){return t(Object(te.J)(e)?e:zQ(e,n))})).join(", "),"]");if(Object(te.H)(e)){var r="",a=e,i=a.title,o=a.image,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(a,["title","image"]);i&&(r+="<h2>".concat(t(i),"</h2>")),o&&(r+='<img src="'.concat(t(o),'">'));var s=Object.keys(u);if(s.length>0){r+="<table>";var c,l=Object(vo.a)(s);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=u[f];void 0!==d&&(Object(te.H)(d)&&(d=zQ(d,n)),r+='<tr><td class="key">'.concat(t(f),':</td><td class="value">').concat(t(d),"</td></tr>"))}}catch(h){l.e(h)}finally{l.f()}r+="</table>"}return r||"{}"}return t(e)}function zQ(e,t){return JSON.stringify(e,function(e){var t=[];return function(n,r){if("object"!==typeof r||null===r)return r;var a=t.indexOf(this)+1;return t.length=a,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var BQ=function(){function e(t){Object(cy.a)(this,e),this.options=Object.assign(Object.assign({},PQ),t);var n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(MQ,e)}(n);var a=document.head;a.childNodes.length>0?a.insertBefore(r,a.childNodes[0]):a.appendChild(r)}}return Object(ly.a)(e,[{key:"tooltipHandler",value:function(e,t,n,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null!=r&&""!==r){this.el.innerHTML=LQ(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var a=function(e,t,n,r){var a=e.clientX+n;a+t.width>window.innerWidth&&(a=+e.clientX-n-t.width);var i=e.clientY+r;return i+t.height>window.innerHeight&&(i=+e.clientY-r-t.height),{x:a,y:i}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),i=a.x,o=a.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(i,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),e}();function UQ(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function WQ(e,t,n){var r=e.open(t),a=new URL(t).origin,i=40;e.addEventListener("message",(function t(n){n.source===r&&(i=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){i<=0||(r.postMessage(n,a),setTimeout(e,250),i-=1)}),250)}var VQ,qQ='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function $Q(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];HQ(e,o)}return e}function HQ(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object(te.lb)(e,a,t[a],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var GQ=m,KQ=b,XQ="undefined"!==typeof window?window:void 0;void 0===KQ&&(null===(VQ=null===XQ||void 0===XQ?void 0:XQ.vl)||void 0===VQ?void 0:VQ.compile)&&(KQ=XQ.vl);var YQ={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},JQ={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},QQ={vega:"Vega","vega-lite":"Vega-Lite"},ZQ={vega:GQ.version,"vega-lite":KQ?KQ.version:"not available"},eZ={vega:function(e){return e},"vega-lite":function(e,t){return KQ.compile(e,{config:t}).spec}},tZ='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',nZ="chart-wrapper";function rZ(e){return"function"===typeof e}function aZ(e,t,n,r){var a="<html><head>".concat(t,'</head><body><pre><code class="json">'),i="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(a+e+i),o.document.title="".concat(QQ[r]," JSON Source")}function iZ(e,t){var n;if(e.$schema){var r=nQ(e.$schema);t&&t!==r.library&&console.warn("The given visualization spec is written in ".concat(QQ[r.library],", but mode argument sets ").concat(null!==(n=QQ[t])&&void 0!==n?n:t,"."));var a=r.library;return Object(ee.satisfies)(ZQ[a],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(QQ[a]," ").concat(r.version,", but the current version of ").concat(QQ[a]," is v").concat(ZQ[a],".")),a}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!==t&&void 0!==t?t:"vega"}function oZ(e){return(t=e)&&"load"in t?e:GQ.loader(e);var t}function uZ(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function sZ(e,t){var n;return UQ(this,void 0,void 0,x.a.mark((function r(){var a,i;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Object(te.J)(e.config)){r.next=8;break}return r.t1=JSON,r.next=4,t.load(e.config);case 4:r.t2=r.sent,r.t0=r.t1.parse.call(r.t1,r.t2),r.next=9;break;case 8:r.t0=null!==(n=e.config)&&void 0!==n?n:{};case 9:if(a=r.t0,!Object(te.J)(e.patch)){r.next=18;break}return r.t4=JSON,r.next=14,t.load(e.patch);case 14:r.t5=r.sent,r.t3=r.t4.parse.call(r.t4,r.t5),r.next=19;break;case 18:r.t3=e.patch;case 19:return i=r.t3,r.abrupt("return",Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),a?{config:a}:{}));case 21:case"end":return r.stop()}}),r)})))}function cZ(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}function lZ(e,t){var n,r,a,i,o,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;return UQ(this,void 0,void 0,x.a.mark((function l(){var f,d,h,p,v,m,g,b,w,O,k,j,_,S,E,C,A,T,N,I,D,R,F,M,P,L,B,U,W,V,q,$,H,G,K,X,Y,J,Q;return x.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(Q=function(){B&&document.removeEventListener("click",B),D.finalize()},f=s.theme?Object(te.P)(y[s.theme],null!==(n=s.config)&&void 0!==n?n:{}):s.config,d=Object(te.C)(s.actions)?s.actions:$Q({},YQ,null!==(r=s.actions)&&void 0!==r?r:{}),h=Object.assign(Object.assign({},JQ),s.i18n),p=null!==(a=s.renderer)&&void 0!==a?a:"canvas",v=null!==(i=s.logLevel)&&void 0!==i?i:GQ.Warn,m=null!==(o=s.downloadFileName)&&void 0!==o?o:"visualization",g="string"===typeof e?document.querySelector(e):e){l.next=10;break}throw new Error("".concat(e," does not exist"));case 10:return!1!==s.defaultStyle&&(b="vega-embed-style",w=cZ(g),O=w.root,k=w.rootContainer,O.getElementById(b)||((j=document.createElement("style")).id=b,j.innerText=void 0===s.defaultStyle||!0===s.defaultStyle?qQ.toString():s.defaultStyle,k.appendChild(j))),_=iZ(t,s.mode),S=eZ[_](t,f),"vega-lite"===_&&S.$schema&&(E=nQ(S.$schema),Object(ee.satisfies)(ZQ.vega,"^".concat(E.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(E.version,", but current version is v").concat(ZQ.vega,"."))),g.classList.add("vega-embed"),d&&g.classList.add("has-actions"),g.innerHTML="",C=g,d&&((A=document.createElement("div")).classList.add(nZ),g.appendChild(A),C=A),(T=s.patch)&&(S=T instanceof Function?T(S):z(S,T,!0,!1).newDocument),s.formatLocale&&GQ.formatLocale(s.formatLocale),s.timeFormatLocale&&GQ.timeFormatLocale(s.timeFormatLocale),N=s.ast,I=GQ.parse(S,"vega-lite"===_?{}:f,{ast:N}),D=new(s.viewClass||GQ.View)(I,Object.assign({loader:c,logLevel:v,renderer:p},N?{expr:GQ.expressionInterpreter}:{})),!1!==s.tooltip&&(R=rZ(s.tooltip)?s.tooltip:new BQ(!0===s.tooltip?{}:s.tooltip).call,D.tooltip(R)),void 0===(F=s.hover)&&(F="vega"===_),F&&(P=(M="boolean"===typeof F?{}:F).hoverSet,L=M.updateSet,D.hover(P,L)),s&&(null!=s.width&&D.width(s.width),null!=s.height&&D.height(s.height),null!=s.padding&&D.padding(s.padding)),l.next=33,D.initialize(C,s.bind).runAsync();case 33:if(!1!==d){if(U=g,!1!==s.defaultStyle&&((W=document.createElement("details")).title=h.CLICK_TO_VIEW_ACTIONS,g.append(W),U=W,(V=document.createElement("summary")).innerHTML=tZ,W.append(V),B=function(e){W.contains(e.target)||W.removeAttribute("open")},document.addEventListener("click",B)),q=document.createElement("div"),U.append(q),q.classList.add("vega-actions"),!0===d||!1!==d.export)for($=function(){var e=G[H];if(!0===d||!0===d.export||d.export[e]){var t=h["".concat(e.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=t,n.href="#",n.target="_blank",n.download="".concat(m,".").concat(e),n.addEventListener("mousedown",(function(t){return UQ(this,void 0,void 0,x.a.mark((function n(){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,D.toImageURL(e,s.scaleFactor);case 3:r=n.sent,this.href=r;case 5:case"end":return n.stop()}}),n,this)})))})),q.append(n)}},H=0,G=["svg","png"];H<G.length;H++)$();!0!==d&&!1===d.source||((K=document.createElement("a")).text=h.SOURCE_ACTION,K.href="#",K.addEventListener("click",(function(e){var n,r;aZ(Z()(t),null!==(n=s.sourceHeader)&&void 0!==n?n:"",null!==(r=s.sourceFooter)&&void 0!==r?r:"",_),e.preventDefault()})),q.append(K)),"vega-lite"!==_||!0!==d&&!1===d.compiled||((X=document.createElement("a")).text=h.COMPILED_ACTION,X.href="#",X.addEventListener("click",(function(e){var t,n;aZ(Z()(S),null!==(t=s.sourceHeader)&&void 0!==t?t:"",null!==(n=s.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),q.append(X)),!0!==d&&!1===d.editor||(Y=null!==(u=s.editorUrl)&&void 0!==u?u:"https://vega.github.io/editor/",(J=document.createElement("a")).text=h.EDITOR_ACTION,J.href="#",J.addEventListener("click",(function(e){WQ(window,Y,{config:f,mode:_,renderer:p,spec:Z()(t)}),e.preventDefault()})),q.append(J))}return l.abrupt("return",{view:D,spec:t,vgSpec:S,finalize:Q});case 35:case"end":return l.stop()}}),l)})))}t.default=function(e,t){var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return UQ(this,void 0,void 0,x.a.mark((function o(){var u,s,c,l,f,d;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!Object(te.J)(t)){o.next=9;break}return s=oZ(i.loader),o.t0=JSON,o.next=5,s.load(t);case 5:o.t1=o.sent,u=o.t0.parse.call(o.t0,o.t1),o.next=10;break;case 9:u=t;case 10:return c=uZ(u).loader,s&&!c||(s=oZ(null!==(n=i.loader)&&void 0!==n?n:c)),o.next=14,sZ(uZ(u),s);case 14:return l=o.sent,o.next=17,sZ(i,s);case 17:return f=o.sent,d=Object.assign(Object.assign({},$Q(f,l)),{config:Object(te.P)(null!==(r=f.config)&&void 0!==r?r:{},null!==(a=l.config)&&void 0!==a?a:{})}),o.next=21,lZ(e,u,d,s);case 21:return o.abrupt("return",o.sent);case 22:case"end":return o.stop()}}),o)})))}},function(e,t,n){"use strict";n.r(t),n.d(t,"validateUpdateShape",(function(){return i})),n.d(t,"validateInput",(function(){return o})),n.d(t,"calculateShapes",(function(){return u}));var r=n(14),a=n(20);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var u=0;u<n.rank-a;++u)if(n.shape[u+a]!==e[u+r])throw new Error(i+" updates.shape[".concat(u+a,"] (").concat(n.shape[u+a],") != shape[").concat(u+a,"] (").concat(e[u+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function u(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,u=n.length,s=1,c=o;c<u;++c)s*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:Object(a.O)(t.shape)/l,sliceSize:s,strides:[].concat(Object(r.a)(Object(a.j)(n.slice(0,o))),[1]),outputSize:Object(a.O)(n)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"assertParamsValid",(function(){return i})),n.d(t,"maskToAxes",(function(){return o})),n.d(t,"computeOutShape",(function(){return u})),n.d(t,"stridesWithElidedDims",(function(){return s})),n.d(t,"getNormalizedAxes",(function(){return f})),n.d(t,"startIndicesWithElidedDims",(function(){return d})),n.d(t,"stopIndicesWithElidedDims",(function(){return h})),n.d(t,"stridesForAxis",(function(){return p})),n.d(t,"startForAxis",(function(){return v})),n.d(t,"stopForAxis",(function(){return m})),n.d(t,"isSliceContinous",(function(){return g})),n.d(t,"computeFlatOffset",(function(){return b})),n.d(t,"parseSliceParams",(function(){return y})),n.d(t,"sliceInfo",(function(){return w}));var r=n(14),a=n(20);function i(e,t,n){var r=e.shape.length;a.b(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),a.b(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var i=function(i){a.b(t[i]+n[i]<=e.shape[i],(function(){return"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(t[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(e.shape[i],")")}))},o=0;o<r;++o)i(o)}function o(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function u(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function s(e,t,n,a){for(var i=Object(r.a)(e),o=i.length;o<a.length;o++)i.push(1);for(var u=0;u<n;u++)0===u?i[t]=1:(i.splice(t,0,1),i.pop());return i}function c(e,t,n){return n<=e?n:n-(t-1)}function l(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function f(e,t,n,r,a,i,o,u,c){var l=e.length,f=new Array(l),g=new Array(l),b=new Array(l);if(t.length&&n>0){var y=t[0],w=n+1;f=d(o,y,w,r,e),g=h(u,y,w,a,e),b=s(i,y,w,e)}else for(var x=0;x<l;x++)f[x]=v(o,r,i,e,x,c),g[x]=m(u,a,i,e,x,c),b[x]=p(i,x,c);return{begin:f,end:g,strides:b}}function d(e,t,n,a,i){for(var o=Object(r.a)(i),u=l(n,t),s=0;s<o.length;s++)if(u.indexOf(s)>-1)o[s]=0;else{var f=c(t,n,s),d=a[f];e&1<<f&&(d=0),o[s]=d}return o}function h(e,t,n,i,o){for(var u=Object(r.a)(o),s=l(n,t),f=0;f<u.length;f++)if(s.indexOf(f)>-1)u[f]=Number.MAX_SAFE_INTEGER;else{var d=c(t,n,f),h=i[d];e&1<<d&&(h=Number.MAX_SAFE_INTEGER),u[f]=h}for(var p=0;p<u.length;p++){var v=o[p];u[p]<0&&(u[p]+=v),u[p]=a.i(0,u[p],o[p])}return u}function p(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function v(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=a.i(0,u,c-1)}function m(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=s>0?a.i(0,u,c):a.i(-1,u,c-1)}function g(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function b(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function y(e,t,n){var i,o,u=e.shape.length;return(i="number"===typeof t?[t].concat(Object(r.a)(new Array(u-1).fill(0))):t.length<u?t.concat(new Array(u-t.length).fill(0)):t.slice()).forEach((function(e){a.b(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(u).fill(-1):"number"===typeof n?[n].concat(Object(r.a)(new Array(u-1).fill(-1))):n.length<u?n.concat(new Array(u-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(a.b(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-i[n])})),[i,o]}function w(e,t,n,r,a,i,s,c,l){var d=t.slice(),h=n.slice(),p=r;null==r&&(p=new Array(d.length));var v=o(s);if(v.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==s&&0!==c)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==s&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var m=e.length-d.length,g=o(c),b=e.slice();g.forEach((function(e){d[e]=0,h[e]=1,b.splice(e,0,1)}));var y=f(b,v,m,d,h,p,a,i,s),w=y.begin,x=y.end,O=y.strides;d=w,h=x,p=O;var k=o(l);k.forEach((function(e){h[e]=d[e]+1,p[e]=1}));var j=u(d,h,p),_=j.filter((function(e,t){return-1===k.indexOf(t)}));return{nonStrided:p.every((function(e){return 1===e})),$begin:d,$end:h,$strides:p,size:j,newShape:b,outShape:_}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({floorDiv_:function(e,t){var n=Object(u.a)(e,"a","floorDiv"),s=Object(u.a)(t,"b","floorDiv"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.ib,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(27),s=n(56),c=n(12),l=n(19);var f=Object(c.b)({avgPool_:function(e,t,n,c,f){var d=Object(i.a)(e,"x","avgPool","float32");o.b(s.h(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var h=d,p=!1;3===d.rank&&(p=!0,h=Object(l.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===h.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(h.rank,".")})),null!=f&&o.b(o.v(c),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(c,".")}));var v={x:h},m={filterSize:t,strides:n,pad:c,dimRoundingMode:f},g=r.a.runKernel(a.o,v,m);return g=Object(u.a)(g,d.dtype),p?Object(l.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({cos_:function(e){var t={x:Object(i.a)(e,"x","cos")};return r.a.runKernel(a.J,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=Object(i.a)(e,"x","cumsum"),s={x:u},c={axis:t,exclusive:n,reverse:o};return r.a.runKernel(a.M,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({elu_:function(e){var t={x:Object(i.a)(e,"x","elu")};return r.a.runKernel(a.X,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({floor_:function(e){var t={x:Object(i.a)(e,"x","floor")};return r.a.runKernel(a.hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({imag_:function(e){var t={input:Object(i.a)(e,"input","imag")};return r.a.runKernel(a.tb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Object(i.a)(e,"x","leakyRelu"),o={x:n},u={alpha:t};return r.a.runKernel(a.zb,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({less_:function(e,t){var n=Object(u.a)(e,"a","less","string_or_numeric"),c=Object(u.a)(t,"b","less","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Ab,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(7),a=n(20),i=n(30),o=n(70),u=n(71),s=n(118),c=n(112),l=n(12),f=n(19),d=n(31),h=n(34);var p=Object(l.b)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=Object(r.a)(e,"x","logSumExp"),p=Object(a.I)(t,l.shape),v=Object(c.a)(l,p,!0),m=Object(d.a)(l,v),g=Object(u.a)(m),b=Object(h.a)(g,p),y=Object(s.a)(b),w=Object(i.a)(Object(f.a)(v,y.shape),y);if(n){var x=Object(o.e)(w.shape,p);return Object(f.a)(w,x)}return w}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(37),u=n(12);var s=Object(u.b)({logicalOr_:function(e,t){var n=Object(i.a)(e,"a","logicalOr","bool"),u=Object(i.a)(t,"b","logicalOr","bool");Object(o.a)(n.shape,u.shape);var s={a:n,b:u};return r.a.runKernel(a.Ib,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(56),s=n(12),c=n(19);var l=Object(s.b)({maxPool_:function(e,t,n,s,l){var f=Object(i.a)(e,"x","maxPool"),d=f,h=!1;3===f.rank&&(h=!0,d=Object(c.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.b(4===d.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(d.rank,".")})),o.b(u.h(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),null!=l&&o.b(o.v(s),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var p={x:d},v={filterSize:t,strides:n,pad:s,dimRoundingMode:l},m=r.a.runKernel(a.Kb,p,v);return h?Object(c.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(27),l=n(12);var f=Object(l.b)({minimum_:function(e,t){var n=Object(u.a)(e,"a","minimum"),l=Object(u.a)(t,"b","minimum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),l=Object(c.a)(l,"int32")),Object(s.a)(n.shape,l.shape);var h={a:n,b:l};return a.a.runKernel(i.Sb,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({notEqual_:function(e,t){var n=Object(u.a)(e,"a","notEqual","string_or_numeric"),c=Object(u.a)(t,"b","notEqual","string_or_numeric"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.bc,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({prelu_:function(e,t){var n={x:Object(i.a)(e,"x","prelu"),alpha:Object(i.a)(t,"alpha","prelu")};return r.a.runKernel(a.ic,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({relu6_:function(e){var t={x:Object(i.a)(e,"x","relu6")};return r.a.runKernel(a.pc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(20),o=n(12);var u=Object(o.b)({fft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(20),a=n(99),i=n(59),o=n(187),u=n(12),s=n(169),c=n(19),l=n(49),f=n(101),d=n(125),h=n(41),p=n(197);var v=Object(u.b)({rfft_:function(e,t){Object(r.b)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,u=e.shape[e.shape.length-1],v=e.size/u;if(null!=t&&t<u){var m=e.shape.map((function(e){return 0})),g=e.shape.map((function(e){return e}));g[e.shape.length-1]=t,n=Object(l.a)(e,m,g),u=t}else if(null!=t&&t>u){var b=e.shape.map((function(e){return e}));b[e.shape.length-1]=t-u,n=Object(i.a)([e,Object(d.a)(b)],e.shape.length-1),u=t}else n=e;var y=Object(h.a)(n),w=Object(c.a)(Object(a.a)(n,y),[v,u]),x=Object(p.a)(w),O=Math.floor(u/2)+1,k=Object(s.a)(x),j=Object(o.a)(x),_=Object(f.a)(k,[O,u-O],k.shape.length-1),S=Object(f.a)(j,[O,u-O],j.shape.length-1),E=n.shape.slice();return E[n.shape.length-1]=O,Object(c.a)(Object(a.a)(_[0],S[0]),E)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(37),c=n(12);var l=Object(c.b)({squaredDifference_:function(e,t){var n=Object(u.a)(e,"a","squaredDifference"),c=Object(u.a)(t,"b","squaredDifference"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Sc,d,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({unsortedSegmentSum_:function(e,t,n){var u=Object(i.a)(e,"x","unsortedSegmentSum"),s=Object(i.a)(t,"segmentIds","unsortedSegmentSum","int32");Object(o.b)(Object(o.v)(n),(function(){return"numSegments must be of dtype int"}));var c={x:u,segmentIds:s},l={numSegments:n};return r.a.runKernel(a.id,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(7),a=n(20),i=n(74),o=n(70),u=n(112),s=n(167),c=n(12),l=n(89),f=n(19),d=n(36),h=n(68),p=n(47),v=n(34);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Object(i.a)(e);if(1!==e.rank&&null===n)return m(Object(f.a)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(v.a)(Object(i.a)(e),n);if(t===1/0)return Object(u.a)(Object(i.a)(e),n);if(t===-1/0)return Object(s.a)(Object(i.a)(e),n);if("euclidean"===t||2===t)return Object(h.a)(Object(v.a)(Object(l.a)(Object(i.a)(e),Object(d.a)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(u.a)(Object(v.a)(Object(i.a)(e),n[0]),n[1]-1);if(t===1/0)return Object(u.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if(t===-1/0)return Object(s.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(h.a)(Object(v.a)(Object(p.a)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var g=Object(c.b)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=m(e=Object(r.a)(e,"x","norm"),t,n),s=u.shape;if(i){var c=Object(a.I)(n,e.shape);s=o.e(u.shape,c)}return Object(f.a)(u,s)}})},function(e,t,n){"use strict";function r(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}n.d(t,"a",(function(){return r})),t.b=function(e){var t=e.length-1;return function(n){var a=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[a],o=e[a+1],u=a>0?e[a-1]:2*i-o,s=a<t-1?e[a+2]:2*o-i;return r((n-a/t)*t,u,i,o,s)}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(158),a=!1,i=!1;try{var o={get passive(){return a=!0},get once(){return i=a=!0}};r.a&&(window.addEventListener("test",o,o),window.removeEventListener("test",o,!0))}catch(u){}t.a=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!i){var o=r.once,u=r.capture,s=n;!i&&o&&(s=n.__once||function e(r){this.removeEventListener(t,e,u),n.call(this,r)},n.__once=s),e.addEventListener(t,s,a?r:u)}e.addEventListener(t,n,r)}},function(e,t,n){"use strict";var r=n(5),a=n.n(r).a.createContext(null);t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(20),o=n(12),u=n(19);var s=Object(o.b)({conv2DBackpropInput_:function(e,t,n,o,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0;i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var f=e,d=t,h=!1;3===t.rank&&(h=!0,d=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),f=[1,e[0],e[1],e[2]]),i.b(4===f.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(f.length,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.b(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var p="NHWC"===c?f[3]:f[1],v="NHWC"===c?d.shape[3]:d.shape[1];i.b(p===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(p,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.b(v===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(v,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=l&&i.b(i.v(s),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var m={dy:d,filter:n},g={strides:o,pad:s,dataFormat:c,dimRoundingMode:l,inputShape:f},b=r.a.runKernel(a.F,m,g);return h?Object(u.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.r(t),n.d(t,"TEST_EPSILON_FLOAT16",(function(){return u})),n.d(t,"expectArraysClose",(function(){return s})),n.d(t,"testEpsilon",(function(){return c})),n.d(t,"expectPromiseToFail",(function(){return f})),n.d(t,"expectArraysEqual",(function(){return d})),n.d(t,"expectNumbersClose",(function(){return h})),n.d(t,"expectValuesInRange",(function(){return v})),n.d(t,"expectArrayBuffersEqual",(function(){return m})),n.d(t,"encodeStrings",(function(){return g}));var r=n(13),a=n(7),i=n(20),o=n(24),u=.1;function s(e,t,n){return null==n&&(n=c()),l(e,t,(function(e,t){return p(e,t,n)}))}function c(){return 32===r.a.backend.floatPrecision()?.001:u}function l(e,t,n){var r=!0;if((Object(i.A)(e)||Object(i.A)(t))&&(r=!1),Object(i.A)(e)&&Object(i.A)(t)&&(r=!0),r){var o=e.constructor.name,u=t.constructor.name;if(o!==u)throw new Error("Arrays are of different type. Actual: ".concat(o,". ")+"Expected: ".concat(u))}if(Array.isArray(e)&&Array.isArray(t)){var s=Object(a.c)(e),c=Object(a.c)(t);if(!Object(i.a)(s,c))throw new Error("Arrays have different shapes. "+"Actual: [".concat(s,"]. Expected: [").concat(c,"]"))}var l=Object(i.A)(e)?e:Object(i.m)(e),f=Object(i.A)(t)?t:Object(i.m)(t);if(l.length!==f.length)throw new Error("Arrays have different lengths actual: ".concat(l.length," vs ")+"expected: ".concat(f.length,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."));for(var d=0;d<f.length;++d){var h=l[d],p=f[d];if(!n(h,p))throw new Error("Arrays differ: actual[".concat(d,"] = ").concat(h,", expected[").concat(d,"] = ").concat(p,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."))}}function f(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function d(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return Object(i.z)(e)||Object(i.z)(e[0])||Object(i.z)(t)||Object(i.z)(t[0])?l(e,n,(function(e,t){return e==t})):l(e,t,(function(e,t){return p(e,t,0)}))}function h(e,t,n){if(null==n&&(n=c()),!p(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function p(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function v(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function m(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function g(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?g(n):e[t]=Object(o.encodeString)(n)}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(292),a=n(291),i=n(157),o=n(293);function u(e){return Object(r.a)(e)||Object(a.a)(e)||Object(i.a)(e)||Object(o.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(20),o=n(12),u=n(19);var s=Object(o.b)({conv2DBackpropFilter_:function(e,t,n,o,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0,f=e;3===e.rank&&(f=Object(u.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var d=t;3===d.rank&&(d=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.b(4===f.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(f.shape,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.b(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var h="NHWC"===c?f.shape[3]:f.shape[1],p="NHWC"===c?d.shape[3]:d.shape[1];i.b(h===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(h,") must ")+"match input depth in filter (".concat(n[2],".")})),i.b(p===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(p,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=l&&i.b(i.v(s),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var v={x:f,dy:d},m={strides:o,pad:s,dataFormat:c,dimRoundingMode:l,filterShape:n};return r.a.runKernel(a.E,v,m)}})},function(e,t,n){"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=Math.PI/180,a=180/Math.PI},function(e,t,n){"use strict";n.r(t),n.d(t,"MENU_BACK_BUTTON_PRIORITY",(function(){return u})),n.d(t,"OVERLAY_BACK_BUTTON_PRIORITY",(function(){return o})),n.d(t,"blockHardwareBackButton",(function(){return a})),n.d(t,"startHardwareBackButton",(function(){return i}));var r=n(35),a=function(){document.addEventListener("backbutton",(function(){}))},i=function(){var e=document,t=!1;e.addEventListener("backbutton",(function(){if(!t){var n=0,a=[],i=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register:function(e,t){a.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(i);var o=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e&&e.handler?null==(t=e.handler(u))?[3,2]:[4,t]:[3,2];case 1:r.sent(),r.label=2;case 2:return[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return[2]}}))}))},u=function(){if(a.length>0){var e={priority:Number.MIN_SAFE_INTEGER,handler:function(){},id:-1};a.forEach((function(t){t.priority>=e.priority&&(e=t)})),t=!0,a=a.filter((function(t){return t.id!==e.id})),o(e).then((function(){return t=!1}))}};u()}}))},o=100,u=99},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=function(){function e(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}return e.prototype.createGesture=function(e){return new a(this,this.newID(),e.name,e.priority||0,!!e.disableScroll)},e.prototype.createBlocker=function(e){return void 0===e&&(e={}),new i(this,this.newID(),e.disable,!!e.disableScroll)},e.prototype.start=function(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)},e.prototype.capture=function(e,t,n){if(!this.start(e,t,n))return!1;var r=this.requestedStart,a=-1e4;if(r.forEach((function(e){a=Math.max(a,e)})),a===n){this.capturedId=t,r.clear();var i=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(i),!0}return r.delete(t),!1},e.prototype.release=function(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)},e.prototype.disableGesture=function(e,t){var n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)},e.prototype.enableGesture=function(e,t){var n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)},e.prototype.disableScroll=function(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(o)},e.prototype.enableScroll=function(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(o)},e.prototype.canStart=function(e){return void 0===this.capturedId&&!this.isDisabled(e)},e.prototype.isCaptured=function(){return void 0!==this.capturedId},e.prototype.isScrollDisabled=function(){return this.disabledScroll.size>0},e.prototype.isDisabled=function(e){var t=this.disabledGestures.get(e);return!!(t&&t.size>0)},e.prototype.newID=function(){return this.gestureId++,this.gestureId},e}(),a=function(){function e(e,t,n,r,a){this.id=t,this.name=n,this.disableScroll=a,this.priority=1e6*r+t,this.ctrl=e}return e.prototype.canStart=function(){return!!this.ctrl&&this.ctrl.canStart(this.name)},e.prototype.start=function(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)},e.prototype.capture=function(){if(!this.ctrl)return!1;var e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e},e.prototype.release=function(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))},e.prototype.destroy=function(){this.release(),this.ctrl=void 0},e}(),i=function(){function e(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}return e.prototype.block=function(){if(this.ctrl){if(this.disable)for(var e=0,t=this.disable;e<t.length;e++){var n=t[e];this.ctrl.disableGesture(n,this.id)}this.disableScroll&&this.ctrl.disableScroll(this.id)}},e.prototype.unblock=function(){if(this.ctrl){if(this.disable)for(var e=0,t=this.disable;e<t.length;e++){var n=t[e];this.ctrl.enableGesture(n,this.id)}this.disableScroll&&this.ctrl.enableScroll(this.id)}},e.prototype.destroy=function(){this.unblock(),this.ctrl=void 0},e}(),o="backdrop-no-scroll",u=new r},,,function(e,t,n){"use strict";(function(e){n(13);var t=n(250),r=n(43),a=Object(r.c)();a.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(function(){return t.isBrowser()})),a.registerFlag("IS_NODE",(function(){return"undefined"!==typeof e&&"undefined"!==typeof e.versions&&"undefined"!==typeof e.versions.node})),a.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),a.registerFlag("PROD",(function(){return!1})),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return a.getBool("DEBUG")})),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),a.registerFlag("IS_TEST",(function(){return!1})),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),a.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}))}).call(this,n(175))},function(e,t,n){"use strict";(function(e){var r=n(555),a=n(556),i=n(557);function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=d(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),a=(e=u(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|h(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?u(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|h(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){var i,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,d=0;d<s;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function w(e,t,n,r){return V(U(t,e.length-n),e,n,r)}function x(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return x(e,t,n,r)}function k(e,t,n,r){return V(W(t),e,n,r)}function j(e,t,n,r){return V(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function _(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,u,s,c=e[a],l=null,f=c>239?4:c>223?3:c>191?2:1;if(a+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(i=e[a+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=e[a+1],o=e[a+2],128===(192&i)&&128===(192&o)&&(s=(15&c)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=e[a+1],o=e[a+2],u=e[a+3],128===(192&i)&&128===(192&o)&&128===(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=f}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,a){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),u=Math.min(i,o),c=this.slice(r,a),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],o=l[f];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=B(e[i]);return a}function N(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function M(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,i){return i||M(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||M(e,0,n,8),a.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var a=t-e;n=new s(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=0,o=1,u=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=n-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=s.isBuffer(e)?e:U(new s(e,r).toString()),u=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%u]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function V(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(141))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.merge=t.$=t.style=t.presets=t.keyframes=t.fontFace=t.insertGlobal=t.insertRule=t.plugins=t.styleSheet=void 0,t.speedy=function(e){return f.speedy(e)},t.simulations=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];v=!!e},t.simulate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t=(0,o.default)(t)))return{};if(!v)return m||(console.warn("can't simulate without once calling simulations(true)"),m=!0),g||(console.warn("don't use simulation outside dev"),g=!0),{};return t.reduce((function(e,t){return e["data-simulate-"+y(t)]="",e}),{})},t.cssLabels=function(e){b=!!e},t.isLikeRule=x,t.idFor=O,t.css=q,t.rehydrate=function(e){(0,r.default)(A,e.reduce((function(e,t){return e[t]=!0,e}),{}))},t.flush=function(){A=f.inserted={},T=f.registered={},I={},f.flush(),f.inject()},t.select=H,t.parent=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return q(l({},e+" &",n))},t.media=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return q(l({},"@media "+e,n))},t.pseudo=G,t.active=function(e){return G(":active",e)},t.any=function(e){return G(":any",e)},t.checked=function(e){return G(":checked",e)},t.disabled=function(e){return G(":disabled",e)},t.empty=function(e){return G(":empty",e)},t.enabled=function(e){return G(":enabled",e)},t._default=function(e){return G(":default",e)},t.first=function(e){return G(":first",e)},t.firstChild=function(e){return G(":first-child",e)},t.firstOfType=function(e){return G(":first-of-type",e)},t.fullscreen=function(e){return G(":fullscreen",e)},t.focus=function(e){return G(":focus",e)},t.hover=function(e){return G(":hover",e)},t.indeterminate=function(e){return G(":indeterminate",e)},t.inRange=function(e){return G(":in-range",e)},t.invalid=function(e){return G(":invalid",e)},t.lastChild=function(e){return G(":last-child",e)},t.lastOfType=function(e){return G(":last-of-type",e)},t.left=function(e){return G(":left",e)},t.link=function(e){return G(":link",e)},t.onlyChild=function(e){return G(":only-child",e)},t.onlyOfType=function(e){return G(":only-of-type",e)},t.optional=function(e){return G(":optional",e)},t.outOfRange=function(e){return G(":out-of-range",e)},t.readOnly=function(e){return G(":read-only",e)},t.readWrite=function(e){return G(":read-write",e)},t.required=function(e){return G(":required",e)},t.right=function(e){return G(":right",e)},t.root=function(e){return G(":root",e)},t.scope=function(e){return G(":scope",e)},t.target=function(e){return G(":target",e)},t.valid=function(e){return G(":valid",e)},t.visited=function(e){return G(":visited",e)},t.dir=function(e,t){return G(":dir("+e+")",t)},t.lang=function(e,t){return G(":lang("+e+")",t)},t.not=function(e,t){var n=e.split(",").map((function(e){return e.trim()})).map((function(e){return":not("+e+")"}));if(1===n.length)return G(":not("+e+")",t);return H(n.join(""),t)},t.nthChild=function(e,t){return G(":nth-child("+e+")",t)},t.nthLastChild=function(e,t){return G(":nth-last-child("+e+")",t)},t.nthLastOfType=function(e,t){return G(":nth-last-of-type("+e+")",t)},t.nthOfType=function(e,t){return G(":nth-of-type("+e+")",t)},t.after=function(e){return G("::after",e)},t.before=function(e){return G("::before",e)},t.firstLetter=function(e){return G("::first-letter",e)},t.firstLine=function(e){return G("::first-line",e)},t.selection=function(e){return G("::selection",e)},t.backdrop=function(e){return G("::backdrop",e)},t.placeholder=function(e){return q({"::placeholder":e})},t.cssFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=(0,o.default)(t))?t.map((function(e){var t={label:[]};return L(t,{src:e}),C(w(t),E(t)).join("")})).join(""):""},t.attribsFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(t=(0,o.default)(t))?t.map((function(e){O(e);var t=Object.keys(e)[0];return t+'="'+(e[t]||"")+'"'})).join(" "):"";return r};var r=c(n(174)),a=n(620),i=n(402),o=c(n(629)),u=n(630),s=c(n(647));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=t.styleSheet=new a.StyleSheet;f.inject();var d=t.plugins=f.plugins=new u.PluginSet([u.prefixes,u.contentWrap,u.fallbacks]);d.media=new u.PluginSet,d.fontFace=new u.PluginSet,d.keyframes=new u.PluginSet([u.prefixes,u.fallbacks]);var h=!1,p="undefined"!==typeof window,v=h,m=!1,g=!1;var b=h;function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function w(e){var t=JSON.stringify(e),n=(0,s.default)(t).toString(36);return e.label&&e.label.length,n}function x(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));return 1===t.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function O(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));if(1!==t.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0]);if(!n)throw new Error("not a rule");return n[1]}var k=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function j(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],r=[],a=0;t=k.exec(e);)switch(t[0]){case"(":a++;break;case")":a--;break;case",":if(a)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function _(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=j(t).map((function(t){return t.indexOf("&")>=0?[t.replace(/\&/gm,".css-"+e),t.replace(/\&/gm,"[data-css-"+e+"]")].join(","):".css-"+e+t+",[data-css-"+e+"]"+t})).join(",");return v&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+y(t)+"],[data-css-"+e+"][data-simulate-"+y(t)+"]"),n}function S(e){var t=e.selector,n=e.style,r=d.transform({selector:t,style:n});return r.selector+"{"+(0,i.createMarkupForStyles)(r.style)+"}"}function E(e){var t=void 0,n=void 0,r=void 0,a=void 0;return Object.keys(e).forEach((function(i){i.indexOf("&")>=0?(n=n||{})[i]=e[i]:0===i.indexOf("@media")?(r=r||{})[i]=E(e[i]):0===i.indexOf("@supports")?(a=a||{})[i]=E(e[i]):"label"===i?e.label.length>0&&((t=t||{}).label=b?e.label.join("."):""):(t=t||{})[i]=e[i]})),{plain:t,selects:n,medias:r,supports:a}}function C(e,t){var n=[],r=t.plain,a=t.selects,i=t.medias,o=t.supports;return r&&n.push(S({style:r,selector:_(e)})),a&&Object.keys(a).forEach((function(t){return n.push(S({style:a[t],selector:_(e,t)}))})),i&&Object.keys(i).forEach((function(t){return n.push(t+"{"+C(e,i[t]).join("")+"}")})),o&&Object.keys(o).forEach((function(t){return n.push(t+"{"+C(e,o[t]).join("")+"}")})),n}var A=f.inserted={};var T=f.registered={};function N(e){T[e.id]||(T[e.id]=e)}var I={};function D(e){if(N(e),function(e){if(!A[e.id]){A[e.id]=!0;var t=E(e.style),n=C(e.id,t);A[e.id]=!!p||n,n.forEach((function(e){return f.insert(e)}))}}(e),I[e.id])return I[e.id];var t=l({},"data-css-"+e.id,b&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),I[e.id]=t,t}function R(e,t){var n=j(e).map((function(e){return e.indexOf("&")>=0?e:"&"+e}));return j(t).map((function(e){return e.indexOf("&")>=0?e:"&"+e})).reduce((function(e,t){return e.concat(n.map((function(e){return t.replace(/\&/g,e)})))}),[]).join(",")}function F(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function M(e){for(var t=[],n=0;n<e.length;n++)t=Array.isArray(e[n])?t.concat(M(e[n])):t.concat(e[n]);return t}var P={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function L(e,t){var n=t.selector,r=void 0===n?"":n,a=t.mq,i=void 0===a?"":a,u=t.supp,s=void 0===u?"":u,c=t.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),(l=M(l)).forEach((function(t){if(x(t)){var n=function(e){if(x(e)){var t=T[O(e)];if(null==t)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}(t);if("css"!==n.type)throw new Error("cannot merge this rule");t=n.style}(t=(0,o.default)(t))&&t.composes&&L(e,{selector:r,mq:i,supp:s,src:t.composes}),Object.keys(t||{}).forEach((function(n){if(function(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),a=0;a<t.length;a++)if(r===t[a]){n=!0;break}return n||e.indexOf("&")>=0}(n))P[n]&&P[n].forEach((function(a){return L(e,{selector:R(r,a),mq:i,supp:s,src:t[n]})})),L(e,{selector:R(r,n),mq:i,supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@media")}(n))L(e,{selector:r,mq:(o=i,u=n,o?"@media "+o.substring(6)+" and "+u.substring(6):u),supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@supports")}(n))L(e,{selector:r,mq:i,supp:F(s,n),src:t[n]});else if("composes"===n);else{var a=e;s&&(a[s]=a[s]||{},a=a[s]),i&&(a[i]=a[i]||{},a=a[i]),r&&(a[r]=a[r]||{},a=a[r]),"label"===n?b&&(e.label=e.label.concat(t.label)):a[n]=t[n]}var o,u}))}))}function z(e){var t={label:[]};return L(t,{src:e}),D({id:w(t),style:t,label:b?t.label.join("."):"",type:"css"})}var B={};Object.defineProperty(B,"toString",{enumerable:!1,value:function(){return"css-nil"}});var U="undefined"!==typeof WeakMap?[B,new WeakMap,new WeakMap,new WeakMap]:[B];var W,V="undefined"!==typeof WeakMap?(W=z,function(e){if(U[e.length]){for(var t=U[e.length],n=0;n<e.length-1;)t.has(e[n])||t.set(e[n],new WeakMap),t=t.get(e[n]),n++;if(t.has(e[e.length-1])){var r=t.get(e[n]);if(T[r.toString().substring(4)])return r}}var a=W(e);if(U[e.length]){for(var i=0,o=U[e.length];i<e.length-1;)o=o.get(e[i]),i++;try{o.set(e[i],a)}catch(u){}}return a}):z;function q(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return(t=(0,o.default)(t))?V(t):B}q.insert=function(e){var t={id:w(e),css:e,type:"raw"};N(t),A[t.id]||(f.insert(t.css),A[t.id]=!!p||[t.css])};t.insertRule=q.insert;q.global=function(e,t){if(t=(0,o.default)(t))return q.insert(S({selector:e,style:t}))};t.insertGlobal=q.global;q.keyframes=function(e,t){t||(t=e,e="animation");var n={id:w({name:e,kfs:t=(0,o.default)(t)||{}}),type:"keyframes",name:e,keyframes:t};return N(n),function(e){if(!A[e.id]){var t=Object.keys(e.keyframes).map((function(t){var n=d.keyframes.transform({id:e.id,name:t,style:e.keyframes[t]});return n.name+"{"+(0,i.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+e.name+"_"+e.id+"{"+t+"}"}));n.forEach((function(e){return f.insert(e)})),A[e.id]=!!p||n}}(n),e+"_"+n.id},q.fontFace=function(e){var t={id:w(e=(0,o.default)(e)),type:"font-face",font:e};return N(t),function(e){if(!A[e.id]){var t="@font-face{"+(0,i.createMarkupForStyles)(e.font)+"}";f.insert(t),A[e.id]=!!p||[t]}}(t),e.fontFamily};t.fontFace=q.fontFace,t.keyframes=q.keyframes;t.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var $=t.style=q;function H(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?q(l({},e,n)):$(n)}t.$=H;t.merge=q,t.compose=q;function G(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return q(l({},e,n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},,function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(3),a=n(11),i=function(){function e(t,n){Object(r.a)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Object(a.a)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"refCount",value:function(e){return u("refCount")}},{key:"incRef",value:function(e){return u("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return u("time")}},{key:"read",value:function(e){return u("read")}},{key:"readSync",value:function(e){return u("readSync")}},{key:"numDataIds",value:function(){return u("numDataIds")}},{key:"disposeData",value:function(e,t){return u("disposeData")}},{key:"write",value:function(e,t,n){return u("write")}},{key:"move",value:function(e,t,n,r,a){return u("move")}},{key:"memory",value:function(){return u("memory")}},{key:"floatPrecision",value:function(){return u("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return u("dispose")}}]),e}();function u(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(426),a=function(e){return e.Capacitor=e.Capacitor||new r.a}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}).Plugins}).call(this,n(141))},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({tanh_:function(e){var t={x:Object(i.a)(e,"x","tanh")};return r.a.runKernel(a.bd,t)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=1.7580993408473768,a=1.0507009873554805},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(29),a=n(5),i=n.n(a),o=n(53),u=n.n(o);t.a=function(e){return i.a.forwardRef((function(t,n){return i.a.createElement("div",Object(r.a)({},t,{ref:n,className:u()(t.className,e)}))}))}},function(e,t,n){"use strict";t.a=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)}},function(e,t,n){"use strict";function r(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m}));var r,a,i=0,o=0,u=0,s=0,c=0,l=0,f="object"===typeof performance&&performance.now?performance:Date,d="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return c||(d(p),c=f.now()+l)}function p(){c=0}function v(){this._call=this._time=this._next=null}function m(e,t,n){var r=new v;return r.restart(e,t,n),r}function g(){c=(s=f.now())+l,i=o=0;try{!function(){h(),++i;for(var e,t=r;t;)(e=c-t._time)>=0&&t._call.call(null,e),t=t._next;--i}()}finally{i=0,function(){var e,t,n=r,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r=t);a=e,y(i)}(),c=0}}function b(){var e=f.now(),t=e-s;t>1e3&&(l-=t,s=e)}function y(e){i||(o&&(o=clearTimeout(o)),e-c>24?(e<1/0&&(o=setTimeout(g,e-f.now()-l)),u&&(u=clearInterval(u))):(u||(s=f.now(),u=setInterval(b,1e3)),i=1,d(g)))}v.prototype=m.prototype={constructor:v,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?h():+n)+(null==t?0:+t),this._next||a===this||(a?a._next=this:r=this,a=this),this._call=e,this._time=n,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(29),a=n(45),i=n(53),o=n.n(i),u=n(33),s=n.n(u),c=n(5),l=n.n(c),f=n(309),d=n(171),h=(n(222),l.a.createContext(null));h.displayName="NavbarContext";var p=h,v=n(57),m=n(298),g=n(210);function b(e){var t=window.getComputedStyle(e);return{top:parseFloat(t.marginTop)||0,right:parseFloat(t.marginRight)||0,bottom:parseFloat(t.marginBottom)||0,left:parseFloat(t.marginLeft)||0}}var y=["bsPrefix","className","align","alignRight","rootCloseEvent","flip","show","renderOnMount","as","popperConfig"],w=s.a.oneOf(["left","right"]),x=s.a.oneOfType([w,s.a.shape({sm:w}),s.a.shape({md:w}),s.a.shape({lg:w}),s.a.shape({xl:w})]),O=l.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,u=e.align,s=e.alignRight,h=e.rootCloseEvent,w=e.flip,x=e.show,O=e.renderOnMount,k=e.as,j=void 0===k?"div":k,_=e.popperConfig,S=Object(a.a)(e,y),E=Object(c.useContext)(p),C=Object(v.a)(n,"dropdown-menu"),A=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(v.a)(void 0,"popover"),a=Object(v.a)(void 0,"dropdown-menu");return[Object(c.useCallback)((function(n){n&&(Object(g.a)(n,r)||Object(g.a)(n,a))&&(t.current=b(n),n.style.margin="0",e.current=n)}),[r,a]),[Object(c.useMemo)((function(){return{name:"offset",options:{offset:function(e){var n=e.placement;if(!t.current)return[0,0];var r=t.current,a=r.top,i=r.left,o=r.bottom,u=r.right;switch(n.split("-")[0]){case"top":return[0,o];case"left":return[0,u];case"bottom":return[0,a];case"right":return[0,i];default:return[0,0]}}}}}),[t]),Object(c.useMemo)((function(){return{name:"arrow",options:{padding:function(){if(!n.current)return 0;var e=n.current,t=e.top,r=e.right,a=t||r;return{top:a,left:a,right:a,bottom:a}}}}}),[n]),Object(c.useMemo)((function(){return{name:"popoverArrowMargins",enabled:!0,phase:"main",requiresIfExists:["arrow"],effect:function(t){var a=t.state;if(e.current&&a.elements.arrow&&Object(g.a)(e.current,r)){if(a.modifiersData["arrow#persistent"]){var i=b(a.elements.arrow),o=i.top,u=i.right,s=o||u;a.modifiersData["arrow#persistent"].padding={top:s,left:s,right:s,bottom:s}}else n.current=b(a.elements.arrow);return a.elements.arrow.style.margin="0",function(){a.elements.arrow&&(a.elements.arrow.style.margin="")}}}}}),[r])]]}(),T=A[0],N=A[1],I=[];if(u)if("object"===typeof u){var D=Object.keys(u);if(D.length){var R=D[0],F=u[R];s="left"===F,I.push(C+"-"+R+"-"+F)}}else"right"===u&&(s=!0);var M=Object(f.b)({flip:w,rootCloseEvent:h,show:x,alignEnd:s,usePopper:!E&&0===I.length,popperConfig:Object(r.a)({},_,{modifiers:N.concat((null==_?void 0:_.modifiers)||[])})}),P=M[0],L=M[1],z=L.hasShown,B=L.popper,U=L.show,W=L.alignEnd,V=L.toggle;if(P.ref=Object(d.a)(T,Object(d.a)(Object(m.a)(t,"DropdownMenu"),P.ref)),!z&&!O)return null;"string"!==typeof j&&(P.show=U,P.close=function(){return null==V?void 0:V(!1)},P.alignRight=W);var q=S.style;return null!=B&&B.placement&&(q=Object(r.a)({},S.style,P.style),S["x-placement"]=B.placement),l.a.createElement(j,Object(r.a)({},S,P,{style:q,className:o.a.apply(void 0,[i,C,U&&"show",W&&C+"-right"].concat(I))}))}));O.displayName="DropdownMenu",O.defaultProps={align:"left",alignRight:!1,flip:!0};t.b=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return Fo}));var r={};n.r(r),n.d(r,"abs",(function(){return qs.b})),n.d(r,"acos",(function(){return qs.c})),n.d(r,"acosh",(function(){return qs.d})),n.d(r,"add",(function(){return qs.e})),n.d(r,"addN",(function(){return qs.f})),n.d(r,"all",(function(){return qs.g})),n.d(r,"any",(function(){return qs.h})),n.d(r,"argMax",(function(){return qs.i})),n.d(r,"argMin",(function(){return qs.j})),n.d(r,"asin",(function(){return qs.k})),n.d(r,"asinh",(function(){return qs.l})),n.d(r,"atan",(function(){return qs.m})),n.d(r,"atan2",(function(){return qs.n})),n.d(r,"atanh",(function(){return qs.o})),n.d(r,"avgPool",(function(){return qs.p})),n.d(r,"avgPool3d",(function(){return qs.q})),n.d(r,"basicLSTMCell",(function(){return qs.r})),n.d(r,"batchToSpaceND",(function(){return qs.w})),n.d(r,"batchNorm",(function(){return qs.s})),n.d(r,"batchNorm2d",(function(){return qs.t})),n.d(r,"batchNorm3d",(function(){return qs.u})),n.d(r,"batchNorm4d",(function(){return qs.v})),n.d(r,"bincount",(function(){return qs.x})),n.d(r,"broadcastArgs",(function(){return qs.z})),n.d(r,"broadcastTo",(function(){return qs.A})),n.d(r,"buffer",(function(){return qs.B})),n.d(r,"cast",(function(){return qs.C})),n.d(r,"ceil",(function(){return qs.D})),n.d(r,"clipByValue",(function(){return qs.E})),n.d(r,"clone",(function(){return qs.F})),n.d(r,"complex",(function(){return qs.G})),n.d(r,"concat",(function(){return qs.H})),n.d(r,"concat1d",(function(){return qs.I})),n.d(r,"concat2d",(function(){return qs.J})),n.d(r,"concat3d",(function(){return qs.K})),n.d(r,"concat4d",(function(){return qs.L})),n.d(r,"conv1d",(function(){return qs.M})),n.d(r,"conv2d",(function(){return qs.N})),n.d(r,"conv2dTranspose",(function(){return qs.O})),n.d(r,"conv3d",(function(){return qs.P})),n.d(r,"conv3dTranspose",(function(){return qs.Q})),n.d(r,"cos",(function(){return qs.R})),n.d(r,"cosh",(function(){return qs.S})),n.d(r,"cumsum",(function(){return qs.U})),n.d(r,"denseBincount",(function(){return qs.V})),n.d(r,"depthToSpace",(function(){return qs.W})),n.d(r,"depthwiseConv2d",(function(){return qs.X})),n.d(r,"diag",(function(){return qs.Y})),n.d(r,"dilation2d",(function(){return qs.Z})),n.d(r,"div",(function(){return qs.ab})),n.d(r,"divNoNan",(function(){return qs.bb})),n.d(r,"dot",(function(){return qs.cb})),n.d(r,"einsum",(function(){return qs.eb})),n.d(r,"elu",(function(){return qs.fb})),n.d(r,"equal",(function(){return qs.hb})),n.d(r,"erf",(function(){return qs.ib})),n.d(r,"exp",(function(){return qs.jb})),n.d(r,"expandDims",(function(){return qs.kb})),n.d(r,"expm1",(function(){return qs.lb})),n.d(r,"eye",(function(){return qs.mb})),n.d(r,"fill",(function(){return qs.ob})),n.d(r,"floor",(function(){return qs.pb})),n.d(r,"floorDiv",(function(){return qs.qb})),n.d(r,"gather",(function(){return qs.sb})),n.d(r,"greater",(function(){return qs.ub})),n.d(r,"greaterEqual",(function(){return qs.vb})),n.d(r,"imag",(function(){return qs.xb})),n.d(r,"isFinite",(function(){return qs.Bb})),n.d(r,"isInf",(function(){return qs.Cb})),n.d(r,"isNaN",(function(){return qs.Db})),n.d(r,"leakyRelu",(function(){return qs.Eb})),n.d(r,"less",(function(){return qs.Fb})),n.d(r,"lessEqual",(function(){return qs.Gb})),n.d(r,"linspace",(function(){return qs.Ib})),n.d(r,"localResponseNormalization",(function(){return qs.Jb})),n.d(r,"log",(function(){return qs.Kb})),n.d(r,"log1p",(function(){return qs.Lb})),n.d(r,"logSigmoid",(function(){return qs.Mb})),n.d(r,"logSoftmax",(function(){return qs.Nb})),n.d(r,"logSumExp",(function(){return qs.Ob})),n.d(r,"logicalAnd",(function(){return qs.Pb})),n.d(r,"logicalNot",(function(){return qs.Qb})),n.d(r,"logicalOr",(function(){return qs.Rb})),n.d(r,"logicalXor",(function(){return qs.Sb})),n.d(r,"matMul",(function(){return qs.Ub})),n.d(r,"max",(function(){return qs.Vb})),n.d(r,"maxPool",(function(){return qs.Wb})),n.d(r,"maxPool3d",(function(){return qs.Xb})),n.d(r,"maxPoolWithArgmax",(function(){return qs.Yb})),n.d(r,"maximum",(function(){return qs.Zb})),n.d(r,"mean",(function(){return qs.ac})),n.d(r,"meshgrid",(function(){return qs.bc})),n.d(r,"min",(function(){return qs.cc})),n.d(r,"minimum",(function(){return qs.dc})),n.d(r,"mirrorPad",(function(){return qs.ec})),n.d(r,"mod",(function(){return qs.fc})),n.d(r,"moments",(function(){return qs.gc})),n.d(r,"mul",(function(){return qs.ic})),n.d(r,"multiRNNCell",(function(){return qs.jc})),n.d(r,"multinomial",(function(){return qs.kc})),n.d(r,"neg",(function(){return qs.lc})),n.d(r,"notEqual",(function(){return qs.nc})),n.d(r,"oneHot",(function(){return qs.oc})),n.d(r,"ones",(function(){return qs.pc})),n.d(r,"onesLike",(function(){return qs.qc})),n.d(r,"outerProduct",(function(){return qs.sc})),n.d(r,"pad",(function(){return qs.tc})),n.d(r,"pad1d",(function(){return qs.uc})),n.d(r,"pad2d",(function(){return qs.vc})),n.d(r,"pad3d",(function(){return qs.wc})),n.d(r,"pad4d",(function(){return qs.xc})),n.d(r,"pool",(function(){return qs.yc})),n.d(r,"pow",(function(){return qs.zc})),n.d(r,"prelu",(function(){return qs.Ac})),n.d(r,"print",(function(){return qs.Bc})),n.d(r,"prod",(function(){return qs.Cc})),n.d(r,"rand",(function(){return qs.Dc})),n.d(r,"randomGamma",(function(){return qs.Ec})),n.d(r,"randomNormal",(function(){return qs.Fc})),n.d(r,"randomUniform",(function(){return qs.Gc})),n.d(r,"range",(function(){return qs.Hc})),n.d(r,"real",(function(){return qs.Ic})),n.d(r,"reciprocal",(function(){return qs.Jc})),n.d(r,"relu",(function(){return qs.Kc})),n.d(r,"relu6",(function(){return qs.Lc})),n.d(r,"reshape",(function(){return qs.Mc})),n.d(r,"reverse",(function(){return qs.Nc})),n.d(r,"reverse1d",(function(){return qs.Oc})),n.d(r,"reverse2d",(function(){return qs.Pc})),n.d(r,"reverse3d",(function(){return qs.Qc})),n.d(r,"reverse4d",(function(){return qs.Rc})),n.d(r,"round",(function(){return qs.Tc})),n.d(r,"rsqrt",(function(){return qs.Uc})),n.d(r,"scalar",(function(){return qs.Vc})),n.d(r,"selu",(function(){return qs.Xc})),n.d(r,"separableConv2d",(function(){return qs.Yc})),n.d(r,"setdiff1dAsync",(function(){return qs.Zc})),n.d(r,"sigmoid",(function(){return qs.ad})),n.d(r,"sign",(function(){return qs.bd})),n.d(r,"sin",(function(){return qs.dd})),n.d(r,"sinh",(function(){return qs.ed})),n.d(r,"slice",(function(){return qs.fd})),n.d(r,"slice1d",(function(){return qs.gd})),n.d(r,"slice2d",(function(){return qs.hd})),n.d(r,"slice3d",(function(){return qs.id})),n.d(r,"slice4d",(function(){return qs.jd})),n.d(r,"softmax",(function(){return qs.kd})),n.d(r,"softplus",(function(){return qs.ld})),n.d(r,"spaceToBatchND",(function(){return qs.md})),n.d(r,"fft",(function(){return qs.nb})),n.d(r,"ifft",(function(){return qs.wb})),n.d(r,"irfft",(function(){return qs.Ab})),n.d(r,"rfft",(function(){return qs.Sc})),n.d(r,"split",(function(){return qs.qd})),n.d(r,"sqrt",(function(){return qs.rd})),n.d(r,"square",(function(){return qs.sd})),n.d(r,"squaredDifference",(function(){return qs.td})),n.d(r,"squeeze",(function(){return qs.ud})),n.d(r,"stack",(function(){return qs.vd})),n.d(r,"step",(function(){return qs.wd})),n.d(r,"stridedSlice",(function(){return qs.xd})),n.d(r,"sub",(function(){return qs.zd})),n.d(r,"sum",(function(){return qs.Ad})),n.d(r,"tan",(function(){return qs.Bd})),n.d(r,"tanh",(function(){return qs.Cd})),n.d(r,"tensor",(function(){return qs.Dd})),n.d(r,"tensor1d",(function(){return qs.Ed})),n.d(r,"tensor2d",(function(){return qs.Fd})),n.d(r,"tensor3d",(function(){return qs.Gd})),n.d(r,"tensor4d",(function(){return qs.Hd})),n.d(r,"tensor5d",(function(){return qs.Id})),n.d(r,"tensor6d",(function(){return qs.Jd})),n.d(r,"tile",(function(){return qs.Kd})),n.d(r,"topk",(function(){return qs.Ld})),n.d(r,"truncatedNormal",(function(){return qs.Nd})),n.d(r,"unique",(function(){return qs.Od})),n.d(r,"unsortedSegmentSum",(function(){return qs.Pd})),n.d(r,"unstack",(function(){return qs.Qd})),n.d(r,"variable",(function(){return qs.Rd})),n.d(r,"where",(function(){return qs.Sd})),n.d(r,"whereAsync",(function(){return qs.Td})),n.d(r,"zeros",(function(){return qs.Ud})),n.d(r,"zerosLike",(function(){return qs.Vd})),n.d(r,"booleanMaskAsync",(function(){return qs.y})),n.d(r,"transpose",(function(){return qs.Md})),n.d(r,"norm",(function(){return qs.mc})),n.d(r,"movingAverage",(function(){return qs.hc})),n.d(r,"scatterND",(function(){return qs.Wc})),n.d(r,"sparseToDense",(function(){return qs.od})),n.d(r,"gatherND",(function(){return qs.tb})),n.d(r,"dropout",(function(){return qs.db})),n.d(r,"enclosingPowerOfTwo",(function(){return qs.gb})),n.d(r,"cosineWindow",(function(){return qs.T})),n.d(r,"inTopKAsync",(function(){return qs.zb})),n.d(r,"op",(function(){return qs.rc})),n.d(r,"OP_SCOPE_SUFFIX",(function(){return qs.a})),n.d(r,"image",(function(){return qs.yb})),n.d(r,"linalg",(function(){return qs.Hb})),n.d(r,"losses",(function(){return qs.Tb})),n.d(r,"spectral",(function(){return qs.pd})),n.d(r,"fused",(function(){return qs.rb})),n.d(r,"signal",(function(){return qs.cd})),n.d(r,"sparse",(function(){return qs.nd})),n.d(r,"string",(function(){return qs.yd}));var a=n(0),i=n(4),o=n(8),u=n(27),s=n(22),c=n(127),l={kernelName:o.a,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(c.a)(Object(u.a)(n,"float32"),-1))}}}},f=n(32),d=n(55),h=n(36),p=n(68),v=n(47),m=n(31),g={kernelName:o.b,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(v.a)(Object(u.a)(n,"float32")),r=Object(p.a)(Object(m.a)(Object(h.a)(1),t));return Object(d.a)(Object(f.a)(e,r))}}}},b={kernelName:o.c,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(p.a)(Object(m.a)(Object(v.a)(Object(u.a)(n,"float32")),1));return Object(f.a)(e,t)}}}},y=n(37),w=n(19),x=n(34),O={kernelName:o.d,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=e,n=y.c(r.shape,o);return n.length>0&&(t=Object(x.a)(t,n)),Object(w.a)(t,r.shape)},b:function(){var t=e,n=y.c(a.shape,o);return n.length>0&&(t=Object(x.a)(t,n)),Object(w.a)(t,a.shape)}}}},k={kernelName:o.e,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},j=n(41),_={kernelName:o.h,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(j.a)(n)}}}},S={kernelName:o.i,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(j.a)(n)}}}},E={kernelName:o.j,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(p.a)(Object(m.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32")))))}}}},C=n(30),A={kernelName:o.k,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(p.a)(Object(C.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32"))));return Object(f.a)(e,t)}}}},T={kernelName:o.m,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(C.a)(Object(v.a)(r),Object(v.a)(a)),n=Object(s.a)(e,Object(f.a)(a,t)),i=Object(y.c)(r.shape,o);return i.length>0&&(n=Object(x.a)(n,i)),Object(w.a)(n,r.shape)},b:function(){var t=Object(C.a)(Object(v.a)(r),Object(v.a)(a)),n=Object(d.a)(Object(s.a)(e,Object(f.a)(r,t))),i=Object(y.c)(a.shape,o);return i.length>0&&(n=Object(x.a)(n,i)),Object(w.a)(n,a.shape)}}}},N={kernelName:o.l,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(C.a)(Object(v.a)(Object(u.a)(n,"float32")),1))}}}},I={kernelName:o.n,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(m.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32"))))}}}},D=n(13),R=n(7),F=n(20),M=n(12);var P=Object(M.b)({avgPool3dGrad_:function(e,t,n,r,a,i){var u=Object(R.a)(e,"dy","avgPool3dGrad"),s=Object(R.a)(t,"input","avgPool3dGrad"),c=u,l=s,f=!1;4===s.rank&&(f=!0,c=Object(w.a)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),l=Object(w.a)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F.b(5===c.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),F.b(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),null!=i&&F.b(F.v(a),(function(){return"Error in avgPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var d={dy:c,input:l},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=D.a.runKernel(o.q,d,h);return f?Object(w.a)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),L={kernelName:o.p,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.filterSize,o=n.strides,u=n.pad,s=n.dimRoundingMode;return{x:function(){return P(e,r,a,o,u,s)}}}};var z=Object(M.b)({avgPoolGrad_:function(e,t,n,r,a){var i=Object(R.a)(e,"dy","avgPoolGrad"),u=Object(R.a)(t,"input","avgPoolGrad");F.b(u.rank===i.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=u,c=i,l=!1;3===u.rank&&(l=!0,s=Object(w.a)(u,[1,u.shape[0],u.shape[1],u.shape[2]]),c=Object(w.a)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F.b(4===c.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,".")})),F.b(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var f={dy:c,input:s},d={filterSize:n,strides:r,pad:a},h=D.a.runKernel(o.r,f,d);return l?Object(w.a)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),B={kernelName:o.o,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.filterSize,o=n.strides,u=n.pad;return{x:function(){return z(e,r,a,o,u)}}}},U=n(46),W={kernelName:o.s,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.transposeA,s=n.transposeB;return u||s?!u&&s?{a:function(){return Object(U.a)(e,o,!1,!1)},b:function(){return Object(U.a)(e,a,!0,!1)}}:u&&!s?{a:function(){return Object(U.a)(o,e,!1,!0)},b:function(){return Object(U.a)(a,e,!1,!1)}}:{a:function(){return Object(U.a)(o,e,!0,!0)},b:function(){return Object(U.a)(e,a,!0,!0)}}:{a:function(){return Object(U.a)(e,o,!1,!0)},b:function(){return Object(U.a)(a,e,!0,!1)}}}},V=n(154),q={kernelName:o.t,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Object(V.a)(e,r,a)}}}},$={kernelName:o.w,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),u=a.length-1;u>=0;u--)if(a[u]===i[u])o[u]=1;else if(1!==a[u])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var s=[],c=0;c<o.length;c++)o[c]>1&&s.push(c);return{x:function(){return Object(x.a)(e,s,!0)}}}},H={kernelName:o.x,gradFunc:function(e){return{x:function(){return e.clone()}}}},G={kernelName:o.y,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},K=n(108),X=n(91),Y=n(100),J=n(62),Q={kernelName:o.z,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.clipValueMin,o=n.clipValueMax;return{x:function(){return Object(J.a)(Object(Y.a)(Object(K.a)(r,a),Object(X.a)(r,o)),e,Object(j.a)(e))}}}},Z={kernelName:o.B,inputsToSave:["x"],gradFunc:l.gradFunc},ee=n(101),te={kernelName:o.C,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,i=Object(F.I)(a,t[0].shape)[0],o=r.map((function(e){return e[i]}));return Object(ee.a)(e,o,i).map((function(e){return function(){return e}}))}},ne=n(209),re=n(206),ae=n(56),ie={kernelName:o.D,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.dilations,s=n.strides,c=n.pad,l=n.dataFormat;return F.b(ae.i(u),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")})),{x:function(){return Object(re.a)(a.shape,e,o,s,c,l)},filter:function(){return Object(ne.a)(a,e,o.shape,s,c,l)}}}},oe=n(107),ue={kernelName:o.F,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.strides,s=n.pad,c=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return Object(oe.a)(e,o,u,s,c,1,l)},filter:function(){return Object(ne.a)(e,a,o.shape,u,s,c,l)}}}};var se=Object(M.b)({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Object(w.a)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var u=t;4===u.rank&&(u=Object(w.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),F.b(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),F.b(5===u.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(u.shape,".")})),F.b(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),F.b(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),F.b(u.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(u.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:u},c={strides:r,pad:a,filterShape:n};return D.a.runKernel(o.H,s,c)}}),ce=n(301),le={kernelName:o.G,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad;F.b(Object(ae.i)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var u=Object(i.a)(t,2),s=u[0],c=u[1];return{x:function(){return Object(ce.a)(s.shape,e,c,a,o)},filter:function(){return se(s,e,c.shape,a,o)}}}},fe=n(278),de={kernelName:o.J,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(d.a)(Object(fe.a)(Object(u.a)(n,"float32"))),e)}}}},he=n(279),pe={kernelName:o.K,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(he.a)(Object(u.a)(n,"float32")),e)}}}},ve=n(70),me=n(184),ge=n(85),be={kernelName:o.M,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis,o=n.exclusive,u=n.reverse;return{x:function(){var t=Object(ve.f)([a],r.rank),n=Object(me.a)(e,a,o,!u);return null!=t&&(n=Object(ge.a)(n,t)),n}}}},ye=n(305),we=n(304),xe={kernelName:o.P,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad,u=n.dimRoundingMode,s=null==r?[1,1]:r;F.b(ae.i(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var c=Object(i.a)(t,2),l=c[0],f=c[1];return F.b(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),F.b(4===f.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(f.rank,".")})),F.b(l.shape[3]===f.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(f.shape[2],".")})),F.b(ae.h(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),null!=u&&F.b(F.v(o),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(u," but got pad ").concat(o,".")})),{x:function(){return Object(we.a)(l.shape,e,f,a,o,s,u)},filter:function(){return Object(ye.a)(l,e,f.shape,a,o,s,u)}}}},Oe={kernelName:o.T,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],u=r[1],s={x:a,filter:u,dy:e},c={x:a,filter:u,dy:e};return{x:function(){return D.a.runKernel(o.V,s,n)},filter:function(){return D.a.runKernel(o.U,c,n)}}}},ke={kernelName:o.X,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:Object(i.a)(t,1)[0]};return{x:function(){return D.a.runKernel(o.Y,n)}}}},je=n(71),_e={kernelName:o.ab,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0],r=Object(s.a)(Object(je.a)(Object(d.a)(Object(v.a)(n))),2/Math.sqrt(Math.PI));return{x:function(){return Object(s.a)(e,r)}}}},Se={kernelName:o.bb,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,n)}}}},Ee={kernelName:o.cb,inputsToSave:["input"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{input:function(){return Object(w.a)(e,n.shape)}}}},Ce={kernelName:o.db,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(je.a)(n))}}}},Ae={kernelName:o.hb,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},Te={kernelName:o.ib,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(f.a)(e,Object(u.a)(a,"float32")),n=Object(y.c)(r.shape,o);return n.length>0?Object(w.a)(Object(x.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=Object(y.c)(a.shape,o);n.length>0&&(t=Object(w.a)(Object(x.a)(t,n),a.shape));var i=Object(v.a)(a);return Object(d.a)(Object(f.a)(t,Object(u.a)(i,"float32")))}}}},Ne=n(275),Ie=n(111),De={kernelName:o.kb,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=Object(i.a)(t,4),o=a[0],u=a[1],c=a[2],l=a[3],f=null==l?Object(h.a)(1):l,d=Object(y.c)(u.shape,o.shape),p=[];if(1===u.rank){for(var v=0;v<o.shape.length-1;++v)p.push(o.shape[v]);p.push(1)}var g=Object(m.a)(o,u),b=Object(s.a)(e,f),O=Object(Ne.a)(Object(C.a)(c,Object(h.a)(r))),k=Object(s.a)(Object(s.a)(Object(s.a)(O,O),O),Object(h.a)(-.5));return{x:function(){return 1===u.rank?Object(w.a)(Object(s.a)(Object(s.a)(e,Object(Ie.a)(Object(w.a)(O,[1,1,1,u.shape[0]]),p)),f),o.shape):Object(w.a)(Object(s.a)(Object(s.a)(e,O),f),o.shape)},mean:function(){var e=Object(s.a)(Object(s.a)(O,Object(h.a)(-1)),b);return 1===u.rank&&(e=Object(x.a)(e,d)),Object(w.a)(e,u.shape)},variance:function(){var e=Object(s.a)(Object(s.a)(k,g),b);return 1===u.rank&&(e=Object(x.a)(e,d)),Object(w.a)(e,u.shape)},scale:function(){var t=Object(s.a)(g,O),n=Object(s.a)(e,t);return 1===u.rank&&(n=Object(x.a)(n,d)),Object(w.a)(n,u.shape)},offset:function(){var t=e;return 1===u.rank&&(t=Object(x.a)(t,d)),Object(w.a)(t,u.shape)}}}},Re=n(200),Fe={kernelName:o.ob,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.axis,s=Object(F.I)(u,a.shape)[0];return{x:function(){var t=a.shape,n=o.size,r=t.slice(0,s),i=r.length,c=t.slice(u,t.length).slice(1),l=c.length,f=Me(0,i),d=Me(i+1,i+1+l),h=Pe([r,[n],c]),p=Object(w.a)(e,h),v=Object(w.a)(o,[n]),m=Pe([[i],f,d]),g=Object(ge.a)(p,m),b=Object(Re.a)(g,v,a.shape[s]),y=Object(ve.h)(m);return b=Object(ge.a)(b,y)},indices:function(){return o}}}};function Me(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Pe(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Le={kernelName:o.qb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(j.a)(r)},b:function(){return Object(j.a)(a)}}}},ze={kernelName:o.sb,gradFunc:function(e){return{x:function(){return Object(u.a)(e,"float32")}}}},Be={kernelName:o.ub,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},Ue={kernelName:o.vb,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},We={kernelName:o.wb,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},Ve=n(73),qe={kernelName:o.zb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.alpha,o=Object(Ve.a)(r,0);return{x:function(){return Object(J.a)(o,e,Object(s.a)(e,a))}}}},$e={kernelName:o.Eb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(C.a)(n,1))}}}},He={kernelName:o.Db,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(u.a)(n,"float32"))}}}},Ge={kernelName:o.Fb,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis;return{logits:function(){var t=Object(je.a)(r);return Object(m.a)(e,Object(s.a)(Object(x.a)(e,a,!0),t))}}}};var Ke=Object(M.b)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},c={depthRadius:r,bias:a,alpha:i,beta:u};return D.a.runKernel(o.yb,s,c)}}),Xe={kernelName:o.xb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.depthRadius,s=n.bias,c=n.alpha,l=n.beta;return{x:function(){return Ke(a,o,e,u,s,c,l)}}}},Ye=n(151);function Je(e,t,n,r){return t.rank<n.rank&&(t=Object(w.a)(t,ve.e(t.shape,r))),e.rank<n.rank&&(e=Object(w.a)(e,ve.e(e.shape,r))),{x:function(){return Object(s.a)(e,Object(u.a)(Object(Ye.a)(n,t),e.dtype))}}}var Qe={kernelName:o.Jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Je(e,t[1],a,F.I(r,a.shape));return{x:function(){return i.x()}}}},Ze=n(189),et={kernelName:o.Pb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(s.a)(e,Object(u.a)(Object(K.a)(r,a),"float32"))},b:function(){return Object(s.a)(e,Object(u.a)(Object(Ze.a)(r,a),"float32"))}}}};var tt=Object(M.b)({maxPool3dGrad_:function(e,t,n,r,a,i,u){var s=Object(R.a)(e,"dy","maxPool3dGrad"),c=Object(R.a)(t,"input","maxPool3dGrad"),l=Object(R.a)(n,"output","maxPool3dGrad"),f=s,d=c,h=l,p=!1;4===c.rank&&(p=!0,f=Object(w.a)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Object(w.a)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=Object(w.a)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),F.b(5===f.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(f.rank,".")})),F.b(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),F.b(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),null!=u&&F.b(F.v(i),(function(){return"Error in maxPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(u," but got pad ").concat(i,".")}));var v={dy:f,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:u},g=D.a.runKernel(o.Mb,v,m);return p?Object(w.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),nt={kernelName:o.Lb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.filterSize,s=n.strides,c=n.pad,l=n.dimRoundingMode;return{x:function(){return tt(e,a,o,u,s,c,l)}}}};var rt=Object(M.b)({maxPoolGrad_:function(e,t,n,r,a,i,u){var s=Object(R.a)(e,"dy","maxPoolGrad"),c=Object(R.a)(t,"input","maxPoolGrad"),l=Object(R.a)(n,"output","maxPoolGrad");F.b(c.rank===s.rank,(function(){return"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),F.b(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),F.b(4===c.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,".")})),null!=u&&F.b(F.v(i),(function(){return"Error in maxPoolGrad: pad must be an integer when using, "+"dimRoundingMode ".concat(u," but got pad ").concat(i,".")}));var f={dy:s,input:c,output:l},d={filterSize:r,strides:a,pad:i,dimRoundingMode:u};return D.a.runKernel(o.Nb,f,d)}}),at={kernelName:o.Kb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.filterSize,s=n.strides,c=n.pad;return{x:function(){return rt(e,a,o,u,s,c)}}}},it=n(90),ot={kernelName:o.Qb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis,o=F.I(a,r.shape),u=Object(ve.d)(r.shape,o)[1],c=F.O(u);return{x:function(){var t=r.shape.slice();o.forEach((function(e){t[e]=1}));var n=Object(w.a)(e,t);return Object(f.a)(Object(s.a)(n,Object(it.a)(r.shape,"float32")),c)}}}},ut={kernelName:o.Rb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=Object(i.a)(t,2),o=a[0],u=Je(e,a[1],o,F.I(r,o.shape));return{x:function(){return u.x()}}}},st={kernelName:o.Sb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(s.a)(e,Object(u.a)(Object(X.a)(r,a),"float32"))},b:function(){return Object(s.a)(e,Object(u.a)(Object(Ve.a)(r,a),"float32"))}}}},ct=n(49),lt={kernelName:o.Tb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(ct.a)(e,a,r.shape)}}}},ft=n(186),dt={kernelName:o.Ub,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(y.c)(r.shape,o);return t.length>0?Object(w.a)(Object(x.a)(e,t),r.shape):e},b:function(){var t=Object(s.a)(e,Object(d.a)(Object(ft.a)(Object(f.a)(r,a)))),n=Object(y.c)(a.shape,o);return n.length>0?Object(w.a)(Object(x.a)(t,n),a.shape):t}}}},ht={kernelName:o.Wb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(s.a)(e,Object(u.a)(a,"float32")),n=Object(y.c)(r.shape,o);return n.length>0?Object(w.a)(Object(x.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=Object(y.c)(a.shape,o);return n.length>0?Object(w.a)(Object(x.a)(t,n),a.shape):t}}}},pt={kernelName:o.Xb,gradFunc:function(e){return{x:function(){return Object(d.a)(e)}}}},vt=n(125),mt={kernelName:o.cc,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Object(vt.a)(n.shape,"float32")}}}},gt={kernelName:o.dc,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},bt=n(128),yt={kernelName:o.ec,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Object(bt.a)(e,r).map((function(e){return function(){return e}}))}},wt={kernelName:o.fc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(ct.a)(e,a,r.shape)}}}},xt=n(118),Ot=n(89),kt={kernelName:o.hc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,3),r=n[0],a=n[1],o=n[2],c=r,l=a,f=y.a(c.shape,l.shape);return{a:function(){var t=Object(u.a)(l,"float32"),n=Object(s.a)(e,Object(s.a)(t,Object(Ot.a)(c,Object(m.a)(t,Object(h.a)(1))))),r=y.c(c.shape,f);return r.length>0&&(n=Object(x.a)(n,r)),Object(w.a)(n,c.shape)},b:function(){var t=Object(Ve.a)(c,0),n=Object(J.a)(t,Object(xt.a)(c),Object(j.a)(c)),r=Object(s.a)(e,Object(s.a)(o,n)),a=y.c(l.shape,f);return a.length>0&&(r=Object(x.a)(r,a)),Object(w.a)(r,l.shape)}}}},jt={kernelName:o.ic,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(Ve.a)(r,0);return{x:function(){return Object(J.a)(o,e,Object(s.a)(e,a))},alpha:function(){var t=Object(J.a)(o,Object(j.a)(e),Object(s.a)(e,r)),n=Object(y.c)(a.shape,e.shape);return n.length>0&&(t=Object(x.a)(t,n)),Object(w.a)(t,a.shape)}}}},_t={kernelName:o.mc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=Object(f.a)(e,Object(u.a)(a,"float32")),n=y.c(r.shape,o);return n.length>0?Object(w.a)(Object(x.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=y.c(a.shape,o);n.length>0&&(t=Object(w.a)(Object(x.a)(t,n),a.shape));var i=Object(v.a)(a);return Object(d.a)(Object(f.a)(t,Object(u.a)(i,"float32")))}}}},St={kernelName:o.nc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(d.a)(Object(v.a)(n)))}}}},Et={kernelName:o.pc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0],r=Object(s.a)(Object(X.a)(n,6),Object(c.a)(n));return{x:function(){return Object(s.a)(e,Object(u.a)(r,"float32"))}}}},Ct={kernelName:o.oc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(u.a)(Object(c.a)(n),"float32"))}}}},At={kernelName:o.qc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(w.a)(e,n.shape)}}}},Tt={kernelName:o.rc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(i.a)(t,1)[0]};return{images:function(){return D.a.runKernel(o.sc,r,n)}}}},Nt={kernelName:o.tc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(i.a)(t,1)[0]};return{images:function(){return D.a.runKernel(o.uc,r,n)}}}},It=n(82),Dt={kernelName:o.vc,gradFunc:function(e,t,n){var r=n.dims,a=Object(F.I)(r,e.shape);return{x:function(){return Object(It.a)(e,a)}}}},Rt={kernelName:o.xc,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},Ft={kernelName:o.yc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(d.a)(Object(f.a)(e,Object(s.a)(Object(Ot.a)(n,1.5),2)))}}}},Mt=n(153),Pt={kernelName:o.Ac,inputsToSave:["condition"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{condition:function(){return Object(u.a)(Object(j.a)(n),"float32")},t:function(){return Object(s.a)(e,Object(u.a)(n,e.dtype))},e:function(){return Object(s.a)(e,Object(u.a)(Object(Mt.a)(n),e.dtype))}}}},Lt=n(227),zt={kernelName:o.Bc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(Ve.a)(n,Object(h.a)(0)),r=Object(h.a)(Lt.b),a=Object(h.a)(Lt.a),i=Object(s.a)(e,a),o=Object(s.a)(Object(s.a)(e,r),Object(je.a)(Object(u.a)(n,"float32")));return Object(J.a)(t,i,o)}}}},Bt={kernelName:o.Cc,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(s.a)(n,Object(m.a)(Object(h.a)(1),n)))}}}},Ut={kernelName:o.Dc,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},Wt=n(183),Vt={kernelName:o.Ec,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(Wt.a)(Object(u.a)(n,"float32")),e)}}}},qt=n(260),$t={kernelName:o.Fc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(qt.a)(Object(u.a)(n,"float32")),e)}}}},Ht=n(92),Gt=n(180),Kt={kernelName:o.Gc,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=Object(i.a)(t,1)[0],a=n.begin,o=n.size,u=r.shape,s=Object(Gt.parseSliceParams)(r,a,o),c=Object(i.a)(s,2),l=c[0],f=c[1],d=[],h=0;h<e.rank;h++)d.push([l[h],u[h]-l[h]-f[h]]);return{x:function(){return Object(Ht.a)(e,d)}}}},Xt={kernelName:o.Hc,outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.dim,o=Object(s.a)(e,r);return{logits:function(){return Object(m.a)(o,Object(s.a)(Object(x.a)(o,[a],true),r))}}}},Yt=n(110),Jt={kernelName:o.Ic,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(Yt.a)(n))}}}},Qt=n(149),Zt={kernelName:o.Jc,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Object(Qt.a)(e,r,a)}}}},en=n(59),tn={kernelName:o.Pc,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Object(en.a)(e,r)}}}},nn={kernelName:o.Qc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(s.a)(Object(p.a)(Object(u.a)(n,"float32")),2))}}}},rn={kernelName:o.Rc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(s.a)(Object(u.a)(n,"float32"),2))}}}},an={kernelName:o.Sc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(h.a)(2);return{a:function(){return Object(s.a)(e,Object(s.a)(o,Object(m.a)(r,a)))},b:function(){return Object(s.a)(e,Object(s.a)(o,Object(m.a)(a,r)))}}}},on={kernelName:o.Tc,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},un={kernelName:o.Yc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=e,n=y.c(r.shape,o);return n.length>0&&(t=Object(x.a)(t,n)),Object(w.a)(t,r.shape)},b:function(){var t=e,n=y.c(a.shape,o);return n.length>0&&(t=Object(x.a)(t,n)),Object(w.a)(Object(d.a)(t),a.shape)}}}},sn={kernelName:o.Zc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=r.shape.slice(),o=n.axis;Object(F.I)(o,r.shape).forEach((function(e){a[e]=1}));var u=Object(w.a)(e,a),c=Object(s.a)(u,Object(it.a)(r.shape,"float32"));return{x:function(){return c}}}},cn={kernelName:o.ad,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(v.a)(Object(Wt.a)(n)))}}}},ln={kernelName:o.bd,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(m.a)(Object(h.a)(1),Object(v.a)(n)),e)}}}},fn={kernelName:o.cd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.reps;return{x:function(){var t=Object(j.a)(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Object(C.a)(t,Object(ct.a)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Object(C.a)(t,Object(ct.a)(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var u=0;u<a[0];++u)for(var s=0;s<a[1];++s)for(var c=0;c<a[2];++c)t=Object(C.a)(t,Object(ct.a)(e,[u*r.shape[0],s*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var d=0;d<a[2];++d)for(var h=0;h<a[3];++h)t=Object(C.a)(t,Object(ct.a)(e,[l*r.shape[0],f*r.shape[1],d*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},dn={kernelName:o.fd,gradFunc:function(e,t,n){var r=n.perm,a=ve.h(r);return{x:function(){return Object(ge.a)(e,a)}}}},hn=n(102),pn={kernelName:o.hd,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Object(hn.a)(e,r)}}}},vn=n(105),mn=n(152),gn=n(148),bn={kernelName:o.id,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return function(e,t){for(var n=Object(gn.a)(t,Object(j.a)(t)),r=Object(mn.a)(e,n),a=Object(K.a)(t,Object(h.a)(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Object(vn.a)(a,o+1);a=Object(Y.a)(a,Object(it.a)(r.shape,"bool"));var u=Object(j.a)(r);return Object(J.a)(a,r,u)}(e,n)}}}};for(var yn={kernelName:o.jd,gradFunc:function(e){return{x:function(){return Object(j.a)(e)}}}},wn=n(104),xn=0,On=[l,g,b,O,k,_,S,E,A,T,N,I,L,B,W,q,$,H,G,Q,Z,te,ue,ie,le,de,pe,be,xe,Oe,_t,ke,_e,Se,Ee,Ce,Te,Ae,De,Fe,Le,ze,Be,Ue,We,qe,$e,He,Ge,Xe,Qe,Qe,et,nt,at,ot,ut,st,lt,dt,ht,pt,mt,gt,yt,wt,wt,kt,jt,St,Et,Ct,At,Tt,Nt,Dt,Rt,Ft,Pt,zt,Bt,Ut,Vt,$t,Kt,Xt,Jt,Zt,Zt,tn,tn,nn,an,rn,on,un,sn,cn,ln,fn,dn,pn,bn,yn];xn<On.length;xn++){var kn=On[xn];Object(wn.e)(kn)}n(410);var jn,_n=n(3),Sn=n(11),En=n(16),Cn=n(17);function An(){return null==jn&&(jn=Object(a.backend)().epsilon()),jn}var Tn=n(14),Nn=n(9),In=n(38),Dn=n(26),Rn=n(203);var Fn=n(306);function Mn(e){var t="function"===typeof Map?new Map:void 0;return(Mn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Object(Fn.a)(e,arguments,Object(Dn.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(Rn.a)(r,e)})(e)}var Pn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(In.a)(r),n.prototype),r}return n}(Mn(Error)),Ln=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(In.a)(r),n.prototype),r}return n}(Mn(Error)),zn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(In.a)(r),n.prototype),r}return n}(Mn(Error)),Bn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(In.a)(r),n.prototype),r}return n}(Mn(Error)),Un=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(In.a)(r),n.prototype),r}return n}(Mn(Error));Error;function Wn(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Vn(e,t){if(!e)throw new Un(t)}function qn(e,t){var n,r=0,a=Object(Nn.a)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function $n(e){return 1===e.length?e[0]:e}function Hn(e){return Array.isArray(e)?e:[e]}function Gn(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Kn(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Xn={};function Yn(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Jn(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return Jn(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?Jn(a):e[r]=a.value)}}function Qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var o,u=e;if(u in n)o=n[u];else if(u in Xn)o=Xn[u];else if(null==(o=t[u]))throw new zn("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var s=e;if(null==s.className||null==s.config)throw new zn("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var c,l,f=s.className;if(f in n){var d=Object(i.a)(n[f],2);c=d[0],l=d[1]}else if(f in Xn){var h=Object(i.a)(Xn.className,2);c=h[0],l=h[1]}else if(f in t){var p=Object(i.a)(t[f],2);c=p[0],l=p[1]}if(null==c)throw new zn("Unknown ".concat(r,": ").concat(f,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var v={},m=0,g=Object.keys(Xn);m<g.length;m++){var b=g[m];v[b]=Xn[b]}for(var y=0,w=Object.keys(n);y<w.length;y++){var x=w[y];v[x]=n[x]}var O=s.config;O.customObjects=v;for(var k=Object.assign({},Xn),j=0,_=Object.keys(n);j<_.length;j++){var S=_[j];Xn[S]=n[S]}Jn(s.config);var E=l(c,s.config,n,a);return Xn=Object.assign({},k),E}for(var C=Object.assign({},Xn),A=0,T=Object.keys(n);A<T.length;A++){var N=T[A];Xn[N]=n[N]}var I=new c(s.config);return Xn=Object.assign({},C),I}function Zn(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function er(e){if(null==e)return e;var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function tr(e){if(null==e)throw new zn("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function nr(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new zn("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Vn(n>=0),Vn(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function ar(e,t){Array.isArray(e)?(a.util.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return ar(e,"element ".concat(n+1," of ").concat(t))}))):a.util.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ir(e),".")}))}function ir(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return ir(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function or(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function ur(e,t){return Object(a.tidy)((function(){return a.sqrt(a.sum(a.mul(e,e),t,!0))}))}var sr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),cr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=ur(e,t.axis),r=a.clipByValue(n,0,t.maxValue);return a.mul(e,a.div(r,a.add(An(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(sr);cr.className="MaxNorm",a.serialization.registerClass(cr);var lr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){return a.div(e,a.add(An(),ur(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(sr);lr.className="UnitNorm",a.serialization.registerClass(lr);var fr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.relu(e)}}]),n}(sr);fr.className="NonNeg",a.serialization.registerClass(fr);var dr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=ur(e,t.axis),r=a.add(a.mul(t.rate,a.clipByValue(n,t.minValue,t.maxValue)),a.mul(1-t.rate,n));return a.mul(e,a.div(r,a.add(An(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(sr);dr.className="MinMaxNorm",a.serialization.registerClass(dr);var hr={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function pr(e){return Yn(e)}function vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function mr(e){return null==e?null:"string"===typeof e?vr({className:e in hr?hr[e]:e,config:{}}):e instanceof sr?e:vr(e)}var gr=["channelsFirst","channelsLast"],br=["nearest","bilinear"],yr=["valid","same","causal"],wr=["max","avg"],xr=["sum","mul","concat","ave"],Or=new Map;function kr(e){nr(gr,"DataFormat",e)}function jr(e){nr(yr,"PaddingMode",e)}function _r(e){nr(wr,"PoolMode",e)}var Sr=[];function Er(e,t){Sr.push(e);try{var n=t();return Sr.pop(),n}catch(r){throw Sr.pop(),r}}function Cr(e){if(!Nr(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Sr.length?"":Sr.join("/")+"/")+e}function Ar(e){if(!Nr(e))throw new Error("Not a valid tensor name: '"+e+"'");Or.has(e)||Or.set(e,0);var t=Or.get(e);if(Or.set(e,Or.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Or.set(n,1),n}return e}var Tr=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Nr(e){return!!e.match(Tr)}function Ir(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function Dr(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function Rr(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function Fr(e,t){if(t<e)throw new zn("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function Mr(e,t){return a.cast(e,t)}function Pr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),a.reshape(e,n)}function Lr(e){var t=[Ir(e.shape)];return a.reshape(e,t)}function zr(e,t,n){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:return a.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return a.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return a.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return a.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return a.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new zn("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Br(e,t,n){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:return a.slice2d(e,[0,t],[e.shape[0],n]);case 3:return a.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return a.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new zn("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Ur(e,t,n,r){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:switch(r){case 1:return zr(e,t,n);case 2:return Br(e,t,n);default:throw new zn("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return zr(e,t,n);case 2:return a.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Br(e,t,n);default:throw new zn("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return zr(e,t,n);case 2:return a.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return a.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Br(e,t,n);default:throw new zn("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new zn("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Wr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),a.concat(e,n)}function Vr(e,t){switch(e.rank){case 1:return a.concat1d([e,t]);case 2:return a.concat2d([e,t],0);case 3:return a.concat3d([e,t],0);case 4:return a.concat4d([e,t],0);default:throw new zn("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function qr(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new zn("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return a.tile(e,t)}function $r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return a.randomNormal(e,t,n,r,i)}function Hr(e,t,n,r){if(e.rank<2||t.rank<2)throw new Bn("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Bn("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return a.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Xr(e.rank,r,"channelsLast"):null,activation:n})}var i=e.shape.slice(),o=i.pop();e=a.reshape(e,[-1,o]);var u=t.shape.slice(),s=u.pop(),c=u.pop(),l=[].concat(Object(Tn.a)(u),[s]),f=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=a.reshape(a.transpose(t,f),[c,-1]);var d=[].concat(Object(Tn.a)(i),Object(Tn.a)(l));return a.reshape(a.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Xr(e.rank,r,"channelsLast"):null,activation:n}),d)}function Gr(e,t,n){return Object(a.tidy)((function(){return t=Array.isArray(t)?Object(a.tensor1d)(t,"int32"):a.cast(t,"int32"),a.gather(e,t,n)}))}function Kr(e){return a.mul(e,e)}function Xr(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new zn("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?a.reshape(t,[1,r[0],1,1,1]):a.reshape(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?a.reshape(t,[1,1,1,1,r[0]]):a.reshape(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?a.reshape(t,[1,r[0],1,1]):a.reshape(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?a.reshape(t,[1,1,1,r[0]]):a.reshape(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?a.reshape(t,[1,r[0],1]):a.reshape(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?a.reshape(t,[1,1,r[0]]):a.reshape(t,[1].concat(r))}else if(e<3)return t;throw new zn("Unsupported input rank by biasAdd: ".concat(t.rank))}function Yr(e,t,n){return Object(a.tidy)((function(){return null==n&&(n="channelsLast"),kr(n),a.add(e,Xr(e.rank,t,n))}))}function Jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new Bn("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return a.elu(e)}function Qr(e,t,n,r){return Object(a.tidy)((function(){return a.dropout(e,t,n,r)}))}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var ea=["fanIn","fanOut","fanAvg"],ta=["normal","uniform","truncatedNormal"];var na=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),ra=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){return Object(a.zeros)(e,t)}}]),n}(na);ra.className="Zeros",a.serialization.registerClass(ra);var aa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){return Object(a.ones)(e,t)}}]),n}(na);aa.className="Ones",a.serialization.registerClass(aa);var ia=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),r=t.call(this),"object"!==typeof e)throw new zn("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new zn("config must have value set but got ".concat(e));return r.value=e.value,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){return Object(a.mul)(Object(a.scalar)(n.value),Object(a.ones)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(na);ia.className="Constant",a.serialization.registerClass(ia);var oa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){return Object(a.randomUniform)(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(na);oa.className="RandomUniform",a.serialization.registerClass(oa);var ua=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bn("randomNormal does not support dType ".concat(t,"."));return $r(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(na);ua.className="RandomNormal",a.serialization.registerClass(ua);var sa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bn("truncatedNormal does not support dType ".concat(t,"."));return Object(a.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(na);sa.className="TruncatedNormal",a.serialization.registerClass(sa);var ca=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==e.length||e[0]!==e[1])throw new zn("Identity matrix initializer can only be used for 2D square matrices.");return Object(a.mul)(n.gain,Object(a.eye)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(na);ca.className="Identity",a.serialization.registerClass(ca);var la=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;if(Object(_n.a)(this,n),r=t.call(this),e.scale<0)throw new zn("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,nr(ea,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){nr(ta,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(kr(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=Ir(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=Ir(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=Ir(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],i=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){var u=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bn("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Object(a.truncatedNormal)(e,0,u,t,this.seed)}var s=Math.sqrt(3*o);return Object(a.randomUniform)(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(na);la.className="VarianceScaling",a.serialization.registerClass(la);var fa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);fa.className="GlorotUniform",a.serialization.registerClass(fa);var da=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);da.className="GlorotNormal",a.serialization.registerClass(da);var ha=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);ha.className="HeNormal",a.serialization.registerClass(ha);var pa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);pa.className="HeUniform",a.serialization.registerClass(pa);var va=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);va.className="LeCunNormal",a.serialization.registerClass(va);var ma=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(Sn.a)(n,[{key:"getClassName",value:function(){return la.className}}]),n}(la);ma.className="LeCunNormal",a.serialization.registerClass(ma);var ga=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new Bn("Random seed is not implemented for Orthogonal Initializer yet.");return r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e.length<2)throw new Bn("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=$r(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=a.linalg.gramSchmidt(t);return e[0]>e[1]&&(r=Object(a.transpose)(r)),Object(a.mul)(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(na);ga.className="Orthogonal",a.serialization.registerClass(ga);var ba={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function wa(e){return Yn(e)}function xa(e){if("string"===typeof e){var t=e in ba?ba[e]:e;if("GlorotNormal"===t)return new da;if("GlorotUniform"===t)return new fa;if("HeNormal"===t)return new ha;if("HeUniform"===t)return new pa;if("LeCunNormal"===t)return new va;if("LeCunUniform"===t)return new ma;var n={};return n.className=t,n.config={},ya(n)}return e instanceof na?e:ya(e)}var Oa=0;function ka(){return Oa++}var ja={};function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in ja||(ja[e]=0),ja[e]+=1,e+ja[e].toString()}function Sa(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ea(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Ca(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new zn("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Aa(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new zn("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Ta(e){var t,n=0,r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var Na="Variable",Ia=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Na,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(_n.a)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=ka(),r=null==r?Na:r,this.originalName=Cr(r),this.name=Ar(this.originalName),this.trainable_=i,this.constraint=o,this.val=a.variable(t,this.trainable_,this.name,this.dtype)}return Object(Sn.a)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Da(e){return e.map((function(e){return e.read()}))}function Ra(e){e.forEach((function(e){e[0].write(e[1])}))}var Fa=function e(t){Object(_n.a)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},Ma=function e(t,n,r,a,i,o,u){Object(_n.a)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=u,this.id=ka(),null!=o&&(this.originalName=Cr(o),this.name=Ar(this.originalName)),this.rank=n.length},Pa=0,La=function(){function e(t,n){Object(_n.a)(this,e),this.callArgs=n,this.id=Pa++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Object(Nn.a)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Object(Sn.a)(e,[{key:"getConfig",value:function(){var e,t=[],n=Object(Nn.a)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),za=0,Ba=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_n.a)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=za++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Gn(i)+"_"+_a(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var u=null;null!=r.batchSize&&(u=r.batchSize),o=[u].concat(r.inputShape)}e.batchInputShape=o;var s=r.dtype;null==s&&(s=r.inputDType),null==s&&(s="float32"),e.dtype=s}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Object(Sn.a)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Ln("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new zn("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return $n(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return $n(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Pn("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Pn("Layer ".concat(this.name)+" is not connected, no input to return.");return $n(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Pn("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Pn("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return $n(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=Hn(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=Hn(this.inputSpec);if(e.length!==t.length)throw new zn("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new zn("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new zn("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new zn("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new zn("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var u in a.axes){var s=Number(u),c=a.axes[u],l=s>=0?o[s]:o[o.length+s];if(null!=c&&-1===[c,null].indexOf(l))throw new zn("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(s," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],h=r.shape[f];if(null!=d&&null!=h&&d!==h)throw new zn("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=Hn(e),i=!0,o=Object(Nn.a)(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof Ma)){i=!1;break}}}catch(l){o.e(l)}finally{o.f()}var u,s=!0,c=Object(Nn.a)(a);try{for(c.s();!(u=c.n()).done;){if(u.value instanceof Ma){s=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(i===s)throw new zn("Arguments to apply() must be all SymbolicTensors or all Tensors");return Er(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Object(Nn.a)(Hn(e));try{for(o.s();!(r=o.n()).done;){var u=r.value;i.push(u.shape)}}catch(l){o.e(l)}finally{o.f()}n.build($n(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(e),s){var c,f=n.call(e,t),d=Hn(f),h=[],p=Object(Nn.a)(d);try{for(p.s();!(c=p.n()).done;){var v=c.value;-1!==a.indexOf(v)&&(v=v.clone()),h.push(v)}}catch(l){p.e(l)}finally{p.f()}if(f=$n(h),null!=n.activityRegularizer)throw new Bn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}var m,g=function(e){e=Hn(e);var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(l){r.e(l)}finally{r.f()}return $n(n)}(e),b=n.computeOutputShape(g),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),m=null!=b&&b.length>0&&Array.isArray(b[0])?b.map((function(r,a){return new Ma(y,r,n,Hn(e),t,n.name,a)})):new Ma(y,b,n,Hn(e),t,n.name),n.addInboundNode(e,m,null,null,g,b,t),n._refCount++,null!=n.activityRegularizer)throw new Bn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Pn("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=Object(Nn.a)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Pn("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Ln("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Ta(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Da(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Object(a.tidy)((function(){var n=t.weights;if(n.length!==e.length)throw new zn('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],i=Da(n),o=0;o<i.length;++o){var u=i[o],s=n[o],c=e[o];if(!a.util.arraysEqual(u.shape,c.shape))throw new zn("Layer weight shape ".concat(u.shape," ")+"not compatible with provided weight shape ".concat(c.shape));r.push([s,c])}Ra(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new zn("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=xa("zeros"));var u=r.apply(t,n),s=new Ia(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(s.read())})),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Hn(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Object(Tn.a)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=Hn(e);t=Hn(t),n=Hn(n),r=Hn(r),a=Ea(a),i=Ea(i);var s,c=[],l=[],f=[],d=Object(Nn.a)(u);try{for(d.s();!(s=d.n()).done;){var h=s.value;c.push(h.sourceLayer),l.push(h.nodeIndex),f.push(h.tensorIndex)}}catch(v){d.e(v)}finally{d.f()}new La({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:u,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(a.serialization.Serializable);function Ua(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,u=Ua(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),s=Object(Nn.a)(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;-1===a.indexOf(c)&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}return a}var Wa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:_a("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new zn("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new zn("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new zn("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new Ma(r.dtype,r.batchInputShape,Object(In.a)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new La({outboundLayer:Object(In.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){throw new zn("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Ba);function Va(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new zn("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Wa({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}Wa.className="InputLayer",a.serialization.registerClass(Wa);var qa,$a=n(2),Ha=n.n($a),Ga=n(15);function Ka(e){return Xa.apply(this,arguments)}function Xa(){return(Xa=Object(Ga.a)(Ha.a.mark((function e(t){var n,r,i,o,u,s,c,l;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],i=[],t)"number"!==typeof(u=t[o])&&(s=u,n.push(s.data()),r.push(o),i.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(c=e.sent,l=0;l<c.length;++l)t[r[l]]=c[l][0];Object(a.dispose)(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(qa||(qa={}));var Ja=function(){function e(){Object(_n.a)(this,e),this.validationData=null}return Object(Sn.a)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),Qa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(_n.a)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Object(Sn.a)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Object(Nn.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Object(Nn.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a,i;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a,i;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a,i;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a,i;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n,r,a;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(Nn.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n,r,a;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(Nn.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Za=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.call(this)}return Object(Sn.a)(n,[{key:"onEpochBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,i,o,u=this;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,i=function(e){var t=n[e];if("number"===typeof t)u.totals.hasOwnProperty(e)||(u.totals[e]=0),u.totals[e]=u.totals[e]+t*r;else{var i;e in u.totals?i=u.totals[e]:u.totals[e]=0;var o=Object(a.tidy)((function(){return Object(a.add)(u.totals[e],Object(a.mul)(t,r))}));u.totals[e]=o,null!=i&&i.dispose()}},n)i(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,i,o,u=this;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=Object(Nn.a)(this.params.metrics),e.prev=2,o=function(){var e=i.value;if(null==u.totals[e])return"continue";"number"===typeof u.totals[e]?n[e]=u.totals[e]/u.seen:Object(a.tidy)((function(){var t=Object(a.mul)(Object(a.div)(1,u.seen),u.totals[e]);n[e]=t,u.totals[e].dispose(),Object(a.keep)(n[e])}))},r.s();case 5:if((i=r.n()).done){e.next=11;break}if("continue"!==o()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Ja),ei=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"onTrainBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(){var t,n,r,a,i,o,u,s,c;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(u=i[o],t.push(u.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(s=e.sent,c=0;c<s.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=s[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ja),ti=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var i;if(Object(_n.a)(this,n),(i=t.call(this)).currentEpoch=0,i.yieldEvery=r||"auto","auto"===i.yieldEvery&&(i.yieldEvery=125),"never"===i.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return a.util.isNumber(i.yieldEvery)&&(i.maybeWait=function(e,t){var n,r=a.util.now();return function(){var i=a.util.now();return i-r<t?n:(r=i,n=e.apply(void 0,arguments))}}(i.maybeWait.bind(Object(In.a)(i)),i.yieldEvery)),i.trainBegin=e.onTrainBegin,i.trainEnd=e.onTrainEnd,i.epochBegin=e.onEpochBegin,i.epochEnd=e.onEpochEnd,i.batchBegin=e.onBatchBegin,i.batchEnd=e.onBatchEnd,i.yield=e.onYield,i}return Object(Sn.a)(n,[{key:"maybeWait",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n,r){var i;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],null==this.yield){e.next=5;break}return e.next=4,Ka(r);case 4:i.push(this.yield(t,n,r));case 5:return i.push(Object(a.nextFrame)()),e.next=8,Promise.all(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Ka(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Ka(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(Object(a.nextFrame)()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Ka(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Ka(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(Object(a.nextFrame)()):a.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Ka(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Ka(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ja);function ni(e,t){return null==e&&(e={}),e instanceof Ja?[e]:Array.isArray(e)&&e[0]instanceof Ja?e:Hn(e).map((function(e){return new ti(e,t)}))}var ri=function(){function e(){Object(_n.a)(this,e)}return Object(Sn.a)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){a.util.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new zn("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,Object(Tn.a)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function ai(e,t,n,r,a,i,o,u,s){var c=new ei,l=[new Za].concat(Object(Tn.a)(ri.createCallbacks(t)));null!=e&&l.push.apply(l,Object(Tn.a)(e)),l.push(c);var f=new Qa(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:u,metrics:s}),{callbackList:f,history:c}}ri.constructors={};var ii=n(28);function oi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Qn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function ui(e,t){return Object(a.tidy)((function(){"float32"!==e.dtype&&(e=a.cast(e,"float32"));var n=a.sum(Kr(e),t,!0),r=a.fill(n.shape,An()),i=a.sqrt(a.maximum(n,r));return a.div(e,i)}))}function si(e,t){return Object(a.tidy)((function(){return a.mean(Kr(a.sub(t,e)),-1)}))}function ci(e,t){return Object(a.tidy)((function(){return a.mean(a.abs(a.sub(t,e)),-1)}))}function li(e,t){return Object(a.tidy)((function(){var n=a.sub(e,t),r=a.clipByValue(a.abs(e),An(),Number.MAX_VALUE),i=a.abs(a.div(n,r));return a.mul(100,a.mean(i,-1))}))}function fi(e,t){return Object(a.tidy)((function(){var n=a.clipByValue(t,An(),Number.MAX_VALUE),r=a.log(a.add(1,n)),i=a.clipByValue(e,An(),Number.MAX_VALUE),o=a.log(a.add(1,i));return a.mean(Kr(a.sub(r,o)),-1)}))}function di(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a.tidy)((function(){if(n)t=a.softmax(t);else{var r=a.sum(t,t.shape.length-1,!0);t=a.div(t,r)}return t=a.clipByValue(t,An(),1-An()),a.neg(a.sum(a.mul(a.cast(e,"float32"),a.log(t)),t.shape.length-1))}))}function hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a.tidy)((function(){var r=a.cast(a.floor(Lr(e)),"int32"),i=(t=a.clipByValue(t,An(),1-An())).shape;return di(a.reshape(a.oneHot(r,i[i.length-1]),i),t,n)}))}function pi(e,t){return Object(a.tidy)((function(){var n;return n=a.clipByValue(t,An(),1-An()),n=a.log(a.div(n,a.sub(1,n))),a.mean(function(e,t){if(!a.util.arraysEqual(e.shape,t.shape))throw new zn("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Object(a.tidy)((function(){var n=a.relu(t),r=a.neg(a.abs(t));return a.add(a.sub(n,a.mul(t,e)),a.log1p(a.exp(r)))}))}(e,n),-1)}))}function vi(e,t){return Object(a.tidy)((function(){var n=a.clipByValue(e,An(),1),r=a.clipByValue(t,An(),1);return a.sum(a.mul(e,a.log(a.div(n,r))),-1)}))}function mi(e,t){return Object(a.tidy)((function(){var n=ui(e,-1),r=ui(t,-1),i=a.mul(n,r);return a.neg(a.sum(i,-1))}))}var gi={meanSquaredError:si,meanAbsoluteError:ci,meanAbsolutePercentageError:li,meanSquaredLogarithmicError:fi,squaredHinge:function(e,t){return Object(a.tidy)((function(){var n=a.maximum(0,a.sub(1,a.mul(e,t)));return a.mean(Kr(n),-1)}))},hinge:function(e,t){return Object(a.tidy)((function(){var n=a.maximum(0,a.sub(1,a.mul(e,t)));return a.mean(n,-1)}))},categoricalHinge:function(e,t){return Object(a.tidy)((function(){var n=a.sum(a.mul(e,t),-1),r=a.max(a.mul(a.sub(1,e),t),-1);return a.maximum(0,a.add(1,a.sub(r,n)))}))},logcosh:function(e,t){return Object(a.tidy)((function(){var n=Math.log(2),r=a.sub(t,e),i=a.sub(a.add(r,a.softplus(a.mul(-2,r))),n);return a.mean(i,-1)}))},categoricalCrossentropy:di,sparseCategoricalCrossentropy:hi,binaryCrossentropy:pi,kullbackLeiblerDivergence:vi,poisson:function(e,t){return Object(a.tidy)((function(){var n=a.log(a.add(An(),t));return a.mean(a.sub(t,a.mul(e,n)),-1)}))},cosineProximity:mi};function bi(e){if("string"===typeof e){if(e in gi)return gi[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new zn(t)}return e}function yi(e,t){return Object(a.tidy)((function(){var n=a.mul(.5,a.onesLike(t)),r=Mr(a.greater(t,n),e.dtype);return a.mean(a.equal(e,r),-1)}))}function wi(e,t){return Object(a.tidy)((function(){return Mr(a.equal(a.argMax(e,-1),a.argMax(t,-1)),"float32")}))}function xi(e,t){return Object(a.tidy)((function(){return a.cast(a.sum(a.logicalAnd(a.equal(e,1),a.equal(t,1))),"float32")}))}function Oi(e,t){return Object(a.tidy)((function(){var n=xi(e,t),r=function(e,t){return Object(a.tidy)((function(){return a.cast(a.sum(a.logicalAnd(a.equal(e,0),a.equal(t,1))),"float32")}))}(e,t),i=a.add(n,r);return a.cast(a.where(a.greater(i,0),a.div(n,i),0),"float32")}))}function ki(e,t){return pi(e,t)}function ji(e,t){return e.rank===t.rank&&(e=a.squeeze(e,[e.rank-1])),(t=a.argMax(t,-1)).dtype!==e.dtype&&(t=a.cast(t,e.dtype)),a.cast(a.equal(e,t),"float32")}var _i=di,Si=hi,Ei={binaryAccuracy:yi,categoricalAccuracy:wi,precision:Oi,categoricalCrossentropy:_i,sparseCategoricalCrossentropy:Si,mse:si,MSE:si,mae:ci,MAE:ci,mape:li,MAPE:li,cosine:mi};function Ci(e){if("string"===typeof e&&e in Ei)return Ei[e];if("string"!==typeof e&&null!=e)return e;throw new zn("Unknown metric ".concat(e))}function Ai(e){if(Vn(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(gi);n<r.length;n++){var a=r[n];if(gi[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Ei);i<o.length;i++){var u=o[i];if(Ei[u]===e){t=u;break}}return void 0!==t?t:e.name}var Ti=1048576;function Ni(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Ii(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>Ti&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Ti,"."))}}function Ii(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!Ii(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Object(Nn.a)(e);try{for(i.s();!(a=i.n()).done;){if(!Ii(a.value))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function Di(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Fi(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var u in o.push("Receives inputs"),r=[],e.nodesByDepth){var s;(s=r).push.apply(s,Object(Tn.a)(e.nodesByDepth[u]))}a("_".repeat(t)),Mi(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?Pi(c[l],n,a):Li(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=Ri(e),d=Ta(e.nonTrainableWeights);a("Total params: ".concat(f+d)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function Ri(e){return null!=e.collectedTrainableWeights?Ta(e.collectedTrainableWeights):Ta(e.trainableWeights)}function Fi(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var u=o[i];if(u.length>1||1===u.length&&u[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,Object(Tn.a)(u))}if(t){var s,c=Object(Nn.a)(e.layers);try{for(c.s();!(s=c.n()).done;){var l,f=s.value,d=!1,h=Object(Nn.a)(f.inboundNodes);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(d){t=!1;break}d=!0}}}catch(v){h.e(v)}finally{h.f()}if(!t)break}}catch(v){c.e(v)}finally{c.f()}}return t}function Mi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Pi(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(o){r="multiple"}var a=e.name,i=e.getClassName();Mi(["".concat(a," (").concat(i,")"),r,e.countParams().toString()],t,n)}function Li(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(g){a="multiple"}var i,o=[],u=Object(Nn.a)(e.inboundNodes);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(var c=0;c<s.inboundLayers.length;++c){var l=s.inboundLayers[c].name,f=s.nodeIndices[c],d=s.tensorIndices[c];o.push("".concat(l,"[").concat(f,"][").concat(d,"]"))}}}catch(g){u.e(g)}finally{u.f()}var h=e.name,p=e.getClassName(),v=0===o.length?"":o[0];Mi(["".concat(h," (").concat(p,")"),a,e.countParams().toString(),v],t,r);for(var m=1;m<o.length;++m)Mi(["","","",o[m]],t,r)}function zi(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function Bi(e,t){if(null===e)return null;if("string"===typeof e)return Kn(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];zi(t,a,i)?n.push(i):n.push(Bi(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var f=Kn(c);o[f]=Bi(l,f)}}return o}function Ui(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Gn(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];zi(t,a,i)?n.push(i):n.push(Ui(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c],f=Gn(c);o[f]="name"!==c&&"className"!==c||"string"!==typeof l?Ui(l,c):l}return o}var Wi="3.9.0";var Vi=function(){function e(t){if(Object(_n.a)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Object(Nn.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return Object(Sn.a)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new zn("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Object(a.cast)(t,e.dtype)}catch(n){throw new zn("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof Ma){if(null==this.id2Value[e.id])throw new zn("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new zn("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof Ma){if(null==this.id2Value[e.id])throw new zn("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new zn("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Object(a.dispose)(this.id2Mask)}}]),e}(),qi={},$i={};function Hi(e,t,n,r){var i,o=null!=n&&n.training,u=Array.isArray(e),s=u?e:[e],c=s.map((function(e){return e.name})),l=[],f=t.names(),d=Object(Nn.a)(c);try{for(d.s();!(i=d.n()).done;){var h=i.value;-1!==f.indexOf(h)?l.push(t.getValue(h)):l.push(null)}}catch(L){d.e(L)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,v,m=c.join(",")+"|"+t.names().join(",");if(null==qi[m]){var g=function(e,t){a.util.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var i=Ki(e[0],t);n=i.sorted,r=i.recipientMap}else{var o,u=new Set,s=Object(Nn.a)(e);try{for(s.s();!(o=s.n()).done;){var c,l=Ki(o.value,t),f=l.sorted,d=l.recipientMap,h=Object(Nn.a)(f);try{for(h.s();!(c=h.n()).done;){var p=c.value;u.has(p.name)||(n.push(p),u.add(p.name))}}catch(L){h.e(L)}finally{h.f()}var v=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)v(m)}}catch(L){s.e(L)}finally{s.f()}}return{sorted:n,recipientCounts:Gi(r)}}(s,t);p=g.sorted,v=g.recipientCounts,qi[m]=p,$i[m]=v}p=qi[m],v={},o||Object.assign(v,$i[m]);for(var b=new Vi(t),y=0;y<p.length;++y){if(null!=r){var w=Object(a.memory)().numTensors;w>r.maxNumTensors&&(r.maxNumTensors=w),w<r.minNumTensors&&(r.minNumTensors=w)}var x=p[y],O=x.sourceLayer;if(!(O instanceof Wa)){var k,j=[],_=[],S=[],E=!1,C=Object(Nn.a)(x.inputs);try{for(C.s();!(k=C.n()).done;){var A=k.value,T=b.getValue(A),N=b.getMask(A);j.push(T),_.push(N),null!=N&&(E=!0),o||(v[A.name]--,0!==v[A.name]||t.hasKey(A)||-1!==c.indexOf(A.name)||T.isDisposed||!0===A.sourceLayer.stateful||S.push(T))}}catch(L){C.e(L)}finally{C.f()}E&&((n=n||{}).mask=_[0]);var I=Hn(O.apply(j,n)),D=null;O.supportsMasking&&(D=O.computeMask(j,_));for(var R=Xi(x),F=Array.isArray(R)?R:[R],M=0;M<F.length;++M){b.hasKey(F[M])||b.add(F[M],I[M],Array.isArray(D)?D[0]:D);var P=c.indexOf(F[M].name);-1!==P&&(l[P]=I[M])}o||Object(a.dispose)(S)}}return b.disposeMasks(),u?l:l[0]}function Gi(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Ki(e,t){var n,r=new Set,a=[],i={},o=Object(Nn.a)(t.names());try{for(o.s();!(n=o.n()).done;){var u=n.value;r.add(u)}}catch(v){o.e(v)}finally{o.f()}var s=[],c=[];for(s.push(e);s.length>0;){var l=s[s.length-1];if(r.has(l.name))s.pop();else{var f=c[c.length-1]===s.length-1;if(0===l.inputs.length||f)s.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(s.length-1);var d,h=Object(Nn.a)(l.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||s.push(p)}}catch(v){h.e(v)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function Xi(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Object(Nn.a)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Yi(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Ji(e,t){return Yi(e,t,"classWeight")}function Qi(e,t,n,r){return Zi.apply(this,arguments)}function Zi(){return(Zi=Object(Ga.a)(Ha.a.mark((function e(t,n,r,i){var o,u,s;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==i){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=Object(a.tidy)((function(){if(1===t.shape.length)return Object(a.clone)(t);if(2===t.shape.length){if(t.shape[1]>1){return Object(a.argMax)(t,1)}if(1===t.shape[1])return Object(a.reshape)(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,u=e.t0.from.call(e.t0,e.t1),Object(a.dispose)(o),s=[],u.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Object(a.tensor1d)(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(e,t){return Object(a.mul)(e,t)}function to(e,t){var n,r,i=t;n=i.xs,r=i.ys,a.util.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=no("input",e.inputNames,n),u=no("output",e.outputNames,r),s=o[0].shape[0];a.util.assert(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),a.util.assert(u.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(u.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var c=function(t){a.util.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<o.length;l++)c(l);for(var f=function(t){a.util.assert(u[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(u[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<u.length;d++)f(d);return{xs:o,ys:u}}function no(e,t,n){if(n instanceof a.Tensor)return[n];if(Array.isArray(n))return a.util.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,i=[],o=Object(Nn.a)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(null==n[u])throw new zn("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(u,"'."));i.push(n[u])}}catch(s){o.e(s)}finally{o.f()}return i}function ro(e){if(3===e.length)throw new Bn("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function ao(e,t,n){return io.apply(this,arguments)}function io(){return(io=Object(Ga.a)(Ha.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_,S,E,C,A,T,N,I,D,R,F,M,P;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=r.batchesPerEpoch,a.util.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),a.util.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),a.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),a.util.assert(!i||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),a.util.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(uo(r.validationData)?a.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(c=ro(r.validationData),u=c.xs,s=c.ys)),l=t.makeTrainFunction(),f=t.getDedupedMetricsNames(),d=o?f.slice().concat(f.map((function(e){return"val_"+e}))):f.slice(),h=ni(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,v=ai(h,p,r.epochs,null,null,oo(n,r),null,o,d),m=v.callbackList,g=v.history,m.setModel(t),t.history=g,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,b=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(b<r.epochs)){e.next=98;break}return w={},e.next=31,m.onEpochBegin(b);case 31:if(x=0,O=0,i){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(i&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!i||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return j=to(t,k.value),_=j.xs,S=j.ys,(E={}).batch=O,E.size=_[0].shape[0],e.next=51,m.onBatchBegin(O,E);case 51:if(C=[],null==r.classWeight){e.next=64;break}A=Ji(r.classWeight,t.outputNames),T=0;case 55:if(!(T<A.length)){e.next=64;break}return e.t0=C,e.next=59,Qi(S[T],null,A[T]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++T,e.next=55;break;case 64:for(N=_.concat(S).concat(C),I=l(N),a.dispose(N),D=0;D<f.length;++D)R=f[D],F=I[D],E[R]=F,a.keep(F);return e.next=70,m.onBatchEnd(O,E);case 70:Ya(E),O++,x++;case 73:if(!(i?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!o){e.next=86;break}if(M=void 0,!uo(r.validationData)){e.next=84;break}return e.t2=Hn,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,M=(0,e.t2)(e.t3),e.next=85;break;case 84:M=Hn(t.evaluate(u,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(P=0;P<t.metricsNames.length;++P)w["val_".concat(t.metricsNames[P])]=M[P];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(b,w);case 93:if(b++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])})))).apply(this,arguments)}function oo(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function uo(e){return"function"===typeof e.iterator}function so(e){return"function"===typeof e.next}function co(e,t,n){return lo.apply(this,arguments)}function lo(){return(lo=Object(Ga.a)(Ha.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=(r=r||{}).batches,o=t.testFunction,u=[],!(r.verbose>0)){e.next=6;break}throw new Bn("Verbose mode is not implemented yet.");case 6:if(a.util.assert(!i||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!so(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,c=0,l=0,f=Ha.a.mark((function e(){var n;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,u=a.tidy((function(){return n.value&&function(){var e=to(t,n.value),r=e.xs,i=e.ys,s=r.concat(i),f=a.tidy((function(){return o(s)}));if(a.dispose(s),0===l)for(var d=0;d<f.length;++d)u.push(Object(a.scalar)(0));for(var h=s[0].shape[0],p=function(e){var t=f[e],n=u[e];u[e]=a.tidy((function(){return a.add(u[e],a.mul(h,t))})),l>0&&a.dispose(n)},v=0;v<f.length;++v)p(v);a.dispose(f),c+=h,++l}(),u})),!n.done){e.next=7;break}return i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(i&&!(l<r.batches)){e.next=25;break}return e.delegateYield(f(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<u.length;++d)h=u[d],u[d]=a.div(u[d],c),a.dispose(h);return e.abrupt("return",$n(u));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e){a.util.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function ho(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return zr(e,t,n-t)})):zr(e,t,n-t)}function po(e,t){return a.tidy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return po(e,t)})):Gr(e,"int32"===t.dtype?t:a.cast(t,"int32"))}))}function vo(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function mo(e,t,n,r,a,i,o,u,s,c,l,f,d,h,p){return go.apply(this,arguments)}function go(){return(go=Object(Ga.a)(Ha.a.mark((function e(t,n,r,i,o,u,s,c,l,f,d,h,p,v,m){var g,b,y,w,x,O,k,j;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o&&(o=32),null==u&&(u=1),null==d&&(d=!0),null==p&&(p=0),g=!1,null!=l&&null!=f&&(g=!0),null==m){e.next=10;break}if(g=!0,null!=v){e.next=10;break}throw new zn("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(b=t.checkNumSamples(r,o,v,"steps_per_epoch"))&&(y=Fr(0,b)),null==s&&(s=1),w=ai(c,s,u,p,b,v,o,g,h),x=w.callbackList,O=w.history,x.setModel(t),t.history=O,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=Ha.a.mark((function e(u){var s;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(u);case 2:if(s={},null==v){e.next=7;break}throw new Bn("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(Ha.a.mark((function e(){var u,c,h,p;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==d){e.next=4;break}throw new Bn("batch shuffling is not implemneted yet");case 4:d&&a.util.shuffle(y);case 5:u=Object(a.tensor1d)(y),c=vo(b,o),h=Ha.a.mark((function e(d){var h;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(d,h);case 3:return a.tidy((function(){var e=c[d][0],p=c[d][1],v=zr(u,e,p-e);h.batch=d,h.size=p-e;for(var m=po(r,v),b=n(m),y=0;y<i.length;++y){var w=i[y],x=b[y];h[w]=x,a.keep(x)}if(d===c.length-1&&g)for(var O=t.testLoop(l,f,o),k=0;k<i.length;++k){var j=i[k],_=O[k];a.keep(_),s["val_"+j]=_}})),e.next=6,x.onBatchEnd(d,h);case 6:if(Ya(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<c.length)){e.next=17;break}return e.delegateYield(h(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:u.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(u,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),j=p;case 21:if(!(j<u)){e.next=29;break}return e.delegateYield(k(j),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++j,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t,n){return yo.apply(this,arguments)}function yo(){return(yo=Object(Ga.a)(Ha.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_,S,E,C,A=arguments;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=A.length>3&&void 0!==A[3]?A[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,fo(h=null==i.batchSize?32:i.batchSize),p=!1,e.next=10,t.standardizeUserData(n,r,i.sampleWeight,i.classWeight,p,h);case 10:if(v=e.sent,o=v[0],u=v[1],d=v[2],m=!1,!(null!=i.validationData&&i.validationData.length>0)){e.next=36;break}if(m=!0,2!==i.validationData.length){e.next=22;break}s=i.validationData[0],c=i.validationData[1],e.next=27;break;case 22:if(3!==i.validationData.length){e.next=26;break}throw new Bn("validationData including sample weights is not supported yet.");case 26:throw new zn("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(i.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(s,c,null,null,b,h);case 30:y=e.sent,l=y[0],f=y[1],g=l.concat(f),e.next=37;break;case 36:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(m=!0,w=Math.floor(o[0].shape[0]*(1-i.validationSplit)),x=o[0].shape[0],l=ho(o,w,x),o=ho(o,0,w),f=ho(u,w,x),u=ho(u,0,w),g=l.concat(f)):null!=i.validationSteps&&(m=!0);case 37:return O=o.concat(u).concat(d),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),j=t.getDedupedMetricsNames(),m?(t.makeTestFunction(),_=t.testFunction,S=j.slice().concat(j.map((function(e){return"val_"+e})))):(_=null,g=[],S=j.slice()),E=ni(i.callbacks,i.yieldEvery),e.next=45,mo(t,k,O,j,h,i.epochs,i.verbose,E,_,g,i.shuffle,S,i.initialEpoch,null,null);case 45:return C=e.sent,e.abrupt("return",C);case 47:return e.prev=47,t.isTraining=!1,xo(o,n),xo(u,r),xo(l,s),xo(f,c),null!=d&&a.dispose(d),e.finish(47);case 55:case"end":return e.stop()}}),e,null,[[4,,47,55]])})))).apply(this,arguments)}function wo(e){var t=[];e instanceof a.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Pr(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function xo(e,t){if(null!=e){var n=[];if(t instanceof a.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var i=t[r];n.push(i.id)}var o=[];if(e instanceof a.Tensor)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var u in e){var s=e[u];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function Oo(e){return Array.isArray(e)}function ko(e){return!function(e){return e instanceof a.Tensor}(e)&&!Oo(e)}function jo(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(Oo(e)&&e.length>0)o=!0;else if(ko(e)){for(var u in e)if(e.hasOwnProperty(u)){o=!0;break}}else o=!0;if(o)throw new zn("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(ko(e)){e=e,r=[];var s,c=Object(Nn.a)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(null==e[l])throw new zn('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(m){c.e(m)}finally{c.f()}}else if(Oo(e)){if((e=e).length!==t.length)throw new zn("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new zn("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=wo(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new zn("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var h=0;h<n[f].length;++h)if(0!==h||a){var p=d.shape[h],v=n[f][h];if(null!=v&&v>=0&&p!==v)throw new zn("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(i," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function _o(e,t,n){var r=er(e.map((function(e){return e.shape[0]})));r.sort();var i=er(t.map((function(e){return e.shape[0]})));if(i.sort(),r.length>1)throw new zn("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(i.length>1)throw new zn("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&i.length>0&&!a.util.arraysEqual(r,i))throw new zn("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(i[0]," target ")+"sample(s).")}function So(e,t,n){for(var r=[si,pi,di],a=0;a<e.length;++a){var i=e[a],o=t[a],u=n[a];if(null!=o){if(o===di&&1===i.shape[i.shape.length-1])throw new zn("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var s=i.shape.slice(1),c=u.slice(1),l=0;l<s.length;++l){var f=s[l],d=c[l];if(null!=d&&f!==d)throw new zn("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(u,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Eo(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new zn("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new zn("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var u=r[o];if(u.shape.length!==n[o].length)throw new zn("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(u.shape)));for(var s=0;s<n[o].length;++s)if(0!==s||a){var c=u.shape[s],l=n[o][s];if(null!=l&&l!==c)throw new zn("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(u.shape),"."))}}}var Co=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).isTraining=!1,r}return Object(Sn.a)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new zn("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Di(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return a.train.adagrad(.01)},Adadelta:function(){return a.train.adadelta(1,.95,An())},Adam:function(){return a.train.adam(.001,.9,.999,An())},Adamax:function(){return a.train.adamax(.002,.9,.999,An(),0)},RMSProp:function(){return a.train.rmsprop(.001,.9,0,An())},SGD:function(){return a.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new zn("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof a.Optimizer))throw new zn("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new zn("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return bi(e)}))}else{var i=bi(e.loss);this.outputs.forEach((function(e){n.push(i)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new zn('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var u,s=Object(Nn.a)(this.outputNames);try{for(s.s();!(u=s.n()).done;){var c=u.value;null==e.loss[c]&&console.warn('Output "'.concat(c,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(c," during training")),n.push(bi(e.loss[c]))}}catch(m){s.e(m)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var f=this.internalOutputShapes[l],d=this.outputNames[l];this.feedOutputNames.push(d),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[l])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Er("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Object(Nn.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=n.hasOwnProperty(o)?n[o]:[];Array.isArray(u)||(u=[u]),a.push(u)}}catch(m){i.e(m)}finally{i.f()}return a}(e.metrics,this.outputNames),v=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};Er("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,u=Object(Nn.a)(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===pi?-1!==["accuracy","acc"].indexOf(s)?a=yi:-1!==["crossentropy","ce"].indexOf(s)&&(a=ki):t.lossFunctions[e]===hi?-1!==["accuracy","acc"].indexOf(s)?a=ji:-1!==["crossentropy","ce"].indexOf(s)&&(a=Si):-1!==["accuracy","acc"].indexOf(s)?a=wi:-1!==["crossentropy","ce"].indexOf(s)&&(a=_i);var l=void 0;-1!==["accuracy","acc"].indexOf(s)?l="acc":-1!==["crossentropy","ce"].indexOf(s)&&(l="ce"),i=a,r=""+l}else{var f=Ci(s);i=f,r=""+Ai(s)}var d=void 0;Er(r,(function(){d=i})),v(e,r,d)}}catch(m){u.e(m)}finally{u.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;fo(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var u=this.testFunction,s=this.testLoop(u,o,r,n.verbose,n.steps);return $n(s)}finally{xo(i[0],e),xo(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",co(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new zn("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new zn("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new zn("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new Vi;if(e instanceof a.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new zn("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var u=0;u<this.inputs.length;++u)o.add(this.inputs[u],e[u])}else{var s,c=Object(Nn.a)(this.inputs);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e[l.name];if(null==f)throw new zn("No value is provided for the model's input ".concat(l.name));o.add(l,f)}}catch(h){c.e(h)}finally{c.f()}}var d=Hi(i,o);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Wn(null,e.length),r=e.length,a=Object(Nn.a)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],u=o.map((function(e){return e.name})),s=0;s<e.length;++s){var c=u.indexOf(e[s]);if(-1!==c&&(n[s]=o[c],r--),0===r)break}if(0===r)break}}catch(f){a.e(f)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new zn("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.tidy((function(){var i=t.checkNumSamples(e);if(r)throw new Bn("Verbose predictLoop() is not implemented yet.");for(var o=vo(i,n),u=t.outputs.map((function(e){return[]})),s=function(n){a.tidy((function(){var r=o[n][0],a=o[n][1],i=ho(e,r,a),u=[];if(Array.isArray(i))for(var s=0;s<i.length;++s)u.push({key:t.inputs[s],value:i[s]});else u.push({key:t.inputs[0],value:i});var c=new Vi(u);return Hi(t.outputs,c)})).forEach((function(e,t){return u[t].push(e)}))},c=0;c<o.length;++c)s(c);return $n(u.map((function(e){return a.concat(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wo(e);Eo(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return fo(r),this.predictLoop(n,r)}finally{xo(n,e)}}},{key:"predictOnBatch",value:function(e){Eo(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Ln("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===hi?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(_o(e=jo(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=jo(t,this.feedOutputNames,r,!1,"target")),So(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new zn("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n,r,a){var o,u,s,c,l,f,d,h,p,v=arguments;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(v.length>4&&void 0!==v[4])||v[4],u=v.length>5?v[5]:void 0,s=this.standardizeUserDataXY(t,n,o,u),c=Object(i.a)(s,2),l=c[0],f=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}h=Ji(a,this.outputNames),d=[],p=0;case 10:if(!(p<h.length)){e.next=19;break}return e.t0=d,e.next=14,Qi(f[p],null,h[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[l,f,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return a.tidy((function(){var u=r.checkNumSamples(t,n,o,"steps"),s=[];if(i>0)throw new Bn("Verbose mode is not implemented yet.");if(null!=o)throw new Bn("steps mode in testLoop() is not implemented yet");for(var c=vo(u,n),l=Object(a.tensor1d)(Fr(0,u)),f=0;f<c.length;++f){var d=c[f][0],h=c[f][1],p=zr(l,d,h-d),v=po(t,p),m=e(v);if(0===f)for(var g=0;g<m.length;++g)s.push(Object(a.scalar)(0));for(var b=0;b<m.length;++b){var y=m[b];s[b]=a.add(s[b],a.mul(h-d,y))}}for(var w=0;w<s.length;++w)s[w]=a.div(s[w],u);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(qn(e,r)>1){var i=qn(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),u=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var c,l=new Vi(t),f=Hi(e.outputs,l,{training:!0}),d=0;d<e.lossFunctions.length;++d){var h=(0,e.lossFunctions[d])(i[d],f[d]);null!=o[d]&&(h=eo(h,o[d]));var p=a.mean(h);n.push(p),c=0===d?h:a.add(c,h)}for(var v=0;v<e.metricsTensors.length;++v){var m=void 0;if(e.outputs.length>1&&v<e.outputs.length)m=n[v];else{var g=e.metricsTensors[v][0],b=e.metricsTensors[v][1];m=a.mean(g(i[b],f[b]))}a.keep(m),u.push(m)}return c=a.mean(c),e.calculateLosses().forEach((function(e){c=a.add(c,e)})),c}),!0,s)].concat(u)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return a.tidy((function(){for(var n,r=[],i=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),u=[],s=0;s<e.inputs.length;++s)u.push({key:e.inputs[s],value:i[s]});for(var c=new Vi(u),l=Hi(e.outputs,c),f=0;f<e.lossFunctions.length;++f){var d=e.lossFunctions[f],h=a.mean(d(o[f],l[f]));n=0===f?h:a.add(n,h),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var v=e.metricsTensors[p][0],m=e.metricsTensors[p][1],g=a.mean(v(o[m],l[m]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a=arguments;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",bo(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ao(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,i,o,u,s,c,l,f,d,h;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,i=r[0],o=r[1],u=this.makeTrainFunction(),s=u(i.concat(o)),c=[],l=Object(Nn.a)(s),e.prev=9,l.s();case 11:if((f=l.n()).done){e.next=19;break}return d=f.value,e.next=15,d.data();case 15:h=e.sent,c.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return a.dispose(s),e.abrupt("return",$n(c));case 29:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=a.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-a.memory().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Gn(this.loss);else if(Array.isArray(this.loss)){var t,n=Object(Nn.a)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(s){n.e(s)}finally{n.f()}e=this.loss.map((function(e){return Gn(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var u=o[i];if("string"!==typeof a[u])throw new Error("Serialization of non-string loss is not supported.");e[u]=Gn(a[u])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Gn(Ai(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Gn(Ai(e))}));var e={};for(var t in this.metrics)e[t]=Gn(Ai(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=oi(Bi(e.optimizer_config));if("string"===typeof e.loss)t=Kn(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Kn(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Kn(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Kn(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Kn(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,i,o,u,s,c,l,f,d;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=a.io.getSaveHandlers(t)).length){e.next=6;break}throw new zn("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new zn("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new zn("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,a.io.encodeWeights(this.getNamedWeights(n));case 13:if(i=e.sent,!1,null,o=this.toJSON(null,false),u={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Wi),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return u.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=a.io,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,f=l.data,d=l.specs,(s=i.specs).push.apply(s,Object(Tn.a)(d)),i.data=a.io.concatenateArrayBuffers([i.data,f]);case 34:return null!=this.userDefinedMetadata&&(!0,Ni(this.userDefinedMetadata,this.name,true),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,e.abrupt("return",t.save(u));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){Ni(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=_a(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],er(r.inputs).length!==r.inputs.length)throw new zn("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));er(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Object(Nn.a)(r.outputs);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.sourceLayer,c=u.nodeIndex,l=u.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(Oe){o.e(Oe)}finally{o.f()}var f,d=Object(Nn.a)(r.inputs);try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.sourceLayer,v=h.nodeIndex,m=h.tensorIndex;Vn(0===v,"input layer has >1 nodes"),Vn(0===m,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(Oe){d.e(Oe)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var b=r.inputLayers[g];if(!(b instanceof Wa))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(b.getClassName(),"."));r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}var y,w=Object(Nn.a)(r.outputLayers);try{for(w.s();!(y=w.n()).done;){var x=y.value;r.outputNames.push(x.name)}}catch(Oe){w.e(Oe)}finally{w.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var O,k={},j={},_={},S={},E={},C=[],A=function e(t,a,i,o,u,s){null!=o&&null!=u&&null!=s||(o=t.sourceLayer,u=t.nodeIndex,s=t.tensorIndex);var c=o.inboundNodes[u];if(-1!==i.indexOf(c))throw new Ln("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,u)),o.id in E||(E[o.id]=Object.keys(E).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,i,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);C.push(c)}},T=[],N=[],I=Object(Nn.a)(r.outputs);try{for(I.s();!(O=I.n()).done;){A(O.value,T,N)}}catch(Oe){I.e(Oe)}finally{I.f()}var D,R=C.slice().reverse(),F=Object(Nn.a)(R);try{for(F.s();!(D=F.n()).done;){var M=D.value;j[M.id]=M,M.id in k||(k[M.id]=0);var P=k[M.id],L=null==_[M.outboundLayer.id]?0:_[M.outboundLayer.id];P=Math.max(P,L),_[M.outboundLayer.id]=P,S[M.outboundLayer.id]=M.outboundLayer,k[M.id]=P;for(var z=0;z<M.inboundLayers.length;z++){var B=M.inboundLayers[z],U=M.nodeIndices[z],W=B.inboundNodes[U],V=null==k[W.id]?0:k[W.id];k[W.id]=Math.max(P+1,V),j[W.id]=W}}}catch(Oe){F.e(Oe)}finally{F.f()}var q={};for(var $ in k){var H=k[$];H in q||(q[H]=[]),q[H].push(j[$])}var G={};for(var K in _){var X=_[K];X in G||(G[X]=[]),G[X].push(S[K])}var Y=Object.keys(G).map((function(e){return parseInt(e,10)})).sort(Zn);r.layers=[];var J,Q=Object(Nn.a)(Y);try{for(Q.s();!(J=Q.n()).done;){var Z=G[J.value];Z.sort((function(e,t){var n=E[e.id],r=E[t.id];return n<r?-1:n>r?1:0}));var ee,te=Object(Nn.a)(Z);try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;ne instanceof n&&r.internalContainerRefs.push(ne),r.layers.push(ne)}}catch(Oe){te.e(Oe)}finally{te.f()}}}catch(Oe){Q.e(Oe)}finally{Q.f()}r.layersByDepth=G,Y=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(Zn);var re,ae=r.inputs.slice(),ie=[],oe=Object(Nn.a)(Y);try{for(oe.s();!(re=oe.n()).done;){var ue,se=re.value,ce=Object(Nn.a)(q[se]);try{for(ce.s();!(ue=ce.n()).done;){var le=ue.value,fe=le.outboundLayer;if(null!=fe){var de,he=Object(Nn.a)(le.inputTensors);try{for(he.s();!(de=he.n()).done;){var pe=de.value;if(-1===ae.indexOf(pe))throw new Ln("Graph disconnected: cannot obtain value for tensor ".concat(pe)+' at layer "'.concat(fe.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ie))}}catch(Oe){he.e(Oe)}finally{he.f()}var ve,me=Object(Nn.a)(le.outputTensors);try{for(me.s();!(ve=me.n()).done;){var ge=ve.value;ae.push(ge)}}catch(Oe){me.e(Oe)}finally{me.f()}ie.push(fe.name)}}}catch(Oe){ce.e(Oe)}finally{ce.f()}}}catch(Oe){oe.e(Oe)}finally{oe.f()}r.nodesByDepth=q;var be,ye=r.layers.map((function(e){return e.name})),we=Object(Nn.a)(ye);try{var xe=function(){var e=be.value,t=ye.filter((function(t){return t===e})).length;if(1!==t)throw new Ln('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ye))};for(we.s();!(be=we.n()).done;)xe()}catch(Oe){we.e(Oe)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new La({outboundLayer:Object(In.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return Object(Sn.a)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Object(Nn.a)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(u){n.e(u)}finally{n.f()}var a,i=Object(Nn.a)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(u){i.e(u)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new zn("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(Nn.a)(this.layers);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,Object(Tn.a)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Object(Nn.a)(this.layers);try{for(i.s();!(t=i.n()).done;){var o,u=t.value,s=Object(Nn.a)(u.weights);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new zn("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(g){s.e(g)}finally{s.f()}}}catch(g){i.e(g)}finally{i.f()}var l=[];for(var f in e){var d=f;if(null==r[f]){var h=f.split("/"),p=h.slice(0,-2).concat([h[h.length-1]]);d=p.join("/")}if(null!=r[d])l.push([r[d],e[f]]);else if(n)throw new zn("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new zn("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}Ra(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Wi),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Ui(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){e=Hn(e);for(var r=new Vi,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Hi(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r;return e=Hn(e),r=null==t?Wn(null,e.length):Hn(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Ea(e);if(t.length!==this.inputLayers.length)throw new zn("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Zn);if(o.length>1){var u,s=Object(Nn.a)(o);try{for(s.s();!(u=s.n()).done;){var c,l=u.value,f=this.nodesByDepth[l],d=Object(Nn.a)(f);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var v=[],m=0;m<h.inboundLayers.length;m++){var g=h.inboundLayers[m],b=h.nodeIndices[m],y=h.tensorIndices[m],w=n["".concat(g.name,"_").concat(b,"_").concat(y)];v.push(w)}for(var x=Ea(p.computeOutputShape($n(v))),O=p.inboundNodes.indexOf(h),k=0;k<x.length;k++){n["".concat(p.name,"_").concat(O,"_").concat(k)]=x[k]}}}}catch(D){d.e(D)}finally{d.f()}}}catch(D){s.e(D)}finally{s.f()}}for(var j=[],_=[],S=0;S<this.outputLayers.length;S++){var E=this.outputLayers[S],C=this.outputLayersNodeIndices[S],A=this.outputLayersTensorIndices[S],T="".concat(E.name,"_").concat(C,"_").concat(A);_.push(T)}for(var N=0;N<_.length;N++){var I=_[N];Vn(I in n),j.push(n[I])}return $n(j)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Wn(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],u=t[r];n[a.id]=[o,u]}var s,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Zn),l=Object(Nn.a)(c);try{for(l.s();!(s=l.n()).done;){var f,d=s.value,h=this.nodesByDepth[d],p=Object(Nn.a)(h);try{for(p.s();!(f=p.n()).done;){var v,m=f.value,g=m.outboundLayer,b=m.inputTensors,y=m.outputTensors,w=new Array,x=Object(Nn.a)(b);try{for(x.s();!(v=x.n()).done;){var O=v.value;O.id in n&&w.push(n[O.id])}}catch(q){x.e(q)}finally{x.f()}if(w.length===b.length){var k={},j=void 0,_=void 0,S=void 0,E=void 0;if(null!=m.callArgs&&(k=m.callArgs),1===w.length){var C=Object(i.a)(w[0],2),A=C[0],T=C[1];null==k.mask&&(k.mask=T),S=Hn(g.call(A,k)),E=Hn(g.computeMask(A,T)),j=[A],_=[T]}else j=w.map((function(e){return e[0]})),_=w.map((function(e){return e[1]})),null==k.mask&&(k.mask=_),S=Hn(g.call(j,k)),E=Hn(g.computeMask(j,_));if(g.activityRegularizer)throw new Bn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var N=0;N<y.length;++N){var I=y[N],D=S[N],R=E[N];n[I.id]=[D,R]}}}}catch(q){p.e(q)}finally{p.f()}}}catch(q){l.e(q)}finally{l.f()}var F,M=[],P=[],L=[],z=Object(Nn.a)(this.outputs);try{for(z.s();!(F=z.n()).done;){var B=F.value;Vn(B.id in n,"Could not compute output ".concat(B.name," : ").concat(B.id));var U=Object(i.a)(n[B.id],2),W=U[0],V=U[1];L.push(W.shape),M.push(W),P.push(V)}}catch(q){z.e(q)}finally{z.f()}return[M,P,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Object(Nn.a)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var u=0;u<o.inboundNodes.length;u++){var s=n.nodeKey(o,u);this.containerNodes.has(s)&&(a[s]=t,t+=1)}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new zn("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new zn("Provide either a layer name or layer index");var n,r=Object(Nn.a)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new zn("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Object(a.tidy)((function(){var t,r=[],a=Object(Nn.a)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var u=n.nodeKey(i,o);e.containerNodes.has(u)&&r.push.apply(r,Object(Tn.a)(i.calculateLosses()))}}catch(s){a.e(s)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Object(Nn.a)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,u=o.getClassName(),s=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],d=n.nodeKey(o,l),h={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch(F){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],g=f.nodeIndices[v],b=f.tensorIndices[v],y=r[n.nodeKey(m,g)];null==y&&(y=0),p.push([m.name,y,b,h])}c.push(p)}}}var w={};w.name=o.name,w.className=u,w.config=s,w.inboundNodes=c,a.push(w)}}catch(F){i.e(F)}finally{i.f()}t.layers=a;for(var x=[],O=0;O<this.inputLayers.length;O++){var k=this.inputLayers[O],j=this.inputLayersNodeIndices[O],_=n.nodeKey(k,j);if(this.containerNodes.has(_)){var S=r[_];null!==S&&void 0!==S||(S=0);var E=this.inputLayersTensorIndices[O];x.push([k.name,S,E])}}t.inputLayers=x;for(var C=[],A=0;A<this.outputLayers.length;A++){var T=this.outputLayers[A],N=this.outputLayersNodeIndices[A],I=n.nodeKey(T,N);if(this.containerNodes.has(I)){var D=r[I];null!==D&&void 0!==D||(D=0);var R=this.outputLayersTensorIndices[A];C.push([T.name,D,R])}}return t.outputLayers=C,t}},{key:"stateful",get:function(){if(this._stateful)throw new zn("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Object(Nn.a)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Object(a.tidy)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],u=Object(Nn.a)(t);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s[0],l=s[1],f=s[2];if(n=null==s[3]?{}:s[3],!(c in r))return void i(e,t);var d=r[c];if(d.inboundNodes.length<=l)return void i(e,t);var h=d.inboundNodes[l];o.push(h.outputTensors[f])}}catch(p){u.e(p)}finally{u.f()}o.length>0&&e.apply($n(o),n)}function u(e){var a=e.name,o=oi(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new zn("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var s,c=t.name,l=t.layers,f=Object(Nn.a)(l);try{for(f.s();!(s=f.n()).done;){var d=s.value;u(d)}}catch(U){f.e(U)}finally{f.f()}for(;!tr(a);){var h,p=Object(Nn.a)(l);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var b,y=Object(Nn.a)(g);try{for(y.s();!(b=y.n()).done;){var w=b.value;o(m,w)}}catch(U){y.e(U)}finally{y.f()}}}}catch(U){p.e(U)}finally{p.f()}}var x,O=[],k=[],j=t.inputLayers,_=Object(Nn.a)(j);try{for(_.s();!(x=_.n()).done;){var S=x.value,E=S[0],C=S[1],A=S[2];Vn(E in r);var T=r[E],N=T.inboundNodes[C].outputTensors;O.push(N[A])}}catch(U){_.e(U)}finally{_.f()}var I,D=t.outputLayers,R=Object(Nn.a)(D);try{for(R.s();!(I=R.n()).done;){var F=I.value,M=F[0],P=F[1],L=F[2];Vn(M in r);var z=r[M],B=z.inboundNodes[P].outputTensors;k.push(B[L])}}catch(U){R.e(U)}finally{R.f()}return new e({inputs:O,outputs:k,name:c})}}]),n}(Ba));Co.className="Model",a.serialization.registerClass(Co);var Ao=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return n}(Co);function To(){return(To=Object(Ga.a)(Ha.a.mark((function e(t,n){var r;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=a.io.getLoadHandlers(t,n)).length){e.next=7;break}r.push(a.io.browserHTTPRequest(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new zn("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",No(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function No(e,t,n){return Io.apply(this,arguments)}function Io(){return(Io=Object(Ga.a)(Ha.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new zn("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(i=e.sent,null!=(o=i.modelTopology).model_config&&(o=o.model_config),u=null==r.strict||r.strict,s=null!=i.weightData&&null!=i.weightSpecs&&u,c=oi(Bi(o),n,s),null!=(l=i.trainingConfig)&&c.loadTrainingConfig(l),null!=i.userDefinedMetadata&&c.setUserDefinedMetadata(i.userDefinedMetadata),null==i.weightData){e.next=24;break}if(null!=i.weightSpecs){e.next=17;break}throw new zn("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(f=Do(i.weightData,i.weightSpecs),d=f.modelWeights,h=f.optimizerWeights,c.loadWeights(d,u),!(null!=c.optimizer&&h.length>0)){e.next=22;break}return e.next=22,c.optimizer.setWeights(h);case 22:Object(a.dispose)(d),Object(a.dispose)(h.map((function(e){return e.tensor})));case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t){var n=a.io.decodeWeights(e,t),r={},i=[];return t.forEach((function(e){"optimizer"===e.group?i.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:i}}Ao.className="Functional",a.serialization.registerClass(Ao);var Ro=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:_a("sequential_"),null!=e.layers){var a,i=Object(Nn.a)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(u){i.e(u)}finally{i.f()}}return r}return Object(Sn.a)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new zn("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Co;if(r){if(1!==(t=e).outputs.length)throw new zn("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new zn("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new zn("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Va({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new zn("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new zn("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Ua(this.outputs[0])}this.inboundNodes=[],new La({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Wn(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Aa(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Co({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),Object(ii.a)(Object(Dn.a)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),Object(ii.a)(Object(Dn.a)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Ln("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ln("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){var r,a=arguments;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Ln("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ln("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t,n){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new zn("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new zn("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new zn("Legacy serialization format not supported yet.");r=t}else a.util.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var u=new e(o);if(!(u instanceof n))throw new Bn("Sequential.fromConfig called on non-Sequential input: ".concat(u));var s,c=Object(Nn.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=void 0,d=oi(l,f,i);i&&d.setFastWeightInitDuringBuild(!0),u.add(d)}}catch(h){c.e(h)}finally{c.f()}return u}}]),n}(Co);function Fo(e,t){return null==t&&(t={}),function(e,t){return To.apply(this,arguments)}(e,t)}Ro.className="Sequential",a.serialization.registerClass(Ro);var Mo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),Po=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Jr(e,t)}}]),n}(Mo);Po.className="elu",a.serialization.registerClass(Po);var Lo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.selu(e)}}]),n}(Mo);Lo.className="selu",a.serialization.registerClass(Lo);var zo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.relu(e)}}]),n}(Mo);zo.className="relu",a.serialization.registerClass(zo);var Bo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return Object(a.tidy)((function(){return a.minimum(6,a.relu(e))}))}}]),n}(Mo);Bo.className="relu6",a.serialization.registerClass(Bo);var Uo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return e}}]),n}(Mo);Uo.className="linear",a.serialization.registerClass(Uo);var Wo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.sigmoid(e)}}]),n}(Mo);Wo.className="sigmoid",a.serialization.registerClass(Wo);var Vo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return function(e){return Object(a.tidy)((function(){var t=a.add(.5,a.mul(.2,e));return a.clipByValue(t,0,1)}))}(e)}}]),n}(Mo);Vo.className="hardSigmoid",a.serialization.registerClass(Vo);var qo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.softplus(e)}}]),n}(Mo);qo.className="softplus",a.serialization.registerClass(qo);var $o=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return function(e){return Object(a.tidy)((function(){return a.div(e,a.add(a.abs(e),1))}))}(e)}}]),n}(Mo);$o.className="softsign",a.serialization.registerClass($o);var Ho=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return a.tanh(e)}}]),n}(Mo);Ho.className="tanh",a.serialization.registerClass(Ho);var Go=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return a.softmax(e,t)}}]),n}(Mo);Go.className="softmax",a.serialization.registerClass(Go);var Ko=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return a.logSoftmax(e,t)}}]),n}(Mo);Ko.className="logSoftmax",a.serialization.registerClass(Ko);var Xo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(a.tidy)((function(){return a.mul(a.sigmoid(a.mul(e,t)),e)}))}}]),n}(Mo);Xo.className="swish",a.serialization.registerClass(Xo);var Yo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e){return Object(a.tidy)((function(){return a.mul(e,a.tanh(a.softplus(e)))}))}}]),n}(Mo);function Jo(e){return e.getClassName()}function Qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function Zo(e){if(null==e){var t={className:"linear",config:{}};return Qo(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},Qo(n)}return e instanceof Mo?e:Qo(e)}function eu(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Yo.className="mish",a.serialization.registerClass(Yo);var tu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return n}(a.serialization.Serializable),nu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this),eu(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Object(Sn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=Object(a.zeros)([1]);return t.hasL1&&(n=Object(a.add)(n,Object(a.sum)(a.mul(t.l1,Object(a.abs)(e))))),t.hasL2&&(n=Object(a.add)(n,Object(a.sum)(a.mul(t.l2,Kr(e))))),a.reshape(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(tu);nu.className="L1L2",a.serialization.registerClass(nu);var ru={l1l2:"L1L2"};function au(e){return Yn(e)}function iu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function ou(e){return null==e?null:"string"===typeof e?iu({className:e in ru?ru[e]:e,config:{}}):e instanceof tu?e:iu(e)}var uu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){e=Ca(e);var n=Object(a.relu)(e);return null!=this.maxValue&&(n=Object(a.clipByValue)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);uu.className="ReLU",a.serialization.registerClass(uu);var su=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=Ca(e);return Object(a.leakyRelu)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);su.className="LeakyReLU",a.serialization.registerClass(su);var cu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=xa(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=ou(e.alphaRegularizer),r.alphaConstraint=mr(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new zn("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t=(e=Aa(e)).slice(1);if(null!=this.sharedAxes){var n,r=Object(Nn.a)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new Fa({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Ca(e),Object(a.prelu)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:wa(this.alphaInitializer),alphaRegularizer:au(this.alphaRegularizer),alphaConstraint:pr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);cu.className="PReLU",a.serialization.registerClass(cu);var lu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new Bn("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=Ca(e);return Object(a.elu)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);lu.className="ELU",a.serialization.registerClass(lu);var fu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=Ca(e);return Object(a.mul)(n,Object(a.cast)(Object(a.greater)(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);fu.className="ThresholdedReLU",a.serialization.registerClass(fu);var du=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Go).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=Ca(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);du.className="Softmax",a.serialization.registerClass(du);var hu=n(23);function pu(e,t,n){if("number"===typeof e)return Wn(e,t);if(e.length!==t)throw new zn("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new zn("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function vu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function mu(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Rr([n-t,0]);else{if("same"!==r)throw new zn("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function gu(e,t){return Object(a.tidy)((function(){return kr(t),"channelsFirst"===t?a.transpose(e,[0,2,3,1]):e}))}function bu(e,t){return Object(a.tidy)((function(){return kr(t),"channelsFirst"===t?a.transpose(e,[0,2,3,4,1]):e}))}function yu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),3!==e.shape.length)throw new zn("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new zn("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new zn("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=a.transpose(e,[0,2,1])),"causal"===i)throw new Bn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=a.conv1d(e,t,r,"same"===i?"same":"valid","NWC",u);return null!=n&&(s=Yr(s,n)),s}))}function wu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),3!==e.rank&&4!==e.rank)throw new zn("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new zn("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var c=gu(e,o);if("causal"===i)throw new Bn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=a.fused.conv2d({x:c,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:u,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(c=a.transpose(c,[0,3,1,2])),c}))}function xu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),4!==e.rank&&5!==e.rank)throw new zn("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new zn("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=bu(e,o);if("causal"===i)throw new Bn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=a.conv3d(s,t,r,"same"===i?"same":"valid","NDHWC",u),null!=n&&(s=Yr(s,n)),"channelsFirst"===o&&(s=a.transpose(s,[0,4,1,2,3])),s}))}var Ou=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;if(Object(_n.a)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,ar(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new Bn("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=pu(r.kernelSize,e,"kernelSize"),a.strides=pu(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,jr(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,kr(a.dataFormat),a.activation=Zo(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=xa(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=mr(r.biasConstraint),a.biasRegularizer=ou(r.biasRegularizer),a.activityRegularizer=ou(r.activityRegularizer),a.dilationRate=pu(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new zn("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new zn("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new zn("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return Object(Sn.a)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Jo(this.activation),useBias:this.useBias,biasInitializer:wa(this.biasInitializer),biasRegularizer:au(this.biasRegularizer),activityRegularizer:au(this.activityRegularizer),biasConstraint:pr(this.biasConstraint)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Vn("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,3))throw new zn("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Ba),ku=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;return Object(_n.a)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,ar(a.filters,"filters"),a.kernelInitializer=xa(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=mr(r.kernelConstraint),a.kernelRegularizer=ou(r.kernelRegularizer),a}return Object(Sn.a)(n,[{key:"build",value:function(e){e=Aa(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new zn("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:Object(hu.a)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t;e=Ca(e);var r=null==n.bias?null:n.bias.read(),a=or(n.activation.getClassName());if(null!=a&&2===n.rank)t=wu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=yu(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=wu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new Bn("convolutions greater than 3D are not implemented yet.");t=xu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Aa(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=vu(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:wa(this.kernelInitializer),kernelRegularizer:au(this.kernelRegularizer),kernelConstraint:pr(this.kernelConstraint)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new zn("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(Ou),ju=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Object(Sn.a)(n,[{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,2))throw new zn("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ku);ju.className="Conv2D",a.serialization.registerClass(ju);var _u=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Object(Sn.a)(n,[{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new zn("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ku);_u.className="Conv3D",a.serialization.registerClass(_u);var Su=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,e)).inputSpec=[new Fa({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new zn("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Object(Sn.a)(n,[{key:"build",value:function(e){if(4!==(e=Aa(e)).length)throw new zn("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new zn("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Fa({ndim:4,axes:Object(hu.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){var t=Ca(e);if(4!==t.shape.length)throw new zn("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,i,o=t.shape,u=o[0];"channelsFirst"===n.dataFormat?(r=2,i=3):(r=1,i=2);var s=o[r],c=o[i],l=n.kernelSize[0],f=n.kernelSize[1],d=n.strides[0],h=n.strides[1],p=[u,mu(s,d,l,n.padding),mu(c,h,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=a.transpose(t,[0,2,3,1]));var v=a.conv2dTranspose(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(v=a.transpose(v,[0,3,1,2])),null!=n.bias&&(v=Yr(v,n.bias.read(),n.dataFormat)),null!=n.activation&&(v=n.activation.apply(v)),v}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Aa(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],s=this.strides[1];return a[t]=this.filters,a[n]=mu(a[n],u,i,this.padding),a[r]=mu(a[r],s,o,this.padding),a}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(ju);Su.className="Conv2DTranspose",a.serialization.registerClass(Su);var Eu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,e)).inputSpec=[new Fa({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new zn("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Object(Sn.a)(n,[{key:"build",value:function(e){if(5!==(e=Aa(e)).length)throw new zn("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new zn("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Fa({ndim:5,axes:Object(hu.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){var t=Ca(e);if(5!==t.shape.length)throw new zn("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,i,o,u=t.shape,s=u[0];"channelsFirst"===n.dataFormat?(o=2,r=3,i=4):(o=1,r=2,i=3);var c=u[o],l=u[r],f=u[i],d=n.kernelSize[0],h=n.kernelSize[1],p=n.kernelSize[2],v=n.strides[0],m=n.strides[1],g=n.strides[2],b=[s,mu(c,v,d,n.padding),mu(l,m,h,n.padding),mu(f,g,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=a.transpose(t,[0,2,3,4,1]));var y=a.conv3dTranspose(t,n.kernel.read(),b,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=a.transpose(y,[0,4,1,2,3])),null!==n.bias&&(y=Yr(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=Aa(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],u=this.kernelSize[1],s=this.kernelSize[2],c=this.strides[0],l=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=mu(i[n],c,o,this.padding),i[r]=mu(i[r],l,u,this.padding),i[a]=mu(i[a],f,s,this.padding),i}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(_u);Eu.className="Conv3DTranspose",a.serialization.registerClass(Eu);var Cu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;if(Object(_n.a)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new zn("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new zn("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new zn("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=xa(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=ou(r.depthwiseRegularizer),a.depthwiseConstraint=mr(r.depthwiseConstraint),a.pointwiseInitializer=xa(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=ou(r.pointwiseRegularizer),a.pointwiseConstraint=mr(r.pointwiseConstraint),a}return Object(Sn.a)(n,[{key:"build",value:function(e){if((e=Aa(e)).length<this.rank+2)throw new zn("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new zn("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Fa({ndim:this.rank+2,axes:Object(hu.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t;if(e=Ca(e),1===n.rank)throw new Bn("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=a.transpose(e,[0,2,3,1])),t=a.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Yr(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=a.transpose(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=wa(this.depthwiseInitializer),e.pointwiseInitializer=wa(this.pointwiseInitializer),e.depthwiseRegularizer=au(this.depthwiseRegularizer),e.pointwiseRegularizer=au(this.pointwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseConstraint),e.pointwiseConstraint=pr(this.pointwiseConstraint),e}}]),n}(ku);Cu.className="SeparableConv";var Au=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,2,e)}return n}(Cu);Au.className="SeparableConv2D",a.serialization.registerClass(Au);var Tu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Object(Sn.a)(n,[{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,1))throw new zn("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ku);Tu.className="Conv1D",a.serialization.registerClass(Tu);var Nu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e=Ca(e),"channelsLast"===n.dataFormat){var t=Ur(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Ur(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Ur(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Ur(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);Nu.className="Cropping2D",a.serialization.registerClass(Nu);var Iu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;return Object(_n.a)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,nr(br,"InterpolationFormat",a),r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){var t=Ca(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=a.transpose(t,[0,2,3,1]);var i=n.size[0]*r[2],o=n.size[1]*r[3],u="nearest"===n.interpolation?a.image.resizeNearestNeighbor(t,[i,o]):a.image.resizeBilinear(t,[i,o]);return a.transpose(u,[0,3,1,2])}var s=n.size[0]*r[1],c=n.size[1]*r[2];return"nearest"===n.interpolation?a.image.resizeNearestNeighbor(t,[s,c]):a.image.resizeBilinear(t,[s,c])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);Iu.className="UpSampling2D",a.serialization.registerClass(Iu);var Du=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=xa(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=mr(e.depthwiseConstraint),r.depthwiseRegularizer=ou(e.depthwiseRegularizer),r}return Object(Sn.a)(n,[{key:"build",value:function(e){if((e=Aa(e)).length<4)throw new zn("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new zn("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return Object(a.tidy)((function(){null==i&&(i="channelsLast"),kr(i);var u=gu(e,i);if(4!==e.rank)throw new zn("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new zn("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return u=a.depthwiseConv2d(u,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(u=a.transpose(u,[0,3,1,2])),u}))}(e=Ca(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Yr(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Aa(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=vu(t,this.kernelSize[0],this.padding,this.strides[0]),i=vu(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=wa(this.depthwiseInitializer),e.depthwiseRegularizer=au(this.depthwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseRegularizer),e}}]),n}(Ou);function Ru(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new zn("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Fu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return a.tidy((function(){var c=t.shape.length;if(c<3)throw new zn("Input should be at least 3D, but is ".concat(c,"D."));var l=[1,0].concat(Fr(2,c));if(t=a.transpose(t,l),null!=o)throw new Bn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=a.cast(a.cast(i,"bool"),"float32")).rank===c-1&&(i=a.expandDims(i,-1)),i=a.transpose(i,l)),r&&(t=a.reverse(t,0),null!=i&&(i=a.reverse(i,0)));var f,d,h=[],p=n,v=t.shape[0],m=a.unstack(t);null!=i&&(d=a.unstack(i));for(var g,b=function(t){var n=m[t],r=a.tidy((function(){return e(n,p)}));if(null==i)f=r[0],p=r[1];else{var o=a.tidy((function(){var e=d[t],n=a.sub(a.onesLike(e),e);return{output:a.add(a.mul(r[0],e),a.mul(p[0],n)),newStates:p.map((function(t,i){return a.add(a.mul(r[1][i],e),a.mul(t,n))}))}}));f=o.output,p=o.newStates}s&&h.push(f)},y=0;y<v;++y)b(y);if(s){g=a.stack(h,1)}return[f,g,p]}))}Du.className="DepthwiseConv2D",a.serialization.registerClass(Du);var Mu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;if(Object(_n.a)(this,n),r=t.call(this,e),null==e.cell)throw new zn("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new qu({cells:e.cell}):e.cell).stateSize)throw new zn("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Fa({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Object(Sn.a)(n,[{key:"getStates",value:function(){return null==this.states_?Fr(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Sa(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Object(Nn.a)(t);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push([e[0],u])}}catch(s){o.e(s)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return a.tidy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new Bn("Constants support is not implemented in RNN yet.");Sa(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Fa({shape:[t,null].concat(Object(Tn.a)(n))});var r,i=[e[0]].concat(e.slice(2));if(this.cell.build(i),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!a.util.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new zn("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new Fa({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(a.tidy)((function(){if(!t.stateful)throw new Pn("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new zn("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return a.zeros([r,e])})):t.states_=[a.zeros([r,t.cell.stateSize])];else if(null==e)a.dispose(t.states_),null!=t.keptStates&&(a.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return a.zeros([r,e])})):t.states_[0]=a.zeros([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new zn("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):a.dispose(t.states_);for(var i=0;i<t.states_.length;++i){var o=e[i],u=Array.isArray(t.cell.stateSize)?t.cell.stateSize[i]:t.cell.stateSize,s=[r,u];if(!a.util.arraysEqual(o.shape,s))throw new zn("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[i]=o}}t.states_=t.states_.map((function(e){return a.keep(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Ru(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],u=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var s,c=Object(Nn.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;this.stateSpec.push(new Fa({shape:l.shape}))}}catch(v){c.e(v)}finally{c.f()}u=u.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof Ma){var f=[e].concat(o),d=this.inputSpec.concat(u),h=this.inputSpec;this.inputSpec=d;var p=Object(ii.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=h,p}return Object(ii.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=Ca(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new zn("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var u={training:a},s=Fu((function(e,t){var r=n.cell.call([e].concat(t),u);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=s[0],l=s[1],f=s[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?l:c;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return Object(a.tidy)((function(){var n=a.zeros(e.shape);return n=Pr(n=a.sum(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?qr(n,[1,e]):n})):t.cell.stateSize>1?[qr(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(ii.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=oi(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(Ba);Mu.className="RNN",a.serialization.registerClass(Mu);var Pu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return n}(Ba),Lu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,ar(r.units,"units"),r.activation=Zo(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=xa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=xa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=xa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ou(e.kernelRegularizer),r.recurrentRegularizer=ou(e.recurrentRegularizer),r.biasRegularizer=ou(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Dr([1,Rr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Dr([1,Rr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(Sn.a)(n,[{key:"build",value:function(e){e=Aa(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==(e=e).length)throw new zn("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var i,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$u({ones:function(){return a.onesLike(e)},rate:n.dropout,training:o})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$u({ones:function(){return a.onesLike(r)},rate:n.recurrentDropout,training:o}));var u=n.dropoutMask,s=n.recurrentDropoutMask;i=Hr(null!=u?a.mul(e,u):e,n.kernel.read()),null!=n.bias&&(i=Yr(i,n.bias.read())),null!=s&&(r=a.mul(r,s));var c=a.add(i,Hr(r,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]}))}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Jo(this.activation),useBias:this.useBias,kernelInitializer:wa(this.kernelInitializer),recurrentInitializer:wa(this.recurrentInitializer),biasInitializer:wa(this.biasInitializer),kernelRegularizer:au(this.kernelRegularizer),recurrentRegularizer:au(this.recurrentRegularizer),biasRegularizer:au(this.biasRegularizer),activityRegularizer:au(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(Pu);Lu.className="SimpleRNNCell",a.serialization.registerClass(Lu);var zu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),e.cell=new Lu(e),t.call(this,e)}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(ii.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Mu);zu.className="SimpleRNN",a.serialization.registerClass(zu);var Bu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new zn("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,ar(r.units,"units"),r.activation=Zo(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Zo(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=xa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=xa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=xa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ou(e.kernelRegularizer),r.recurrentRegularizer=ou(e.recurrentRegularizer),r.biasRegularizer=ou(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Dr([1,Rr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Dr([1,Rr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t=(e=Aa(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==(e=e).length)throw new zn("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,o=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$u({ones:function(){return a.onesLike(e)},rate:n.dropout,training:r,count:3})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$u({ones:function(){return a.onesLike(o)},rate:n.recurrentDropout,training:r,count:3}));var u,s,c,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=a.mul(e,l[0]));var d=Hr(e,n.kernel.read());n.useBias&&(d=Yr(d,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(o=a.mul(o,f[0]));var h=n.recurrentKernel.read(),p=a.split(h,[2*n.units,n.units],h.rank-1),v=Object(i.a)(p,2),m=v[0],g=v[1],b=Hr(o,m),y=a.split(d,3,d.rank-1),w=Object(i.a)(y,3),x=w[0],O=w[1],k=w[2],j=a.split(b,2,b.rank-1),_=Object(i.a)(j,2),S=_[0],E=_[1];u=n.recurrentActivation.apply(a.add(x,S)),s=n.recurrentActivation.apply(a.add(O,E));var C=Hr(a.mul(s,o),g);c=n.activation.apply(a.add(k,C));var A=a.add(a.mul(u,o),a.mul(a.add(1,a.neg(u)),c));return[A,A]}))}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Jo(this.activation),recurrentActivation:Jo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:wa(this.kernelInitializer),recurrentInitializer:wa(this.recurrentInitializer),biasInitializer:wa(this.biasInitializer),kernelRegularizer:au(this.kernelRegularizer),recurrentRegularizer:au(this.recurrentRegularizer),biasRegularizer:au(this.biasRegularizer),activityRegularizer:au(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(Pu);Bu.className="GRUCell",a.serialization.registerClass(Bu);var Uu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Bu(e),t.call(this,e)}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(ii.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Mu);Uu.className="GRU",a.serialization.registerClass(Uu);var Wu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,ar(r.units,"units"),r.activation=Zo(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Zo(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=xa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=xa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=xa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=ou(e.kernelRegularizer),r.recurrentRegularizer=ou(e.recurrentRegularizer),r.biasRegularizer=ou(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Dr([1,Rr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Dr([1,Rr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t,n,r=(e=Aa(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new((t=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new aa).apply([i]),o=a.apply([2*i]);return Vr(Vr(n,r),o)}}]),n}(na)).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new zn("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var o=e[1],u=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$u({ones:function(){return a.onesLike(e)},rate:n.dropout,training:r,count:4})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$u({ones:function(){return a.onesLike(o)},rate:n.recurrentDropout,training:r,count:4}));var s,c,l,f,d=n.dropoutMask,h=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=a.mul(e,d[0]));var p=Hr(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=a.mul(o,h[0])),p=a.add(p,Hr(o,n.recurrentKernel.read())),n.useBias&&(p=Yr(p,n.bias.read()));var v=a.split(p,4,p.rank-1),m=Object(i.a)(v,4),g=m[0],b=m[1],y=m[2],w=m[3];s=n.recurrentActivation.apply(g),c=n.recurrentActivation.apply(b),l=a.add(a.mul(c,u),a.mul(s,n.activation.apply(y))),f=n.recurrentActivation.apply(w);var x=a.mul(f,n.activation.apply(l));return[x,x,l]}))}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Jo(this.activation),recurrentActivation:Jo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:wa(this.kernelInitializer),recurrentInitializer:wa(this.recurrentInitializer),biasInitializer:wa(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:au(this.kernelRegularizer),recurrentRegularizer:au(this.recurrentRegularizer),biasRegularizer:au(this.biasRegularizer),activityRegularizer:au(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(Pu);Wu.className="LSTMCell",a.serialization.registerClass(Wu);var Vu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wu(e),t.call(this,e)}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(ii.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Mu);Vu.className="LSTM",a.serialization.registerClass(Vu);var qu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).cells=e.cells,r}return Object(Sn.a)(n,[{key:"stateSize",get:function(){var e,t=[],n=Object(Nn.a)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,Object(Tn.a)(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r,a=(e=e).slice(1),i=[],o=Object(Nn.a)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var u=r.value;Array.isArray(u.stateSize)?i.push(a.splice(0,u.stateSize.length)):i.push(a.splice(0,1))}}catch(m){o.e(m)}finally{o.f()}i.reverse();for(var s,c=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],s=0===l?[e[0]].concat(a):[s[0]].concat(a),s=f.call(s,t),c.push(s.slice(1))}a=[];var d,h=Object(Nn.a)(c.slice().reverse());try{for(h.s();!(d=h.n()).done;){var p,v=d.value;(p=a).push.apply(p,Object(Tn.a)(v))}}catch(m){h.e(m)}finally{h.f()}return[s[0]].concat(a)}))}},{key:"build",value:function(e){var t;Sa(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){Er("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(Nn.a)(this.cells);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,Object(Tn.a)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.weights))}}catch(a){n.e(a)}finally{n.f()}return Da(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Object(Nn.a)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),u=0;u<a.weights.length;++u)n.push([a.weights[u],o[u]])}catch(s){r.e(s)}finally{r.f()}Ra(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Object(Nn.a)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(oi(o,r))}}catch(u){i.e(u)}finally{i.f()}return new e({cells:a})}}]),n}(Pu);function $u(e){var t=e.ones,n=e.rate,r=e.training,i=void 0!==r&&r,o=e.count,u=void 0===o?1:o,s=function(){return Qr(t(),n)},c=function(){return Zr(s,t,i)};return!u||u<=1?a.keep(c().clone()):Array(u).fill(void 0).map(c).map((function(e){return a.keep(e.clone())}))}qu.className="StackedRNNCells",a.serialization.registerClass(qu);var Hu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Gu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),e.unroll)throw new Bn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Bn("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Fa({ndim:5})],r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var r=this;return a.tidy((function(){if(null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new zn("ConvRNN2D cell does not support constants");var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(ii.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Object(Tn.a)(t.slice(2)))),this.returnState&&(t=[t].concat(Object(Tn.a)(Array(2).fill([e[0]].concat(Object(Tn.a)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return a.tidy((function(){var n=t.cell.stateSize,r=e.shape,i=t.computeSingleOutputShape(r),o=[i[0]].concat(Object(Tn.a)(i.slice(2))),u=a.zeros(o);return Array.isArray(n)?Array(n.length).fill(u):[u]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.tidy((function(){if(!t.stateful)throw new Pn("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,i=t.computeSingleOutputShape(r),o=[i[0]].concat(Object(Tn.a)(i.slice(2)));if(null==r[0])throw new zn("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return a.zeros(o)})):t.states_=[a.zeros(o)];else if(null==e)a.dispose(t.states_),null!=t.keptStates&&(a.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return a.zeros(o)})):t.states_[0]=a.zeros(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new zn("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):a.dispose(t.states_);for(var u=0;u<t.states_.length;++u){var s=e[u],c=o;if(!a.util.arraysEqual(s.shape,c))throw new zn("State ".concat(u," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(s.shape));t.states_[u]=s}}t.states_=t.states_.map((function(e){return a.keep(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,u=t.dilationRate,s="channelsFirst"===n,c=e[s?3:2],l=e[s?4:3],f=vu(c,a[0],i,o[0],u[0]),d=vu(l,a[1],i,o[1],u[1]);return[].concat(Object(Tn.a)(e.slice(0,2)),Object(Tn.a)(s?[r,f,d]:[f,d,r]))}}]),n}(Mu);Gu.className="ConvRNN2D";var Ku=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(_n.a)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,u=e.padding,s=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,ar(r.filters,"filters"),r.kernelSize=pu(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return ar(e,"kernelSize")})),r.strides=pu(o||1,2,"strides"),r.strides.forEach((function(e){return ar(e,"strides")})),r.padding=u||"valid",jr(r.padding),r.dataFormat=s||"channelsLast",kr(r.dataFormat),r.dilationRate=pu(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return ar(e,"dilationRate")})),r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t;e=Aa(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new zn("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var u;if(this.unitForgetBias){var s=this.biasInitializer,c=this.filters;u=new((t=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"apply",value:function(e,t){return Wr([s.apply([c]),a.ones([c]),s.apply([2*c])])}}]),n}(na)).className="CustomInit",t)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){if(3!==e.length)throw new zn("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,o=e[0],u=e[1],s=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$u({ones:function(){return a.onesLike(o)},rate:n.dropout,training:r,count:4}));var c=n.dropoutMask,l=function(e,t,n){return t&&t[n]?a.mul(t[n],e):e},f=l(o,c,0),d=l(o,c,1),h=l(o,c,2),p=l(o,c,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$u({ones:function(){return a.onesLike(u)},rate:n.recurrentDropout,training:r,count:4}));var v=n.recurrentDropoutMask,m=l(u,v,0),g=l(u,v,1),b=l(u,v,2),y=l(u,v,3),w=a.split(n.kernel.read(),4,3),x=Object(i.a)(w,4),O=x[0],k=x[1],j=x[2],_=x[3],S=n.useBias?a.split(n.bias.read(),4):[null,null,null,null],E=Object(i.a)(S,4),C=E[0],A=E[1],T=E[2],N=E[3];f=n.inputConv(f,O,C,n.padding),d=n.inputConv(d,k,A,n.padding),h=n.inputConv(h,j,T,n.padding),p=n.inputConv(p,_,N,n.padding);var I=a.split(n.recurrentKernel.read(),4,3),D=Object(i.a)(I,4),R=D[0],F=D[1],M=D[2],P=D[3];m=n.recurrentConv(m,R),g=n.recurrentConv(g,F),b=n.recurrentConv(b,M),y=n.recurrentConv(y,P);var L=n.recurrentActivation.apply(a.add(f,m)),z=n.recurrentActivation.apply(a.add(d,g)),B=a.add(a.mul(z,s),a.mul(L,n.activation.apply(a.add(h,b)))),U=a.mul(n.recurrentActivation.apply(a.add(p,y)),n.activation.apply(B));return[U,U,B]}))}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t=(e.units,Hu(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var i=a.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Yr(i,n,this.dataFormat):i}},{key:"recurrentConv",value:function(e,t){return a.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Wu);Ku.className="ConvLSTM2DCell",a.serialization.registerClass(Ku);var Xu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){Object(_n.a)(this,n);var r=new Ku(e);return t.call(this,Object.assign({},e,{cell:r}))}return Object(Sn.a)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Gu);Xu.className="ConvLSTM2D",a.serialization.registerClass(Xu);var Yu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Object(Sn.a)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return Zr((function(){return Qr(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return Object(ii.a)(Object(Dn.a)(n.prototype),"dispose",this).call(this)}}]),n}(Ba);Yu.className="Dropout",a.serialization.registerClass(Yu);var Ju=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Object(Sn.a)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Yu);Ju.className="SpatialDropout1D",a.serialization.registerClass(Ju);var Qu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,ar(r.units,"units"),r.activation=Zo(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=xa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=xa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=mr(e.kernelConstraint),r.biasConstraint=mr(e.biasConstraint),r.kernelRegularizer=ou(e.kernelRegularizer),r.biasRegularizer=ou(e.biasRegularizer),r.activityRegularizer=ou(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t=(e=Aa(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:Object(hu.a)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Aa(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r,a=Ca(e),i=or(n.activation.getClassName());return null!=i?r=Hr(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=Hr(a,n.kernel.read()),null!=n.bias&&(r=Yr(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Jo(this.activation),useBias:this.useBias,kernelInitializer:wa(this.kernelInitializer),biasInitializer:wa(this.biasInitializer),kernelRegularizer:au(this.kernelRegularizer),biasRegularizer:au(this.biasRegularizer),activityRegularizer:au(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),biasConstraint:pr(this.biasConstraint)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);Qu.className="Dense",a.serialization.registerClass(Qu);var Zu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){e=Aa(e);var t,n=Object(Nn.a)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new zn('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(r){n.e(r)}finally{n.f()}return[e[0],Ir(e,1)]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var i=[0],o=2;o<r.rank;++o)i.push(o);i.push(1),r=Object(a.transpose)(r,i)}return function(e){if(e.rank<=1)throw new zn("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],Ir(e.shape,1)];return a.reshape(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);Zu.className="Flatten",a.serialization.registerClass(Zu);var es=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Zo(e.activation),r}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Jo(this.activation)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);es.className="Activation",a.serialization.registerClass(es);var ts=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return e=Ca(e),t=e,r=n.n,Object(a.tidy)((function(){if(2!==t.shape.length)throw new zn("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return qr(Pr(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);ts.className="RepeatVector",a.serialization.registerClass(ts);var ns=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(_n.a)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Object(Sn.a)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var u=r[o];if(this.isUnknown(u)){if(null!==i)throw new zn("Can only specifiy one unknown dimension.");i=o}else a*=u}var s=Ir(e);if(null!==i){if(0===a||s%a!==0)throw new zn(n);r[i]=s/a}else if(s!==a)throw new zn(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e),i=r.shape,o=i.slice(0,1).concat(n.fixUnknownDimension(i.slice(1),n.targetShape));return Object(a.reshape)(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);ns.className="Reshape",a.serialization.registerClass(ns);var rs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var i=Fr(1,e.dims.length+1);if(!a.util.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Fa({ndim:r.dims.length+1})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){var t=(e=Aa(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Object(a.transpose)(Ca(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);rs.className="Permute",a.serialization.registerClass(rs);var as=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Ca(e);return Object(a.any)(Object(a.notEqual)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e),i=Object(a.any)(Object(a.notEqual)(r,n.maskValue),-1,!0);return Object(a.mul)(r,Object(a.cast)(i,r.dtype))}))}}]),n}(Ba);as.className="Masking",a.serialization.registerClass(as);var is=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Hn(e.inputLength))}return r.inputDim=e.inputDim,ar(r.inputDim,"inputDim"),r.outputDim=e.outputDim,ar(r.outputDim,"outputDim"),r.embeddingsInitializer=xa(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=ou(e.embeddingsRegularizer),r.activityRegularizer=ou(e.activityRegularizer),r.embeddingsConstraint=mr(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return Object(Sn.a)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.maskZero?(e=Ca(e),Object(a.notEqual)(e,Object(a.zerosLike)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Aa(e),null==this.inputLength)return[].concat(Object(Tn.a)(e),[this.outputDim]);var t=Hn(this.inputLength);if(t.length!==e.length-1)throw new zn('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new zn('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(Object(Tn.a)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);"int32"!==r.dtype&&(r=Mr(r,"int32"));var i=Gr(n.embeddings.read(),Object(a.reshape)(r,[r.size]));return Object(a.reshape)(i,Aa(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:wa(this.embeddingsInitializer),embeddingsRegularizer:au(this.embeddingsRegularizer),activityRegularizer:au(this.activityRegularizer),embeddingsConstraint:pr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);is.className="Embedding",a.serialization.registerClass(is);var os=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){throw new Bn}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new zn("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Aa(e)]),(e=e).length<2)throw new zn("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(c){r.e(c)}finally{r.f()}if((n=er(n)).length>1)throw new zn("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var u=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,u)}var s=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===er(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var i,o=Rr(r),u=Object(Nn.a)(e);try{for(u.s();!(i=u.n()).done;){for(var s=i.value,c=s.rank,l=0;l<o-c;++l)s=Pr(s,1);t.push(s)}}catch(E){u.e(E)}finally{u.f()}return n.mergeFunction(t)}var f,d=!1,h=Object(Nn.a)(e);try{for(h.s();!(f=h.n()).done;){var p=f.value,v=p.rank;if(null==v){var m=p.shape,g=m[0],b=m.slice(1).concat([g]),y=a.reshape(p,[g].concat(Ir(m.slice(1))));y=a.transpose(y,[1,0]),y=a.reshape(y,b),t.push(y),d=!0}else if(v>1){var w=Fr(1,v).concat([0]);t.push(a.transpose(p,w)),d=!0}else t.push(p)}}catch(E){h.e(E)}finally{h.f()}var x=n.mergeFunction(t),O=x.rank;if(d)if(null==O){var k=x.shape,j=k[k.length-1],_=[j].concat(k.slice(0,k.length-1));x=a.reshape(a.transpose(a.reshape(x,[-1,j]),[1,0]),_)}else if(O>1){var S=[O-1].concat(Fr(0,O-1));x=a.transpose(x,S)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Object(Nn.a)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;null!=u&&null!==u[0]&&i.push(u[0])}}catch(s){o.e(s)}finally{o.f()}return t=1===(i=er(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return a.tidy((function(){if(null==t)return null;if(!Array.isArray(t))throw new zn("`mask` should be an Array");if(!Array.isArray(e))throw new zn("`inputs` should be an Array");if(t.length!==e.length)throw new zn("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:a.expandDims(e,0)})))[0],r=1;r<t.length-1;++r)n=a.logicalAnd(n,t[r]);return n}))}}]),n}(Ba),us=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.add(t,e[n]);return t}))}}]),n}(os);us.className="Add",a.serialization.registerClass(us);var ss=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.mul(t,e[n]);return t}))}}]),n}(os);ss.className="Multiply",a.serialization.registerClass(ss);var cs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.add(t,e[n]);return a.mul(1/e.length,t)}))}}]),n}(os);cs.className="Average",a.serialization.registerClass(cs);var ls=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=a.maximum(t,e[n]);return t}))}}]),n}(os);ls.className="Maximum",a.serialization.registerClass(ls);var fs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=a.minimum(t,e[n]);return t}))}}]),n}(os);fs.className="Minimum",a.serialization.registerClass(fs);var ds=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(Sn.a)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new zn("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;var t,n=!0,r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(d){r.e(d)}finally{r.f()}if(!n){for(var i=[],o=0;o<e.length;++o){var u=e[o].slice();u.splice(this.axis,1);var s,c=!1,l=Object(Nn.a)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(a.util.arraysEqual(f,u)){c=!0;break}}}catch(d){l.e(d)}finally{l.f()}c||i.push(u)}if(i.length>1)throw new zn("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Object(a.tidy)((function(){return Wr(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new zn("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Object(Nn.a)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new zn("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new zn("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new zn("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return a.tidy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var i=[],o=0;o<e.length;++o)null==t[o]?i.push(a.cast(a.onesLike(e[o]),"bool")):t[o].rank<e[o].rank?i.push(a.expandDims(t[o],-1)):i.push(t[o]);var u=a.concat(i,n.axis);return a.all(u,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(os);function hs(e,t){for(;e<0;)e+=t;return e}ds.className="Concatenate",a.serialization.registerClass(ds);var ps=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(Sn.a)(n,[{key:"build",value:function(e){a.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Bn("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new zn("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new zn("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return hs(t,e[n].shape.length)})):[hs(this.axes,n.shape.length),hs(this.axes,r.shape.length)],this.normalize&&(n=ui(n,t[0]),r=ui(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Bn("batchDot is not implemented for tensors of 4D or higher rank yet");if(a.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),a.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Bn("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);var o=n;return a.tidy((function(){var n,u;if(r>i){n=r-i;for(var s=[],c=0;c<n;++c)s.push(1);t=a.reshape(t,t.shape.concat(s))}else if(i>r){n=i-r;for(var l=[],f=0;f<n;++f)l.push(1);e=a.reshape(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)u=o[0]===o[1]?a.sum(a.mul(e,t),o[0]):a.sum(a.mul(a.transpose(e,[1,0]),t),o[1]);else{var d=o[0]!==e.shape.length-1,h=o[1]===t.shape.length-1;u=a.matMul(e,t,d,h)}if(n>0){for(var p,v=[],m=p=r>i?r+i-3:r-1;m<p+n;++m)v.push(m);u=a.squeeze(u,v)}return 1===u.shape.length&&(u=a.expandDims(u,1)),u}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[hs(this.axes,e.length),hs(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){a.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Bn("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var i=t.concat(n);return 1===i.length&&i.push(1),i}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(os);ps.className="Dot",a.serialization.registerClass(ps);var vs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);return Zr((function(){return Object(a.add)($r(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(Ba);vs.className="GaussianNoise",a.serialization.registerClass(vs);var ms=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Ca(e);if(n.rate>0&&n.rate<1){return Zr((function(){var e=Math.sqrt(n.rate/(1-n.rate));return Object(a.mul)(r,$r(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(Ba);ms.className="GaussianDropout",a.serialization.registerClass(ms);var gs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Object(Sn.a)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Ca(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Zr((function(){var t=Ca(e),i=-1.7580993408473766,o=Object(a.greaterEqual)(Object(a.randomUniform)(r),n.rate);o=Mr(o,"float32");var u=Math.pow((1-n.rate)*(1+n.rate*Math.pow(i,2)),-.5),s=-u*i*n.rate,c=Object(a.add)(Object(a.mul)(t,o),Object(a.mul)(Object(a.add)(o,-1),i));return Object(a.add)(Object(a.mul)(c,u),s)}),(function(){return Ca(e)}),t.training||!1)}return e}))}}]),n}(Ba);function bs(e,t,n,r,i){var o,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=a.batchNorm2d(e,t,n,r,i,u);else if(3===e.rank)o=a.batchNorm3d(e,t,n,r,i,u);else{if(4!==e.rank)throw new Bn("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=a.batchNorm4d(e,t,n,r,i,u)}return o}function ys(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(a.tidy)((function(){var o=a.moments(e,r),u=o.mean,s=o.variance;return[bs(e,u,s,n,t,i),u,s]}))}function ws(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(a.tidy)((function(){var o,u=a.moments(e,r),s=u.mean,c=u.variance,l=[],f=Object(Nn.a)(Fr(0,e.rank));try{for(f.s();!(o=f.n()).done;){var d=o.value;-1!==r.indexOf(d)?l.push(1):l.push(e.shape[d])}}catch(g){f.e(g)}finally{f.f()}var h=Object(a.reshape)(s,l),p=Object(a.reshape)(c,l),v=null==t?null:Object(a.reshape)(t,l),m=null==n?null:Object(a.reshape)(n,l);return[bs(e,h,p,m,v,i),s,c]}))}gs.className="AlphaDropout",a.serialization.registerClass(gs);var xs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=xa(e.betaInitializer||"zeros"),r.gammaInitializer=xa(e.gammaInitializer||"ones"),r.movingMeanInitializer=xa(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=xa(e.movingVarianceInitializer||"ones"),r.betaConstraint=mr(e.betaConstraint),r.gammaConstraint=mr(e.gammaConstraint),r.betaRegularizer=ou(e.betaRegularizer),r.gammaRegularizer=ou(e.gammaRegularizer),r}return Object(Sn.a)(n,[{key:"build",value:function(e){e=Aa(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new zn("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Fa({ndim:e.length,axes:Object(hu.a)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null!=t.training&&t.training,o=Ca(e),u=o.shape,s=u.length,c=Fr(0,s),l=n.axis>=0?n.axis:n.axis+s;c.splice(l,1);var f=Wn(1,s);f[l]=u[l];var d=c.slice();d.sort();var h=!a.util.arraysEqual(d,Fr(0,s).slice(0,s-1));if(!r)return function(){if(h){var e=Object(a.reshape)(n.movingMean.read(),f),t=Object(a.reshape)(n.movingVariance.read(),f),r=n.center?Object(a.reshape)(n.beta.read(),f):null,i=n.scale?Object(a.reshape)(n.gamma.read(),f):null;return bs(o,e,t,r,i,n.epsilon)}return bs(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return a.util.arraysEqual(r.slice().sort(),Fr(0,e.rank-1))?ys(e,t,n,r,i):ws(e,t,n,r,i)}(o,n.gamma.read(),n.beta.read(),c,n.epsilon),v=Object(i.a)(p,3),m=v[0],g=v[1],b=v[2],y=function(e,t,n){a.tidy((function(){var r=1-n,i=e.read(),o=a.mul(a.sub(i,t),r);e.write(a.sub(i,o))}))};return y(n.movingMean,g,n.momentum),y(n.movingVariance,b,n.momentum),m}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:wa(this.betaInitializer),gammaInitializer:wa(this.gammaInitializer),movingMeanInitializer:wa(this.movingMeanInitializer),movingVarianceInitializer:wa(this.movingVarianceInitializer),betaRegularizer:au(this.betaRegularizer),gammaRegularizer:au(this.gammaRegularizer),betaConstraint:pr(this.betaConstraint),gammaConstraint:pr(this.gammaConstraint)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);xs.className="BatchNormalization",a.serialization.registerClass(xs);var Os=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=Object(Nn.a)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(u){i.e(u)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=xa(e.betaInitializer||"zeros"),r.gammaInitializer=xa(e.gammaInitializer||"ones"),r.betaRegularizer=ou(e.betaRegularizer),r.gammaRegularizer=ou(e.gammaRegularizer),r.supportsMasking=!0,r}return Object(Sn.a)(n,[{key:"build",value:function(e){var t=(e=Aa(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Object(Nn.a)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(u){a.e(u)}finally{a.f()}if(this.axis.length!==er(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Ca(e),i=r.shape,o=i.length;return Object(a.tidy)((function(){var e,t=Object(a.moments)(r,n.axis,!0),u=t.mean,s=t.variance,c=Wn(1,o),l=Object(Nn.a)(n.axis);try{for(l.s();!(e=l.n()).done;){var f=e.value;c[f]=i[f]}}catch(b){l.e(b)}finally{l.f()}for(var d=function(e){return null!=e&&e.shape.length!==o&&n.axis!==[o-1]?a.reshape(e,c):e},h=d(n.gamma.read()),p=d(n.beta.read()),v=[],m=[],g=0;g<o;++g)-1!==n.axis.indexOf(g)?(v.push(i[g]),m.push(1)):(v.push(1),m.push(i[g]));return u=a.tile(u,v),s=a.tile(s,v),h=a.tile(h,m),p=a.tile(p,m),bs(r,u,s,p,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:wa(this.betaInitializer),gammaInitializer:wa(this.gammaInitializer),betaRegularizer:au(this.betaRegularizer),gammaRegularizer:au(this.gammaRegularizer)},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);Os.className="LayerNormalization",a.serialization.registerClass(Os);var ks=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new zn("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new zn("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new zn("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new Fa({ndim:4})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Aa(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return t=Ca(e),r=n.padding,i=n.dataFormat,Object(a.tidy)((function(){if(4!==t.rank)throw new zn("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new zn("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==i&&(i="channelsLast"),"channelsLast"!==i&&"channelsFirst"!==i)throw new zn("Unknown data format: ".concat(i,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===i?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],a.pad(t,e)}));var t,r,i}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba);function js(e,t,n,r,i,o){return Object(a.tidy)((function(){var u;kr(i),_r(o),jr(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=gu(e,i);var s="same"===r?"same":"valid";return u="max"===o?a.maxPool(e,t,n,s):a.avgPool(e,t,n,s),"channelsFirst"===i&&(u=a.transpose(u,[0,3,1,2])),u}))}function _s(e,t,n,r,i,o){return Object(a.tidy)((function(){var u;kr(i),_r(o),jr(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=bu(e,i);var s="same"===r?"same":"valid";return u="max"===o?a.maxPool3d(e,t,n,s):a.avgPool3d(e,t,n,s),"channelsFirst"===i&&(u=a.transpose(u,[0,4,1,2,3])),u}))}ks.className="ZeroPadding2D",a.serialization.registerClass(ks);var Ss=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new zn("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(ar(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new zn("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,jr(r.padding),r.inputSpec=[new Fa({ndim:3})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){var t=vu((e=Aa(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t),e=Pr(Ca(e),2);var r=n.poolingFunction(Ca(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return a.squeeze(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba),Es=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),js(e,t,n,r,a,"max")}}]),n}(Ss);Es.className="MaxPooling1D",a.serialization.registerClass(Es);var Cs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),js(e,t,n,r,a,"avg")}}]),n}(Ss);Cs.className="AveragePooling1D",a.serialization.registerClass(Cs);var As=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new zn("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return ar(r.poolSize,"poolSize"),ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),jr(r.padding),r.inputSpec=[new Fa({ndim:4})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){e=Aa(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=vu(t,this.poolSize[0],this.padding,this.strides[0]),n=vu(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Ca(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba),Ts=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),js(e,t,n,r,a,"max")}}]),n}(As);Ts.className="MaxPooling2D",a.serialization.registerClass(Ts);var Ns=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),js(e,t,n,r,a,"avg")}}]),n}(As);Ns.className="AveragePooling2D",a.serialization.registerClass(Ns);var Is=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(_n.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new zn("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return ar(r.poolSize,"poolSize"),ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),jr(r.padding),r.inputSpec=[new Fa({ndim:5})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){e=Aa(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=vu(t,this.poolSize[0],this.padding,this.strides[0]),n=vu(n,this.poolSize[1],this.padding,this.strides[1]),r=vu(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Ca(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba),Ds=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),_s(e,t,n,r,a,"max")}}]),n}(Is);Ds.className="MaxPooling3D",a.serialization.registerClass(Ds);var Rs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e)}return Object(Sn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),jr(r),_s(e,t,n,r,a,"avg")}}]),n}(Is);Rs.className="AveragePooling3D",a.serialization.registerClass(Rs);var Fs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).inputSpec=[new Fa({ndim:3})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new Bn}}]),n}(Ba),Ms=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e||{})}return Object(Sn.a)(n,[{key:"call",value:function(e,t){return Object(a.tidy)((function(){var t=Ca(e);return a.mean(t,1)}))}}]),n}(Fs);Ms.className="GlobalAveragePooling1D",a.serialization.registerClass(Ms);var Ps=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(_n.a)(this,n),t.call(this,e||{})}return Object(Sn.a)(n,[{key:"call",value:function(e,t){return Object(a.tidy)((function(){var t=Ca(e);return a.max(t,1)}))}}]),n}(Fs);Ps.className="GlobalMaxPooling1D",a.serialization.registerClass(Ps);var Ls=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),r.inputSpec=[new Fa({ndim:4})],r}return Object(Sn.a)(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new Bn}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ba),zs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=Ca(e);return"channelsLast"===n.dataFormat?a.mean(t,[1,2]):a.mean(t,[2,3])}))}}]),n}(Ls);zs.className="GlobalAveragePooling2D",a.serialization.registerClass(zs);var Bs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(_n.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=Ca(e);return"channelsLast"===n.dataFormat?a.max(t,[1,2]):a.max(t,[2,3])}))}}]),n}(Ls);Bs.className="GlobalMaxPooling2D",a.serialization.registerClass(Bs);var Us=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).layer=e.layer,r}return Object(Sn.a)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(ii.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=oi(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(Ba),Ws=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(_n.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Object(Sn.a)(n,[{key:"build",value:function(e){if((e=Aa(e)).length<3)throw new zn("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),Object(ii.a)(Object(Dn.a)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Aa(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return Fu((function(e,r){return[Ca(n.layer.call(e,t)),[]]}),e=Ca(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Us);Ws.className="TimeDistributed",a.serialization.registerClass(Ws);var Vs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(_n.a)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=oi(i),a.goBackwards=!0!==a.goBackwards;var o,u={};if(u.className=e.layer.getClassName(),u.config=a,r.backwardLayer=oi(u),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,nr(xr,"BidirectionalMergeMode",o),e.weights)throw new Bn("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Object(Sn.a)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):$n(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Ru(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return Object(ii.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t);var o=[],u=[];if(null!=r){var s=r.length;if(s%2>0)throw new zn("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,Object(Tn.a)(r));var c=r.map((function(e){return new Fa({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,s/2),this.backwardLayer.stateSpec=c.slice(s/2),u.push.apply(u,Object(Tn.a)(c))}if(null!=a)throw new Bn("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof Ma,f=0,d=o;f<d.length;f++){if(d[f]instanceof Ma!==l)throw new zn("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var h=[e].concat(o),p=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=p;var m=Object(ii.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,m}return Object(ii.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r,i,o,u,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),i=n.backwardLayer.call(e,t);else{var c=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:c})),i=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),n.returnSequences&&(i=a.reverse(i,1)),"concat"===n.mergeMode?u=Wr([r,i]):"sum"===n.mergeMode?u=a.add(r,i):"ave"===n.mergeMode?u=a.mul(.5,a.add(r,i)):"mul"===n.mergeMode?u=a.mul(r,i):null==n.mergeMode&&(u=[r,i]),n.returnState?null==n.mergeMode?u.concat(o):[u].concat(o):u}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Er(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Er(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(ii.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=Object(ii.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=oi(t.layer);if(delete t.layer,null!=t.numConstants)throw new Bn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Us);Vs.className="Bidirectional",a.serialization.registerClass(Vs);n(97),n(6),n(165),n(363),n(270),n(263),n(181),n(193),n(199),n(74),n(361),n(362),n(364),n(365),n(366),n(256),n(367),n(370),n(99),n(185),n(375),n(376),n(266),n(187),n(387),n(169),n(126),n(274),n(276),n(389),n(267),n(226),n(392),n(371),n(196),n(272),n(188),n(195),n(379);n(258);var qs=n(42);n(259),n(150),n(372),n(182),n(192),n(384),n(368),n(383),n(262);n(147),n(380),n(385),n(168),n(386),n(273),n(161),n(393),n(284),n(388);n(282),n(283),n(83),n(194),n(191),n(374),n(129),n(265),n(390),n(382),n(411),n(112),n(138),n(167),n(252),n(253),n(254),n(255),n(257),n(373),n(391),n(155),n(394),n(395),n(197),n(170),n(198),n(280),n(269),n(261),n(159),n(369);var $s=n(307),Hs=n(76),Gs=n(113),Ks=function(){function e(){Object(_n.a)(this,e),this.size=null}return Object(Sn.a)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return a.util.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),Xs(Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,Ys));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Xs(Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,Xs(Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return a.tidy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return Xs(Object(Ga.a)(Ha.a.mark((function n(){return Ha.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return a.tidy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return Xs(Object(Ga.a)(Ha.a.mark((function n(){return Ha.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return Xs(Object(Ga.a)(Ha.a.mark((function n(){return Ha.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Xs(Object(Ga.a)(Ha.a.mark((function t(){var r;return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(Hs.e)(Object(Ga.a)(Ha.a.mark((function e(){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Object(Hs.d)(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Xs(Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,i=$s.alea(t||a.util.now().toString());return Xs(Object(Ga.a)(Ha.a.mark((function t(){var a;return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.int32(),n&&(a+=i.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,a.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Xs(Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Object(En.a)(a,n);var r=Object(Cn.a)(a);function a(){var e;return Object(_n.a)(this,a),(e=r.apply(this,arguments)).size=t,e}return Object(Sn.a)(a,[{key:"iterator",value:function(){var t=Object(Ga.a)(Ha.a.mark((function t(){return Ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(Ks))}function Ys(e){if(null===e)return null;var t=e[0];return Object(Gs.a)(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof a.Tensor?a.stack(e):a.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}Ks.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote"),Hs.a,Hs.a,n(448).a;function Js(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&a.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var Qs=a.kernel_impls.whereImpl,Zs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){var e;return Object(_n.a)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new a.DataStorage(Object(In.a)(e),Object(a.engine)()),e}return Object(Sn.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Object(a.env)().get("IS_NODE")&&a.backend_util.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){var i=n.map((function(e){return a.util.encodeString(e)}));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var i=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return a.backend_util.mergeRealAndImagArrays(i,o)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return a.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Object(a.engine)().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n,r;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.util.now(),t(),r=a.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){Js([e],"where");var t=this.readSync(e.dataId);return Qs(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return Object(ii.a)(Object(Dn.a)(n.prototype),"epsilon",this).call(this)}}]),n}(a.KernelBackend);Zs.nextDataId=0;function ec(e,t,n){return function(r){var i=r.inputs,o=r.attrs,u=r.backend,s=i.x;if(Js(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var c=u,l=c.data.get(s.dataId).values,f=a.util.sizeFromShape(s.shape),d=n||s.dtype,h=a.util.getArrayFromDType(d,f),p=0;p<f;++p)h[p]=t(l[p],o);return c.makeTensorInfo(s.shape,d,h)}}function tc(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,u=a.x;if(Js(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var s=o,c=s.data.get(u.dataId).values,l=n||u.dtype,f=t(c,l,i);return s.makeTensorInfo(u.shape,l,f)}}Object(a.registerBackend)("cpu",(function(){return new Zs}),1);var nc=ec(a.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),rc={kernelName:a.Elu,backendName:"cpu",kernelFunc:nc};function ac(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var ic={kernelName:a.Identity,backendName:"cpu",kernelFunc:ac};function oc(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.alpha;Js([i],"leakyRelu");for(var u=a.util.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,c=a.util.getTypedArrayFromDType("float32",u),l=0;l<s.length;l++)c[l]=s[l]<0?o*s[l]:s[l];return n.makeTensorInfo(i.shape,"float32",c)}var uc={kernelName:a.LeakyRelu,backendName:"cpu",kernelFunc:oc};function sc(e){return function(t,n,r,i,o){var u=a.backend_util.assertAndGetBroadcastShape(t,n),s=u.length,c=a.util.computeStrides(u),l=a.util.sizeFromShape(u),f=a.util.getTypedArrayFromDType(o,l),d=t.length,h=n.length,p=a.util.computeStrides(t),v=a.util.computeStrides(n),m=a.backend_util.getBroadcastDims(t,u),g=a.backend_util.getBroadcastDims(n,u);if(m.length+g.length===0)for(var b=0;b<f.length;++b)f[b]=e(r[b%r.length],i[b%i.length]);else for(var y=function(t){var n=a.util.indexToLoc(t,s,c),o=n.slice(-d);m.forEach((function(e){return o[e]=0}));var u=a.util.locToIndex(o,d,p),l=n.slice(-h);g.forEach((function(e){return l[e]=0}));var b=a.util.locToIndex(l,h,v);f[t]=e(r[u],i[b])},w=0;w<f.length;++w)y(w);return[f,u]}}var cc=sc((function(e,t){return e<0?t*e:e}));function lc(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;Js([r,a],"prelu");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=cc(r.shape,a.shape,o,u,r.dtype),c=Object(i.a)(s,2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}var fc={kernelName:a.Prelu,backendName:"cpu",kernelFunc:lc},dc=ec(a.Relu,(function(e){return Math.max(0,e)})),hc={kernelName:a.Relu,backendName:"cpu",kernelFunc:dc},pc=ec(a.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),vc={kernelName:a.Relu6,backendName:"cpu",kernelFunc:pc};function mc(e){return function(t,n,r){for(var i=a.util.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}var gc=mc((function(e){return 1/(1+Math.exp(-e))})),bc=ec(a.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),yc={kernelName:a.Sigmoid,backendName:"cpu",kernelFunc:bc};function wc(e,t,n,r,a){if("linear"===n)return ac({inputs:{x:t},backend:e});if("relu"===n)return dc({inputs:{x:t},backend:e});if("elu"===n)return nc({inputs:{x:t},backend:e});if("relu6"===n)return pc({inputs:{x:t},backend:e});if("prelu"===n)return lc({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return oc({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return bc({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function xc(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.makeTensorInfo(r.shape,"complex64");return n.data.get(u.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},u}var Oc={kernelName:a.Complex,backendName:"cpu",kernelFunc:xc};function kc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=kc(e,t,"float32"),i=kc(e,t,"float32");return xc({inputs:{real:r,imag:i},backend:e})}var o=a.util.makeZerosTypedArray(a.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,o)}function jc(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var _c={kernelName:a.Real,backendName:"cpu",kernelFunc:jc};function Sc(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.dtype;if("complex64"===u){if("complex64"===o.dtype)return ac({inputs:{x:o},backend:n});var s=kc(n,o.shape,o.dtype),c=Sc({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=xc({inputs:{real:c,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var f=jc({inputs:{input:o},backend:n}),d=Sc({inputs:{x:f},backend:n,attrs:{dtype:u}});return n.disposeIntermediateTensorInfo(f),d}if(!a.util.hasEncodingLoss(o.dtype,u)){var h=ac({inputs:{x:o},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:u}}if("int32"===u){var p=n.data.get(o.dataId).values,v=Int32Array.from(p);return n.makeTensorInfo(o.shape,"int32",v)}if("bool"===u){var m=n.data.get(o.dataId).values,g=a.util.toTypedArray([0],o.dtype),b=sc((function(e,t){return e!==t?1:0}))(o.shape,[],m,g,"bool"),y=Object(i.a)(b,2),w=y[0],x=y[1];return n.makeTensorInfo(x,"bool",w)}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(u))}var Ec={kernelName:a.Cast,backendName:"cpu",kernelFunc:Sc};function Cc(e,t,n,r){return null==n?function(n){var o=n.inputs,u=n.backend,s=o.a,c=o.b,l=u;Js([s,c],e);var f=l.data.get(s.dataId).values,d=l.data.get(c.dataId).values,h="string"===s.dtype?a.backend_util.fromUint8ToStringArray(f):f,p="string"===s.dtype?a.backend_util.fromUint8ToStringArray(d):d,v=r||s.dtype,m=t(s.shape,c.shape,h,p,v),g=Object(i.a)(m,2),b=g[0],y=g[1];return l.makeTensorInfo(y,v,b)}:function(e){var a=e.inputs,o=e.backend,u=a.a,s=a.b,c=o;if("complex64"===u.dtype||"complex64"===s.dtype){var l=Sc({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),f=c.data.get(l.dataId),d=f.complexTensorInfos.real,h=f.complexTensorInfos.imag,p=c.data.get(d.dataId).values,v=c.data.get(h.dataId).values,m=Sc({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),g=c.data.get(m.dataId),b=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,w=c.data.get(b.dataId).values,x=c.data.get(y.dataId).values,O=n(u.shape,s.shape,p,v,w,x),k=Object(i.a)(O,3),j=k[0],_=k[1],S=k[2],E=c.makeTensorInfo(S,"float32",j),C=c.makeTensorInfo(S,"float32",_),A=xc({inputs:{real:E,imag:C},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(E),c.disposeIntermediateTensorInfo(C),A}var T=c.data.get(u.dataId).values,N=c.data.get(s.dataId).values,I=r||u.dtype,D=t(u.shape,s.shape,T,N,I),R=Object(i.a)(D,2),F=R[0],M=R[1];return c.makeTensorInfo(M,I,F)}}function Ac(e){return function(t,n,r,i,o,u){var s=a.backend_util.assertAndGetBroadcastShape(t,n),c=a.util.sizeFromShape(s),l=s.length,f=a.util.computeStrides(s),d=a.util.getTypedArrayFromDType("float32",c),h=a.util.getTypedArrayFromDType("float32",c),p=a.backend_util.getBroadcastDims(t,s),v=a.backend_util.getBroadcastDims(n,s),m=a.backend_util.mergeRealAndImagArrays(r,i),g=a.backend_util.mergeRealAndImagArrays(o,u),b=t.length,y=a.util.computeStrides(t),w=n.length,x=a.util.computeStrides(n);if(p.length+v.length===0)for(var O=0;O<d.length;O++){var k=O%m.length,j=O%g.length,_=e(m[2*k],m[2*k+1],g[2*j],g[2*j+1]);d[O]=_.real,h[O]=_.imag}else for(var S=function(t){var n=a.util.indexToLoc(t,l,f),r=n.slice(-b);p.forEach((function(e){return r[e]=0}));var i=a.util.locToIndex(r,b,y),o=n.slice(-w);v.forEach((function(e){return o[e]=0}));var u=a.util.locToIndex(o,w,x),s=e(m[2*i],m[2*i+1],g[2*u],g[2*u+1]);d[t]=s.real,h[t]=s.imag},E=0;E<d.length;E++)S(E);return[d,h,s]}}var Tc=sc((function(e,t){return e+t})),Nc=Ac((function(e,t,n,r){return{real:e+n,imag:t+r}})),Ic=Cc(a.Add,Tc,Nc),Dc={kernelName:a.Add,backendName:"cpu",kernelFunc:Ic};function Rc(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.shape,u=a.util.sizeFromShape(i.shape),s=a.util.inferFromImplicitShape(o,u),c=a.util.sizeFromShape(s);a.util.assert(u===c,(function(){return"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var l=n.data.get(i.dataId);if(null!=l.complexTensorInfos){var f=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;f.shape=s,d.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}var Fc={kernelName:a.Reshape,backendName:"cpu",kernelFunc:Rc};function Mc(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.a,u=t.b,s=r.transposeA,c=r.transposeB;Js([o,u],"matMul");var l=o.shape.length,f=u.shape.length,d=s?o.shape[l-2]:o.shape[l-1],h=c?u.shape[f-1]:u.shape[f-2],p=s?o.shape[l-1]:o.shape[l-2],v=c?u.shape[f-2]:u.shape[f-1],m=o.shape.slice(0,-2),g=u.shape.slice(0,-2),b=a.util.sizeFromShape(m),y=a.util.sizeFromShape(g),w=b===y||1===b||1===y;a.util.assert(l>=2&&f>=2&&w,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(m,") and (").concat(g,").")}));var x=(b>y?o.shape.slice(0,-2):u.shape.slice(0,-2)).concat([p,v]);a.util.assert(d===h,(function(){return"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(u.shape," and transposeA=").concat(s)+" and transposeB=".concat(c," must match.")}));for(var O=c?[y,v,h]:[y,h,v],k=Rc({inputs:{x:o},backend:n,attrs:{shape:s?[b,d,p]:[b,p,d]}}),j=Rc({inputs:{x:u},backend:n,attrs:{shape:O}}),_=s?k.shape[1]:k.shape[2],S=s?k.shape[2]:k.shape[1],E=c?j.shape[1]:j.shape[2],C=Math.max(b,y),A=n.data.get(k.dataId).values,T=n.data.get(j.dataId).values,N=a.util.computeStrides(k.shape),I=a.util.computeStrides(j.shape),D=s?[N[0],1,N[1]]:[N[0],N[1],1],R=Object(i.a)(D,3),F=R[0],M=R[1],P=R[2],L=c?[1,I[1],I[0]]:[I[1],1,I[0]],z=Object(i.a)(L,3),B=z[0],U=z[1],W=z[2],V=S*E,q=Object(a.buffer)([C,S,E],k.dtype),$=q.values,H=n.blockSize,G=0;G<C;G++)for(var K=0;K<S;K+=H)for(var X=0;X<E;X+=H)for(var Y=0;Y<_;Y+=H)for(var J=Math.min(K+H,S),Q=Math.min(X+H,E),Z=Math.min(Y+H,_),ee=K;ee<J;ee++)for(var te=X;te<Q;te++){for(var ne=0,re=Y;re<Z;re++){var ae=Math.min(G,b-1)*F,ie=Math.min(G,y-1)*W;ne+=A[ae+ee*M+re*P]*T[re*B+te*U+ie]}$[G*V+(ee*E+te)]+=ne}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(j),n.makeTensorInfo(x,q.dtype,q.values)}var Pc={kernelName:a.BatchMatMul,backendName:"cpu",kernelFunc:Mc};var Lc={kernelName:a._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,u=a.a,s=a.b,c=a.bias,l=a.preluActivationWeights,f=o.transposeA,d=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=Mc({inputs:{a:u,b:s},attrs:{transposeA:f,transposeB:d},backend:i}),c&&(n=Ic({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),h&&(r=wc(i,t,h,l,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var b=g[m];i.disposeIntermediateTensorInfo(b)}return t}};function zc(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Bc={kernelName:a.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;Js(t,"abs");var r=new Float32Array(a.util.sizeFromShape(t.shape));return r=zc(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}},Uc=ec(a.Acos,(function(e){return Math.acos(e)})),Wc={kernelName:a.Acos,backendName:"cpu",kernelFunc:Uc},Vc=ec(a.Acosh,(function(e){return Math.acosh(e)})),qc={kernelName:a.Acosh,backendName:"cpu",kernelFunc:Vc};var $c={kernelName:a.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;Js(t,"addN");for(var i=r.map((function(e){return n.data.get(e.dataId).values})),o=Object(a.buffer)(r[0].shape,r[0].dtype),u=o.values,s=0;s<r.length;s++)for(var c=i[s],l=0;l<u.length;l++)u[l]+=c[l];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function Hc(e,t,n,r,i){for(var o=t.length,u=a.util.sizeFromShape(t),s=a.util.computeStrides(t),c=a.util.computeStrides(i),l=a.util.getTypedArrayFromDType(n,a.util.sizeFromShape(i)),f=0;f<u;++f){for(var d=a.util.indexToLoc(f,o,s),h=new Array(d.length),p=0;p<h.length;p++)h[p]=d[r[p]];l[a.util.locToIndex(h,o,c)]=e[f]}return l}function Gc(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;Js(a,"transpose");for(var o=a.shape.length,u=new Array(o),s=0;s<u.length;s++)u[s]=a.shape[i[s]];var c=Hc(r.data.get(a.dataId).values,a.shape,a.dtype,i,u);return{dataId:r.write(c,u,a.dtype),shape:u,dtype:a.dtype}}var Kc={kernelName:a.Transpose,backendName:"cpu",kernelFunc:Gc};var Xc={kernelName:a.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;Js(o,"all");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=Gc({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("all",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,w=0;w<b.length;++w){for(var x=w*g,O=y[x],k=0;k<g;++k){var j=y[x+k];O=O&&j}b[w]=O}null!=f&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(v,d.dtype,b);if(s){var S=Rc({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(_),S}return _}};var Yc={kernelName:a.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;Js(o,"any");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=Gc({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("any",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,w=0;w<b.length;++w){for(var x=w*g,O=y[x],k=0;k<g;++k){var j=y[x+k];O=O||j}b[w]=O}null!=f&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(v,d.dtype,b);if(s){var S=Rc({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(_),S}return _}};var Jc={kernelName:a.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis;Js(o,"argMax");var s=a.util.parseAxisParam(u,o.shape),c=a.backend_util.getAxesPermutation(s,o.shape.length),l=o,f=[];null!=c&&(l=Gc({inputs:{x:o},backend:n,attrs:{perm:c}}),f.push(l),s=a.backend_util.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMax",s,l.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(l.shape,s),h=Object(i.a)(d,2),p=h[0],v=h[1],m=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(m,"int32"),b=a.util.sizeFromShape(v),y=n.data.get(l.dataId).values,w=0;w<g.length;++w){for(var x=w*b,O=y[x],k=0,j=0;j<b;++j){var _=y[x+j];_>O&&(O=_,k=j)}g[w]=k}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}};var Qc={kernelName:a.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis;Js(o,"argMin");var s=a.util.parseAxisParam(u,o.shape),c=a.backend_util.getAxesPermutation(s,o.shape.length),l=o,f=[];null!=c&&(l=Gc({inputs:{x:o},backend:n,attrs:{perm:c}}),f.push(l),s=a.backend_util.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMin",s,l.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(l.shape,s),h=Object(i.a)(d,2),p=h[0],v=h[1],m=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(m,"int32"),b=a.util.sizeFromShape(v),y=n.data.get(l.dataId).values,w=0;w<g.length;++w){for(var x=w*b,O=y[x],k=0,j=0;j<b;++j){var _=y[x+j];_<O&&(O=_,k=j)}g[w]=k}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}},Zc=ec(a.Asin,(function(e){return Math.asin(e)})),el={kernelName:a.Asin,backendName:"cpu",kernelFunc:Zc},tl=ec(a.Asinh,(function(e){return Math.asinh(e)})),nl={kernelName:a.Asinh,backendName:"cpu",kernelFunc:tl},rl=ec(a.Atan,(function(e){return Math.atan(e)})),al={kernelName:a.Atan,backendName:"cpu",kernelFunc:rl},il=sc((function(e,t){return Math.atan2(e,t)})),ol=Cc(a.Atan2,il),ul={kernelName:a.Atan2,backendName:"cpu",kernelFunc:ol},sl=ec(a.Atanh,(function(e){return Math.atanh(e)})),cl={kernelName:a.Atanh,backendName:"cpu",kernelFunc:sl};function ll(e,t,n,r,i,o){for(var u=i.strideHeight,s=i.strideWidth,c=i.dilationHeight,l=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,p=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Object(a.buffer)(i.outShape,n),g=m.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],w=i.outShape[3],x=0;x<i.batchSize;++x)for(var O=x*b,k=x*r[0],j=0;j<i.inChannels;++j)for(var _=0;_<i.outHeight;++_)for(var S=_*u-h,E=Math.max(0,S),C=Math.min(i.inHeight,f+S),A=O+_*y,T=0;T<i.outWidth;++T){for(var N=T*s-p,I=Math.max(0,N),D=Math.min(i.inWidth,d+N),R=v,F=0,M=0,P=E;P<C;P+=c){for(var L=k+P*r[1],z=I;z<D;z+=l){var B=e[L+z*r[2]+j];"max"===o&&B>R?R=B:"avg"===o&&(F+=B,M++)}if(isNaN(R))break}g[A+T*w+j]="avg"===o?F/M:R}return m}function fl(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=Object(a.buffer)(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,m=Object(a.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var b=0;b<r.inChannels;++b)for(var y=0;y<r.outHeight;++y){for(var w=y*s-p,x=w;x<0;)x+=l;for(var O=Math.min(r.inHeight,d+w),k=0;k<r.outWidth;++k){for(var j=k*c-v,_=j;_<0;)_+=f;for(var S=Math.min(r.inWidth,h+j),E=Number.NEGATIVE_INFINITY,C=-1,A=x;A<O;A+=l)for(var T=A-w,N=_;N<S;N+=f){var I=N-j,D=m.get(g,A,N,b);D>E&&(E=D,C=i?o?((g*r.inHeight+A)*r.inWidth+N)*r.inChannels+b:(A*r.inWidth+N)*r.inChannels+b:T*h+I)}u.set(C,g,y,k,b)}}return u}function dl(e,t,n,r,i,o){for(var u=i.strideDepth,s=i.strideHeight,c=i.strideWidth,l=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,b=i.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Object(a.buffer)(i.outShape,n),x=w.values,O=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],j=i.outShape[3]*i.outShape[4],_=i.outShape[4],S=0;S<i.batchSize;++S)for(var E=S*O,C=S*r[0],A=0;A<i.inChannels;++A)for(var T=0;T<i.outDepth;++T){for(var N=T*u-m,I=N;I<0;)I+=l;for(var D=Math.min(i.inDepth,h+N),R=E+T*k,F=0;F<i.outHeight;++F){for(var M=F*s-g,P=M;P<0;)P+=f;for(var L=Math.min(i.inHeight,p+M),z=R+F*j,B=0;B<i.outWidth;++B){for(var U=B*c-b,W=U;W<0;)W+=d;for(var V=Math.min(i.inWidth,v+U),q=z+B*_,$=y,H=0,G=0,K=I;K<D;K+=l){for(var X=C+K*r[1],Y=P;Y<L;Y+=f){for(var J=X+Y*r[2],Q=W;Q<V;Q+=d){var Z=e[J+Q*r[3]+A];if("max"===o&&Z>$?$=Z:"avg"===o&&(H+=Z,G++),isNaN($))break}if(isNaN($))break}if(isNaN($))break}x[q+A]="avg"===o?H/G:$}}}return w}var hl={kernelName:a.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;Js(i,"avgPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l,f=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===f.filterWidth&&1===f.filterHeight&&a.util.arraysEqual(f.inShape,f.outShape))l=ac({inputs:{x:i},backend:n});else{var d=n.data.get(i.dataId).values,h=a.util.computeStrides(i.shape),p=ll(d,i.shape,i.dtype,h,f,"avg");l=n.makeTensorInfo(f.outShape,i.dtype,p.values)}return l}};var pl={kernelName:a.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat;Js(i,"avgPool3d");var f=a.backend_util.computePool3DInfo(i.shape,o,u,1,s,c,l),d=dl(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var vl={kernelName:a.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode;Js([i,o],"avgPool3DGrad");for(var f=a.backend_util.computePool3DInfo(o.shape,u,s,1,c,l),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,b=f.dilationDepth,y=f.dilationHeight,w=f.dilationWidth,x=f.effectiveFilterDepth,O=f.effectiveFilterHeight,k=f.effectiveFilterWidth,j=x-1-f.padInfo.front,_=k-1-f.padInfo.left,S=O-1-f.padInfo.top,E=Object(a.buffer)(o.shape,"float32"),C=1/(v*m*g),A=n.bufferSync(i),T=0;T<f.batchSize;++T)for(var N=0;N<f.inChannels;++N)for(var I=0;I<f.inDepth;++I)for(var D=0;D<f.inHeight;++D)for(var R=0;R<f.inWidth;++R){for(var F=I-j,M=D-S,P=R-_,L=0,z=0;z<x;z+=b){var B=(F+z)/d;if(!(B<0||B>=f.outDepth||Math.floor(B)!==B))for(var U=0;U<O;U+=y){var W=(M+U)/h;if(!(W<0||W>=f.outHeight||Math.floor(W)!==W))for(var V=0;V<k;V+=w){var q=(P+V)/p;if(!(q<0||q>=f.outWidth||Math.floor(q)!==q))L+=A.get(T,B,W,q,N)}}}E.set(L*C,T,I,D,R,N)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var ml={kernelName:a.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;Js([i,o],"avgPoolGrad");for(var s=r.filterSize,c=r.strides,l=r.pad,f=a.backend_util.computePool2DInfo(u.shape,s,c,1,l),d=f.strideHeight,h=f.strideWidth,p=f.filterHeight,v=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,b=f.effectiveFilterHeight,y=f.effectiveFilterWidth,w=y-1-f.padInfo.left,x=b-1-f.padInfo.top,O=Object(a.buffer)(u.shape,"float32"),k=1/(p*v),j=n.data.get(i.dataId).values,_=Object(a.buffer)(i.shape,"float32",j),S=0;S<f.batchSize;++S)for(var E=0;E<f.inChannels;++E)for(var C=0;C<f.inHeight;++C)for(var A=0;A<f.inWidth;++A){for(var T=C-x,N=A-w,I=0,D=0;D<b;D+=m){var R=(T+D)/d;if(!(R<0||R>=f.outHeight||Math.floor(R)!==R))for(var F=0;F<y;F+=g){var M=(N+F)/h;if(!(M<0||M>=f.outWidth||Math.floor(M)!==M))I+=_.get(S,R,M,E)}}O.set(I*k,S,C,A,E)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}};var gl={kernelName:a.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.scale,u=t.offset,s=t.mean,c=t.variance;a.util.assert(s.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),a.util.assert(null==u||s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),a.util.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Js([i,s,c,o,u],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(c.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),v=u?n.data.get(u.dataId).values:new Float32Array([0]),m=new Float32Array(f.length),g=v.length,b=p.length,y=h.length,w=d.length,x=0,O=0,k=0,j=0,_=0;_<f.length;++_)m[_]=v[x++]+(f[_]-d[O++])*p[k++]/Math.sqrt(h[j++]+l),x>=g&&(x=0),O>=w&&(O=0),k>=b&&(k=0),j>=y&&(j=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};function bl(e,t,n,r,i){var o=a.slice_util.isSliceContinous(r,t,n),u=a.util.sizeFromShape(n),s=a.util.computeStrides(r);if(o){var c=a.slice_util.computeFlatOffset(t,s);return"string"===i?e.slice(c,c+u):e.subarray(c,c+u)}for(var l="string"===i?a.backend_util.fromUint8ToStringArray(e):e,f=Object(a.buffer)(r,i,l),d=Object(a.buffer)(n,i),h=0;h<d.size;++h){var p=d.indexToLoc(h),v=p.map((function(e,n){return e+t[n]}));d.set.apply(d,[f.get.apply(f,Object(Tn.a)(v))].concat(Object(Tn.a)(p)))}return"string"===i?a.backend_util.fromStringArrayToUint8(d.values):d.values}function yl(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.begin,s=r.size;Js(o,"slice");var c=a.slice_util.parseSliceParams(o,u,s),l=Object(i.a)(c,2),f=l[0],d=l[1];a.slice_util.assertParamsValid(o,f,d);var h=bl(n.data.get(o.dataId).values,f,d,o.shape,o.dtype);return n.makeTensorInfo(d,o.dtype,h)}var wl={kernelName:a.Slice,backendName:"cpu",kernelFunc:yl};var xl={kernelName:a.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.crops;Js([i],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),c=a.backend_util.getReshaped(i.shape,o,s),l=a.backend_util.getPermuted(c.length,o.length),f=a.backend_util.getReshapedPermuted(i.shape,o,s),d=a.backend_util.getSliceBeginCoords(u,o.length),h=a.backend_util.getSliceSize(f,u,o.length),p=Rc({inputs:{x:i},backend:n,attrs:{shape:c}}),v=Gc({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Rc({inputs:{x:v},backend:n,attrs:{shape:f}}),g=yl({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}};function Ol(e,t,n,r,i){for(var o=a.util.sizeFromShape(r),u=a.util.makeZerosTypedArray(i,n),s=0;s<e.length;s++){var c=e[s];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(u[c]+=o>0?t[s]:1)}return u}function kl(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.shape[0],o=e.shape[1],u=Object(a.buffer)([i,n],t.dtype),s=0;s<i;s++)for(var c=0;c<o;c++){var l=e.get(s,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?u.set(1,s,l):t.size>0?u.set(u.get(s,l)+t.get(s,c),s,l):u.set(u.get(s,l)+1,s,l))}return u}var jl={kernelName:a.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=Ol(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}};var _l={kernelName:a.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,i=t.s1,o=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,s=a.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(u));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Sl=mc((function(e){return Math.ceil(e)})),El=tc(a.Ceil,Sl),Cl={kernelName:a.Ceil,backendName:"cpu",kernelFunc:El},Al=ec(a.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Tl={kernelName:a.ClipByValue,backendName:"cpu",kernelFunc:Al},Nl={kernelName:a.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(a.util.sizeFromShape(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,c=n.data.get(u.dataId).values,l=0;l<s.length;l++){var f=s[l],d=c[l];r[l]=Math.hypot(f,d)}return n.makeOutput(r,t.shape,"float32")}};function Il(e,t,n,r){var i=a.util.getArrayFromDType(n,a.util.sizeFromShape(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=a.util.sizeFromShape(e.shape);i.set(e.vals,o),o+=t}))}else{var u=0;e.forEach((function(e){for(var r="string"===n?a.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var c=s*t[1]+u,l=0;l<e.shape[1];++l)i[c+l]=r[o++];u+=e.shape[1]}))}return i}function Dl(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Rl={kernelName:a.Imag,backendName:"cpu",kernelFunc:Dl};function Fl(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,i=a.util.parseAxisParam(r,t[0].shape)[0],o=a.backend_util.computeOutShape(t.map((function(e){return e.shape})),i);if(0===a.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return a.util.sizeFromShape(e.shape)>0}));if(1===u.length)return ac({inputs:{x:u[0]},backend:n});var s=u.map((function(e){return e.shape}));if(a.backend_util.assertParamsConsistent(s,i),"complex64"===u[0].dtype){var c=u.map((function(e){return jc({inputs:{input:e},backend:n})})),l=u.map((function(e){return Dl({inputs:{input:e},backend:n})})),f=Fl({inputs:c,backend:n,attrs:{axis:i}}),d=Fl({inputs:l,backend:n,attrs:{axis:i}}),h=xc({inputs:{real:f,imag:d},backend:n});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}var p=u.map((function(e){var t=a.util.sizeFromShape(e.shape.slice(i));return Rc({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),v=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=a.backend_util.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],g=Il(v,o,t[0].dtype,m),b=a.backend_util.computeOutShape(u.map((function(e){return e.shape})),i),y=n.makeTensorInfo(b,t[0].dtype,g);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var Ml={kernelName:a.Concat,backendName:"cpu",kernelFunc:Fl};function Pl(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dilations,f=r.dimRoundingMode;Js([i,o],"conv2d");for(var d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,l,s,f,!1,d),p=h.filterHeight,v=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,b=h.padInfo.left,y=h.padInfo.top,w="channelsLast"===h.dataFormat,x=new a.TensorBuffer(h.outShape,i.dtype),O=a.util.computeStrides(i.shape),k=a.util.computeStrides(o.shape),j=O[0],_=w?O[1]:O[2],S=w?O[2]:1,E=w?1:O[1],C=x.strides[0],A=w?x.strides[1]:x.strides[2],T=w?x.strides[2]:1,N=w?1:x.strides[1],I=n.data.get(i.dataId).values,D=n.data.get(o.dataId).values,R=x.values,F=0;F<h.batchSize;++F)for(var M=F*j,P=F*C,L=0;L<h.outHeight;++L)for(var z=P+L*A,B=L*h.strideHeight-y,U=0;U<p;++U){var W=B+U*m;if(!(W<0||W>=h.inHeight))for(var V=U*k[0],q=M+W*_,$=0;$<h.outWidth;++$)for(var H=z+$*T,G=$*h.strideWidth-b,K=0;K<v;++K){var X=G+K*g;if(!(X<0||X>=h.inWidth))for(var Y=q+X*S,J=V+K*k[1],Q=0;Q<h.inChannels;++Q){for(var Z=I[Y+Q*E],ee=0;ee<h.outChannels;++ee)R[H+ee*N]+=Z*D[J+ee];J+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,R)}var Ll={kernelName:a.Conv2D,backendName:"cpu",kernelFunc:Pl};var zl={kernelName:a.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=r.filterShape;Js([i,o],"conv2dBackpropFilter");for(var d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,f,u,1,s,l,!1,d),p=h.strideHeight,v=h.strideWidth,m=h.filterHeight,g=h.filterWidth,b="channelsLast"===h.dataFormat,y=new a.TensorBuffer(h.filterShape,"float32"),w=h.padInfo.left,x=h.padInfo.top,O=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,j=new a.TensorBuffer(i.shape,i.dtype,O),_=new a.TensorBuffer(o.shape,o.dtype,k),S=0;S<m;++S)for(var E=Math.max(0,Math.ceil((x-S)/p)),C=Math.min(h.outHeight,(h.inHeight+x-S)/p),A=0;A<g;++A)for(var T=Math.max(0,Math.ceil((w-A)/v)),N=Math.min(h.outWidth,(h.inWidth+w-A)/v),I=0;I<h.inChannels;++I)for(var D=0;D<h.outChannels;++D){for(var R=0,F=0;F<h.batchSize;++F)for(var M=E;M<C;++M)for(var P=S+M*p-x,L=T;L<N;++L){var z=A+L*v-w;R+=b?j.get(F,P,z,I)*_.get(F,M,L,D):j.get(F,I,P,z)*_.get(F,D,M,L)}y.set(R,S,A,I,D)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Bl={kernelName:a.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.inputShape,c=r.strides,l=r.pad,f=r.dataFormat,d=r.dimRoundingMode;Js([o,u],"conv2dBackpropInput");var h=a.util.computeStrides(u.shape),p=a.util.computeStrides(o.shape),v=a.backend_util.convertConv2DDataFormat(f),m=a.backend_util.computeConv2DInfo(s,u.shape,c,1,l,d,!1,v),g=new a.TensorBuffer(m.inShape,"float32"),b=g.values,y=n.data.get(o.dataId).values,w=n.data.get(u.dataId).values,x=Object(i.a)(h,3),O=x[0],k=x[1],j=x[2],_=m.batchSize,S=m.filterHeight,E=m.filterWidth,C=m.inChannels,A=m.inHeight,T=m.inWidth,N=m.outChannels,I=m.outHeight,D=m.outWidth,R=m.strideHeight,F=m.strideWidth;v=m.dataFormat;for(var M=S-1-m.padInfo.top,P=E-1-m.padInfo.left,L="channelsLast"===v,z=g.strides[0],B=L?g.strides[1]:g.strides[2],U=L?g.strides[2]:1,W=L?1:g.strides[1],V=p[0],q=L?p[1]:p[2],$=L?p[2]:1,H=L?1:p[1],G=0;G<_;++G)for(var K=0;K<C;++K)for(var X=0;X<A;++X)for(var Y=X-M,J=Math.max(0,Math.ceil(Y/R)),Q=Math.min(I,(S+Y)/R),Z=0;Z<T;++Z){for(var ee=Z-P,te=Math.max(0,Math.ceil(ee/F)),ne=Math.min(D,(E+ee)/F),re=0,ae=J;ae<Q;++ae)for(var ie=ae*R-Y,oe=te;oe<ne;++oe)for(var ue=V*G+q*ae+$*oe,se=O*(S-1-ie)+k*(E-1-(oe*F-ee))+j*K,ce=0;ce<N;++ce){re+=y[ue+H*ce]*w[se+ce]}b[z*G+B*X+U*Z+W*K]=re}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Ul={kernelName:a.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations;Js([i,o],"conv3d");for(var l=a.backend_util.computeConv3DInfo(i.shape,o.shape,u,c,s),f=l.filterDepth,d=l.filterHeight,h=l.filterWidth,p=l.dilationDepth,v=l.dilationHeight,m=l.dilationWidth,g=l.padInfo,b=g.front,y=g.left,w=g.top,x=new a.TensorBuffer(l.outShape,i.dtype),O=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,j=x.values,_=a.util.computeStrides(i.shape),S=a.util.computeStrides(o.shape),E=0;E<l.batchSize;++E)for(var C=E*_[0],A=E*x.strides[0],T=0;T<l.outDepth;++T)for(var N=A+T*x.strides[1],I=T*l.strideDepth-b,D=0;D<f;++D){var R=I+D*p;if(!(R<0||R>=l.inDepth))for(var F=D*S[0],M=C+R*_[1],P=0;P<l.outHeight;++P)for(var L=N+P*x.strides[2],z=P*l.strideHeight-w,B=0;B<d;++B){var U=z+B*v;if(!(U<0||U>=l.inHeight))for(var W=F+B*S[1],V=M+U*_[2],q=0;q<l.outWidth;++q)for(var $=L+q*l.outChannels,H=q*l.strideWidth-y,G=0;G<h;++G){var K=H+G*m;if(!(K<0||K>=l.inWidth))for(var X=W+G*S[2],Y=V+K*l.inChannels,J=X,Q=0;Q<l.inChannels;++Q){for(var Z=O[Y+Q],ee=0;ee<l.outChannels;++ee)j[$+ee]+=Z*k[J+ee];J+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Wl={kernelName:a.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=t.dy,s=r.strides,c=r.pad,l=r.filterShape;Js([o,u],"conv3dBackpropFilterV2");for(var f=a.util.computeStrides(o.shape),d=a.util.computeStrides(u.shape),h=a.backend_util.computeConv3DInfo(o.shape,l,s,1,c),p=h.strideDepth,v=h.strideHeight,m=h.strideWidth,g=h.filterDepth,b=h.filterHeight,y=h.filterWidth,w=new a.TensorBuffer(h.filterShape,"float32"),x=w.values,O=Object(i.a)(w.strides,4),k=O[0],j=O[1],_=O[2],S=O[3],E=n.data.get(u.dataId).values,C=Object(i.a)(d,4),A=C[0],T=C[1],N=C[2],I=C[3],D=n.data.get(o.dataId).values,R=Object(i.a)(f,4),F=R[0],M=R[1],P=R[2],L=R[3],z=h.padInfo.front,B=h.padInfo.left,U=h.padInfo.top,W=0;W<g;++W)for(var V=Math.max(0,Math.ceil((z-W)/p)),q=Math.min(h.outDepth,(h.inDepth+z-W)/p),$=W*k,H=0;H<b;++H)for(var G=Math.max(0,Math.ceil((U-H)/v)),K=Math.min(h.outHeight,(h.inHeight+U-H)/v),X=H*j+$,Y=0;Y<y;++Y)for(var J=Math.max(0,Math.ceil((B-Y)/m)),Q=Math.min(h.outWidth,(h.inWidth+B-Y)/m),Z=Y*_+X,ee=0;ee<h.inChannels;++ee)for(var te=ee*S+Z,ne=0;ne<h.outChannels;++ne){for(var re=0,ae=0;ae<h.batchSize;++ae)for(var ie=ae*F,oe=ae*A,ue=V;ue<q;++ue)for(var se=(W+ue*p-z)*M+ie,ce=ue*T+oe,le=G;le<K;++le)for(var fe=(H+le*v-U)*P+se,de=le*N+ce,he=J;he<Q;++he){var pe=he*I+de;re+=D[(Y+he*m-B)*L+fe+ee]*E[pe+ne]}x[te+ne]=re}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Vl={kernelName:a.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.pad,c=r.strides,l=r.inputShape;Js([o],"conv3dBackpropInputV2");for(var f=a.util.computeStrides(o.shape),d=a.util.computeStrides(u.shape),h=a.backend_util.computeConv3DInfo(l,u.shape,c,1,s),p=new a.TensorBuffer(h.inShape,"float32"),v=p.values,m=Object(i.a)(p.strides,4),g=m[0],b=m[1],y=m[2],w=m[3],x=n.data.get(o.dataId).values,O=Object(i.a)(f,4),k=O[0],j=O[1],_=O[2],S=O[3],E=n.data.get(u.dataId).values,C=Object(i.a)(d,4),A=C[0],T=C[1],N=C[2],I=C[3],D=h.batchSize,R=h.filterDepth,F=h.filterHeight,M=h.filterWidth,P=h.inChannels,L=h.inDepth,z=h.inHeight,B=h.inWidth,U=h.outChannels,W=h.outDepth,V=h.outHeight,q=h.outWidth,$=h.strideDepth,H=h.strideHeight,G=h.strideWidth,K=R-1-h.padInfo.front,X=F-1-h.padInfo.top,Y=M-1-h.padInfo.left,J=0;J<D;++J)for(var Q=0;Q<P;++Q)for(var Z=0;Z<L;++Z)for(var ee=Z-K,te=Math.max(0,Math.ceil(ee/$)),ne=Math.min(W,(R+ee)/$),re=0;re<z;++re)for(var ae=re-X,ie=Math.max(0,Math.ceil(ae/H)),oe=Math.min(V,(F+ae)/H),ue=0;ue<B;++ue){for(var se=ue-Y,ce=Math.max(0,Math.ceil(se/G)),le=Math.min(q,(M+se)/G),fe=0,de=te;de<ne;++de)for(var he=de*$-ee,pe=ie;pe<oe;++pe)for(var ve=pe*H-ae,me=ce;me<le;++me)for(var ge=k*J+j*de+_*pe+S*me,be=A*(R-1-he)+T*(F-1-ve)+N*(M-1-(me*G-se))+I*Q,ye=0;ye<U;++ye){fe+=x[ge+ye]*E[be+ye]}v[g*J+b*Z+y*re+w*ue+Q]=fe}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},ql=ec(a.Cos,(function(e){return Math.cos(e)})),$l={kernelName:a.Cos,backendName:"cpu",kernelFunc:ql},Hl=ec(a.Cosh,(function(e){return Math.cosh(e)})),Gl={kernelName:a.Cosh,backendName:"cpu",kernelFunc:Hl};var Kl={kernelName:a.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,o=t.image,u=t.boxes,s=t.boxInd,c=r.cropSize,l=r.method,f=r.extrapolationValue,d=Object(i.a)(o.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=u.shape[0],b=Object(i.a)(c,2),y=b[0],w=b[1],x=Object(a.buffer)([g,y,w,m],"float32"),O=n.data.get(u.dataId).values,k=n.data.get(s.dataId).values,j=n.data.get(o.dataId).values,_=a.util.computeStrides(o.shape),S=a.util.computeStrides(x.shape),E=0;E<g;E++){var C=4*E,A=O[C],T=O[C+1],N=O[C+2],I=O[C+3],D=k[E];if(!(D>=h))for(var R=y>1?(N-A)*(p-1)/(y-1):0,F=w>1?(I-T)*(v-1)/(w-1):0,M=0;M<y;M++){var P=y>1?A*(p-1)+M*R:.5*(A+N)*(p-1);if(P<0||P>p-1)for(var L=0;L<w;L++)for(var z=0;z<m;z++){var B=z+L*S[2]+M*S[1]+E*S[0];x.values[B]=f}else if("bilinear"===l)for(var U=Math.floor(P),W=Math.ceil(P),V=P-U,q=0;q<w;q++){var $=w>1?T*(v-1)+q*F:.5*(T+I)*(v-1);if($<0||$>v-1)for(var H=0;H<m;H++){var G=H+q*S[2]+M*S[1]+E*S[0];x.values[G]=f}else for(var K=Math.floor($),X=Math.ceil($),Y=$-K,J=0;J<m;J++){var Q=J+K*_[2]+U*_[1]+D*_[0],Z=j[Q],ee=j[Q=J+X*_[2]+U*_[1]+D*_[0]],te=j[Q=J+K*_[2]+W*_[1]+D*_[0]],ne=Z+(ee-Z)*Y,re=te+(j[Q=J+X*_[2]+W*_[1]+D*_[0]]-te)*Y;Q=J+q*S[2]+M*S[1]+E*S[0],x.values[Q]=ne+(re-ne)*V}}else for(var ae=0;ae<w;++ae){var ie=w>1?T*(v-1)+ae*F:.5*(T+I)*(v-1);if(ie<0||ie>v-1)for(var oe=0;oe<m;oe++){var ue=oe+ae*S[2]+M*S[1]+E*S[0];x.values[ue]=f}else for(var se=Math.round(ie),ce=Math.round(P),le=0;le<m;le++){var fe=le+se*_[2]+ce*_[1]+D*_[0],de=le+ae*S[2]+M*S[1]+E*S[0];x.values[de]=j[fe]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Xl={kernelName:a.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.exclusive,s=r.reverse;Js(i,"cumsum");var c=a.backend_util.getAxesPermutation([o],i.shape.length),l=i;null!=c&&(l=Gc({inputs:{x:i},backend:n,attrs:{perm:c}}));var f=a.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(f!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(f));for(var d=Object(a.upcastType)(l.dtype,"int32"),h=a.util.makeZerosTypedArray(a.util.sizeFromShape(l.shape),d),p=n.data.get(l.dataId).values,v=l.shape[l.shape.length-1],m=s?function(e,t){return e+v-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=v)for(var b=0;b<v;b++){var y=m(g,b);if(0===b)h[y]=u?0:p[y];else{var w=m(g,b-1);h[y]=u?p[w]+h[w]:p[y]+h[w]}}var x=n.makeTensorInfo(l.shape,d,h);if(null!=c){var O=Gc({inputs:{x:x},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),O}return x}};var Yl={kernelName:a.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=Ol(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}if(2===a.shape.length){var c=kl(n.bufferSync(a),n.bufferSync(i),o,u);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var Jl={kernelName:a.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockSize,u=r.dataFormat;a.util.assert("NHWC"===u,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(u)})),a.util.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=i.shape[0],c=i.shape[1],l=i.shape[2],f=i.shape[3],d=c*o,h=l*o,p=f/(o*o),v=n.data.get(i.dataId).values,m=new Float32Array(s*d*h*p),g=0,b=0;b<s;++b)for(var y=0;y<d;++y)for(var w=Math.floor(y/o),x=y%o,O=0;O<h;++O)for(var k=Math.floor(O/o),j=(x*o+O%o)*p,_=0;_<p;++_){var S=_+j+f*(k+l*(w+c*b));m[g++]=v[S]}return n.makeTensorInfo([s,d,h,p],i.dtype,m)}};function Ql(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=r.dimRoundingMode;Js([i,o],"depthwiseConv2DNative");var f=a.util.computeStrides(i.shape),d=a.util.computeStrides(o.shape),h=c;null==h&&(h=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(h,"'")}));for(var p=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,h,s,l,!0),v=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,b=p.dilationWidth,y=p.padInfo,w=y.left,x=y.top,O=p.outChannels/p.inChannels,k=new a.TensorBuffer(p.outShape,i.dtype),j=n.data.get(i.dataId).values,_=n.data.get(o.dataId).values,S=k.values,E=0;E<p.batchSize;++E)for(var C=E*f[0],A=E*k.strides[0],T=0;T<p.outHeight;++T)for(var N=A+T*k.strides[1],I=T*p.strideHeight-x,D=0;D<v;++D){var R=I+D*g;if(!(R<0||R>=p.inHeight))for(var F=D*d[0],M=C+R*f[1],P=0;P<p.outWidth;++P)for(var L=N+P*k.strides[2],z=P*p.strideWidth-w,B=0;B<m;++B){var U=z+B*b;if(!(U<0||U>=p.inWidth))for(var W=F+B*d[1],V=M+U*p.inChannels,q=L,$=W,H=0;H<p.inChannels;++H){for(var G=j[V+H],K=0;K<O;++K)S[q+K]+=G*_[$+K];q+=O,$+=O}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var Zl={kernelName:a.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:Ql};var ef={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.filterShape;Js([i,o],"depthwiseConv2dNativeBackpropFilter");for(var d=a.backend_util.computeConv2DInfo(i.shape,f,u,s,c,l,!0),h=d.strideHeight,p=d.strideWidth,v=d.filterHeight,m=d.filterWidth,g=new a.TensorBuffer(d.filterShape,"float32"),b=d.padInfo.left,y=d.padInfo.top,w=d.outChannels/d.inChannels,x=n.data.get(i.dataId).values,O=new a.TensorBuffer(i.shape,i.dtype,x),k=n.data.get(o.dataId).values,j=new a.TensorBuffer(o.shape,o.dtype,k),_=0;_<v;++_)for(var S=Math.max(0,Math.ceil((y-_)/h)),E=Math.min(d.outHeight,(d.inHeight+y-_)/h),C=0;C<m;++C)for(var A=Math.max(0,Math.ceil((b-C)/p)),T=Math.min(d.outWidth,(d.inWidth+b-C)/p),N=0;N<d.outChannels;++N){for(var I=Math.trunc(N/w),D=N%w,R=0,F=0;F<d.batchSize;++F)for(var M=S;M<E;++M)for(var P=_+M*h-y,L=A;L<T;++L){var z=C+L*p-b;R+=O.get(F,P,z,I)*j.get(F,M,L,N)}g.set(R,_,C,I,D)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var tf={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.strides,c=r.dilations,l=r.pad,f=r.dimRoundingMode,d=r.inputShape;Js([o,u],"depthwiseConv2DNativeBackpropInput");for(var h=a.util.computeStrides(o.shape),p=a.util.computeStrides(u.shape),v=a.backend_util.computeConv2DInfo(d,u.shape,s,c,l,f,!0),m=new a.TensorBuffer(v.inShape,"float32"),g=m.values,b=Object(i.a)(m.strides,3),y=b[0],w=b[1],x=b[2],O=n.data.get(o.dataId).values,k=Object(i.a)(h,3),j=k[0],_=k[1],S=k[2],E=n.data.get(u.dataId).values,C=Object(i.a)(p,3),A=C[0],T=C[1],N=C[2],I=v.batchSize,D=v.filterHeight,R=v.filterWidth,F=v.inChannels,M=v.inHeight,P=v.inWidth,L=v.outChannels,z=v.outHeight,B=v.outWidth,U=v.strideHeight,W=v.strideWidth,V=D-1-v.padInfo.top,q=R-1-v.padInfo.left,$=L/F,H=0;H<I;++H)for(var G=0;G<F;++G)for(var K=0;K<M;++K)for(var X=K-V,Y=Math.max(0,Math.ceil(X/U)),J=Math.min(z,(D+X)/U),Q=0;Q<P;++Q){for(var Z=Q-q,ee=Math.max(0,Math.ceil(Z/W)),te=Math.min(B,(R+Z)/W),ne=0,re=Y;re<J;++re)for(var ae=re*U-X,ie=ee;ie<te;++ie)for(var oe=j*H+_*re+S*ie,ue=A*(D-1-ae)+T*(R-1-(ie*W-Z))+N*G,se=0;se<$;++se){ne+=O[oe+(G*$+se)]*E[ue+se]}g[y*H+w*K+x*Q+G]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var nf={kernelName:a.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,i=a.util.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,u=Object(a.buffer)([i,i],r.dtype),s=u.values,c=0;c<o.length;c++)s[c*i+c]=o[c];var l=[].concat(Object(Tn.a)(r.shape),Object(Tn.a)(r.shape));return n.makeTensorInfo(l,u.dtype,u.values)}},rf={kernelName:a.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=n,f=l.data.get(i.dataId).values,d=i.shape.length,h=l.data.get(o.dataId).values,p=o.shape.length,v=a.backend_util.computeDilation2DInfo(i.shape,o.shape,u,s,"NHWC",c),m=v.batchSize,g=v.inHeight,b=v.inWidth,y=v.inChannels,w=v.outHeight,x=v.outWidth,O=v.padInfo,k=v.strideHeight,j=v.strideWidth,_=v.filterHeight,S=v.filterWidth,E=v.dilationHeight,C=v.dilationWidth,A=v.outShape,T=a.util.sizeFromShape(A),N=A.length,I=a.util.getArrayFromDType(i.dtype,T),D=0;D<m;++D)for(var R=0;R<w;++R)for(var F=R*k-O.top,M=0;M<x;++M)for(var P=M*j-O.left,L=0;L<y;++L){for(var z=Number.MIN_SAFE_INTEGER,B=0;B<_;++B){var U=F+B*E;if(U>=0&&U<g)for(var W=0;W<S;++W){var V=P+W*C;if(V>=0&&V<b){var q=a.util.locToIndex([D,U,V,L],d,a.util.computeStrides(i.shape)),$=a.util.locToIndex([B,W,L],p,a.util.computeStrides(o.shape)),H=f[q]+h[$];H>z&&(z=H)}}}I[a.util.locToIndex([D,R,M,L],N,a.util.computeStrides(A))]=z}return{dataId:l.write(a.util.toTypedArray(I,i.dtype),A,i.dtype),shape:A,dtype:i.dtype}}},af={kernelName:a.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.dy,s=r.strides,c=r.pad,l=r.dilations,f=n,d=a.util.toNestedArray(i.shape,f.data.get(i.dataId).values),h=a.util.toNestedArray(o.shape,f.data.get(o.dataId).values),p=a.backend_util.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",l),v=p.batchSize,m=p.inHeight,g=p.inWidth,b=p.inChannels,y=p.outHeight,w=p.outWidth,x=p.padInfo,O=p.strideHeight,k=p.strideWidth,j=p.filterHeight,_=p.filterWidth,S=p.dilationHeight,E=p.dilationWidth,C=p.outShape;a.util.assert(u.rank===C.length,(function(){return"Error in ".concat(a.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(u.rank)}));for(var A=a.util.toNestedArray(C,f.data.get(u.dataId).values),T=a.util.makeZerosNestedTypedArray(o.shape,o.dtype),N=0;N<v;++N)for(var I=0;I<y;++I)for(var D=I*O-x.top,R=0;R<w;++R)for(var F=R*k-x.left,M=0;M<b;++M){for(var P=Number.MIN_SAFE_INTEGER,L=0,z=0,B=0;B<j;++B){var U=D+B*S;if(U>=0&&U<m)for(var W=0;W<_;++W){var V=F+W*E;if(V>=0&&V<g){var q=d[N][U][V][M]+h[B][W][M];q>P&&(P=q,L=B,z=W)}}}T[L][z][M]+=A[N][I][R][M]}return{dataId:f.write(a.util.toTypedArray(T,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},of={kernelName:a.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.dy,s=r.strides,c=r.pad,l=r.dilations,f=n,d=a.util.toNestedArray(i.shape,f.data.get(i.dataId).values),h=a.util.toNestedArray(o.shape,f.data.get(o.dataId).values),p=a.backend_util.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",l),v=p.batchSize,m=p.inHeight,g=p.inWidth,b=p.inChannels,y=p.outHeight,w=p.outWidth,x=p.padInfo,O=p.strideHeight,k=p.strideWidth,j=p.filterHeight,_=p.filterWidth,S=p.dilationHeight,E=p.dilationWidth,C=p.outShape;a.util.assert(u.rank===C.length,(function(){return"Error in ".concat(a.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(u.rank)}));for(var A=a.util.toNestedArray(C,f.data.get(u.dataId).values),T=a.util.makeZerosNestedTypedArray(i.shape,i.dtype),N=0;N<v;++N)for(var I=0;I<y;++I)for(var D=I*O-x.top,R=0;R<w;++R)for(var F=R*k-x.left,M=0;M<b;++M){for(var P=Number.MIN_SAFE_INTEGER,L=D<0?0:D,z=F<0?0:F,B=0;B<j;++B){var U=D+B*S;if(U>=0&&U<m)for(var W=0;W<_;++W){var V=F+W*E;if(V>=0&&V<g){var q=d[N][U][V][M]+h[B][W][M];q>P&&(P=q,L=U,z=V)}}}T[N][L][z][M]+=A[N][I][R][M]}return{dataId:f.write(a.util.toTypedArray(T,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},uf=sc((function(e,t){return e*t})),sf=Ac((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),cf=Cc(a.Multiply,uf,sf),lf={kernelName:a.Multiply,backendName:"cpu",kernelFunc:cf};function ff(e){var t,n=e.inputs,r=e.backend,o=e.attrs,u=n.x,s=o.axis,c=o.keepDims;Js(u,"sum");var l=(t="bool"===u.dtype?Sc({inputs:{x:u},backend:r,attrs:{dtype:"int32"}}):ac({inputs:{x:u},backend:r})).shape.length,f=a.util.parseAxisParam(s,t.shape),d=a.backend_util.getAxesPermutation(f,l),h=f,p=t;null!=d&&(p=Gc({inputs:{x:t},backend:r,attrs:{perm:d}}),h=a.backend_util.getInnerMostAxes(h.length,l)),a.backend_util.assertAxesAreInnerMostDims("sum",h,p.shape.length);for(var v=a.backend_util.computeOutAndReduceShapes(p.shape,h),m=Object(i.a)(v,2),g=m[0],b=m[1],y=kc(r,g,a.backend_util.upcastType(p.dtype,"int32")),w=a.util.sizeFromShape(b),x=r.data.get(y.dataId).values,O=r.data.get(p.dataId).values,k=0;k<x.length;++k){for(var j=k*w,_=0,S=0;S<w;++S)_+=O[j+S];x[k]=_}if(c){var E=y;y=Rc({inputs:{x:y},backend:r,attrs:{shape:a.backend_util.expandShapeToKeepDim(y.shape,f)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(p),y}var df={kernelName:a.Sum,backendName:"cpu",kernelFunc:ff};var hf={kernelName:a.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,i=t,o=a.backend_util.decodeEinsumEquation(r,i.length),u=o.allDims,s=o.summedDims,c=o.idDims;a.backend_util.checkEinsumDimSizes(u.length,c,i);for(var l=a.backend_util.getEinsumComputePath(s,c),f=l.path,d=l.steps,h=d.length,p=null,v=u.length,m=[],g=0;g<h;++g){var b,y=Object(Nn.a)(d[g]);try{for(y.s();!(b=y.n()).done;){var w=b.value,x=a.backend_util.getEinsumPermutation(v,c[w]),O=x.permutationIndices,k=x.expandDims,j=void 0;a.backend_util.isIdentityPermutation(O)?j=i[w]:(j=Gc({inputs:{x:i[w]},backend:n,attrs:{perm:O}}),m.push(j));for(var _=j.shape.slice(),S=0;S<k.length;++S)_.splice(k[S],0,1);a.util.arraysEqual(j.shape,_)||(j=Rc({inputs:{x:j},backend:n,attrs:{shape:_}}),m.push(j)),null===p?p=j:(p=cf({inputs:{a:j,b:p},backend:n}),m.push(p))}}catch(T){y.e(T)}finally{y.f()}g<h-1&&(f[g]>=0&&(p=ff({inputs:{x:p},backend:n,attrs:{axis:f[g]-(u.length-v),keepDims:!1}}),m.push(p)),v--)}for(var E=0,C=m;E<C.length;E++){var A=C[E];A!==p&&n.disposeIntermediateTensorInfo(A)}return p}};var pf={kernelName:a.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,i=t.y;Js([r,i],"eluGrad");for(var o=new Float32Array(a.util.sizeFromShape(i.shape)),u=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values,c=0;c<u.length;++c){var l=u[c];o[c]=l>=1?s[c]:s[c]*(l+1)}return n.makeTensorInfo(i.shape,"float32",o)}},vf=sc((function(e,t){return e===t?1:0})),mf=Cc(a.Equal,vf,null,"bool"),gf={kernelName:a.Equal,backendName:"cpu",kernelFunc:mf},bf=a.backend_util.ERF_P,yf=a.backend_util.ERF_A1,wf=a.backend_util.ERF_A2,xf=a.backend_util.ERF_A3,Of=a.backend_util.ERF_A4,kf=a.backend_util.ERF_A5,jf=ec(a.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+bf*n);return t*(1-((((kf*r+Of)*r+xf)*r+wf)*r+yf)*r*Math.exp(-n*n))})),_f={kernelName:a.Erf,backendName:"cpu",kernelFunc:jf},Sf=mc((function(e){return Math.exp(e)})),Ef=tc(a.Exp,Sf),Cf={kernelName:a.Exp,backendName:"cpu",kernelFunc:Ef};function Af(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.input,o=r.dim,u=i.shape.length,s=i.shape.slice(),c=o;return o<0&&(a.util.assert(-(u+1)<=o,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),c=u+o+1),s.splice(c,0,1),Rc({inputs:{x:i},backend:n,attrs:{shape:s}})}var Tf={kernelName:a.ExpandDims,backendName:"cpu",kernelFunc:Af},Nf=mc((function(e){return Math.expm1(e)})),If=tc(a.Expm1,Nf),Df={kernelName:a.Expm1,backendName:"cpu",kernelFunc:If},Rf=sc((function(e,t){return e/t})),Ff=Cc(a.RealDiv,Rf),Mf={kernelName:a.RealDiv,backendName:"cpu",kernelFunc:Ff},Pf=sc((function(e,t){return e-t})),Lf=Ac((function(e,t,n,r){return{real:e-n,imag:t-r}})),zf=Cc(a.Sub,Pf,Lf),Bf={kernelName:a.Sub,backendName:"cpu",kernelFunc:zf};function Uf(e,t,n){for(var r=e.shape,i=r[0],o=r[1],u=n.data.get(e.dataId),s=u.complexTensorInfos.real,c=u.complexTensorInfos.imag,l=[i,o],f=a.util.sizeFromShape(l),d=a.util.getTypedArrayFromDType("float32",f),h=a.util.getTypedArrayFromDType("float32",f),p=0;p<i;p++){for(var v=yl({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=yl({inputs:{x:c},backend:n,attrs:{begin:[p,0],size:[1,o]}}),g=xc({inputs:{real:v,imag:m},backend:n}),b=Wf(g,t,n),y=b.real,w=b.imag,x=a.backend_util.mergeRealAndImagArrays(y,w),O=0;O<o;O++){var k=a.backend_util.getComplexWithIndex(x,O);d[p*o+O]=k.real,h[p*o+O]=k.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var j=n.makeTensorInfo(l,"float32",d),_=n.makeTensorInfo(l,"float32",h),S=xc({inputs:{real:j,imag:_},backend:n});return n.disposeIntermediateTensorInfo(j),n.disposeIntermediateTensorInfo(_),S}function Wf(e,t,n){var r=a.util.sizeFromShape(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,u=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((b=r)&b-1)){var s=Vf(o,u,r,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",s.real),f=n.makeTensorInfo(c,"float32",s.imag),d=n.makeTensorInfo([],"float32",a.util.createScalarValue(r,"float32")),h=ac({inputs:{x:d},backend:n}),p=Mf.kernelFunc({inputs:{a:l,b:d},backend:n}),v=Mf.kernelFunc({inputs:{a:f,b:h},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(v.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),{real:m,imag:g}}return s}var b,y=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,u=0,s=0;s<t;s++){var c=a.backend_util.exponent(i*s,t,n),l=a.backend_util.getComplexWithIndex(e,s);o+=l.real*c.real-l.imag*c.imag,u+=l.real*c.imag+l.imag*c.real}n&&(o/=t,u/=t),a.backend_util.assignToTypedArray(r,o,u,i)}return r}(a.backend_util.mergeRealAndImagArrays(o,u),r,t);return a.backend_util.splitRealAndImagArrays(y)}function Vf(e,t,n,r,i){if(1===n)return{real:e,imag:t};var o=a.backend_util.mergeRealAndImagArrays(e,t),u=n/2,s=a.backend_util.complexWithEvenIndex(o),c=s.real,l=s.imag,f=[c.length],d=i.makeTensorInfo(f,"float32",c),h=i.makeTensorInfo(f,"float32",l),p=xc({inputs:{real:d,imag:h},backend:i}),v=a.backend_util.complexWithOddIndex(o),m=v.real,g=v.imag,b=[m.length],y=i.makeTensorInfo(b,"float32",m),w=i.makeTensorInfo(b,"float32",g),x=xc({inputs:{real:y,imag:w},backend:i}),O=Vf(c,l,u,r,i),k=O.real,j=O.imag,_=[k.length],S=i.makeTensorInfo(_,"float32",k),E=i.makeTensorInfo(_,"float32",j),C=xc({inputs:{real:S,imag:E},backend:i}),A=Vf(m,g,u,r,i),T=A.real,N=A.imag,I=[T.length],D=i.makeTensorInfo(I,"float32",T),R=i.makeTensorInfo(I,"float32",N),F=xc({inputs:{real:D,imag:R},backend:i}),M=a.backend_util.exponents(n,r),P=[M.real.length],L=i.makeTensorInfo(P,"float32",M.real),z=i.makeTensorInfo(P,"float32",M.imag),B=xc({inputs:{real:L,imag:z},backend:i}),U=cf({inputs:{a:B,b:F},backend:i}),W=Ic({inputs:{a:C,b:U},backend:i}),V=zf({inputs:{a:C,b:U},backend:i}),q=jc({inputs:{input:W},backend:i}),$=jc({inputs:{input:V},backend:i}),H=Dl({inputs:{input:W},backend:i}),G=Dl({inputs:{input:V},backend:i}),K=Fl({inputs:[q,$],backend:i,attrs:{axis:0}}),X=Fl({inputs:[H,G],backend:i,attrs:{axis:0}}),Y=i.data.get(K.dataId).values,J=i.data.get(X.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(X),{real:Y,imag:J}}var qf={kernelName:a.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],u=Rc({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=Uf(u,!1,n),c=Rc({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}};function $f(e){var t=e.backend,n=e.attrs,r=n.shape,i=n.value,o=n.dtype||a.util.inferDtype(i),u=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(u,i),t.makeTensorInfo(r,o,u)}var Hf={kernelName:a.Fill,backendName:"cpu",kernelFunc:$f};var Gf={kernelName:a.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,o=n,u=a.util.getTypedArrayFromDType(r.dtype,a.util.sizeFromShape(r.shape)),s=Object(i.a)(r.shape,4),c=s[0],l=s[1],f=s[2],d=s[3],h=o.data.get(r.dataId).values,p=0;p<c;p++)for(var v=p*f*l*d,m=0;m<l;m++)for(var g=m*(f*d),b=0;b<f;b++)for(var y=b*d,w=0;w<d;w++){var x=Math.round(f-b-1),O=v+g+y+w,k=h[O];if(x>=0&&x<f)k=h[v+g+x*d+w];u[O]=k}return{dataId:o.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Kf=mc((function(e){return Math.floor(e)})),Xf=tc(a.Floor,Kf),Yf={kernelName:a.Floor,backendName:"cpu",kernelFunc:Xf},Jf=sc((function(e,t){return Math.floor(e/t)})),Qf=Cc(a.FloorDiv,Jf,null,"int32"),Zf={kernelName:a.FloorDiv,backendName:"cpu",kernelFunc:Qf};var ed={kernelName:a.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=Pl({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Ic({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=wc(n,v,h,u,p),n.disposeIntermediateTensorInfo(g)}return v}};var td={kernelName:a.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=Ql({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Ic({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=wc(n,v,h,u,p),n.disposeIntermediateTensorInfo(g)}return v}};function nd(e,t,n,r,i,o,u,s,c){for(var l=Object(a.buffer)([r,o],n),f=0;f<r;f++){for(var d=[],h=0,p=0;p<i;p++){var v=e[f*i+p];h+=v*u[p],d.push(v)}if(h<0||h>=c/o)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<o;m++)l.values[f*o+m]=t.get.apply(t,Object(Tn.a)(t.indexToLoc(h*o+m)))}return l}var rd={kernelName:a.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,u=a.util.sizeFromShape(r.shape),s=o.shape,c=s[s.length-1],l=a.backend_util.prepareAndValidate(r,o),f=Object(i.a)(l,4),d=f[0],h=f[1],p=f[2],v=f[3];if(0===h)return n.makeTensorInfo(d,r.dtype,[]);var m=nd(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,h,c,p,v,r.shape,u);return n.makeTensorInfo(d,r.dtype,m.values)}};function ad(e,t,n){for(var r=Object(a.buffer)(n,e.dtype),i=0;i<r.size;++i){var o=r.indexToLoc(i).slice(),u=o[0],s=o[2],c=t.locToIndex([u,s]);o[2]=t.values[c];var l=e.locToIndex(o);r.values[i]=e.values[l]}return r}var id={kernelName:a.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.indices,u=r.axis,s=r.batchDims;Js([i,o],"gatherV2");var c=s;null==s&&(c=0);var l=a.util.sizeFromShape(o.shape),f=a.util.parseAxisParam(u,i.shape)[0],d=a.backend_util.segment_util.collectGatherOpShapeInfo(i,o,f,c),h=Rc({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),p=Rc({inputs:{x:o},backend:n,attrs:{shape:[d.batchSize,l/d.batchSize]}}),v=[d.batchSize,d.outerSize,l/d.batchSize,d.sliceSize],m=n.bufferSync(p),g=ad(n.bufferSync(h),m,v);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(d.outputShape,g.dtype,g.values)}},od=sc((function(e,t){return e>t?1:0})),ud=Cc(a.Greater,od,null,"bool"),sd={kernelName:a.Greater,backendName:"cpu",kernelFunc:ud},cd=sc((function(e,t){return e>=t?1:0})),ld=Cc(a.GreaterEqual,cd,null,"bool"),fd={kernelName:a.GreaterEqual,backendName:"cpu",kernelFunc:ld};var dd={kernelName:a.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],u=Rc({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=Uf(u,!0,n),c=Rc({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}},hd=ec(a.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),pd={kernelName:a.IsFinite,backendName:"cpu",kernelFunc:hd},vd=ec(a.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),md={kernelName:a.IsInf,backendName:"cpu",kernelFunc:vd},gd=ec(a.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),bd={kernelName:a.IsNan,backendName:"cpu",kernelFunc:gd},yd=sc((function(e,t){return e<t?1:0})),wd=Cc(a.Less,yd,null,"bool"),xd={kernelName:a.Less,backendName:"cpu",kernelFunc:wd},Od=sc((function(e,t){return e<=t?1:0})),kd=Cc(a.LessEqual,Od,null,"bool"),jd={kernelName:a.LessEqual,backendName:"cpu",kernelFunc:kd};function _d(e,t,n){var r=(t-e)/(n-1),i=a.util.makeZerosTypedArray(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}var Sd={kernelName:a.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=_d(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Ed=mc((function(e){return Math.log(e)})),Cd=tc(a.Log,Ed),Ad={kernelName:a.Log,backendName:"cpu",kernelFunc:Cd},Td=ec(a.Log1p,(function(e){return Math.log1p(e)})),Nd={kernelName:a.Log1p,backendName:"cpu",kernelFunc:Td},Id=sc((function(e,t){return e&&t})),Dd=Cc(a.LogicalAnd,Id,null,"bool"),Rd={kernelName:a.LogicalAnd,backendName:"cpu",kernelFunc:Dd},Fd=ec(a.LogicalNot,(function(e){return e?0:1}),"bool"),Md={kernelName:a.LogicalNot,backendName:"cpu",kernelFunc:Fd},Pd=sc((function(e,t){return e||t})),Ld=Cc(a.LogicalOr,Pd,null,"bool"),zd={kernelName:a.LogicalOr,backendName:"cpu",kernelFunc:Ld};var Bd={kernelName:a.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta;Js(i,"LRN");var l=i.shape[3],f=l-1,d=n.data.get(i.dataId).values,h=a.util.sizeFromShape(i.shape),p=new Float32Array(h);function v(e){for(var t=e%l,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,f),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<h;m++){var g=v(m),b=d[m]*Math.pow(u+s*g,-c);p[m]=b}return n.makeTensorInfo(i.shape,i.dtype,p)}};var Ud={kernelName:a.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.y,u=t.dy,s=r.depthRadius,c=r.bias,l=r.alpha,f=r.beta;Js(u,"LRNGrad");for(var d=a.util.sizeFromShape(u.shape),h=u.shape[3],p=n.data.get(u.dataId).values,v=n.data.get(i.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),b=d,y=0;y<b;y++){for(var w=y%h,x=y-w+Math.max(0,w-s),O=y-w+Math.min(h,w+s+1),k=0,j=x;j<O;j++)k+=Math.pow(v[j],2);k=l*k+c;for(var _=x;_<O;_++){var S=-2*l*f*v[_]*m[y]/k;y===_&&(S+=Math.pow(k,-f)),S*=p[y],g[_]+=S}}return n.makeTensorInfo(u.shape,i.dtype,g)}};function Wd(e,t,n,r){for(var i=a.util.getTypedArrayFromDType(r,a.util.sizeFromShape(n)),o=0;o<i.length;++o){for(var u=o*t,s=e[u],c=0;c<t;++c){var l=e[u+c];(Number.isNaN(l)||l>s)&&(s=l)}i[o]=s}return i}function Vd(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.reductionIndices,s=r.keepDims,c=n,l=o.shape,f=l.length,d=a.util.parseAxisParam(u,l),h=d,p=a.backend_util.getAxesPermutation(h,f),v=c.data.get(o.dataId).values;if(null!=p){for(var m=new Array(f),g=0;g<m.length;g++)m[g]=l[p[g]];v=Hc(v,l,o.dtype,p,m),h=a.backend_util.getInnerMostAxes(h.length,f),l=m}Js(o,"max"),a.backend_util.assertAxesAreInnerMostDims("max",h,f);var b=a.backend_util.computeOutAndReduceShapes(l,h),y=Object(i.a)(b,2),w=y[0],x=y[1],O=Wd(v,a.util.sizeFromShape(x),w,o.dtype),k=c.write(O,w,o.dtype),j=w;s&&(j=a.backend_util.expandShapeToKeepDim(w,d));return{dataId:k,shape:j,dtype:o.dtype}}var qd={kernelName:a.Max,backendName:"cpu",kernelFunc:Vd},$d=sc((function(e,t){return Math.max(e,t)})),Hd=Cc(a.Maximum,$d),Gd={kernelName:a.Maximum,backendName:"cpu",kernelFunc:Hd};var Kd={kernelName:a.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;Js(i,"maxPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l,f=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===f.filterWidth&&1===f.filterHeight&&a.util.arraysEqual(f.inShape,f.outShape))l=ac({inputs:{x:i},backend:n});else{var d=n.data.get(i.dataId).values,h=a.util.computeStrides(i.shape),p=ll(d,i.shape,i.dtype,h,f,"max");l=n.makeTensorInfo(f.outShape,i.dtype,p.values)}return l}};var Xd={kernelName:a.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat;Js(i,"maxPool3d");var f=a.backend_util.computePool3DInfo(i.shape,o,u,1,s,c,l),d=dl(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),f,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var Yd={kernelName:a.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode;Js([i,o],"maxPool3DGrad");for(var f=a.backend_util.computePool3DInfo(o.shape,u,s,1,c,l),d=function(e,t){for(var n=Object(a.buffer)(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,u=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,v=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var b=0;b<t.outDepth;++b){for(var y=b*r-h,w=y;w<0;)w+=u;for(var x=Math.min(t.inDepth,l+y),O=0;O<t.outHeight;++O){for(var k=O*i-p,j=k;j<0;)j+=s;for(var _=Math.min(t.inHeight,f+k),S=0;S<t.outWidth;++S){for(var E=S*o-v,C=E;C<0;)C+=c;for(var A=Math.min(t.inWidth,d+E),T=Number.NEGATIVE_INFINITY,N=-1,I=w;I<x;I+=u)for(var D=I-y,R=j;R<_;R+=s)for(var F=R-k,M=C;M<A;M+=c){var P=M-E,L=e.get(m,I,R,M,g);L>=T&&(T=L,N=D*f*d+F*f+P)}n.set(N,m,b,O,S,g)}}}return n}(n.bufferSync(o),f),h=f.strideDepth,p=f.strideHeight,v=f.strideWidth,m=f.dilationDepth,g=f.dilationHeight,b=f.dilationWidth,y=f.effectiveFilterDepth,w=f.effectiveFilterHeight,x=f.effectiveFilterWidth,O=y-1-f.padInfo.front,k=x-1-f.padInfo.left,j=w-1-f.padInfo.top,_=Object(a.buffer)(o.shape,"float32"),S=n.bufferSync(i),E=0;E<f.batchSize;++E)for(var C=0;C<f.inChannels;++C)for(var A=0;A<f.inDepth;++A)for(var T=0;T<f.inHeight;++T)for(var N=0;N<f.inWidth;++N){for(var I=A-O,D=T-j,R=N-k,F=0,M=0;M<y;M+=m){var P=(I+M)/h;if(!(P<0||P>=f.outDepth||Math.floor(P)!==P))for(var L=0;L<w;L+=g){var z=(D+L)/p;if(!(z<0||z>=f.outHeight||Math.floor(z)!==z))for(var B=0;B<x;B+=b){var U=(R+B)/v;if(!(U<0||U>=f.outWidth||Math.floor(U)!==U)){var W=y*w*x-1-d.get(E,P,z,U,C)===M*w*x+L*x+B?1:0;if(0!==W)F+=S.get(E,P,z,U,C)*W}}}}_.set(F,E,A,T,N,C)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var Jd={kernelName:a.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;Js([o,t.output],"maxPoolGrad");for(var s=r.filterSize,c=r.strides,l=r.pad,f=r.dimRoundingMode,d=a.backend_util.computePool2DInfo(u.shape,s,c,1,l,f),h=n.data.get(u.dataId).values,p=Object(a.buffer)(d.outShape,u.dtype,fl(h,u.shape,u.dtype,d).values),v=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,b=d.dilationWidth,y=d.effectiveFilterHeight,w=d.effectiveFilterWidth,x=w-1-d.padInfo.left,O=y-1-d.padInfo.top,k=Object(a.buffer)(u.shape,"float32"),j=n.data.get(i.dataId).values,_=Object(a.buffer)(i.shape,"float32",j),S=0;S<d.batchSize;++S)for(var E=0;E<d.inChannels;++E)for(var C=0;C<d.inHeight;++C)for(var A=0;A<d.inWidth;++A){for(var T=C-O,N=A-x,I=0,D=0;D<y;D+=g){var R=(T+D)/v;if(!(R<0||R>=d.outHeight||Math.floor(R)!==R))for(var F=0;F<w;F+=b){var M=(N+F)/m;if(!(M<0||M>=d.outWidth||Math.floor(M)!==M)){var P=y*w-1-p.get(S,R,M,E)===D*w+F?1:0;if(0!==P)I+=_.get(S,R,M,E)*P}}}k.set(I,S,C,A,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Qd={kernelName:a.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.filterSize,s=n.strides,c=n.pad,l=n.includeBatchInIndex,f=r;Js(o,"MaxPoolWithArgmax");var d=f.data.get(o.dataId).values,h=a.backend_util.computePool2DInfo(o.shape,u,s,[1,1],c),p=function(e,t,n,r,i){var o=ll(e,0,n,a.util.computeStrides(t),i,"max"),u=fl(e,t,n,i,!0,r);return[o.values,u.values]}(d,o.shape,o.dtype,l,h),v=Object(i.a)(p,2),m=v[0],g=v[1],b=f.write(m,h.outShape,o.dtype),y=f.write(g,h.outShape,o.dtype);return[{dataId:b,shape:h.outShape,dtype:o.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};var Zd={kernelName:a.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.keepDims,s=a.util.parseAxisParam(o,i.shape),c=a.backend_util.computeOutAndReduceShapes(i.shape,s)[1],l=a.util.sizeFromShape(c),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([l]));f.push(d);var h=Sc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(h);var p=Ff({inputs:{a:h,b:d},backend:n});f.push(p);var v=ff({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:u}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var eh={kernelName:a.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;Js(o,"min");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=Gc({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,w=0;w<b.length;++w){for(var x=w*g,O=y[x],k=0;k<g;++k){var j=y[x+k];(Number.isNaN(j)||j<O)&&(O=j)}b[w]=O}null!=f&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(v,d.dtype,b);if(s){var S=Rc({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(_),S}return _}},th=sc((function(e,t){return Math.min(e,t)})),nh=Cc(a.Minimum,th),rh={kernelName:a.Minimum,backendName:"cpu",kernelFunc:nh};var ah={kernelName:a.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.mode;Js(i,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=o.map((function(e,t){return e[0]+i.shape[t]})),f="reflect"===u?0:1,d=n.data.get(i.dataId).values,h=i.shape.length,p=a.util.computeStrides(i.shape),v=a.util.sizeFromShape(s),m=s.length,g=a.util.computeStrides(s),b=a.util.getTypedArrayFromDType(i.dtype,v),y=0;y<v;y++){for(var w=a.util.indexToLoc(y,m,g),x=0;x<m;x++)w[x]<c[x]?w[x]=2*c[x]-w[x]-f:w[x]>=l[x]&&(w[x]=2*(l[x]-1)-w[x]+f);w=w.map((function(e,t){return e-c[t]}));var O=a.util.locToIndex(w,h,p);b[y]=d[O]}return{dataId:n.write(b,s,i.dtype),shape:s,dtype:i.dtype}}},ih=sc((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),oh=Cc(a.Mod,ih),uh={kernelName:a.Mod,backendName:"cpu",kernelFunc:oh},sh=n(450);function ch(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.dim,u=i.shape.length,s=o;if(-1===s&&(s=u-1),s!==u-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(u," and dim was ").concat(s));var c=a.util.parseAxisParam([s],i.shape),l=Vd({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),f=a.backend_util.expandShapeToKeepDim(l.shape,c),d=Rc({inputs:{x:l},backend:n,attrs:{shape:f}}),h=zf({inputs:{a:i,b:d},backend:n}),p=Ef({inputs:{x:h},backend:n}),v=ff({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),m=Rc({inputs:{x:v},backend:n,attrs:{shape:f}}),g=Ff({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}var lh={kernelName:a.Softmax,backendName:"cpu",kernelFunc:ch};var fh={kernelName:a.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.numSamples,u=r.seed,s=r.normalized;Js(i,"multinomial");for(var c=s?i:ch({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=c.shape[0],f=c.shape[1],d=n.data.get(c.dataId).values,h=[l,o],p=a.util.makeZerosTypedArray(a.util.sizeFromShape(h),"int32"),v=0;v<l;++v){var m=v*f,g=new Float32Array(f-1);g[0]=d[m];for(var b=1;b<g.length;++b)g[b]=g[b-1]+d[m+b];for(var y=sh.alea(u.toString()),w=v*o,x=0;x<o;++x){var O=y();p[w+x]=g.length;for(var k=0;k<g.length;k++)if(O<g[k]){p[w+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(h,"int32",p)}};function dh(e,t,n){var r=a.util.createScalarValue(-1,n);return uf([],t,r,e,n)}var hh={kernelName:a.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;Js(r,"neg");var a=dh(n.data.get(r.dataId).values,r.shape,r.dtype),o=Object(i.a)(a,2),u=o[0],s=o[1];return n.makeTensorInfo(s,r.dtype,u)}},ph=a.kernel_impls.nonMaxSuppressionV3Impl;var vh={kernelName:a.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold;Js(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=ph(c,l,o,u,s).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},mh=a.kernel_impls.nonMaxSuppressionV4Impl;var gh={kernelName:a.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.padToMaxOutputSize;Js(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=mh(l,f,o,u,s,c),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},bh=a.kernel_impls.nonMaxSuppressionV5Impl;var yh={kernelName:a.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.softNmsSigma;Js(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=bh(l,f,o,u,s,c),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},wh=sc((function(e,t){return e!==t?1:0})),xh=Cc(a.NotEqual,wh,null,"bool"),Oh={kernelName:a.NotEqual,backendName:"cpu",kernelFunc:xh};var kh={kernelName:a.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=r.depth,u=r.onValue,s=r.offValue;Js(i,"oneHot");var c=a.util.sizeFromShape(i.shape),l=new Float32Array(c*o);l.fill(s);for(var f=n.data.get(i.dataId).values,d=0;d<c;++d)f[d]>=0&&f[d]<o&&(l[d*o+f[d]]=u);return n.makeTensorInfo([].concat(Object(Tn.a)(i.shape),[o]),"int32",l)}};function jh(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=jc({inputs:{input:r},backend:n}),i=jh({inputs:{x:a},backend:n}),o=Dl({inputs:{input:r},backend:n}),u=jh({inputs:{x:o},backend:n}),s=xc({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return $f({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var _h={kernelName:a.ZerosLike,backendName:"cpu",kernelFunc:jh};var Sh={kernelName:a.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=jc({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=Dl({inputs:{input:a},backend:r}),s=jh({inputs:{x:u},backend:r}),c=xc({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return $f({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Eh(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Af({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){a.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=[],s=Fl({inputs:t.map((function(e){var t=Af({inputs:{input:e},backend:n,attrs:{dim:r}});return u.push(t),t})),backend:n,attrs:{axis:r}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Ch={kernelName:a.Pack,backendName:"cpu",kernelFunc:Eh};var Ah={kernelName:a.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.constantValue;Js(i,"pad");var s=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=n.data.get(i.dataId).values,f=a.util.sizeFromShape(i.shape),d=i.shape.length,h=a.util.computeStrides(i.shape),p=a.util.sizeFromShape(s),v=s.length,m=a.util.computeStrides(s),g=a.util.getTypedArrayFromDType(i.dtype,p);0!==u&&g.fill(u);for(var b=0;b<f;b++){var y=a.util.indexToLoc(b,d,h).map((function(e,t){return e+c[t]}));g[a.util.locToIndex(y,v,m)]=l[b]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}},Th=sc((function(e,t){return Math.pow(e,t)})),Nh=Cc(a.Pow,Th),Ih={kernelName:a.Pow,backendName:"cpu",kernelFunc:Nh};function Dh(e,t,n,r){for(var o=a.backend_util.computeOutAndReduceShapes(e,r),u=Object(i.a)(o,2),s=u[0],c=u[1],l=Object(a.upcastType)(t,"int32"),f=a.util.makeZerosTypedArray(a.util.sizeFromShape(s),l),d=a.util.sizeFromShape(c),h=0;h<f.length;++h){for(var p=h*d,v=1,m=0;m<d;++m)v*=n[p+m];f[h]=v}return{outVals:f,outShape:s,outDtype:l}}var Rh={kernelName:a.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.keepDims;Js(i,"prod");var s=i.shape.length,c=a.util.parseAxisParam(o,i.shape),l=a.backend_util.getAxesPermutation(c,s),f=c,d=i,h=[];null!=l&&(d=Gc({inputs:{x:i},backend:n,attrs:{perm:l}}),h.push(d),f=a.backend_util.getInnerMostAxes(f.length,s));var p=n.data.get(d.dataId).values,v=Dh(d.shape,d.dtype,p,f),m=v.outVals,g=v.outShape,b=v.outDtype,y=g;return u&&(y=a.backend_util.expandShapeToKeepDim(g,c)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,b,m)}};function Fh(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return a.util.makeZerosTypedArray(0,r);var i=Math.abs(Math.ceil((t-e)/n)),o=a.util.makeZerosTypedArray(i,r);t<e&&1===n&&(n=-1),o[0]=e;for(var u=1;u<o.length;u++)o[u]=o[u-1]+n;return o}var Mh={kernelName:a.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Fh(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Ph=ec(a.Reciprocal,(function(e){return 1/e})),Lh={kernelName:a.Reciprocal,backendName:"cpu",kernelFunc:Ph};var zh={kernelName:a.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size;Js(o,"resizeBilinear");for(var l=a.util.computeStrides(o.shape),f=Object(i.a)(c,2),d=f[0],h=f[1],p=Object(i.a)(o.shape,4),v=p[0],m=p[1],g=p[2],b=p[3],y=n.data.get(o.dataId).values,w=new Float32Array(a.util.sizeFromShape([v,d,h,b])),x=[u&&d>1?m-1:m,u&&h>1?g-1:g],O=[u&&d>1?d-1:d,u&&h>1?h-1:h],k=0,j=x[0]/O[0],_=x[1]/O[1],S=0;S<v;S++)for(var E=0;E<d;E++){var C=void 0;C=s?j*(E+.5)-.5:j*E;for(var A=Math.max(0,Math.floor(C)),T=C-A,N=Math.min(m-1,Math.ceil(C)),I=S*l[0]+A*l[1],D=S*l[0]+N*l[1],R=0;R<h;R++){var F=void 0;F=s?_*(R+.5)-.5:_*R;for(var M=Math.max(0,Math.floor(F)),P=F-M,L=Math.min(g-1,Math.ceil(F)),z=I+M*l[2],B=D+M*l[2],U=I+L*l[2],W=D+L*l[2],V=0;V<b;V++){var q=y[z+V],$=y[B+V],H=q+(y[U+V]-q)*P,G=H+($+(y[W+V]-$)*P-H)*T;w[k++]=G}}}return n.makeTensorInfo([v,d,h,b],"float32",w)}};var Bh={kernelName:a.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=t.dy,s=r.alignCorners;Js([u,o],"resizeBilinearGrad");for(var c=a.util.computeStrides(o.shape),l=Object(i.a)(o.shape,4),f=l[0],d=l[1],h=l[2],p=l[3],v=Object(i.a)(u.shape,3),m=v[1],g=v[2],b=new Float32Array(f*d*h*p),y=[s&&m>1?d-1:d,s&&g>1?h-1:h],w=[s&&m>1?m-1:m,s&&g>1?g-1:g],x=y[0]/w[0],O=y[1]/w[1],k=n.data.get(u.dataId).values,j=0,_=0;_<f;_++)for(var S=_*c[0],E=0;E<m;E++)for(var C=E*x,A=Math.floor(C),T=Math.min(Math.ceil(C),d-1),N=S+A*c[1],I=S+T*c[1],D=C-A,R=1-D,F=0;F<g;F++)for(var M=F*O,P=Math.floor(M),L=Math.min(Math.ceil(M),h-1),z=M-P,B=1-z,U=N+P*c[2],W=N+L*c[2],V=I+P*c[2],q=I+L*c[2],$=R*B,H=R*z,G=D*B,K=D*z,X=0;X<p;X++){var Y=k[j++];b[U+X]+=Y*$,b[W+X]+=Y*H,b[V+X]+=Y*G,b[q+X]+=Y*K}return n.makeTensorInfo([f,h,d,p],"float32",b)}};var Uh={kernelName:a.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size;Js(o,"resizeNearestNeighbor");for(var l=a.util.computeStrides(o.shape),f=Object(i.a)(c,2),d=f[0],h=f[1],p=Object(i.a)(o.shape,4),v=p[0],m=p[1],g=p[2],b=p[3],y=n.data.get(o.dataId).values,w=new Float32Array(v*d*h*b),x=[u&&d>1?m-1:m,u&&h>1?g-1:g],O=[u&&d>1?d-1:d,u&&h>1?h-1:h],k=x[0]/O[0],j=x[1]/O[1],_=0,S=0;S<v;S++)for(var E=S*l[0],C=0;C<d;C++){var A=s?k*(C+.5):k*C,T=Math.min(m-1,u?Math.round(A):Math.floor(A));s&&(T=Math.max(0,T));for(var N=E+T*l[1],I=0;I<h;I++){var D=s?j*(I+.5):j*I,R=Math.min(g-1,u?Math.round(D):Math.floor(D));s&&(R=Math.max(0,R));for(var F=N+R*l[2],M=0;M<b;M++){var P=y[F+M];w[_++]=P}}}return n.makeTensorInfo([v,d,h,b],o.dtype,w)}};var Wh={kernelName:a.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=t.dy,s=r.alignCorners;Js([u,o],"resizeNearestNeighborGrad");for(var c=a.util.computeStrides(o.shape),l=a.util.computeStrides(u.shape),f=Object(i.a)(o.shape,4),d=f[0],h=f[1],p=f[2],v=f[3],m=Object(i.a)(u.shape,3),g=m[1],b=m[2],y=new Float32Array(d*h*p*v),w=n.data.get(u.dataId).values,x=[s&&g>1?h-1:h,s&&b>1?p-1:p],O=[s&&g>1?g-1:g,s&&b>1?b-1:b],k=x[0]/O[0],j=x[1]/O[1],_=1/k,S=1/j,E=2*Math.ceil(_)+2,C=2*Math.ceil(S)+2,A=0;A<d;A++)for(var T=A*c[0],N=0;N<h;N++)for(var I=T+N*c[1],D=Math.floor(N*_),R=Math.floor(D-E/2),F=0;F<p;F++)for(var M=I+F*c[2],P=Math.floor(F*S),L=Math.floor(P-C/2),z=0;z<v;z++){for(var B=0,U=0;U<E;U++){var W=U+R;if(!(W<0||W>=g)){var V=T+W*l[1],q=W*k;if(N===Math.min(h-1,s?Math.round(q):Math.floor(q)))for(var $=0;$<C;$++){var H=$+L;if(!(H<0||H>=b)){var G=V+H*l[2],K=H*j;F===Math.min(p-1,s?Math.round(K):Math.floor(K))&&(B+=w[G+z])}}}}y[M+z]=B}return n.makeTensorInfo(o.shape,o.dtype,y)}};var Vh={kernelName:a.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.dims;Js(i,"reverse");var u=i.shape.length,s=a.util.parseAxisParam(o,i.shape);if(0===u)return ac({inputs:{x:i},backend:n});for(var c=new a.TensorBuffer(i.shape,i.dtype),l=n.bufferSync(i),f=function(e){var t=c.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=i.shape[e]-1-n[e]})),c.set.apply(c,[l.get.apply(l,Object(Tn.a)(n))].concat(Object(Tn.a)(t)))},d=0;d<c.size;d++)f(d);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},qh={kernelName:a.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,u=n.radians,s=n.fillValue,c=n.center,l=r,f=a.util.getTypedArrayFromDType(o.dtype,a.util.sizeFromShape(o.shape)),d=Object(i.a)(o.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=a.backend_util.getImageCenter(c,p,v),b=Object(i.a)(g,2),y=b[0],w=b[1],x=Math.sin(u),O=Math.cos(u),k=l.data.get(o.dataId).values,j=0;j<h;j++)for(var _=j*v*p*m,S=0;S<p;S++)for(var E=S*(v*m),C=0;C<v;C++)for(var A=C*m,T=0;T<m;T++){var N=[h,S,C,T],I=N[2],D=N[1],R=(I-y)*O-(D-w)*x,F=(I-y)*x+(D-w)*O;R=Math.round(R+y),F=Math.round(F+w);var M=s;if("number"!==typeof s&&(M=3===T?255:s[T]),R>=0&&R<v&&F>=0&&F<p)M=k[_+F*(v*m)+R*m+T];f[_+E+A+T]=M}return{dataId:l.write(f,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},$h=ec(a.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Hh={kernelName:a.Round,backendName:"cpu",kernelFunc:$h},Gh=mc((function(e){return 1/Math.sqrt(e)})),Kh=tc(a.Rsqrt,Gh),Xh={kernelName:a.Rsqrt,backendName:"cpu",kernelFunc:Kh};function Yh(e,t,n,r,i,o,u,s,c,l){var f=[r/i,i],d=e.values,h=t.values;if(0===r)return Object(a.buffer)(n,t.dtype);var p=Object(a.buffer)(f,t.dtype);p.values.fill(c);for(var v=0;v<o;v++){for(var m=[],g=0,b=0;b<u;b++){var y=d[v*u+b];m.push(y),g+=y*s[b]}if(g<0||g>=r/i)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var w=0;w<i;w++)l?p.values[g*i+w]+=h[v*i+w]:p.values[g*i+w]=0===t.rank?h[0]:h[v*i+w]}return p}var Jh={kernelName:a.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=t.updates,u=r.shape,s=a.backend_util.calculateShapes(o,i,u),c=s.sliceRank,l=s.numUpdates,f=s.sliceSize,d=s.strides,h=s.outputSize,p=Yh(n.bufferSync(i),n.bufferSync(o),u,h,f,l,c,d,0,!0);return n.makeTensorInfo(u,p.dtype,p.values)}};var Qh={kernelName:a.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,i=t.t,o=t.e;Js([r,i,o],"select");for(var u=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,f=Object(a.upcastType)(i.dtype,o.dtype),d=a.util.makeZerosTypedArray(a.util.sizeFromShape(i.shape),f),h=0,p=0===u||u>1||1===i.shape.length?1:a.util.sizeFromShape(i.shape.slice(1)),v=0;v<s.length;v++)for(var m=0;m<p;m++)1===s[v]?d[h++]=c[v]:d[h++]=l[v];return n.makeTensorInfo(i.shape,f,d)}},Zh=a.backend_util.SELU_SCALEALPHA,ep=a.backend_util.SELU_SCALE,tp=ec(a.Selu,(function(e){return e>=0?ep*e:Zh*(Math.exp(e)-1)})),np={kernelName:a.Selu,backendName:"cpu",kernelFunc:tp},rp=ec(a.Sign,(function(e){return e<0?-1:e>0?1:0})),ap={kernelName:a.Sign,backendName:"cpu",kernelFunc:rp},ip=ec(a.Sin,(function(e){return Math.sin(e)})),op={kernelName:a.Sin,backendName:"cpu",kernelFunc:ip},up=ec(a.Sinh,(function(e){return Math.sinh(e)})),sp={kernelName:a.Sinh,backendName:"cpu",kernelFunc:up},cp=Math.log(1.1920928955078125e-7)+2,lp=ec(a.Softplus,(function(e){var t=e>-cp,n=e<cp,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),fp={kernelName:a.Softplus,backendName:"cpu",kernelFunc:lp};var dp={kernelName:a.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.paddings;Js([i],"spaceToBatchND");var s=a.util.sizeFromShape(o),c=[[0,0]];c.push.apply(c,Object(Tn.a)(u));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var f=Ah.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),d=a.backend_util.getReshaped(f.shape,o,s,!1),h=a.backend_util.getPermuted(d.length,o.length,!1),p=a.backend_util.getReshapedPermuted(f.shape,o,s,!1),v=Rc({inputs:{x:f},backend:n,attrs:{shape:d}}),m=Gc({inputs:{x:v},backend:n,attrs:{perm:h}}),g=Rc({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}};function hp(e,t,n,r,i,o,u){var s=t[0],c=o[0],l=new Array(c),f=new Array(s),d=t[1];if(0===c){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ".concat(s));return[a.util.getArrayFromDType(n,0),[0,d],a.util.getArrayFromDType(i,0),l,f]}for(var h=!0,p=0,v=new Array(c).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," < 0"));if(g>=c)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," >= ").concat(c));++v[g],h=h&&g>=p,p=g}for(var b=!0,y=0;y<c;++y){var w=0===v[y];l[y]=w,b=b&&!w,v[y]=Math.max(v[y],1),y>0&&(v[y]+=v[y-1])}if(b&&h){for(var x=e,O=r,k=0;k<s;++k)f[k]=k;return[x,[s,d],O,l,f]}for(var j=v[c-1],_=a.util.getArrayFromDType(n,j*d),S=a.util.getArrayFromDType(i,j),E=new Array(c).fill(0),C=0;C<s;++C){var A=e[C*d],T=E[A],N=(0===A?0:v[A-1])+T;E[A]++;for(var I=0;I<d;++I)_[N*d+I]=e[C*d+I];S[N]=r[C],f[C]=N}for(var D=0;D<c;++D){if(0===E[D]){var R=0===D?0:v[D-1];_[R*d+0]=D;for(var F=1;F<d;++F)_[R*d+F]=0;S[R]=u}}return[_,[j,d],S,l,f]}var pp={kernelName:a.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,u=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==u.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(u.shape));var s=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,f=n.data.get(u.dataId).values[0],d=hp(s,r.shape,r.dtype,c,a.dtype,l,f),h=Object(i.a)(d,5),p=h[0],v=h[1],m=h[2],g=h[3],b=h[4];return[n.makeTensorInfo(v,r.dtype,p),n.makeTensorInfo([v[0]],a.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}};function vp(e,t,n,r,i){for(var o=a.util.sizeFromShape(r),u=t[0],s=i.length,c=[],l=1,f=-1,d=0;d<s;++d){var h=i[d];if(-1===h){if(-1!==f)throw new Error("only one output dimension may be -1, not both ".concat(f," and ").concat(d));f=d,c.push(1)}else{if(h<0)throw new Error("size ".concat(d," must be non-negative, not ").concat(h));l*=h,c.push(h)}}if(-1!==f){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var p=Math.trunc(o/l);if(l*p!==o)throw new Error("Input to reshape is a SparseTensor with ".concat(o,"\n          dense values, but the requested shape requires a multiple of ").concat(l,". inputShape=").concat(r," outputShape= ").concat(c));c[f]=p}var v=a.util.sizeFromShape(c);if(v!==o)throw new Error("Input to reshape is a tensor with ".concat(o," dense values, but the requested shape has ").concat(v,". inputShape=").concat(r," outputShape=").concat(c));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var b=m-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}var y=[];if(s>0){y[s-1]=1;for(var w=s-2;w>=0;--w)y[w]=y[w+1]*c[w+1]}for(var x=a.util.getArrayFromDType(n,u*s),O=0;O<u;++O){for(var k=0,j=0;j<m;++j)k+=e[O*m+j]*g[j];for(var _=0;_<s;++_)x[O*s+_]=Math.trunc(k/y[_]),k%=y[_]}return[x,[u,s],c]}var mp={kernelName:a.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var u=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(o.dataId).values),l=vp(s,r.shape,r.dtype,u,c),f=Object(i.a)(l,3),d=f[0],h=f[1],p=f[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};function gp(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length;if(s!==i.length)throw new Error("segmentIds and indices should have same size.");var c=[t[0],e.length/t[0]],l=c[1],f=s>0?i[s-1]+1:0,d=f;if(d<0)throw new Error("segment ids must be >= 0");var h=t.slice();h[0]=d;var p=h.reduce((function(e,t){return e*t}),1),v=a.util.getArrayFromDType(n,p);if(0===s)return d>0&&v.fill(u),[v,h];if(d<=0)throw new Error("segment ids must be >= 0");for(var m=0,g=1,b=0,y=i[m];;){var w=0;if(g<s){if(y===(w=i[g])){++g;continue}if(y>=w)throw new Error("segment ids are not increasing")}if(y<0||y>=d)throw new Error("Segment id ".concat(y," out of range [0, ").concat(d,"), possibly because segmentIds input is not sorted."));y>b&&v.fill(u,b*l,y*l);for(var x=m;x<g;++x){var O=r[x];if(O<0||O>=c[0])throw new Error("Bad: indices[".concat(x,"] == ").concat(r[x]," out of range [0, ").concat(c[0],")"));for(var k=0;k<l;k++)v[y*l+k]+=e[O*l+k]}if(o)for(var j=0;j<l;j++)v[y*l+j]/=g-m;if(m=g,b=y+1,y=w,++g>s)break}return b<d&&v.fill(u,b*l,d*l),[v,h]}var bp={kernelName:a.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));var u=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=gp(u,r.shape,r.dtype,s,c,!0),f=Object(i.a)(l,2),d=f[0],h=f[1];return n.makeTensorInfo(h,r.dtype,d)}};var yp={kernelName:a.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));var u=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=gp(u,r.shape,r.dtype,s,c),f=Object(i.a)(l,2),d=f[0],h=f[1];return n.makeTensorInfo(h,r.dtype,d)}};var wp={kernelName:a.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.sparseIndices,o=t.sparseValues,u=t.defaultValue,s=r.outputShape,c=a.backend_util.calculateShapes(o,i,s),l=c.sliceRank,f=c.numUpdates,d=c.sliceSize,h=c.strides,p=c.outputSize,v=Yh(n.bufferSync(i),n.bufferSync(o),s,p,d,f,l,h,n.data.get(u.dataId).values[0],!1);return n.makeTensorInfo(s,v.dtype,v.values)}};var xp={kernelName:a.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.numOrSizeSplits,u=r.axis,s=a.util.parseAxisParam(u,i.shape)[0],c=a.backend_util.prepareSplitSize(i,o,s),l=new Array(i.shape.length).fill(0),f=i.shape.slice();return c.map((function(e){var t=Object(Tn.a)(f);t[s]=e;var r=yl({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},Op=mc((function(e){return Math.sqrt(e)})),kp=ec(a.Sqrt,(function(e){return Math.sqrt(e)})),jp={kernelName:a.Sqrt,backendName:"cpu",kernelFunc:kp},_p={kernelName:a.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Js(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var s=i[u];o[u]=s*s}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Sp=sc((function(e,t){var n=e-t;return n*n})),Ep=Cc(a.SquaredDifference,Sp),Cp={kernelName:a.SquaredDifference,backendName:"cpu",kernelFunc:Ep},Ap=ec(a.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Tp={kernelName:a.Step,backendName:"cpu",kernelFunc:Ap};function Np(e,t,n,r){for(var i=Object(a.buffer)(e,t.dtype),o=0;o<i.size;o++){for(var u=i.indexToLoc(o),s=new Array(u.length),c=0;c<s.length;c++)s[c]=u[c]*n[c]+r[c];i.set.apply(i,[t.get.apply(t,s)].concat(Object(Tn.a)(u)))}return i}var Ip={kernelName:a.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.begin,u=r.end,s=r.strides,c=r.beginMask,l=r.endMask,f=r.ellipsisMask,d=r.newAxisMask,h=r.shrinkAxisMask;Js(i,"stridedSlice");var p,v=a.slice_util.sliceInfo(i.shape,o,u,s,c,l,f,d,h),m=v.nonStrided,g=v.$begin,b=v.$strides,y=v.size,w=v.newShape,x=v.outShape,O=Rc({inputs:{x:i},backend:n,attrs:{shape:w}});if(m){var k=yl({inputs:{x:O},backend:n,attrs:{begin:g,size:y}});p=Rc({inputs:{x:k},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))p=n.makeTensorInfo(x,i.dtype,[]);else{var j=Np(x,n.bufferSync(O),b,g);p=n.makeTensorInfo(j.shape,j.dtype,j.values)}var _=Rc({inputs:{x:p},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(O),n.disposeIntermediateTensorInfo(p),_}},Dp=function(){function e(t,n,r,i,o,u){Object(_n.a)(this,e),this.separator=a.util.encodeString(t),this.nGramWidths=n,this.leftPad=a.util.encodeString(r),this.rightPad=a.util.encodeString(i),this.padWidth=o,this.preserveShort=u}return Object(Sn.a)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,u=function(u){var s=o.getPadWidth(i),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),f=i-(c+l),d=t+(c>0?0:u-s),h=0;h+=c*o.leftPad.length;for(var p=0;p<f;++p)h+=e[d+p].length;h+=l*o.rightPad.length,h+=(c+l+f-1)*o.separator.length,n[r+u]=new Uint8Array(h);for(var v=n[r+u],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},b=0;b<c;++b)g(o.leftPad),g(o.separator);for(var y=0;y<f-1;++y)g(e[d+y]),g(o.separator);if(f>0){g(e[d+f-1]);for(var w=0;w<l;++w)g(o.separator),g(o.rightPad)}else{for(var x=0;x<l-1;++x)g(o.rightPad),g(o.separator);g(o.rightPad)}},s=0;s<a;++s)u(s)}},{key:"compute",value:function(e,t){var n=this,r=e.length,i=t.length;if(i>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var u=1;u<i;++u){var s=t[u]>=o;if(!(s=s&&t[u]<=r))throw new Error("Invalid split value ".concat(t[u],", must be in [").concat(o,", ").concat(r,"]"));o=t[u]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var c=i-1,l=a.util.getArrayFromDType("int32",i);if(0===r||0===i){for(var f=new Array(r),d=0;d<=c;++d)l[d]=0;return[f,l]}l[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),l[e]=l[e-1]+a},p=1;p<=c;++p)h(p);for(var v=new Array(l[c]),m=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var u=t[r+1]-t[r],s=n.getNumNGrams(u,o);n.createNGrams(e,a,v,i,s,o),i+=s})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var u=o+2*n.padWidth;n.createNGrams(e,a,v,i,1,u)}},g=0;g<c;++g)m(g);return[v,l]}}]),e}();function Rp(e,t,n,r,a,i,o,u){return new Dp(n,r,a,i,o,u).compute(e,t)}var Fp={kernelName:a.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,u=r.leftPad,s=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,f=t.data,d=t.dataSplits,h=Rp(n.data.get(f.dataId).values,n.data.get(d.dataId).values,a,o,u,s,c,l),p=Object(i.a)(h,2),v=p[0],m=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",m)]}};function Mp(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var u=t[0],s=e.indexOf(u);-1!==s;){var c=e.subarray(0,s);n&&0===c.length||r.push(c),s=(e=e.subarray(s+1)).indexOf(u)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function Pp(e,t,n){for(var r=e.length,i=[],o=0,u=0,s=new Array(r),c=0;c<r;++c){var l=i.length;Mp(e[c],t,n,i);var f=i.length-l;s[c]=f,o+=f,u=Math.max(u,f)}for(var d=a.util.getArrayFromDType("int32",2*o),h=new Array(o),p=[r,u],v=0,m=0;m<r;++m)for(var g=0;g<s[m];++g)d[2*v]=m,d[2*v+1]=g,h[v]=i[v],++v;return[d,h,p]}var Lp={kernelName:a.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var u=Pp(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),s=Object(i.a)(u,3),c=s[0],l=s[1],f=s[2],d=l.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};function zp(e,t){for(var n=a.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=a.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Bp={kernelName:a.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=zp(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},Up=ec(a.Tan,(function(e){return Math.tan(e)})),Wp={kernelName:a.Tan,backendName:"cpu",kernelFunc:Up},Vp=ec(a.Tanh,(function(e){return Math.tanh(e)})),qp={kernelName:a.Tanh,backendName:"cpu",kernelFunc:Vp};function $p(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var i=Object(a.buffer)(n,e.dtype),o=0;o<i.values.length;++o){for(var u=i.indexToLoc(o),s=new Array(e.rank),c=0;c<s.length;c++)s[c]=u[c]%e.shape[c];var l=e.locToIndex(s);i.values[o]=e.values[l]}return i}var Hp={kernelName:a.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;Js(a,"tile");var o=$p(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},Gp=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Kp(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,u=Math.log(i),s=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*s*(i-s)/i)*Math.sign(o-i/2),l=Math.max(n,Math.floor(t-o*s/i+c)),f=Math.min(r,Math.floor(t+(i-o)*s/i+c));Kp(e,t,l,f)}var d=e[t],h=n,p=r;for(a.util.swap(e,n,t),Gp(e[r],d)>0&&a.util.swap(e,n,r);h<p;){for(a.util.swap(e,h,p),h++,p--;Gp(e[h],d)<0;)h+=1;for(;Gp(e[p],d)>0;)p-=1}0===Gp(e[n],d)?a.util.swap(e,n,p):(p+=1,a.util.swap(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function Xp(e,t,n,r,i){for(var o=t[t.length-1],u=e.length/o,s=o,c=a.util.getTypedArrayFromDType(n,u*r),l=a.util.getTypedArrayFromDType("int32",u*r),f=function(t){var n=t*s,a=e.subarray(n,n+s),o=new Array(a.length);a.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(Kp(o,r),o=o.slice(0,r)),i&&o.sort(Gp);for(var u=t*r,f=c.subarray(u,u+r),d=l.subarray(u,u+r),h=0;h<r;h++)f[h]=o[h].value,d[h]=o[h].index},d=0;d<u;d++)f(d);var h=t.slice();return h[h.length-1]=r,[Object(a.buffer)(h,n,c),Object(a.buffer)(h,"int32",l)]}var Yp={kernelName:a.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,u=r.sorted;Js(a,"topk");var s=Xp(n.data.get(a.dataId).values,a.shape,a.dtype,o,u),c=Object(i.a)(s,2),l=c[0],f=c[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(f.shape,f.dtype,f.values)]}};var Jp={kernelName:a.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,u=t.transforms,s=n.interpolation,c=n.fillMode,l=n.fillValue,f=n.outputShape,d=Object(i.a)(o.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=null!=f?f:[p,v],b=Object(i.a)(g,2),y=b[0],w=b[1],x=[h,y,w,m],O=a.util.computeStrides(o.shape),k=O[0],j=O[1],_=O[2],S=a.util.getTypedArrayFromDType(o.dtype,a.util.sizeFromShape(x));S.fill(l);for(var E=r.data.get(o.dataId).values,C=r.data.get(u.dataId).values,A=0;A<h;++A){for(var T=1===u.shape[0]?C:C.subarray(8*A,8*A+8),N=0;N<y;++N)for(var I=0;I<w;++I)for(var D=0;D<m;++D){var R=void 0,F=T[6]*I+T[7]*N+1;if(0!==F){var M=(T[0]*I+T[1]*N+T[2])/F,P=(T[3]*I+T[4]*N+T[5])/F,L=Qp(M,v,c),z=Qp(P,p,c);switch(s){case"nearest":R=ev(E,p,v,k,j,_,A,z,L,D,l);break;case"bilinear":R=tv(E,p,v,k,j,_,A,z,L,D,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}S[A*k+N*j+I*_+D]=R}}return r.makeTensorInfo(x,o.dtype,S)}return{dataId:r.write(S,x,o.dtype),shape:o.shape,dtype:o.dtype}}};function Qp(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var i=2*t;(n-=i*Math.trunc(n/i))>=t&&(n=i-n-1)}return a.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var i=t-1;n-=t*Math.trunc(n/i)}return a.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return a.util.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function Zp(e,t,n,r,a,i,o,u,s,c,l){return 0<=u&&u<t&&0<=s&&s<n?e[o*r+u*a+s*i+c]:l}function ev(e,t,n,r,a,i,o,u,s,c,l){return Zp(e,t,n,r,a,i,o,Math.round(u),Math.round(s),c,l)}function tv(e,t,n,r,a,i,o,u,s,c,l){var f=Math.floor(u),d=Math.floor(s),h=f+1,p=d+1;return(h-u)*((p-s)*Zp(e,t,n,r,a,i,o,f,d,c,l)+(s-d)*Zp(e,t,n,r,a,i,o,f,p,c,l))+(u-f)*((p-s)*Zp(e,t,n,r,a,i,o,h,d,c,l)+(s-d)*Zp(e,t,n,r,a,i,o,h,p,c,l))}function nv(e,t,n,r){for(var i=a.util.parseAxisParam(t,n)[0],o=[1,n[0],1],u=0;u<i;u++)o[0]*=n[u];o[1]=n[i];for(var s=i+1;s<n.length;s++)o[2]*=n[s];for(var c={},l=new Int32Array(n[i]),f=new a.TensorBuffer(o,r,e),d=[],h=1===o[0]&&1===o[2],p=0;p<n[i];p++){var v=void 0;if(h)v=e[p].toString();else{for(var m=[],g=0;g<o[0];g++)for(var b=0;b<o[2];b++)m.push(f.get(g,p,b));v=m.join(",")}if(void 0!==c[v])l[p]=c[v];else{var y=Object.keys(c).length;c[v]=y,l[p]=y,d.push(p)}}var w=o.slice();w[1]=Object.keys(c).length;var x=new a.TensorBuffer(w,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(f.get(n,e,r),n,t,r)}));var O=n.slice();return O[i]=w[1],{outputValues:x.values,outputShape:O,indices:l}}var rv={kernelName:a.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Js(i,"unique");var o=nv(r.data.get(i.dataId).values,a,i.shape,i.dtype),u=o.outputValues,s=o.outputShape,c=o.indices;return[r.makeTensorInfo(s,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var av={kernelName:a.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,u=a.shape[i],s=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(s[c++]=a.shape[l]);var f=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var h=new Array(u),p=0;p<h.length;p++){f[i]=p;var v=yl({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});h[p]=Rc({inputs:{x:v},backend:n,attrs:{shape:s}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var iv={kernelName:a.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.segmentIds,u=r.numSegments;Js(i,"unsortedSegmentSum");for(var s=[],c=[],l=i.shape.length-o.shape.length,f=o,d=0;d<l;++d){var h=Af({inputs:{input:f},backend:n,attrs:{dim:d+1}});f=h,c.push(h)}for(var p=0;p<u;++p){var v=a.util.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",v),g=mf({inputs:{a:m,b:f},backend:n}),b=Sc({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=cf({inputs:{a:b,b:i},backend:n}),w=ff({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(w),c.push(m),c.push(g),c.push(b),c.push(y),c.push(w)}var x=Eh({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},ov=0,uv=[Lc,Bc,Wc,qc,Dc,$c,Xc,Yc,Jc,Qc,el,nl,al,ul,cl,hl,pl,vl,ml,Pc,gl,xl,jl,_l,Ec,Cl,Tl,Oc,Nl,Ml,zl,Bl,Ll,Wl,Vl,Ul,$l,Gl,Kl,Xl,Yl,Jl,Zl,ef,tf,nf,rf,of,af,Mf,hf,rc,pf,gf,_f,Cf,Tf,Df,qf,Hf,Gf,Yf,Zf,ed,td,rd,id,sd,fd,ic,dd,Rl,pd,md,bd,uc,xd,jd,Sd,Ad,Nd,Rd,Md,zd,Bd,Ud,Gd,Kd,Xd,Yd,Jd,Qd,qd,Zd,eh,rh,ah,uh,fh,lf,hh,vh,gh,yh,Oh,kh,Sh,Ch,Ah,Ih,fc,Rh,Mh,_c,Lh,hc,vc,Fc,zh,Bh,Uh,Wh,Vh,qh,Hh,Xh,Jh,Qh,np,yc,ap,op,sp,wl,lh,fp,dp,pp,mp,bp,yp,wp,xp,jp,_p,Cp,Tp,Ip,Fp,Lp,Bp,Bf,df,Wp,qp,Hp,Yp,Kc,Jp,rv,av,iv,_h];ov<uv.length;ov++){var sv=uv[ov];Object(a.registerKernel)(sv)}var cv,lv,fv,dv={},hv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function pv(e){if(!(e in dv)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete dv[e]}),!1),1===e)return t.getContext("webgl",hv)||t.getContext("experimental-webgl",hv);return t.getContext("webgl2",hv)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;dv[e]=t}var n=dv[e];return n.isContextLost()?(delete dv[e],pv(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),dv[e])}function vv(e,t){return[t,e]}function mv(e){var t=a.util.sizeFromShape(e),n=Math.ceil(t/4);return a.util.sizeToSquarishShape(n)}function gv(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function bv(e,t){var n,r,i,o,u,s,c,l,f,d=e;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,u=d.RED,s=4,c=1,l=d.HALF_FLOAT,f=d.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=d.RGBA,u=e.RGBA,s=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function yv(e,t){var n=t();return Object(a.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(cv||(cv={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(lv||(lv={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fv||(fv={}));function wv(e){return!!(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function xv(e,t){return Rv(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function Ov(e,t){var n=Rv(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(yv(e,(function(){return e.shaderSource(n,t)})),yv(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=_v.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,u=i.map((function(e,t){return a.util.rightPad((t+1).toString(),o)+e})),s=0,c=0;c<u.length;c++)s=Math.max(u[c].length,s);var l=u.slice(0,r-1),f=u.slice(r-1,r),d=u.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(a.util.rightPad(f[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var kv,jv,_v=/ERROR: [0-9]+:([0-9]+):/g;function Sv(e,t){if(yv(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Ev(e,t,n,r,a,i,o){var u=e.getAttribLocation(t,n);return-1!==u&&(yv(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),yv(e,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,o)})),yv(e,(function(){return e.enableVertexAttribArray(u)})),!0)}function Cv(e,t,n){return Rv(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Av(e,t,n){return e.getUniformLocation(t,n)}function Tv(e,t,n,r){yv(e,(function(){return function(e,t,n){Fv(e,n),yv(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),yv(e,(function(){return e.uniform1i(n,r)}))}function Nv(e,t,n){yv(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),yv(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Iv(e,t){yv(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),yv(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Dv(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Rv(e,t,n){var r=yv(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Fv(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Mv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.util.sizeFromShape(e.slice(0,e.length-t))}function Pv(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Lv(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Mv(e)].concat(Object(Tn.a)(Pv(e)))),t}function zv(e){return e%2===0}function Bv(e,t){if(e=e.slice(-2),t=t.slice(-2),a.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(zv(n)&&zv(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&zv(e[0])&&zv(t[0])}function Uv(e,t){return null!=e.getExtension(t)}function Wv(e){try{if(null!=pv(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Vv(e){if(0===e)return!1;var t=pv(e);if(1!==e){if(Uv(t,"EXT_color_buffer_float"))return qv(t);var n="EXT_color_buffer_half_float";if(Uv(t,n)){var r=t.getExtension(n);return function(e,t){var n=bv(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),u}(t,r)}return!1}return!!Uv(t,"OES_texture_float")&&(!!Uv(t,"WEBGL_color_buffer_float")&&qv(t))}function qv(e){var t=bv(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function $v(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&a.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Hv=Object(a.env)();function Gv(){var e,t,n,r,i,o,u,s,c,l;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",u="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",u="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:u,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Kv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=a.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function Xv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=a.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Yv(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function Jv(e){var t=a.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Hv.registerFlag("HAS_WEBGL",(function(){return Hv.getNumber("WEBGL_VERSION")>0})),Hv.registerFlag("WEBGL_VERSION",(function(){return Wv(2)?2:Wv(1)?1:0})),Hv.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Hv.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Hv.get("WEBGL_VERSION")})),Hv.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Hv.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Hv.registerFlag("WEBGL_PACK",(function(){return Hv.getBool("HAS_WEBGL")})),Hv.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_CLIP",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_PACK_REDUCE",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_CONV_IM2COL",(function(){return Hv.getBool("WEBGL_PACK")})),Hv.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==kv){var t=pv(e);kv=t.getParameter(t.MAX_TEXTURE_SIZE)}return kv}(Hv.getNumber("WEBGL_VERSION"))})),Hv.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==jv){var t=pv(e);jv=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,jv)}(Hv.getNumber("WEBGL_VERSION"))})),Hv.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Hv.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=pv(e);return Uv(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Uv(t,"EXT_disjoint_timer_query")?1:0}(e)})),Hv.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Hv.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a.device_util.isMobile()})),Hv.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=pv(e);if(1===e){if(!Uv(t,"OES_texture_float"))return!1}else if(!Uv(t,"EXT_color_buffer_float"))return!1;return qv(t)}(Hv.getNumber("WEBGL_VERSION"))})),Hv.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Hv.getBool("WEBGL_FORCE_F16_TEXTURES")&&Hv.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Hv.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Vv(Hv.getNumber("WEBGL_VERSION"))})),Hv.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Hv.getNumber("WEBGL_VERSION"))&&null!=pv(e).fenceSync;var e})),Hv.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Hv.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Hv.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Hv.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return a.device_util.isMobile()&&Hv.getBool("IS_CHROME")?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Hv.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Hv.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Hv.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Hv.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var Qv="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Zv=a.backend_util.getBroadcastDims;function em(e,t,n){var r=[];if(e.forEach((function(e){var t=a.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(ym(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var i,o,u=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?nm(e,r):tm(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?mm(e,t):gm(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),c=t.texShape,l=Gv(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(rm,"\n    ").concat(am,"\n    ").concat(im,"\n  ")}(l);return t.isPacked?(i=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(a.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var i=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,u="",s="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],u="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+u,s="b".concat(c,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(u,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,c,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(i=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(a.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Xv(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Kv(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Xv(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Kv(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Kv(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Kv(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,c,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(d+=om),[d,f,o,u,i,s,n.userCode].join("\n")}function tm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return sm(e,t);case 1:return cm(e,t);case 2:return lm(e,t);case 3:return fm(e,t);case 4:return dm(e,t);case 5:return hm(e);case 6:return pm(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function nm(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Gv();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Gv();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,u=o[0],s=o[1],c=Gv();if(null!=o&&a.util.arraysEqual(n,o))return t?"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(u,".0);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(i,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],f=Math.ceil(n[1]/2);return"\n    vec4 ".concat(i,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(f,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var u=[1,2],s=wm(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(nm(s,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(xm(c,u),");\n        }\n      ")}var l=Gv();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],d=o[1],h=Math.ceil(n[2]/2),p=h*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(d,", ").concat(p,", ").concat(h,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Gv();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,u=e.shapeInfo.texShape,s=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],c=s[0],l=s[1],f=Math.ceil(i[o-1]/2),d=f*Math.ceil(i[o-2]/2),h="int b, int row, int col",p="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),v=2;v<o-1;v++)h="int b".concat(v,", ")+h,d*=i[o-v-1],p="b".concat(v," * ").concat(d," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var rm="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",am="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",im="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",om="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function um(e){return"offset".concat(e)}function sm(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Object(i.a)(e.shapeInfo.texShape,2),o=a[0],u=a[1];if(1===o&&1===u)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=um(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=Object(i.a)(e.shapeInfo.texShape,2),l=c[0],f=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(f,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function cm(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(vm(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=um(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(u,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(u,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(u,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(u,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function lm(e,t){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&a.util.arraysEqual(n,o)){if(t)return"\n      float ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var u=o[0],s=o[1];return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(u,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var c=a.util.squeezeShape(n),l=c.newShape,f=c.keptDims,d=l;if(d.length<n.length){var h=wm(e,d);return"\n      ".concat(tm(h,t),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(xm(["row","col"],f),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(vm(e),"\n      }\n    ");var p=o[0],v=o[1],m=um(r);return 1===v?t?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(v,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(i,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function fm(e,t){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],u=n[2],s=a.util.squeezeShape(n),c=s.newShape,l=s.keptDims,f=c;if(f.length<n.length){var d=wm(e,f);return"\n        ".concat(tm(d,t),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(xm(["row","col","depth"],l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(u,", 1)));\n        ").concat(vm(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],v=h[1],m=e.shapeInfo.flatOffset;if(v===o&&null==m)return t?"\n      float ".concat(i,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(u,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(v,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(v===u&&null==m)return t?"\n      float ".concat(i,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(v,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=um(r);return t?"\n    float ".concat(i,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(u," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(u," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function dm(e,t){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],u=n[2]*o,s=n[1]*u,c=a.util.squeezeShape(n),l=c.newShape,f=c.keptDims;if(l.length<n.length){var d=wm(e,l);return"\n      ".concat(tm(d,t),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(xm(["row","col","depth","depth2"],f),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(u,", ").concat(o,", 1)));\n        ").concat(vm(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1],g="int stride2 = ".concat(r,"Shape[3];"),b="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==h)return t?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(b,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(u,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===o&&null==h)return t?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var w=um(r);return t?"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(b,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(w,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(u," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index + ").concat(w,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function hm(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,u=t[2]*o,s=t[1]*u,c=a.util.squeezeShape(t),l=c.newShape,f=c.keptDims;if(l.length<t.length){var d=wm(e,l);return"\n      ".concat(tm(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(xm(["row","col","depth","depth2","depth3"],f),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(u,", ").concat(o,", ").concat(i,")) +\n          depth3;\n        ").concat(vm(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(u,", ").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===i&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=um(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(u," + depth * ").concat(o," +\n          depth2 * ").concat(i," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function pm(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=a.util.squeezeShape(t),o=i.newShape,u=i.keptDims;if(o.length<t.length){var s=wm(e,o);return"\n      ".concat(tm(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(xm(["row","col","depth","depth2","depth3","depth4"],u),");\n      }\n    ")}var c=t[5],l=t[4]*c,f=t[3]*l,d=t[2]*f,h=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(d,", ").concat(f,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(vm(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,m=v[0],g=v[1];if(g===h&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===c&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var b=um(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(d," + depth * ").concat(f," +\n          depth2 * ").concat(l," + depth3 * ").concat(c," + depth4 + ").concat(b,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function vm(e){var t=e.name,n=a.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function mm(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,c=Zv(e.shapeInfo.logicalShape,t.logicalShape),l=bm(s),f=s-u,d=["x","y","z","w","u","v"];n=0===u?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(d[e+f]," = 0;")})).join("\n");var h="";h=s<2&&u>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+f])})).join(", ");var p="return outputValue;",v=1===a.util.sizeFromShape(e.shapeInfo.logicalShape),m=1===a.util.sizeFromShape(t.logicalShape);if(1!==u||v||m){if(v&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var g=u-2,b=u-1;c.indexOf(g)>-1&&c.indexOf(b)>-1?p="return vec4(outputValue.x);":c.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(i,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function gm(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,u=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&a.util.arraysEqual(u,o))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,f=bm(c),d=Zv(e.shapeInfo.logicalShape,t.logicalShape),h=c-s,p=["x","y","z","w","u","v"];l=0===s?"":c<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var v="";return v=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", "),"\n    float ".concat(i,"() {\n      ").concat(f," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(v,");\n    }\n  ")}function bm(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function ym(e,t,n){var r=a.util.squeezeShape(t),i=r.newShape,o=r.keptDims,u=t.length,s=e&&3===u&&1===t[0],c=s?t.slice(1):i,l=!e&&u>1&&!a.util.arraysEqual(t,n)&&i.length<u||s;return{useSqueezeShape:l,uniformShape:l?c:t,keptDims:o}}function wm(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function xm(e,t){return t.map((function(t){return e[t]})).join(", ")}function Om(e,t,n,r){var i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),u={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=em(i,u,t),c=e.createProgram(s),l=null,f=e.getUniformLocation(c,"NAN",!1);1===Object(a.env)().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var d,h,p,v=!1,m={},g={},b={},y=0;y<t.variableNames.length;y++){var w=t.variableNames[y];m[w]=e.getUniformLocation(c,w,v),m["offset".concat(w)]=e.getUniformLocation(c,"offset".concat(w),v),t.enableShapeUniforms&&(g["".concat(w,"Shape")]=e.getUniformLocation(c,"".concat(w,"Shape"),v),b["".concat(w,"TexShape")]=e.getUniformLocation(c,"".concat(w,"TexShape"),v))}t.enableShapeUniforms&&(d=e.getUniformLocation(c,"outShape",v),p=e.getUniformLocation(c,"outShapeStrides",v),h=e.getUniformLocation(c,"outTexShape",v));var x=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){x[n]=e.getUniformLocation(c,t.name,v)})),{program:t,source:s,webGLProgram:c,uniformLocations:m,customUniformLocations:x,inShapeInfos:o,outShapeInfo:u,infLoc:l,nanLoc:f,inShapesLocations:g,inTexShapesLocations:b,outShapeLocation:d,outShapeStridesLocation:p,outTexShapeLocation:h}}function km(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,i=t[n],o=i.shape;if(!a.util.arraysEqual(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!i.isUniform){var u=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!a.util.arraysEqual(u,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(u," and ").concat(s," must match"))}}))}function jm(e,t,n,r,i){t.program.enableShapeUniforms||(km(t.inShapeInfos,n),km([t.outShapeInfo],[r]));var o=r.texData.texture,u=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,u[0],u[1]):e.setOutputMatrixTexture(o,u[0],u[1]),e.setProgram(t.webGLProgram),1===Object(a.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],u=t.uniformLocations["offset".concat(i)],s=t.inShapesLocations["".concat(i,"Shape")],c=t.inTexShapesLocations["".concat(i,"TexShape")];if(s){var l=ym(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(c&&e.gl.uniform2i(c,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(a.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var f=n.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),e.gl.uniform1fv(o,f)}else null!=n.texData.slice&&null!=u&&e.gl.uniform1i(u,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var c=a.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(c));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(c));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(c))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i&&t.program.customUniforms.forEach((function(n,r){var a=t.customUniformLocations[r],o=i[r];if("float"===n.type)e.gl.uniform1fv(a,o);else if("vec2"===n.type)e.gl.uniform2fv(a,o);else if("vec3"===n.type)e.gl.uniform3fv(a,o);else if("vec4"===n.type)e.gl.uniform4fv(a,o);else if("int"===n.type)e.gl.uniform1iv(a,o);else if("ivec2"===n.type)e.gl.uniform2iv(a,o);else if("ivec3"===n.type)e.gl.uniform3iv(a,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(a,o)}})),e.executeProgram()}function _m(e,t,n){var r="";t.concat(n).forEach((function(t){var i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,u=ym(e.packedInputs,t.shape,o),s=u.useSqueezeShape,c=u.uniformShape,l=u.keptDims,f="",d="",h="";if(1===c.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];f="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==c.length||e.packedInputs){if(c.length>2&&!e.packedInputs){var v=a.util.computeStrides(c);h="".concat(v[0]===o[1],"_").concat(v[v.length-1]===o[1])}}else d="".concat(c[0]>1,"_").concat(c[1]>1);var m=t.shape.length,g=2===c.length&&a.util.arraysEqual(t.shape,o),b=1===a.util.sizeFromShape(t.shape),y=a.backend_util.getBroadcastDims(t.shape,n.shape),w=!e.packedInputs&&m===n.shape.length&&a.util.arraysEqual(o,n.texData.texShape),x=e.packedInputs||c.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(m,"_").concat(w,"_").concat(s?l:"","_").concat(c.length,"_").concat(b,"_").concat(y,"_").concat(g,"_").concat(f,"_").concat(d,"_").concat(h,"_").concat(x,"_").concat(i)}else{var O=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(O,"_").concat(i)}}));var i=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+i+"".concat(Object(a.env)().getNumber("WEBGL_VERSION"))}function Sm(e){return Object(a.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Em=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=cv.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Gv();this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Xv(["r","c","d"],t):Kv(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Cm=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=cv.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Gv();this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Xv(["r","c","d"],t):Kv(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Am=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.outTexUsage=lv.DOWNLOAD;var n=Gv();this.outputShape=t,this.userCode="\n      ".concat(Qv,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Tm=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lv.DOWNLOAD;var n=Gv();this.outputShape=t,this.userCode="\n      ".concat(Qv,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Nm=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(_n.a)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Gv();this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Jv(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")},Im=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Gv();this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var u=0;u<=1;u++){var s=2*o+u;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(u," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(u,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(s,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(s,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(s,"] = values[2];\n            } else {\n              result[").concat(s,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Jv(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")};function Dm(e){var t=Gv();return function(e,t){var n=Rv(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(yv(e,(function(){return e.shaderSource(n,t)})),yv(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Rm(e){return function(e,t){var n=Rv(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return yv(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),yv(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Fm(e){return function(e,t){var n=Rv(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return yv(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),yv(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Mm(e,t,n,r,i,o){!function(e,t){var n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var i="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var u=function(e){return Rv(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return yv(e,(function(){return e.bindTexture(s,u)})),yv(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),yv(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),yv(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),yv(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),yv(e,(function(){return e.texImage2D(s,0,r,t,n,0,i,o,null)})),yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),u}function Pm(e){return e.internalFormatFloat}function Lm(e){return e.internalFormatHalfFloat}function zm(e){return e.downloadTextureFormat}function Bm(e){return e.internalFormatPackedFloat}function Um(e){return e.internalFormatPackedHalfFloat}function Wm(e,t,n,r,a,o,u,s){var c=e,l=new Float32Array(function(e,t){var n=gv(e,t),r=Object(i.a)(n,2);return r[0]*r[1]*4}(o,u));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}var Vm=function(){function e(t){Object(_n.a)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Object(a.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){dv[e]=t}(n,t)):this.gl=pv(n);var r="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(1===Object(a.env)().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=xv(this.gl,"OES_texture_float"),Uv(this.gl,o))this.textureHalfFloatExtension=xv(this.gl,o);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Uv(this.gl,i))this.colorBufferHalfFloatExtension=xv(this.gl,i);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Uv(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Uv(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=Rm(this.gl),this.indexBuffer=Fm(this.gl),this.framebuffer=function(e){return Rv(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=bv(this.gl,this.textureHalfFloatExtension)}return Object(Sn.a)(e,[{key:"debug",get:function(){return Object(a.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;yv(t,(function(){return t.finish()})),yv(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),yv(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),yv(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),yv(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),yv(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=vv(t,n),o=Object(i.a)(a,2);return Mm(e,o[0],o[1],Pm(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=vv(t,n),o=Object(i.a)(a,2);return Mm(e,o[0],o[1],Lm(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=vv(t,n),o=Object(i.a)(a,2);return Mm(e,o[0],o[1],zm(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?yv(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):yv(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,u,s;yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),u=e.UNSIGNED_BYTE,s=e.RGBA):(o=new Float32Array(n*r*4),u=e.FLOAT,s=i.internalFormatPackedFloat),o.set(a),yv(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,s,n,r,0,e.RGBA,u,o)})),yv(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=gv(t,n),o=Object(i.a)(a,2);return Mm(e,o[0],o[1],Um(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=gv(t,n),o=Object(i.a)(a,2);return Mm(e,o[0],o[1],Bm(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Iv(this.gl,this.framebuffer),this.outputTexture=null),yv(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=vv(t,n),o=Object(i.a)(a,2),u=o[0],s=o[1],c=new Uint8Array(t*n*4);return yv(e,(function(){return e.readPixels(0,0,u,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return Wm(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();yv(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return yv(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),yv(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),yv(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Object(a.env)().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(o,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return yv(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl,r=Ov(n,e);null==this.vertexShader&&(this.vertexShader=Dm(n));var a=function(e){return Rv(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return yv(n,(function(){return n.attachShader(a,t.vertexShader)})),yv(n,(function(){return n.attachShader(a,r)})),function(e,t){if(yv(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),this.debug&&Sv(n,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return yv(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Ev(e,t,"clipSpacePos",n,3,20,0)&&Ev(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&yv(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Sv(this.gl,this.program),yv(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Cv(this.gl,e,t):Av(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),yv(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Tv(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=gv(t,n),a=Object(i.a)(r,2),o=a[0],u=a[1];this.setOutputMatrixTextureDriver(e,o,u)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Sv(this.gl,this.program),Dv(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),yv(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),yv(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=xv(this.gl,2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i}},{key:"endQuery",value:function(){if(2!==Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n=this;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||a.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Nv(this.gl,e,this.framebuffer),this.debug&&Dv(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Nv(this.gl,this.outputTexture,this.framebuffer),this.debug&&Dv(this.gl)):Iv(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Nv(r,e,this.framebuffer),this.debug&&Dv(r),this.outputTexture=e,yv(r,(function(){return r.viewport(0,0,t,n)})),yv(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),yv(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var qm=Tc,$m=Ol,Hm=kl,Gm=Sl,Km=Il,Xm=vf,Ym=Sf,Jm=Nf,Qm=Kf,Zm=nd,eg=ad,tg=od,ng=cd,rg=yd,ag=Od,ig=_d,og=Ed,ug=Wd,sg=$d,cg=th,lg=uf,fg=dh,dg=wh,hg=Dh,pg=Fh,vg=Gh,mg=gc,gg=zc,bg=bl,yg=hp,wg=vp,xg=gp,Og=Op,kg=Np,jg=Rp,_g=Pp,Sg=zp,Eg=Pf,Cg=$p,Ag=Xp,Tg=Hc,Ng=nv;function Ig(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Dg(e,t){return 1===t?[e]:Ig(e,t)}var Rg=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Dg("rc",n),a=bm(n),i=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),u=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<e;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n}(n,t);if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0");return"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(u,"));\n          }\n        }\n      ")}};var Fg=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Yv(e.map((function(e,t){return t})),t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Kv(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Jv(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")};var Mg=function(){function e(t){Object(_n.a)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Object(Sn.a)(e,[{key:"acquireTexture",value:function(e,t,n){var r=Lg(t,n),a=zg(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=Pg(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var u=this.freeTextures[a].shift();return this.usedTextures[a].push(u),u}return r===fv.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===fv.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===fv.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===fv.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===fv.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var i=Lg(n,r),o=zg(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);var u=Pg(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(a.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=u):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=u),this.numUsedTextures--;var c=this.usedTextures[o],l=c.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Pg(e,t,n,r,a){var o,u=function(e,t){switch(e){case fv.PACKED_2X2_FLOAT32:return Bm(t);case fv.PACKED_2X2_FLOAT16:return Um(t);case fv.UNPACKED_FLOAT32:return Pm(t);case fv.UNPACKED_FLOAT16:return Lm(t);case fv.PACKED_4X1_UNSIGNED_BYTE:return zm(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=gv(e[0],e[1]),c=Object(i.a)(s,2);o=c[0]*c[1]}else{var l=vv(e[0],e[1]),f=Object(i.a)(l,2);o=f[0]*f[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,u)}function Lg(e,t){if(e===lv.UPLOAD)return fv.PACKED_2X2_FLOAT32;if(e===lv.RENDER||null==e)return function(e){return Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?fv.PACKED_2X2_FLOAT32:fv.UNPACKED_FLOAT32:e?fv.PACKED_2X2_FLOAT16:fv.UNPACKED_FLOAT16}(t);if(e===lv.DOWNLOAD||e===lv.PIXELS)return fv.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function zg(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var Bg=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},Ug="if (isnan(x)) return x;",Wg="return x;",Vg="return abs(x);";var qg="return (x >= 0.0) ? x : (exp(x) - 1.0);",$g=Ug+"\n  return (x < 0.0) ? 0.0 : x;\n",Hg=Ug+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Gg="return x;",Kg="return 1.0 / (1.0 + exp(-1.0 * x));",Xg="return x;",Yg="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Jg="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Qg="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Zg="return 1.0 / (1.0 + exp(-1.0 * x));",eb=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},tb=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=Dg("rc",n),a=bm(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),u=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(u,"));\n      }\n    ")},nb=a.kernel_impls.whereImpl,rb={};var ab=Object(a.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var ib=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,i;if(Object(_n.a)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Object(a.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=pv(Object(a.env)().getNumber("WEBGL_VERSION"));r.binaryCache=((i=Object(a.env)().getNumber("WEBGL_VERSION"))in rb||(rb[i]={}),rb[i]),r.gpgpu=new Vm(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new Mg(r.gpgpu),r.numMBBeforeWarning=null==Object(a.env)().global.screen?1024:Object(a.env)().global.screen.height*Object(a.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new a.DataStorage(Object(In.a)(r),Object(a.engine)()),r}return Object(Sn.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Object(a.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(a.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:lv.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,i){if(Object(a.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:lv.UPLOAD,refCount:i})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensorInfos,o=t.slice,u=t.shape,s=t.isPacked;if(null!=o){var c;c=s?new eb(u,Gg):new Bg(u,Gg);var l=this.runWebGLProgram(c,[{dataId:e,shape:u,dtype:r}],r),f=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),f}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,p=null!=this.activeTimers;if(p&&(d=a.util.now()),"complex64"===r){var v=this.readSync(i.real.dataId),m=this.readSync(i.imag.dataId);h=a.backend_util.mergeRealAndImagArrays(v,m)}else h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=a.util.now()-d),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n,r,i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),i=r.values,o=r.shape,u=r.slice,s=r.dtype,c=r.complexTensorInfos,l=r.isPacked,null==u){e.next=11;break}return f=l?new eb(o,Gg):new Bg(o,Gg),d=this.runWebGLProgram(f,[{dataId:t,shape:o,dtype:s}],s),h=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",h);case 11:if(null==i){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Object(a.env)().getNumber("WEBGL_VERSION")){e.next=15;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 15:if(p=null,"complex64"!==s&&Object(a.env)().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),g=this.texData.get(v.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[g.texture].concat(Object(Tn.a)(mv(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=21;break}return e.next=21,this.gpgpu.createAndWaitForFence();case 21:if("complex64"!==s){e.next=30;break}return e.next=24,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 24:y=e.sent,w=y[0],x=y[1],b=a.backend_util.mergeRealAndImagArrays(w,x),e.next=31;break;case 30:null==p?b=this.getValuesFromTexture(t):(O=a.util.sizeFromShape(o),b=this.gpgpu.downloadFloat32MatrixFromBuffer(p,O));case 31:return null!=v&&this.disposeIntermediateTensorInfo(v),null!=p&&yv(k=this.gpgpu.gl,(function(){return k.deleteBuffer(p)})),j=this.convertAndCacheOnCPU(t,b),_=this.pendingRead.get(t),this.pendingRead.delete(t),_.forEach((function(e){return e(j)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Object(a.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",j);case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return a.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!wv(n)){if(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,i=t.isPacked,o=a.util.sizeFromShape(n);if(Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u,s=this.decode(e),c=this.texData.get(s.dataId),l=(u=this.gpgpu).downloadMatrixFromPackedTexture.apply(u,[c.texture].concat(Object(Tn.a)(mv(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),l}var f=Object(a.env)().getBool("WEBGL_PACK")&&!0===i,d=f?Lv(n):n,h=f?new Tm(d):new Am(d),p=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),v=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n,r,i,o,u,s,c;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],i=!1,null==this.programTimersStack?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=a.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),u=a.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,i&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=19;break}return e.next=14,Promise.all(o);case 14:c=e.sent,s.kernelMs=a.util.sum(c),s.getExtraProfileInfo=function(){return c.map((function(e,t){return{name:u[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=20;break;case 19:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 20:return this.uploadWaitMs=0,this.downloadWaitMs=0,e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:a.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=a.util.now(),e)}},{key:"getQueryTime",value:function(){var e=Object(Ga.a)(Ha.a.mark((function e(t){var n;return Ha.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ab;return Object(a.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&a.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){a.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return nb(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new eb(e.shape,t),i=this.compileAndRun(r,[e],n);return Object(a.engine)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=gg(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Vg,e.dtype);var n=new Bg(e.shape,Vg),r=this.compileAndRun(n,[e]);return Object(a.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){var i=n.map((function(e){return a.util.encodeString(e)}));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Object(a.engine)().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new tb(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new Rg(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Mv(e.shape)].concat(Object(Tn.a)(Pv(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Mv(t)].concat(Object(Tn.a)(Pv(t))),i=new Fg(a,n),o=[n],u=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=Lv(a),u=mv(o);t=r?new Cm(o):new Em(o);var s=[u];return{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,s,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(u.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===cv.DENSE){var c=mv(e.outputShape);s.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===a.util.sizeFromShape(u.shape))return s.values=a.util.getTypedArrayFromDType(u.dtype,0),u;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&a.util.sizeFromShape(t.shape)<=Object(a.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!==!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!Bv(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),l.push(t),n=i.texData.get(t.dataId),r.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(u.dataId);var d,h={shape:u.shape,texData:s,isUniform:!1},p=_m(e,f,h),v=this.getAndSaveBinary(p,(function(){return Om(i.gpgpu,e,f,h)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),jm(this.gpgpu,v,f,h,r),l.forEach((function(e){return i.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=Object(a.env)().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var b=a.util.now();b-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Object(a.env)().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),y}return u}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Object(a.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(a.tidy)((function(){if(!Object(a.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Object(a.env)().getBool("DEBUG");Object(a.env)().set("DEBUG",!1);var n=e.abs(Object(a.scalar)(1e-8)).dataSync()[0];if(Object(a.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,o=t.values,u=t.texture,s=t.usage,c=t.isPacked;if(null==u){var l,f=null!=this.activeTimers;f&&(l=a.util.now());var d=t.texShape;if(null==d&&(d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?a.util.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=a.util.squeezeShape(e);e=r.newShape}var o=a.util.sizeFromShape(e);if(e.length<=1&&o<=n)return[1,o];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var u=Mv(e),s=2,c=2;if(e.length){var l=Pv(e),f=Object(i.a)(l,2);s=f[0],c=f[1]}return o=u*(s/2)*(c/2),a.util.sizeToSquarishShape(o).map((function(e){return 2*e}))}return a.util.sizeToSquarishShape(o)}(n,c),t.texShape=d),null!=o){var h,p=Lv(n),v=d[1],m=d[0],g=o instanceof Uint8Array;if(c){var b=gv(d[0],d[1]),y=Object(i.a)(b,2);v=y[0],m=y[1],h=new Im(p,g)}else h=new Nm(p,g);var w=this.makeTensorInfo([m,v],r);this.texData.get(w.dataId).usage=g?lv.PIXELS:lv.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),v,m,o);var x=[[m,v]],O=this.runWebGLProgram(h,[w],r,x,!0),k=this.texData.get(O.dataId);t.texture=k.texture,t.texShape=k.texShape,t.isPacked=k.isPacked,t.usage=k.usage,this.disposeIntermediateTensorInfo(w),this.texData.delete(O.dataId),t.values=null,f&&(this.uploadWaitMs+=a.util.now()-l)}else{var j=this.acquireTexture(d,s,r,c);t.texture=j}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*a.util.bytesPerElement(t)}}]),n}(a.KernelBackend);ib.nextDataId=0;a.device_util.isBrowser()&&Object(a.registerBackend)("webgl",(function(){return new ib}),2);var ob=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["A","B"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=Sm(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},ub=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(_n.a)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r);var o=this.outputShape.length;this.enableShapeUniforms=Sm(o);var u="";if(i)if(0===o||1===a.util.sizeFromShape(this.outputShape))u="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=bm(o);if(u="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?u+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":u+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=Dg("coords",o);this.enableShapeUniforms?u+="\n            bool nextRowOutOfBounds =\n              (".concat(c[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(c[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):u+="\n            bool nextRowOutOfBounds =\n              (".concat(c[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(u,"\n\n        setOutput(result);\n      }\n    ")};function sb(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var cb={kernelName:a.Identity,backendName:"webgl",kernelFunc:sb};function lb(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),u=sb({inputs:{x:r},backend:n}),s=sb({inputs:{x:a},backend:n});return o.complexTensorInfos={real:u,imag:s},i}var fb={kernelName:a.Complex,backendName:"webgl",kernelFunc:lb},db="return (a < 0.) ? b * a : a;",hb="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var pb={kernelName:a.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.alpha,u=n.makeTensorInfo([],"float32",a.util.createScalarValue(o,"float32")),s=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ub(hb,i.shape,u.shape):new ob(db,i.shape,u.shape),c=n.runWebGLProgram(s,[i,u],i.dtype);return n.disposeIntermediateTensorInfo(u),c}},vb="return (a < 0.) ? b * a : a;",mb="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var gb={kernelName:a.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=t.alpha,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ub(mb,r.shape,i.shape):new ob(vb,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}};function bb(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,i=e.dtype;return function(e){var o,u=e.inputs,s=e.backend,c=u.x,l=s,f=i||c.dtype;if(l.shouldExecuteOnCPU([c])&&null!=r){var d=l.texData.get(c.dataId),h=r(d.values,f);return l.makeTensorInfo(c.shape,f,h)}return o=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new eb(c.shape,n):new Bg(c.shape,t),l.runWebGLProgram(o,[c],f)}}function yb(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,o=void 0!==r&&r,u=e.supportsComplex,s=void 0!==u&&u,c=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,u=e.backend,f=r.a,d=r.b,h=u;if(s&&"complex64"===f.dtype){var p=h.texData.get(f.dataId),v=h.texData.get(d.dataId),m=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map((function(e){var n=Object(i.a)(e,2),r=n[0],o=n[1],u={dataId:r.dataId,dtype:r.dtype,shape:f.shape},s={dataId:o.dataId,dtype:o.dtype,shape:d.shape},c=new ob(t,f.shape,d.shape);return h.runWebGLProgram(c,[u,s],Object(a.upcastType)(r.dtype,o.dtype))})),g=Object(i.a)(m,2),b=g[0],y=g[1],w=lb({inputs:{real:b,imag:y},backend:h});return h.disposeIntermediateTensorInfo(b),h.disposeIntermediateTensorInfo(y),w}var x,O=l||Object(a.upcastType)(f.dtype,d.dtype);if(("string"===f.dtype||"string"===d.dtype||h.shouldExecuteOnCPU([f,d]))&&null!=c){var k=h.texData.get(f.dataId).values,j=h.texData.get(d.dataId).values,_="string"===f.dtype?a.backend_util.fromUint8ToStringArray(k):k,S="string"===f.dtype?a.backend_util.fromUint8ToStringArray(j):j,E=c(f.shape,d.shape,_,S,O),C=Object(i.a)(E,2),A=C[0],T=C[1],N=h.makeTensorInfo(T,O);return h.texData.get(N.dataId).values=A,N}return x=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new ub(n,f.shape,d.shape,o):new ob(t,f.shape,d.shape),h.runWebGLProgram(x,[f,d],O)}}function wb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?Xg:Wg;if("relu"===e)return t?Jg:$g;if("elu"===e)return t?Yg:qg;if("relu6"===e)return t?Qg:Hg;if("prelu"===e)return t?mb:vb;if("leakyrelu"===e)return t?hb:db;if("sigmoid"===e)return t?Zg:Kg;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var xb=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(_n.a)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Sm(this.outputShape.length);var l=a?t[1]:t[2],f=Math.ceil(l/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";u&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(u,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(u,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(u,"\n        }"),g="result = activation(result);");var b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var y="rc.x",w="rc.x";t[0]<n[0]?y="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(w="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(y,";\n          int batchB = ").concat(w,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")},Ob="return areal * breal - aimag * bimag;",kb="return areal * bimag + aimag * breal;",jb=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},_b="return a * b;";function Sb(e){var t,n=e.inputs,r=e.backend,o=n.a,u=n.b,s=a.backend_util.upcastType(o.dtype,u.dtype);if("complex64"===o.dtype){var c=r.texData.get(o.dataId),l=r.texData.get(u.dataId),f=new jb(Ob,o.shape,u.shape),d=new jb(kb,o.shape,u.shape),h=[{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:o.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:u.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:u.shape}],p=r.runWebGLProgram(f,h,"float32"),v=r.runWebGLProgram(d,h,"float32"),m=lb({inputs:{real:p,imag:v},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(v),m}if(r.shouldExecuteOnCPU([o,u])){var g=r.texData.get(o.dataId),b=r.texData.get(u.dataId),y=lg(o.shape,u.shape,g.values,b.values,s),w=Object(i.a)(y,2),x=w[0],O=w[1],k=r.makeTensorInfo(O,s);return r.texData.get(k.dataId).values=x,k}return t=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ub(_b,o.shape,u.shape):new ob(_b,o.shape,u.shape),r.runWebGLProgram(t,[o,u],s)}var Eb={kernelName:a.Multiply,backendName:"webgl",kernelFunc:Sb};function Cb(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.shape,u=n,s=a.util.sizeFromShape(i.shape),c=a.util.inferFromImplicitShape(o,s),l=a.util.sizeFromShape(c);a.util.assert(s===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var f=u.texData.get(i.dataId);return!f.isPacked||Bv(i.shape,c)||null!==f.texture&&Bv(f.shape,c)?(u.incRef(i.dataId),{dataId:i.dataId,shape:c,dtype:i.dtype}):function(e,t,n){var r=[Mv(e.shape)].concat(Object(Tn.a)(Pv(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Mv(t)].concat(Object(Tn.a)(Pv(t))),o=new Fg(i,r),u=[r],s=n.runWebGLProgram(o,[a],e.dtype,u,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(i,c,u)}var Ab={kernelName:a.Reshape,backendName:"webgl",kernelFunc:Cb},Tb=function e(t,n){Object(_n.a)(this,e),this.variableNames=["x"];var r=t.windowSize,i=t.batchSize,o=t.inSize,u=t.outSize;this.outputShape=[i,u];var s=4*Math.floor(r/4),c=r%4,l="sumValue += dot(values, ones);";if(null!=n){var f=1/n;l="sumValue += dot(values * ".concat(a.util.isInt(f)?f.toPrecision(2):f,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Nb=function e(t,n){Object(_n.a)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var u="0.0",s="";"prod"===n?u="1.0":"min"===n?(u="1.0 / 1e-20",s="min"):"max"===n&&(u="-1.0 / 1e-20",s="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(u="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(u="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(u,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(u,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};function Ib(e,t,n,r){for(var i=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=a.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,u=0;u<i.length;u++){var s,c=i[u],l=c.inSize,f=c.windowSize,d=c.outSize,h=void 0;h="mean"===n?0===u?new Tb({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d},l):new Tb({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d}):new Nb({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d},n),s=o,o=r.runWebGLProgram(h,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var Db=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=bm(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")};var Rb=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=bm(this.rank),o=Ig("rc",this.rank),u=new Array(this.rank),s=0;s<n.length;s++)u[n[s]]=o[s];var c="vec2(".concat(u.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(u.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function Fb(e,t,n){var r=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Rb(e.shape,t):new Db(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Mb(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var o=t,u=e.shape.length,s=a.util.parseAxisParam(o,e.shape),c=s,l=a.backend_util.getAxesPermutation(c,u),f=null!=l,d=e;f&&(d=Fb(e,l,r),c=a.backend_util.getInnerMostAxes(c.length,u)),a.backend_util.assertAxesAreInnerMostDims("sum",c,u);var h=a.backend_util.computeOutAndReduceShapes(d.shape,c),p=Object(i.a)(h,2),v=p[0],m=p[1],g=v;n&&(g=a.backend_util.expandShapeToKeepDim(v,s));var b=a.util.sizeFromShape(m),y=Cb({inputs:{x:d},attrs:{shape:[a.util.sizeFromShape(e.shape)/b,b]},backend:r}),w=Ib(y,Object(a.sumOutType)(e.dtype),"sum",r),x=Cb({inputs:{x:w},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(w),f&&r.disposeIntermediateTensorInfo(d),x}(t.x,r.axis,r.keepDims,n)}var Pb={kernelName:a.Sum,backendName:"webgl",kernelFunc:Mb};function Lb(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,u=r,s=i.shape.length,c=new Array(s),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(u.shouldExecuteOnCPU([i])){var f=u.texData.get(i.dataId).values,d=Tg(f,i.shape,i.dtype,o,c);t=u.makeTensorInfo(c,i.dtype),u.texData.get(t.dataId).values=d}else t=Fb(i,o,u);return t}var zb={kernelName:a.Transpose,backendName:"webgl",kernelFunc:Lb};function Bb(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.backend,u=e.bias,s=void 0===u?null:u,c=e.preluActivationWeights,l=void 0===c?null:c,f=e.leakyreluAlpha,d=void 0===f?0:f,h=e.activation,p=void 0===h?null:h,v=t.shape.length,m=n.shape.length,g=r?t.shape[v-2]:t.shape[v-1],b=i?n.shape[m-1]:n.shape[m-2],y=r?t.shape[v-1]:t.shape[v-2],w=i?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),O=n.shape.slice(0,-2),k=a.util.sizeFromShape(x),j=a.util.sizeFromShape(O),_=k===j||1===k||1===j;a.util.assert(v>=2&&m>=2&&_,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(x,") and (").concat(O,").")}));var S=(k>j?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,w]);a.util.assert(g===b,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(b,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match.")}));var E,C=r?[k,g,y]:[k,y,g],A=i?[j,w,b]:[j,b,w],T=Cb({inputs:{x:t},backend:o,attrs:{shape:C}}),N=Cb({inputs:{x:n},backend:o,attrs:{shape:A}}),I=[T,N],D=Math.max(k,j),R=r?T.shape[1]:T.shape[2],F=null!=s,M=null!=l,P="leakyrelu"===p,L=null!=p?wb(p,!0):null;if((1===y||1===w)&&R>1e3&&!1===(F||M||P||null!=L)){var z=T,B=N;r&&(z=Lb({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),I.push(z)),i&&(B=Lb({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),I.push(B));var U=1===w,W=z;1!==w&&(W=Cb({inputs:{x:z},backend:o,attrs:{shape:[D,R,1]}}),I.push(W));var V=1===w?2:1,q=B;U&&(q=Cb({inputs:{x:B},backend:o,attrs:{shape:[D,1,R]}}),I.push(q));var $=Sb({inputs:{a:W,b:q},backend:o});E=Mb({inputs:{x:$},backend:o,attrs:{axis:V,keepDims:!0}}),I.push($)}else{var H=Object(a.upcastType)(t.dtype,n.dtype),G=new xb(C,A,[D,y,w],r,i,F,L,M,P),K=[T,N];if(null!=s&&K.push(s),M&&K.push(l),P){var X=o.makeTensorInfo([],"float32",a.util.createScalarValue(d,"float32"));K.push(X),I.push(X)}E=o.runWebGLProgram(G,K,H)}var Y=Cb({inputs:{x:E},backend:o,attrs:{shape:S}});I.push(E);for(var J=0,Q=I;J<Q.length;J++){var Z=Q[J];o.disposeIntermediateTensorInfo(Z)}return Y}var Ub={kernelName:a._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,u=t.preluActivationWeights,s=r.transposeA,c=r.transposeB,l=r.activation;return Bb({a:a,b:i,transposeA:s,transposeB:c,backend:n,bias:o,preluActivationWeights:u,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Wb="return abs(x);";var Vb={kernelName:a.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=n.x;if(r.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){var o=r.texData.get(i.dataId),u=gg(o.values);return r.makeTensorInfo(i.shape,i.dtype,u)}return t=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new eb(i.shape,Wb):new Bg(i.shape,Wb),r.runWebGLProgram(t,[i],i.dtype)}},qb=bb({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),$b={kernelName:a.Acos,backendName:"webgl",kernelFunc:qb},Hb=bb({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Gb={kernelName:a.Acosh,backendName:"webgl",kernelFunc:Hb},Kb="return a + b;",Xb=yb({opSnippet:Kb,packedOpSnippet:Kb,supportsComplex:!0,cpuKernelImpl:qm}),Yb={kernelName:a.Add,backendName:"webgl",kernelFunc:Xb},Jb=function e(t,n){Object(_n.a)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},Qb=function e(t,n){Object(_n.a)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")};var Zb={kernelName:a.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,i=n;if(1===i.length)return sb({inputs:{x:i[0]},backend:r});if(i.length>Object(a.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(i.length/2),u=e({inputs:i.slice(0,o),backend:r}),s=e({inputs:i.slice(o),backend:r});return e({inputs:[u,s],backend:r})}var c=i.map((function(e){return e.dtype})).reduce((function(e,t){return Object(a.upcastType)(e,t)})),l=i.map((function(e){return e.shape})),f=Object(a.env)().getBool("WEBGL_PACK")?new Qb(i[0].shape,l):new Jb(i[0].shape,l);return r.runWebGLProgram(f,i,c)}};var ey={kernelName:a.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Lb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,c)),a.backend_util.assertAxesAreInnerMostDims("all",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Cb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),w=Ib(y,y.dtype,"all",n);return p=Cb(s?{inputs:{x:w},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:w},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),null!=d&&n.disposeIntermediateTensorInfo(h),p}};var ty={kernelName:a.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Lb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,c)),a.backend_util.assertAxesAreInnerMostDims("any",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Cb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),w=Ib(y,y.dtype,"any",n);return p=Cb(s?{inputs:{x:w},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:w},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),null!=d&&n.disposeIntermediateTensorInfo(h),p}},ny=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var u="max"===n?">":"<",s=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(u," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},ry=function e(t,n,r,i){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,a.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],u=Math.ceil(o/n);this.outputShape=t.slice(0,-1),u>1&&this.outputShape.push(u),i||this.variableNames.push("bestIndicesA");var s,c,l=this.outputShape,f=l.length,d=bm(f),h=Dg("coords",f);if(1===u){var p=bm(c=f+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[f-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[f-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[f-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[f-2],";")}else c=f,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(h[f-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(h[f-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(h[f-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(h[f-2],";");var v=["x","y","z","w","u","v"].slice(0,c),m="."+v[c-1],g=v.map((function(e){return"int "+e})),b=Dg("sourceLocR",c-1).concat("inIdx.r"),y=Dg("sourceLocG",c-1).concat("inIdx.g"),w=Dg("sourceLocB",c-1).concat("inIdx.b"),x=Dg("sourceLocA",c-1).concat("inIdx.a"),O="max"===r?"greaterThan":"lessThan",k=i?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(w.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),j="vec4(\n            getAChannel(".concat(b.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(w.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),_=i?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(_,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[f-1]," < ").concat(l[f-1]-1,";\n        bool hasNextRow = ").concat(h[f-2]," < ").concat(l[f-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(j,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(j,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(O,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};function ay(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);var u=a.backend_util.computeOptimalWindowSize(o),s={windowSize:u,inSize:o,batchSize:i,outSize:Math.ceil(o/u)},c=new ny(s,n,null==r),l=[t];null!=r&&l.push(r);var f=e.runWebGLProgram(c,l,"int32");if(1===f.shape[1])return f;var d=ay(e,t,n,f);return e.disposeIntermediateTensorInfo(f),d}function iy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=r?r.shape:t.shape,o=i[i.length-1],u=a.backend_util.computeOptimalWindowSize(o),s=new ry(i,u,n,null==r),c=null==r?[t]:[t,r],l=e.runWebGLProgram(s,c,"int32");if(l.shape.length===t.shape.length){var f=iy(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}return l}function oy(e,t,n,r){var o=[n];if(a.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Object(a.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var u=[],s=e.texData.get(t.dataId),c=t;null!==s&&s.isPacked&&(c=e.unpackTensor(t),u.push(c));var l=a.backend_util.computeOutAndReduceShapes(c.shape,o),f=Object(i.a)(l,2),d=f[0],h=f[1],p=a.util.sizeFromShape(h),v=Cb({inputs:{x:c},backend:e,attrs:{shape:[-1,p]}});u.push(v);var m=ay(e,v,r);u.push(m);var g=Cb({inputs:{x:m},backend:e,attrs:{shape:d}});return u.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),g}return iy(e,t,r)}var uy={kernelName:a.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=a.util.parseAxisParam(o,i.shape),s=a.backend_util.getAxesPermutation(u,i.shape.length),c=i,l=[];null!=s&&(c=Lb({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),u=a.backend_util.getInnerMostAxes(u.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMax",[u[0]],c.shape.length);var f=oy(n,c,u[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var sy={kernelName:a.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=a.util.parseAxisParam(o,i.shape),s=a.backend_util.getAxesPermutation(u,i.shape.length),c=i,l=[];null!=s&&(c=Lb({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),u=a.backend_util.getInnerMostAxes(u.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMin",[u[0]],c.shape.length);var f=oy(n,c,u[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},cy=bb({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ly={kernelName:a.Asin,backendName:"webgl",kernelFunc:cy},fy=bb({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),dy={kernelName:a.Asinh,backendName:"webgl",kernelFunc:fy},hy=bb({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),py={kernelName:a.Atan,backendName:"webgl",kernelFunc:hy},vy=yb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),my={kernelName:a.Atan2,backendName:"webgl",kernelFunc:vy},gy=bb({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),by={kernelName:a.Atanh,backendName:"webgl",kernelFunc:gy},yy=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(_n.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(v||(b="-1.0 / 1e-20"),r){var y=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(y," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",x="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(x="avgValue / count");var O=4*Math.floor(o/4),k=o%4,j="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(O,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(j,"\n          }\n\n          int xC = xCCorner + ").concat(O,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(j,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(j,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(j,"\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}},wy=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(_n.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideDepth,s=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var y="avg"===n,w="0.0";if(y||(w="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(x," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var O="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var j=4*Math.floor(o/4),_=o%4,S="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(O,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n      const float initializationValue = ").concat(w,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(w,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(j,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(j,";\n            if (").concat(1===_,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===_,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===_,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n          setOutput(").concat(k,");\n        }\n      }\n    ")}};var xy={kernelName:a.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;$v(i,"avgPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return sb({inputs:{x:i},backend:n});var f=new yy(l,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}};var Oy={kernelName:a.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat,f=a.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,c,l),d=new wy(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}},ky=function e(t){Object(_n.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.top,f=c-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(u,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},jy=function e(t){Object(_n.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=f-1-t.padInfo.front,v=d-1-t.padInfo.top,m=h-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var _y={kernelName:a.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(o.shape,u,s,[1,1,1],c,l),d=new jy(f);return n.runWebGLProgram(d,[i],o.dtype)}};var Sy={kernelName:a.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;$v([i,o],"avgPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,f=a.backend_util.computePool2DInfo(u.shape,s,c,1,l),d=new ky(f);return n.runWebGLProgram(d,[i],u.dtype)}};var Ey={kernelName:a.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Bb({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},Cy=function e(t,n,r,i,o,u){Object(_n.a)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(t,n),a.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=i&&(a.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="1.0";null!=o&&(a.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(u,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},Ay=function e(t,n,r,i,o,u){Object(_n.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(t,n),a.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=i&&(a.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=o&&(a.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(u,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},Ty={kernelName:a.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.mean,u=t.variance,s=t.offset,c=t.scale;a.util.assert(o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),a.util.assert(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),a.util.assert(null==c||o.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var f=[i,o,u],d=null;null!=s&&(d=s.shape,f.push(s));var h=null;null!=c&&(h=c.shape,f.push(c));var p=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Ay(i.shape,o.shape,u.shape,d,h,l):new Cy(i.shape,o.shape,u.shape,d,h,l);return n.runWebGLProgram(p,f,f[0].dtype)}},Ny=function e(t){Object(_n.a)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=bm(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Iy.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(Iy[t]," = start[").concat(t,"] + coords.").concat(Iy[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")},Iy=["x","y","z","w","u","v"];var Dy=function e(t){Object(_n.a)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=bm(this.rank),r=Dg("coords",this.rank),a=Dg("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),u="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(u,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")};function Ry(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.begin,s=r.size,c=a.slice_util.parseSliceParams(o,u,s),l=Object(i.a)(c,2),f=l[0],d=l[1];if(a.slice_util.assertParamsValid(o,f,d),0===a.util.sizeFromShape(d))return n.makeTensorInfo(d,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){var h=n.texData.get(o.dataId),p=bg(h.values,f,d,o.shape,o.dtype);return n.makeTensorInfo(d,o.dtype,p)}var v=n.texData.get(o.dataId).isPacked,m=a.slice_util.isSliceContinous(o.shape,f,d);if(v||!m){var g=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Dy(d):new Ny(d),b=[f];return n.runWebGLProgram(g,[o],o.dtype,b)}return n.uploadToGPU(o.dataId),function(e,t,n,r){var i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),u=r.texData.get(o.dataId);Object.assign(u,i),u.refCount=1,u.shape=n,u.dtype=e.dtype;var s=a.slice_util.computeFlatOffset(t,a.util.computeStrides(e.shape));i.slice&&(s+=i.slice.flatOffset),u.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};var c=r.dataRefCount.get(u.slice.origDataId)||1;return r.dataRefCount.set(u.slice.origDataId,c+1),o}(o,f,d,n)}var Fy={kernelName:a.Slice,backendName:"webgl",kernelFunc:Ry},My={kernelName:a.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.crops;a.util.assert(i.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=a.backend_util.getReshaped(i.shape,o,s),l=a.backend_util.getPermuted(c.length,o.length),f=a.backend_util.getReshapedPermuted(i.shape,o,s),d=a.backend_util.getSliceBeginCoords(u,o.length),h=a.backend_util.getSliceSize(f,u,o.length),p=[],v=Cb({inputs:{x:i},backend:n,attrs:{shape:c}}),m=Lb({inputs:{x:v},backend:n,attrs:{perm:l}}),g=Cb({inputs:{x:m},backend:n,attrs:{shape:f}}),b=Ry({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(v),p.push(m),p.push(g),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var Py={kernelName:a.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=$m(u,s,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}},Ly=yb({opSnippet:"return float(a != b);",cpuKernelImpl:dg,dtype:"bool"}),zy={kernelName:a.NotEqual,backendName:"webgl",kernelFunc:Ly};function By(e){var t=e.inputs,n=e.backend,r=t.input;return sb({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Uy={kernelName:a.Real,backendName:"webgl",kernelFunc:By};var Wy={kernelName:a.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,i=t.attrs,o=n.x,u=i.dtype;if("complex64"===u){if("complex64"===o.dtype)return sb({inputs:{x:o},backend:r});var s=a.zeros(o.shape),c=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),l=lb({inputs:{real:c,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var f=By({inputs:{input:o},backend:r}),d=e({inputs:{x:f},backend:r,attrs:{dtype:u}});return r.disposeIntermediateTensorInfo(f),d}if(!a.util.hasEncodingLoss(o.dtype,u)){var h=sb({inputs:{x:o},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:u}}if("int32"===u)return function(e,t){var n=new Bg(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===u){var p=r.makeTensorInfo([],"bool",a.util.getTypedArrayFromDType("bool",1)),v=Ly({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),v}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(u))}},Vy="return ceil(x);",qy=bb({opSnippet:Vy,packedOpSnippet:Vy,cpuKernelImpl:Gm}),$y={kernelName:a.Ceil,backendName:"webgl",kernelFunc:qy},Hy=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "},Gy=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "};var Ky={kernelName:a.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=i.clipValueMin,s=i.clipValueMax;t=Object(a.env)().getBool("WEBGL_PACK_CLIP")?new Gy(o.shape):new Hy(o.shape);var c=[[u],[s]];return r.runWebGLProgram(t,[o],o.dtype,c)}},Xy=function e(t){Object(_n.a)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};function Yy(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Jy={kernelName:a.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new Xy(r.shape),o=[Yy(r,a.complexTensorInfos.real),Yy(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},Qy=function e(t){Object(_n.a)(this,e),this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var i=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var u=n[o-1];i.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(u,"));"))}var s=n.length,c=n[n.length-1];i.push("else setOutput(getT".concat(s,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(i.join("\n        "),"\n      }\n    ")},Zy=function e(t,n){Object(_n.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(t,n);var r=this.outputShape,i=r.length,o=bm(i),u=Dg("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var c=new Array(t.length-1);c[0]=t[0][n];for(var l=1;l<c.length;l++)c[l]=c[l-1]+t[l][n];for(var f=s[n],d=s.slice(-2),h=s.join(),p="if (".concat(f," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(d.join(),"));\n        }"),v=1;v<c.length;v++){var m=c[v-1];p+="\n        if (".concat(f," < ").concat(c[v],"  && ").concat(f," >= ").concat(c[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(ew(s,f,m),"),\n            vec2(").concat(ew(d,f,m),"));\n        }")}var g=c.length,b=c[c.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(ew(s,f,b),"),\n          vec2(").concat(ew(d,f,b),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(u,"), 0., 0., 0.);\n\n        ").concat(u[i-1]," = ").concat(u[i-1]," + 1;\n        if (").concat(u[i-1]," < ").concat(r[i-1],") {\n          result.g = getValue(").concat(u,");\n        }\n\n        ").concat(u[i-2]," = ").concat(u[i-2]," + 1;\n        if (").concat(u[i-2]," < ").concat(r[i-2],") {\n          result.a = getValue(").concat(u,");\n        }\n\n        ").concat(u[i-1]," = ").concat(u[i-1]," - 1;\n        if (").concat(u[i-2]," < ").concat(r[i-2]," &&\n            ").concat(u[i-1]," < ").concat(r[i-1],") {\n          result.b = getValue(").concat(u,");\n        }\n        setOutput(result);\n      }\n    ")};function ew(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function tw(e){var t=e.inputs,n=e.backend,r=t.input;return sb({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var nw={kernelName:a.Imag,backendName:"webgl",kernelFunc:tw};function rw(e,t,n){var r=e[0].dtype;if("complex64"===r){var i=e.map((function(e){return By({inputs:{input:e},backend:n})})),o=e.map((function(e){return tw({inputs:{input:e},backend:n})})),u=rw(i,t,n),s=rw(o,t,n),c=lb({inputs:{real:u,imag:s},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var f=e.map((function(e){var r=a.util.sizeFromShape(e.shape.slice(t));return Cb({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=f.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=a.backend_util.computeOutShape(f.map((function(e){return e.shape})),1),p=1===f[0].shape[0],v=Km(d,h,r,p),m=a.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,v);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>Object(a.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var b=Math.floor(e.length/2),y=rw(e.slice(0,b),t,n),w=rw(e.slice(b),t,n),x=rw([y,w],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),x}if(Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var O=new Zy(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(O,e,r)}var k=function(e,t,n){var r=a.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return Cb({inputs:{x:e},attrs:{shape:[-1,a.util.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),j=k.tensors2D,_=k.outShape,S=new Qy(j.map((function(e){return e.shape}))),E=n.runWebGLProgram(S,j,r);j.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=Cb({inputs:{x:E},attrs:{shape:_},backend:n});return n.disposeIntermediateTensorInfo(E),C}function aw(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,i=a.util.parseAxisParam(r,t[0].shape)[0],o=a.backend_util.computeOutShape(t.map((function(e){return e.shape})),i);if(0===a.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return a.util.sizeFromShape(e.shape)>0}));if(1===u.length)return sb({inputs:{x:u[0]},backend:n});var s=u.map((function(e){return e.shape}));return a.backend_util.assertParamsConsistent(s,i),rw(u,i,n)}var iw={kernelName:a.Concat,backendName:"webgl",kernelFunc:aw},ow=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_n.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,u=t.padInfo.left,s=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1,w="",x="";r&&(w=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),x="result = activation(result);");var O=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(w,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(O,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")},uw=function e(t){Object(_n.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},sw=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Sm(this.outputShape.length);for(var r=n.dataFormat,a=Gv(),i="channelsLast"===r,o=i?0:1,u=i?1:2,s=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var f=0;f<=1;f++)c+="\n          blockIndex = rc.y + ".concat(f,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(u,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")};function cw(e){var t,n=e.x,r=e.filter,i=e.convInfo,o=e.backend,u=e.bias,s=void 0===u?null:u,c=e.preluActivationWeights,l=void 0===c?null:c,f=e.leakyreluAlpha,d=void 0===f?0:f,h=e.activation,p=void 0===h?null:h,v=n.shape,m=o.texData.get(n.dataId),g=i.inChannels,b=v[0]*v[1]*v[2],y=i.outChannels,w="channelsLast"===i.dataFormat,x=[];if(!((1===b||1===y)&&g>1e3)&&m.isPacked&&w&&null!=m.texture&&v[2]%2!==0&&a.util.arraysEqual(m.shape.slice(-3),v.slice(-3))){var O=v[0]*v[1]*(v[2]+1),k={dataId:n.dataId,shape:[1,O,i.inChannels],dtype:n.dtype},j=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,a.util.assert(Bv(m.shape,k.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(k.shape," isn't free")}));var _=Cb({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});x.push(_);var S=Bb({a:k,b:_,backend:o,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d}),E=o.texData.get(S.dataId);a.util.assert(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=j,E.shape=i.outShape,(t=sb({inputs:{x:S},backend:o})).shape=i.outShape,x.push(S)}else{var C=Cb({inputs:{x:n},backend:o,attrs:{shape:[1,w?v[0]*v[1]*v[2]:v[0]*v[2]*v[3],i.inChannels]}}),A=Cb({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}}),T=Bb({a:C,b:A,transposeA:false,transposeB:false,backend:o,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d});t=Cb({inputs:{x:T},backend:o,attrs:{shape:i.outShape}}),x.push(C),x.push(A),x.push(T)}for(var N=0,I=x;N<I.length;N++){var D=I[N];o.disposeIntermediateTensorInfo(D)}return t}function lw(e){var t=e.x,n=e.filter,r=e.convInfo,i=e.backend,o=e.bias,u=void 0===o?null:o,s=e.preluActivationWeights,c=void 0===s?null:s,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,h=void 0===d?null:d,p=r.filterWidth,v=r.filterHeight,m=r.inChannels,g=r.outWidth,b=r.outHeight,y="channelsLast"===r.dataFormat,w=p*v*m,x=b*g,O=[w,x],k=[],j=Cb({inputs:{x:t},backend:i,attrs:{shape:t.shape.slice(1)}}),_=Cb({inputs:{x:n},backend:i,attrs:{shape:[1,w,a.util.sizeFromShape(n.shape)/w]}});k.push(j),k.push(_);var S=new sw(O,r),E=[j.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=i.runWebGLProgram(S,[j],"float32",E),A=Cb({inputs:{x:C},backend:i,attrs:{shape:[1,O[0],O[1]]}});k.push(C),k.push(A);var T=null!=u,N=null!=c,I="leakyrelu"===h,D=h?wb(h,!0):null,R=new xb(A.shape,_.shape,[1,x,r.outChannels],!0,!1,T,D,N,I),F=[A,_];if(u&&F.push(u),N&&F.push(c),I){var M=i.makeTensorInfo([],"float32",a.util.createScalarValue(f,"float32"));F.push(M),k.push(M)}var P=i.runWebGLProgram(R,F,"float32"),L=Cb({inputs:{x:P},backend:i,attrs:{shape:y?[1,b,g,r.outChannels]:[1,r.outChannels,b,g]}});k.push(P);for(var z=0,B=k;z<B.length;z++){var U=B[z];i.disposeIntermediateTensorInfo(U)}return L}var fw={kernelName:a.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=i.strides,c=i.pad,l=i.dataFormat,f=i.dilations,d=i.dimRoundingMode,h=a.backend_util.convertConv2DDataFormat(l),p=a.backend_util.computeConv2DInfo(o.shape,u.shape,s,f,c,d,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=lw({x:o,filter:u,convInfo:p,backend:r});else{var v=new ow(p);t=r.runWebGLProgram(v,[o,u],"float32")}else t=cw({x:o,filter:u,convInfo:p,backend:r});var m=Cb({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},dw=function e(t){Object(_n.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},hw=function e(t){Object(_n.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,u=n-1-t.padInfo.top,s=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},pw=function e(t){Object(_n.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,u=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(u,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},vw=function e(t){Object(_n.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var mw={kernelName:a.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=r.filterShape,d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,f,u,1,s,l,!1,d),p=new dw(h);return n.runWebGLProgram(p,[i,o],"float32")}};var gw={kernelName:a.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.inputShape,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dimRoundingMode,d=a.backend_util.convertConv2DDataFormat(l),h=a.backend_util.computeConv2DInfo(u,o.shape,s,1,c,f,!1,d),p=new hw(h);return n.runWebGLProgram(p,[i,o],"float32")}};var bw={kernelName:a.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=a.backend_util.computeConv3DInfo(i.shape,o.shape,u,c,s),f=new uw(l);return n.runWebGLProgram(f,[i,o],"float32")}};var yw={kernelName:a.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.filterShape,l=a.backend_util.computeConv3DInfo(i.shape,c,u,1,s),f=new pw(l);return n.runWebGLProgram(f,[i,o],"float32")}};var ww={kernelName:a.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.pad,s=r.strides,c=r.inputShape,l=a.backend_util.computeConv3DInfo(c,o.shape,s,1,u),f=new vw(l);return n.runWebGLProgram(f,[i,o],"float32")}},xw=bb({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),Ow={kernelName:a.Cos,backendName:"webgl",kernelFunc:xw},kw=bb({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),jw={kernelName:a.Cosh,backendName:"webgl",kernelFunc:kw},_w=function e(t,n,r,a,o){Object(_n.a)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3],d=Object(i.a)(n,1)[0],h=Object(i.a)(r,2),p=h[0],v=h[1];this.outputShape=[d,p,v,f];var m="bilinear"===a?1:0,g="".concat(c-1,".0"),b="".concat(l-1,".0"),y=p>1?["".concat((c-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],w=Object(i.a)(y,3),x=w[0],O=w[1],k=w[2],j=v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],_=Object(i.a)(j,3),S=_[0],E=_[1],C=_[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(O,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},Sw={kernelName:a.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,u=r.cropSize,s=r.method,c=r.extrapolationValue,l=new _w(a.shape,i.shape,u,s,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},Ew=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(Cw(a,"coords"),")"),o=t[t.length-1],u="",s="";n?(u=r?"end != ".concat(o-1):"end != 0",s=r?"end + 1":"end - 1"):(u=r?"end + pow2 < ".concat(o):"end >= pow2",s=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(bm(a)," coords = getOutputCoords();\n        int end = ").concat(Aw(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(u,") {\n          int idx = ").concat(s,";\n          ").concat(Aw(a,"coords")," = idx;\n          val += getX(").concat(Cw(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")};function Cw(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function Aw(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var Tw={kernelName:a.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.exclusive,s=r.reverse,c=i.shape.length,l=a.backend_util.getAxesPermutation([o],c),f=i;null!=l&&(f=Lb({inputs:{x:i},backend:n,attrs:{perm:l}}));var d=a.backend_util.getInnerMostAxes(1,c)[0];if(d!==c-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(i.shape.length-1," ")+"but got axis=".concat(o));for(var h=f.shape[d],p=sb({inputs:{x:f},backend:n}),v=0;v<=Math.ceil(Math.log2(h))-1;v++){var m=new Ew(f.shape,!1,s),g=[[v]],b=p;p=n.runWebGLProgram(m,[p],p.dtype,g),n.disposeIntermediateTensorInfo(b)}if(u){var y=new Ew(f.shape,u,s),w=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(w)}if(null!=l){var x=Lb({inputs:{x:p},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),x}return p}};var Nw={kernelName:a.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=$m(s,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(i),h=Hm(f,d,o,u);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Iw=function(){function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Object(Sn.a)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Dw={kernelName:a.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockSize,u=r.dataFormat;a.util.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=i.shape[0],c="NHWC"===u?i.shape[1]:i.shape[2],l="NHWC"===u?i.shape[2]:i.shape[3],f="NHWC"===u?i.shape[3]:i.shape[1],d=c*o,h=l*o,p=f/(o*o),v=new Iw("NHWC"===u?[s,d,h,p]:[s,p,d,h],o,u);return n.runWebGLProgram(v,[i],i.dtype)}},Rw=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_n.a)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Sm(this.outputShape.length);var o=t.filterHeight,u=t.filterWidth,s=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(u,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")},Fw=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_n.a)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Sm(this.outputShape.length);for(var u=t.outChannels/t.inChannels,s=t.padInfo.left,c=t.strideWidth,l=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,h=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",v=0;v<d;v++)p+="\n          vec4 xTexelC".concat(2*v,";\n          int xTexelC").concat(2*v,"Ready;\n          vec4 xTexelC").concat(2*v+1,";\n          int xTexelC").concat(2*v+1,"Ready;\n          vec4 xC").concat(v,";");for(var m=0;m<f;m++){for(var g=0;g<d;g++)p+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");p+="\n        xR = xRCorner + ".concat(m," * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ");for(var b=0;b<(h+1)/2;b++){var y=2*b;if(p+="\n          xC = xCCorner + ".concat(y*l,";\n          "),1===c){if(y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),p+=1===l&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<d)){var w=s%2===0?a.util.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(w,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),l>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                      xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(y,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                  ")):p+=1===w?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(w,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<d&&(p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<d&&(p+="\n            wTexel = getW(".concat(m,", ").concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<d&&(p+="\n              wTexel = getW(".concat(m,", ").concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n        }\n      "}var x="",O="";r&&(x=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),O="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(O,"\n        setOutput(result);\n      }\n    ")};var Mw={kernelName:a.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=r.dimRoundingMode,f=c;null==f&&(f=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(f,"'")}));var d,h=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,f,s,l,!0);d=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new Fw(h):new Rw(h);var p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}},Pw=function e(t){Object(_n.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Lw=function e(t){Object(_n.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,u=r-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var zw={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.filterShape,d=a.backend_util.computeConv2DInfo(i.shape,f,u,s,c,l,!0),h=new Pw(d);return n.runWebGLProgram(h,[i,o],"float32")}};var Bw={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.inputShape,d=a.backend_util.computeConv2DInfo(f,o.shape,u,s,c,l,!0),h=new Lw(d);return n.runWebGLProgram(h,[i,o],"float32")}},Uw=function e(t){Object(_n.a)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};var Ww={kernelName:a.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=[].concat(Object(Tn.a)(r.shape),Object(Tn.a)(r.shape)),o=a.util.sizeFromShape(r.shape),u=Cb({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Uw(o),c=n.runWebGLProgram(s,[u],u.dtype),l=Cb({inputs:{x:c},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}},Vw=function e(t){Object(_n.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,u=t.filterHeight,s=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(u,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")};var qw={kernelName:a.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=i.strides,c=i.pad,l=i.dilations,f=a.backend_util.computeDilation2DInfo(o.shape,u.shape,s,c,"NHWC",l),d=new Vw(f),h=Cb({inputs:{x:t=r.runWebGLProgram(d,[o,u],"float32")},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var $w={kernelName:a.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,i=t,o=a.backend_util.decodeEinsumEquation(r,i.length),u=o.allDims,s=o.summedDims,c=o.idDims;a.backend_util.checkEinsumDimSizes(u.length,c,i);for(var l=a.backend_util.getEinsumComputePath(s,c),f=l.path,d=l.steps,h=d.length,p=null,v=u.length,m=[],g=0;g<h;++g){var b,y=Object(Nn.a)(d[g]);try{for(y.s();!(b=y.n()).done;){var w=b.value,x=a.backend_util.getEinsumPermutation(v,c[w]),O=x.permutationIndices,k=x.expandDims,j=void 0;a.backend_util.isIdentityPermutation(O)?j=i[w]:(j=Lb({inputs:{x:i[w]},backend:n,attrs:{perm:O}}),m.push(j));for(var _=j.shape.slice(),S=0;S<k.length;++S)_.splice(k[S],0,1);a.util.arraysEqual(j.shape,_)||(j=Cb({inputs:{x:j},backend:n,attrs:{shape:_}}),m.push(j)),null===p?p=j:(p=Sb({inputs:{a:j,b:p},backend:n}),m.push(p))}}catch(T){y.e(T)}finally{y.f()}g<h-1&&(f[g]>=0&&(p=Mb({inputs:{x:p},backend:n,attrs:{axis:f[g]-(u.length-v),keepDims:!1}}),m.push(p)),v--)}for(var E=0,C=m;E<C.length;E++){var A=C[E];A!==p&&n.disposeIntermediateTensorInfo(A)}return p}},Hw=bb({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Gw={kernelName:a.Elu,backendName:"webgl",kernelFunc:Hw},Kw={kernelName:a.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,i=t.y,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ub("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new ob("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},Xw=yb({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Xm}),Yw={kernelName:a.Equal,backendName:"webgl",kernelFunc:Xw},Jw=bb({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(a.backend_util.ERF_P,";\n  float a1 = ").concat(a.backend_util.ERF_A1,";\n  float a2 = ").concat(a.backend_util.ERF_A2,";\n  float a3 = ").concat(a.backend_util.ERF_A3,";\n  float a4 = ").concat(a.backend_util.ERF_A4,";\n  float a5 = ").concat(a.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Qw={kernelName:a.Erf,backendName:"webgl",kernelFunc:Jw},Zw="return exp(x);",ex=bb({opSnippet:Zw,packedOpSnippet:Zw,cpuKernelImpl:Ym}),tx={kernelName:a.Exp,backendName:"webgl",kernelFunc:ex};function nx(e){var t=e.inputs,n=e.attrs,r=e.backend,i=n.dim,o=t.input,u=o.shape.length,s=o.shape.slice(),c=i;return i<0&&(a.util.assert(-(u+1)<=i,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),c=u+i+1),s.splice(c,0,1),Cb({inputs:{x:o},backend:r,attrs:{shape:s}})}var rx={kernelName:a.ExpandDims,backendName:"webgl",kernelFunc:nx},ax="return exp(x) - 1.0;",ix=bb({opSnippet:ax,packedOpSnippet:ax,cpuKernelImpl:Jm}),ox={kernelName:a.Expm1,backendName:"webgl",kernelFunc:ix},ux=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),u=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(u,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};function sx(e,t,n){var r=n.texData.get(e.dataId),i=a.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],u=Cb({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),s=u.shape,c=new ux("real",s,t),l=new ux("imag",s,t),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(c,f,"float32"),h=n.runWebGLProgram(l,f,"float32"),p=lb({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);var v=Cb({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),v}var cx={kernelName:a.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return sx(t.input,!1,n)}},lx=function e(t,n){Object(_n.a)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "};function fx(e){var t=e.backend,n=e.attrs,r=n.shape,i=n.value,o=n.dtype;if("string"===(o=o||a.util.inferDtype(i))){var u=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return u.fill(i),t.makeTensorInfo(r,o,u)}var s=new lx(r,i),c=[[i]];return t.runWebGLProgram(s,[],o,c)}var dx,hx={kernelName:a.Fill,backendName:"webgl",kernelFunc:fx},px=function e(t){Object(_n.a)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},vx={kernelName:a.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new px(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},mx="return floor(x);",gx=bb({opSnippet:mx,packedOpSnippet:mx,cpuKernelImpl:Qm}),bx={kernelName:a.Floor,backendName:"webgl",kernelFunc:gx},yx=yb({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),wx={kernelName:a.FloorDiv,backendName:"webgl",kernelFunc:yx},xx=function e(t){Object(_n.a)(this,e),this.variableNames=["A"];var n=Gv(),r=Object(i.a)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},Ox=function e(t){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Gv(),r=Object(i.a)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},kx={kernelName:a.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,u=r.numChannels,s="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,c="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,l=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],f=Object(i.a)(l,2),d=f[0],h=f[1],p=[h,d],v=[h,d,u];(c||s)&&(null==dx&&(dx=document.createElement("canvas").getContext("2d")),dx.canvas.width=d,dx.canvas.height=h,dx.drawImage(o,0,0,d,h),o=dx.canvas);var m=n.makeTensorInfo(p,"int32");n.texData.get(m.dataId).usage=lv.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);var g=Object(a.env)().getBool("WEBGL_PACK")?new Ox(v):new xx(v),b=n.runWebGLProgram(g,[m],"int32");return n.disposeData(m.dataId),b}};var jx={kernelName:a.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=n.bias,c=n.preluActivationWeights,l=i.strides,f=i.pad,d=i.dataFormat,h=i.dilations,p=i.dimRoundingMode,v=i.activation,m=i.leakyreluAlpha,g=a.backend_util.convertConv2DDataFormat(d),b=a.backend_util.computeConv2DInfo(o.shape,u.shape,l,h,f,p,!1,g),y=[];if(1!==b.filterHeight||1!==b.filterWidth||1!==b.dilationHeight||1!==b.dilationWidth||1!==b.strideHeight||1!==b.strideWidth||"SAME"!==b.padInfo.type&&"VALID"!==b.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=lw({x:o,filter:u,convInfo:b,backend:r,bias:s,activation:v,preluActivationWeights:c,leakyreluAlpha:m});else{var w=null!=s,x=null!=c,O="leakyrelu"===v,k=v?wb(v,!1):null,j=new ow(b,w,k,x,O),_=[o,u];if(s&&_.push(s),c&&_.push(c),O){var S=r.makeTensorInfo([],"float32",a.util.createScalarValue(m,"float32"));_.push(S),y.push(S)}t=r.runWebGLProgram(j,_,"float32")}else t=cw({x:o,filter:u,convInfo:b,backend:r,bias:s,activation:v,preluActivationWeights:c,leakyreluAlpha:m});var E=Cb({inputs:{x:t},backend:r,attrs:{shape:b.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var _x={kernelName:a.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.bias,s=t.preluActivationWeights,c=r.strides,l=r.pad,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=[],m=f;null==m&&(m=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(c,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(m,"'")}));var g,b=a.backend_util.computeConv2DInfo(i.shape,o.shape,c,m,l,d,!0),y=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,w=h?wb(h,y):null,x=[i,o],O=null!=u,k=null!=s,j="leakyrelu"===h;if(O&&x.push(u),k&&x.push(s),j){var _=n.makeTensorInfo([],"float32",a.util.createScalarValue(p,"float32"));x.push(_),v.push(_)}g=y?new Fw(b,O,w,k,j):new Rw(b,O,w,k,j);var S=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],E=n.runWebGLProgram(g,x,"float32",S);return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},Sx=function e(t,n,r){Object(_n.a)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=bm(n.length),i=bm(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")};var Ex={kernelName:a.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,u=o.shape,s=u[u.length-1],c=a.util.sizeFromShape(r.shape),l=a.backend_util.prepareAndValidate(r,o),f=Object(i.a)(l,4),d=f[0],h=f[1],p=f[2],v=f[3],m=Cb({inputs:{x:o},backend:n,attrs:{shape:[h,s]}}),g=Cb({inputs:{x:r},backend:n,attrs:{shape:[a.util.sizeFromShape(r.shape)/p,p]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){var b=n.readSync(o.dataId),y=n.bufferSync(r),w=Zm(b,y,r.dtype,h,s,p,v,r.shape,c);return n.makeTensorInfo(d,r.dtype,w.values)}var x=new Sx(s,v,[h,p]),O=n.runWebGLProgram(x,[g,m],g.dtype),k=Cb({inputs:{x:O},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(O),k}},Cx=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=bm(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};function Ax(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.indices,u=r.axis,s=r.batchDims,c=a.util.parseAxisParam(u,i.shape)[0],l=a.backend_util.segment_util.collectGatherOpShapeInfo(i,o,c,s),f=a.util.sizeFromShape(o.shape),d=[],h=Cb({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=Cb({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,f/l.batchSize]}});d.push(h),d.push(p);var v=[l.batchSize,l.outerSize,f/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){var m=n.bufferSync(p),g=n.bufferSync(h),b=eg(g,m,v);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,b.dtype,b.values)}var y=new Cx(h.shape,v),w=n.runWebGLProgram(y,[h,p],h.dtype);d.push(w);var x=Cb({inputs:{x:w},backend:n,attrs:{shape:l.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var Tx={kernelName:a.GatherV2,backendName:"webgl",kernelFunc:Ax},Nx=yb({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:tg,dtype:"bool"}),Ix={kernelName:a.Greater,backendName:"webgl",kernelFunc:Nx},Dx=yb({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:ng}),Rx={kernelName:a.GreaterEqual,backendName:"webgl",kernelFunc:Dx};var Fx={kernelName:a.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return sx(t.input,!0,n)}},Mx=bb({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Px={kernelName:a.IsFinite,backendName:"webgl",kernelFunc:Mx},Lx=bb({opSnippet:"return float(isinf(x));",dtype:"bool"}),zx={kernelName:a.IsInf,backendName:"webgl",kernelFunc:Lx},Bx=bb({opSnippet:"return float(isnan(x));",dtype:"bool"}),Ux={kernelName:a.IsNan,backendName:"webgl",kernelFunc:Bx},Wx=yb({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:rg,dtype:"bool"}),Vx={kernelName:a.Less,backendName:"webgl",kernelFunc:Wx},qx=yb({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:ag,dtype:"bool"}),$x={kernelName:a.LessEqual,backendName:"webgl",kernelFunc:qx};var Hx={kernelName:a.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=ig(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Gx=bb({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:og}),Kx={kernelName:a.Log,backendName:"webgl",kernelFunc:Gx},Xx=bb({opSnippet:"return log(1.0 + x);"}),Yx={kernelName:a.Log1p,backendName:"webgl",kernelFunc:Xx},Jx=yb({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Qx={kernelName:a.LogicalAnd,backendName:"webgl",kernelFunc:Jx},Zx=bb({opSnippet:"return float(!(x >= 1.0));"}),eO={kernelName:a.LogicalNot,backendName:"webgl",kernelFunc:Zx},tO=yb({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),nO={kernelName:a.LogicalOr,backendName:"webgl",kernelFunc:tO},rO=function e(t,n,r,a,i){Object(_n.a)(this,e),this.variableNames=["x"],this.outputShape=[];var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(u,"; j <= ").concat(u,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},aO=function e(t,n,r,a,i){Object(_n.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(u,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(u,"; j <= ").concat(u,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},iO={kernelName:a.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta,l=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new aO(i.shape,o,u,s,c):new rO(i.shape,o,u,s,c);return n.runWebGLProgram(l,[i],i.dtype)}},oO=function e(t,n,r,a,i){Object(_n.a)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},uO={kernelName:a.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,u=r.depthRadius,s=r.bias,c=r.alpha,l=r.beta,f=new oO(a.shape,u,s,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function sO(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.reductionIndices,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=null!=d,p=n.shouldExecuteOnCPU([o]),v=o;if(h){if(p){for(var m=n.texData.get(v.dataId).values,g=new Array(c),b=0;b<g.length;b++)g[b]=o.shape[d[b]];var y=Tg(m,o.shape,o.dtype,d,g);v=n.makeTensorInfo(g,o.dtype),n.texData.get(v.dataId).values=y}else v=Fb(o,d,n);f=a.backend_util.getInnerMostAxes(f.length,c)}a.backend_util.assertAxesAreInnerMostDims("max",f,c);var w,x=a.backend_util.computeOutAndReduceShapes(v.shape,f),O=Object(i.a)(x,2),k=O[0],j=O[1],_=k;if(s&&(_=a.backend_util.expandShapeToKeepDim(k,l)),p){var S=n.texData.get(v.dataId).values,E=ug(S,a.util.sizeFromShape(j),_,o.dtype);w=n.makeTensorInfo(_,o.dtype),n.texData.get(w.dataId).values=E}else w=function(e,t,n,r){var i=a.util.sizeFromShape(t),o=Cb({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/i,i]},backend:r}),u=Ib(o,e.dtype,"max",r),s=Cb({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),s}(v,j,_,n);return h&&n.disposeIntermediateTensorInfo(v),w}var cO={kernelName:a.Max,backendName:"webgl",kernelFunc:sO},lO=yb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:sg}),fO={kernelName:a.Maximum,backendName:"webgl",kernelFunc:lO};var dO={kernelName:a.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;$v(i,"maxPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return sb({inputs:{x:i},backend:n});var f=new yy(l,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}};var hO={kernelName:a.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,l,c),d=new wy(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}},pO=function e(t){Object(_n.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,u=i-1-t.padInfo.top,s=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},vO=function e(t){Object(_n.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=s-1-t.padInfo.front,d=c-1-t.padInfo.top,h=l-1-t.padInfo.left,p=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var mO={kernelName:a.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(o.shape,u,s,[1,1,1],c,l),d=new wy(f,"max",!0),h=n.runWebGLProgram(d,[o],o.dtype),p=new vO(f),v=n.runWebGLProgram(p,[i,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var gO={kernelName:a.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;$v([o,t.output],"maxPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,f=r.dimRoundingMode,d=a.backend_util.computePool2DInfo(u.shape,s,c,1,l,f),h=new yy(d,"max",!0),p=n.runWebGLProgram(h,[u],u.dtype),v=new pO(d),m=n.runWebGLProgram(v,[i,p],u.dtype);return n.disposeIntermediateTensorInfo(p),m}};var bO={kernelName:a.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.filterSize,s=n.strides,c=n.pad,l=n.includeBatchInIndex,f=r;a.util.assert(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")}));var d=[1,1];a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(s,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(d,"'")}));var h=a.backend_util.computePool2DInfo(o.shape,u,s,d,c),p=function(e,t,n,r){var a=new yy(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new yy(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(o,l,h,f),v=Object(i.a)(p,2);return[v[0],v[1]]}};var yO={kernelName:a.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.keepDims,s=n.axis,c=r,l=o.shape.length,f=a.util.parseAxisParam(s,o.shape),d=f,h=a.backend_util.getAxesPermutation(d,l),p=null!=h,v=c.shouldExecuteOnCPU([o]),m=[],g=o;if(p){if(v){for(var b=c.texData.get(g.dataId).values,y=new Array(l),w=0;w<y.length;w++)y[w]=o.shape[h[w]];var x=Tg(b,o.shape,o.dtype,h,y);g=c.makeTensorInfo(y,o.dtype),c.texData.get(g.dataId).values=x}else g=Fb(o,h,c);m.push(g),d=a.backend_util.getInnerMostAxes(d.length,l)}a.backend_util.assertAxesAreInnerMostDims("sum",d,l);var O=a.backend_util.computeOutAndReduceShapes(g.shape,d),k=Object(i.a)(O,2),j=k[0],_=k[1],S=j;u&&(S=a.backend_util.expandShapeToKeepDim(j,f));for(var E=function(e,t,n,r){var i=a.util.sizeFromShape(t),o=Cb({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/i,i]},backend:r}),u=Ib(o,"float32","mean",r),s=Cb({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),s}(g,_,S,c),C=0,A=m;C<A.length;C++){var T=A[C];c.disposeIntermediateTensorInfo(T)}return E}};var wO={kernelName:a.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Lb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Cb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),w=Ib(y,y.dtype,"min",n);return p=Cb(s?{inputs:{x:w},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:w},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),null!=d&&n.disposeIntermediateTensorInfo(h),p}},xO=yb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:cg}),OO={kernelName:a.Minimum,backendName:"webgl",kernelFunc:xO},kO=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=bm(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},jO=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=bm(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=Dg("rc",a),c=Dg("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d="reflect"===r?0:1,h="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(s[a-2]," += 1;\n        if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(s[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},_O={kernelName:a.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.mode,s=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jO(i.shape,o,u):new kO(i.shape,o,u);return n.runWebGLProgram(s,[i],i.dtype)}},SO=yb({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),EO={kernelName:a.Mod,backendName:"webgl",kernelFunc:SO},CO=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")},AO=yb({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),TO={kernelName:a.RealDiv,backendName:"webgl",kernelFunc:AO},NO="return a - b;",IO=yb({opSnippet:NO,packedOpSnippet:NO,supportsComplex:!0,cpuKernelImpl:Eg}),DO={kernelName:a.Sub,backendName:"webgl",kernelFunc:IO};function RO(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.dim,u=a.util.parseAxisParam([o],i.shape),s=sO({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=a.backend_util.expandShapeToKeepDim(s.shape,u),l=Cb({inputs:{x:s},backend:n,attrs:{shape:c}}),f=IO({inputs:{a:i,b:l},backend:n}),d=ex({inputs:{x:f},backend:n}),h=Mb({inputs:{x:d},backend:n,attrs:{axis:u,keepDims:!1}}),p=Cb({inputs:{x:h},backend:n,attrs:{shape:c}}),v=AO({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),v}var FO={kernelName:a.Softmax,backendName:"webgl",kernelFunc:RO};var MO={kernelName:a.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,u=r.normalized,s=u?a:RO({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=s.shape[0],l=s.shape[1],f=new CO(c,l,i),d=[[o]],h=n.runWebGLProgram(f,[s],"int32",d);return u||n.disposeIntermediateTensorInfo(s),h}},PO="return -x;";var LO={kernelName:a.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=n.x;if(r.shouldExecuteOnCPU([o])){var u=r.texData.get(o.dataId),s=fg(u.values,o.shape,o.dtype),c=Object(i.a)(s,2),l=c[0],f=c[1];return r.makeTensorInfo(f,o.dtype,l)}return t=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new eb(o.shape,PO):new Bg(o.shape,PO),r.runWebGLProgram(t,[o],o.dtype)}},zO=a.kernel_impls.nonMaxSuppressionV3Impl;var BO={kernelName:a.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=n.readSync(i.dataId),f=n.readSync(o.dataId),d=zO(l,f,u,s,c).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},UO=a.kernel_impls.nonMaxSuppressionV4Impl;var WO={kernelName:a.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.padToMaxOutputSize,f=n.readSync(i.dataId),d=n.readSync(o.dataId),h=UO(f,d,u,s,c,l),p=h.selectedIndices,v=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([v]))]}},VO=a.kernel_impls.nonMaxSuppressionV5Impl;var qO={kernelName:a.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.softNmsSigma,f=n.readSync(i.dataId),d=n.readSync(o.dataId),h=VO(f,d,u,s,c,l),p=h.selectedIndices,v=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}},$O=function e(t,n,r,a){Object(_n.a)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},HO={kernelName:a.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=r.depth,u=r.onValue,s=r.offValue,c=a.util.sizeFromShape(i.shape),l=new $O(c,o,u,s),f=Cb({inputs:{x:i},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(l,[f],i.dtype);n.disposeIntermediateTensorInfo(f);var h=Cb({inputs:{x:d},backend:n,attrs:{shape:[].concat(Object(Tn.a)(i.shape),[o])}});return n.disposeIntermediateTensorInfo(d),h}};function GO(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=By({inputs:{input:r},backend:n}),i=GO({inputs:{x:a},backend:n}),o=tw({inputs:{input:r},backend:n}),u=GO({inputs:{x:o},backend:n}),s=lb({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return fx({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var KO={kernelName:a.ZerosLike,backendName:"webgl",kernelFunc:GO};var XO={kernelName:a.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=By({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=tw({inputs:{input:a},backend:r}),s=GO({inputs:{x:u},backend:r}),c=lb({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return fx({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var YO={kernelName:a.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return nx({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){a.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=[],s=aw({inputs:t.map((function(e){var t=nx({inputs:{input:e},backend:n,attrs:{dim:r}});return u.push(t),t})),backend:n,attrs:{axis:r}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},JO=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=bm(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},QO=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=bm(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=Dg("rc",a),c=Dg("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(s[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(s[a-2]," += 1;\n       if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(s[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(d[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},ZO=function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.constantValue;if(0===a.util.sizeFromShape(i.shape))return fx({backend:n,attrs:{shape:o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),value:u,dtype:i.dtype}});var s=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QO(i.shape,o,u):new JO(i.shape,o,u),c=[[u]];return n.runWebGLProgram(s,[i],i.dtype,c)},ek={kernelName:a.PadV2,backendName:"webgl",kernelFunc:ZO},tk=yb({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),nk={kernelName:a.Pow,backendName:"webgl",kernelFunc:tk};var rk={kernelName:a.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=e.attrs,u=n.x,s=o.axis,c=o.keepDims,l=u.shape.length,f=[],d=a.util.parseAxisParam(s,u.shape),h=d,p=a.backend_util.getAxesPermutation(h,l),v=u;if(null!=p&&(v=Lb({inputs:{x:u},backend:r,attrs:{perm:p}}),h=a.backend_util.getInnerMostAxes(h.length,l),f.push(v)),a.backend_util.assertAxesAreInnerMostDims("prod",h,l),r.shouldExecuteOnCPU([v])){var m=r.texData.get(v.dataId).values,g=hg(v.shape,v.dtype,m,h),b=g.outVals,y=g.outShape,w=g.outDtype;t=r.makeTensorInfo(y,w,b)}else{var x=a.backend_util.computeOutAndReduceShapes(v.shape,h),O=Object(i.a)(x,2),k=O[0],j=O[1],_=a.util.sizeFromShape(j),S=Cb({inputs:{x:v},backend:r,attrs:{shape:[-1,_]}}),E=Ib(S,Object(a.sumOutType)(u.dtype),"prod",r);t=Cb({inputs:{x:E},backend:r,attrs:{shape:k}}),f.push(S),f.push(E)}if(c){f.push(t);var C=a.backend_util.expandShapeToKeepDim(t.shape,d);t=Cb({inputs:{x:t},backend:r,attrs:{shape:C}})}return f.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},ak=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,u=pg(r,a,i,o);return t.makeTensorInfo([u.length],o,u)},ik={kernelName:a.Range,backendName:"webgl",kernelFunc:ak},ok=bb({opSnippet:"return 1.0 / x;"}),uk={kernelName:a.Reciprocal,backendName:"webgl",kernelFunc:ok},sk=bb({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ck={kernelName:a.Relu,backendName:"webgl",kernelFunc:sk},lk=bb({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),fk={kernelName:a.Relu6,backendName:"webgl",kernelFunc:lk},dk=function e(t,n,r,a,o){Object(_n.a)(this,e),this.variableNames=["A"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},hk=function e(t,n,r,a,o){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(f-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")};var pk={kernelName:a.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size,l=Object(i.a)(c,2),f=l[0],d=l[1],h=Object(a.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new hk(o.shape,f,d,u,s):new dk(o.shape,f,d,u,s);return n.runWebGLProgram(h,[o],"float32")}},vk=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(i.a)(n,3),o=a[1],u=a[2],s=Object(i.a)(t,3),c=s[1],l=s[2],f=[r&&c>1?o-1:o,r&&l>1?u-1:u],d=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=f[0]/d[0],p=f[1]/d[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(u-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var mk={kernelName:a.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new vk(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},gk=function e(t,n,r,a,o){Object(_n.a)(this,e),this.variableNames=["A"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},bk=function e(t,n,r,a,o){Object(_n.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";d=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(f-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")};var yk={kernelName:a.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size,l=Object(i.a)(c,2),f=l[0],d=l[1],h=Object(a.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bk(o.shape,f,d,u,s):new gk(o.shape,f,d,u,s);return n.runWebGLProgram(h,[o],o.dtype)}},wk=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(i.a)(n,3),o=a[1],u=a[2],s=Object(i.a)(t,3),c=s[1],l=s[2],f=[r&&c>1?o-1:o,r&&l>1?u-1:u],d=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=f[0]/d[0],p=f[1]/d[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(f[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(f[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(u,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var xk={kernelName:a.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new wk(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},Ok=function e(t,n){Object(_n.a)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=bm(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},kk=function e(t,n){Object(_n.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Dg("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),u=bm(r);function s(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(u," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",s(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")};var jk={kernelName:a.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.dims,u=i.shape.length,s=a.util.parseAxisParam(o,i.shape);if(0===u)return sb({inputs:{x:i},backend:n});var c=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kk(i.shape,s):new Ok(i.shape,s);return n.runWebGLProgram(c,[i],i.dtype)}},_k=function e(t,n){Object(_n.a)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},Sk={kernelName:a.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,u=n.radians,s=n.fillValue,c=n.center,l=r,f=new _k(o.shape,s),d=a.backend_util.getImageCenter(c,o.shape[1],o.shape[2]),h=Object(i.a)(d,2),p=[[h[0],h[1],Math.sin(u),Math.cos(u)]];return l.runWebGLProgram(f,[o],o.dtype,p)}},Ek=bb({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Ck={kernelName:a.Round,backendName:"webgl",kernelFunc:Ek},Ak=bb({opSnippet:"return inversesqrt(x);",cpuKernelImpl:vg}),Tk={kernelName:a.Rsqrt,backendName:"webgl",kernelFunc:Ak},Nk=function e(t,n,r,a,i,o){Object(_n.a)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var u=bm(i.length),s=bm(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),h=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(s," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(h,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")};var Ik={kernelName:a.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=t.updates,u=r.shape,s=a.backend_util.calculateShapes(o,i,u),c=s.sliceRank,l=s.numUpdates,f=s.sliceSize,d=s.strides,h=s.outputSize,p=[h/f,f];if(0===h)return n.makeTensorInfo(u,i.dtype);var v=Cb({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=Cb({inputs:{x:o},backend:n,attrs:{shape:[l,f]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new Nk(l,c,v.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(b,[m,v,g],m.dtype),w=Cb({inputs:{x:y},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),w}},Dk=function e(t,n,r){var a,i;if(Object(_n.a)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],s=[],c=0;c<n.length;c++)s.push("".concat(o[c])),c<t&&u.push("".concat(o[c]));a=u.join(),i=s.join()}var l=bm(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")};var Rk={kernelName:a.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,i=t.t,o=t.e,u=new Dk(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(u,[r,i,o],Object(a.upcastType)(i.dtype,o.dtype))}},Fk=bb({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(a.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(a.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Mk={kernelName:a.Selu,backendName:"webgl",kernelFunc:Fk},Pk="return 1.0 / (1.0 + exp(-1.0 * x));",Lk=bb({opSnippet:Pk,packedOpSnippet:Pk,cpuKernelImpl:mg}),zk={kernelName:a.Sigmoid,backendName:"webgl",kernelFunc:Lk},Bk=bb({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Uk={kernelName:a.Sign,backendName:"webgl",kernelFunc:Bk},Wk=bb({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Vk={kernelName:a.Sin,backendName:"webgl",kernelFunc:Wk},qk=bb({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),$k={kernelName:a.Sinh,backendName:"webgl",kernelFunc:qk},Hk=bb({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Gk={kernelName:a.Softplus,backendName:"webgl",kernelFunc:Hk},Kk={kernelName:a.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.paddings;a.util.assert(i.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,Object(Tn.a)(u));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var f=[],d=ZO({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),h=a.backend_util.getReshaped(d.shape,o,s,!1),p=a.backend_util.getPermuted(h.length,o.length,!1),v=a.backend_util.getReshapedPermuted(d.shape,o,s,!1),m=Cb({inputs:{x:d},backend:n,attrs:{shape:h}}),g=Lb({inputs:{x:m},backend:n,attrs:{perm:p}}),b=Cb({inputs:{x:g},backend:n,attrs:{shape:v}});return f.push(d),f.push(m),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var Xk={kernelName:a.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,u=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==u.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(u.shape));var s=n.readSync(r.dataId),c=n.readSync(a.dataId),l=n.readSync(o.dataId),f=n.readSync(u.dataId)[0],d=yg(s,r.shape,r.dtype,c,a.dtype,l,f),h=Object(i.a)(d,5),p=h[0],v=h[1],m=h[2],g=h[3],b=h[4];return[n.makeTensorInfo(v,r.dtype,p),n.makeTensorInfo([v[0]],a.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}};var Yk={kernelName:a.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var u=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(o.dataId)),l=wg(s,r.shape,r.dtype,u,c),f=Object(i.a)(l,3),d=f[0],h=f[1],p=f[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};var Jk={kernelName:a.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var u=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(o.dataId),l=xg(u,r.shape,r.dtype,s,c,!0),f=Object(i.a)(l,2),d=f[0],h=f[1];return n.makeTensorInfo(h,r.dtype,d)}};var Qk={kernelName:a.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var u=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(o.dataId),l=xg(u,r.shape,r.dtype,s,c),f=Object(i.a)(l,2),d=f[0],h=f[1];return n.makeTensorInfo(h,r.dtype,d)}};var Zk={kernelName:a.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.sparseIndices,o=t.sparseValues,u=t.defaultValue,s=r.outputShape,c=a.backend_util.calculateShapes(o,i,s),l=c.sliceRank,f=c.numUpdates,d=c.strides,h=c.outputSize,p=new Nk(f,l,i.shape.length,o.shape.length,d,[h,1],!1),v=n.runWebGLProgram(p,[o,i,u],o.dtype),m=Cb({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(v),m}};var ej={kernelName:a.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.numOrSizeSplits,u=r.axis,s=a.util.parseAxisParam(u,i.shape)[0],c=a.backend_util.prepareSplitSize(i,o,s),l=i.shape.length,f=new Array(l).fill(0),d=i.shape.slice();return c.map((function(e){var t=Object(Tn.a)(d);t[s]=e;var r=Ry({inputs:{x:i},backend:n,attrs:{begin:f,size:t}});return f[s]+=e,r}))}},tj="return sqrt(x);",nj=bb({opSnippet:tj,packedOpSnippet:tj,cpuKernelImpl:Og}),rj={kernelName:a.Sqrt,backendName:"webgl",kernelFunc:nj},aj=bb({opSnippet:"return x * x;"}),ij={kernelName:a.Square,backendName:"webgl",kernelFunc:aj},oj="return (a - b) * (a - b);",uj=yb({opSnippet:oj,packedOpSnippet:oj}),sj={kernelName:a.SquaredDifference,backendName:"webgl",kernelFunc:uj};var cj={kernelName:a.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=Ug+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new Bg(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},lj=function e(t,n,r){Object(_n.a)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=bm(r.length),o=bm(r.length),u="";if(1===a)u="coords * strides + begin";else{var s=0;u=r.map((function(e,t){return s++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(s-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(u,"));\n      }\n    ")};var fj={kernelName:a.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=i.begin,s=i.end,c=i.strides,l=i.beginMask,f=i.endMask,d=i.ellipsisMask,h=i.newAxisMask,p=i.shrinkAxisMask,v=a.slice_util.sliceInfo(o.shape,u,s,c,l,f,d,h,p),m=v.nonStrided,g=v.$begin,b=v.$strides,y=v.size,w=v.newShape,x=v.outShape,O=Cb({inputs:{x:o},backend:r,attrs:{shape:w}});if(m){var k=Ry({inputs:{x:O},backend:r,attrs:{begin:g,size:y}});t=Cb({inputs:{x:k},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,o.dtype,[]);else{if(r.shouldExecuteOnCPU([O])){var j=r.texData.get(O.dataId).values,_=Object(a.buffer)(O.shape,O.dtype,j),S=kg(x,_,b,g);t=r.makeTensorInfo(x,O.dtype,S.values)}else{var E=new lj(g,b,x);t=r.runWebGLProgram(E,[O],O.dtype)}}var C=Cb({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(t),C}};var dj={kernelName:a.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,u=r.leftPad,s=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,f=t.data,d=t.dataSplits,h=n.readSync(f.dataId),p=n.readSync(d.dataId),v=jg(h,p,a,o,u,s,c,l),m=Object(i.a)(v,2),g=m[0],b=m[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",b)]}};var hj={kernelName:a.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var u=n.readSync(a.dataId),s=n.readSync(o.dataId)[0],c=_g(u,s,r),l=Object(i.a)(c,3),f=l[0],d=l[1],h=l[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",f),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var pj={kernelName:a.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=Sg(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},vj=bb({opSnippet:"return tan(x);"}),mj={kernelName:a.Tan,backendName:"webgl",kernelFunc:vj},gj=bb({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),bj={kernelName:a.Tanh,backendName:"webgl",kernelFunc:gj},yj=function e(t,n){Object(_n.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=bm(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")};function wj(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.reps;if("string"===i.dtype||i.shape.length>5){var u=n.readSync(i.dataId),s="string"===i.dtype?u.map((function(e){return a.util.decodeString(e)})):u,c=Object(a.buffer)(i.shape,i.dtype,s),l=Cg(c,o);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var f=new yj(i.shape,o);return n.runWebGLProgram(f,[i],i.dtype)}var xj={kernelName:a.Tile,backendName:"webgl",kernelFunc:wj},Oj=function e(t){Object(_n.a)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "},kj=function e(t){Object(_n.a)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "};function jj(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function _j(e){for(var t=1;t<e;)t*=2;return t}var Sj={kernelName:a.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.k,s=r.sorted,c=Object(a.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Object(a.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),f=o.shape,d=f[f.length-1];if(n.shouldExecuteOnCPU([o])||d<c||u>l){var h=n.readSync(o.dataId),p=Ag(h,f,o.dtype,u,s),v=Object(i.a)(p,2),m=v[0],g=v[1];return[n.makeTensorInfo(m.shape,m.dtype,m.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}if(0===u)return f[f.length-1]=0,[n.makeTensorInfo(f,o.dtype,[]),n.makeTensorInfo(f,"int32",[])];if(1===d)return[o,fx({attrs:{shape:f,dtype:"int32",value:0},backend:n})];var b=n.texData.get(o.dataId),y=null!==b&&b.isPacked,w=y?n.unpackTensor(o):o,x=a.util.sizeFromShape(f)/d,O=Cb({inputs:{x:w},attrs:{shape:[x,d]},backend:n});y&&jj(n,w);for(var k=_j(u),j=_j(d),_=null,S=function(){return null===_?[O,O]:[O,_]},E=function(e,t,r){var a=S(),i=new Oj(r),o=[[d],[null===_?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],u=_;_=n.runWebGLProgram(i,a,"int32",o),jj(n,u)},C=1;C<k;C*=2)for(var A=2*C,T=C;T>=1;T/=2)E(A,T,[x,j]);for(var N=j;N>k;N/=2){var I=S(),D=new kj([x,N/2]),R=[[d],[null===_?1:0],[k]],F=_;_=n.runWebGLProgram(D,I,"int32",R),jj(n,F);for(var M=k/2,P=2*M,L=M;L>=1;L/=2)E(P,L,_.shape)}var z=_;_=Ry({inputs:{x:_},backend:n,attrs:{begin:0,size:[x,u]}}),jj(n,z);var B=Ax({inputs:{x:O,indices:_},backend:n,attrs:{axis:1,batchDims:1}});jj(n,O);var U=f.slice(0,-1);U.push(u),z=_,_=Cb({inputs:{x:_},attrs:{shape:U},backend:n}),jj(n,z);var W=B;return B=Cb({inputs:{x:B},attrs:{shape:U},backend:n}),jj(n,W),[B,_]}},Ej=function e(t,n,r,a,i,o){Object(_n.a)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var u,s="nearest"===r?1:2;switch(a){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(u," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")};var Cj={kernelName:a.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,u=r.interpolation,s=r.fillMode,c=r.fillValue,l=r.outputShape,f=Object(i.a)(a.shape,4),d=f[0],h=f[1],p=f[2],v=f[3],m=null!=l?l:[h,p],g=Object(i.a)(m,2),b=g[0],y=g[1],w=new Ej(h,p,u,s,c,[d,b,y,v]);return n.runWebGLProgram(w,[a,o],"float32")}};var Aj={kernelName:a.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;$v(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),u=Ng(o,a,i.shape,i.dtype),s=u.outputValues,c=u.outputShape,l=u.indices;return[r.makeTensorInfo(c,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var Tj={kernelName:a.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,u=o.shape.length,s=a.shape[i],c=new Array(u-1),l=0,f=0;f<u;f++)f!==i&&(c[l++]=o.shape[f]);var d=[],h=new Array(u).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(s),m=0;m<v.length;m++){h[i]=m;var g=Ry({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),b=Cb({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=b,d.push(g)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},Nj=function e(t,n){Object(_n.a)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,u=o*Math.ceil(i/r);this.outputShape=[a,u];var s=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")};for(var Ij=0,Dj=[iO,uO,Ub,Vb,$b,Gb,Yb,Zb,ey,ty,uy,sy,ly,dy,my,py,by,Oy,xy,_y,Sy,Ey,Ty,My,Py,Wy,$y,Ky,Jy,fb,iw,mw,gw,fw,yw,ww,bw,Ow,jw,Sw,Tw,Nw,Dw,zw,Bw,Mw,Ww,qw,$w,Gw,Kw,Yw,Qw,tx,rx,ox,cx,hx,vx,bx,wx,kx,jx,_x,Ex,Tx,Ix,Rx,cb,Fx,nw,Px,zx,Ux,pb,Vx,$x,Hx,Yx,Kx,Qx,eO,nO,cO,hO,dO,mO,gO,bO,fO,yO,wO,OO,_O,EO,MO,Eb,LO,BO,WO,qO,zy,HO,XO,YO,ek,nk,gb,rk,ik,Uy,TO,uk,fk,ck,Ab,pk,mk,yk,xk,jk,Sk,Ck,Tk,Ik,Rk,Mk,zk,Uk,Vk,$k,Fy,FO,Gk,Kk,Xk,Yk,Jk,Qk,Zk,ej,rj,ij,sj,cj,fj,dj,hj,pj,DO,Pb,mj,bj,xj,Sj,Cj,zb,Aj,Tj,{kernelName:a.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.segmentIds,u=r.numSegments,s=i.shape.length,c=[],l=0,f=a.backend_util.getAxesPermutation([l],s),d=i;null!=f&&(d=Lb({inputs:{x:i},backend:n,attrs:{perm:f}}),c.push(d),l=a.backend_util.getInnerMostAxes(1,s)[0]);var h=a.backend_util.segment_util.computeOutShape(d.shape,l,u),p=a.util.sizeFromShape([d.shape[l]]),v=Cb({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});c.push(v);var m=Cb({inputs:{x:function e(t,r,i,o,u){var s=t.shape[0],l=t.shape[1],f=a.backend_util.segment_util.segOpComputeOptimalWindowSize(l,u),d=new Nj({windowSize:f,inSize:l,batchSize:s,numSegments:u},r),h=n.compileAndRun(d,[t,i],o);if(c.push(h),h.shape[1]===u)return h;var p=ak({backend:n,attrs:{start:0,stop:u,step:1,dtype:"float32"}}),v=wj({inputs:{x:p},backend:n,attrs:{reps:[l/f]}});return c.push(p),c.push(v),e(h,r,v,o,u)}(v,"unsortedSegmentSum",o,Object(a.sumOutType)(i.dtype),u)},backend:n,attrs:{shape:h}}),g=m;if(null!=f){c.push(m);var b=a.backend_util.getUndoAxesPermutation(f);g=Lb({inputs:{x:g},backend:n,attrs:{perm:b}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},KO];Ij<Dj.length;Ij++){var Rj=Dj[Ij];Object(a.registerKernel)(Rj)}a.version_core},,,,,function(e,t,n){var r=n(542),a=n(543),i=n(324),o=n(544);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()}},function(e,t){var n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},function(e,t,n){(function(t){var n="object"===typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG)?function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["SEMVER"].concat(n))}:function(){};e.exports=n}).call(this,n(175))},function(e,t){var n=["includePrerelease","loose","rtl"];e.exports=function(e){return e?"object"!==typeof e?{loose:!0}:n.filter((function(t){return e[t]})).reduce((function(e,t){return e[t]=!0,e}),{}):{}}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return r(e,t,n)>0}},function(e,t,n){var r=n(143),a=n(144),i=Symbol("SemVer ANY"),o=function(){"use strict";function e(t,n){if(r(this,e),n=u(n),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}d("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===i?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}return a(e,[{key:"parse",value:function(e){var t=this.options.loose?c[l.COMPARATORLOOSE]:c[l.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=i}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(d("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"===typeof e)try{e=new h(e,this.options)}catch(t){return!1}return f(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");if(n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new p(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new p(this.value,n).test(t.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),a=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),i=this.semver.version===t.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),u=f(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),s=f(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||a||i&&o||u||s}}],[{key:"ANY",get:function(){return i}}]),e}();e.exports=o;var u=n(243),s=n(176),c=s.re,l=s.t,f=n(398),d=n(242),h=n(87),p=n(116)},function(e,t,n){var r=n(116);e.exports=function(e,t,n){try{t=new r(t,n)}catch(a){return!1}return t.test(e)}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function a(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=r,t.assertShapesMatch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(a(e,t),n+" Shapes ".concat(e," and ").concat(t," must match"))},t.arraysEqual=a,t.DECIMAL_PLACES_TO_CHECK=4},function(e,t,n){"use strict";var r=n(2),a=n(240),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),u=n(247);t.arrayStats=function(e){if(!Array.isArray(e))throw new Error("input must be an array");if(0===e.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};for(var t=e.length,n=-1/0,r=1/0,a=0,i=0,o=0,u=0;u<t;u++){var s=e[u];s>n&&(n=s),s<r&&(r=s),0===s&&(a+=1),isNaN(s)?i+=1:isFinite(s)||(o+=1)}var c={numVals:t,numZeros:a,numNans:i,max:n,min:r,numInfs:o};return c.max===-1/0&&(c.max=NaN),c.min===1/0&&(c.min=NaN),c},t.tensorStats=function(e){return i(this,void 0,void 0,r.mark((function t(){var n,i,u,s,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.tidy((function(){var t=o.scalar(0,e.dtype);return[e.min(),e.max(),e.equal(t).sum()]})),i=a(n,3),u=i[0],s=i[1],c=i[2],t.abrupt("return",Promise.all([e.data(),u.data(),s.data(),c.data()]).then((function(e){for(var t=a(e,4),n=t[0],r=t[1],i=t[2],o=t[3],u=n.length,s=0,c=0,l=0;l<u;l++){var f=n[l];isNaN(f)?s+=1:isFinite(f)||(c+=1)}var d=r[0],h=i[0];return s===u&&(d=NaN,h=NaN),{numVals:u,numZeros:o[0],numNans:s,min:d,max:h,numInfs:c}})));case 2:case"end":return t.stop()}}),t)})))},t.confusionMatrix=function(e,t,n,s){return i(this,void 0,void 0,r.mark((function i(){var c,l,f;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null!=s&&u.assert(s.size===t.size,"labels and predictions must be the same length"),c=e.cast("int32"),l=t.cast("int32"),null==n&&(n=o.tidy((function(){return o.maximum(c.max(),l.max()).cast("int32").dataSync()[0]+1}))),f=Promise.resolve(null),null!=s&&(f=s.data()),r.abrupt("return",Promise.all([c.data(),l.data(),f]).then((function(e){for(var t=a(e,3),r=t[0],i=t[1],o=t[2],u=Array(n).fill(0),s=0;s<n;s++)u[s]=Array(n).fill(0);for(var c=0;c<r.length;c++){var l=r[c],f=i[c];u[l][f]+=null!=o?o[c]:1}return u})));case 10:case"end":return r.stop()}}),i)})))},t.accuracy=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var a,i,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.assertShapesMatch(e.shape,t.shape,"Error computing accuracy."),a=e.equal(t),i=a.mean(),n.next=5,i.data();case 5:return s=n.sent[0],o.dispose([a,i]),n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})))},t.perClassAccuracy=function(e,t,n){return i(this,void 0,void 0,r.mark((function i(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null==n&&(n=o.tidy((function(){return o.maximum(e.max(),t.max()).dataSync()[0]+1}))),r.abrupt("return",Promise.all([e.data(),t.data()]).then((function(e){for(var t=a(e,2),r=t[0],i=t[1],o=Array(n).fill(0),u=Array(n).fill(0),s=0;s<r.length;s++){var c=r[s],l=i[s];o[c]+=1,c===l&&(u[c]+=1)}for(var f=[],d=0;d<o.length;d++)f.push({count:o[d],accuracy:0===o[d]?0:u[d]/o[d]});return f})));case 5:case"end":return r.stop()}}),i)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(119),a=n(682),i=n(219),o=n(117);t.table=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&null==t.headers)throw new Error('Data to render must have a "headers" property');if(t&&null==t.values)throw new Error('Data to render must have a "values" property');var s=o.getDrawArea(e),c=Object.assign({},u,n),l=a.select(s).select("table.tf-table"),f=i.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&((l=a.select(s).append("table")).attr("class"," ".concat(f," tf-table")),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");var d=i.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),h=l.select("thead").select("tr").selectAll("th").data(t.headers),p=h.enter().append("th").attr("class","".concat(d));h.merge(p).html((function(e){return e})),h.exit().remove();var v=r.format(",.4~f"),m=l.select("tbody").selectAll("tr").data(t.values),g=m.enter().append("tr"),b=i.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),y=m.merge(g).selectAll("td").data((function(e){return e})),w=y.enter().append("td").attr("class","".concat(b));y.merge(w).html((function(e){return"number"===typeof e?v(e):e})),y.exit().remove(),m.exit().remove()};var u={fontSize:14}},function(e,t,n){"use strict";function r(e){if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function a(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(t),n.d(t,"isMobile",(function(){return r})),n.d(t,"isBrowser",(function(){return a}))},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","all","bool"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.f,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","any","bool"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.g,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMax"),o={x:n},u={axis:t};return r.a.runKernel(a.h,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMin"),o={x:n},u={axis:t};return r.a.runKernel(a.i,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({atan2_:function(e,t){var n=Object(u.a)(e,"a","atan2"),s=Object(u.a)(t,"b","atan2"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.m,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({bincount_:function(e,t,n){var u=Object(i.a)(e,"x","bincount"),s=Object(i.a)(t,"weights","bincount");o.b("int32"===u.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(s.size===u.size||0===s.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(u.shape,", weights shape: ")+"".concat(s.shape,".")}));var c={x:u,weights:s},l={size:n};return r.a.runKernel(a.u,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(20),i=n(107),o=n(56),u=n(12),s=n(19);var c=Object(u.b)({conv1d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,f=arguments.length>6?arguments[6]:void 0,d=Object(r.a)(e,"x","conv1d"),h=Object(r.a)(t,"filter","conv1d"),p=d,v=!1;2===d.rank&&(v=!0,p=Object(s.a)(d,[1,d.shape[0],d.shape[1]])),a.b(3===p.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(p.rank,".")})),a.b(3===h.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(h.rank,".")})),null!=f&&a.b(a.v(u),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")})),a.b(p.shape[2]===h.shape[1],(function(){return"Error in conv1d: depth of input (".concat(p.shape[2],") must match ")+"input depth for filter ".concat(h.shape[1],".")})),a.b(o.h(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.b("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var m=Object(s.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),g=Object(s.a)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),b=[1,n],y=[1,l],w="NHWC",x=Object(i.a)(g,m,b,u,w,y,f);return v?Object(s.a)(x,[x.shape[2],x.shape[3]]):Object(s.a)(x,[x.shape[0],x.shape[2],x.shape[3]])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(206),i=n(12);var o=Object(i.b)({conv2dTranspose_:function(e,t,n,i,o,u){var s=Object(r.a)(e,"x","conv2dTranspose"),c=Object(r.a)(t,"filter","conv2dTranspose");return Object(a.a)(n,s,c,i,o,"NHWC",u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({cosh_:function(e){var t={x:Object(i.a)(e,"x","cosh")};return r.a.runKernel(a.K,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",u=Object(i.a)(e,"x","depthToSpace"),s="NHWC"===n?u.shape[1]:u.shape[2],c="NHWC"===n?u.shape[2]:u.shape[3],l="NHWC"===n?u.shape[3]:u.shape[1];o.b(s*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(s," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(u.shape)})),o.b(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(u.shape)})),o.b(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(u.shape)}));var f={x:u},d={blockSize:t,dataFormat:n};return r.a.runKernel(a.O,f,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12),s=n(19);var c=Object(u.b)({dilation2d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=Object(i.a)(e,"x","dilation2d"),d=Object(i.a)(t,"filter","dilation2d");o.b(3===f.rank||4===f.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(f.rank,".")})),o.b(3===d.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.b("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var h=f,p=!1;3===f.rank&&(h=Object(s.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),p=!0);var v={x:h,filter:d},m={strides:n,pad:u,dilations:c},g=r.a.runKernel(a.T,v,m);return p?Object(s.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),a=n(44),i=n(7),o=n(32),u=n(151),s=n(12),c=n(62),l=n(41);var f=Object(s.b)({divNoNan_:function(e,t){var n=Object(i.a)(e,"a","div"),s=Object(i.a)(t,"b","div"),f=Object(a.makeTypesMatch)(n,s),d=Object(r.a)(f,2);n=d[0],s=d[1];var h=Object(o.a)(n,s),p=Object(l.a)(h),v=Object(u.a)(s,p);return Object(c.a)(v,p,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),a=n(20),i=n(46),o=n(12),u=n(19);var s=Object(o.b)({dot_:function(e,t){var n=Object(r.a)(e,"t1","dot"),o=Object(r.a)(t,"t2","dot");a.b((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var s=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(a.b(s===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(s," and ").concat(c,".")})),1===n.rank&&1===o.rank){var l=Object(u.a)(n,[1,-1]),f=Object(u.a)(o,[-1,1]),d=Object(i.a)(l,f);return Object(u.a)(d,[])}if(1===n.rank&&2===o.rank){var h=Object(u.a)(n,[1,-1]),p=Object(u.a)(o,[o.shape[0],o.shape[1]]),v=Object(i.a)(h,p);return Object(u.a)(v,[v.size])}if(2===n.rank&&1===o.rank){var m=Object(u.a)(o,[-1,1]),g=Object(i.a)(n,m);return Object(u.a)(g,[g.size])}var b=Object(u.a)(o,[o.shape[0],o.shape[1]]);return Object(i.a)(n,b)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12),s=n(19);var c=Object(u.b)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=Object(i.a)(e,"x","localResponseNormalization");o.b(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.b(o.v(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(s.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var h={x:f},p={depthRadius:t,bias:n,alpha:u,beta:c},v=r.a.runKernel(a.xb,h,p);return d?Object(s.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({log1p_:function(e){var t={x:Object(i.a)(e,"x","log1p")};return r.a.runKernel(a.Eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({softplus_:function(e){var t={x:Object(i.a)(e,"x","softplus")};return r.a.runKernel(a.Ic,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(37),i=n(100),o=n(153),u=n(191),s=n(12);var c=Object(s.b)({logicalXor_:function(e,t){var n=Object(r.a)(e,"a","logicalXor","bool"),s=Object(r.a)(t,"b","logicalXor","bool");return Object(a.a)(n.shape,s.shape),Object(i.a)(Object(u.a)(e,t),Object(o.a)(Object(i.a)(e,t)))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({mirrorPad_:function(e,t,n){o.b("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var u=Object(i.a)(e,"x","mirrorPad");if(0===u.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.b(t.length===u.rank,(function(){return"Padding doesn't match input. Must be ".concat(u.rank,". ")+"Got ".concat(t.length,".")}));for(var s="reflect"===n?1:0,c=function(e){o.b(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.b(t[e][0]>=0&&t[e][0]<=u.shape[e]-s&&t[e][1]>=0&&t[e][1]<=u.shape[e]-s,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(u.shape[e]-s," or less than 0 for input of ")+"shape ".concat(u.shape)}))},l=0;l<u.rank;l++)c(l);var f={paddings:t,mode:n},d={x:u};return r.a.runKernel(a.Tb,d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(44),u=n(7),s=n(12);var c=Object(s.b)({mod_:function(e,t){var n=Object(u.a)(e,"a","mod"),s=Object(u.a)(t,"b","mod"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Ub,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(4),a=n(7),i=n(20),o=n(182),u=n(149),s=n(56),c=n(192),l=n(12),f=n(19),d=n(154);var h=Object(l.b)({pool_:function(e,t,n,l,h,p){null==h&&(h=[1,1]),null==p&&(p=1),0===l&&(l="valid");var v=Object(a.a)(e,"x","maxPool"),m=v,g=!1;3===v.rank&&(g=!0,m=Object(f.a)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),i.b(s.h(p,h),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(p," and dilations '").concat(h,"'")}));var b,y=s.e(m.shape,t,p,h,l),w=[y.dilationHeight,y.dilationWidth];b="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([y.filterHeight,y.filterWidth],w):[[0,0],[0,0]];var x=1===w[0]&&1===w[1],O=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),u=a.map((function(e,t){return e+o[t]})),s=t.map((function(e,t){return[r[t],u[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[s,c]}([y.inHeight,y.inWidth],w,b),k=Object(r.a)(O,2),j=k[0],_=k[1],S=x?l:"valid",E=x?m:Object(d.a)(m,w,j),C=("avg"===n?function(){return Object(o.a)(E,t,p,S)}:function(){return Object(c.a)(E,t,p,S)})(),A=x?C:Object(u.a)(C,w,_);return g?Object(f.a)(A,[A.shape[1],A.shape[2],A.shape[3]]):A}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(27),u=n(12);var s=Object(u.b)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=Object(i.a)(e,"x","prod");"bool"===u.dtype&&(u=Object(o.a)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.a.runKernel(a.jc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(81),a=n(12),i=n(160);var o=Object(a.b)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0,u=Object(r.a)(e,a),s=new i.c(t,n,null,o),c=0;c<u.values.length;c++)u.values[c]=s.nextValue();return u.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({round_:function(e){var t={x:Object(i.a)(e,"x","round")};return r.a.runKernel(a.xc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({rsqrt_:function(e){var t={x:Object(i.a)(e,"x","rsqrt")};return r.a.runKernel(a.yc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({selu_:function(e){var t={x:Object(i.a)(e,"x","selu")};return r.a.runKernel(a.Bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(20),i=n(107),o=n(150),u=n(12),s=n(19);var c=Object(u.b)({separableConv2d_:function(e,t,n,u,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",d=Object(r.a)(e,"x","separableConv2d"),h=Object(r.a)(t,"depthwiseFilter","separableConv2d"),p=Object(r.a)(n,"pointwiseFilter","separableConv2d"),v=d,m=!1;if(3===d.rank&&(m=!0,v=Object(s.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.b(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.b(4===h.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(h.rank,".")})),a.b(4===p.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(h.rank,".")})),a.b(1===p.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(p.shape[0],".")})),a.b(1===p.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(p.shape[1],".")}));var g=h.shape[2],b=h.shape[3];a.b(p.shape[2]===g*b,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(g*b,", ")+"but got ".concat(p.shape[2],".")}));var y=Object(o.a)(v,h,u,c,f,l),w=1,x=Object(i.a)(y,p,w,"valid",f);return m?Object(s.a)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({sin_:function(e){var t={x:Object(i.a)(e,"x","sin")};return r.a.runKernel(a.Ec,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({sinh_:function(e){var t={x:Object(i.a)(e,"x","sinh")};return r.a.runKernel(a.Fc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(99),a=n(59),i=n(187),o=n(22),u=n(12),s=n(169),c=n(19),l=n(82),f=n(36),d=n(49),h=n(170);var p=Object(u.b)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],u=e.size/n;if(n<=2){var p=Object(c.a)(e,[u,n]);t=Object(h.a)(p)}else{var v=[u,2*(n-1)],m=Object(c.a)(Object(s.a)(e),[u,n]),g=Object(c.a)(Object(i.a)(e),[u,n]),b=Object(l.a)(Object(d.a)(m,[0,1],[u,n-2]),1),y=Object(o.a)(Object(l.a)(Object(d.a)(g,[0,1],[u,n-2]),1),Object(f.a)(-1)),w=Object(a.a)([m,b],1),x=Object(a.a)([g,y],1),O=Object(c.a)(Object(r.a)(w,x),[v[0],v[1]]);t=Object(h.a)(O)}if(t=Object(s.a)(t),3===e.rank&&0!==e.shape[0]){var k=t,j=e.shape[0];t=Object(c.a)(t,[j,t.shape[0]/j,t.shape[1]]),k.dispose()}return t}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(20),i=n(84);function o(e,t,n){if(Object(a.d)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=Object(r.c)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(i.a)(e,t,o,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(13),i=n(8),o=n(7),u=n(12);var s=Object(u.b)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=Object(o.a)(e,"x","topk");if(0===u.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var s=u.shape[u.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(s,") ")+"but got ".concat(t));var c={x:u},l={k:t,sorted:n},f=a.a.runKernel(i.dd,c,l),d=Object(r.a)(f,2),h=d[0],p=d[1];return{values:h,indices:p}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(13),i=n(8),o=n(7),u=n(20),s=n(12);var c=Object(s.b)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(o.a)(e,"x","unique","string_or_numeric");Object(u.b)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var s={x:n},c={axis:t},l=a.a.runKernel(i.gd,s,c),f=Object(r.a)(l,2),d=f[0],h=f[1];return{values:d,indices:h}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n.n(r),i=n(15),o=n(285),u=n(7);function s(){return(s=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,i=Object(o.a)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e){return s.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(81);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=Object(r.a)(e,"int32"),o=Object(r.a)([n.length,e.length],"int32"),u=0;u<n.length;u++){var s=i.indexToLoc(n[u]),c=u*e.length;o.values.set(s,c)}return o.toTensor()}},function(e,t,n){"use strict";var r=n(202);t.a=function(e){var t=e.length;return function(n){var a=Math.floor(((n%=1)<0?++n:n)*t),i=e[(a+t-1)%t],o=e[a%t],u=e[(a+1)%t],s=e[(a+2)%t];return Object(r.a)((n-a/t)*t,i,o,u,s)}}},function(e,t,n){"use strict";var r=n(95),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i=new RegExp(a.source,"g");t.a=function(e,t){var n,o,u,s=a.lastIndex=i.lastIndex=0,c=-1,l=[],f=[];for(e+="",t+="";(n=a.exec(e))&&(o=i.exec(t));)(u=o.index)>s&&(u=t.slice(s,u),l[c]?l[c]+=u:l[++c]=u),(n=n[0])===(o=o[0])?l[c]?l[c]+=o:l[++c]=o:(l[++c]=null,f.push({i:c,x:Object(r.a)(n,o)})),s=i.lastIndex;return s<t.length&&(u=t.slice(s),l[c]?l[c]+=u:l[++c]=u),l.length<2?f[0]?function(e){return function(t){return e(t)+""}}(f[0].x):function(e){return function(){return e}}(t):(t=f.length,function(e){for(var n,r=0;r<t;++r)l[(n=f[r]).i]=n.x(e);return l.join("")})}},function(e,t,n){"use strict";t.a=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(156),a=n(162);function i(e,t){var n,a=t?t.length:0,i=e?Math.min(a,e.length):0,o=new Array(i),u=new Array(a);for(n=0;n<i;++n)o[n]=Object(r.a)(e[n],t[n]);for(;n<a;++n)u[n]=t[n];return function(e){for(n=0;n<i;++n)u[n]=o[n](e);return u}}t.a=function(e,t){return(Object(a.b)(t)?a.a:i)(e,t)}},function(e,t,n){"use strict";var r=n(156);t.a=function(e,t){var n,a={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?a[n]=Object(r.a)(e[n],t[n]):i[n]=t[n];return function(e){for(n in a)i[n]=a[n](e);return i}}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5);function a(){return Object(r.useState)(null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5);function a(){var e=Object(r.useRef)(!0),t=Object(r.useRef)((function(){return e.current}));return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),t.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5);function a(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current=e})),t.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(225),n(5),n(171);function r(e,t){return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(33),a=n.n(r),i=n(5),o=n.n(i),u=n(205),s=function(){};function c(){var e=Object(i.useContext)(u.a)||{},t=e.show,n=void 0!==t&&t,r=e.toggle,a=void 0===r?s:r,o=e.setToggle,c=Object(i.useCallback)((function(e){a(!n,e)}),[n,a]);return[{ref:o||s,onClick:c,"aria-haspopup":!0,"aria-expanded":!!n},{show:n,toggle:a}]}var l={children:a.a.func.isRequired};function f(e){var t=e.children,n=c(),r=n[0],a=n[1];return o.a.createElement(o.a.Fragment,null,t(r,a))}f.displayName="ReactOverlaysDropdownToggle",f.propTypes=l,t.a=f},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(53),o=n.n(i),u=(n(546),n(5)),s=n.n(u),c=n(299),l=n(171),f=n(427),d=n(57),h=n(298),p=["bsPrefix","split","className","childBsPrefix","as"],v=s.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.split,u=e.className,v=e.childBsPrefix,m=e.as,g=void 0===m?f.a:m,b=Object(a.a)(e,p),y=Object(d.a)(n,"dropdown-toggle");void 0!==v&&(b.bsPrefix=v);var w=Object(c.b)()[0];return w.ref=Object(l.a)(w.ref,Object(h.a)(t,"DropdownToggle")),s.a.createElement(g,Object(r.a)({className:o()(u,y,i&&y+"-split")},w,b))}));v.displayName="DropdownToggle",t.a=v},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(20),o=n(12),u=n(19);var s=Object(o.b)({conv3DBackpropInput_:function(e,t,n,o,s){i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,f=!1;4===t.rank&&(f=!0,l=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=[1,e[0],e[1],e[2],e[3]]);var d=c[4],h=l.shape[4];i.b(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),i.b(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.b(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.b(d===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(d,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.b(h===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:l,filter:n},v={pad:s,strides:o,inputShape:c},m=r.a.runKernel(a.I,p,v);return f?Object(u.a)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(208),a=n(13),i=n(8),o=n(7),u=n(20),s=n(12),c=n(19);var l=Object(s.b)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeNearestNeighbor");u.b(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.b(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),u.b("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),u.b(!1===s||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var h={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.a.runKernel(i.tc,h,p);return d?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(208),a=n(13),i=n(8),o=n(7),u=n(20),s=n(12),c=n(19);var l=Object(s.b)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeBilinear");u.b(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.b(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),u.b(!1===s||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var h={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.a.runKernel(i.rc,h,p);return d?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(12),o=n(19);var u=Object(i.b)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,f=!1;3===t.rank&&(f=!0,l=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:l,filter:n},h={strides:i,pad:u,dimRoundingMode:c,dilations:s,inputShape:e},p=r.a.runKernel(a.R,d,h);return f?Object(o.a)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(12),o=n(19);var u=Object(i.b)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=Object(o.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f=t;3===f.rank&&(f=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:l,dy:f},h={strides:i,pad:u,dimRoundingMode:c,dilations:s,filterShape:n};return r.a.runKernel(a.Q,d,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(203),a=n(294);function i(e,t,n){return(i=Object(a.a)()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&Object(r.a)(i,n.prototype),i}).apply(null,arguments)}},function(e,t,n){var r=n(571),a=n(572),i=n(573),o=n(574),u=n(575),s=n(576),c=n(577);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(14),a=n(1);function i(t,n){var i,o=n&&n.property?Object(a.u)(n.property):a.y;return!Object(a.H)(t)||(i=t,"function"===typeof e&&Object(a.E)(e.isBuffer)&&e.isBuffer(i))?o(JSON.parse(t)):function(e,t){!Object(a.B)(e)&&Object(a.F)(e)&&(e=Object(r.a)(e));return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(o(t),n)}i.responseType="json"}).call(this,n(218).Buffer)},function(e,t,n){"use strict";n.d(t,"b",(function(){return Xe}));var r=n(45),a=n(29),i=n(33),o=n.n(i),u=n(5),s=n.n(u),c=n(295),l=n(205),f=n(296);var d=function(e){var t=Object(f.a)();return[e[0],Object(u.useCallback)((function(n){if(t())return e[1](n)}),[t,e[1]])]};function h(e){return e.split("-")[0]}function p(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function v(e){return e instanceof p(e).Element||e instanceof Element}function m(e){return e instanceof p(e).HTMLElement||e instanceof HTMLElement}function g(e){return"undefined"!==typeof ShadowRoot&&(e instanceof p(e).ShadowRoot||e instanceof ShadowRoot)}var b=Math.round;function y(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;return m(e)&&t&&(r=n.width/e.offsetWidth||1,a=n.height/e.offsetHeight||1),{width:b(n.width/r),height:b(n.height/a),top:b(n.top/a),right:b(n.right/r),bottom:b(n.bottom/a),left:b(n.left/r),x:b(n.left/r),y:b(n.top/a)}}function w(e){var t=y(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function x(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&g(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function O(e){return e?(e.nodeName||"").toLowerCase():null}function k(e){return p(e).getComputedStyle(e)}function j(e){return["table","td","th"].indexOf(O(e))>=0}function _(e){return((v(e)?e.ownerDocument:e.document)||window.document).documentElement}function S(e){return"html"===O(e)?e:e.assignedSlot||e.parentNode||(g(e)?e.host:null)||_(e)}function E(e){return m(e)&&"fixed"!==k(e).position?e.offsetParent:null}function C(e){for(var t=p(e),n=E(e);n&&j(n)&&"static"===k(n).position;)n=E(n);return n&&("html"===O(n)||"body"===O(n)&&"static"===k(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&m(e)&&"fixed"===k(e).position)return null;for(var n=S(e);m(n)&&["html","body"].indexOf(O(n))<0;){var r=k(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function A(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var T=Math.max,N=Math.min,I=Math.round;function D(e,t,n){return T(e,N(t,n))}function R(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function F(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var M="top",P="bottom",L="right",z="left",B="auto",U=[M,P,L,z],W="start",V="end",q="viewport",$="popper",H=U.reduce((function(e,t){return e.concat([t+"-"+W,t+"-"+V])}),[]),G=[].concat(U,[B]).reduce((function(e,t){return e.concat([t,t+"-"+W,t+"-"+V])}),[]),K=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var X={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,u=h(n.placement),s=A(u),c=[z,L].indexOf(u)>=0?"height":"width";if(i&&o){var l=function(e,t){return R("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:F(e,U))}(a.padding,n),f=w(i),d="y"===s?M:z,p="y"===s?P:L,v=n.rects.reference[c]+n.rects.reference[s]-o[s]-n.rects.popper[c],m=o[s]-n.rects.reference[s],g=C(i),b=g?"y"===s?g.clientHeight||0:g.clientWidth||0:0,y=v/2-m/2,x=l[d],O=b-f[c]-l[p],k=b/2-f[c]/2+y,j=D(x,k,O),_=s;n.modifiersData[r]=((t={})[_]=j,t.centerOffset=j-k,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&x(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},Y={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(e){var t,n=e.popper,r=e.popperRect,a=e.placement,i=e.offsets,o=e.position,u=e.gpuAcceleration,s=e.adaptive,c=e.roundOffsets,l=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:I(I(t*r)/r)||0,y:I(I(n*r)/r)||0}}(i):"function"===typeof c?c(i):i,f=l.x,d=void 0===f?0:f,h=l.y,v=void 0===h?0:h,m=i.hasOwnProperty("x"),g=i.hasOwnProperty("y"),b=z,y=M,w=window;if(s){var x=C(n),O="clientHeight",j="clientWidth";x===p(n)&&"static"!==k(x=_(n)).position&&(O="scrollHeight",j="scrollWidth"),x=x,a===M&&(y=P,v-=x[O]-r.height,v*=u?1:-1),a===z&&(b=L,d-=x[j]-r.width,d*=u?1:-1)}var S,E=Object.assign({position:o},s&&Y);return u?Object.assign({},E,((S={})[y]=g?"0":"",S[b]=m?"0":"",S.transform=(w.devicePixelRatio||1)<2?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",S)):Object.assign({},E,((t={})[y]=g?v+"px":"",t[b]=m?d+"px":"",t.transform="",t))}var Q={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,i=n.adaptive,o=void 0===i||i,u=n.roundOffsets,s=void 0===u||u,c={placement:h(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,J(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,J(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Z={passive:!0};var ee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,i=void 0===a||a,o=r.resize,u=void 0===o||o,s=p(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,Z)})),u&&s.addEventListener("resize",n.update,Z),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Z)})),u&&s.removeEventListener("resize",n.update,Z)}},data:{}},te={left:"right",right:"left",bottom:"top",top:"bottom"};function ne(e){return e.replace(/left|right|bottom|top/g,(function(e){return te[e]}))}var re={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return re[e]}))}function ie(e){var t=p(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function oe(e){return y(_(e)).left+ie(e).scrollLeft}function ue(e){var t=k(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function se(e){return["html","body","#document"].indexOf(O(e))>=0?e.ownerDocument.body:m(e)&&ue(e)?e:se(S(e))}function ce(e,t){var n;void 0===t&&(t=[]);var r=se(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),i=p(r),o=a?[i].concat(i.visualViewport||[],ue(r)?r:[]):r,u=t.concat(o);return a?u:u.concat(ce(S(o)))}function le(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fe(e,t){return t===q?le(function(e){var t=p(e),n=_(e),r=t.visualViewport,a=n.clientWidth,i=n.clientHeight,o=0,u=0;return r&&(a=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,u=r.offsetTop)),{width:a,height:i,x:o+oe(e),y:u}}(e)):m(t)?function(e){var t=y(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):le(function(e){var t,n=_(e),r=ie(e),a=null==(t=e.ownerDocument)?void 0:t.body,i=T(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=T(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),u=-r.scrollLeft+oe(e),s=-r.scrollTop;return"rtl"===k(a||n).direction&&(u+=T(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:u,y:s}}(_(e)))}function de(e,t,n){var r="clippingParents"===t?function(e){var t=ce(S(e)),n=["absolute","fixed"].indexOf(k(e).position)>=0&&m(e)?C(e):e;return v(n)?t.filter((function(e){return v(e)&&x(e,n)&&"body"!==O(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),i=a[0],o=a.reduce((function(t,n){var r=fe(e,n);return t.top=T(r.top,t.top),t.right=N(r.right,t.right),t.bottom=N(r.bottom,t.bottom),t.left=T(r.left,t.left),t}),fe(e,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function he(e){return e.split("-")[1]}function pe(e){var t,n=e.reference,r=e.element,a=e.placement,i=a?h(a):null,o=a?he(a):null,u=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2;switch(i){case M:t={x:u,y:n.y-r.height};break;case P:t={x:u,y:n.y+n.height};break;case L:t={x:n.x+n.width,y:s};break;case z:t={x:n.x-r.width,y:s};break;default:t={x:n.x,y:n.y}}var c=i?A(i):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case W:t[c]=t[c]-(n[l]/2-r[l]/2);break;case V:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}function ve(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,i=n.boundary,o=void 0===i?"clippingParents":i,u=n.rootBoundary,s=void 0===u?q:u,c=n.elementContext,l=void 0===c?$:c,f=n.altBoundary,d=void 0!==f&&f,h=n.padding,p=void 0===h?0:h,m=R("number"!==typeof p?p:F(p,U)),g=l===$?"reference":$,b=e.elements.reference,w=e.rects.popper,x=e.elements[d?g:l],O=de(v(x)?x:x.contextElement||_(e.elements.popper),o,s),k=y(b),j=pe({reference:k,element:w,strategy:"absolute",placement:a}),S=le(Object.assign({},w,j)),E=l===$?S:k,C={top:O.top-E.top+m.top,bottom:E.bottom-O.bottom+m.bottom,left:O.left-E.left+m.left,right:E.right-O.right+m.right},A=e.modifiersData.offset;if(l===$&&A){var T=A[a];Object.keys(C).forEach((function(e){var t=[L,P].indexOf(e)>=0?1:-1,n=[M,P].indexOf(e)>=0?"y":"x";C[e]+=T[n]*t}))}return C}var me={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,i=void 0===a||a,o=n.altAxis,u=void 0===o||o,s=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,v=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,b=h(g),y=s||(b===g||!v?[ne(g)]:function(e){if(h(e)===B)return[];var t=ne(e);return[ae(e),t,ae(t)]}(g)),w=[g].concat(y).reduce((function(e,n){return e.concat(h(n)===B?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,i=n.rootBoundary,o=n.padding,u=n.flipVariations,s=n.allowedAutoPlacements,c=void 0===s?G:s,l=he(r),f=l?u?H:H.filter((function(e){return he(e)===l})):U,d=f.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=f);var p=d.reduce((function(t,n){return t[n]=ve(e,{placement:n,boundary:a,rootBoundary:i,padding:o})[h(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:v,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,O=t.rects.popper,k=new Map,j=!0,_=w[0],S=0;S<w.length;S++){var E=w[S],C=h(E),A=he(E)===W,T=[M,P].indexOf(C)>=0,N=T?"width":"height",I=ve(t,{placement:E,boundary:l,rootBoundary:f,altBoundary:d,padding:c}),D=T?A?L:z:A?P:M;x[N]>O[N]&&(D=ne(D));var R=ne(D),F=[];if(i&&F.push(I[C]<=0),u&&F.push(I[D]<=0,I[R]<=0),F.every((function(e){return e}))){_=E,j=!1;break}k.set(E,F)}if(j)for(var V=function(e){var t=w.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},q=v?3:1;q>0;q--){if("break"===V(q))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ge(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(e){return[M,L,P,z].some((function(t){return e[t]>=0}))}var ye={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=ve(t,{elementContext:"reference"}),u=ve(t,{altBoundary:!0}),s=ge(o,r),c=ge(u,a,i),l=be(s),f=be(c);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}};var we={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,i=void 0===a?[0,0]:a,o=G.reduce((function(e,n){return e[n]=function(e,t,n){var r=h(e),a=[z,M].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=i[0],u=i[1];return o=o||0,u=(u||0)*a,[z,L].indexOf(r)>=0?{x:u,y:o}:{x:o,y:u}}(n,t.rects,i),e}),{}),u=o[t.placement],s=u.x,c=u.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var xe={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=pe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var Oe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,i=void 0===a||a,o=n.altAxis,u=void 0!==o&&o,s=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,d=n.tether,p=void 0===d||d,v=n.tetherOffset,m=void 0===v?0:v,g=ve(t,{boundary:s,rootBoundary:c,padding:f,altBoundary:l}),b=h(t.placement),y=he(t.placement),x=!y,O=A(b),k="x"===O?"y":"x",j=t.modifiersData.popperOffsets,_=t.rects.reference,S=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,I={x:0,y:0};if(j){if(i||u){var R="y"===O?M:z,F="y"===O?P:L,B="y"===O?"height":"width",U=j[O],V=j[O]+g[R],q=j[O]-g[F],$=p?-S[B]/2:0,H=y===W?_[B]:S[B],G=y===W?-S[B]:-_[B],K=t.elements.arrow,X=p&&K?w(K):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},J=Y[R],Q=Y[F],Z=D(0,_[B],X[B]),ee=x?_[B]/2-$-Z-J-E:H-Z-J-E,te=x?-_[B]/2+$+Z+Q+E:G+Z+Q+E,ne=t.elements.arrow&&C(t.elements.arrow),re=ne?"y"===O?ne.clientTop||0:ne.clientLeft||0:0,ae=t.modifiersData.offset?t.modifiersData.offset[t.placement][O]:0,ie=j[O]+ee-ae-re,oe=j[O]+te-ae;if(i){var ue=D(p?N(V,ie):V,U,p?T(q,oe):q);j[O]=ue,I[O]=ue-U}if(u){var se="x"===O?M:z,ce="x"===O?P:L,le=j[k],fe=le+g[se],de=le-g[ce],pe=D(p?N(fe,ie):fe,le,p?T(de,oe):de);j[k]=pe,I[k]=pe-le}}t.modifiersData[r]=I}},requiresIfExists:["offset"]};function ke(e,t,n){void 0===n&&(n=!1);var r=m(t),a=m(t)&&function(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return 1!==n||1!==r}(t),i=_(t),o=y(e,a),u={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&(("body"!==O(t)||ue(i))&&(u=function(e){return e!==p(e)&&m(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:ie(e);var t}(t)),m(t)?((s=y(t,!0)).x+=t.clientLeft,s.y+=t.clientTop):i&&(s.x=oe(i))),{x:o.left+u.scrollLeft-s.x,y:o.top+u.scrollTop-s.y,width:o.width,height:o.height}}function je(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function _e(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Se={placement:"bottom",modifiers:[],strategy:"absolute"};function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Ce(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,i=void 0===a?Se:a;return function(e,t,n){void 0===n&&(n=i);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Se,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],u=!1,s={state:a,setOptions:function(n){c(),a.options=Object.assign({},i,a.options,n),a.scrollParents={reference:v(e)?ce(e):e.contextElement?ce(e.contextElement):[],popper:ce(t)};var u=function(e){var t=je(e);return K.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=u.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var u=i({state:a,name:t,instance:s,options:r}),c=function(){};o.push(u||c)}})),s.update()},forceUpdate:function(){if(!u){var e=a.elements,t=e.reference,n=e.popper;if(Ee(t,n)){a.rects={reference:ke(t,C(n),"fixed"===a.options.strategy),popper:w(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,c=i.options,l=void 0===c?{}:c,f=i.name;"function"===typeof o&&(a=o({state:a,options:l,name:f,instance:s})||a)}else a.reset=!1,r=-1}}},update:_e((function(){return new Promise((function(e){s.forceUpdate(),e(a)}))})),destroy:function(){c(),u=!0}};if(!Ee(e,t))return s;function c(){o.forEach((function(e){return e()})),o=[]}return s.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),s}}var Ae=Ce({defaultModifiers:[ye,xe,Q,ee,we,me,Oe,X]}),Te=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Ne={name:"applyStyles",enabled:!1},Ie={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var a=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));a.length?n.setAttribute("aria-describedby",a.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,a=n.reference,i=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===i&&"setAttribute"in a){var o=a.getAttribute("aria-describedby");if(o&&-1!==o.split(",").indexOf(r.id))return;a.setAttribute("aria-describedby",o?o+","+r.id:r.id)}}},De=[];var Re=function(e,t,n){var i=void 0===n?{}:n,o=i.enabled,s=void 0===o||o,c=i.placement,l=void 0===c?"bottom":c,f=i.strategy,h=void 0===f?"absolute":f,p=i.modifiers,v=void 0===p?De:p,m=Object(r.a)(i,["enabled","placement","strategy","modifiers"]),g=Object(u.useRef)(),b=Object(u.useCallback)((function(){var e;null==(e=g.current)||e.update()}),[]),y=Object(u.useCallback)((function(){var e;null==(e=g.current)||e.forceUpdate()}),[]),w=d(Object(u.useState)({placement:l,update:b,forceUpdate:y,attributes:{},styles:{popper:Te(h),arrow:{}}})),x=w[0],O=w[1],k=Object(u.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),O({state:t,styles:n,attributes:r,update:b,forceUpdate:y,placement:t.placement})}}}),[b,y,O]);return Object(u.useEffect)((function(){g.current&&s&&g.current.setOptions({placement:l,strategy:h,modifiers:[].concat(v,[k,Ne])})}),[h,l,k,s]),Object(u.useEffect)((function(){if(s&&null!=e&&null!=t)return g.current=Ae(e,t,Object(a.a)({},m,{placement:l,strategy:h,modifiers:[].concat(v,[Ie,k])})),function(){null!=g.current&&(g.current.destroy(),g.current=void 0,O((function(e){return Object(a.a)({},e,{attributes:{},styles:{popper:Te(h)}})})))}}),[s,e,t]),x},Fe=n(231),Me=n(120),Pe=n(66),Le=n(222),ze=n.n(Le),Be=n(103),Ue=n(93),We=n.n(Ue);var Ve=function(e){return Object(Be.a)(function(e){return e&&"setState"in e?We.a.findDOMNode(e):null!=e?e:null}(e))},qe=function(){};var $e=function(e){return e&&("current"in e?e.current:e)};var He=function(e,t,n){var r=void 0===n?{}:n,a=r.disabled,i=r.clickTrigger,o=void 0===i?"click":i,s=Object(u.useRef)(!1),c=t||qe,l=Object(u.useCallback)((function(t){var n,r=$e(e);ze()(!!r,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),s.current=!r||!!((n=t).metaKey||n.altKey||n.ctrlKey||n.shiftKey)||!function(e){return 0===e.button}(t)||!!Object(Fe.a)(r,t.target)}),[e]),f=Object(Pe.a)((function(e){s.current||c(e)})),d=Object(Pe.a)((function(e){27===e.keyCode&&c(e)}));Object(u.useEffect)((function(){if(!a&&null!=e){var t=window.event,n=Ve($e(e)),r=Object(Me.a)(n,o,l,!0),i=Object(Me.a)(n,o,(function(e){e!==t?f(e):t=void 0})),u=Object(Me.a)(n,"keyup",(function(e){e!==t?d(e):t=void 0})),s=[];return"ontouchstart"in n.documentElement&&(s=[].slice.call(n.body.children).map((function(e){return Object(Me.a)(e,"mousemove",qe)}))),function(){r(),i(),u(),s.forEach((function(e){return e()}))}}}),[e,a,o,l,f,d])};function Ge(e){var t,n,r,i,o,u=e.enabled,s=e.enableEvents,c=e.placement,l=e.flip,f=e.offset,d=e.fixed,h=e.containerPadding,p=e.arrowElement,v=e.popperConfig,m=void 0===v?{}:v,g=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(m.modifiers);return Object(a.a)({},m,{placement:c,enabled:u,strategy:d?"fixed":m.strategy,modifiers:(o=Object(a.a)({},g,{eventListeners:{enabled:s},preventOverflow:Object(a.a)({},g.preventOverflow,{options:h?Object(a.a)({padding:h},null==(t=g.preventOverflow)?void 0:t.options):null==(n=g.preventOverflow)?void 0:n.options}),offset:{options:Object(a.a)({offset:f},null==(r=g.offset)?void 0:r.options)},arrow:Object(a.a)({},g.arrow,{enabled:!!p,options:Object(a.a)({},null==(i=g.arrow)?void 0:i.options,{element:p})}),flip:Object(a.a)({enabled:!!l},g.flip)}),void 0===o&&(o={}),Array.isArray(o)?o:Object.keys(o).map((function(e){return o[e].name=e,o[e]})))})}var Ke=function(){};function Xe(e){void 0===e&&(e={});var t=Object(u.useContext)(l.a),n=Object(c.a)(),r=n[0],i=n[1],o=Object(u.useRef)(!1),s=e,f=s.flip,d=s.offset,h=s.rootCloseEvent,p=s.fixed,v=void 0!==p&&p,m=s.popperConfig,g=void 0===m?{}:m,b=s.usePopper,y=void 0===b?!!t:b,w=null==(null==t?void 0:t.show)?!!e.show:t.show,x=null==(null==t?void 0:t.alignEnd)?e.alignEnd:t.alignEnd;w&&!o.current&&(o.current=!0);var O=t||{},k=O.drop,j=O.setMenu,_=O.menuElement,S=O.toggleElement,E=x?"bottom-end":"bottom-start";"up"===k?E=x?"top-end":"top-start":"right"===k?E=x?"right-end":"right-start":"left"===k&&(E=x?"left-end":"left-start");var C=Re(S,_,Ge({placement:E,enabled:!(!y||!w),enableEvents:w,offset:d,flip:f,fixed:v,arrowElement:r,popperConfig:g})),A=Object(a.a)({ref:j||Ke,"aria-labelledby":null==S?void 0:S.id},C.attributes.popper,{style:C.styles.popper}),T={show:w,alignEnd:x,hasShown:o.current,toggle:null==t?void 0:t.toggle,popper:y?C:null,arrowProps:y?Object(a.a)({ref:i},C.attributes.arrow,{style:C.styles.arrow}):{}};return He(_,(function(e){null==t||t.toggle(!1,e)}),{clickTrigger:h,disabled:!w}),[A,T]}var Ye={children:o.a.func.isRequired,show:o.a.bool,alignEnd:o.a.bool,flip:o.a.bool,usePopper:o.a.oneOf([!0,!1]),popperConfig:o.a.object,rootCloseEvent:o.a.string};function Je(e){var t=e.children,n=Xe(Object(r.a)(e,["children"])),a=n[0],i=n[1];return s.a.createElement(s.a.Fragment,null,i.hasShown?t(a,i):null)}Je.displayName="ReactOverlaysDropdownMenu",Je.propTypes=Ye,Je.defaultProps={usePopper:!0};t.a=Je},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(5),o=n.n(i);var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)},s=["as","disabled","onKeyDown"];function c(e){return!e||"#"===e.trim()}var l=o.a.forwardRef((function(e,t){var n=e.as,i=void 0===n?"a":n,l=e.disabled,f=e.onKeyDown,d=Object(a.a)(e,s),h=function(e){var t=d.href,n=d.onClick;(l||c(t))&&e.preventDefault(),l?e.stopPropagation():n&&n(e)};return c(d.href)&&(d.role=d.role||"button",d.href=d.href||"#"),l&&(d.tabIndex=-1,d["aria-disabled"]=!0),o.a.createElement(i,Object(r.a)({ref:t},d,{onClick:h,onKeyDown:u((function(e){" "===e.key&&(e.preventDefault(),h(e))}),f)}))}));l.displayName="SafeAnchor";t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5);function a(e){var t=function(e){var t=Object(r.useRef)(e);return t.current=e,t}(e);Object(r.useEffect)((function(){return function(){return t.current()}}),[])}},function(e,t,n){var r=n(561),a=n(562),i=n(563),o=n(564),u=n(565),s=n(566),c=n(567);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0),n(410);var r=n(590),a=n(656),i=n(657),o=n(336),u=n(408),s=n(658),c=n(249),l=n(659),f=n(661),d=n(662),h=n(663),p=n(248),v=n(664);t.version_vis=v.version;var m={barchart:r.barchart,table:c.table,histogram:o.histogram,linechart:u.linechart,scatterplot:s.scatterplot,confusionMatrix:a.confusionMatrix,heatmap:i.heatmap};t.render=m;var g={accuracy:p.accuracy,perClassAccuracy:p.perClassAccuracy,confusionMatrix:p.confusionMatrix};t.metrics=g;var b={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:d.perClassAccuracy,valuesDistribution:h.valuesDistribution,layer:f.layer,modelSummary:f.modelSummary};t.show=b;var y=n(406);t.visor=y.visor,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(405))},function(e,t,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,t){var n,a,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),a=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,u){var s,c,l,f,d,h,p,v,m,g,b,y;if(t&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0===(b=JSON.stringify(t,i)))return b;if(p=a-o.length-u,b.length<=p&&(m=b.replace(r,(function(e,t){return t||e+" "}))).length<=p)return m;if(null!=i&&(t=JSON.parse(b),i=void 0),"object"===typeof t&&null!==t){if(v=o+n,l=[],c=0,Array.isArray(t))for(g="[",s="]",p=t.length;c<p;c++)l.push(e(t[c],v,c===p-1?0:1)||"null");else for(g="{",s="}",p=(h=Object.keys(t)).length;c<p;c++)f=h[c],d=JSON.stringify(f)+": ",void 0!==(y=e(t[f],v,d.length+(c===p-1?0:1)))&&l.push(d+y);if(l.length>0)return[g,n+l.join(",\n"+v),s].join("\n"+o)}return b}(e,"",0)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return we})),n.d(t,"d",(function(){return xe})),n.d(t,"e",(function(){return Oe})),n.d(t,"f",(function(){return ke})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return O}));var r,a,i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(u){i=[6,u],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},s=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r},c=0,l=!1,f=!1,d="undefined"!==typeof window?window:{},h=d.CSS,p=d.document||{head:{}},v={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)}},m=function(){return(p.head.attachShadow+"").indexOf("[native")>-1}(),g=function(e){return Promise.resolve(e)},b=function(){try{return new CSSStyleSheet,!0}catch(e){}return!1}(),y={},w=new WeakMap,x=function(e){return w.get(e)},O=function(e,t){return w.set(t.$lazyInstance$=e,t)},k=function(e,t){return t in e},j=function(e){return console.error(e)},_=new Map,S=new Map,E=[],C=[],A=[],T=function(e,t){return function(n){e.push(n),l||(l=!0,t&&4&v.$flags$?D(I):v.raf(I))}},N=function(e,t){for(var n=0,r=0;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(a){j(a)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},I=function e(){c++,function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){j(n)}e.length=0}(E);var t=2===(6&v.$flags$)?performance.now()+10*Math.ceil(c*(1/22)):1/0;N(C,t),N(A,t),C.length>0&&(A.push.apply(A,C),C.length=0),(l=E.length+C.length+A.length>0)?v.raf(e):c=0},D=function(e){return g().then(e)},R=T(E,!1),F=T(C,!0),M={},P=function(e){return"object"===(e=typeof e)||"function"===e},L=function(){return h&&h.supports&&h.supports("color","var(--c)")?g():n.e(4).then(n.t.bind(null,729,7)).then((function(){return(v.$cssShim$=d.__cssshim)?v.$cssShim$.i():0}))},z=function(e,t){return void 0===t&&(t=""),function(){}},B=new WeakMap,U=function(e,t,n){var r=z(0,t.$tagName$),a=function(e,t,n,r){var a=W(t.$tagName$),i=S.get(a);if(e=11===e.nodeType?e:p,i)if("string"===typeof i){e=e.head||e;var o=B.get(e),u=void 0;if(o||B.set(e,o=new Set),!o.has(a)){if(v.$cssShim$){var c=(u=v.$cssShim$.createHostStyle(r,a,i,!!(10&t.$flags$)))["s-sc"];c&&(a=c,o=null)}else(u=p.createElement("style")).innerHTML=i;e.insertBefore(u,e.querySelector("link")),o&&o.add(a)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=s(e.adoptedStyleSheets,[i]));return a}(m&&e.shadowRoot?e.shadowRoot:e.getRootNode(),t,0,e);10&t.$flags$&&(e["s-sc"]=a,e.classList.add(a+"-h")),r()},W=function(e,t){return"sc-"+e},V=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=null,i=!1,o=!1,u=[],s=function t(n){for(var r=0;r<n.length;r++)a=n[r],Array.isArray(a)?t(a):null!=a&&"boolean"!==typeof a&&((i="function"!==typeof e&&!P(a))&&(a=String(a)),i&&o?u[u.length-1].$text$+=a:u.push(i?q(null,a):a),o=i)};if(s(n),t){var c=t.className||t.class;c&&(t.class="object"!==typeof c?c:Object.keys(c).filter((function(e){return c[e]})).join(" "))}var l=q(e,null);return l.$attrs$=t,u.length>0&&(l.$children$=u),l},q=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null};return n},$={},H=function(e,t,n,r,a,i){if(n!==r){var o=k(e,t),u=t.toLowerCase();if("class"===t){var s=e.classList,c=K(n),l=K(r);s.remove.apply(s,c.filter((function(e){return e&&!l.includes(e)}))),s.add.apply(s,l.filter((function(e){return e&&!c.includes(e)})))}else if("style"===t){for(var f in n)r&&null!=r[f]||(f.includes("-")?e.style.removeProperty(f):e.style[f]="");for(var f in r)n&&r[f]===n[f]||(f.includes("-")?e.style.setProperty(f,r[f]):e.style[f]=r[f])}else if("ref"===t)r&&r(e);else if(o||"o"!==t[0]||"n"!==t[1]){var h=P(r);if((o||h&&null!==r)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{var p=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==p||(e[t]=p)}}catch(m){}null==r||!1===r?e.removeAttribute(t):(!o||4&i||a)&&!h&&(r=!0===r?"":r,e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):k(d,u)?u.slice(2):u[2]+t.slice(3),n&&v.rel(e,t,n,!1),r&&v.ael(e,t,r,!1)}},G=/\s/,K=function(e){return e?e.split(G):[]},X=function(e,t,n,r){var a=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||M,o=t.$attrs$||M;for(r in i)r in o||H(a,r,i[r],void 0,n,t.$flags$);for(r in o)H(a,r,i[r],o[r],n,t.$flags$)},Y=function e(t,n,a,i){var o,u,s=n.$children$[a],c=0;if(null!==s.$text$)o=s.$elm$=p.createTextNode(s.$text$);else{if(f||(f="svg"===s.$tag$),o=s.$elm$=p.createElementNS(f?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s.$tag$),f&&"foreignObject"===s.$tag$&&(f=!1),X(null,s,f),null!=r&&o["s-si"]!==r&&o.classList.add(o["s-si"]=r),s.$children$)for(c=0;c<s.$children$.length;++c)(u=e(t,s,c))&&o.appendChild(u);"svg"===s.$tag$?f=!1:"foreignObject"===o.tagName&&(f=!0)}return o},J=function(e,t,n,r,i,o){var u,s=e;for(s.shadowRoot&&s.tagName===a&&(s=s.shadowRoot);i<=o;++i)r[i]&&(u=Y(null,n,i))&&(r[i].$elm$=u,s.insertBefore(u,t))},Q=function(e,t,n,r,a){for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,ne(r),a.remove())},Z=function(e,t,n,r){for(var a,i=0,o=0,u=t.length-1,s=t[0],c=t[u],l=r.length-1,f=r[0],d=r[l];i<=u&&o<=l;)null==s?s=t[++i]:null==c?c=t[--u]:null==f?f=r[++o]:null==d?d=r[--l]:ee(s,f)?(te(s,f),s=t[++i],f=r[++o]):ee(c,d)?(te(c,d),c=t[--u],d=r[--l]):ee(s,d)?(te(s,d),e.insertBefore(s.$elm$,c.$elm$.nextSibling),s=t[++i],d=r[--l]):ee(c,f)?(te(c,f),e.insertBefore(c.$elm$,s.$elm$),c=t[--u],f=r[++o]):(a=Y(t&&t[o],n,o),f=r[++o],a&&s.$elm$.parentNode.insertBefore(a,s.$elm$));i>u?J(e,null==r[l+1]?null:r[l+1].$elm$,n,r,o,l):o>l&&Q(t,i,u)},ee=function(e,t){return e.$tag$===t.$tag$},te=function(e,t){var n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,i=t.$tag$,o=t.$text$;null===o?(X(e,t,f="svg"===i||"foreignObject"!==i&&f),null!==r&&null!==a?Z(n,r,t,a):null!==a?(null!==e.$text$&&(n.textContent=""),J(n,null,t,a,0,a.length-1)):null!==r&&Q(r,0,r.length-1),f&&"svg"===i&&(f=!1)):e.$text$!==o&&(n.data=o)},ne=function e(t){t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.forEach(e)},re=function(e,t,n,i){a=e.tagName;var o,u=t.$vnode$||q(null,null),s=(o=i)&&o.$tag$===$?i:V(null,null,i);s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=u.$elm$=e.shadowRoot||e,r=e["s-sc"],te(u,s)},ae=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},ie=function(e,t,n,r){if(t.$flags$|=16,!(4&t.$flags$)){var a=z(0,n.$tagName$),i=t.$ancestorComponent$,o=t.$lazyInstance$,u=function(){return oe(e,t,n,o,r)};return ae(t,i),r&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.forEach((function(e){var t=e[0],n=e[1];return le(o,t,n)})),t.$queuedListeners$=null)),a(),fe(undefined,(function(){return F(u)}))}t.$flags$|=512},oe=function(e,t,n,r,a){var i=z(0,n.$tagName$),o=e["s-rc"];a&&U(e,n,t.$modeName$);var u=z(0,n.$tagName$);re(e,t,0,ue(r)),v.$cssShim$&&v.$cssShim$.updateHost(e),t.$flags$&=-17,t.$flags$|=2,o&&(o.forEach((function(e){return e()})),e["s-rc"]=void 0),u(),i();var s=e["s-p"],c=function(){return se(e,t,n)};0===s.length?c():(Promise.all(s).then(c),t.$flags$|=4,s.length=0)},ue=function(e,t){try{e=e.render()}catch(n){j(n)}return e},se=function(e,t,n){var r=z(0,n.$tagName$),a=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?r():(t.$flags$|=64,de(e),le(a,"componentDidLoad"),r(),t.$onReadyResolve$(e),i||ce()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&D((function(){return ie(e,t,n,!1)})),t.$flags$&=-517},ce=function(e){de(p.documentElement),v.$flags$|=2},le=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){j(r)}},fe=function(e,t){return e&&e.then?e.then(t):t()},de=function(e){return e.classList.add("hydrated")},he=function(e,t){return function(n){256&e.$flags$?e.$lazyInstance$[t](n):e.$queuedListeners$.push([t,n])}},pe=function(e,t){return 32&t?p.body:e},ve=function(e){return 0!==(2&e)},me=function(e,t,n,r){var a,i,o=x(e),u=o.$hostElement$,s=o.$instanceValues$.get(t),c=o.$flags$,l=o.$lazyInstance$;a=n,i=r.$members$[t][0],(n=null==a||P(a)?a:4&i?"false"!==a&&(""===a||!!a):2&i?parseFloat(a):1&i?String(a):a)===s||8&c&&void 0!==s||(o.$instanceValues$.set(t,n),l&&2===(18&c)&&ie(u,o,r,!1))},ge=function(e,t,n){if(t.$members$){var r=Object.entries(t.$members$),a=e.prototype;if(r.forEach((function(e){var r=e[0],i=e[1][0];31&i||2&n&&32&i?Object.defineProperty(a,r,{get:function(){return e=r,x(this).$instanceValues$.get(e);var e},set:function(e){me(this,r,e,t)},configurable:!0,enumerable:!0}):1&n&&64&i&&Object.defineProperty(a,r,{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=x(this);return n.$onInstancePromise$.then((function(){var t;return(t=n.$lazyInstance$)[r].apply(t,e)}))}})})),1&n){var i=new Map;a.attributeChangedCallback=function(e,t,n){var r=this;v.jmp((function(){var t=i.get(e);r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){e[0];return 15&e[1][0]})).map((function(e){var t=e[0],n=e[1][1]||t;return i.set(n,t),n}))}}return e},be=function(e,t,r,a,i){return o(void 0,void 0,void 0,(function(){var a,o,s,c,l,f,d;return u(this,(function(u){switch(u.label){case 0:return 0!==(32&t.$flags$)?[3,5]:(t.$flags$|=32,(i=function(e,t,r){var a=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleIds$,o=_.get(i);return o?o[a]:n(681)("./"+i+".entry.js").then((function(e){return _.set(i,e),e[a]}),j)}(r)).then?(a=function(){},[4,i]):[3,2]);case 1:i=u.sent(),a(),u.label=2;case 2:i.isProxied||(ge(i,r,2),i.isProxied=!0),o=z(0,r.$tagName$),t.$flags$|=8;try{new i(t)}catch(h){j(h)}return t.$flags$&=-9,o(),s=W(r.$tagName$),S.has(s)||!i.style?[3,5]:(c=z(0,r.$tagName$),l=i.style,8&r.$flags$?[4,n.e(64).then(n.bind(null,731)).then((function(e){return e.scopeCss(l,s,!1)}))]:[3,4]);case 3:l=u.sent(),u.label=4;case 4:!function(e,t,n){var r=S.get(e);b&&n?(r=r||new CSSStyleSheet).replace(t):r=t,S.set(e,r)}(s,l,!!(1&r.$flags$)),c(),u.label=5;case 5:return f=t.$ancestorComponent$,d=function(){return ie(e,t,r,!0)},f&&f["s-rc"]?f["s-rc"].push(d):d(),[2]}}))}))},ye=function(e,t){if(0===(1&v.$flags$)){var n=z(0,t.$tagName$),r=x(e);if(t.$listeners$&&(r.$rmListeners$=function(e,t,n){t.$queuedListeners$=t.$queuedListeners$||[];var r=n.map((function(n){var r=n[0],a=n[1],i=n[2],o=pe(e,r),u=he(t,i),s=ve(r);return v.ael(o,a,u,s),function(){return v.rel(o,a,u,s)}}));return function(){return r.forEach((function(e){return e()}))}}(e,r,t.$listeners$)),!(1&r.$flags$)){r.$flags$|=1;for(var a=e;a=a.parentNode||a.host;)if(a["s-p"]){ae(r,r.$ancestorComponent$=a);break}t.$members$&&Object.entries(t.$members$).forEach((function(t){var n=t[0];if(31&t[1][0]&&e.hasOwnProperty(n)){var r=e[n];delete e[n],e[n]=r}})),D((function(){return be(e,r,t)}))}n()}},we=function(e,t){void 0===t&&(t={});var n,r=z(),a=[],o=t.exclude||[],u=d.customElements,s=p.head,c=s.querySelector("meta[charset]"),l=p.createElement("style"),f=[],h=!0;Object.assign(v,t),v.$resourcesUrl$=new URL(t.resourcesUrl||"./",p.baseURI).href,t.syncQueue&&(v.$flags$|=4),e.forEach((function(e){return e[1].forEach((function(t){var r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};r.$members$=t[2],r.$listeners$=t[3],!m&&1&r.$flags$&&(r.$flags$|=8);var s=r.$tagName$,c=function(e){function t(t){var n=e.call(this,t)||this;return function(e){var t={$flags$:0,$hostElement$:e,$instanceValues$:new Map};t.$onInstancePromise$=new Promise((function(e){return t.$onInstanceResolve$=e})),t.$onReadyPromise$=new Promise((function(e){return t.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[],w.set(e,t)}(t=n),1&r.$flags$&&(m?t.attachShadow({mode:"open"}):"shadowRoot"in t||(t.shadowRoot=t)),n}return i(t,e),t.prototype.connectedCallback=function(){var e=this;n&&(clearTimeout(n),n=null),h?f.push(this):v.jmp((function(){return ye(e,r)}))},t.prototype.disconnectedCallback=function(){var e=this;v.jmp((function(){return function(e){if(0===(1&v.$flags$)){var t=x(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$(),t.$rmListeners$=void 0),v.$cssShim$&&v.$cssShim$.removeHost(e),le(n,"componentDidUnload")}}(e)}))},t.prototype.forceUpdate=function(){!function(e,t){var n=x(e),r=n.$hostElement$.isConnected;r&&2===(18&n.$flags$)&&ie(e,n,t,!1)}(this,r)},t.prototype.componentOnReady=function(){return x(this).$onReadyPromise$},t}(HTMLElement);r.$lazyBundleIds$=e[0],o.includes(s)||u.get(s)||(a.push(s),u.define(s,ge(c,r,1)))}))})),l.innerHTML=a+"{visibility:hidden}.hydrated{visibility:inherit}",l.setAttribute("data-styles",""),s.insertBefore(l,c?c.nextSibling:s.firstChild),h=!1,f.length>0?f.forEach((function(e){return e.connectedCallback()})):v.jmp((function(){return n=setTimeout(ce,30)})),r()},xe=function(e,t,n){var r=ke(e);return{emit:function(e){var a=new CustomEvent(t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e});return r.dispatchEvent(a),a}}},Oe=function(e,t){return t in y?y[t]:"window"===t?d:"document"===t?p:"isServer"!==t&&"isPrerender"!==t&&("isClient"===t||("resourcesUrl"===t||"publicPath"===t?function(e){var t=new URL(e,v.$resourcesUrl$);return t.origin!==d.location.origin?t.href:t.pathname}("."):"queue"===t?{write:F,read:R,tick:{then:function(e){return D(e)}}}:void 0))},ke=function(e){return x(e).$hostElement$}},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"iosTransitionAnimation",(function(){return f})),n.d(t,"shadow",(function(){return o}));var r=n(51),a=n(114),i=(n(69),n(77),function(e){return document.querySelector(e+".ion-cloned-element")}),o=function(e){return e.shadowRoot||e},u=function(e){var t="ION-TABS"===e.tagName?e:e.querySelector("ion-tabs"),n="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=t){var r=t.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=r?r.querySelector(n):null}return e.querySelector(n)},s=function(e,t){var n="ION-TABS"===e.tagName?e:e.querySelector("ion-tabs"),r=[];if(null!=n){var a=n.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=a&&(r=a.querySelectorAll("ion-buttons"))}else r=e.querySelectorAll("ion-buttons");for(var i=0,o=r;i<o.length;i++){var u=o[i],s=u.closest("ion-header"),c=s&&!s.classList.contains("header-collapse-condense-inactive"),l=u.querySelector("ion-back-button"),f=u.classList.contains("buttons-collapse"),d="start"===u.slot||""===u.slot;if(null!==l&&d&&(f&&c&&t||!f))return l}return null},c=function(e,t,n,a,u,s){var c=t?"calc(100% - "+(s.right+4)+"px)":s.left-4+"px",l=t?"7px":"-7px",f=t?"-4px":"4px",d=t?"-4px":"4px",h=t?"right":"left",p=t?"left":"right",v=[{offset:0,opacity:0,transform:"translate3d("+l+", "+(u.top-40)+"px, 0) scale(2.1)"},{offset:1,opacity:1,transform:"translate3d("+f+", "+(s.top-46)+"px, 0) scale(1)"}],m=[{offset:0,opacity:1,transform:"translate3d("+f+", "+(s.top-46)+"px, 0) scale(1)"},{offset:.6,opacity:0},{offset:1,opacity:0,transform:"translate3d("+l+", "+(u.top-40)+"px, 0) scale(2.1)"}],g=n?m:v,b=[{offset:0,opacity:0,transform:"translate3d("+d+", "+(s.top-41)+"px, 0) scale(0.6)"},{offset:1,opacity:1,transform:"translate3d("+d+", "+(s.top-46)+"px, 0) scale(1)"}],y=[{offset:0,opacity:1,transform:"translate3d("+d+", "+(s.top-46)+"px, 0) scale(1)"},{offset:.2,opacity:0,transform:"translate3d("+d+", "+(s.top-41)+"px, 0) scale(0.6)"},{offset:1,opacity:0,transform:"translate3d("+d+", "+(s.top-41)+"px, 0) scale(0.6)"}],w=n?y:b,x=Object(r.a)(),O=Object(r.a)(),k=i("ion-back-button"),j=o(k).querySelector(".button-text"),_=o(k).querySelector("ion-icon");k.text=a.text,k.mode=a.mode,k.icon=a.icon,k.color=a.color,k.disabled=a.disabled,k.style.setProperty("display","block"),k.style.setProperty("position","fixed"),O.addElement(_),x.addElement(j),x.beforeStyles({"transform-origin":h+" center"}).beforeAddWrite((function(){a.style.setProperty("display","none"),k.style.setProperty(h,c)})).afterAddWrite((function(){a.style.setProperty("display",""),k.style.setProperty("display","none"),k.style.removeProperty(h)})).keyframes(g),O.beforeStyles({"transform-origin":p+" center"}).keyframes(w),e.addAnimation([x,O])},l=function(e,t,n,a,o,u){var s,c=t?"calc(100% - "+o.right+"px)":o.left+"px",l=t?"-18px":"18px",f=t?"right":"left",d=[{offset:0,opacity:0,transform:"translate3d("+l+", "+(u.top-4)+"px, 0) scale(0.49)"},{offset:.1,opacity:0},{offset:1,opacity:1,transform:"translate3d(0, "+(o.top-2)+"px, 0) scale(1)"}],h=[{offset:0,opacity:.99,transform:"translate3d(0, "+(o.top-2)+"px, 0) scale(1)"},{offset:.6,opacity:0},{offset:1,opacity:0,transform:"translate3d("+l+", "+(u.top-4)+"px, 0) scale(0.5)"}],p=n?d:h,v=i("ion-title"),m=Object(r.a)();v.innerText=a.innerText,v.size=a.size,v.color=a.color,m.addElement(v),m.beforeStyles((s={"transform-origin":f+" center",height:"46px",display:"",position:"relative"},s[f]=c,s)).beforeAddWrite((function(){a.style.setProperty("display","none")})).afterAddWrite((function(){a.style.setProperty("display",""),v.style.setProperty("display","none")})).keyframes(p),e.addAnimation(m)},f=function(e,t){try{var n="opacity",i="transform",f="rtl"===e.ownerDocument.dir,d=f?"-99.5%":"99.5%",h=f?"33%":"-33%",p=t.enteringEl,v=t.leavingEl,m="back"===t.direction,g=p.querySelector(":scope > ion-content"),b=p.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),y=p.querySelectorAll(":scope > ion-header > ion-toolbar"),w=Object(r.a)(),x=Object(r.a)();if(w.addElement(p).duration(t.duration||540).easing(t.easing||"cubic-bezier(0.32,0.72,0,1)").fill("both").beforeRemoveClass("ion-page-invisible"),v&&e){var O=Object(r.a)();O.addElement(e),w.addAnimation(O)}if(g||0!==y.length||0!==b.length?(x.addElement(g),x.addElement(b)):x.addElement(p.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),w.addAnimation(x),m?x.beforeClearStyles([n]).fromTo("transform","translateX("+h+")","translateX(0%)").fromTo(n,.8,1):x.beforeClearStyles([n]).fromTo("transform","translateX("+d+")","translateX(0%)"),g){var k=o(g).querySelector(".transition-effect");if(k){var j=k.querySelector(".transition-cover"),_=k.querySelector(".transition-shadow"),S=Object(r.a)(),E=Object(r.a)(),C=Object(r.a)();S.addElement(k).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),E.addElement(j).beforeClearStyles([n]).fromTo(n,0,.1),C.addElement(_).beforeClearStyles([n]).fromTo(n,.03,.7),S.addAnimation([E,C]),x.addAnimation([S])}}var A=p.querySelector("ion-header.header-collapse-condense"),T=function(e,t,n,r,a){var i=s(r,n),o=u(a),f=u(r),d=s(a,n),h=null!==i&&null!==o&&!n,p=null!==f&&null!==d&&n;if(h){var v=o.getBoundingClientRect(),m=i.getBoundingClientRect();l(e,t,n,o,v,m),c(e,t,n,i,v,m)}else if(p){var g=f.getBoundingClientRect(),b=d.getBoundingClientRect();l(e,t,n,f,g,b),c(e,t,n,d,g,b)}return{forward:h,backward:p}}(w,f,m,p,v),N=T.forward,I=T.backward;if(y.forEach((function(e){var t=Object(r.a)();t.addElement(e),w.addAnimation(t);var a=Object(r.a)();a.addElement(e.querySelector("ion-title"));var i,u=Object(r.a)(),s=Array.from(e.querySelectorAll("ion-buttons,[menuToggle]")),c=e.closest("ion-header"),l=c&&c.classList.contains("header-collapse-condense-inactive");i=m?s.filter((function(e){var t=e.classList.contains("buttons-collapse");return t&&!l||!t})):s.filter((function(e){return!e.classList.contains("buttons-collapse")})),u.addElement(i);var p=Object(r.a)();p.addElement(e.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));var v=Object(r.a)();v.addElement(o(e).querySelector(".toolbar-background"));var g=Object(r.a)(),b=e.querySelector("ion-back-button");if(b&&g.addElement(b),t.addAnimation([a,u,p,v,g]),u.fromTo(n,.01,1),p.fromTo(n,.01,1),m)l||a.fromTo("transform","translateX("+h+")","translateX(0%)").fromTo(n,.01,1),p.fromTo("transform","translateX("+h+")","translateX(0%)"),g.fromTo(n,.01,1);else if(A||a.fromTo("transform","translateX("+d+")","translateX(0%)").fromTo(n,.01,1),p.fromTo("transform","translateX("+d+")","translateX(0%)"),v.beforeClearStyles([n,"transform"]),(null===c||void 0===c?void 0:c.translucent)?v.fromTo("transform",f?"translateX(-100%)":"translateX(100%)","translateX(0px)"):v.fromTo(n,.01,"var(--opacity)"),N||g.fromTo(n,.01,1),b&&!N){var y=Object(r.a)();y.addElement(o(b).querySelector(".button-text")).fromTo("transform",f?"translateX(-100px)":"translateX(100px)","translateX(0px)"),t.addAnimation(y)}})),v){var D=Object(r.a)(),R=v.querySelector(":scope > ion-content"),F=v.querySelectorAll(":scope > ion-header > ion-toolbar"),M=v.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(R||0!==F.length||0!==M.length?(D.addElement(R),D.addElement(M)):D.addElement(v.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),w.addAnimation(D),m){D.beforeClearStyles([n]).fromTo("transform","translateX(0%)",f?"translateX(-100%)":"translateX(100%)");var P=Object(a.e)(v);w.afterAddWrite((function(){"normal"===w.getDirection()&&P.style.setProperty("display","none")}))}else D.fromTo("transform","translateX(0%)","translateX("+h+")").fromTo(n,1,.8);if(R){var L=o(R).querySelector(".transition-effect");if(L){var z=L.querySelector(".transition-cover"),B=L.querySelector(".transition-shadow"),U=Object(r.a)(),W=Object(r.a)(),V=Object(r.a)();U.addElement(L).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),W.addElement(z).beforeClearStyles([n]).fromTo(n,.1,0),V.addElement(B).beforeClearStyles([n]).fromTo(n,.7,.03),U.addAnimation([W,V]),D.addAnimation([U])}}F.forEach((function(e){var t=Object(r.a)();t.addElement(e);var a=Object(r.a)();a.addElement(e.querySelector("ion-title"));var u=Object(r.a)(),s=e.querySelectorAll("ion-buttons,[menuToggle]"),c=e.closest("ion-header"),l=c&&c.classList.contains("header-collapse-condense-inactive"),d=Array.from(s).filter((function(e){var t=e.classList.contains("buttons-collapse");return t&&!l||!t}));u.addElement(d);var p=Object(r.a)(),v=e.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");v.length>0&&p.addElement(v);var g=Object(r.a)();g.addElement(o(e).querySelector(".toolbar-background"));var b=Object(r.a)(),y=e.querySelector("ion-back-button");if(y&&b.addElement(y),t.addAnimation([a,u,p,b,g]),w.addAnimation(t),b.fromTo(n,.99,0),u.fromTo(n,.99,0),p.fromTo(n,.99,0),m){if(l||a.fromTo("transform","translateX(0%)",f?"translateX(-100%)":"translateX(100%)").fromTo(n,.99,0),p.fromTo("transform","translateX(0%)",f?"translateX(-100%)":"translateX(100%)"),g.beforeClearStyles([n,"transform"]),(null===c||void 0===c?void 0:c.translucent)?g.fromTo("transform","translateX(0px)",f?"translateX(-100%)":"translateX(100%)"):g.fromTo(n,"var(--opacity)",0),y&&!I){var x=Object(r.a)();x.addElement(o(y).querySelector(".button-text")).fromTo("transform","translateX(0%)","translateX("+(f?-124:124)+"px)"),t.addAnimation(x)}}else l||a.fromTo("transform","translateX(0%)","translateX("+h+")").fromTo(n,.99,0).afterClearStyles([i,n]),p.fromTo("transform","translateX(0%)","translateX("+h+")").afterClearStyles([i,n]),b.afterClearStyles([n]),a.afterClearStyles([n]),u.afterClearStyles([n])}))}return w}catch(q){throw q}}},function(e,t,n){"use strict";n.r(t),n.d(t,"mdTransitionAnimation",(function(){return i}));var r=n(51),a=n(114),i=(n(69),n(77),function(e,t){var n="back"===t.direction,i=t.enteringEl,o=t.leavingEl,u=Object(a.e)(i),s=u.querySelector("ion-toolbar"),c=Object(r.a)();if(c.addElement(u).fill("both").beforeRemoveClass("ion-page-invisible"),n?c.duration(t.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):c.duration(t.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),s){var l=Object(r.a)();l.addElement(s),c.addAnimation(l)}if(o&&n){c.duration(t.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");var f=Object(r.a)();f.addElement(Object(a.e)(o)).onFinish((function(e){1===e&&f.elements.length>0&&f.elements[0].style.setProperty("display","none")})).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),c.addAnimation(f)}return c})},function(e,t,n){var r=n(360);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){var n=/^[0-9]+$/,r=function(e,t){var r=n.test(e),a=n.test(t);return r&&a&&(e=+e,t=+t),e===t?0:r&&!a?-1:a&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:function(e,t){return r(t,e)}}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return 0===r(e,t,n)}},function(e,t,n){var r=n(87);e.exports=function(e,t,n){var a=new r(e,n),i=new r(t,n);return a.compare(i)||a.compareBuild(i)}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return r(e,t,n)<0}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return r(e,t,n)>=0}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return r(e,t,n)<=0}},function(e,t,n){var r=n(604),a=n(605),i=n(324),o=n(606);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},function(e,t,n){var r=n(87),a=n(245),i=a.ANY,o=n(116),u=n(246),s=n(244),c=n(328),l=n(330),f=n(329);e.exports=function(e,t,n,d){var h,p,v,m,g;switch(e=new r(e,d),t=new o(t,d),n){case">":h=s,p=l,v=c,m=">",g=">=";break;case"<":h=c,p=f,v=s,m="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,d))return!1;for(var b=function(n){var r=t.set[n],o=null,u=null;return r.forEach((function(e){e.semver===i&&(e=new a(">=0.0.0")),o=o||e,u=u||e,h(e.semver,o.semver,d)?o=e:v(e.semver,u.semver,d)&&(u=e)})),o.operator===m||o.operator===g?{v:!1}:u.operator&&u.operator!==m||!p(e,u.semver)?u.operator===g&&v(e,u.semver)?{v:!1}:void 0:{v:!1}},y=0;y<t.set.length;++y){var w=b(y);if("object"===typeof w)return w.v}return!0}},function(e,t,n){var r=n(649);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(650),a=n(651),i=n(652);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"h",(function(){return u})),n.d(t,"createElement",(function(){return u})),n.d(t,"cloneElement",(function(){return l})),n.d(t,"Component",(function(){return M})),n.d(t,"render",(function(){return P})),n.d(t,"rerender",(function(){return p})),n.d(t,"options",(function(){return a}));var a={},i=[],o=[];function u(e,t){var n,u,s,c,l=o;for(c=arguments.length;c-- >2;)i.push(arguments[c]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((u=i.pop())&&void 0!==u.pop)for(c=u.length;c--;)i.push(u[c]);else"boolean"===typeof u&&(u=null),(s="function"!==typeof e)&&(null==u?u="":"number"===typeof u?u=String(u):"string"!==typeof u&&(s=!1)),s&&n?l[l.length-1]+=u:l===o?l=[u]:l.push(u),n=s;var f=new r;return f.nodeName=e,f.children=l,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==a.vnode&&a.vnode(f),f}function s(e,t){for(var n in t)e[n]=t[n];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return u(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,d=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==d.push(e)&&(a.debounceRendering||c)(p)}function p(){var e,t=d;for(d=[];e=t.pop();)e._dirty&&R(e)}function v(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&m(e,t.nodeName):n||e._componentConstructor===t.nodeName}function m(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!==typeof r&&"string"!==typeof n||(e.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"===typeof r[i]&&!1===f.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,w,o):e.removeEventListener(t,w,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e)!function(e,t,n){try{e[t]=n}catch(r){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var u=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function w(e){return this._listeners[e.type](a.event&&a.event(e)||e)}var x=[],O=0,k=!1,j=!1;function _(){for(var e;e=x.pop();)a.afterMount&&a.afterMount(e),e.componentDidMount&&e.componentDidMount()}function S(e,t,n,r,a,i){O++||(k=null!=a&&void 0!==a.ownerSVGElement,j=null!=e&&!("__preactattr_"in e));var o=E(e,t,n,r,i);return a&&o.parentNode!==a&&a.appendChild(o),--O||(j=!1,i||_()),o}function E(e,t,n,r,a){var i=e,o=k;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if("function"===typeof u)return function(e,t,n,r){var a=e&&e._component,i=a,o=e,u=a&&e._componentConstructor===t.nodeName,s=u,c=g(t);for(;a&&!s&&(a=a._parentComponent);)s=a.constructor===t.nodeName;a&&s&&(!r||a._component)?(D(a,c,3,n,r),e=a.base):(i&&!u&&(F(i),e=o=null),a=N(t.nodeName,c,n),e&&!a.nextBase&&(a.nextBase=e,o=null),D(a,c,1,n,r),e=a.base,o&&e!==o&&(o._component=null,C(o,!1)));return e}(e,t,n,r);if(k="svg"===u||"foreignObject"!==u&&k,u=String(u),(!e||!m(e,u))&&(i=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(u,k),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0)}var s=i.firstChild,c=i.__preactattr_,l=t.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!j&&l&&1===l.length&&"string"===typeof l[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=l[0]&&(s.nodeValue=l[0]):(l&&l.length||null!=s)&&function(e,t,n,r,a){var i,o,u,s,c,l=e.childNodes,f=[],d={},h=0,p=0,m=l.length,g=0,y=t?t.length:0;if(0!==m)for(var w=0;w<m;w++){var x=l[w],O=x.__preactattr_;null!=(k=y&&O?x._component?x._component.__key:O.key:null)?(h++,d[k]=x):(O||(void 0!==x.splitText?!a||x.nodeValue.trim():a))&&(f[g++]=x)}if(0!==y)for(w=0;w<y;w++){var k;if(c=null,null!=(k=(s=t[w]).key))h&&void 0!==d[k]&&(c=d[k],d[k]=void 0,h--);else if(!c&&p<g)for(i=p;i<g;i++)if(void 0!==f[i]&&v(o=f[i],s,a)){c=o,f[i]=void 0,i===g-1&&g--,i===p&&p++;break}c=E(c,s,n,r),u=l[w],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?b(u):e.insertBefore(c,u))}if(h)for(var w in d)void 0!==d[w]&&C(d[w],!1);for(;p<=g;)void 0!==(c=f[g--])&&C(c,!1)}(i,l,n,r,j||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,k);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],k)}(i,t.attributes,c),k=o,i}function C(e,t){var n=e._component;n?F(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;C(e,!0),e=t}}var T={};function N(e,t,n){var r,a=T[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),M.call(r,t,n)):((r=new M(t,n)).constructor=e,r.render=I),a)for(var i=a.length;i--;)if(a[i].constructor===e){r.nextBase=a[i].nextBase,a.splice(i,1);break}return r}function I(e,t,n){return this.constructor(e,n)}function D(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===a.syncComponentUpdates&&e.base?h(e):R(e,1,i)),e.__ref&&e.__ref(e))}function R(e,t,n,r){if(!e._disable){var i,o,u,c=e.props,l=e.state,f=e.context,d=e.prevProps||c,h=e.prevState||l,p=e.prevContext||f,v=e.base,m=e.nextBase,b=v||m,y=e._component,w=!1;if(v&&(e.props=d,e.state=h,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,l,f)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(c,l,f),e.props=c,e.state=l,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){i=e.render(c,l,f),e.getChildContext&&(f=s(s({},f),e.getChildContext()));var k,j,E=i&&i.nodeName;if("function"===typeof E){var A=g(i);(o=y)&&o.constructor===E&&A.key==o.__key?D(o,A,1,f,!1):(k=o,e._component=o=N(E,A,f),o.nextBase=o.nextBase||m,o._parentComponent=e,D(o,A,0,f,!1),R(o,1,n,!0)),j=o.base}else u=b,(k=y)&&(u=e._component=null),(b||1===t)&&(u&&(u._component=null),j=S(u,i,f,n||!v,b&&b.parentNode,!0));if(b&&j!==b&&o!==y){var T=b.parentNode;T&&j!==T&&(T.replaceChild(j,b),k||(b._component=null,C(b,!1)))}if(k&&F(k),e.base=j,j&&!r){for(var I=e,M=e;M=M._parentComponent;)(I=M).base=j;j._component=I,j._componentConstructor=I.constructor}}if(!v||n?x.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,h,p),a.afterUpdate&&a.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);O||r||_()}}function F(e){a.beforeUnmount&&a.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?F(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,b(t),function(e){var t=e.constructor.name;(T[t]||(T[t]=[])).push(e)}(e),A(t)),e.__ref&&e.__ref(null)}function M(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function P(e,t,n){return S(n,e,{},!1,t,!1)}s(M.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),h(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),R(this,2)},render:function(){}});var L={h:u,createElement:u,cloneElement:l,Component:M,render:P,rerender:p,options:a};t.default=L},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(119),u=i(n(178)),s=n(145),c=n(248),l=n(249),f={maxBins:12,fontSize:11};function d(e,t,n){var r=o.format(",.4~f"),a=o.format(".4~p"),i=[],u=[];if(null!=e.numVals&&(i.push("Num Vals"),u.push(r(e.numVals))),null!=e.min&&(i.push("Min"),u.push(r(e.min))),null!=e.max&&(i.push("Max"),u.push(r(e.max))),null!=e.numZeros){i.push("# Zeros");var s="";e.numVals&&(s=e.numZeros>0?"(".concat(a(e.numZeros/e.numVals),")"):""),u.push("".concat(r(e.numZeros)," ").concat(s))}if(null!=e.numNans){i.push("# NaNs");var c="";e.numVals&&(c=e.numNans>0?"(".concat(a(e.numNans/e.numVals),")"):""),u.push("".concat(r(e.numNans)," ").concat(c))}if(null!=e.numInfs){i.push("# Infinity");var f="";e.numVals&&(f=e.numInfs>0?"(".concat(a(e.numInfs/e.numVals),")"):""),u.push("".concat(r(e.numInfs)," ").concat(f))}l.table(t,{headers:i,values:[u]},n)}function h(e){if(null==e.length)throw new Error("input data must be an array");if(0===e.length)return[];if("object"===typeof e[0]){if(null==e[0].value)throw new Error("input data must have a value field");return e}for(var t=Array(e.length),n=0;n<e.length;n++)t[n]={value:e[n]};return t}t.histogram=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,o,l,p,v,m,g,b,y;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=h(t),o=Object.assign({},f,n),l={actions:!1,mode:"vega-lite",defaultStyle:!1},p=s.subSurface(e,"histogram"),!1!==n.stats&&(v=s.subSurface(e,"stats",{prepend:!0}),d(n.stats?n.stats:c.arrayStats(i.map((function(e){return e.value}))),v,{fontSize:o.fontSize})),0!==i.length){r.next=7;break}return r.abrupt("return",void 0);case 7:for(m=[],g=0;g<i.length;g++)null!=(b=i[g].value)&&isFinite(b)&&m.push(i[g]);return y={width:o.width||s.getDefaultWidth(p),height:o.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:m},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},encoding:{x:{bin:{maxbins:o.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:o.color||"#001B44"}}},r.abrupt("return",u.default(p,y,l));case 11:case"end":return r.stop()}}),a)})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r,a=n(95),i=180/Math.PI,o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},u=function(e,t,n,r,a,o){var u,s,c;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,u=-u),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*i,skewX:Math.atan(c)*i,scaleX:u,scaleY:s}};function s(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,u){var s=[],c=[];return o=e(o),u=e(u),function(e,r,i,o,u,s){if(e!==i||r!==o){var c=u.push("translate(",null,t,null,n);s.push({i:c-4,x:Object(a.a)(e,i)},{i:c-2,x:Object(a.a)(r,o)})}else(i||o)&&u.push("translate("+i+t+o+n)}(o.translateX,o.translateY,u.translateX,u.translateY,s,c),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Object(a.a)(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,u.rotate,s,c),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Object(a.a)(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,u.skewX,s,c),function(e,t,n,r,o,u){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");u.push({i:s-4,x:Object(a.a)(e,n)},{i:s-2,x:Object(a.a)(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,s,c),o=u=null,function(e){for(var t,n=-1,r=c.length;++n<r;)s[(t=c[n]).i]=t.x(e);return s.join("")}}}var c=s((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?o:u(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),l=s((function(e){return null==e?o:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",e),(e=r.transform.baseVal.consolidate())?(e=e.matrix,u(e.a,e.b,e.c,e.d,e.e,e.f)):o)}),", ",")",")")},function(e,t,n){"use strict";(function(e){var r=n(5),a=n.n(r),i=n(86),o=n(33),u=n.n(o),s=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var f=a.a.createContext||function(e,t){var n,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(i.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,a=e.value;((i=r)===(o=a)?0!==i||1/i===1/o:i!==i&&o!==o)?n=0:(n="function"===typeof t?t(r,a):s,0!==(n|=0)&&this.emitter.set(e.value,n))}var i,o},r.render=function(){return this.props.children},n}(r.Component);f.childContextTypes=((n={})[o]=u.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(i.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?s:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?s:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((a={})[o]=u.a.object,a),{Provider:f,Consumer:d}};t.a=f}).call(this,n(141))},function(e,t,n){var r=n(535);e.exports=h,e.exports.parse=i,e.exports.compile=function(e,t){return u(i(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=d;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=a.exec(e));){var f=n[0],d=n[1],h=n.index;if(u+=e.slice(o,h),o=h+f.length,d)u+=d[1];else{var p=e[o],v=n[2],m=n[3],g=n[4],b=n[5],y=n[6],w=n[7];u&&(r.push(u),u="");var x=null!=v&&null!=p&&p!==v,O="+"===y||"*"===y,k="?"===y||"*"===y,j=n[2]||l,_=g||b;r.push({name:m||i++,prefix:v||"",delimiter:j,optional:k,repeat:O,partial:x,asterisk:!!w,pattern:_?c(_):w?".*":"[^"+s(j)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",f(t)));return function(t,a){for(var i="",u=t||{},s=(a||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,d=u[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(f=s(d[h]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===h?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(d),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');i+=l.prefix+f}}else i+=l}return i}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,i=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var d=s(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+d+h+")*"),o+=h=c.optional?c.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return a||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=i?"$":a&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(h(e[a],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return d(i(e,n),t,n)}(e,t,n)}},function(e,t,n){var r=n(549),a=n(550);e.exports={parser:a,splitter:r}},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},o={};function u(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=p)return k}else{if(e<=-v)return j;if(e+1>=v)return O}return e<0?s(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=u,r.fromNumber=s,r.fromBits=c;var l=Math.pow;function f(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return f(e.substring(1),t,n).neg();for(var a=s(l(n,8)),i=g,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+u),n);if(u<8){var d=s(l(n,u));i=i.mul(d).add(s(c))}else i=(i=i.mul(a)).add(s(c))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?f(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}r.fromString=f,r.fromValue=d;var h=4294967296,p=h*h,v=p/2,m=u(1<<24),g=u(0);r.ZERO=g;var b=u(0,!0);r.UZERO=b;var y=u(1);r.ONE=y;var w=u(1,!0);r.UONE=w;var x=u(-1);r.NEG_ONE=x;var O=c(-1,2147483647,!1);r.MAX_VALUE=O;var k=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var j=c(0,-2147483648,!1);r.MIN_VALUE=j;var _=r.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(j)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(j)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(j)?j:this.not().add(y)},_.neg=_.negate,_.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,u=65535&e.high,s=e.low>>>16,l=0,f=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,f+=(h+=r+s)>>>16,l+=(f+=n+u)>>>16,l+=t+o,c((h&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},_.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(j))return e.isOdd()?j:g;if(e.eq(j))return this.isOdd()?j:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,u=e.high>>>16,l=65535&e.high,f=e.low>>>16,h=65535&e.low,p=0,v=0,b=0,y=0;return b+=(y+=o*h)>>>16,v+=(b+=i*h)>>>16,b&=65535,v+=(b+=o*f)>>>16,p+=(v+=r*h)>>>16,v&=65535,p+=(v+=i*f)>>>16,v&=65535,p+=(v+=o*l)>>>16,p+=t*h+r*f+i*l+o*u,c((b&=65535)<<16|(y&=65535),(p&=65535)<<16|(v&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;i=b}else{if(this.eq(j))return e.eq(y)||e.eq(x)?j:e.eq(j)?y:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(j))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),u=o<=48?1:l(2,o-48),f=s(t),h=f.mul(e);h.isNegative()||h.gt(r);)h=(f=s(t-=u,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),r=r.sub(h)}return i},_.div=_.divide,_.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return c(~this.low,~this.high,this.unsigned)},_.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){var r=n(176);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(241).SEMVER_SPEC_VERSION,SemVer:n(87),compareIdentifiers:n(325).compareIdentifiers,rcompareIdentifiers:n(325).rcompareIdentifiers,parse:n(177),valid:n(591),clean:n(592),inc:n(593),diff:n(594),major:n(595),minor:n(596),patch:n(597),prerelease:n(598),compare:n(115),rcompare:n(599),compareLoose:n(600),compareBuild:n(327),sort:n(601),rsort:n(602),gt:n(244),lt:n(328),eq:n(326),neq:n(397),gte:n(329),lte:n(330),cmp:n(398),coerce:n(603),Comparator:n(245),Range:n(116),satisfies:n(246),toComparators:n(610),maxSatisfying:n(611),minSatisfying:n(612),minVersion:n(613),validRange:n(614),outside:n(332),gtr:n(615),ltr:n(616),intersects:n(617),simplifyRange:n(618),subset:n(619)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.create;Object.create},function(e,t,n){"use strict";var r,a,i,o,u,s,c,l,f,d,h,p,v,m;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return g.a})),function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(r||(r={})),function(e){e.Rear="REAR",e.Front="FRONT"}(a||(a={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(i||(i={})),function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(o||(o={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(u||(u={})),function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(s||(s={})),function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.ERROR="ERROR"}(c||(c={})),function(e){e.Dark="DARK",e.Light="LIGHT"}(l||(l={})),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(f||(f={})),function(e){e.Default="DEFAULT",e.Destructive="DESTRUCTIVE",e.Cancel="CANCEL"}(d||(d={})),function(e){e.Camera="camera",e.Photos="photos",e.Geolocation="geolocation",e.Notifications="notifications",e.ClipboardRead="clipboard-read",e.ClipboardWrite="clipboard-write",e.Microphone="microphone"}(h||(h={})),function(e){e.Smart="smart",e.Shared="shared",e.User="user"}(p||(p={})),function(e){e.Dark="DARK",e.Light="LIGHT"}(v||(v={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(m||(m={}));var g=n(224),b=new(function(){function e(){this.plugins={},this.loadedPlugins={}}return e.prototype.addPlugin=function(e){this.plugins[e.config.name]=e},e.prototype.getPlugin=function(e){return this.plugins[e]},e.prototype.loadPlugin=function(e){var t=this.getPlugin(e);t?t.load():console.error("Unable to load web plugin "+e+", no such plugin found.")},e.prototype.getPlugins=function(){var e=[];for(var t in this.plugins)e.push(this.plugins[t]);return e},e}()),y=function(){function e(e,t){this.config=e,this.loaded=!1,this.listeners={},this.windowListeners={},t?t.addPlugin(this):b.addPlugin(this)}return e.prototype.addWindowListener=function(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0},e.prototype.removeWindowListener=function(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)},e.prototype.addListener=function(e,t){var n=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);var r=this.windowListeners[e];return r&&!r.registered&&this.addWindowListener(r),{remove:function(){n.removeListener(e,t)}}},e.prototype.removeListener=function(e,t){var n=this.listeners[e];if(n){var r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}},e.prototype.removeAllListeners=function(){for(var e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}},e.prototype.notifyListeners=function(e,t){var n=this.listeners[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.hasListeners=function(e){return!!this.listeners[e].length},e.prototype.registerWindowListener=function(e,t){var n=this;this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:function(e){n.notifyListeners(t,e)}}},e.prototype.requestPermissions=function(){return Capacitor.isNative?Capacitor.nativePromise(this.config.name,"requestPermissions",{}):Promise.resolve({results:[]})},e.prototype.load=function(){this.loaded=!0},e}(),w=function(e,t){e.hasOwnProperty(t.config.name)&&!function(e){return e.config.platforms&&e.config.platforms.indexOf(Capacitor.platform)>=0}(t)||(e[t.config.name]=t)},x=n(25),O=(new(function(e){function t(){return e.call(this,{name:"Accessibility",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.isScreenReaderEnabled=function(){throw new Error("Feature not available in the browser")},t.prototype.speak=function(e){if(!("speechSynthesis"in window))return Promise.reject("Browser does not support the Speech Synthesis API");var t=new SpeechSynthesisUtterance(e.value);return e.language&&(t.lang=e.language),window.speechSynthesis.speak(t),Promise.resolve()},t}(y)),new(function(e){function t(){var t=e.call(this,{name:"App",platforms:["web"]})||this;return"undefined"!==typeof document&&document.addEventListener("visibilitychange",t.handleVisibilityChange.bind(t),!1),t}return Object(x.b)(t,e),t.prototype.exitApp=function(){throw new Error("Method not implemented.")},t.prototype.canOpenUrl=function(e){return Promise.resolve({value:!0})},t.prototype.openUrl=function(e){return Promise.resolve({completed:!0})},t.prototype.getLaunchUrl=function(){return Promise.resolve({url:""})},t.prototype.getState=function(){return Promise.resolve({isActive:!0!==document.hidden})},t.prototype.handleVisibilityChange=function(){var e={isActive:!0!==document.hidden};this.notifyListeners("appStateChange",e)},t}(y)),new(function(e){function t(){return e.call(this,{name:"Browser",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.open=function(e){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(t){return this._lastWindow=window.open(e.url,e.windowName||"_blank"),[2,Promise.resolve()]}))}))},t.prototype.prefetch=function(e){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(e){return[2,Promise.resolve()]}))}))},t.prototype.close=function(){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(e){return this._lastWindow&&this._lastWindow.close(),[2,Promise.resolve()]}))}))},t}(y)),new(function(e){function t(){return e.call(this,{name:"Camera",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.getPhoto=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t=this;return Object(x.c)(this,(function(n){return[2,new Promise((function(n,r){return Object(x.a)(t,void 0,void 0,(function(){var t,a=this;return Object(x.c)(this,(function(i){switch(i.label){case 0:return e.webUseInput?(this.fileInputExperience(e,n),[3,7]):[3,1];case 1:if(!customElements.get("pwa-camera-modal"))return[3,6];t=document.createElement("pwa-camera-modal"),document.body.appendChild(t),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.componentOnReady()];case 3:return i.sent(),t.addEventListener("onPhoto",(function(i){return Object(x.a)(a,void 0,void 0,(function(){var a,o;return Object(x.c)(this,(function(u){switch(u.label){case 0:return null!==(a=i.detail)?[3,1]:(r("User cancelled photos app"),[3,4]);case 1:return a instanceof Error?(r(a.message),[3,4]):[3,2];case 2:return o=n,[4,this._getCameraPhoto(a,e)];case 3:o.apply(void 0,[u.sent()]),u.label=4;case 4:return t.dismiss(),document.body.removeChild(t),[2]}}))}))})),t.present(),[3,5];case 4:return i.sent(),this.fileInputExperience(e,n),[3,5];case 5:return[3,7];case 6:console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements."),this.fileInputExperience(e,n),i.label=7;case 7:return[2]}}))}))}))]}))}))},t.prototype.fileInputExperience=function(e,t){var n=document.querySelector("#_capacitor-camera-input"),o=function(){n.parentNode&&n.parentNode.removeChild(n)};n||((n=document.createElement("input")).id="_capacitor-camera-input",n.type="file",document.body.appendChild(n)),n.accept="image/*",n.capture=!0,e.source===r.Photos||e.source===r.Prompt?n.removeAttribute("capture"):e.direction===a.Front?n.capture="user":e.direction===a.Rear&&(n.capture="environment"),n.addEventListener("change",(function(r){var a=n.files[0],u="jpeg";if("image/png"===a.type?u="png":"image/gif"===a.type&&(u="gif"),e.resultType===i.DataUrl||e.resultType===i.Base64){var s=new FileReader;s.addEventListener("load",(function(){if(e.resultType===i.DataUrl)t({dataUrl:s.result,format:u});else if(e.resultType===i.Base64){var n=s.result.split(",")[1];t({base64String:n,format:u})}o()})),s.readAsDataURL(a)}else t({webPath:URL.createObjectURL(a),format:u}),o()})),n.click()},t.prototype._getCameraPhoto=function(e,t){return new Promise((function(n,r){var a=new FileReader,o=e.type.split("/")[1];t.resultType===i.Uri?n({webPath:URL.createObjectURL(e),format:o}):(a.readAsDataURL(e),a.onloadend=function(){var e=a.result;t.resultType===i.DataUrl?n({dataUrl:e,format:o}):n({base64String:e.split(",")[1],format:o})},a.onerror=function(e){r(e)})}))},t}(y)),new(function(e){function t(){return e.call(this,{name:"Clipboard",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.write=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r;return Object(x.c)(this,(function(a){switch(a.label){case 0:return navigator.clipboard?void 0!==e.string||e.url?navigator.clipboard.writeText?[4,navigator.clipboard.writeText(void 0!==e.string?e.string:e.url)]:[2,Promise.reject("Writting to clipboard not supported in this browser")]:[3,2]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return a.sent(),[3,10];case 2:if(!e.image)return[3,9];if(!navigator.clipboard.write)return[2,Promise.reject("Setting images not supported in this browser")];a.label=3;case 3:return a.trys.push([3,7,,8]),[4,fetch(e.image)];case 4:return[4,a.sent().blob()];case 5:return t=a.sent(),n=new ClipboardItem(((r={})[t.type]=t,r)),[4,navigator.clipboard.write([n])];case 6:return a.sent(),[3,8];case 7:return a.sent(),[2,Promise.reject("Failed to write image")];case 8:return[3,10];case 9:return[2,Promise.reject("Nothing to write")];case 10:return[2,Promise.resolve()]}}))}))},t.prototype.read=function(){return Object(x.a)(this,void 0,void 0,(function(){var e,t,n,r;return Object(x.c)(this,(function(a){switch(a.label){case 0:return navigator.clipboard?navigator.clipboard.read?[3,1]:navigator.clipboard.readText?[2,this.readText()]:[2,Promise.reject("Reading from clipboard not supported in this browser")]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return a.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:return e=a.sent(),t=e[0].types[0],[4,e[0].getType(t)];case 3:return n=a.sent(),[4,this._getBlobData(n,t)];case 4:return r=a.sent(),[2,Promise.resolve({value:r,type:t})];case 5:return a.sent(),[2,this.readText()];case 6:return[2]}}))}))},t.prototype.readText=function(){return Object(x.a)(this,void 0,void 0,(function(){var e;return Object(x.c)(this,(function(t){switch(t.label){case 0:return[4,navigator.clipboard.readText()];case 1:return e=t.sent(),[2,Promise.resolve({value:e,type:"text/plain"})]}}))}))},t.prototype._getBlobData=function(e,t){return new Promise((function(n,r){var a=new FileReader;t.includes("image")?a.readAsDataURL(e):a.readAsText(e),a.onloadend=function(){var e=a.result;n(e)},a.onerror=function(e){r(e)}}))},t}(y)),new(function(e){function t(){var t=e.call(this,{name:"Filesystem",platforms:["web"]})||this;return t.DEFAULT_DIRECTORY=o.Data,t.DB_VERSION=1,t.DB_NAME="Disc",t._writeCmds=["add","put","delete"],t}return Object(x.b)(t,e),t.prototype.initDb=function(){return Object(x.a)(this,void 0,void 0,(function(){var e=this;return Object(x.c)(this,(function(n){if(void 0!==this._db)return[2,this._db];if(!("indexedDB"in window))throw new Error("This browser doesn't support IndexedDB");return[2,new Promise((function(n,r){var a=indexedDB.open(e.DB_NAME,e.DB_VERSION);a.onupgradeneeded=t.doUpgrade,a.onsuccess=function(){e._db=a.result,n(a.result)},a.onerror=function(){return r(a.error)},a.onblocked=function(){console.warn("db blocked")}}))]}))}))},t.doUpgrade=function(e){var t=e.target.result;switch(e.oldVersion){case 0:case 1:default:t.objectStoreNames.contains("FileStorage")&&t.deleteObjectStore("FileStorage"),t.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}},t.prototype.dbRequest=function(e,t){return Object(x.a)(this,void 0,void 0,(function(){var n;return Object(x.c)(this,(function(r){return n=-1!==this._writeCmds.indexOf(e)?"readwrite":"readonly",[2,this.initDb().then((function(r){return new Promise((function(a,i){var o=r.transaction(["FileStorage"],n).objectStore("FileStorage"),u=o[e].apply(o,t);u.onsuccess=function(){return a(u.result)},u.onerror=function(){return i(u.error)}}))}))]}))}))},t.prototype.dbIndexRequest=function(e,t,n){return Object(x.a)(this,void 0,void 0,(function(){var r;return Object(x.c)(this,(function(a){return r=-1!==this._writeCmds.indexOf(t)?"readwrite":"readonly",[2,this.initDb().then((function(a){return new Promise((function(i,o){var u=a.transaction(["FileStorage"],r).objectStore("FileStorage").index(e),s=u[t].apply(u,n);s.onsuccess=function(){return i(s.result)},s.onerror=function(){return o(s.error)}}))}))]}))}))},t.prototype.getPath=function(e,t){e=e||this.DEFAULT_DIRECTORY;var n=void 0!==t?t.replace(/^[/]+|[/]+$/g,""):"",r="/"+e;return""!==t&&(r+="/"+n),r},t.prototype.clear=function(){return Object(x.a)(this,void 0,void 0,(function(){var e,t;return Object(x.c)(this,(function(n){switch(n.label){case 0:return[4,this.initDb()];case 1:return e=n.sent(),t=e.transaction(["FileStorage"],"readwrite"),t.objectStore("FileStorage").clear(),[2,{}]}}))}))},t.prototype.readFile=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n;return Object(x.c)(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===(n=r.sent()))throw Error("File does not exist.");return[2,{data:n.content}]}}))}))},t.prototype.writeFile=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,s,c,l;return Object(x.c)(this,(function(f){switch(f.label){case 0:return t=this.getPath(e.directory,e.path),n=e.data,r=e.recursive,[4,this.dbRequest("get",[t])];case 1:if((a=f.sent())&&"directory"===a.type)throw"The supplied path is a directory.";return i=e.encoding,o=t.substr(0,t.lastIndexOf("/")),[4,this.dbRequest("get",[o])];case 2:return void 0!==f.sent()||-1===(u=o.indexOf("/",1))?[3,4]:(s=o.substr(u),[4,this.mkdir({path:s,directory:e.directory,recursive:r})]);case 3:f.sent(),f.label=4;case 4:return c=Date.now(),l={path:t,folder:o,type:"file",size:n.length,ctime:c,mtime:c,content:!i&&n.indexOf(",")>=0?n.split(",")[1]:n},[4,this.dbRequest("put",[l])];case 5:return f.sent(),[2,{uri:l.path}]}}))}))},t.prototype.appendFile=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,s,c;return Object(x.c)(this,(function(l){switch(l.label){case 0:return t=this.getPath(e.directory,e.path),n=e.data,r=t.substr(0,t.lastIndexOf("/")),a=Date.now(),i=a,[4,this.dbRequest("get",[t])];case 1:if((o=l.sent())&&"directory"===o.type)throw"The supplied path is a directory.";return[4,this.dbRequest("get",[r])];case 2:return void 0!==l.sent()||-1===(u=r.indexOf("/",1))?[3,4]:(s=r.substr(u),[4,this.mkdir({path:s,directory:e.directory,recursive:!0})]);case 3:l.sent(),l.label=4;case 4:return void 0!==o&&(n=o.content+n,i=o.ctime),c={path:t,folder:r,type:"file",size:n.length,ctime:i,mtime:a,content:n},[4,this.dbRequest("put",[c])];case 5:return l.sent(),[2,{}]}}))}))},t.prototype.deleteFile=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t;return Object(x.c)(this,(function(n){switch(n.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===n.sent())throw Error("File does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:if(0!==n.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[t])];case 3:return n.sent(),[2,{}]}}))}))},t.prototype.mkdir=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,s,c;return Object(x.c)(this,(function(l){switch(l.label){case 0:return t=this.getPath(e.directory,e.path),n=e.recursive,r=t.substr(0,t.lastIndexOf("/")),a=(t.match(/\//g)||[]).length,[4,this.dbRequest("get",[r])];case 1:return i=l.sent(),[4,this.dbRequest("get",[t])];case 2:if(o=l.sent(),1===a)throw Error("Cannot create Root directory");if(void 0!==o)throw Error("Current directory does already exist.");if(!n&&2!==a&&void 0===i)throw Error("Parent directory must exist");return n&&2!==a&&void 0===i?(u=r.substr(r.indexOf("/",1)),[4,this.mkdir({path:u,directory:e.directory,recursive:n})]):[3,4];case 3:l.sent(),l.label=4;case 4:return s=Date.now(),c={path:t,folder:r,type:"directory",size:0,ctime:s,mtime:s},[4,this.dbRequest("put",[c])];case 5:return l.sent(),[2,{}]}}))}))},t.prototype.rmdir=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,s,c,l;return Object(x.c)(this,(function(f){switch(f.label){case 0:return t=e.path,n=e.directory,r=e.recursive,a=this.getPath(n,t),[4,this.dbRequest("get",[a])];case 1:if(void 0===(i=f.sent()))throw Error("Folder does not exist.");if("directory"!==i.type)throw Error("Requested path is not a directory");return[4,this.readdir({path:t,directory:n})];case 2:if(0!==(o=f.sent()).files.length&&!r)throw Error("Folder is not empty");u=0,s=o.files,f.label=3;case 3:return u<s.length?(c=s[u],l=t+"/"+c,[4,this.stat({path:l,directory:n})]):[3,9];case 4:return"file"!==f.sent().type?[3,6]:[4,this.deleteFile({path:l,directory:n})];case 5:return f.sent(),[3,8];case 6:return[4,this.rmdir({path:l,directory:n,recursive:r})];case 7:f.sent(),f.label=8;case 8:return u++,[3,3];case 9:return[4,this.dbRequest("delete",[a])];case 10:return f.sent(),[2,{}]}}))}))},t.prototype.readdir=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n,r;return Object(x.c)(this,(function(a){switch(a.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(n=a.sent(),""!==e.path&&void 0===n)throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:return r=a.sent(),[2,{files:r.map((function(e){return e.substring(t.length+1)}))}]}}))}))},t.prototype.getUri=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n;return Object(x.c)(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{uri:n.path}]}}))}))},t.prototype.stat=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n;return Object(x.c)(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}]}}))}))},t.prototype.rename=function(e){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(t){return[2,this._copy(e,!0)]}))}))},t.prototype.copy=function(e){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(t){return[2,this._copy(e,!1)]}))}))},t.prototype._copy=function(e,t){return void 0===t&&(t=!1),Object(x.a)(this,void 0,void 0,(function(){var n,r,a,i,o,u,s,c,l,f,d,h,p,v,m,g,b=this;return Object(x.c)(this,(function(y){switch(y.label){case 0:if(n=e.to,r=e.from,a=e.directory,i=e.toDirectory,!n||!r)throw Error("Both to and from must be provided");if(i||(i=a),o=this.getPath(a,r),u=this.getPath(i,n),o===u)return[2,{}];if(u.startsWith(o))throw Error("To path cannot contain the from path");y.label=1;case 1:return y.trys.push([1,3,,6]),[4,this.stat({path:n,directory:i})];case 2:return s=y.sent(),[3,6];case 3:return y.sent(),(c=n.split("/")).pop(),l=c.join("/"),c.length>0?[4,this.stat({path:l,directory:i})]:[3,5];case 4:if("directory"!==y.sent().type)throw new Error("Parent directory of the to path is a file");y.label=5;case 5:return[3,6];case 6:if(s&&"directory"===s.type)throw new Error("Cannot overwrite a directory with a file");return[4,this.stat({path:r,directory:a})];case 7:switch(f=y.sent(),d=function(e,t,n){return Object(x.a)(b,void 0,void 0,(function(){var r,a;return Object(x.c)(this,(function(o){switch(o.label){case 0:return r=this.getPath(i,e),[4,this.dbRequest("get",[r])];case 1:return(a=o.sent()).ctime=t,a.mtime=n,[4,this.dbRequest("put",[a])];case 2:return o.sent(),[2]}}))}))},f.type){case"file":return[3,8];case"directory":return[3,15]}return[3,28];case 8:return[4,this.readFile({path:r,directory:a})];case 9:return h=y.sent(),t?[4,this.deleteFile({path:r,directory:a})]:[3,11];case 10:y.sent(),y.label=11;case 11:return[4,this.writeFile({path:n,directory:i,data:h.data})];case 12:return y.sent(),t?[4,d(n,f.ctime,f.mtime)]:[3,14];case 13:y.sent(),y.label=14;case 14:return[2,{}];case 15:if(s)throw Error("Cannot move a directory over an existing object");y.label=16;case 16:return y.trys.push([16,20,,21]),[4,this.mkdir({path:n,directory:i,recursive:!1})];case 17:return y.sent(),t?[4,d(n,f.ctime,f.mtime)]:[3,19];case 18:y.sent(),y.label=19;case 19:return[3,21];case 20:return y.sent(),[3,21];case 21:return[4,this.readdir({path:r,directory:a})];case 22:p=y.sent().files,v=0,m=p,y.label=23;case 23:return v<m.length?(g=m[v],[4,this._copy({from:r+"/"+g,to:n+"/"+g,directory:a,toDirectory:i},t)]):[3,26];case 24:y.sent(),y.label=25;case 25:return v++,[3,23];case 26:return t?[4,this.rmdir({path:r,directory:a})]:[3,28];case 27:y.sent(),y.label=28;case 28:return[2,{}]}}))}))},t._debug=!0,t}(y)),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){if(t&&"object"===typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})),e});new(function(e){function t(){return e.call(this,{name:"Geolocation",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.getCurrentPosition=function(e){var t=this;return new Promise((function(n,r){return t.requestPermissions().then((function(t){window.navigator.geolocation.getCurrentPosition((function(e){n(e)}),(function(e){r(e)}),O({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e))}))}))},t.prototype.watchPosition=function(e,t){return""+window.navigator.geolocation.watchPosition((function(e){t(e)}),(function(e){t(null,e)}),O({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e))},t.prototype.clearWatch=function(e){return window.navigator.geolocation.clearWatch(parseInt(e.id,10)),Promise.resolve()},t}(y)),new(function(e){function t(){return e.call(this,{name:"Device",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.getInfo=function(){return Object(x.a)(this,void 0,void 0,(function(){var e,t;return Object(x.c)(this,(function(n){return e=navigator.userAgent,t=this.parseUa(e),[2,Promise.resolve({model:t.model,platform:"web",appVersion:"",appBuild:"",appId:"",appName:"",operatingSystem:t.operatingSystem,osVersion:t.osVersion,manufacturer:navigator.vendor,isVirtual:!1,uuid:this.getUid()})]}))}))},t.prototype.getBatteryInfo=function(){return Object(x.a)(this,void 0,void 0,(function(){var e;return Object(x.c)(this,(function(t){switch(t.label){case 0:e={},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.getBattery()];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,Promise.resolve({batteryLevel:e.level,isCharging:e.charging})]}}))}))},t.prototype.getLanguageCode=function(){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(e){return[2,{value:navigator.language}]}))}))},t.prototype.parseUa=function(e){var t={},n=e.indexOf("(")+1,r=e.indexOf(") AppleWebKit");-1!==e.indexOf(") Gecko")&&(r=e.indexOf(") Gecko"));var a=e.substring(n,r);if(-1!==e.indexOf("Android"))t.model=a.replace("; wv","").split("; ").pop().split(" Build")[0],t.osVersion=a.split("; ")[1];else if(t.model=a.split("; ")[0],navigator.oscpu)t.osVersion=navigator.oscpu;else if(-1!==e.indexOf("Windows"))t.osVersion=a;else{var i=a.split("; ").pop().replace(" like Mac OS X","").split(" ");t.osVersion=i[i.length-1].replace(/_/g,".")}return/android/i.test(e)?t.operatingSystem="android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?t.operatingSystem="ios":/Win/.test(e)?t.operatingSystem="windows":/Mac/i.test(e)?t.operatingSystem="mac":t.operatingSystem="unknown",t},t.prototype.getUid=function(){var e=window.localStorage.getItem("_capuid");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("_capuid",e),e)},t}(y)),new(function(e){function t(){var t=e.call(this,{name:"LocalNotifications",platforms:["web"]})||this;return t.pending=[],t}return Object(x.b)(t,e),t.prototype.createChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},t.prototype.deleteChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},t.prototype.listChannels=function(){throw new Error("Feature not available in the browser")},t.prototype.sendPending=function(){var e=this,t=[],n=+new Date;this.pending.forEach((function(r){r.schedule&&r.schedule.at&&+r.schedule.at<=n&&(e.buildNotification(r),t.push(r))})),console.log("Sent pending, removing",t),this.pending=this.pending.filter((function(e){return!t.find((function(t){return t===e}))}))},t.prototype.sendNotification=function(e){var t=this,n=e;if(e.schedule&&e.schedule.at){var r=+e.schedule.at-+new Date;return this.pending.push(n),void setTimeout((function(){t.sendPending()}),r)}this.buildNotification(e)},t.prototype.buildNotification=function(e){var t=e;return new Notification(t.title,{body:t.body})},t.prototype.schedule=function(e){var t=this,n=[];return e.notifications.forEach((function(e){n.push(t.sendNotification(e))})),Promise.resolve({notifications:e.notifications.map((function(e){return{id:""+e.id}}))})},t.prototype.getPending=function(){return Promise.resolve({notifications:this.pending.map((function(e){return{id:""+e.id}}))})},t.prototype.registerActionTypes=function(e){throw new Error("Method not implemented.")},t.prototype.cancel=function(e){return console.log("Cancel these",e),this.pending=this.pending.filter((function(t){return!e.notifications.find((function(e){return e.id===""+t.id}))})),Promise.resolve()},t.prototype.areEnabled=function(){return Promise.resolve({value:"granted"===Notification.permission})},t.prototype.requestPermission=function(){return new Promise((function(e){Notification.requestPermission((function(t){var n=!0;"denied"!==t&&"default"!==t||(n=!1),e({granted:n})}))}))},t.prototype.requestPermissions=function(){return new Promise((function(e,t){Notification.requestPermission((function(n){"denied"!==n&&"default"!==n?e({results:[n]}):t(n)}))}))},t}(y)),new(function(e){function t(){return e.call(this,{name:"Share",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.share=function(e){return navigator.share?navigator.share({title:e.title,text:e.text,url:e.url}):Promise.reject("Web Share API not available")},t}(y)),new(function(e){function t(){return e.call(this,{name:"Modals",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.alert=function(e){return Object(x.a)(this,void 0,void 0,(function(){return Object(x.c)(this,(function(t){return window.alert(e.message),[2,Promise.resolve()]}))}))},t.prototype.prompt=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t;return Object(x.c)(this,(function(n){return t=window.prompt(e.message,e.inputText||""),[2,Promise.resolve({value:t,cancelled:null===t})]}))}))},t.prototype.confirm=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t;return Object(x.c)(this,(function(n){return t=window.confirm(e.message),[2,Promise.resolve({value:t})]}))}))},t.prototype.showActions=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t=this;return Object(x.c)(this,(function(n){return[2,new Promise((function(n,r){return Object(x.a)(t,void 0,void 0,(function(){var t,r=this;return Object(x.c)(this,(function(a){return(t=document.querySelector("pwa-action-sheet"))||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.title,t.cancelable=!1,t.options=e.options,t.addEventListener("onSelection",(function(e){return Object(x.a)(r,void 0,void 0,(function(){var t;return Object(x.c)(this,(function(r){return t=e.detail,n({index:t}),[2]}))}))})),[2]}))}))}))]}))}))},t}(y)),new(function(e){function t(){var t=e.call(this,{name:"Motion"})||this;return t.registerWindowListener("devicemotion","accel"),t.registerWindowListener("deviceorientation","orientation"),t}return Object(x.b)(t,e),t}(y)),new(function(e){function t(){var t=e.call(this,{name:"Network",platforms:["web"]})||this;return t.listenerFunction=null,t}return Object(x.b)(t,e),t.prototype.getStatus=function(){return new Promise((function(e,t){if(window.navigator){var n=window.navigator.onLine,r=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,a=r?r.type||r.effectiveType:"wifi";e({connected:n,connectionType:n?a:"none"})}else t("Network info not available")}))},t.prototype.addListener=function(e,t){var n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,r=n?n.type||n.effectiveType:"wifi",a=t.bind(this,{connected:!0,connectionType:r}),i=t.bind(this,{connected:!1,connectionType:"none"});if(0===e.localeCompare("networkStatusChange"))return window.addEventListener("online",a),window.addEventListener("offline",i),{remove:function(){window.removeEventListener("online",a),window.removeEventListener("offline",i)}}},t}(y)),new(function(e){function t(){return e.call(this,{name:"Permissions"})||this}return Object(x.b)(t,e),t.prototype.query=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n;return Object(x.c)(this,(function(r){switch(r.label){case 0:return(t=window.navigator).permissions?(n=e.name===h.Photos?"camera":e.name,[4,t.permissions.query({name:n})]):[2,Promise.reject("This browser does not support the Permissions API")];case 1:return[2,{state:r.sent().state}]}}))}))},t}(y)),new(function(e){function t(){return e.call(this,{name:"SplashScreen",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.show=function(e,t){return Promise.resolve()},t.prototype.hide=function(e,t){return Promise.resolve()},t}(y)),new(function(e){function t(){var t=e.call(this,{name:"Storage",platforms:["web"]})||this;return t.KEY_PREFIX="_cap_",t}return Object(x.b)(t,e),t.prototype.get=function(e){var t=this;return new Promise((function(n,r){n({value:window.localStorage.getItem(t.makeKey(e.key))})}))},t.prototype.set=function(e){var t=this;return new Promise((function(n,r){window.localStorage.setItem(t.makeKey(e.key),e.value),n()}))},t.prototype.remove=function(e){var t=this;return new Promise((function(n,r){window.localStorage.removeItem(t.makeKey(e.key)),n()}))},t.prototype.keys=function(){var e=this;return new Promise((function(t,n){t({keys:Object.keys(localStorage).filter((function(t){return e.isKey(t)})).map((function(t){return e.getKey(t)}))})}))},t.prototype.clear=function(){var e=this;return new Promise((function(t,n){Object.keys(localStorage).filter((function(t){return e.isKey(t)})).forEach((function(e){return window.localStorage.removeItem(e)})),t()}))},t.prototype.makeKey=function(e){return this.KEY_PREFIX+e},t.prototype.isKey=function(e){return 0===e.indexOf(this.KEY_PREFIX)},t.prototype.getKey=function(e){return e.substr(this.KEY_PREFIX.length)},t}(y)),new(function(e){function t(){return e.call(this,{name:"Toast",platforms:["web"]})||this}return Object(x.b)(t,e),t.prototype.show=function(e){return Object(x.a)(this,void 0,void 0,(function(){var t,n;return Object(x.c)(this,(function(r){return t=2e3,e.duration&&(t="long"===e.duration?3500:2e3),(n=document.createElement("pwa-toast")).duration=t,n.message=e.text,document.body.appendChild(n),[2]}))}))},t}(y));!function(e){for(var t=0,n=b.getPlugins();t<n.length;t++){var r=n[t];w(e,r)}}(g.a)},function(e,t,n){"use strict";n.r(t),n.d(t,"createGesture",(function(){return s}));var r=n(214);n.d(t,"GESTURE_CONTROLLER",(function(){return r.a}));var a,i=function(e,t,n,r){var a,i,u=o(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;return e.__zone_symbol__addEventListener?(a="__zone_symbol__addEventListener",i="__zone_symbol__removeEventListener"):(a="addEventListener",i="removeEventListener"),e[a](t,n,u),function(){e[i](t,n,u)}},o=function(e){if(void 0===a)try{var t=Object.defineProperty({},"passive",{get:function(){a=!0}});e.addEventListener("optsTest",(function(){}),t)}catch(n){a=!1}return!!a},u=function(e){return e instanceof Document?e:e.ownerDocument},s=function(e){var t=!1,n=!1,a=!0,o=!1,s=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),d=s.canStart,h=s.onWillStart,p=s.onStart,v=s.onEnd,m=s.notCaptured,g=s.onMove,b=s.threshold,y=s.passive,w=s.blurOnStart,x={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},O=function(e,t,n){var r=n*(Math.PI/180),a="x"===e,i=Math.cos(r),o=t*t,u=0,s=0,c=!1,l=0;return{start:function(e,t){u=e,s=t,l=0,c=!0},detect:function(e,t){if(!c)return!1;var n=e-u,r=t-s,f=n*n+r*r;if(f<o)return!1;var d=Math.sqrt(f),h=(a?n:r)/d;return l=h>i?1:h<-i?-1:0,c=!1,!0},isGesture:function(){return 0!==l},getDirection:function(){return l}}}(s.direction,s.threshold,s.maxAngle),k=r.a.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),j=function(){t&&(o=!1,g&&g(x))},_=function(){return!(k&&!k.capture())&&(t=!0,a=!1,x.startX=x.currentX,x.startY=x.currentY,x.startTime=x.currentTime,h?h(x).then(S):S(),!0)},S=function(){w&&function(){if("undefined"!==typeof document){var e=document.activeElement;null!==e&&e.blur&&e.blur()}}(),p&&p(x),a=!0},E=function(){t=!1,n=!1,o=!1,a=!0,k.release()},C=function(e){var n=t,r=a;E(),r&&(c(x,e),n?v&&v(x):m&&m(x))},A=function(e,t,n,r,a){var o,s,c,l,f,d,h,p=0,v=function(r){p=Date.now()+2e3,t(r)&&(!s&&n&&(s=i(e,"touchmove",n,a)),c||(c=i(r.target,"touchend",g,a)),l||(l=i(r.target,"touchcancel",g,a)))},m=function(r){p>Date.now()||t(r)&&(!d&&n&&(d=i(u(e),"mousemove",n,a)),h||(h=i(u(e),"mouseup",b,a)))},g=function(e){y(),r&&r(e)},b=function(e){w(),r&&r(e)},y=function(){s&&s(),c&&c(),l&&l(),s=c=l=void 0},w=function(){d&&d(),h&&h(),d=h=void 0},x=function(){y(),w()},O=function(t){void 0===t&&(t=!0),t?(o||(o=i(e,"touchstart",v,a)),f||(f=i(e,"mousedown",m,a))):(o&&o(),f&&f(),o=f=void 0,x())};return{enable:O,stop:x,destroy:function(){O(!1),r=n=t=void 0}}}(s.el,(function(e){var t=f(e);return!(n||!a)&&(l(e,x),x.startX=x.currentX,x.startY=x.currentY,x.startTime=x.currentTime=t,x.velocityX=x.velocityY=x.deltaX=x.deltaY=0,x.event=e,(!d||!1!==d(x))&&(k.release(),!!k.start()&&(n=!0,0===b?_():(O.start(x.startX,x.startY),!0))))}),(function(e){t?!o&&a&&(o=!0,c(x,e),requestAnimationFrame(j)):(c(x,e),O.detect(x.currentX,x.currentY)&&(O.isGesture()&&_()||T()))}),C,{capture:!1,passive:y}),T=function(){E(),A.stop(),m&&m(x)};return{enable:function(e){void 0===e&&(e=!0),e||(t&&C(void 0),E()),A.enable(e)},destroy:function(){k.destroy(),A.destroy()}}},c=function(e,t){if(t){var n=e.currentX,r=e.currentY,a=e.currentTime;l(t,e);var i=e.currentX,o=e.currentY,u=(e.currentTime=f(t))-a;if(u>0&&u<100){var s=(i-n)/u,c=(o-r)/u;e.velocityX=.7*s+.3*e.velocityX,e.velocityY=.7*c+.3*e.velocityY}e.deltaX=i-e.startX,e.deltaY=o-e.startY,e.event=t}},l=function(e,t){var n=0,r=0;if(e){var a=e.changedTouches;if(a&&a.length>0){var i=a[0];n=i.clientX,r=i.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},f=function(e){return e.timeStamp||Date.now()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,o){return i(e[1],t[1],n[1],r[1],o).map((function(i){return a(e[0],t[0],n[0],r[0],i)}))},a=function(e,t,n,r,a){return a*(3*t*Math.pow(a-1,2)+a*(-3*n*a+3*n+r*a))-e*Math.pow(a-1,3)},i=function(e,t,n,r,a){return o((r-=a)-3*(n-=a)+3*(t-=a)-(e-=a),3*n-6*t+3*e,3*t-3*e,e).filter((function(e){return e>=0&&e<=1}))},o=function(e,t,n,r){if(0===e)return function(e,t,n){var r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]}(t,n,r);var a=(3*(n/=e)-(t/=e)*t)/3,i=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===a)return[Math.pow(-i,1/3)];if(0===i)return[Math.sqrt(-a),-Math.sqrt(-a)];var o=Math.pow(i/2,2)+Math.pow(a/3,3);if(0===o)return[Math.pow(i/2,.5)-t/3];if(o>0)return[Math.pow(-i/2+Math.sqrt(o),1/3)-Math.pow(i/2+Math.sqrt(o),1/3)-t/3];var u=Math.sqrt(Math.pow(-a/3,3)),s=Math.acos(-i/(2*Math.sqrt(Math.pow(-a/3,3)))),c=2*Math.pow(u,1/3);return[c*Math.cos(s/3)-t/3,c*Math.cos((s+2*Math.PI)/3)-t/3,c*Math.cos((s+4*Math.PI)/3)-t/3]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){try{if(e instanceof c)return e.value;if(!o()||"string"!==typeof e||""===e)return e;var t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,s.forEach((function(e){for(var n=t.querySelectorAll(e),r=n.length-1;r>=0;r--){var o=n[r];o.parentNode?o.parentNode.removeChild(o):t.removeChild(o);for(var u=i(o),s=0;s<u.length;s++)a(u[s])}}));for(var r=i(t),u=0;u<r.length;u++)a(r[u]);var l=document.createElement("div");l.appendChild(t);var f=l.querySelector("div");return null!==f?f.innerHTML:l.innerHTML}catch(d){return console.error(d),""}},a=function e(t){if(!t.nodeType||1===t.nodeType){for(var n=t.attributes.length-1;n>=0;n--){var r=t.attributes.item(n),a=r.name;if(u.includes(a.toLowerCase())){var o=r.value;null!=o&&o.toLowerCase().includes("javascript:")&&t.removeAttribute(a)}else t.removeAttribute(a)}var s=i(t);for(n=0;n<s.length;n++)e(s[n])}},i=function(e){return null!=e.children?e.children:e.childNodes},o=function(){var e=window,t=e&&e.Ionic&&e.Ionic.config;return!t||(t.get?t.get("sanitizerEnabled",!0):!0===t.sanitizerEnabled||void 0===t.sanitizerEnabled)},u=["class","id","href","src","name","slot"],s=["script","style","iframe","meta","link","object","embed"],c=function(e){this.value=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(35),a=n(213),i=n(69),o=n(78),u=n(51),s=function(e){return Object(u.a)().duration(e?400:300)},c=function(e){var t,n,r=e.width+8,a=Object(u.a)(),i=Object(u.a)();e.isEndSide?(t=r+"px",n="0px"):(t=-r+"px",n="0px"),a.addElement(e.menuInnerEl).fromTo("transform","translateX("+t+")","translateX("+n+")");var c="ios"===Object(o.b)(e),l=c?.2:.25;return i.addElement(e.backdropEl).fromTo("opacity",.01,l),s(c).addAnimation([a,i])},l=function(e){var t,n,r=Object(o.b)(e),a=e.width;e.isEndSide?(t=-a+"px",n=a+"px"):(t=a+"px",n=-a+"px");var i=Object(u.a)().addElement(e.menuInnerEl).fromTo("transform","translateX("+n+")","translateX(0px)"),c=Object(u.a)().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX("+t+")"),l=Object(u.a)().addElement(e.backdropEl).fromTo("opacity",.01,.32);return s("ios"===r).addAnimation([i,c,l])},f=function(e){var t=Object(o.b)(e),n=e.width*(e.isEndSide?-1:1)+"px",r=Object(u.a)().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX("+n+")");return s("ios"===t).addAnimation(r)},d=function(){var e=new Map,t=[],n=function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var n,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,m()];case 1:return r.sent(),"start"===e||"end"===e?(n=v((function(t){return t.side===e&&!t.disabled})))?[2,n]:[2,v((function(t){return t.side===e}))]:null!=e?[2,v((function(t){return t.menuId===e}))]:(a=v((function(e){return!e.disabled})))?[2,a]:[2,t.length>0?t[0].el:void 0]}}))}))},o=function(){return Object(r.a)(void 0,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[2,d()]}}))}))},u=function(t,n){e.set(t,n)},s=function(e){var n=e.side;t.filter((function(t){return t.side===n&&t!==e})).forEach((function(e){return e.disabled=!0}))},d=function(){return v((function(e){return e._isOpen}))},h=function(){return t.map((function(e){return e.el}))},p=function(){return t.some((function(e){return e.isAnimating}))},v=function(e){var n=t.find(e);if(void 0!==n)return n.el},m=function(){return Promise.all(Array.from(document.querySelectorAll("ion-menu")).map((function(e){return new Promise((function(t){return Object(i.c)(e,t)}))})))};return u("reveal",f),u("push",l),u("overlay",c),"undefined"!==typeof document&&document.addEventListener("ionBackButton",(function(e){var t=d();t&&e.detail.register(a.MENU_BACK_BUTTON_PRIORITY,(function(){return t.close()}))})),{registerAnimation:u,get:n,getMenus:function(){return Object(r.a)(void 0,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[2,h()]}}))}))},getOpen:o,isEnabled:function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,n(e)];case 1:return(t=r.sent())?[2,!t.disabled]:[2,!1]}}))}))},swipeGesture:function(e,t){return Object(r.a)(void 0,void 0,void 0,(function(){var a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,n(t)];case 1:return(a=r.sent())&&(a.swipeGesture=e),[2,a]}}))}))},isAnimating:function(){return Object(r.a)(void 0,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[2,p()]}}))}))},isOpen:function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return null==e?[3,2]:[4,n(e)];case 1:return[2,void 0!==(t=r.sent())&&t.isOpen()];case 2:return[4,o()];case 3:return[2,void 0!==(t=r.sent())]}}))}))},enable:function(e,t){return Object(r.a)(void 0,void 0,void 0,(function(){var a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,n(t)];case 1:return(a=r.sent())&&(a.disabled=!e),[2,a]}}))}))},toggle:function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,n(e)];case 1:return(t=r.sent())?[2,t.toggle()]:[2,!1]}}))}))},close:function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,void 0!==e?n(e):o()];case 1:return void 0!==(t=r.sent())?[2,t.close()]:[2,!1]}}))}))},open:function(e){return Object(r.a)(void 0,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,n(e)];case 1:return(t=r.sent())?[2,t.open()]:[2,!1]}}))}))},_getOpenSync:d,_createAnimation:function(t,n){var r=e.get(t);if(!r)throw new Error("animation not registered");return r(n)},_register:function(e){t.indexOf(e)<0&&(e.disabled||s(e),t.push(e))},_unregister:function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},_setOpen:function(e,t,n){return Object(r.a)(void 0,void 0,void 0,(function(){var a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return p()?[2,!1]:t?[4,o()]:[3,3];case 1:return(a=r.sent())&&e.el!==a?[4,a.setOpen(!1,!1)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2,e._setOpen(t,n)]}}))}))},_setActiveMenu:s}}()},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return m}));!function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)}}();var r,a,i=!1,o="undefined"!==typeof window?window:{},u=(o.document,{$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}}),s=(function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replace}catch(r){}}(),new WeakMap,function(e){return"object"===(e=typeof e)||"function"===e}),c=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=null,i=!1,o=!1,u=[],c=function t(n){for(var r=0;r<n.length;r++)a=n[r],Array.isArray(a)?t(a):null!=a&&"boolean"!==typeof a&&((i="function"!==typeof e&&!s(a))&&(a=String(a)),i&&o?u[u.length-1].$text$+=a:u.push(i?l(null,a):a),o=i)};if(c(n),t){var f=t.className||t.class;f&&(t.class="object"!==typeof f?f:Object.keys(f).filter((function(e){return f[e]})).join(" "))}var d=l(e,null);return d.$attrs$=t,u.length>0&&(d.$children$=u),d},l=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null};return n},f={},d=function(e){return v(e).$hostElement$},h=function(e){var t=new URL(e,u.$resourcesUrl$);return t.origin!==o.location.origin?t.href:t.pathname},p=new WeakMap,v=function(e){return p.get(e)},m=function(e,t){return p.set(t.$lazyInstance$=e,t)},g=function(e,t){return(0,console.error)(e,t)},b=(new Map,new Map,[]),y=[],w=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){g(e)}e.length=0},x=function e(){w(b),w(y),(i=b.length>0)&&u.raf(e)},O=function(e){return function(e){return Promise.resolve(e)}().then(e)};r=y,a=!0},function(e,t,n){"use strict";e.exports=n(536)},function(e,t,n){},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({acos_:function(e){var t={x:Object(i.a)(e,"x","acos")};return r.a.runKernel(a.b,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({acosh_:function(e){var t={x:Object(i.a)(e,"x","acosh")};return r.a.runKernel(a.c,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({addN_:function(e){o.b(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),o.b(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Object(i.a)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!o.a(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var u=t;return r.a.runKernel(a.e,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({asin_:function(e){var t={x:Object(i.a)(e,"x","asin")};return r.a.runKernel(a.j,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({asinh_:function(e){var t={x:Object(i.a)(e,"x","asinh")};return r.a.runKernel(a.k,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({atan_:function(e){var t={x:Object(i.a)(e,"x","atan")};return r.a.runKernel(a.l,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({atanh_:function(e){var t={x:Object(i.a)(e,"x","atanh")};return r.a.runKernel(a.n,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(27),s=n(12),c=n(19);var l=Object(s.b)({avgPool3d_:function(e,t,n,s,l){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",d=Object(i.a)(e,"x","avgPool3d","float32"),h=d,p=!1;4===d.rank&&(p=!0,h=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===h.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(h.rank,".")})),o.b("NDHWC"===f,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(f)})),null!=l&&o.b(o.v(s),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var v={x:h},m={filterSize:t,strides:n,pad:s,dimRoundingMode:l,dataFormat:f},g=r.a.runKernel(a.p,v,m);return g=Object(u.a)(g,h.dtype),p?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({broadcastArgs_:function(e,t){var n=Object(i.a)(e,"s0","broadcastArgs","int32"),o=Object(i.a)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==o.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(o.rank));var u={s0:n,s1:o};return r.a.runKernel(a.v,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({ceil_:function(e){var t={x:Object(i.a)(e,"x","ceil")};return r.a.runKernel(a.y,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({clipByValue_:function(e,t,n){var u=Object(i.a)(e,"x","clipByValue");o.b(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var s={x:u},c={clipValueMin:t,clipValueMax:n};return r.a.runKernel(a.z,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(56),s=n(12),c=n(19);var l=Object(s.b)({conv3d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],d=Object(i.a)(e,"x","conv3d"),h=Object(i.a)(t,"filter","conv3d"),p=d,v=!1;4===d.rank&&(v=!0,p=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===p.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(p.rank,".")})),o.b(5===h.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(h.rank,".")})),o.b(p.shape[4]===h.shape[3],(function(){return"Error in conv3d: depth of input (".concat(p.shape[4],") must match ")+"input depth for filter ".concat(h.shape[3],".")})),o.b(Object(u.h)(n,f),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")})),o.b("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")}));var m={x:p,filter:h},g={strides:n,pad:s,dataFormat:l,dilations:f},b=r.a.runKernel(a.G,m,g);return v?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12);var s=Object(u.b)({denseBincount_:function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(e,"x","denseBincount"),c=Object(i.a)(t,"weights","denseBincount");o.b("int32"===s.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.b(s.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(s.rank,".")})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(c.size===s.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(s.shape,", weights shape: ")+"".concat(c.shape,".")}));var l={x:s,weights:c},f={size:n,binaryOutput:u};return r.a.runKernel(a.N,l,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var u=n.map((function(e,t){return Object(i.a)(e,"tensors".concat(t),"einsum")})),s={equation:e};return r.a.runKernel(a.W,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(27),s=n(12);var c=Object(s.b)({erf_:function(e){var t=Object(i.a)(e,"x","erf");o.b("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Object(u.a)(t,"float32"));var n={x:t};return r.a.runKernel(a.ab,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({expm1_:function(e){var t={x:Object(i.a)(e,"x","expm1")};return r.a.runKernel(a.db,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({isFinite_:function(e){var t={x:Object(i.a)(e,"x","isFinite")};return r.a.runKernel(a.ub,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({isInf_:function(e){var t={x:Object(i.a)(e,"x","isInf")};return r.a.runKernel(a.vb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({isNaN_:function(e){var t={x:Object(i.a)(e,"x","isNaN")};return r.a.runKernel(a.wb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(13),a=n(8);function i(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var i={start:e,stop:t,num:n};return r.a.runKernel(a.Cb,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(64),a=n(7),i=n(22),o=n(55),u=n(12),s=n(110),c=n(267);var l=Object(u.b)({logSigmoid_:function(e){var t=Object(a.a)(e,"x","logSigmoid");return Object(r.a)((function(e){return{value:Object(o.a)(Object(c.a)(Object(o.a)(e))),gradFunc:function(t){return Object(i.a)(t,Object(s.a)(Object(o.a)(e)))}}}))(t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),a=n(64),i=n(7),o=n(27),u=n(71),s=n(118),c=n(112),l=n(22),f=n(12),d=n(31),h=n(34);var p=Object(f.b)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var f=Object(a.a)((function(e,n){var a=Object(c.a)(e,t,!0),i=Object(d.a)(e,a),f=Object(d.a)(Object(o.a)(i,"float32"),Object(s.a)(Object(h.a)(Object(u.a)(i),t,!0)));n([f]);return{value:f,gradFunc:function(e,n){var a=Object(r.a)(n,1)[0],i=Object(u.a)(a);return Object(d.a)(e,Object(l.a)(Object(h.a)(e,t,!0),i))}}}));return f(n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(8),i=n(7),o=n(20),u=n(12),s=n(19);var c=Object(u.b)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",f=Object(i.a)(e,"x","maxPool3d"),d=f,h=!1;4===f.rank&&(h=!0,d=Object(s.a)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.b(5===d.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(d.rank,".")})),o.b("NDHWC"===l,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(l)})),null!=c&&o.b(o.v(u),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(u,".")}));var p={x:d},v={filterSize:t,strides:n,pad:u,dimRoundingMode:c,dataFormat:l},m=r.a.runKernel(a.Lb,p,v);return h?Object(s.a)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({maxPoolWithArgmax_:function(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Object(i.a)(e,"x","maxPoolWithArgmax"),c={x:s},l={filterSize:t,strides:n,pad:o,includeBatchInIndex:u},f=r.a.runKernel(a.Ob,c,l);return{result:f[0],indexes:f[1]}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(12),u=n(19);var s=Object(o.b)({multinomial_:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(e,"logits","multinomial"),c=s.size,l=s.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();var f=1===l?Object(u.a)(s,[1,-1]):s,d={logits:f},h={numSamples:t,seed:n,normalized:o},p=r.a.runKernel(a.Vb,d,h);return 1===l?Object(u.a)(p,[p.size]):p}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({onesLike_:function(e){var t={x:Object(i.a)(e,"x","onesLike")};return r.a.runKernel(a.dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({reciprocal_:function(e){var t={x:Object(i.a)(e,"x","reciprocal")};return r.a.runKernel(a.nc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r),i=n(15),o=n(18),u=n(7),s=n(20);function c(){return(c=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,l,f,d,h,p,v,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(t,"x","setdiff1d"),i=Object(u.a)(n,"y","setdiff1d"),s.b(r.dtype===i.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(i.dtype,").")})),s.b(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),s.b(1===i.rank,(function(){return"y should be 1D tensor, but got y (".concat(i.shape,").")})),e.next=7,r.data();case 7:return c=e.sent,e.next=10,i.data();case 10:for(l=e.sent,f=new Set(l),d=0,h=0;h<c.length;h++)f.has(c[h])||d++;for(p=new o.b([d],r.dtype),v=new o.b([d],"int32"),m=0,g=0;m<c.length;m++)f.has(c[m])||(p.values[g]=c[m],v.values[g]=m,g++);return e.abrupt("return",[p.toTensor(),v.toTensor()]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e,t){return c.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({sign_:function(e){var t={x:Object(i.a)(e,"x","sign")};return r.a.runKernel(a.Dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var o={logits:n},u={dim:t};return r.a.runKernel(a.Hc,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({stridedSlice_:function(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=Object(i.a)(e,"x","stridedSlice","string_or_numeric"),h={x:d},p={begin:t,end:n,strides:o,beginMask:u,endMask:s,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:f};return r.a.runKernel(a.Uc,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({tan_:function(e){var t={x:Object(i.a)(e,"x","tan")};return r.a.runKernel(a.ad,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(81),a=n(12),i=n(160);var o=Object(a.b)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var u=new i.a(t,n,a,!0,o),s=Object(r.a)(e,a),c=0;c<s.values.length;c++)s.values[c]=u.nextValue();return s.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8),i=n(7),o=n(12),u=n(179);var s=Object(o.b)({scatterND_:function(e,t,n){var o=Object(i.a)(e,"indices","scatterND","int32"),s=Object(i.a)(t,"updates","scatterND");u.validateInput(s,o,n);var c={indices:o,updates:s},l={shape:n};return r.a.runKernel(a.zc,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(13),a=n(8),i=n(7),o=n(12);var u=Object(o.b)({gatherND_:function(e,t){var n=Object(i.a)(t,"indices","gatherND","int32"),o={params:Object(i.a)(e,"x","gatherND","string_or_numeric"),indices:n};return r.a.runKernel(a.nb,o)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof e?e:function(e){return e()};function a(){return new Promise((function(e){return r((function(){return e()}))}))}}).call(this,n(569).setImmediate)},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return 0!==r(e,t,n)}},function(e,t,n){var r=n(326),a=n(397),i=n(244),o=n(329),u=n(328),s=n(330);e.exports=function(e,t,n,c){switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return a(e,n,c);case">":return i(e,n,c);case">=":return o(e,n,c);case"<":return u(e,n,c);case"<=":return s(e,n,c);default:throw new TypeError("Invalid operator: ".concat(t))}}},function(e,t,n){"use strict";t.a=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(156);function a(e,t){void 0===t&&(t=e,e=r.a);for(var n=0,a=t.length-1,i=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(a-1,Math.floor(e*=a)));return o[t](e-t)}}},function(e,t,n){"use strict";function r(e){return((e=Math.exp(e))+1/e)/2}t.a=function e(t,n,a){function i(e,i){var o,u,s=e[0],c=e[1],l=e[2],f=i[0],d=i[1],h=i[2],p=f-s,v=d-c,m=p*p+v*v;if(m<1e-12)u=Math.log(h/l)/t,o=function(e){return[s+e*p,c+e*v,l*Math.exp(t*e*u)]};else{var g=Math.sqrt(m),b=(h*h-l*l+a*m)/(2*l*n*g),y=(h*h-l*l-a*m)/(2*h*n*g),w=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(y*y+1)-y);u=(x-w)/t,o=function(e){var a,i=e*u,o=r(w),f=l/(n*g)*(o*(a=t*i+w,((a=Math.exp(2*a))-1)/(a+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[s+f*p,c+f*v,l*o/r(t*i+w)]}}return o.duration=1e3*u*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processStyleName=void 0,t.createMarkupForStyles=function(e,t){var n="";for(var a in e){var i=0===a.indexOf("--");if(e.hasOwnProperty(a)&&"label"!==a){var o=e[a];0,null!=o&&(i?n+=a+":"+o+";":(n+=u(a)+":",n+=(0,r.default)(a,o,t)+";"))}}return n||null};o(n(621));var r=o(n(623)),a=o(n(626)),i=o(n(628));o(n(403));function o(e){return e&&e.__esModule?e:{default:e}}var u=t.processStyleName=(0,i.default)(a.default)},function(e,t,n){"use strict";var r=n(625);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSurfaceInfo=function(e){return null!=e.name},t.isSurface=function(e){return e.drawArea instanceof HTMLElement}},function(e,t,n){"use strict";var r=n(143),a=n(144);Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(648),u="tfjs-visor-container";t.visor=function(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(u)&&null!=i)return i;var e,t=document.getElementById(u);function n(t,n){var r=null;return e=o.VisorComponent.render(t,e,{ref:function(e){return r=e},surfaceList:Array.from(n.values())}),r}null==t&&((t=document.createElement("div")).id=u,document.body.appendChild(t));var r=new Map,a=n(t,r);return i=new s(a,t,r,n)};var s=function(){function e(t,n,a,i){r(this,e),this.visorComponent=t,this.el=n,this.surfaceList=a,this.renderVisor=i}return a(e,[{key:"surface",value:function(e){var t=e.name,n=null==e.tab?"Visor":e.tab;if(null==t||!("string"===typeof t||t instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");var r=Object.assign({},e,{tab:n}),a="".concat(t,"-").concat(n);return this.surfaceList.has(a)||this.surfaceList.set(a,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(t,n)}},{key:"isFullscreen",value:function(){return this.visorComponent.isFullscreen()}},{key:"isOpen",value:function(){return this.visorComponent.isOpen()}},{key:"close",value:function(){return this.visorComponent.close()}},{key:"open",value:function(){return this.visorComponent.open()}},{key:"toggle",value:function(){return this.visorComponent.toggle()}},{key:"toggleFullScreen",value:function(){return this.visorComponent.toggleFullScreen()}},{key:"bindKeys",value:function(){return this.visorComponent.bindKeys()}},{key:"unbindKeys",value:function(){return this.visorComponent.unbindKeys()}},{key:"setActiveTab",value:function(e){if(!this.visorComponent.state.tabs.has(e))throw new Error("Tab '".concat(e,"' does not exist"));this.visorComponent.setState({activeTab:e})}}]),e}();t.Visor=s},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r=n(2),a=n(331),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(178)),s=n(145),c=n(247),l=n(117);t.linechart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,d,h,p,v,m,g,b,y,w,x,O,k,j;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Array.isArray(t.values[0])?t.values:[t.values],d=o[0].length,h=t.series?t.series:o.map((function(e,t){return"Series ".concat(t+1)})),c.assert(h.length===o.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=[],v=function(e){var t={x:e};h.forEach((function(n,r){var a=o[r][e].y;t[n]=a,t["".concat(n,"-name")]=n})),p.push(t)},m=0;m<d;m++)v(m);return g=Object.assign({},f,n),b=function(){return g.zoomToFit?{zero:!1}:null!=g.yAxisDomain?{domain:g.yAxisDomain}:void 0},y={x:{field:"x",type:g.xType,title:g.xLabel},tooltip:[{field:"x",type:"quantitative"}].concat(a(h.map((function(e){return{field:e,type:"quantitative"}}))))},w=h.map((function(e){return{data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:e,type:g.yType,title:g.yLabel,scale:b()},color:{field:"".concat(e,"-name"),type:"nominal",legend:{values:h,title:null},scale:{range:g.seriesColors}}}}})),x={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},O=l.getDrawArea(e),k={width:g.width||s.getDefaultWidth(O),height:g.height||s.getDefaultHeight(O),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},data:{values:p},encoding:y,layer:[].concat(a(w),[x])},j={actions:!1,mode:"vega-lite",defaultStyle:!1},r.next=18,u.default(O,k,j);case 18:return r.abrupt("return",Promise.resolve());case 19:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){"use strict";n(669)},function(e,t,n){"use strict";n.r(t);var r=n(74),a=n(18);Object(a.d)().prototype.abs=function(){return this.throwIfDisposed(),Object(r.a)(this)};var i=n(361);Object(a.d)().prototype.acos=function(){return this.throwIfDisposed(),Object(i.a)(this)};var o=n(362);Object(a.d)().prototype.acosh=function(){return this.throwIfDisposed(),Object(o.a)(this)};var u=n(30);Object(a.d)().prototype.add=function(e){return this.throwIfDisposed(),Object(u.a)(this,e)};var s=n(252);Object(a.d)().prototype.all=function(e,t){return this.throwIfDisposed(),Object(s.a)(this,e,t)};var c=n(253);Object(a.d)().prototype.any=function(e,t){return this.throwIfDisposed(),Object(c.a)(this,e,t)};var l=n(254);Object(a.d)().prototype.argMax=function(e){return this.throwIfDisposed(),Object(l.a)(this,e)};var f=n(255);Object(a.d)().prototype.argMin=function(e){return this.throwIfDisposed(),Object(f.a)(this,e)};var d=n(19),h=n(20);Object(a.d)().prototype.asScalar=function(){return this.throwIfDisposed(),Object(h.b)(1===this.size,(function(){return"The array must have only 1 element."})),Object(d.a)(this,[])};var p=n(27);Object(a.d)().prototype.asType=function(e){return this.throwIfDisposed(),Object(p.a)(this,e)},Object(a.d)().prototype.as1D=function(){return this.throwIfDisposed(),Object(d.a)(this,[this.size])},Object(a.d)().prototype.as2D=function(e,t){return this.throwIfDisposed(),Object(d.a)(this,[e,t])},Object(a.d)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n])},Object(a.d)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n,r])},Object(a.d)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n,r,a])};var v=n(364);Object(a.d)().prototype.asin=function(){return this.throwIfDisposed(),Object(v.a)(this)};var m=n(365);Object(a.d)().prototype.asinh=function(){return this.throwIfDisposed(),Object(m.a)(this)};var g=n(366);Object(a.d)().prototype.atan=function(){return this.throwIfDisposed(),Object(g.a)(this)};var b=n(256);Object(a.d)().prototype.atan2=function(e){return this.throwIfDisposed(),Object(b.a)(this,e)};var y=n(367);Object(a.d)().prototype.atanh=function(){return this.throwIfDisposed(),Object(y.a)(this)};var w=n(182);Object(a.d)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Object(w.a)(this,e,t,n,r)};var x=n(149);Object(a.d)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Object(x.a)(this,e,t)};var O=n(129);Object(a.d)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Object(O.a)(this,e,t,n,r,a)};var k=n(159);Object(a.d)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Object(k.a)(this,e)},Object(a.d)().prototype.cast=function(e){return this.throwIfDisposed(),Object(p.a)(this,e)};var j=n(370);Object(a.d)().prototype.ceil=function(){return this.throwIfDisposed(),Object(j.a)(this)};var _=n(371);Object(a.d)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Object(_.a)(this,e,t)};var S=n(14),E=n(59);Object(a.d)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof a.a&&(e=[e]),Object(E.a)([this].concat(Object(S.a)(e)),t)};var C=n(258);Object(a.d)().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(C.a)(this,e,t,n,r,a,i)};var A=n(259);Object(a.d)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Object(A.a)(this,e,t,n,r,a)};var T=n(107);Object(a.d)().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(T.a)(this,e,t,n,r,a,i)};var N=n(183);Object(a.d)().prototype.cos=function(){return this.throwIfDisposed(),Object(N.a)(this)};var I=n(260);Object(a.d)().prototype.cosh=function(){return this.throwIfDisposed(),Object(I.a)(this)};var D=n(184);Object(a.d)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Object(D.a)(this,e,t,n)};var R=n(261);Object(a.d)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Object(R.a)(this,e,t)};var F=n(150);Object(a.d)().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(F.a)(this,e,t,n,r,a,i)};var M=n(262);Object(a.d)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Object(M.a)(this,e,t,n,r,a)};var P=n(263);Object(a.d)().prototype.divNoNan=function(e){return this.throwIfDisposed(),Object(P.a)(this,e)};var L=n(32);Object(a.d)().prototype.div=function(e){return this.throwIfDisposed(),Object(L.a)(this,e)};var z=n(264);Object(a.d)().prototype.dot=function(e){return this.throwIfDisposed(),Object(z.a)(this,e)};var B=n(185);Object(a.d)().prototype.elu=function(){return this.throwIfDisposed(),Object(B.a)(this)};var U=n(151);Object(a.d)().prototype.equal=function(e){return this.throwIfDisposed(),Object(U.a)(this,e)};var W=n(375);Object(a.d)().prototype.erf=function(){return this.throwIfDisposed(),Object(W.a)(this)};var V=n(71);Object(a.d)().prototype.exp=function(){return this.throwIfDisposed(),Object(V.a)(this)};var q=n(105);Object(a.d)().prototype.expandDims=function(e){return this.throwIfDisposed(),Object(q.a)(this,e)};var $=n(376);Object(a.d)().prototype.expm1=function(){return this.throwIfDisposed(),Object($.a)(this)};var H=n(197);Object(a.d)().prototype.fft=function(){return this.throwIfDisposed(),Object(H.a)(this)},Object(a.d)().prototype.flatten=function(){return this.throwIfDisposed(),Object(d.a)(this,[this.size])};var G=n(186);Object(a.d)().prototype.floor=function(){return this.throwIfDisposed(),Object(G.a)(this)};var K=n(181);Object(a.d)().prototype.floorDiv=function(e){return this.throwIfDisposed(),Object(K.a)(this,e)};var X=n(152);Object(a.d)().prototype.gather=function(e,t){return this.throwIfDisposed(),Object(X.a)(this,e,t)};var Y=n(108);Object(a.d)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Object(Y.a)(this,e)};var J=n(73);Object(a.d)().prototype.greater=function(e){return this.throwIfDisposed(),Object(J.a)(this,e)};var Q=n(170);Object(a.d)().prototype.ifft=function(){return this.throwIfDisposed(),Object(Q.a)(this)};var Z=n(280);Object(a.d)().prototype.irfft=function(){return this.throwIfDisposed(),Object(Z.a)(this)};var ee=n(377);Object(a.d)().prototype.isFinite=function(){return this.throwIfDisposed(),Object(ee.a)(this)};var te=n(378);Object(a.d)().prototype.isInf=function(){return this.throwIfDisposed(),Object(te.a)(this)};var ne=n(379);Object(a.d)().prototype.isNaN=function(){return this.throwIfDisposed(),Object(ne.a)(this)};var re=n(188);Object(a.d)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Object(re.a)(this,e)};var ae=n(91);Object(a.d)().prototype.lessEqual=function(e){return this.throwIfDisposed(),Object(ae.a)(this,e)};var ie=n(189);Object(a.d)().prototype.less=function(e){return this.throwIfDisposed(),Object(ie.a)(this,e)};var oe=n(265);Object(a.d)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Object(oe.a)(this,e,t,n,r)};var ue=n(381);Object(a.d)().prototype.logSigmoid=function(){return this.throwIfDisposed(),Object(ue.a)(this)};var se=n(382);Object(a.d)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Object(se.a)(this,e)};var ce=n(190);Object(a.d)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Object(ce.a)(this,e,t)};var le=n(118);Object(a.d)().prototype.log=function(){return this.throwIfDisposed(),Object(le.a)(this)};var fe=n(266);Object(a.d)().prototype.log1p=function(){return this.throwIfDisposed(),Object(fe.a)(this)};var de=n(100);Object(a.d)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Object(de.a)(this,e)};var he=n(153);Object(a.d)().prototype.logicalNot=function(){return this.throwIfDisposed(),Object(he.a)(this)};var pe=n(191);Object(a.d)().prototype.logicalOr=function(e){return this.throwIfDisposed(),Object(pe.a)(this,e)};var ve=n(268);Object(a.d)().prototype.logicalXor=function(e){return this.throwIfDisposed(),Object(ve.a)(this,e)};var me=n(46);Object(a.d)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Object(me.a)(this,e,t,n)};var ge=n(192);Object(a.d)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Object(ge.a)(this,e,t,n,r)};var be=n(112);Object(a.d)().prototype.max=function(e,t){return this.throwIfDisposed(),Object(be.a)(this,e,t)};var ye=n(148);Object(a.d)().prototype.maximum=function(e){return this.throwIfDisposed(),Object(ye.a)(this,e)};var we=n(138);Object(a.d)().prototype.mean=function(e,t){return this.throwIfDisposed(),Object(we.a)(this,e,t)};var xe=n(167);Object(a.d)().prototype.min=function(e,t){return this.throwIfDisposed(),Object(xe.a)(this,e,t)};var Oe=n(193);Object(a.d)().prototype.minimum=function(e){return this.throwIfDisposed(),Object(Oe.a)(this,e)};var ke=n(269);Object(a.d)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Object(ke.a)(this,e,t)};var je=n(270);Object(a.d)().prototype.mod=function(e){return this.throwIfDisposed(),Object(je.a)(this,e)};var _e=n(22);Object(a.d)().prototype.mul=function(e){return this.throwIfDisposed(),Object(_e.a)(this,e)};var Se=n(55);Object(a.d)().prototype.neg=function(){return this.throwIfDisposed(),Object(Se.a)(this)};var Ee=n(201);Object(a.d)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Object(Ee.a)(this,e,t,n)};var Ce=n(194);Object(a.d)().prototype.notEqual=function(e){return this.throwIfDisposed(),Object(Ce.a)(this,e)};var Ae=n(168);Object(a.d)().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Object(Ae.a)(this,e,t,n)};var Te=n(386);Object(a.d)().prototype.onesLike=function(){return this.throwIfDisposed(),Object(Te.a)(this)};var Ne=n(92);Object(a.d)().prototype.pad=function(e,t){return this.throwIfDisposed(),Object(Ne.a)(this,e,t)};var Ie=n(271);Object(a.d)().prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Ie.a)(this,e,t,n,r,a)};var De=n(89);Object(a.d)().prototype.pow=function(e){return this.throwIfDisposed(),Object(De.a)(this,e)};var Re=n(195);Object(a.d)().prototype.prelu=function(e){return this.throwIfDisposed(),Object(Re.a)(this,e)};var Fe=n(272);Object(a.d)().prototype.prod=function(e,t){return this.throwIfDisposed(),Object(Fe.a)(this,e,t)};var Me=n(387);Object(a.d)().prototype.reciprocal=function(){return this.throwIfDisposed(),Object(Me.a)(this)};var Pe=n(126);Object(a.d)().prototype.relu=function(){return this.throwIfDisposed(),Object(Pe.a)(this)};var Le=n(196);Object(a.d)().prototype.relu6=function(){return this.throwIfDisposed(),Object(Le.a)(this)},Object(a.d)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Object(d.a)(this,e.shape)},Object(a.d)().prototype.reshape=function(e){return this.throwIfDisposed(),Object(d.a)(this,e)};var ze=n(303);Object(a.d)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Object(ze.a)(this,e,t,n)};var Be=n(302);Object(a.d)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Object(Be.a)(this,e,t,n)};var Ue=n(82);Object(a.d)().prototype.reverse=function(e){return this.throwIfDisposed(),Object(Ue.a)(this,e)};var We=n(198);Object(a.d)().prototype.rfft=function(){return this.throwIfDisposed(),Object(We.a)(this)};var Ve=n(274);Object(a.d)().prototype.round=function(){return this.throwIfDisposed(),Object(Ve.a)(this)};var qe=n(275);Object(a.d)().prototype.rsqrt=function(){return this.throwIfDisposed(),Object(qe.a)(this)};var $e=n(276);Object(a.d)().prototype.selu=function(){return this.throwIfDisposed(),Object($e.a)(this)};var He=n(277);Object(a.d)().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(He.a)(this,e,t,n,r,a,i)};var Ge=n(110);Object(a.d)().prototype.sigmoid=function(){return this.throwIfDisposed(),Object(Ge.a)(this)};var Ke=n(389);Object(a.d)().prototype.sign=function(){return this.throwIfDisposed(),Object(Ke.a)(this)};var Xe=n(278);Object(a.d)().prototype.sin=function(){return this.throwIfDisposed(),Object(Xe.a)(this)};var Ye=n(279);Object(a.d)().prototype.sinh=function(){return this.throwIfDisposed(),Object(Ye.a)(this)};var Je=n(49);Object(a.d)().prototype.slice=function(e,t){return this.throwIfDisposed(),Object(Je.a)(this,e,t)};var Qe=n(390);Object(a.d)().prototype.softmax=function(e){return this.throwIfDisposed(),Object(Qe.a)(this,e)};var Ze=n(267);Object(a.d)().prototype.softplus=function(){return this.throwIfDisposed(),Object(Ze.a)(this)};var et=n(154);Object(a.d)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Object(et.a)(this,e,t)};var tt=n(101);Object(a.d)().prototype.split=function(e,t){return this.throwIfDisposed(),Object(tt.a)(this,e,t)};var nt=n(68);Object(a.d)().prototype.sqrt=function(){return this.throwIfDisposed(),Object(nt.a)(this)};var rt=n(47);Object(a.d)().prototype.square=function(){return this.throwIfDisposed(),Object(rt.a)(this)};var at=n(199);Object(a.d)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Object(at.a)(this,e)};var it=n(155);Object(a.d)().prototype.squeeze=function(e){return this.throwIfDisposed(),Object(it.a)(this,e)};var ot=n(102);Object(a.d)().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof a.a?[this,e]:[this].concat(Object(S.a)(e));return Object(ot.a)(n,t)};var ut=n(127);Object(a.d)().prototype.step=function(e){return this.throwIfDisposed(),Object(ut.a)(this,e)};var st=n(391);Object(a.d)().prototype.stridedSlice=function(e,t,n,r,a,i,o,u){return this.throwIfDisposed(),Object(st.a)(this,e,t,n,r,a,i,o,u)};var ct=n(31);Object(a.d)().prototype.sub=function(e){return this.throwIfDisposed(),Object(ct.a)(this,e)};var lt=n(34);Object(a.d)().prototype.sum=function(e,t){return this.throwIfDisposed(),Object(lt.a)(this,e,t)};var ft=n(392);Object(a.d)().prototype.tan=function(){return this.throwIfDisposed(),Object(ft.a)(this)};var dt=n(226);Object(a.d)().prototype.tanh=function(){return this.throwIfDisposed(),Object(dt.a)(this)};var ht=n(111);Object(a.d)().prototype.tile=function(e){return this.throwIfDisposed(),Object(ht.a)(this,e)},Object(a.d)().prototype.toBool=function(){return this.throwIfDisposed(),Object(p.a)(this,"bool")},Object(a.d)().prototype.toFloat=function(){return this.throwIfDisposed(),Object(p.a)(this,"float32")},Object(a.d)().prototype.toInt=function(){return this.throwIfDisposed(),Object(p.a)(this,"int32")};var pt=n(282);Object(a.d)().prototype.topk=function(e,t){return this.throwIfDisposed(),Object(pt.a)(this,e,t)};var vt=n(85);Object(a.d)().prototype.transpose=function(e){return this.throwIfDisposed(),Object(vt.a)(this,e)};var mt=n(283);Object(a.d)().prototype.unique=function(e){return this.throwIfDisposed(),Object(mt.a)(this,e)};var gt=n(200);Object(a.d)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Object(gt.a)(this,e,t)};var bt=n(128);Object(a.d)().prototype.unstack=function(e){return this.throwIfDisposed(),Object(bt.a)(this,e)};var yt=n(62);Object(a.d)().prototype.where=function(e,t){return this.throwIfDisposed(),Object(yt.a)(e,this,t)};var wt=n(41);Object(a.d)().prototype.zerosLike=function(){return this.throwIfDisposed(),Object(wt.a)(this)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13),a=n(8);function i(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n(7),u=n(12);var s=Object(u.b)({sparseToDense_:function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(o.a)(e,"sparseIndices","sparseToDense","int32"),c=Object(o.a)(t,"sparseValues","sparseToDense"),l=Object(o.a)(u,"defaultValue","sparseToDense",c.dtype);i(s,c,n,l);var f={sparseIndices:s,sparseValues:c,defaultValue:l},d={outputShape:n};return r.a.runKernel(a.Oc,f,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(4),a=n(2),i=n.n(a),o=n(15),u=n(38),s=n(3),c=n(11),l=n(16),f=n(17),d=n(25),h=n(106),p=n(5),v=n.n(p),m=n(121),g=n(21),b=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return v.a.createElement(m.b,{path:this.props.path,exact:this.props.exact,render:this.props.render,computedMatch:this.props.computedMatch})}}]),n}(v.a.PureComponent),y=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).createViewItem=e.createViewItem.bind(Object(u.a)(e)),e.findViewItemByRouteInfo=e.findViewItemByRouteInfo.bind(Object(u.a)(e)),e.findLeavingViewItemByRouteInfo=e.findLeavingViewItemByRouteInfo.bind(Object(u.a)(e)),e.getChildrenToRender=e.getChildrenToRender.bind(Object(u.a)(e)),e.findViewItemByPathname=e.findViewItemByPathname.bind(Object(u.a)(e)),e}return Object(c.a)(n,[{key:"createViewItem",value:function(e,t,n,r){var a={id:Object(g.P)("viewItem"),outletId:e,ionPageElement:r,reactElement:t,mount:!0,ionRoute:!1},i={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},o=Object(m.d)(n.pathname,i);return t.type===g.v&&(a.ionRoute=!0,a.disableIonPageManagement=t.props.disableIonPageManagement),a.routeData={match:o,childProps:t.props},a}},{key:"getChildrenToRender",value:function(e,t,n){var r=this,a=this.getViewItemsForOutlet(e);return v.a.Children.forEach(t.props.children,(function(e){var t=a.find((function(t){return w(e,t.routeData.childProps.path||t.routeData.childProps.from)}));t&&(t.reactElement=e)})),a.map((function(e){var t;if(e.ionRoute&&!e.disableIonPageManagement)t=v.a.createElement(g.M,{key:"view-".concat(e.id),mount:e.mount,removeView:function(){return r.remove(e)}},v.a.cloneElement(e.reactElement,{computedMatch:e.routeData.match}));else{var a=w(e.reactElement,n.pathname);t=v.a.createElement(g.M,{key:"view-".concat(e.id),mount:e.mount,removeView:function(){return r.remove(e)}},v.a.cloneElement(e.reactElement,{computedMatch:e.routeData.match})),!a&&e.routeData.match&&(e.routeData.match=void 0,e.mount=!1)}return t}))}},{key:"findViewItemByRouteInfo",value:function(e,t){var n=this.findViewItemByPath(e.pathname,t),r=n.viewItem,a=n.match;return r&&a&&(r.routeData.match=a),r}},{key:"findLeavingViewItemByRouteInfo",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.findViewItemByPath(e.lastPathname,t,!1,n),a=r.viewItem;return a}},{key:"findViewItemByPathname",value:function(e,t){return this.findViewItemByPath(e,t).viewItem}},{key:"findViewItemByPath",value:function(e,t,n,r){var a,i,o;if(t)(o=this.getViewItemsForOutlet(t)).some(s),a||o.some(c);else{var u=this.getAllViewItems();u.some(s),a||u.some(c)}return{viewItem:a,match:i};function s(t){if(r&&!t.ionRoute)return!1;var o={exact:!!n||t.routeData.childProps.exact,path:t.routeData.childProps.path||t.routeData.childProps.from,component:t.routeData.childProps.component},u=Object(m.d)(e,o);return!!u&&(a=t,i=u,!0)}function c(t){return!t.routeData.childProps.path&&!t.routeData.childProps.from&&(i={path:e,url:e,isExact:!0,params:{}},a=t,!0)}}}]),n}(g.N);function w(e,t,n){var r={exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Object(m.d)(t,r)}function x(e){var t;if(t="string"===typeof e?e:e.outerHTML,document){var n=document.createElement("div");n.innerHTML=t,n.style.zIndex="";var r=n.getElementsByTagName("ion-back-button");return r[0]&&r[0].remove(),n.firstChild}}var O=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).stackContextValue={registerIonPage:r.registerIonPage.bind(Object(u.a)(r)),isInOutlet:function(){return!0}},r.registerIonPage=r.registerIonPage.bind(Object(u.a)(r)),r.transitionPage=r.transitionPage.bind(Object(u.a)(r)),r.handlePageTransition=r.handlePageTransition.bind(Object(u.a)(r)),r.id=Object(g.P)("routerOutlet"),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}},{key:"componentDidUpdate",value:function(e){this.props.routeInfo.pathname!==e.routeInfo.pathname&&this.handlePageTransition(this.props.routeInfo)}},{key:"componentWillUnmount",value:function(){this.context.clearOutlet(this.id)}},{key:"handlePageTransition",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,u,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.routerOutletElement&&this.routerOutletElement.commit?(a=this.context.findViewItemByRouteInfo(t,this.id),!(o=this.context.findLeavingViewItemByRouteInfo(t,this.id))&&t.prevRouteLastPathname&&(o=this.context.findViewItemByPathname(t.prevRouteLastPathname,this.id)),o&&("replace"===t.routeAction?o.mount=!1:"push"!==t.routeAction||"forward"!==t.routeDirection?"none"!==t.routeDirection&&a!==o&&(o.mount=!1):(null===(n=t.routeOptions)||void 0===n?void 0:n.unmount)&&(o.mount=!1)),u=k(null===(r=this.ionRouterOutlet)||void 0===r?void 0:r.props.children,t),a&&(a.reactElement=u),a||u&&(a=this.context.createViewItem(this.id,u,t),this.context.addViewItem(a)),a&&a.ionPageElement?this.transitionPage(t,a,o):!o||u||a||o.ionPageElement&&(o.ionPageElement.classList.add("ion-page-hidden"),o.ionPageElement.setAttribute("aria-hidden","true")),this.forceUpdate()):setTimeout((function(){return s.handlePageTransition(t)}),10);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerIonPage",value:function(e,t){var n=this.context.findViewItemByRouteInfo(t,this.id);n&&(n.ionPageElement=e,n.ionRoute=!0),this.handlePageTransition(t)}},{key:"setupRouterOutlet",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(g.Q)();return!!(e&&e.get("swipeBackEnabled","ios"===t.mode))&&a.context.canGoBack()},r=function(){a.context.goBack()},t.swipeHandler={canStart:n,onStart:r,onEnd:function(e){return!0}};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"transitionPage",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var a,u,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){return(l=Object(o.a)(i.a.mark((function e(n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.classList.add("ion-page"),n.classList.add("ion-page-invisible"),e.next=4,a.commit(n,r,{deepWait:!0,duration:void 0===u?0:void 0,direction:u,showGoBack:!!t.pushedByRoute,progressAnimation:!1,animationBuilder:t.routeAnimation});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e,t){return l.apply(this,arguments)},a=this.routerOutletElement,u="none"===t.routeDirection||"root"===t.routeDirection?void 0:t.routeDirection,!(n&&n.ionPageElement&&this.routerOutletElement)){e.next=23;break}if(!r||!r.ionPageElement||n!==r){e.next=20;break}if(!j(r.reactElement,t.pathname,!0)){e.next=16;break}if(!(s=x(r.ionPageElement.outerHTML))){e.next=14;break}return this.routerOutletElement.appendChild(s),e.next=13,c(n.ionPageElement,s);case 13:this.routerOutletElement.removeChild(s);case 14:e.next=18;break;case 16:return e.next=18,c(n.ionPageElement,void 0);case 18:e.next=23;break;case 20:return e.next=22,c(n.ionPageElement,null===r||void 0===r?void 0:r.ionPageElement);case 22:r&&r.ionPageElement&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"));case 23:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.children,n=v.a.Children.only(t);this.ionRouterOutlet=n;var r=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,(function(){e.forceUpdate()}));return v.a.createElement(g.L.Provider,{value:this.stackContextValue},v.a.cloneElement(n,{ref:function(t){n.props.setRef&&n.props.setRef(t),n.props.forwardedRef&&(n.props.forwardedRef.current=t),e.routerOutletElement=t;var r=n.ref;"function"===typeof r&&r(t)}},r))}}],[{key:"contextType",get:function(){return g.K}}]),n}(v.a.PureComponent);function k(e,t){var n;return v.a.Children.forEach(e,(function(e){var r={exact:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};Object(m.d)(t.pathname,r)&&(n=e)})),n||(v.a.Children.forEach(e,(function(e){e.props.path||e.props.from||(n=e)})),n)}function j(e,t,n){var r={exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Object(m.d)(t,r)}var _=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).exitViewFromOtherOutletHandlers=[],r.locationHistory=new g.I,r.viewStack=new y,r.routeMangerContextState={canGoBack:function(){return r.locationHistory.canGoBack()},clearOutlet:r.viewStack.clear,findViewItemByPathname:r.viewStack.findViewItemByPathname,getChildrenToRender:r.viewStack.getChildrenToRender,goBack:function(){return r.handleNavigateBack()},createViewItem:r.viewStack.createViewItem,findViewItemByRouteInfo:r.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:r.viewStack.findLeavingViewItemByRouteInfo,addViewItem:r.viewStack.add,unMountViewItem:r.viewStack.remove};var a={id:Object(g.P)("routeInfo"),pathname:r.props.location.pathname,search:r.props.location.search};return r.locationHistory.add(a),r.handleChangeTab=r.handleChangeTab.bind(Object(u.a)(r)),r.handleResetTab=r.handleResetTab.bind(Object(u.a)(r)),r.handleNativeBack=r.handleNativeBack.bind(Object(u.a)(r)),r.handleNavigate=r.handleNavigate.bind(Object(u.a)(r)),r.handleNavigateBack=r.handleNavigateBack.bind(Object(u.a)(r)),r.props.registerHistoryListener(r.handleHistoryChange.bind(Object(u.a)(r))),r.handleSetCurrentTab=r.handleSetCurrentTab.bind(Object(u.a)(r)),r.state={routeInfo:a},r}return Object(c.a)(n,[{key:"handleChangeTab",value:function(e,t,n){if(t){var a=this.locationHistory.getCurrentRouteInfoForTab(e),i=t.split("?"),o=Object(r.a)(i,2),u=o[0],s=o[1];a?(this.incomingRouteParams=Object.assign(Object.assign({},a),{routeAction:"push",routeDirection:"none"}),a.pathname===u?(this.incomingRouteParams.routeOptions=n,this.props.history.push(a.pathname+(a.search||""))):(this.incomingRouteParams.pathname=u,this.incomingRouteParams.search=s?"?"+s:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(u+(s?"?"+s:"")))):this.handleNavigate(u,"push","none",void 0,n,e)}}},{key:"handleHistoryChange",value:function(e,t){var n,r,a,i;if((i=this.incomingRouteParams&&"replace"===this.incomingRouteParams.routeAction?this.locationHistory.previous():this.locationHistory.current()).pathname+i.search!==e.pathname){if(!this.incomingRouteParams){if("REPLACE"===t&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),"POP"===t){var o=this.locationHistory.current();if(o&&o.pushedByRoute){var u=this.locationHistory.findLastLocation(o);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(null===(n=e.state)||void 0===n?void 0:n.direction)||"forward",routeOptions:null===(r=e.state)||void 0===r?void 0:r.routerOptions,tab:this.currentTab})}var s;if(null===(a=this.incomingRouteParams)||void 0===a?void 0:a.id)s=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:i.pathname}),this.locationHistory.add(s);else{var c="push"===this.incomingRouteParams.routeAction&&"forward"===this.incomingRouteParams.routeDirection;if(s=Object.assign(Object.assign({id:Object(g.P)("routeInfo")},this.incomingRouteParams),{lastPathname:i.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:i.lastPathname}),c)s.tab=i.tab,s.pushedByRoute=i.pathname;else if("pop"===s.routeAction){var l=this.locationHistory.findLastLocation(s);s.pushedByRoute=null===l||void 0===l?void 0:l.pushedByRoute}else if("push"===s.routeAction&&s.tab!==i.tab){var f=this.locationHistory.getCurrentRouteInfoForTab(s.tab);s.pushedByRoute=null===f||void 0===f?void 0:f.pushedByRoute}else if("replace"===s.routeAction){var d=this.locationHistory.current(),h=null===d||void 0===d?void 0:d.pushedByRoute,p=void 0!==h&&h!==s.pathname?h:s.pushedByRoute;s.lastPathname=(null===d||void 0===d?void 0:d.pathname)||s.lastPathname,s.prevRouteLastPathname=null===d||void 0===d?void 0:d.lastPathname,s.pushedByRoute=p,s.routeDirection=(null===d||void 0===d?void 0:d.routeDirection)||s.routeDirection,s.routeAnimation=(null===d||void 0===d?void 0:d.routeAnimation)||s.routeAnimation}this.locationHistory.add(s)}this.setState({routeInfo:s})}this.incomingRouteParams=void 0}},{key:"handleNativeBack",value:function(){var e=this.props.history;(e.goBack||e.back)()}},{key:"handleNavigate",value:function(e,t,n,r,a,i){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:n,routeOptions:a,routeAnimation:r,tab:i}),"push"===t?this.props.history.push(e):this.props.history.replace(e)}},{key:"handleNavigateBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0,n=Object(g.Q)();e=e||n&&n.get("backButtonDefaultHref");var r=this.locationHistory.current();if(r&&r.pushedByRoute){var a=this.locationHistory.findLastLocation(r);if(a)if(this.incomingRouteParams=Object.assign(Object.assign({},a),{routeAction:"pop",routeDirection:"back",routeAnimation:t||r.routeAnimation}),r.lastPathname===r.pushedByRoute||a.pathname===r.pushedByRoute&&""===r.tab&&""===a.tab){var i=this.props.history,o=i.goBack||i.back;o()}else this.handleNavigate(a.pathname+(a.search||""),"pop","back");else this.handleNavigate(e,"pop","back")}else this.handleNavigate(e,"pop","back")}},{key:"handleResetTab",value:function(e,t,n){var r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){var a=Object.assign({},r);a.pathname=t,a.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},a),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(a.pathname+(a.search||""))}}},{key:"handleSetCurrentTab",value:function(e){this.currentTab=e;var t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}},{key:"render",value:function(){return v.a.createElement(g.K.Provider,{value:this.routeMangerContextState},v.a.createElement(g.J,{ionRoute:b,ionRedirect:{},stackManager:O,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}]),n}(v.a.PureComponent),S=Object(m.f)(_);S.displayName="IonRouter";v.a.Component;var E=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).history=e.history,r.history.listen(r.handleHistoryChange.bind(Object(u.a)(r))),r.registerHistoryListener=r.registerHistoryListener.bind(Object(u.a)(r)),r}return Object(c.a)(n,[{key:"handleHistoryChange",value:function(e,t){var n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}},{key:"registerHistoryListener",value:function(e){this.historyListenHandler=e}},{key:"render",value:function(){var e=this.props,t=e.children,n=Object(d.d)(e,["children"]);return v.a.createElement(m.c,Object.assign({},n),v.a.createElement(S,{registerHistoryListener:this.registerHistoryListener},t))}}]),n}(v.a.Component);v.a.Component},function(e,t,n){"use strict";var r=n(358),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||a}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!u||!u[g])){var b=d(n,g);try{c(t,g,b)}catch(y){}}}}return t}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M10 16.5v-9l6 4.5M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M15 16h-2V8h2m-4 8H9V8h2m1-6A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M6 18V6h2v12H6m3.5-6L18 6v12l-8.5-6z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M16 18h2V6h-2M6 18l8.5-6L6 6v12z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M13 6v12l8.5-6M4 18l8.5-6L4 6v12z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M11.5 12l8.5 6V6m-9 12V6l-8.5 6l8.5 6z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77c0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M3 9h4l5-5v16l-5-5H3V9m13.59 3L14 9.41L15.41 8L18 10.59L20.59 8L22 9.41L19.41 12L22 14.59L20.59 16L18 13.41L15.41 16L14 14.59L16.59 12z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M17 17H7v-3l-4 4l4 4v-3h12v-6h-2M7 7h10v3l4-4l-4-4v3H5v6h2V7z" fill="currentColor"/>',width:24,height:24}},function(e,t){t.__esModule=!0,t.default={body:'<path d="M2 5.27L3.28 4L20 20.72L18.73 22l-3-3H7v3l-4-4l4-4v3h6.73L7 10.27V11H5V8.27l-3-3M17 13h2v4.18l-2-2V13m0-8V2l4 4l-4 4V7H8.82l-2-2H17z" fill="currentColor"/>',width:24,height:24}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(2),a=n(541),i=n(240),o=n(5);function u(e){return e&&!Array.isArray(e)&&Object(e)===e}function s(e){var t=null;if(navigator.mediaDevices&&(t=navigator.mediaDevices.getSupportedConstraints()),null!==t){var n=Object.keys(e).filter((function(e){return!t[e]}));if(0!==n.length){var r=n.join(",");console.error("The following constraints ".concat(r," are not supported on this browser."))}}}var c=function(){};e.exports=function(e){var t=e.blobOptions,n=e.recordScreen,l=e.onStop,f=void 0===l?c:l,d=e.onStart,h=void 0===d?c:d,p=e.onError,v=void 0===p?c:p,m=e.mediaRecorderOptions,g=e.onDataAvailable,b=void 0===g?c:g,y=e.mediaStreamConstraints,w=void 0===y?{}:y,x=o.useRef([]),O=o.useRef(null),k=o.useRef(null),j=o.useState(null),_=i(j,2),S=_[0],E=_[1],C=o.useState("idle"),A=i(C,2),T=A[0],N=A[1],I=o.useState(null),D=i(I,2),R=D[0],F=D[1],M=o.useState(!1),P=i(M,2),L=P[0],z=P[1];function B(){return U.apply(this,arguments)}function U(){return(U=a(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&E(null),N("acquiring_media"),e.prev=2,!n){e.next=9;break}return e.next=6,window.navigator.mediaDevices.getDisplayMedia(w);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,window.navigator.mediaDevices.getUserMedia(w);case 11:t=e.sent;case 12:if(!n||!w.audio){e.next=17;break}return e.next=15,window.navigator.mediaDevices.getUserMedia({audio:w.audio});case 15:e.sent.getAudioTracks().forEach((function(e){return t.addTrack(e)}));case 17:O.current=t,N("ready"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),E(e.t0),N("failed");case 25:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}function W(){O.current&&(O.current.getTracks().forEach((function(e){return e.stop()})),O.current=null)}function V(){return(V=a(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&E(null),O.current){e.next=4;break}return e.next=4,B();case 4:x.current=[],O.current&&(k.current=new MediaRecorder(O.current,m),k.current.addEventListener("dataavailable",q),k.current.addEventListener("stop",$),k.current.addEventListener("error",H),k.current.start(t),N("recording"),h());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){e.data.size&&x.current.push(e.data),b(e.data)}function $(){var e=i(x.current,1)[0],n=Object.assign({type:e.type},t),r=new Blob(x.current,n);F(r),N("stopped"),f(r)}function H(e){E(e.error),N("idle"),v(e.error)}function G(e){z(e),O.current&&O.current.getAudioTracks().forEach((function(t){t.enabled=!e}))}return o.useEffect((function(){if(!window.MediaRecorder)throw new ReferenceError("MediaRecorder is not supported in this browser. Please ensure that you are running the latest version of chrome/firefox/edge.");if(n&&!window.navigator.mediaDevices.getDisplayMedia)throw new ReferenceError("This browser does not support screen capturing.");u(w.video)&&s(w.video),u(w.audio)&&s(w.audio),m&&m.mimeType&&(MediaRecorder.isTypeSupported(m.mimeType)||console.error("The specified MIME type supplied to MediaRecorder is not supported by this browser."))}),[w,m,n]),{error:S,status:T,mediaBlob:R,isAudioMuted:L,stopRecording:function(){k.current&&(N("stopping"),k.current.stop(),k.current.removeEventListener("dataavailable",q),k.current.removeEventListener("stop",$),k.current.removeEventListener("error",H),k.current=null,W())},getMediaStream:B,startRecording:function(e){return V.apply(this,arguments)},pauseRecording:function(){k.current&&"recording"===k.current.state&&(k.current.pause(),N("paused"))},resumeRecording:function(){k.current&&"paused"===k.current.state&&(k.current.resume(),N("recording"))},clearMediaStream:W,muteAudio:function(){return G(!0)},unMuteAudio:function(){return G(!1)},get liveStream(){return O.current?new MediaStream(O.current.getVideoTracks()):null}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){var e=this;this.platform="web",this.isNative=!1,this.Plugins={},"undefined"!==typeof Proxy&&(this.Plugins=new Proxy(this.Plugins,{get:function(t,n){if("undefined"===typeof t[n]){var r=e;return new Proxy({},{get:function(e,t){return"undefined"===typeof e[t]?r.pluginMethodNoop.bind(r,e,t,n):e[t]}})}return t[n]}}))}return e.prototype.pluginMethodNoop=function(e,t,n){return Promise.reject(n+" does not have web implementation.")},e.prototype.getPlatform=function(){return this.platform},e.prototype.isPluginAvailable=function(e){return this.Plugins.hasOwnProperty(e)},e.prototype.convertFileSrc=function(e){return e},e.prototype.handleError=function(e){console.error(e)},e}()},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(53),o=n.n(i),u=n(5),s=n.n(u),c=n(57),l=n(310),f=["bsPrefix","variant","size","active","className","block","type","as"],d=s.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.variant,u=e.size,d=e.active,h=e.className,p=e.block,v=e.type,m=e.as,g=Object(a.a)(e,f),b=Object(c.a)(n,"btn"),y=o()(h,b,d&&"active",i&&b+"-"+i,p&&b+"-block",u&&b+"-"+u);if(g.href)return s.a.createElement(l.a,Object(r.a)({},g,{as:m,ref:t,className:o()(y,g.disabled&&"disabled")}));t&&(g.ref=t),v?g.type=v:m||(g.type="button");var w=m||"button";return s.a.createElement(w,Object(r.a)({},g,{className:y}))}));d.displayName="Button",d.defaultProps={variant:"primary",active:!1,disabled:!1},t.a=d},function(e,t,n){var r;window,e.exports=(r=n(5),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=50)}([function(e,t){e.exports=r},function(e,t,n){e.exports=n(138)()},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(45);Object.defineProperty(t,"DragDropContext",{enumerable:!0,get:function(){return s(r).default}});var a=n(93);Object.defineProperty(t,"DragDropContextProvider",{enumerable:!0,get:function(){return s(a).default}});var i=n(92);Object.defineProperty(t,"DragLayer",{enumerable:!0,get:function(){return s(i).default}});var o=n(91);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return s(o).default}});var u=n(81);function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return s(u).default}})},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(44),a=n(131),i=n(43),o=Function.prototype,u=Object.prototype,s=o.toString,c=u.hasOwnProperty,l=s.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}},function(e,t,n){var r=n(125),a=n(124),i=n(122);e.exports=function(e,t){return i(a(e,t,r),e+"")}},function(e,t,n){var r=n(26);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSource=function(e){return{type:r,sourceId:e}},t.addTarget=function(e){return{type:a,targetId:e}},t.removeSource=function(e){return{type:i,sourceId:e}},t.removeTarget=function(e){return{type:o,targetId:e}};var r=t.ADD_SOURCE="dnd-core/ADD_SOURCE",a=t.ADD_TARGET="dnd-core/ADD_TARGET",i=t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",o=t.REMOVE_TARGET="dnd-core/REMOVE_TARGET"},function(e,t,n){var r=n(121),a=n(43);e.exports=function(e){return a(e)&&r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.END_DRAG=t.DROP=t.HOVER=t.PUBLISH_DRAG_SOURCE=t.BEGIN_DRAG=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.beginDrag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0,clientOffset:null},n=t.publishSource,r=t.clientOffset,u=t.getSourceClientOffset;(0,a.default)((0,i.default)(e),"Expected sourceIds to be an array.");var s=this.getMonitor(),l=this.getRegistry();(0,a.default)(!s.isDragging(),"Cannot call beginDrag while dragging.");for(var f=0;f<e.length;f++)(0,a.default)(l.getSource(e[f]),"Expected sourceIds to be registered.");for(var d=null,h=e.length-1;h>=0;h--)if(s.canDragSource(e[h])){d=e[h];break}if(null!==d){var p=null;r&&((0,a.default)("function"==typeof u,"When clientOffset is provided, getSourceClientOffset must be a function."),p=u(d));var v=l.getSource(d).beginDrag(s,d);(0,a.default)((0,o.default)(v),"Item must be an object."),l.pinSource(d);var m=l.getSourceType(d);return{type:c,itemType:m,item:v,sourceId:d,clientOffset:r,sourceClientOffset:p,isSourcePublic:n}}},t.publishDragSource=function(){if(this.getMonitor().isDragging())return{type:l}},t.hover=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset,n=void 0===t?null:t;(0,a.default)((0,i.default)(e),"Expected targetIds to be an array.");var r=e.slice(0),o=this.getMonitor(),s=this.getRegistry();(0,a.default)(o.isDragging(),"Cannot call hover while not dragging."),(0,a.default)(!o.didDrop(),"Cannot call hover after drop.");for(var c=0;c<r.length;c++){var l=r[c];(0,a.default)(r.lastIndexOf(l)===c,"Expected targetIds to be unique in the passed array.");var d=s.getTarget(l);(0,a.default)(d,"Expected targetIds to be registered.")}for(var h=o.getItemType(),p=r.length-1;p>=0;p--){var v=r[p],m=s.getTargetType(v);(0,u.default)(m,h)||r.splice(p,1)}for(var g=0;g<r.length;g++){var b=r[g];s.getTarget(b).hover(o,b)}return{type:f,targetIds:r,clientOffset:n}},t.drop=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getMonitor(),i=this.getRegistry();(0,a.default)(n.isDragging(),"Cannot call drop while not dragging."),(0,a.default)(!n.didDrop(),"Cannot call drop twice during one drag operation.");var u=n.getTargetIds().filter(n.canDropOnTarget,n);u.reverse(),u.forEach((function(u,s){var c=i.getTarget(u).drop(n,u);(0,a.default)(void 0===c||(0,o.default)(c),"Drop result must either be an object or undefined."),void 0===c&&(c=0===s?{}:n.getDropResult()),e.store.dispatch({type:d,dropResult:r({},t,c)})}))},t.endDrag=function(){var e=this.getMonitor(),t=this.getRegistry();(0,a.default)(e.isDragging(),"Cannot call endDrag while not dragging.");var n=e.getSourceId();return t.getSource(n,!0).endDrag(e,n),t.unpinSource(),{type:h}};var a=s(n(2)),i=s(n(4)),o=s(n(41)),u=s(n(40));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",l=t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",f=t.HOVER="dnd-core/HOVER",d=t.DROP="dnd-core/DROP",h=t.END_DRAG="dnd-core/END_DRAG"},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Boolean(e&&"function"==typeof e.dispose)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,i=0;i<n.length;i+=1){if(!a.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;if(e[n[i]]!==t[n[i]])return!1}return!0}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,l=c&&c(Object);e.exports=function e(t,n,f){if("string"!=typeof n){if(l){var d=c(n);d&&d!==l&&e(t,d,f)}var h=o(n);u&&(h=h.concat(u(n)));for(var p=0;p<h.length;++p){var v=h[p];if(!(r[v]||a[v]||f&&f[v])){var m=s(n,v);try{i(t,v,m)}catch(e){}}}return t}return t}},function(e,t,n){var r=n(37);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(37);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(4);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return r(e)?e:[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),a=n(58);t.getEmptyImage=a.default;var i=n(13);t.NativeTypes=i,t.default=function(e){return new r.default(e)}},function(e,t,n){(function(e,n){var r=1,a=2,i=9007199254740991,o="[object Arguments]",u="[object Array]",s="[object AsyncFunction]",c="[object Boolean]",l="[object Date]",f="[object Error]",d="[object Function]",h="[object GeneratorFunction]",p="[object Map]",v="[object Number]",m="[object Null]",g="[object Object]",b="[object Proxy]",y="[object RegExp]",w="[object Set]",x="[object String]",O="[object Symbol]",k="[object Undefined]",j="[object ArrayBuffer]",_="[object DataView]",S=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[o]=C[u]=C[j]=C[c]=C[_]=C[l]=C[f]=C[d]=C[p]=C[v]=C[g]=C[y]=C[w]=C[x]=C["[object WeakMap]"]=!1;var A="object"==typeof e&&e&&e.Object===Object&&e,T="object"==typeof self&&self&&self.Object===Object&&self,N=A||T||Function("return this")(),I="object"==typeof t&&t&&!t.nodeType&&t,D=I&&"object"==typeof n&&n&&!n.nodeType&&n,R=D&&D.exports===I,F=R&&A.process,M=function(){try{return F&&F.binding&&F.binding("util")}catch(e){}}(),P=M&&M.isTypedArray;function L(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var U,W,V,q=Array.prototype,$=Function.prototype,H=Object.prototype,G=N["__core-js_shared__"],K=$.toString,X=H.hasOwnProperty,Y=(U=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",J=H.toString,Q=RegExp("^"+K.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=R?N.Buffer:void 0,ee=N.Symbol,te=N.Uint8Array,ne=H.propertyIsEnumerable,re=q.splice,ae=ee?ee.toStringTag:void 0,ie=Object.getOwnPropertySymbols,oe=Z?Z.isBuffer:void 0,ue=(W=Object.keys,V=Object,function(e){return W(V(e))}),se=De(N,"DataView"),ce=De(N,"Map"),le=De(N,"Promise"),fe=De(N,"Set"),de=De(N,"WeakMap"),he=De(Object,"create"),pe=Pe(se),ve=Pe(ce),me=Pe(le),ge=Pe(fe),be=Pe(de),ye=ee?ee.prototype:void 0,we=ye?ye.valueOf:void 0;function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function je(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ke;++t<n;)this.add(e[t])}function _e(e){var t=this.__data__=new Oe(e);this.size=t.size}function Se(e,t){for(var n=e.length;n--;)if(Le(e[n][0],t))return n;return-1}function Ee(e){return null==e?void 0===e?k:m:ae&&ae in Object(e)?function(e){var t=X.call(e,ae),n=e[ae];try{e[ae]=void 0;var r=!0}catch(e){}var a=J.call(e);return r&&(t?e[ae]=n:delete e[ae]),a}(e):function(e){return J.call(e)}(e)}function Ce(e){return $e(e)&&Ee(e)==o}function Ae(e,t,n,i,s){return e===t||(null==e||null==t||!$e(e)&&!$e(t)?e!=e&&t!=t:function(e,t,n,i,s,d){var h=Be(e),m=Be(t),b=h?u:Fe(e),k=m?u:Fe(t),S=(b=b==o?g:b)==g,E=(k=k==o?g:k)==g,C=b==k;if(C&&Ue(e)){if(!Ue(t))return!1;h=!0,S=!1}if(C&&!S)return d||(d=new _e),h||He(e)?Te(e,t,n,i,s,d):function(e,t,n,i,o,u,s){switch(b){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!u(new te(e),new te(t)));case c:case l:case v:return Le(+e,+t);case f:return e.name==t.name&&e.message==t.message;case y:case x:return e==t+"";case p:var d=z;case w:var h=i&r;if(d||(d=B),e.size!=t.size&&!h)return!1;var m=s.get(e);if(m)return m==t;i|=a,s.set(e,t);var g=Te(d(e),d(t),i,o,u,s);return s.delete(e),g;case O:if(we)return we.call(e)==we.call(t)}return!1}(e,t,0,n,i,s,d);if(!(n&r)){var A=S&&X.call(e,"__wrapped__"),T=E&&X.call(t,"__wrapped__");if(A||T){var N=A?e.value():e,I=T?t.value():t;return d||(d=new _e),s(N,I,n,i,d)}}return!!C&&(d||(d=new _e),function(e,t,n,a,i,o){var u=n&r,s=Ne(e),c=s.length;if(c!=Ne(t).length&&!u)return!1;for(var l=c;l--;){var f=s[l];if(!(u?f in t:X.call(t,f)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=u;++l<c;){var v=e[f=s[l]],m=t[f];if(a)var g=u?a(m,v,f,t,e,o):a(v,m,f,e,t,o);if(!(void 0===g?v===m||i(v,m,n,a,o):g)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,i,s,d))}(e,t,n,i,Ae,s))}function Te(e,t,n,i,o,u){var s=n&r,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var d=-1,h=!0,p=n&a?new je:void 0;for(u.set(e,t),u.set(t,e);++d<c;){var v=e[d],m=t[d];if(i)var g=s?i(m,v,d,t,e,u):i(v,m,d,e,t,u);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!L(t,(function(e,t){if(r=t,!p.has(r)&&(v===e||o(v,e,n,i,u)))return p.push(t);var r}))){h=!1;break}}else if(v!==m&&!o(v,m,n,i,u)){h=!1;break}}return u.delete(e),u.delete(t),h}function Ne(e){return function(e,t,n){var r=Ge(e);return Be(e)?r:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(r,n(e))}(e,0,Re)}function Ie(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function De(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!qe(e)||Y&&Y in e)&&(We(e)?Q:S).test(Pe(e))}(n)?n:void 0}xe.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},xe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xe.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return X.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:X.call(t,e)},xe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&void 0===t?"__lodash_hash_undefined__":t,this},Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0||(n==t.length-1?t.pop():re.call(t,n,1),--this.size,0))},Oe.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},Oe.prototype.has=function(e){return Se(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ke.prototype.clear=function(){this.size=0,this.__data__={hash:new xe,map:new(ce||Oe),string:new xe}},ke.prototype.delete=function(e){var t=Ie(this,e).delete(e);return this.size-=t?1:0,t},ke.prototype.get=function(e){return Ie(this,e).get(e)},ke.prototype.has=function(e){return Ie(this,e).has(e)},ke.prototype.set=function(e,t){var n=Ie(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},je.prototype.add=je.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},je.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.clear=function(){this.__data__=new Oe,this.size=0},_e.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},_e.prototype.get=function(e){return this.__data__.get(e)},_e.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Oe){var r=n.__data__;if(!ce||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ke(r)}return n.set(e,t),this.size=n.size,this};var Re=ie?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,a=null==t?0:t.length,i=0,o=[];++r<a;){var u=t[r];s=u,ne.call(e,s)&&(o[i++]=u)}var s;return o}(ie(e)))}:function(){return[]},Fe=Ee;function Me(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Pe(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Le(e,t){return e===t||e!=e&&t!=t}(se&&Fe(new se(new ArrayBuffer(1)))!=_||ce&&Fe(new ce)!=p||le&&"[object Promise]"!=Fe(le.resolve())||fe&&Fe(new fe)!=w||de&&"[object WeakMap]"!=Fe(new de))&&(Fe=function(e){var t=Ee(e),n=t==g?e.constructor:void 0,r=n?Pe(n):"";if(r)switch(r){case pe:return _;case ve:return p;case me:return"[object Promise]";case ge:return w;case be:return"[object WeakMap]"}return t});var ze=Ce(function(){return arguments}())?Ce:function(e){return $e(e)&&X.call(e,"callee")&&!ne.call(e,"callee")},Be=Array.isArray,Ue=oe||function(){return!1};function We(e){if(!qe(e))return!1;var t=Ee(e);return t==d||t==h||t==s||t==b}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $e(e){return null!=e&&"object"==typeof e}var He=P?function(e){return function(t){return e(t)}}(P):function(e){return $e(e)&&Ve(e.length)&&!!C[Ee(e)]};function Ge(e){return null!=(t=e)&&Ve(t.length)&&!We(t)?function(e,t){var n=Be(e),r=!n&&ze(e),a=!n&&!r&&Ue(e),i=!n&&!r&&!a&&He(e),o=n||r||a||i,u=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=u.length;for(var c in e)!t&&!X.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Me(c,s))||u.push(c);return u}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||H))return ue(e);var t,n,r=[];for(var a in Object(e))X.call(e,a)&&"constructor"!=a&&r.push(a);return r}(e);var t}n.exports=function(e,t){return Ae(e,t)}}).call(this,n(12),n(57)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{_isMBTransition:!0,event:e,check:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransition=t.MouseTransition=t.TouchTransition=t.HTML5DragTransition=void 0;var r=o(n(56)),a=n(54),i=o(n(24));function o(e){return e&&e.__esModule?e:{default:e}}t.HTML5DragTransition=a.HTML5DragTransition,t.TouchTransition=a.TouchTransition,t.MouseTransition=a.MouseTransition,t.createTransition=i.default,t.default=function(e){return e.getMonitor?new r.default(e):function(t){return new r.default(t,e)}}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73);t.isFirefox=r((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=r((function(){return Boolean(window.safari)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){return"string"==typeof t||"symbol"===(void 0===t?"undefined":r(t))||n&&(0,i.default)(t)&&t.every((function(t){return e(t,!1)}))};var a,i=(a=n(4))&&a.__esModule?a:{default:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t===e||null!==t&&null!==e&&(0,a.default)(t,e)};var r,a=(r=n(15))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var r,o=(r=e[n],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,a.isValidElement)(e)){var n=e;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(n);var o=t?function(e){return r(e,t)}:r;return(0,i.default)(n,o)}r(e,t)});t[n]=function(){return o}})),t};var r,a=n(0),i=(r=n(82))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t,n,p=e.DecoratedComponent,m=e.createHandler,g=e.createMonitor,b=e.createConnector,y=e.registerHandler,w=e.containerDisplayName,x=e.getType,O=e.collect,k=e.options.arePropsEqual,j=void 0===k?h.default:k,_=p.displayName||p.name||"Component",S=(n=t=function(e){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleChange=r.handleChange.bind(r),r.handleChildRef=r.handleChildRef.bind(r),(0,l.default)("object"===a(r.context.dragDropManager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",_,_),r.manager=r.context.dragDropManager,r.handlerMonitor=g(r.manager),r.handlerConnector=b(r.manager.getBackend()),r.handler=m(r.handlerMonitor),r.disposable=new c.SerialDisposable,r.receiveProps(e),r.state=r.getCurrentState(),r.dispose(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return this.decoratedComponentInstance}},{key:"shouldComponentUpdate",value:function(e,t){return!j(e,this.props)||!(0,d.default)(t,this.state)}}]),i(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.disposable=new c.SerialDisposable,this.currentType=null,this.receiveProps(this.props),this.handleChange()}},{key:"componentWillReceiveProps",value:function(e){j(e,this.props)||(this.receiveProps(e),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose(),this.isCurrentlyMounted=!1}},{key:"receiveProps",value:function(e){this.handler.receiveProps(e),this.receiveType(x(e))}},{key:"receiveType",value:function(e){if(e!==this.currentType){this.currentType=e;var t=y(e,this.handler,this.manager),n=t.handlerId,r=t.unregister;this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var a=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new c.CompositeDisposable(new c.Disposable(a),new c.Disposable(r)))}}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,d.default)(e,this.state)||this.setState(e)}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector.receiveHandlerId(null)}},{key:"handleChildRef",value:function(e){this.decoratedComponentInstance=e,this.handler.receiveComponent(e)}},{key:"getCurrentState",value:function(){return O(this.handlerConnector.hooks,this.handlerMonitor)}},{key:"render",value:function(){return u.default.createElement(p,r({},this.props,this.state,{ref:v(p)?this.handleChildRef:null}))}}]),t}(),t.DecoratedComponent=p,t.displayName=w+"("+_+")",t.contextTypes={dragDropManager:s.default.object.isRequired},n);return(0,f.default)(S,p)};var o=n(0),u=p(o),s=p(n(1)),c=n(90),l=(p(n(5)),p(n(2))),f=p(n(16)),d=p(n(15)),h=p(n(32));function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){return Boolean(e&&e.prototype&&"function"==typeof e.prototype.render)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":r(e))||null===e||"object"!==(void 0===t?"undefined":r(t))||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o+=1){if(!i.call(t,n[o]))return!1;var u=e[n[o]],s=t[n[o]];if(u!==s||"object"===(void 0===u?"undefined":r(u))||"object"===(void 0===s?"undefined":r(s)))return!1}return!0}},function(e,t,n){var r=n(21),a=n(20),i=n(19),o=n(17),u=n(108),s=n(107);e.exports=function(e,t,n){var c=-1,l=a,f=e.length,d=!0,h=[],p=h;if(n)d=!1,l=i;else if(f>=200){var v=t?null:u(e);if(v)return s(v);d=!1,l=o,p=new r}else p=t?[]:h;e:for(;++c<f;){var m=e[c],g=t?t(m):m;if(m=n||0!==m?m:0,d&&g==g){for(var b=p.length;b--;)if(p[b]===g)continue e;t&&p.push(g),h.push(m)}else l(p,g,n)||(p!==h&&p.push(g),h.push(m))}return h}},function(e,t,n){var r=n(114),a=n(113);e.exports=function e(t,n,i,o,u){var s=-1,c=t.length;for(i||(i=a),u||(u=[]);++s<c;){var l=t[s];n>0&&i(l)?n>1?e(l,n-1,i,o,u):r(u,l):o||(u[u.length]=l)}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments[1],t=arguments[2];switch(e.type){case i.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return s;case i.BEGIN_DRAG:case i.PUBLISH_DRAG_SOURCE:case i.END_DRAG:case i.DROP:default:return c}var n=e.targetIds,a=t.targetIds,u=(0,r.default)(n,a),l=!1;if(0===u.length){for(var f=0;f<n.length;f++)if(n[f]!==a[f]){l=!0;break}}else l=!0;if(!l)return s;var d=a[a.length-1],h=n[n.length-1];return d!==h&&(d&&u.push(d),h&&u.push(h)),u},t.areDirty=function(e,t){return e!==s&&(e===c||void 0===t||(0,a.default)(t,e).length>0)};var r=u(n(117)),a=u(n(106)),i=n(11),o=n(9);function u(e){return e&&e.__esModule?e:{default:e}}var s=[],c=[]},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(21),a=n(20),i=n(19),o=n(18),u=n(36),s=n(17);e.exports=function(e,t,n,c){var l=-1,f=a,d=!0,h=e.length,p=[],v=t.length;if(!h)return p;n&&(t=o(t,u(n))),c?(f=i,d=!1):t.length>=200&&(f=s,d=!1,t=new r(t));e:for(;++l<h;){var m=e[l],g=null==n?m:n(m);if(m=c||0!==m?m:0,d&&g==g){for(var b=v;b--;)if(t[b]===g)continue e;p.push(m)}else f(t,g,c)||p.push(m)}return p}},function(e,t,n){var r=n(38),a=n(6),i=n(10),o=a((function(e,t){return i(e)?r(e,t):[]}));e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e)?e.some((function(e){return e===t})):e===t};var r,a=(r=n(4))&&r.__esModule?r:{default:r}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,o=arguments[1];switch(o.type){case a.BEGIN_DRAG:return{initialSourceClientOffset:o.sourceClientOffset,initialClientOffset:o.clientOffset,clientOffset:o.clientOffset};case a.HOVER:return(e=n.clientOffset)===(t=o.clientOffset)||e&&t&&e.x===t.x&&e.y===t.y?n:r({},n,{clientOffset:o.clientOffset});case a.END_DRAG:case a.DROP:return i;default:return n}},t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&n&&r?{x:t.x+r.x-n.x,y:t.y+r.y-n.y}:null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?{x:t.x-n.x,y:t.y-n.y}:null};var a=n(11),i={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackBackendForEs5Users=t.createChildContext=t.CHILD_CONTEXT_TYPES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){d.default.apply(void 0,["DragDropContext","backend"].concat(Array.prototype.slice.call(arguments)));var t=m(e),n=v(t);return function(e){var t,i,s=e.displayName||e.name||"Component",c=(i=t=function(t){function i(){return function(e,t){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.Component),a(i,[{key:"getDecoratedComponentInstance",value:function(){return(0,l.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"getManager",value:function(){return n.dragDropManager}},{key:"getChildContext",value:function(){return n}},{key:"render",value:function(){var t=this;return u.default.createElement(e,r({},this.props,{ref:function(e){t.child=e}}))}}]),i}(),t.DecoratedComponent=e,t.displayName="DragDropContext("+s+")",t.childContextTypes=p,i);return(0,f.default)(c,e)}};var o=n(0),u=h(o),s=h(n(1)),c=n(134),l=h(n(2)),f=h(n(16)),d=h(n(8));function h(e){return e&&e.__esModule?e:{default:e}}var p=t.CHILD_CONTEXT_TYPES={dragDropManager:s.default.object.isRequired},v=t.createChildContext=function(e,t){return{dragDropManager:new c.DragDropManager(e,t)}},m=t.unpackBackendForEs5Users=function(e){var t=e;return"object"===(void 0===t?"undefined":i(t))&&"function"==typeof t.default&&(t=t.default),(0,l.default)("function"==typeof t,"Expected the backend to be a function or an ES6 module exporting a default function. Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html"),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(22)),a=o(n(51)),i=n(25);function o(e){return e&&e.__esModule?e:{default:e}}t.default={backends:[{backend:r.default,transition:i.MouseTransition},{backend:(0,a.default)({enableMouseEvents:!0}),preview:!0,transition:i.TouchTransition}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransition=t.MouseTransition=t.TouchTransition=t.HTML5DragTransition=t.Preview=void 0;var r=n(25),a=o(r),i=o(n(53));function o(e){return e&&e.__esModule?e:{default:e}}t.Preview=i.default,t.HTML5DragTransition=r.HTML5DragTransition,t.TouchTransition=r.TouchTransition,t.MouseTransition=r.MouseTransition,t.createTransition=r.createTransition,t.default=a.default},function(e,t,n){var r,a;a=function(e){var t=["N","E","A","D"];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function a(e,t,n){a.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function f(e){var t=0,n=c(e);if("array"===n)return e.forEach((function(e){t+=f(e)})),t+l("[type: array, hash: "+t+"]");if("object"===n){for(var r in e)if(e.hasOwnProperty(r)){var a="[ type: object, key: "+r+", value hash: "+f(e[r])+"]";t+=l(a)}return t}return t+l("[ type: "+n+" ; value: "+e+"]")}function d(e,t,n,r,s,l,h,p){n=n||[],h=h||[];var v=(s=s||[]).slice(0);if(void 0!==l&&null!==l){if(r){if("function"==typeof r&&r(v,l))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(v,l))return;if(r.normalize){var m=r.normalize(v,l,e,t);m&&(e=m[0],t=m[1])}}}v.push(l)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var g,b,y,w,x=typeof e,O=typeof t,k="undefined"!==x||h&&h.length>0&&h[h.length-1].lhs&&Object.getOwnPropertyDescriptor(h[h.length-1].lhs,l),j="undefined"!==O||h&&h.length>0&&h[h.length-1].rhs&&Object.getOwnPropertyDescriptor(h[h.length-1].rhs,l);if(!k&&j)n.push(new i(v,t));else if(!j&&k)n.push(new o(v,e));else if(c(e)!==c(t))n.push(new a(v,e,t));else if("date"===c(e)&&e-t!=0)n.push(new a(v,e,t));else if("object"===x&&null!==e&&null!==t){for(g=h.length-1;g>-1;--g)if(h[g].lhs===e){w=!0;break}if(w)e!==t&&n.push(new a(v,e,t));else{if(h.push({lhs:e,rhs:t}),Array.isArray(e)){for(p&&(e.sort((function(e,t){return f(e)-f(t)})),t.sort((function(e,t){return f(e)-f(t)}))),g=t.length-1,b=e.length-1;g>b;)n.push(new u(v,g,new i(void 0,t[g--])));for(;b>g;)n.push(new u(v,b,new o(void 0,e[b--])));for(;g>=0;--g)d(e[g],t[g],n,r,v,g,h,p)}else{var _=Object.keys(e),S=Object.keys(t);for(g=0;g<_.length;++g)y=_[g],(w=S.indexOf(y))>=0?(d(e[y],t[y],n,r,v,y,h,p),S[w]=null):d(e[y],void 0,n,r,v,y,h,p);for(g=0;g<S.length;++g)(y=S[g])&&d(void 0,t[y],n,r,v,y,h,p)}h.length=h.length-1}}else e!==t&&("number"===x&&isNaN(e)&&isNaN(t)||n.push(new a(v,e,t)))}function h(e,t,n,r,a){var i=[];if(d(e,t,i,r,null,null,null,a),n)for(var o=0;o<i.length;++o)n(i[o]);return i}function p(e,t,n,r){var a=h(e,t,r?function(e){e&&r.push(e)}:void 0,n);return r||(a.length?a:void 0)}function v(e,n,r){if(void 0===r&&n&&~t.indexOf(n.kind)&&(r=n),e&&r&&r.kind){for(var a=e,i=-1,o=r.path?r.path.length-1:0;++i<o;)void 0===a[r.path[i]]&&(a[r.path[i]]=void 0!==r.path[i+1]&&"number"==typeof r.path[i+1]?[]:{}),a=a[r.path[i]];switch(r.kind){case"A":r.path&&void 0===a[r.path[i]]&&(a[r.path[i]]=[]),function e(t,n,r){if(r.path&&r.path.length){var a,i=t[n],o=r.path.length-1;for(a=0;a<o;a++)i=i[r.path[a]];switch(r.kind){case"A":e(i[r.path[a]],r.index,r.item);break;case"D":delete i[r.path[a]];break;case"E":case"N":i[r.path[a]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=s(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(r.path?a[r.path[i]]:a,r.index,r.item);break;case"D":delete a[r.path[i]];break;case"E":case"N":a[r.path[i]]=r.rhs}}}return n(a,r),n(i,r),n(o,r),n(u,r),Object.defineProperties(p,{diff:{value:p,enumerable:!0},orderIndependentDiff:{value:function(e,t,n,r){var a=h(e,t,r?function(e){e&&r.push(e)}:void 0,n,!0);return r||(a.length?a:void 0)},enumerable:!0},observableDiff:{value:h,enumerable:!0},orderIndependentObservableDiff:{value:function(e,t,n,r,a,i,o){return d(e,t,n,r,a,i,o,!0)},enumerable:!0},orderIndepHash:{value:f,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&h(e,t,(function(r){n&&!n(e,t,r)||v(e,t,r)}))},enumerable:!0},applyChange:{value:v,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,a,i=e;for(a=n.path.length-1,r=0;r<a;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var a,i=t[n],o=r.path.length-1;for(a=0;a<o;a++)i=i[r.path[a]];switch(r.kind){case"A":e(i[r.path[a]],r.index,r.item);break;case"D":case"E":i[r.path[a]]=r.lhs;break;case"N":delete i[r.path[a]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=s(t,n)}return t}(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),p.DeepDiff=p,e.DeepDiff=p,p}(this),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(3),o=n(1),u=n.n(o),s=n(22),c=n(48),l=n.n(c);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d="abcdefgh".split("");function h(e){return"string"==typeof e}function p(e){if(!v(e))return!1;for(var t=(e=e.replace(/ .+$/,"")).split("/"),n={},r=8,a=0;a<8;a++){for(var i=t[a].split(""),o=0,u=0;u<i.length;u++)-1!==i[u].search(/[1-8]/)?o+=parseInt(i[u],10):(n[d[o]+r]=(s=i[u]).toLowerCase()===s?"b"+s.toUpperCase():"w"+s.toUpperCase(),o+=1);r-=1}var s;return n}function v(e){if(!h(e))return!1;var t=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==t.length)return!1;for(var n=0;n<8;n++)if(8!==t[n].length||-1!==t[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){var t=e.dropTarget,n=e.square,r=e.targetSquare,i=e.waitForTransition,o=e.getSquareCoordinates,u=e.piece,s=e.width,c=e.pieces,l=e.transitionDuration,f=e.isDragging,d=e.sourceSquare,h=e.onPieceClick,p=e.allowDrag,v=e.customDragLayerStyles,m=void 0===v?{}:v,g=e.phantomPieceStyles,b=void 0===g?{}:g,y={squareWidth:s/8,isDragging:f,droppedPiece:t&&t.piece,targetSquare:t&&t.target,sourceSquare:t&&t.source};return a.a.createElement("div",{"data-testid":"".concat(u,"-").concat(n),onClick:function(){return h(u)},style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}({},_({isDragging:f,transitionDuration:l,waitForTransition:i,square:n,targetSquare:r,sourceSquare:d,getSquareCoordinates:o,getTranslation:j,piece:u,allowDrag:p}),b,m)},"function"==typeof c[u]?c[u](y):a.a.createElement("svg",{viewBox:"1 1 43 43",width:s/8,height:s/8},a.a.createElement("g",null,c[u])))},O=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(n=b(t).apply(this,arguments))||"object"!==m(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n;var e,n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.Component),(n=[{key:"shouldComponentUpdate",value:function(e){return!(null===e.dropTarget&&!e.isDragging&&!this.props.isDragging&&this.props.sourceSquare===e.sourceSquare&&this.props.waitForTransition===e.waitForTransition&&this.props.width===e.width)}},{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.props.setTouchState),this.props.connectDragPreview(Object(s.getEmptyImage)(),{captureDraggingState:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.props.setTouchState)}},{key:"render",value:function(){var e=this.props,t=e.square,n=e.targetSquare,r=e.waitForTransition,a=e.getSquareCoordinates,i=e.piece,o=e.width,u=e.pieces,s=e.transitionDuration,c=e.isDragging,l=e.connectDragSource,f=e.sourceSquare,d=e.dropTarget,h=e.onPieceClick,p=e.allowDrag;return l(x({square:t,targetSquare:n,waitForTransition:r,getSquareCoordinates:a,piece:i,width:o,pieces:u,transitionDuration:s,isDragging:c,sourceSquare:f,dropTarget:d,onPieceClick:h,allowDrag:p}))}}])&&g(t.prototype,n),t}();O.propTypes={piece:u.a.string,square:u.a.string,id:u.a.oneOfType([u.a.string,u.a.number]),width:u.a.number,connectDragSource:u.a.func,isDragging:u.a.bool,connectDragPreview:u.a.func,dropOffBoard:u.a.string,getSquareCoordinates:u.a.func,onDrop:u.a.oneOfType([u.a.bool,u.a.func]),transitionDuration:u.a.number,pieces:u.a.object,sourceSquare:u.a.string,targetSquare:u.a.string,waitForTransition:u.a.bool,setTouchState:u.a.func,onPieceClick:u.a.func,wasSquareClicked:u.a.func,allowDrag:u.a.func};var k=Object(i.DragSource)("piece",{canDrag:function(e){return e.draggable&&e.allowDrag({piece:e.piece,sourceSquare:e.square})},beginDrag:function(e){return{piece:e.piece,source:e.square,board:e.id}},endDrag:function(e,t){var n=e.setPosition,r=e.dropOffBoard,a=e.piece,i=e.square,o=e.onDrop,u=e.wasManuallyDropped,s=e.wasSquareClicked,c=t.getDropResult(),l=t.didDrop();if(!l&&"trash"===r)return n({sourceSquare:i,piece:a});if(t.getItem().board===(c&&c.board)&&l){if(o.length)return u(!0),"spare"!==i&&s(!1),o({sourceSquare:i,targetSquare:c.target,piece:a});n({sourceSquare:i,targetSquare:c.target,piece:a})}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),dropTarget:t.getDropResult()}}))(O),j=function(e){var t=e.waitForTransition,n=e.square,r=e.targetSquare,a=e.sourceSquare,i=e.getSquareCoordinates;return function(e,t){return t&&t===e}(n,r)&&t&&function(e){var t=(0,e.getSquareCoordinates)(e.sourceSq,e.targetSq),n=t.sourceSquare,r=t.targetSquare;return"translate(".concat(n.x-r.x,"px, ").concat(n.y-r.y,"px)")}({getSquareCoordinates:i,sourceSq:a,targetSq:r})},_=function(e){var t=e.isDragging,n=e.transitionDuration,r=e.waitForTransition,a=e.square,i=e.targetSquare,o=e.sourceSquare,u=e.getSquareCoordinates,s=e.getTranslation,c=e.piece,l=e.allowDrag;return{opacity:t?0:1,transform:s({waitForTransition:r,square:a,targetSquare:i,sourceSquare:o,getSquareCoordinates:u}),transition:"transform ".concat(n,"ms"),zIndex:5,cursor:t?"-webkit-grabbing":l({piece:c,sourceSquare:a})?"-webkit-grab":"not-allowed"}};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){var e,n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return T(r,(n=r=T(this,(e=N(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.wasSquareClicked(!0),r.props.onSquareClick(r.props.square)},n))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r.Component),(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.square,n=e.setSquareCoordinates,r=e.width;(0,e.roughSquare)({squareElement:this.roughSquareSvg,squareWidth:r/8});var a=this[t].getBoundingClientRect();n(a.x,a.y,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.screenWidth,r=t.screenHeight,a=t.square,i=t.setSquareCoordinates;if(e.screenWidth!==n||e.screenHeight!==r){var o=this[a].getBoundingClientRect();i(o.x,o.y,a)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.connectDropTarget,r=t.width,i=t.squareColor,o=t.children,u=t.square,s=t.roughSquare,c=t.onMouseOverSquare,l=t.onMouseOutSquare,f=t.squareStyles,d=t.onDragOverSquare,h=t.onSquareRightClick;return n(a.a.createElement("div",{"data-testid":"".concat(i,"-square"),"data-squareid":u,ref:function(t){return e[u]=t},style:F(this.props),onMouseOver:function(){return c(u)},onMouseOut:function(){return l(u)},onDragEnter:function(){return d(u)},onClick:function(){return e.onClick()},onContextMenu:function(e){e.preventDefault(),h(u)}},a.a.createElement("div",{style:E({},P(r),M,f[u]&&f[u])},s.length?a.a.createElement("div",{style:M},o,a.a.createElement("svg",{style:E({},P(r),{position:"absolute",display:"block"}),ref:function(t){return e.roughSquareSvg=t}})):o)))}}])&&A(t.prototype,n),t}();D.propTypes={connectDropTarget:u.a.func,width:u.a.number,squareColor:u.a.oneOf(["white","black"]),children:u.a.oneOfType([u.a.array,u.a.node]),isOver:u.a.bool,square:u.a.string,setSquareCoordinates:u.a.func,lightSquareStyle:u.a.object,darkSquareStyle:u.a.object,roughSquare:u.a.func,onMouseOverSquare:u.a.func,onMouseOutSquare:u.a.func,dropSquareStyle:u.a.object,screenWidth:u.a.number,screenHeight:u.a.number,squareStyles:u.a.object,onDragOverSquare:u.a.func,onSquareClick:u.a.func,wasSquareClicked:u.a.func,onSquareRightClick:u.a.func};var R=Object(i.DropTarget)("piece",{drop:function(e,t){return{target:e.square,board:e.id,piece:t.getItem().piece,source:t.getItem().source}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(D),F=function(e){var t=e.width,n=e.squareColor,r=e.isOver,a=e.darkSquareStyle,i=e.lightSquareStyle,o=e.dropSquareStyle;return E({},E({},P(t),M,"black"===n?a:i,r&&o))},M={display:"flex",justifyContent:"center"},P=function(e){return{width:e/8,height:e/8}};function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e,t){return"white"===e?t+1:t-1},$=function(e,t,n){return"black"===e?t[7-n]:t[n]},H=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(n=W(t).apply(this,arguments))||"object"!==B(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n;var e,n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r.PureComponent),(n=[{key:"render",value:function(){var e=this.props,t=e.row,n=e.col,i=e.orientation,o=e.lightSquareStyle,u=e.darkSquareStyle,s=o.backgroundColor,c=u.backgroundColor,l=0===n,f="white"===i&&0===t||"black"===i&&9===t,d=l&&f;return d?function(e,t){var n=e.orientation,i=e.row,o=e.width,u=e.alpha,s=e.col,c=t.whiteColor;return a.a.createElement(r.Fragment,null,a.a.createElement("div",{"data-testid":"bottom-left-".concat(q(n,i)),style:L({},Q,{fontSize:o/48,color:c},J(o))},q(n,i)),a.a.createElement("div",{"data-testid":"bottom-left-".concat($(n,u,s)),style:L({},Q,{fontSize:o/48,color:c},Y(o))},$(n,u,s)))}(this.props,{whiteColor:s}):f?function(e,t){var n=e.orientation,r=e.width,i=e.alpha,o=e.col,u=t.whiteColor,s=t.blackColor;return a.a.createElement("div",{"data-testid":"column-".concat($(n,i,o)),style:L({},Q,K({col:o,width:r,blackColor:s,whiteColor:u}),Y(r))},$(n,i,o))}(this.props,{whiteColor:s,blackColor:c}):l?function(e,t){var n=e.orientation,r=e.row,i=e.width,o=t.whiteColor,u=t.blackColor,s=t.isRow,c=t.isBottomLeftSquare;return a.a.createElement("div",{style:L({},Q,X({row:r,width:i,blackColor:u,whiteColor:o,orientation:n,isBottomLeftSquare:c,isRow:s}),J(i))},q(n,r))}(this.props,{whiteColor:s,blackColor:c,isRow:l,isBottomLeftSquare:d}):null}}])&&U(t.prototype,n),t}();H.propTypes={row:u.a.number,col:u.a.number,alpha:u.a.array,orientation:u.a.string,width:u.a.number,lightSquareStyle:u.a.object,darkSquareStyle:u.a.object};var G=H,K=function(e){var t=e.col,n=e.width,r=e.blackColor,a=e.whiteColor;return{fontSize:n/48,color:t%2!=0?r:a}},X=function(e){var t=e.row,n=e.width,r=e.blackColor,a=e.whiteColor,i=e.orientation,o=e.isBottomLeftSquare,u=e.isRow;return{fontSize:n/48,color:"black"===i?u&&!o&&t%2==0?r:a:u&&!o&&t%2!=0?r:a}},Y=function(e){return{alignSelf:"flex-end",paddingLeft:e/8-e/48}},J=function(e){return{alignSelf:"flex-start",paddingRight:e/8-e/48}},Q={fontFamily:"Helvetica Neue",zIndex:3,position:"absolute"};function Z(e){var t=e.width,n=e.pieces,r=e.phantomPieceValue,a=e.allowDrag;return x({width:t,pieces:n,piece:r,phantomPieceStyles:te(t),allowDrag:a})}Z.propTypes={width:u.a.number,phantomPieceValue:u.a.string,pieces:u.a.object,allowDrag:u.a.func};var ee=Z,te=function(e){return{position:"absolute",width:e/8,height:e/8,zIndex:1}};function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(n=oe(t).apply(this,arguments))||"object"!==ne(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n;var e,n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r.Component),(n=[{key:"render",value:function(){var e=this.props,t=e.width,n=e.boardStyle,r=e.orientation,i=e.children,o=e.boardId,u=d,s=8,c="white";return"black"===r&&(s=1),a.a.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}({},le(t),n),"data-boardid":o},re(Array(8)).map((function(e,n){return s="black"===r?s+1:s-1,a.a.createElement("div",{key:n.toString(),style:fe(t)},re(Array(8)).map((function(e,t){var n="black"===r?u[7-t]+(s-1):u[t]+(s+1);return 0!==t&&(c="black"===c?"white":"black"),i({square:n,squareColor:c,col:t,row:s,alpha:u})})))})))}}])&&ie(t.prototype,n),t}();se.propTypes={width:u.a.number,orientation:u.a.string,boardStyle:u.a.object,children:u.a.func,boardId:u.a.oneOfType([u.a.string,u.a.number])};var ce=se,le=function(e){return{width:e,height:e,cursor:"default"}},fe=function(e){return{display:"flex",flexWrap:"nowrap",width:e}};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(){var e,n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return pe(r,(n=r=pe(this,(e=ve(t)).call.apply(e,[this].concat(i))),r.setSquareCoordinates=function(e,t,n){return r.setState((o={x:e,y:t},(i=n)in(a={})?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a));var a,i,o},r.getSquareCoordinates=function(e,t){return{sourceSquare:r.state[e],targetSquare:r.state[t]}},r.showPhantom=function(e){var t=e.square,n=e.targetSquare,r=e.phantomPiece;return r&&r[n]&&function(e,t){return t&&t===e}(t,n)},r.hasPiece=function(e,t){return e&&Object.keys(e)&&Object.keys(e).includes(t)},n))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,r.Component),(n=[{key:"render",value:function(){var e=this;return a.a.createElement(ut.Consumer,null,(function(t){return a.a.createElement(ce,{width:t.width,boardStyle:t.boardStyle,orientation:t.orientation,boardId:t.id},(function(n){var r=n.square,i=n.squareColor,o=n.col,u=n.row,s=n.alpha;return a.a.createElement(R,{key:"".concat(o).concat(u),width:t.width,square:r,squareColor:i,setSquareCoordinates:e.setSquareCoordinates,lightSquareStyle:t.lightSquareStyle,darkSquareStyle:t.darkSquareStyle,roughSquare:t.roughSquare,onMouseOverSquare:t.onMouseOverSquare,onMouseOutSquare:t.onMouseOutSquare,onDragOverSquare:t.onDragOverSquare,dropSquareStyle:t.dropSquareStyle,id:t.id,screenWidth:t.screenWidth,screenHeight:t.screenHeight,squareStyles:t.squareStyles,onSquareClick:t.onSquareClick,onSquareRightClick:t.onSquareRightClick,wasSquareClicked:t.wasSquareClicked},e.hasPiece(t.currentPosition,r)?a.a.createElement(k,{pieces:t.pieces,square:r,piece:t.currentPosition[r],width:t.width,setPosition:t.setPosition,dropOffBoard:t.dropOffBoard,getSquareCoordinates:e.getSquareCoordinates,draggable:t.draggable,onDrop:t.onDrop,sourceSquare:t.sourceSquare,targetSquare:t.targetSquare,waitForTransition:t.waitForTransition,transitionDuration:t.transitionDuration,orientation:t.orientation,id:t.id,setTouchState:t.setTouchState,wasManuallyDropped:t.wasManuallyDropped,phantomPiece:t.phantomPiece,onPieceClick:t.onPieceClick,wasSquareClicked:t.wasSquareClicked,allowDrag:t.allowDrag}):null,e.showPhantom({square:r,targetSquare:t.targetSquare,phantomPiece:t.phantomPiece})&&a.a.createElement(ee,{width:t.width,phantomPieceValue:t.phantomPiece[t.targetSquare],pieces:t.pieces,showNotation:t.showNotation,allowDrag:t.allowDrag}),t.showNotation&&a.a.createElement(G,{row:u,col:o,alpha:s,orientation:t.orientation,width:t.width,lightSquareStyle:t.lightSquareStyle,darkSquareStyle:t.darkSquareStyle}))}))}))}}])&&he(t.prototype,n),t}(),be=n(23),ye=n.n(be),we=n(47),xe=n.n(we),Oe=n(46),ke=n.n(Oe);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function t(){var e,n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return Se(r,(n=r=Se(this,(e=Ee(t)).call.apply(e,[this].concat(i))),r.getOrientation=function(e){return r.props.top?"black"===e?"white":"black":"black"===e?"black":"white"},n))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,r.Component),(n=[{key:"render",value:function(){var e=this;return a.a.createElement(ut.Consumer,null,(function(t){var n="black"===e.getOrientation(t.orientation)?["bK","bQ","bR","bB","bN","bP"]:["wK","wQ","wR","wB","wN","wP"];return a.a.createElement("div",{style:Ne(t.width)},n.map((function(e){return a.a.createElement("div",{"data-testid":"spare-".concat(e),key:e},a.a.createElement(k,{piece:e,width:t.width,setPosition:t.setPosition,square:"spare",dropOffBoard:t.dropOffBoard,draggable:!0,onDrop:t.onDrop,sourceSquare:t.sourceSquare,targetSquare:t.targetSquare,sourcePiece:t.sourcePiece,orientation:t.orientation,manualDrop:t.manualDrop,id:t.id,pieces:t.pieces,wasManuallyDropped:t.wasManuallyDropped,onPieceClick:t.onPieceClick,allowDrag:t.allowDrag}))})))}))}}])&&_e(t.prototype,n),t}();Ae.propTypes={top:u.a.bool},Ae.Top=function(){return a.a.createElement(Ae,{top:!0})},Ae.Bottom=function(){return a.a.createElement(Ae,null)};var Te=Ae,Ne=function(e){return{display:"flex",justifyContent:"center",width:e}};function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(n=Re(t).apply(this,arguments))||"object"!==Ie(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n;var e,n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,r.Component),(n=[{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.width,r=e.item,i=e.id,o=e.currentOffset,u=e.wasPieceTouched,s=e.pieces,c=e.sourceSquare;return t&&r.board===i?a.a.createElement("div",{style:Le},a.a.createElement("div",{style:ze(o,u)},x({width:n,pieces:s,piece:r.piece,isDragging:t,customDragLayerStyles:{opacity:1},sourceSquare:c}))):null}}])&&De(t.prototype,n),t}();Me.propTypes={item:u.a.object,currentOffset:u.a.shape({x:u.a.number.isRequired,y:u.a.number.isRequired}),isDragging:u.a.bool.isRequired,width:u.a.number,pieces:u.a.object,id:u.a.oneOfType([u.a.string,u.a.number]),wasPieceTouched:u.a.bool,sourceSquare:u.a.string};var Pe=Object(i.DragLayer)((function(e){return{item:e.getItem(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}))(Me),Le={position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0},ze=function(e,t){if(!e)return{display:"none"};var n=e.x,r=e.y;return{transform:t?"translate(".concat(n,"px, ").concat(r+-25,"px) scale(2)"):"translate(".concat(n,"px, ").concat(r,"px)")}},Be={wP:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})),wR:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),a.a.createElement("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),a.a.createElement("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}))),wN:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),a.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),a.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),a.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}}))),wB:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("g",{style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},a.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),a.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),a.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),a.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}))),wQ:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(-1,-1)"}),a.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(15.5,-5.5)"}),a.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(32,-1)"}),a.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(7,-4.5)"}),a.a.createElement("path",{d:"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z",transform:"translate(24,-4)"}),a.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),a.a.createElement("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}))),wK:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:{fill:"#ffffff",stroke:"#000000"}}),a.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),a.a.createElement("path",{d:"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),a.a.createElement("path",{d:"M 11.5,37 C 17,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}}))),bP:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})),bR:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}))),bN:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),a.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),a.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}}))),bB:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("g",{style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},a.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),a.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),a.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),a.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}}))),bQ:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{opacity:"1",fill:"000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("g",{style:{fill:"#000000",stroke:"none"}},a.a.createElement("circle",{cx:"6",cy:"12",r:"2.75"}),a.a.createElement("circle",{cx:"14",cy:"9",r:"2.75"}),a.a.createElement("circle",{cx:"22.5",cy:"8",r:"2.75"}),a.a.createElement("circle",{cx:"31",cy:"9",r:"2.75"}),a.a.createElement("circle",{cx:"39",cy:"12",r:"2.75"})),a.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",stroke:"#000000"}}),a.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,29 A 35,35 1 0 1 34,29",style:{fill:"none",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 12.5,31.5 L 32.5,31.5",style:{fill:"none",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5",style:{fill:"none",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5",style:{fill:"none",stroke:"#ffffff"}}))),bK:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},a.a.createElement("g",{style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},a.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),a.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:{fill:"#000000",stroke:"#000000"}}),a.a.createElement("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85",style:{fill:"none",stroke:"#ffffff"}}),a.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})))},Ue={whiteKing:a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},a.a.createElement("g",null,a.a.createElement("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})))};function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(){var e,n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return qe(r,(n=r=qe(this,(e=$e(t)).call.apply(e,[this].concat(i))),r.state={hasError:!1},n))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,r.Component),(n=[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0}),console.error(e.message)}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("div",{style:Xe},a.a.createElement("div",{style:Ye},Ue.whiteKing),a.a.createElement("h1",null,"Something went wrong")):this.props.children}}])&&Ve(t.prototype,n),t}();Ge.propTypes={children:u.a.object};var Ke=Ge,Xe={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},Ye={width:250,height:250,transform:"rotate(90deg)"};function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ze(e,t,n[t])}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var at=a.a.createContext(),it=function(e){return"start"===e?p("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"):v(e)?p(e):function(e){if(null===e||"object"!==f(e))return!1;for(var t in e)if(e.hasOwnProperty(t)&&(!h(r=t)||-1===r.search(/^[a-h][1-8]$/)||!h(n=e[t])||-1===n.search(/^[bw][KQRNBP]$/)))return!1;var n,r;return!0}(e)?e:{}},ot=function(e){function t(){var e,n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return tt(r,(n=r=tt(this,(e=nt(t)).call.apply(e,[this].concat(i))),r.state={previousPositionFromProps:it(r.props.position),currentPosition:it(r.props.position),sourceSquare:"",targetSquare:"",sourcePiece:"",waitForTransition:!1,phantomPiece:null,wasPieceTouched:!1,manualDrop:!1,squareClicked:!1,firstMove:!1,pieces:Qe({},Be,r.props.pieces),undoMove:r.props.undo},r.updateWindowDimensions=function(){r.setState({screenWidth:window.innerWidth,screenHeight:window.innerHeight})},r.wasManuallyDropped=function(e){return r.setState({manualDrop:e})},r.wasSquareClicked=function(e){return r.setState({squareClicked:e})},r.setPosition=function(e){var t=e.sourceSquare,n=e.targetSquare,a=e.piece,i=r.state.currentPosition,o=r.props,u=o.getPosition,s=o.dropOffBoard;if(t!==n){if("trash"===s&&!n){var c=i;return delete c[t],r.setState({currentPosition:c,manualDrop:!0}),u(i)}var l=i;"spare"!==t&&delete l[t],l[n]=a,r.setState({currentPosition:l,manualDrop:!0}),u(i)}},r.setTouchState=function(e){return r.setState({wasPieceTouched:e.isTrusted})},r.getWidth=function(){var e=r.props,t=e.calcWidth,n=e.width,a=r.state,i=a.screenWidth,o=a.screenHeight;return t({screenWidth:i,screenHeight:o})?t({screenWidth:i,screenHeight:o}):n},n))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,r.Component),n=t,o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=e.undo,a=t.currentPosition,i=t.manualDrop,o=t.squareClicked,u=it(n);if(!ye()(u,a)){var s=function(e,t){var n=l()(e,t),r=n.length;return{sourceSquare:n&&n[1]&&n&&"D"===n[1].kind?n[1].path&&n[1].path[0]:n[0].path&&n[0].path[0],targetSquare:n&&n[1]&&n&&"D"===n[1].kind?n[0]&&n[0].path[0]:n[1]&&n[1].path[0],sourcePiece:n&&n[1]&&n&&"D"===n[1].kind?n[1]&&n[1].lhs:n[1]&&n[1].rhs,squaresAffected:r}}(a,u),c=s.sourceSquare,f=s.targetSquare,d=s.sourcePiece,h=s.squaresAffected;return i?{sourceSquare:c,targetSquare:f,sourcePiece:d,currentPosition:u,waitForTransition:!1,manualDrop:!1}:h&&2!==h?{currentPosition:u,waitForTransition:!1,manualDrop:!1,sourceSquare:c,targetSquare:f,sourcePiece:d}:a[f]?(delete u[f],{sourceSquare:c,targetSquare:f,sourcePiece:d,currentPosition:u,waitForTransition:!o,phantomPiece:o?null:Ze({},f,a[f]),manualDrop:!1,squareClicked:!1}):r?{sourceSquare:c,targetSquare:f,sourcePiece:d,currentPosition:u,waitForTransition:!0,manualDrop:!1,squareClicked:!1,undoMove:!0}:{sourceSquare:c,targetSquare:f,sourcePiece:d,currentPosition:u,waitForTransition:!o,manualDrop:!1,squareClicked:!1}}return null}}],(i=[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.position,a=n.transitionDuration,i=n.getPosition,o=this.state,u=o.waitForTransition,s=o.undoMove,c=it(r),l=it(e.position);if((!ye()(c,l)||s)&&(this.setState({previousPositionFromProps:l,undoMove:!1}),i(c),u))return new Promise((function(e){t.setState({currentPosition:c},(function(){return setTimeout((function(){t.setState({waitForTransition:!1}),e()}),a)}))})).then((function(){return setTimeout((function(){return t.setState({phantomPiece:null})}),a)}))}},{key:"render",value:function(){var e=this.props,t=e.sparePieces,n=e.id,r=e.orientation,i=e.dropOffBoard,o=this.state,u=o.sourceSquare,s=o.targetSquare,c=o.sourcePiece,l=o.waitForTransition,f=o.phantomPiece,d=o.wasPieceTouched,h=o.currentPosition,p=o.manualDrop,v=o.screenWidth,m=o.screenHeight,g=o.pieces,b=v&&m;return a.a.createElement(Ke,null,a.a.createElement(at.Provider,{value:Qe({},this.props,{pieces:g,orientation:r.toLowerCase(),dropOffBoard:i.toLowerCase()},{width:this.getWidth(),sourceSquare:u,targetSquare:s,sourcePiece:c,waitForTransition:l,phantomPiece:f,setPosition:this.setPosition,manualDrop:p,setTouchState:this.setTouchState,currentPosition:h,screenWidth:v,screenHeight:m,wasManuallyDropped:this.wasManuallyDropped,wasSquareClicked:this.wasSquareClicked})},a.a.createElement("div",null,b&&t&&a.a.createElement(Te.Top,null),b&&a.a.createElement(ge,null),b&&t&&a.a.createElement(Te.Bottom,null)),a.a.createElement(Pe,{width:this.getWidth(),pieces:g,id:n,wasPieceTouched:d,sourceSquare:s})))}}])&&et(n.prototype,i),o&&et(n,o),t}();ot.propTypes={id:u.a.oneOfType([u.a.string,u.a.number]),position:u.a.oneOfType([u.a.string,u.a.object]),pieces:u.a.object,width:u.a.number,orientation:u.a.oneOf(["white","black"]),showNotation:u.a.bool,sparePieces:u.a.bool,draggable:u.a.bool,dropOffBoard:u.a.oneOf(["snapback","trash"]),transitionDuration:u.a.number,boardStyle:u.a.object,lightSquareStyle:u.a.object,darkSquareStyle:u.a.object,squareStyles:u.a.object,dropSquareStyle:u.a.object,calcWidth:u.a.func,roughSquare:u.a.func,onMouseOverSquare:u.a.func,onMouseOutSquare:u.a.func,onDrop:u.a.func,getPosition:u.a.func,onDragOverSquare:u.a.func,onSquareClick:u.a.func,onPieceClick:u.a.func,onSquareRightClick:u.a.func,allowDrag:u.a.func,undo:u.a.bool},ot.defaultProps={id:"0",position:"",pieces:{},width:560,orientation:"white",showNotation:!0,sparePieces:!1,draggable:!0,undo:!1,dropOffBoard:"snapback",transitionDuration:300,boardStyle:{},lightSquareStyle:{backgroundColor:"rgb(240, 217, 181)"},darkSquareStyle:{backgroundColor:"rgb(181, 136, 99)"},squareStyles:{},dropSquareStyle:{boxShadow:"inset 0 0 1px 4px yellow"},calcWidth:function(){},roughSquare:function(){},onMouseOverSquare:function(){},onMouseOutSquare:function(){},onDrop:function(){},getPosition:function(){},onDragOverSquare:function(){},onSquareClick:function(){},onPieceClick:function(){},onSquareRightClick:function(){},allowDrag:function(){return!0}},ot.Consumer=at.Consumer;var ut=Object(i.DragDropContext)(xe()(ke.a))(ot);n.d(t,"default",(function(){return ut}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchBackend=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return new p(t,e)};return e.getMonitor?t(e):t};var i,o=(i=n(2))&&i.__esModule?i:{default:i};function u(e){return e.targetTouches?function(e){if(1===e.targetTouches.length)return u(e.targetTouches[0])}(e):{x:e.clientX,y:e.clientY}}var s=1,c={Left:0,Center:1,Right:2};function l(e){return void 0===e.button||e.button===c.Left}var f=("undefined"!=typeof document&&document.elementsFromPoint||function(e,t){if(document.msElementsFromPoint){var n=document.msElementsFromPoint(e,t);return n&&Array.prototype.slice.call(n,0)}for(var r,a,i,o=[],u=[];(r=document.elementFromPoint(e,t))&&-1===o.indexOf(r)&&null!==r;)o.push(r),u.push({value:r.style.getPropertyValue("pointer-events"),priority:r.style.getPropertyPriority("pointer-events")}),r.style.setProperty("pointer-events","none","important");for(a=u.length;i=u[--a];)o[a].style.setProperty("pointer-events",i.value?i.value:"",i.priority);return o}).bind("undefined"!=typeof document?document:null),d=function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}(),h={mouse:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},touch:{start:"touchstart",move:"touchmove",end:"touchend"},keyboard:{keydown:"keydown"}},p=t.TouchBackend=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),n.delayTouchStart=n.delayTouchStart||n.delay,n=r({enableTouchEvents:!0,enableMouseEvents:!1,enableKeyboardEvents:!1,ignoreContextMenu:!1,delayTouchStart:0,delayMouseStart:0,touchSlop:0},n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enableKeyboardEvents=n.enableKeyboardEvents,this.enableMouseEvents=n.enableMouseEvents,this.delayTouchStart=n.delayTouchStart,this.delayMouseStart=n.delayMouseStart,this.ignoreContextMenu=n.ignoreContextMenu,this.touchSlop=n.touchSlop,this.sourceNodes={},this.sourceNodeOptions={},this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.targetNodes={},this.targetNodeOptions={},this.listenerTypes=[],this._mouseClientOffset={},n.enableMouseEvents&&this.listenerTypes.push("mouse"),n.enableTouchEvents&&this.listenerTypes.push("touch"),n.enableKeyboardEvents&&this.listenerTypes.push("keyboard"),this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopMoveStart=this.handleTopMoveStart.bind(this),this.handleTopMoveStartDelay=this.handleTopMoveStartDelay.bind(this),this.handleTopMoveStartCapture=this.handleTopMoveStartCapture.bind(this),this.handleTopMoveCapture=this.handleTopMoveCapture.bind(this),this.handleTopMove=this.handleTopMove.bind(this),this.handleTopMoveEndCapture=this.handleTopMoveEndCapture.bind(this),this.handleCancelOnEscape=this.handleCancelOnEscape.bind(this)}return a(e,[{key:"setup",value:function(){"undefined"!=typeof window&&((0,o.default)(!this.constructor.isSetUp,"Cannot have two Touch backends at the same time."),this.constructor.isSetUp=!0,this.addEventListener(window,"start",this.getTopMoveStartHandler()),this.addEventListener(window,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(window,"move",this.handleTopMove),this.addEventListener(window,"move",this.handleTopMoveCapture,!0),this.addEventListener(window,"end",this.handleTopMoveEndCapture,!0),this.enableMouseEvents&&!this.ignoreContextMenu&&this.addEventListener(window,"contextmenu",this.handleTopMoveEndCapture),this.enableKeyboardEvents&&this.addEventListener(window,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){"undefined"!=typeof window&&(this.constructor.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(window,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(window,"start",this.handleTopMoveStart),this.removeEventListener(window,"move",this.handleTopMoveCapture,!0),this.removeEventListener(window,"move",this.handleTopMove),this.removeEventListener(window,"end",this.handleTopMoveEndCapture,!0),this.enableMouseEvents&&!this.ignoreContextMenu&&this.removeEventListener(window,"contextmenu",this.handleTopMoveEndCapture),this.enableKeyboardEvents&&this.removeEventListener(window,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(e,t,n,r){var a=d?{capture:r,passive:!1}:r;this.listenerTypes.forEach((function(r){var i=h[r][t];i&&e.addEventListener(i,n,a)}))}},{key:"removeEventListener",value:function(e,t,n,r){var a=d?{capture:r,passive:!1}:r;this.listenerTypes.forEach((function(r){var i=h[r][t];i&&e.removeEventListener(i,n,a)}))}},{key:"connectDragSource",value:function(e,t,n){var r=this,a=this.handleMoveStart.bind(this,e);return this.sourceNodes[e]=t,this.addEventListener(t,"start",a),function(){delete r.sourceNodes[e],r.removeEventListener(t,"start",a)}}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete r.sourcePreviewNodes[e],delete r.sourcePreviewNodeOptions[e]}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(r){var a=void 0;if(n.monitor.isDragging()){switch(r.type){case h.mouse.move:a={x:r.clientX,y:r.clientY};break;case h.touch.move:a={x:r.touches[0].clientX,y:r.touches[0].clientY}}var i=document.elementFromPoint(a.x,a.y),o=t.contains(i);return i===t||o?n.handleMove(r,e):void 0}};return this.addEventListener(document.querySelector("body"),"move",r),this.targetNodes[e]=t,function(){delete n.targetNodes[e],n.removeEventListener(document.querySelector("body"),"move",r)}}},{key:"getSourceClientOffset",value:function(e){return function(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}(this.sourceNodes[e])}},{key:"handleTopMoveStartCapture",value:function(e){l(e)&&(this.moveStartSourceIds=[])}},{key:"handleMoveStart",value:function(e){Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)}},{key:"getTopMoveStartHandler",value:function(){return this.delayTouchStart||this.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}},{key:"handleTopMoveStart",value:function(e){if(l(e)){var t=u(e);t&&(this._mouseClientOffset=t),this.waitingForDelay=!1}}},{key:"handleTopMoveStartDelay",value:function(e){if(l(e)){var t=e.type===h.touch.start?this.delayTouchStart:this.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0}}},{key:"handleTopMoveCapture",value:function(e){this.dragOverTargetIds=[]}},{key:"handleMove",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopMove",value:function(e){var t=this;if(clearTimeout(this.timeout),!this.waitingForDelay){var n,r,a,i,o=this.moveStartSourceIds,s=this.dragOverTargetIds,c=u(e);if(c&&(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&(n=this._mouseClientOffset.x,r=this._mouseClientOffset.y,a=c.x,i=c.y,Math.sqrt(Math.pow(Math.abs(a-n),2)+Math.pow(Math.abs(i-r),2))>(this.touchSlop?this.touchSlop:0))&&(this.moveStartSourceIds=null,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),this.monitor.isDragging())){var l=this.sourceNodes[this.monitor.getSourceId()];this.installSourceNodeRemovalObserver(l),this.actions.publishDragSource(),e.preventDefault();var d=s.map((function(e){return t.targetNodes[e]})),h=f(c.x,c.y),p=[];for(var v in h){var m=h[v];for(p.push(m);m&&m.ownerSVGElement;)m=m.parentElement,p.includes(m)||p.push(m)}var g=p.filter((function(e){return d.indexOf(e)>-1})).map((function(e){for(var n in t.targetNodes)if(e===t.targetNodes[n])return n;return null})).filter((function(e){return!!e})).filter((function(e,t,n){return n.indexOf(e)===t}));g.reverse(),this.actions.hover(g,{clientOffset:c})}}}},{key:"handleTopMoveEndCapture",value:function(e){(function(e){return void 0===e.buttons||0==(e.buttons&s)})(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=null)}},{key:"handleCancelOnEscape",value:function(e){"Escape"===e.key&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())}},{key:"handleOnContextMenu",value:function(){this.moveStartSourceIds=null}},{key:"installSourceNodeRemovalObserver",value:function(e){var t=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new window.MutationObserver((function(){e.parentElement||(t.resurrectSourceNode(),t.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),document.body.appendChild(this.draggedSourceNode)}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=null,this.draggedSourceNode=null}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=(o=n(1))&&o.__esModule?o:{default:o},l=(0,n(3).DragLayer)((function(e){return{currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging(),itemType:e.getItemType(),item:e.getItem()}}))((i=a=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PureComponent),u(t,[{key:"getStyle",value:function(){var e="translate("+this.props.currentOffset.x+"px, "+this.props.currentOffset.y+"px)";return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:e,WebkitTransform:e}}},{key:"render",value:function(){return this.props.isDragging&&null!==this.props.currentOffset?this.props.generator(this.props.itemType,this.props.item,this.getStyle()):null}}]),t}(),a.defaultProps={currentOffset:{x:0,y:0},isDragging:!1,itemType:"",item:{}},a.propTypes={currentOffset:c.default.shape({x:c.default.number,y:c.default.number}),isDragging:c.default.bool,itemType:c.default.string,item:c.default.any,generator:c.default.func.isRequired},a.contextTypes={dragDropManager:c.default.object},r=i))||r;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=f(u),c=f(n(1)),l=f(n(52));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,n(3).DragLayer)((function(e){return{isDragging:e.isDragging()}}))((i=a=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),o(t,[{key:"render",value:function(){return this.context.dragDropManager.getBackend().previewEnabled()?s.default.createElement(l.default,this.props):null}}]),t}(),a.propTypes={generator:c.default.func.isRequired},a.contextTypes={dragDropManager:c.default.object},r=i))||r;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseTransition=t.HTML5DragTransition=t.TouchTransition=void 0;var r,a=(r=n(24))&&r.__esModule?r:{default:r};t.TouchTransition=(0,a.default)("touchstart",(function(e){return null!=e.touches})),t.HTML5DragTransition=(0,a.default)("dragstart",(function(e){return!!e.type&&(-1!==e.type.indexOf("drag")||-1!==e.type.indexOf("drop"))})),t.MouseTransition=(0,a.default)("mousedown",(function(e){return e.type&&-1===e.type.indexOf("touch")&&-1!==e.type.indexOf("mouse")}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(55))&&r.__esModule?r:{default:r};t.default=function e(t,n){var r=this;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.setup=function(){if("undefined"!=typeof window){if(r.constructor.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");r.constructor.isSetUp=!0,r.addEventListeners(window),r.backends[r.current].instance.setup()}},this.teardown=function(){"undefined"!=typeof window&&(r.constructor.isSetUp=!1,r.removeEventListeners(window),r.backends[r.current].instance.teardown())},this.connectDragSource=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.connectBackend("connectDragSource",t)},this.connectDragPreview=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.connectBackend("connectDragPreview",t)},this.connectDropTarget=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.connectBackend("connectDropTarget",t)},this.previewEnabled=function(){return r.backends[r.current].preview},this.addEventListeners=function(e){r.backends.forEach((function(t){t.transition&&e.addEventListener(t.transition.event,r.backendSwitcher,!0)}))},this.removeEventListeners=function(e){r.backends.forEach((function(t){t.transition&&e.removeEventListener(t.transition.event,r.backendSwitcher,!0)}))},this.backendSwitcher=function(e){var t=r.current,n=0;if(r.backends.some((function(t){return n!==r.current&&t.transition&&t.transition.check(e)?(r.current=n,!0):(n+=1,!1)})),r.current!==t){r.backends[t].instance.teardown(),Object.keys(r.nodes).forEach((function(e){var t=r.nodes[e];t.handler(),t.handler=r.callBackend(t.func,t.args)})),r.backends[r.current].instance.setup();var a=null;try{a=new e.constructor(e.type,e)}catch(t){(a=document.createEvent("Event")).initEvent(e.type,e.bubbles,e.cancelable)}e.target.dispatchEvent(a)}},this.callBackend=function(e,t){var n;return(n=r.backends[r.current].instance)[e].apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))},this.connectBackend=function(e,t){var n=e+"_"+t[0],a=r.callBackend(e,t);return r.nodes[n]={func:e,args:t,handler:a},function(){var e,t=(e=r.nodes[n]).handler.apply(e,arguments);return delete r.nodes[n],t}};var i=(0,a.default)({backends:[]},n||{});if(i.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");this.current=0,this.backends=[],i.backends.forEach((function(e){if(!e.backend)throw new Error("You must specify a 'backend' property in your Backend entry: "+e);var n=e.transition;if(n&&!n._isMBTransition)throw new Error("You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: "+e);r.backends.push({instance:new e.backend(t),preview:e.preview||!1,transition:n})})),this.nodes={}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r||((r=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),r}},function(e,t){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<i.length;s++){var c=i[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(a=n?n.call(r,l,f,c):void 0)||void 0===a&&l!==f)return!1}return!0}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(6),a=n(26),i=n(61),o=n(60),u=Object.prototype,s=u.hasOwnProperty,c=r((function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&i(t[0],t[1],c)&&(r=1);++n<r;)for(var l=t[n],f=o(l),d=-1,h=f.length;++d<h;){var p=f[d],v=e[p];(void 0===v||a(v,u[p])&&!s.call(e,p))&&(e[p]=l[p])}return e}));e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t,n){var a=n.value;if("function"!=typeof a)throw new Error("@autobind decorator can only be applied to methods not: "+(void 0===a?"undefined":r(a)));var i=!1;return{configurable:!0,get:function(){if(i||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof a)return a;var n=a.bind(this);return i=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){a=e,delete this[t]}}),i=!1,n},set:function(e){a=e}}}t.default=function(){return 1===arguments.length?function(e){var t=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,a(e,t,n))}})),e}.apply(void 0,arguments):a.apply(void 0,arguments)}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var a=n(13);function i(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),null);return null!=r?r:n}var o=((r={})[a.FILE]={exposeProperty:"files",matchesTypes:["Files"],getData:function(e){return Array.prototype.slice.call(e.files)}},r[a.URL]={exposeProperty:"urls",matchesTypes:["Url","text/uri-list"],getData:function(e,t){return i(e,t,"").split("\n")}},r[a.TEXT]={exposeProperty:"text",matchesTypes:["Text","text/plain"],getData:function(e,t){return i(e,t,"")}},r);t.createNativeDragSource=function(e){var t=o[e],n=t.exposeProperty,r=t.matchesTypes,a=t.getData;return function(){function e(){var e;this.item=(e={},Object.defineProperty(e,n,{get:function(){return console.warn("Browser doesn't allow reading \""+n+'" until the drop event.'),null},enumerable:!0,configurable:!0}),e)}return e.prototype.mutateItemByReadingDataTransfer=function(e){delete this.item[n],this.item[n]=a(e,r)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}()},t.matchNativeItemType=function(e){var t=Array.prototype.slice.call(e.types||[]);return Object.keys(o).filter((function(e){return o[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=e.length,r=[],a=0;a<n;a++)r.push(a);r.sort((function(t,n){return e[t]<e[n]?-1:1}));var i,o,u=[],s=[],c=[];for(a=0;a<n-1;a++)i=e[a+1]-e[a],o=t[a+1]-t[a],s.push(i),u.push(o),c.push(o/i);var l=[c[0]];for(a=0;a<s.length-1;a++){var f=c[a],d=c[a+1];if(f*d<=0)l.push(0);else{i=s[a];var h=s[a+1],p=i+h;l.push(3*p/((p+h)/f+(p+i)/d))}}l.push(c[c.length-1]);var v,m=[],g=[];for(a=0;a<l.length-1;a++){v=c[a];var b=l[a],y=1/s[a];p=b+l[a+1]-v-v,m.push((v-b-p)*y),g.push(p*y*y)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=m,this.c3s=g}return e.prototype.interpolate=function(e){var t=this,n=t.xs,r=t.ys,a=t.c1s,i=t.c2s,o=t.c3s,u=n.length-1;if(e===n[u])return r[u];for(var s,c=0,l=o.length-1;c<=l;){var f=n[s=Math.floor(.5*(c+l))];if(f<e)c=s+1;else{if(!(f>e))return r[s];l=s-1}}var d=e-n[u=Math.max(0,l)],h=d*d;return r[u]+a[u]*d+i[u]*h+o[u]*d*h},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),a=n(65),i=1;function o(e){var t=e.nodeType===i?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}t.getNodeClientOffset=o,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,i,u){var s,c,l="IMG"===(s=t).nodeName&&(r.isFirefox()||!document.documentElement.contains(s)),f=o(l?e:t),d={x:n.x-f.x,y:n.y-f.y},h=e.offsetWidth,p=e.offsetHeight,v=i.anchorX,m=i.anchorY,g=function(e,t,n,a){var i=e?t.width:n,o=e?t.height:a;return r.isSafari()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(l,t,h,p),b=g.dragPreviewWidth,y=g.dragPreviewHeight,w=u.offsetX,x=u.offsetY,O=0===x||x;return{x:0===w||w?w:new a.default([0,.5,1],[d.x,d.x/h*b,d.x+b-h]).interpolate(v),y:O?x:(c=new a.default([0,.5,1],[d.y,d.y/p*y,d.y+y-p]).interpolate(m),r.isSafari()&&l&&(c+=(window.devicePixelRatio-1)*y),c)}}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(7);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(7);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(7),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():a.call(t,n,1),--this.size,0))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(71),a=n(70),i=n(69),o=n(68),u=n(67);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=a,s.prototype.get=i,s.prototype.has=o,s.prototype.set=u,e.exports=s},function(e,t,n){var r=n(72),a="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(34),a=n(6),i=n(33),o=n(10),u=a((function(e){return i(r(e,1,o,!0))}));e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74),a=n(39),i=function(){function e(){this.entered=[]}return e.prototype.enter=function(e){var t=this.entered.length;return this.entered=r(this.entered.filter((function(t){return document.documentElement.contains(t)&&(!t.contains||t.contains(e))})),[e]),0===t&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=a(this.entered.filter((function(e){return document.documentElement.contains(e)})),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});var a=n(75),i=n(27),o=n(66),u=n(64),s=n(13),c=n(63),l=n(62),f=n(59),d=function(){function e(e){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.enterLeaveCounter=new a.default,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext()}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var a=function(t){return r.handleDragStart(t,e)},i=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable",!0),t.addEventListener("dragstart",a),t.addEventListener("selectstart",i),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",i),t.setAttribute("draggable",!1)}},e.prototype.connectDropTarget=function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},a=function(t){return n.handleDragOver(t,e)},i=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",a),t.addEventListener("drop",i),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",a),t.removeEventListener("drop",i)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return l(t||{},{dropEffect:this.altKeyPressed?"copy":"move"})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return l(t||{},{anchorX:.5,anchorY:.5,captureDraggingState:!1})},e.prototype.getSourceClientOffset=function(e){return o.getNodeClientOffset(this.sourceNodes.get(e))},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(s).some((function(t){return s[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode();var t=u.createNativeDragSource(e);this.currentNativeSource=new t,this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.endDragNativeItem=function(){this.isDraggingNativeItem()&&(this.actions.endDrag(),this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},e.prototype.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!this.window&&this.window.document.body.contains(e)},e.prototype.endDragIfSourceWasRemovedFromDOM=function(){var e=this.currentDragSourceNode;this.isNodeInDocument(e)||this.clearCurrentDragSourceNode()&&this.actions.endDrag()},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.currentDragSourceNodeOffset=o.getNodeClientOffset(e),this.currentDragSourceNodeOffsetChanged=!1,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.checkIfCurrentDragSourceRectChanged=function(){var e=this.currentDragSourceNode;return!!e&&(!!this.currentDragSourceNodeOffsetChanged||(this.currentDragSourceNodeOffsetChanged=!f(o.getNodeClientOffset(e),this.currentDragSourceNodeOffset),this.currentDragSourceNodeOffsetChanged))},e.prototype.handleTopDragStartCapture=function(){this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleTopDragStart=function(e){var t=this,n=this.dragStartSourceIds;this.dragStartSourceIds=null;var r=o.getEventClientOffset(e);this.monitor.isDragging()&&this.actions.endDrag(),this.actions.beginDrag(n||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});var a=e.dataTransfer,i=u.matchNativeItemType(a);if(this.monitor.isDragging()){if("function"==typeof a.setDragImage){var s=this.monitor.getSourceId(),c=this.sourceNodes.get(s),l=this.sourcePreviewNodes.get(s)||c,f=this.getCurrentSourcePreviewNodeOptions(),d={anchorX:f.anchorX,anchorY:f.anchorY},h={offsetX:f.offsetX,offsetY:f.offsetY},p=o.getDragPreviewOffset(c,l,r,d,h);a.setDragImage(l,p.x,p.y)}try{a.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target),this.getCurrentSourcePreviewNodeOptions().captureDraggingState?this.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(i)this.beginDragNativeItem(i);else{if(!(a.types||e.target.hasAttribute&&e.target.hasAttribute("draggable")))return;e.preventDefault()}},e.prototype.handleTopDragEndCapture=function(){this.clearCurrentDragSourceNode()&&this.actions.endDrag()},e.prototype.handleTopDragEnterCapture=function(e){if(this.dragEnterTargetIds=[],this.enterLeaveCounter.enter(e.target)&&!this.monitor.isDragging()){var t=e.dataTransfer,n=u.matchNativeItemType(t);n&&this.beginDragNativeItem(n)}},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleTopDragEnter=function(e){var t=this,n=this.dragEnterTargetIds;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,i.isFirefox()||this.actions.hover(n,{clientOffset:o.getEventClientOffset(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},e.prototype.handleTopDragOverCapture=function(){this.dragOverTargetIds=[]},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleTopDragOver=function(e){var t=this,n=this.dragOverTargetIds;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer.dropEffect="none");this.altKeyPressed=e.altKey,this.actions.hover(n||[],{clientOffset:o.getEventClientOffset(e)}),(n||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()):this.isDraggingNativeItem()?(e.preventDefault(),e.dataTransfer.dropEffect="none"):this.checkIfCurrentDragSourceRectChanged()&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},e.prototype.handleTopDragLeaveCapture=function(e){this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&this.isDraggingNativeItem()&&this.endDragNativeItem()},e.prototype.handleTopDropCapture=function(e){this.dropTargetIds=[],e.preventDefault(),this.isDraggingNativeItem()&&this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),this.enterLeaveCounter.reset()},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e.prototype.handleTopDrop=function(e){var t=this.dropTargetIds;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:o.getEventClientOffset(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.endDragIfSourceWasRemovedFromDOM()},e.prototype.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},r([c.default],e.prototype,"getSourceClientOffset",null),r([c.default],e.prototype,"endDragNativeItem",null),r([c.default],e.prototype,"isNodeInDocument",null),r([c.default],e.prototype,"endDragIfSourceWasRemovedFromDOM",null),r([c.default],e.prototype,"handleTopDragStartCapture",null),r([c.default],e.prototype,"handleTopDragStart",null),r([c.default],e.prototype,"handleTopDragEndCapture",null),r([c.default],e.prototype,"handleTopDragEnterCapture",null),r([c.default],e.prototype,"handleTopDragEnter",null),r([c.default],e.prototype,"handleTopDragOverCapture",null),r([c.default],e.prototype,"handleTopDragOver",null),r([c.default],e.prototype,"handleTopDragLeaveCapture",null),r([c.default],e.prototype,"handleTopDropCapture",null),r([c.default],e.prototype,"handleTopDrop",null),r([c.default],e.prototype,"handleSelectStart",null),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,i=void 0,o=void 0;function u(){o&&(o(),o=null),t&&n&&(o=e.connectDropTarget(t,n,i))}return{receiveHandlerId:function(e){e!==t&&(t=e,u())},hooks:(0,r.default)({dropTarget:function(e,t){e===n&&(0,a.default)(t,i)||(n=e,i=t,u())}})}};var r=i(n(30)),a=i(n(29));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new u(e)};var a,i=(a=n(2))&&a.__esModule?a:{default:a},o=!1,u=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"canDrop",value:function(){(0,i.default)(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}}},{key:"isOver",value:function(e){return this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,a.default)(o.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',o.join(", "),t),(0,a.default)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html",t,t,e[t])}));var t=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrop",value:function(){return!e.canDrop||e.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){e.hover&&e.hover(this.props,this.monitor,this.component)}},{key:"drop",value:function(){if(e.drop)return e.drop(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var a=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}i(n(5));var o=["canDrop","hover","drop"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),a=r.addTarget(e,t);return{handlerId:a,unregister:function(){r.removeTarget(a)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.default.apply(void 0,["DropTarget","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var h=e;"function"!=typeof e&&((0,r.default)((0,f.default)(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',e),h=function(){return e}),(0,r.default)((0,a.default)(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',t);var p=(0,s.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),(0,r.default)((0,a.default)(d),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),function(e){return(0,o.default)({connectBackend:function(e,t){return e.connectDropTarget(t)},containerDisplayName:"DropTarget",createHandler:p,registerHandler:u.default,createMonitor:c.default,createConnector:l.default,DecoratedComponent:e,getType:h,collect:n,options:d})}};var r=d(n(2)),a=d(n(5)),i=d(n(8)),o=d(n(31)),u=d(n(80)),s=d(n(79)),c=d(n(78)),l=d(n(77)),f=d(n(28));function d(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.ref;return(0,a.default)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?(0,i.cloneElement)(e,{ref:function(e){t(e),n&&n(e)}}):(0,i.cloneElement)(e,{ref:t})};var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,i=void 0,o=void 0,u=void 0,s=void 0,c=void 0;function l(){o&&(o(),o=null),t&&n&&(o=e.connectDragSource(t,n,i))}function f(){c&&(c(),c=null),t&&u&&(c=e.connectDragPreview(t,u,s))}return{receiveHandlerId:function(e){e!==t&&(t=e,l(),f())},hooks:(0,r.default)({dragSource:function(e,t){e===n&&(0,a.default)(t,i)||(n=e,i=t,l())},dragPreview:function(e,t){e===u&&(0,a.default)(t,s)||(u=e,s=t,f())}})}};var r=i(n(30)),a=i(n(29));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new s(e)};var a,i=(a=n(2))&&a.__esModule?a:{default:a},o=!1,u=!1,s=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"canDrag",value:function(){(0,i.default)(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}}},{key:"isDragging",value:function(){(0,i.default)(!u,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return u=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{u=!1}}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,a.default)(o.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',o.join(", "),t),(0,a.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])})),u.forEach((function(t){(0,a.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])}));var t=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrag",value:function(){return!e.canDrag||e.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function(t,n){return e.isDragging?e.isDragging(this.props,this.monitor):n===t.getSourceId()}},{key:"beginDrag",value:function(){return e.beginDrag(this.props,this.monitor,this.component)}},{key:"endDrag",value:function(){e.endDrag&&e.endDrag(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var a=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}i(n(5));var o=["canDrag","beginDrag","isDragging","endDrag"],u=["beginDrag"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),a=r.addSource(e,t);return{handlerId:a,unregister:function(){r.removeSource(a)}}}},function(e,t,n){"use strict";t.__esModule=!0;var r,a=(r=n(14))&&r.__esModule?r:{default:r},i=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.isDisposed=!1,this.current=null}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if(null!=e&&!a.default(e))throw new Error("Expected either an empty value or a valid disposable");var t=this.isDisposed,n=void 0;t||(n=this.current,this.current=e),n&&n.dispose(),t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}},e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,a=(r=n(14))&&r.__esModule?r:{default:r},i=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),Array.isArray(n[0])&&1===n.length&&(n=n[0]);for(var i=0;i<n.length;i++)if(!a.default(n[i]))throw new Error("Expected a disposable");this.disposables=n,this.isDisposed=!1}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){if(this.isDisposed)return!1;var t=this.disposables.indexOf(e);return-1!==t&&(this.disposables.splice(t,1),e.dispose(),!0)},e.prototype.dispose=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];for(this.isDisposed=!0,this.disposables=[],this.length=0,n=0;n<e;n++)t[n].dispose()}},e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){},i=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.isDisposed=!1,this.action=t||a}return r(e,null,[{key:"empty",value:{dispose:a},enumerable:!0}]),e.prototype.dispose=function(){this.isDisposed||(this.action.call(null),this.isDisposed=!0)},e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(n(14));t.isDisposable=a.default;var i=r(n(89));t.Disposable=i.default;var o=r(n(88));t.CompositeDisposable=o.default;var u=r(n(87));t.SerialDisposable=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.default.apply(void 0,["DragSource","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var h=e;"function"!=typeof e&&((0,r.default)((0,f.default)(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',e),h=function(){return e}),(0,r.default)((0,a.default)(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',t);var p=(0,s.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),(0,r.default)((0,a.default)(d),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),function(e){return(0,o.default)({connectBackend:function(e,t){return e.connectDragSource(t)},containerDisplayName:"DragSource",createHandler:p,registerHandler:u.default,createMonitor:c.default,createConnector:l.default,DecoratedComponent:e,getType:h,collect:n,options:d})}};var r=d(n(2)),a=d(n(5)),i=d(n(8)),o=d(n(31)),u=d(n(86)),s=d(n(85)),c=d(n(84)),l=d(n(83)),f=d(n(28));function d(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.default.apply(void 0,["DragLayer","collect[, options]"].concat(Array.prototype.slice.call(arguments))),(0,f.default)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html",e),(0,f.default)((0,l.default)(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html',t),function(n){var l,p,v=t.arePropsEqual,m=void 0===v?h.default:v,g=n.displayName||n.name||"Component",b=(p=l=function(t){function s(e,t){!function(e,t){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.manager=t.dragDropManager,(0,f.default)("object"===a(n.manager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",g,g),n.state=n.getCurrentState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,o.Component),i(s,[{key:"getDecoratedComponentInstance",value:function(){return(0,f.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"shouldComponentUpdate",value:function(e,t){return!m(e,this.props)||!(0,d.default)(t,this.state)}}]),i(s,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0;var e=this.manager.getMonitor();this.unsubscribeFromOffsetChange=e.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=e.subscribeToStateChange(this.handleChange),this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange(),this.unsubscribeFromStateChange()}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,d.default)(e,this.state)||this.setState(e)}}},{key:"getCurrentState",value:function(){var t=this.manager.getMonitor();return e(t,this.props)}},{key:"render",value:function(){var e=this;return u.default.createElement(n,r({},this.props,this.state,{ref:function(t){e.child=t}}))}}]),s}(),l.DecoratedComponent=n,l.displayName="DragLayer("+g+")",l.contextTypes={dragDropManager:s.default.object.isRequired},p);return(0,c.default)(b,n)}};var o=n(0),u=v(o),s=v(n(1)),c=v(n(16)),l=v(n(5)),f=v(n(2)),d=v(n(15)),h=v(n(32)),p=v(n(8));function v(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=(i=n(1))&&i.__esModule?i:{default:i},c=n(45),l=(a=r=function(e){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.backend=(0,c.unpackBackendForEs5Users)(e.backend),r.childContext=(0,c.createChildContext)(r.backend,{window:e&&e.window?e.window:n&&n.window?n.window:"undefined"!=typeof window?window:void 0}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){if(e.backend!==this.props.backend||e.window!==this.props.window)throw new Error("DragDropContextProvider backend and window props must not change.")}},{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return u.Children.only(this.props.children)}}]),t}(),r.propTypes={backend:s.default.oneOfType([s.default.func,s.default.object]).isRequired,children:s.default.element.isRequired,window:s.default.object},r.defaultProps={window:void 0},r.childContextTypes=c.CHILD_CONTEXT_TYPES,r.displayName="DragDropContextProvider",r.contextTypes={window:s.default.object},a);t.default=l},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new o(e)};var a,i=(a=n(94))&&a.__esModule?a:{default:a},o=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.actions=t.getActions()}return r(e,[{key:"setup",value:function(){this.didCallSetup=!0}},{key:"teardown",value:function(){this.didCallTeardown=!0}},{key:"connectDragSource",value:function(){return i.default}},{key:"connectDragPreview",value:function(){return i.default}},{key:"connectDropTarget",value:function(){return i.default}},{key:"simulateBeginDrag",value:function(e,t){this.actions.beginDrag(e,t)}},{key:"simulatePublishDragSource",value:function(){this.actions.publishDragSource()}},{key:"simulateHover",value:function(e,t){this.actions.hover(e,t)}},{key:"simulateDrop",value:function(){this.actions.drop()}},{key:"simulateEndDrag",value:function(){this.actions.endDrag()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"canDrop",value:function(){return!0}},{key:"hover",value:function(){}},{key:"drop",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"canDrag",value:function(){return!0}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r++};var r=0},function(e,t,n){"use strict";(function(t){function n(e){a.length||r(),a[a.length]=e}e.exports=n;var r,a=[],i=0,o=1024;function u(){for(;i<a.length;){var e=i;if(i+=1,a[e].call(),i>o){for(var t=0,n=a.length-i;t<n;t++)a[t]=a[t+i];a.length-=i,i=0}}a.length=0,i=0}var s,c,l,f=void 0!==t?t:self,d=f.MutationObserver||f.WebKitMutationObserver;function h(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(s=1,c=new d(u),l=document.createTextNode(""),c.observe(l,{characterData:!0}),r=function(){s=-s,l.data=s}):r=h(u),n.requestFlush=r,n.makeRequestCallFromTimer=h}).call(this,n(12))},function(e,t,n){"use strict";var r=n(99),a=[],i=[],o=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function u(e){var t;(t=a.length?a.pop():new s).task=e,r(t)}function s(){this.task=null}e.exports=u,s.prototype.call=function(){try{this.task.call()}catch(e){u.onerror?u.onerror(e):(i.push(e),o())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(n(2)),o=l(n(4)),u=l(n(100)),s=n(9),c=l(n(98));function l(e){return e&&e.__esModule?e:{default:e}}var f={SOURCE:"SOURCE",TARGET:"TARGET"};function d(e,t){t&&(0,o.default)(e)?e.forEach((function(e){return d(e,!1)})):(0,i.default)("string"==typeof e||"symbol"===(void 0===e?"undefined":a(e)),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function h(e){switch(e[0]){case"S":return f.SOURCE;case"T":return f.TARGET;default:(0,i.default)(!1,"Cannot parse handler ID: "+e)}}var p=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.store=t,this.types={},this.handlers={},this.pinnedSourceId=null,this.pinnedSource=null}return r(e,[{key:"addSource",value:function(e,t){d(e),function(e){(0,i.default)("function"==typeof e.canDrag,"Expected canDrag to be a function."),(0,i.default)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),(0,i.default)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(f.SOURCE,e,t);return this.store.dispatch((0,s.addSource)(n)),n}},{key:"addTarget",value:function(e,t){d(e,!0),function(e){(0,i.default)("function"==typeof e.canDrop,"Expected canDrop to be a function."),(0,i.default)("function"==typeof e.hover,"Expected hover to be a function."),(0,i.default)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(f.TARGET,e,t);return this.store.dispatch((0,s.addTarget)(n)),n}},{key:"addHandler",value:function(e,t,n){var r=function(e){var t=(0,c.default)().toString();switch(e){case f.SOURCE:return"S"+t;case f.TARGET:return"T"+t;default:(0,i.default)(!1,"Unknown role: "+e)}}(e);return this.types[r]=t,this.handlers[r]=n,r}},{key:"containsHandler",value:function(e){var t=this;return Object.keys(this.handlers).some((function(n){return t.handlers[n]===e}))}},{key:"getSource",value:function(e,t){return(0,i.default)(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.handlers[e]}},{key:"getTarget",value:function(e){return(0,i.default)(this.isTargetId(e),"Expected a valid target ID."),this.handlers[e]}},{key:"getSourceType",value:function(e){return(0,i.default)(this.isSourceId(e),"Expected a valid source ID."),this.types[e]}},{key:"getTargetType",value:function(e){return(0,i.default)(this.isTargetId(e),"Expected a valid target ID."),this.types[e]}},{key:"isSourceId",value:function(e){return h(e)===f.SOURCE}},{key:"isTargetId",value:function(e){return h(e)===f.TARGET}},{key:"removeSource",value:function(e){var t=this;(0,i.default)(this.getSource(e),"Expected an existing source."),this.store.dispatch((0,s.removeSource)(e)),(0,u.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"removeTarget",value:function(e){var t=this;(0,i.default)(this.getTarget(e),"Expected an existing target."),this.store.dispatch((0,s.removeTarget)(e)),(0,u.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"pinSource",value:function(e){var t=this.getSource(e);(0,i.default)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){(0,i.default)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(2)),i=l(n(4)),o=l(n(40)),u=l(n(101)),s=n(42),c=n(35);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.store=t,this.registry=new u.default(t)}return r(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).handlerIds;(0,a.default)("function"==typeof e,"listener must be a function."),(0,a.default)(void 0===n||(0,i.default)(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe((function(){var a=t.store.getState(),i=a.stateId;try{i===r||i===r+1&&!(0,c.areDirty)(a.dirtyHandlerIds,n)||e()}finally{r=i}}))}},{key:"subscribeToOffsetChange",value:function(e){var t=this;(0,a.default)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){var t=this.registry.getSource(e);return(0,a.default)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){var t=this.registry.getTarget(e);if((0,a.default)(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();return(0,o.default)(n,r)&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){var t=this.registry.getSource(e,!0);return(0,a.default)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(!(0,o.default)(n,r))return!1;var a=this.getTargetIds();if(!a.length)return!1;var i=a.indexOf(e);return t?i===a.length-1:i>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return(0,s.getSourceClientOffset)(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return(0,s.getDifferenceFromInitialOffset)(this.store.getState().dragOffset)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}},function(e,t,n){var r=n(10);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){var r=n(21),a=n(20),i=n(19),o=n(18),u=n(36),s=n(17),c=Math.min;e.exports=function(e,t,n){for(var l=n?i:a,f=e[0].length,d=e.length,h=d,p=Array(d),v=1/0,m=[];h--;){var g=e[h];h&&t&&(g=o(g,u(t))),v=c(g.length,v),p[h]=!n&&(t||f>=120&&g.length>=120)?new r(h&&g):void 0}g=e[0];var b=-1,y=p[0];e:for(;++b<f&&m.length<v;){var w=g[b],x=t?t(w):w;if(w=n||0!==w?w:0,!(y?s(y,x):l(m,x,n))){for(h=d;--h;){var O=p[h];if(!(O?s(O,x):l(e[h],x,n)))continue e}y&&y.push(x),m.push(w)}}return m}},function(e,t,n){var r=n(18),a=n(105),i=n(6),o=n(104),u=i((function(e){var t=r(e,o);return t.length&&t[0]===e[0]?a(t):[]}));e.exports=u},function(e,t){e.exports=function(){return[]}},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(){return!1}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(12))},function(e,t,n){var r=n(110),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},function(e,t,n){var r=n(111).Symbol;e.exports=r},function(e,t,n){var r=n(112),a=n(109),i=n(4),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||a(e)||!!(o&&e&&e[o])}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(38),a=n(34),i=n(33);e.exports=function(e,t,n){var o=e.length;if(o<2)return o?i(e[0]):[];for(var u=-1,s=Array(o);++u<o;)for(var c=e[u],l=-1;++l<o;)l!=u&&(s[u]=r(s[u]||c,e[l],t,n));return i(a(s,1),t,n)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},function(e,t,n){var r=n(116),a=n(6),i=n(115),o=n(10),u=a((function(e){return i(r(e,o))}));e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(arguments[1].type){case r.ADD_SOURCE:case r.ADD_TARGET:return e+1;case r.REMOVE_SOURCE:case r.REMOVE_TARGET:return e-1;default:return e}};var r=n(9)},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(44),a=n(41);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(120),a=n(119);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(123),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,u=a(i.length-t,0),s=Array(u);++o<u;)s[o]=i[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=i[o];return c[t]=n(s),r(e,this,c)}}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.BEGIN_DRAG:return r({},e,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return r({},e,{isSourcePublic:!0});case o.HOVER:return r({},e,{targetIds:t.targetIds});case u.REMOVE_TARGET:return-1===e.targetIds.indexOf(t.targetId)?e:r({},e,{targetIds:(0,i.default)(e.targetIds,t.targetId)});case o.DROP:return r({},e,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return r({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}};var a,i=(a=n(39))&&a.__esModule?a:{default:a},o=n(11),u=n(9),s={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{dirtyHandlerIds:(0,o.default)(e.dirtyHandlerIds,t,e.dragOperation),dragOffset:(0,r.default)(e.dragOffset,t),refCount:(0,i.default)(e.refCount,t),dragOperation:(0,a.default)(e.dragOperation,t),stateId:(0,u.default)(e.stateId)}};var r=s(n(42)),a=s(n(126)),i=s(n(118)),o=s(n(35)),u=s(n(103));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t),function(e,r){var a,i=n(49);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(i.a)(a);t.default=o}.call(this,n(12),n(128)(e))},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(130)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){"use strict";t.__esModule=!0,t.ActionTypes=void 0,t.default=function e(t,n,i){var u;if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var s=t,c=n,l=[],f=l,d=!1;function h(){f===l&&(f=l.slice())}function p(){return c}function v(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return h(),f.push(e),function(){if(t){t=!1,h();var n=f.indexOf(e);f.splice(n,1)}}}function m(e){if(!(0,r.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=s(c,e)}finally{d=!1}for(var t=l=f,n=0;n<t.length;n++)(0,t[n])();return e}return m({type:o.INIT}),(u={dispatch:m,subscribe:v,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,m({type:o.INIT})}})[a.default]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[a.default]=function(){return this},e},u};var r=i(n(5)),a=i(n(129));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(132)),i=s(n(127)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(11)),u=s(n(102));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=(0,a.default)(i.default);this.context=n,this.store=r,this.monitor=new u.default(r),this.registry=this.monitor.registry,this.backend=t(this),r.subscribe(this.handleRefCountChange.bind(this))}return r(e,[{key:"handleRefCountChange",value:function(){var e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)}},{key:"getContext",value:function(){return this.context}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;return Object.keys(o).filter((function(e){return"function"==typeof o[e]})).reduce((function(n,r){var a,i=o[r];return n[r]=(a=i,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a.apply(e,r);void 0!==o&&t(o)}),n}),{})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(133);Object.defineProperty(t,"DragDropManager",{enumerable:!0,get:function(){return u(r).default}});var a=n(97);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return u(a).default}});var i=n(96);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return u(i).default}});var o=n(95);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"createTestBackend",{enumerable:!0,get:function(){return u(o).default}})},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";var r=n(137),a=n(136),i=n(135);e.exports=function(){function e(e,t,n,r,o,u){u!==i&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}}]))},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(2),a=n.n(r),i=n(15),o=n(3),u=n(11),s=n(16),c=n(17),l=n(0),f=n(76),d=n(449),h=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"decodeUTF8",value:function(){return new p(this)}}]),n}(f.a),p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).upstream=e,r.impl=new v(e),r}return Object(u.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d.a),v=function(t){Object(s.a)(f,t);var r=Object(c.a)(f);function f(e){var t;if(Object(o.a)(this,f),(t=r.call(this)).upstream=e,Object(l.env)().get("IS_BROWSER"))t.decoder=new TextDecoder("utf-8");else{var a=n(580).StringDecoder;t.decoder=new a("utf8")}return t}return Object(u.a)(f,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var t=Object(i.a)(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(n=t.sent).done){t.next=7;break}return t.abrupt("return",!1);case 7:r=n.value;case 8:return i=Object(l.env)().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(e.from(r.buffer)),this.outputQueue.push(i),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),f}(f.b)}).call(this,n(218).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(9),a=n(2),i=n.n(a),o=n(15),u=n(3),s=n(11),c=n(16),l=n(17),f=n(76),d=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"split",value:function(e){return new h(this,e)}}]),n}(f.a),h=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.impl=new p(e,r),a}return Object(s.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d),p=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return Object(s.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],a=Object(r.a)(n.slice(0,-1));try{for(a.s();!(o=a.n()).done;)u=o.value,this.outputQueue.push(u)}catch(i){a.e(i)}finally{a.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f.b)},function(e,t,n){var r=n(582),a=n(583),i=n(584),o=n(585),u=n(586),s=n(587),c=n(588);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e){e.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.13.1","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"changelog":"conventional-changelog -p angular -r 2","build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2","ajv":"^6.12.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.3","codecov":"^3.7.0","concurrently":"^5.2.0","conventional-changelog-cli":"^2.0.34","d3":"^5.16.0","eslint":"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3","jest":"^26.0.1","jest-puppeteer":"^4.4.0","mkdirp":"^1.0.4","prettier":"^2.0.5","puppeteer":"^3.1.0","rollup":"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7","terser":"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1","typescript":"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0","yargs":"~15.3.1"},"peerDependencies":{"vega":"^5.12.1"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(e,t,n){(function(t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var n,r,a;try{n=Map}catch(s){n=function(){}}try{r=Set}catch(s){r=function(){}}try{a=Promise}catch(s){a=function(){}}function i(o,s,c,l,f){"object"===typeof s&&(c=s.depth,l=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],h=[],p="undefined"!=typeof t;return"undefined"==typeof s&&(s=!0),"undefined"==typeof c&&(c=1/0),function o(c,v){if(null===c)return null;if(0===v)return c;var m,g;if("object"!=typeof c)return c;if(e(c,n))m=new n;else if(e(c,r))m=new r;else if(e(c,a))m=new a((function(e,t){c.then((function(t){e(o(t,v-1))}),(function(e){t(o(e,v-1))}))}));else if(i.__isArray(c))m=[];else if(i.__isRegExp(c))m=new RegExp(c.source,u(c)),c.lastIndex&&(m.lastIndex=c.lastIndex);else if(i.__isDate(c))m=new Date(c.getTime());else{if(p&&t.isBuffer(c))return m=t.allocUnsafe?t.allocUnsafe(c.length):new t(c.length),c.copy(m),m;e(c,Error)?m=Object.create(c):"undefined"==typeof l?(g=Object.getPrototypeOf(c),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var b=d.indexOf(c);if(-1!=b)return h[b];d.push(c),h.push(m)}for(var y in e(c,n)&&c.forEach((function(e,t){var n=o(t,v-1),r=o(e,v-1);m.set(n,r)})),e(c,r)&&c.forEach((function(e){var t=o(e,v-1);m.add(t)})),c){var w;g&&(w=Object.getOwnPropertyDescriptor(g,y)),w&&null==w.set||(m[y]=o(c[y],v-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(y=0;y<x.length;y++){var O=x[y];(!(j=Object.getOwnPropertyDescriptor(c,O))||j.enumerable||f)&&(m[O]=o(c[O],v-1),j.enumerable||Object.defineProperty(m,O,{enumerable:!1}))}}if(f){var k=Object.getOwnPropertyNames(c);for(y=0;y<k.length;y++){var j,_=k[y];(j=Object.getOwnPropertyDescriptor(c,_))&&j.enumerable||(m[_]=o(c[_],v-1),Object.defineProperty(m,_,{enumerable:!1}))}}return m}(o,c)}function o(e){return Object.prototype.toString.call(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=u,i}();e.exports&&(e.exports=n)}).call(this,n(218).Buffer)},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!==a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(4),a=Array.prototype,i=a.slice;a.map;function o(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function u(e){var t=e,n=e,r=e;function a(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==n(t,t))return i;do{var o=a+i>>>1;r(e[o],t)<0?a=o+1:i=o}while(a<i)}return a}return 1===e.length&&(t=function(t,n){return e(t)-n},n=o,r=function(t,n){return o(e(t),n)}),{left:a,center:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,n,r,i-1);return o>r&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==n(t,t))return i;do{var o=a+i>>>1;r(e[o],t)<=0?a=o+1:i=o}while(a<i)}return a}}}var s=n(2),c=n.n(s),l=n(9);var f=u(o),d=f.right,h=(f.left,u((function(e){return null===e?NaN:+e})).center,d);function p(e){return function(){return e}}function v(e,t){var n,r;if(void 0===t){var a,i=Object(l.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;null!=o&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(d){i.e(d)}finally{i.f()}}else{var u,s=-1,c=Object(l.a)(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;null!=(f=t(f,++s,e))&&(void 0===n?f>=f&&(n=r=f):(n>f&&(n=f),r<f&&(r=f)))}}catch(d){c.e(d)}finally{c.f()}}return[n,r]}function m(e){return e}var g=Math.sqrt(50),b=Math.sqrt(10),y=Math.sqrt(2);function w(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=g?10:i>=b?5:i>=y?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=g?10:i>=b?5:i>=y?2:1)}function x(e){return Math.ceil(Math.log(function(e,t){var n=0;if(void 0===t){var r,a=Object(l.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(i=+i)>=i&&++n}}catch(f){a.e(f)}finally{a.f()}}else{var o,u=-1,s=Object(l.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(c=+c)>=c&&++n}}catch(f){s.e(f)}finally{s.f()}}return n}(e))/Math.LN2)+1}function O(){var e=m,t=v,n=x;function a(a){Array.isArray(a)||(a=Array.from(a));var i,o,u=a.length,s=new Array(u);for(i=0;i<u;++i)s[i]=e(a[i],i,a);var c=t(s),l=c[0],f=c[1],d=n(s,l,f);if(!Array.isArray(d)){var p=f,m=+d;if(t===v){var g=function(e,t,n){for(var r;;){var a=w(e,t,n);if(a===r||0===a||!isFinite(a))return[e,t];a>0?(e=Math.floor(e/a)*a,t=Math.ceil(t/a)*a):a<0&&(e=Math.ceil(e*a)/a,t=Math.floor(t*a)/a),r=a}}(l,f,m),b=Object(r.a)(g,2);l=b[0],f=b[1]}if((d=function(e,t,n){var r,a,i,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=w(e,t,n))||!isFinite(o))return[];if(o>0){var s=Math.round(e/o),c=Math.round(t/o);for(s*o<e&&++s,c*o>t&&--c,i=new Array(a=c-s+1);++u<a;)i[u]=(s+u)*o}else{o=-o;var l=Math.round(e*o),f=Math.round(t*o);for(l/o<e&&++l,f/o>t&&--f,i=new Array(a=f-l+1);++u<a;)i[u]=(l+u)/o}return r&&i.reverse(),i}(l,f,m))[d.length-1]>=f)if(p>=f&&t===v){var y=w(l,f,m);isFinite(y)&&(y>0?f=(Math.floor(f/y)+1)*y:y<0&&(f=(Math.ceil(f*-y)+1)/-y))}else d.pop()}for(var x=d.length;d[0]<=l;)d.shift(),--x;for(;d[x-1]>f;)d.pop(),--x;var O,k=new Array(x+1);for(i=0;i<=x;++i)(O=k[i]=[]).x0=i>0?d[i-1]:l,O.x1=i<x?d[i]:f;for(i=0;i<u;++i)null!=(o=s[i])&&l<=o&&o<=f&&k[h(d,o,0,x)].push(a[i]);return k}return a.value=function(t){return arguments.length?(e="function"===typeof t?t:p(t),a):e},a.domain=function(e){return arguments.length?(t="function"===typeof e?e:p([e[0],e[1]]),a):t},a.thresholds=function(e){return arguments.length?(n="function"===typeof e?e:Array.isArray(e)?p(i.call(e)):p(e),a):n},a}var k=n(753),j=n(23);function _(){}var S=function(e){return null==e?_:function(){return this.querySelector(e)}};function E(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function C(){return[]}function A(e){return function(t){return t.matches(e)}}var T=Array.prototype.find;function N(){return this.firstElementChild}var I=Array.prototype.filter;function D(){return Array.from(this.children)}var R=function(e){return new Array(e.length)};function F(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}F.prototype={constructor:F,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var M=function(e){return function(){return e}};function P(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new F(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function L(e,t,n,r,a,i,o){var u,s,c,l=new Map,f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c=o.call(s,s.__data__,u,t)+"",l.has(c)?a[u]=s:l.set(c,s));for(u=0;u<d;++u)c=o.call(e,i[u],u,i)+"",(s=l.get(c))?(r[u]=s,s.__data__=i[u],l.delete(c)):n[u]=new F(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(h[u])===s&&(a[u]=s)}function z(e){return e.__data__}function B(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function U(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var W="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},q=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),V.hasOwnProperty(t)?{space:V[t],local:e}:e};function $(e){return function(){this.removeAttribute(e)}}function H(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G(e,t){return function(){this.setAttribute(e,t)}}function K(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function X(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Y(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var J=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Q(e){return function(){this.style.removeProperty(e)}}function Z(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ee(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function te(e,t){return e.style.getPropertyValue(t)||J(e).getComputedStyle(e,null).getPropertyValue(t)}function ne(e){return function(){delete this[e]}}function re(e,t){return function(){this[e]=t}}function ae(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ie(e){return e.trim().split(/^|\s+/)}function oe(e){return e.classList||new ue(e)}function ue(e){this._node=e,this._names=ie(e.getAttribute("class")||"")}function se(e,t){for(var n=oe(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function ce(e,t){for(var n=oe(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function le(e){return function(){se(this,e)}}function fe(e){return function(){ce(this,e)}}function de(e,t){return function(){(t.apply(this,arguments)?se:ce)(this,e)}}ue.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function he(){this.textContent=""}function pe(e){return function(){this.textContent=e}}function ve(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function me(){this.innerHTML=""}function ge(e){return function(){this.innerHTML=e}}function be(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ye(){this.nextSibling&&this.parentNode.appendChild(this)}function we(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===W&&t.documentElement.namespaceURI===W?t.createElement(e):t.createElementNS(n,e)}}function Oe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var ke=function(e){var t=q(e);return(t.local?Oe:xe)(t)};function je(){return null}function _e(){var e=this.parentNode;e&&e.removeChild(this)}function Se(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ee(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ce(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ae(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function Te(e,t,n){return function(){var r,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var o=0,u=a.length;o<u;++o)if((r=a[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function Ne(e,t,n){var r=J(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Ie(e,t){return function(){return Ne(this,e,t)}}function De(e,t){return function(){return Ne(this,e,t.apply(this,arguments))}}var Re=c.a.mark(Fe);function Fe(){var e,t,n,r,a,i,o;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){u.next=13;break}r=e[t],a=0,i=r.length;case 3:if(!(a<i)){u.next=10;break}if(!(o=r[a])){u.next=7;break}return u.next=7,o;case 7:++a,u.next=3;break;case 10:++t,u.next=1;break;case 13:case"end":return u.stop()}}),Re,this)}var Me=[null];function Pe(e,t){this._groups=e,this._parents=t}function Le(){return new Pe([[document.documentElement]],Me)}Pe.prototype=Le.prototype=Object(j.a)({constructor:Pe,select:function(e){"function"!==typeof e&&(e=S(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),l=0;l<s;++l)(i=u[l])&&(o=e.call(i,i.__data__,l,u))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new Pe(r,this._parents)},selectAll:function(e){var t;"function"===typeof e?e=function(e){return function(){return E(e.apply(this,arguments))}}(e):e=null==(t=e)?C:function(){return this.querySelectorAll(t)};for(var n=this._groups,r=n.length,a=[],i=[],o=0;o<r;++o)for(var u,s=n[o],c=s.length,l=0;l<c;++l)(u=s[l])&&(a.push(e.call(u,u.__data__,l,s)),i.push(u));return new Pe(a,i)},selectChild:function(e){return this.select(null==e?N:function(e){return function(){return T.call(this.children,e)}}("function"===typeof e?e:A(e)))},selectChildren:function(e){return this.selectAll(null==e?D:function(e){return function(){return I.call(this.children,e)}}("function"===typeof e?e:A(e)))},filter:function(e){var t;"function"!==typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i)for(var o,u=n[i],s=u.length,c=a[i]=[],l=0;l<s;++l)(o=u[l])&&e.call(o,o.__data__,l,u)&&c.push(o);return new Pe(a,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,z);var n=t?L:P,r=this._parents,a=this._groups;"function"!==typeof e&&(e=M(e));for(var i=a.length,o=new Array(i),u=new Array(i),s=new Array(i),c=0;c<i;++c){var l=r[c],f=a[c],d=f.length,h=B(e.call(l,l&&l.__data__,c,r)),p=h.length,v=u[c]=new Array(p),m=o[c]=new Array(p),g=s[c]=new Array(d);n(l,f,v,m,g,h,t);for(var b,y,w=0,x=0;w<p;++w)if(b=v[w]){for(w>=x&&(x=w+1);!(y=m[x])&&++x<p;);b._next=y||null}}return(o=new Pe(o,r))._enter=u,o._exit=s,o},enter:function(){return new Pe(this._enter||this._groups.map(R),this._parents)},exit:function(){return new Pe(this._exit||this._groups.map(R),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,i=r.length,o=Math.min(a,i),u=new Array(a),s=0;s<o;++s)for(var c,l=n[s],f=r[s],d=l.length,h=u[s]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;s<a;++s)u[s]=n[s];return new Pe(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=U);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new Pe(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e,t=0,n=Object(l.a)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=q(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?H:$:"function"===typeof t?n.local?Y:X:n.local?K:G)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Q:"function"===typeof t?ee:Z)(e,t,null==n?"":n)):te(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ne:"function"===typeof t?ae:re)(e,t)):this.node()[e]},classed:function(e,t){var n=ie(e+"");if(arguments.length<2){for(var r=oe(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?de:t?le:fe)(n,t))},text:function(e){return arguments.length?this.each(null==e?he:("function"===typeof e?ve:pe)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?me:("function"===typeof e?be:ge)(e)):this.node().innerHTML},raise:function(){return this.each(ye)},lower:function(){return this.each(we)},append:function(e){var t="function"===typeof e?e:ke(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:ke(e),r=null==t?je:"function"===typeof t?t:S(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(_e)},clone:function(e){return this.select(e?Ee:Se)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=Ce(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?Te:Ae,r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?De:Ie)(e,t))}},Symbol.iterator,Fe);n(156);function ze(){}var Be=function(e){return null==e?ze:function(){return this.querySelector(e)}};function Ue(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function We(){return[]}var Ve=function(e){return null==e?We:function(){return this.querySelectorAll(e)}};var qe=function(e){return function(){return this.matches(e)}};function $e(e){return function(t){return t.matches(e)}}var He=Array.prototype.find;function Ge(){return this.firstElementChild}var Ke=Array.prototype.filter;function Xe(){return Array.from(this.children)}var Ye=function(e){return new Array(e.length)};function Je(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Je.prototype={constructor:Je,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Qe=function(e){return function(){return e}};function Ze(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new Je(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function et(e,t,n,r,a,i,o){var u,s,c,l=new Map,f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c=o.call(s,s.__data__,u,t)+"",l.has(c)?a[u]=s:l.set(c,s));for(u=0;u<d;++u)c=o.call(e,i[u],u,i)+"",(s=l.get(c))?(r[u]=s,s.__data__=i[u],l.delete(c)):n[u]=new Je(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(h[u])===s&&(a[u]=s)}function tt(e){return e.__data__}function nt(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function rt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var at="http://www.w3.org/1999/xhtml",it={svg:"http://www.w3.org/2000/svg",xhtml:at,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),it.hasOwnProperty(t)?{space:it[t],local:e}:e};function ut(e){return function(){this.removeAttribute(e)}}function st(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ct(e,t){return function(){this.setAttribute(e,t)}}function lt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ft(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function dt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var ht=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function pt(e){return function(){this.style.removeProperty(e)}}function vt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mt(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function gt(e,t){return e.style.getPropertyValue(t)||ht(e).getComputedStyle(e,null).getPropertyValue(t)}function bt(e){return function(){delete this[e]}}function yt(e,t){return function(){this[e]=t}}function wt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function xt(e){return e.trim().split(/^|\s+/)}function Ot(e){return e.classList||new kt(e)}function kt(e){this._node=e,this._names=xt(e.getAttribute("class")||"")}function jt(e,t){for(var n=Ot(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function _t(e,t){for(var n=Ot(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function St(e){return function(){jt(this,e)}}function Et(e){return function(){_t(this,e)}}function Ct(e,t){return function(){(t.apply(this,arguments)?jt:_t)(this,e)}}kt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function At(){this.textContent=""}function Tt(e){return function(){this.textContent=e}}function Nt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function It(){this.innerHTML=""}function Dt(e){return function(){this.innerHTML=e}}function Rt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ft(){this.nextSibling&&this.parentNode.appendChild(this)}function Mt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===at&&t.documentElement.namespaceURI===at?t.createElement(e):t.createElementNS(n,e)}}function Lt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var zt=function(e){var t=ot(e);return(t.local?Lt:Pt)(t)};function Bt(){return null}function Ut(){var e=this.parentNode;e&&e.removeChild(this)}function Wt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qt(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function $t(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function Ht(e,t,n){return function(){var r,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var o=0,u=a.length;o<u;++o)if((r=a[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function Gt(e,t,n){var r=ht(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Kt(e,t){return function(){return Gt(this,e,t)}}function Xt(e,t){return function(){return Gt(this,e,t.apply(this,arguments))}}var Yt=c.a.mark(Jt);function Jt(){var e,t,n,r,a,i,o;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){u.next=13;break}r=e[t],a=0,i=r.length;case 3:if(!(a<i)){u.next=10;break}if(!(o=r[a])){u.next=7;break}return u.next=7,o;case 7:++a,u.next=3;break;case 10:++t,u.next=1;break;case 13:case"end":return u.stop()}}),Yt,this)}var Qt=[null];function Zt(e,t){this._groups=e,this._parents=t}function en(){return new Zt([[document.documentElement]],Qt)}Zt.prototype=en.prototype=Object(j.a)({constructor:Zt,select:function(e){"function"!==typeof e&&(e=Be(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),l=0;l<s;++l)(i=u[l])&&(o=e.call(i,i.__data__,l,u))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new Zt(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return Ue(e.apply(this,arguments))}}(e):Ve(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new Zt(r,a)},selectChild:function(e){return this.select(null==e?Ge:function(e){return function(){return He.call(this.children,e)}}("function"===typeof e?e:$e(e)))},selectChildren:function(e){return this.selectAll(null==e?Xe:function(e){return function(){return Ke.call(this.children,e)}}("function"===typeof e?e:$e(e)))},filter:function(e){"function"!==typeof e&&(e=qe(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new Zt(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,tt);var n=t?et:Ze,r=this._parents,a=this._groups;"function"!==typeof e&&(e=Qe(e));for(var i=a.length,o=new Array(i),u=new Array(i),s=new Array(i),c=0;c<i;++c){var l=r[c],f=a[c],d=f.length,h=nt(e.call(l,l&&l.__data__,c,r)),p=h.length,v=u[c]=new Array(p),m=o[c]=new Array(p),g=s[c]=new Array(d);n(l,f,v,m,g,h,t);for(var b,y,w=0,x=0;w<p;++w)if(b=v[w]){for(w>=x&&(x=w+1);!(y=m[x])&&++x<p;);b._next=y||null}}return(o=new Zt(o,r))._enter=u,o._exit=s,o},enter:function(){return new Zt(this._enter||this._groups.map(Ye),this._parents)},exit:function(){return new Zt(this._exit||this._groups.map(Ye),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,i=r.length,o=Math.min(a,i),u=new Array(a),s=0;s<o;++s)for(var c,l=n[s],f=r[s],d=l.length,h=u[s]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;s<a;++s)u[s]=n[s];return new Zt(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=rt);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new Zt(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e,t=0,n=Object(l.a)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=ot(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?st:ut:"function"===typeof t?n.local?dt:ft:n.local?lt:ct)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?pt:"function"===typeof t?mt:vt)(e,t,null==n?"":n)):gt(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?bt:"function"===typeof t?wt:yt)(e,t)):this.node()[e]},classed:function(e,t){var n=xt(e+"");if(arguments.length<2){for(var r=Ot(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?Ct:t?St:Et)(n,t))},text:function(e){return arguments.length?this.each(null==e?At:("function"===typeof e?Nt:Tt)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?It:("function"===typeof e?Rt:Dt)(e)):this.node().innerHTML},raise:function(){return this.each(Ft)},lower:function(){return this.each(Mt)},append:function(e){var t="function"===typeof e?e:zt(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:zt(e),r=null==t?Bt:"function"===typeof t?t:Be(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ut)},clone:function(e){return this.select(e?Vt:Wt)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=qt(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?Ht:$t,r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?Xt:Kt)(e,t))}},Symbol.iterator,Jt);var tn=en,nn=n(233),rn=function(e,t,n){var r=new nn.a;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r},an=Object(k.a)("start","end","cancel","interrupt"),on=[],un=function(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(i){var c,l,f,d;if(1!==n.state)return s();for(c in a)if((d=a[c]).name===n.name){if(3===d.state)return rn(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[c])}if(rn((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=d);r.length=l+1}}function u(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Object(nn.c)(i,0,n.time)}(e,n,{name:t,index:r,group:a,on:an,tween:on,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function sn(e,t){var n=ln(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function cn(e,t){var n=ln(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ln(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var fn=function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}},dn=n(337);function hn(e,t){var n,r;return function(){var a=cn(this,e),i=a.tween;if(i!==n)for(var o=0,u=(r=n=i).length;o<u;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function pn(e,t,n){var r,a;if("function"!==typeof n)throw new Error;return function(){var i=cn(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var u={name:t,value:n},s=0,c=a.length;s<c;++s)if(a[s].name===t){a[s]=u;break}s===c&&a.push(u)}i.tween=a}}function vn(e,t,n){var r=e._id;return e.each((function(){var e=cn(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ln(e,r).value[t]}}var mn=n(72),gn=n(95),bn=n(166),yn=n(287),wn=function(e,t){var n;return("number"===typeof t?gn.a:t instanceof mn.e?bn.a:(n=Object(mn.e)(t))?(t=n,bn.a):yn.a)(e,t)};function xn(e){return function(){this.removeAttribute(e)}}function On(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kn(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function jn(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function _n(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttribute(e)}}function Sn(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function En(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cn(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function An(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Cn(e,a)),n}return a._value=t,a}function Tn(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&En(e,a)),n}return a._value=t,a}function Nn(e,t){return function(){sn(this,e).delay=+t.apply(this,arguments)}}function In(e,t){return t=+t,function(){sn(this,e).delay=t}}function Dn(e,t){return function(){cn(this,e).duration=+t.apply(this,arguments)}}function Rn(e,t){return t=+t,function(){cn(this,e).duration=t}}function Fn(e,t){if("function"!==typeof t)throw new Error;return function(){cn(this,e).ease=t}}function Mn(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?sn:cn;return function(){var o=i(this,e),u=o.on;u!==r&&(a=(r=u).copy()).on(t,n),o.on=a}}var Pn=tn.prototype.constructor;function Ln(e){return function(){this.style.removeProperty(e)}}function zn(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Bn(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&zn(e,i,n)),r}return i._value=t,i}function Un(e){return function(t){this.textContent=e.call(this,t)}}function Wn(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Un(r)),t}return r._value=e,r}var Vn=0;function qn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $n(){return++Vn}var Hn=tn.prototype;function Gn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}qn.prototype=function(e){return tn().transition(e)}.prototype=Object(j.a)({constructor:qn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Be(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var u,s,c=r[o],l=c.length,f=i[o]=new Array(l),d=0;d<l;++d)(u=c[d])&&(s=e.call(u,u.__data__,d,c))&&("__data__"in u&&(s.__data__=u.__data__),f[d]=s,un(f[d],t,n,d,f,ln(u,n)));return new qn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Ve(e));for(var r=this._groups,a=r.length,i=[],o=[],u=0;u<a;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var d,h=e.call(s,s.__data__,f,c),p=ln(s,n),v=0,m=h.length;v<m;++v)(d=h[v])&&un(d,t,n,v,h,p);i.push(h),o.push(s)}return new qn(i,o,t,n)},selectChild:Hn.selectChild,selectChildren:Hn.selectChildren,filter:function(e){"function"!==typeof e&&(e=qe(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new qn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),h=0;h<f;++h)(s=c[h]||l[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new qn(o,this._parents,this._name,this._id)},selection:function(){return new Pn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=$n(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)if(o=u[c]){var l=ln(o,t);un(o,e,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new qn(r,this._parents,e,n)},call:Hn.call,nodes:Hn.nodes,node:Hn.node,size:Hn.size,empty:Hn.empty,each:Hn.each,on:function(e,t){var n=this._id;return arguments.length<2?ln(this.node(),n).on.on(e):this.each(Mn(n,e,t))},attr:function(e,t){var n=ot(e),r="transform"===n?dn.b:wn;return this.attrTween(e,"function"===typeof t?(n.local?Sn:_n)(n,r,vn(this,"attr."+e,t)):null==t?(n.local?On:xn)(n):(n.local?jn:kn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=ot(e);return this.tween(n,(r.local?An:Tn)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?dn.a:wn;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=gt(this,e),o=(this.style.removeProperty(e),gt(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,Ln(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=gt(this,e),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(e),s=u=gt(this,e)),o===s?null:o===r&&s===a?i:(a=s,i=t(r=o,u))}}(e,r,vn(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,u="end."+o;return function(){var s=cn(this,e),c=s.on,l=null==s.value[o]?i||(i=Ln(t)):void 0;c===n&&a===l||(r=(n=c).copy()).on(u,a=l),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=gt(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,Bn(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(vn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,Wn(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=ln(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?hn:pn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Nn:In)(t,e)):ln(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Dn:Rn)(t,e)):ln(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Fn(t,e)):ln(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;cn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var u={value:o},s={value:function(){0===--a&&i()}};n.each((function(){var n=cn(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t})),0===a&&i()}))}},Symbol.iterator,Hn[Symbol.iterator]);var Kn={time:null,delay:0,duration:250,ease:Gn};function Xn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}tn.prototype.interrupt=function(e){return this.each((function(){fn(this,e)}))},tn.prototype.transition=function(e){var t,n;e instanceof qn?(t=e._id,e=e._name):(t=$n(),(n=Kn).time=Object(nn.b)(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)(o=u[c])&&un(o,e,t,c,u,n||Xn(o,t));return new qn(r,this._parents,e,t)};Math.abs,Math.max,Math.min;function Yn(e){return[+e[0],+e[1]]}function Jn(e){return[Yn(e[0]),Yn(e[1])]}["w","e"].map(Qn),["n","s"].map(Qn),["n","w","e","s","nw","ne","sw","se"].map(Qn);function Qn(e){return{type:e}}function Zn(){}var er=function(e){return null==e?Zn:function(){return this.querySelector(e)}};function tr(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function nr(){return[]}var rr=function(e){return null==e?nr:function(){return this.querySelectorAll(e)}};var ar=function(e){return function(){return this.matches(e)}};function ir(e){return function(t){return t.matches(e)}}var or=Array.prototype.find;function ur(){return this.firstElementChild}var sr=Array.prototype.filter;function cr(){return Array.from(this.children)}var lr=function(e){return new Array(e.length)};function fr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fr.prototype={constructor:fr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var dr=function(e){return function(){return e}};function hr(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new fr(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function pr(e,t,n,r,a,i,o){var u,s,c,l=new Map,f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c=o.call(s,s.__data__,u,t)+"",l.has(c)?a[u]=s:l.set(c,s));for(u=0;u<d;++u)c=o.call(e,i[u],u,i)+"",(s=l.get(c))?(r[u]=s,s.__data__=i[u],l.delete(c)):n[u]=new fr(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(h[u])===s&&(a[u]=s)}function vr(e){return e.__data__}function mr(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function gr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var br="http://www.w3.org/1999/xhtml",yr={svg:"http://www.w3.org/2000/svg",xhtml:br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wr=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),yr.hasOwnProperty(t)?{space:yr[t],local:e}:e};function xr(e){return function(){this.removeAttribute(e)}}function Or(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kr(e,t){return function(){this.setAttribute(e,t)}}function jr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _r(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Sr(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Er=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Cr(e){return function(){this.style.removeProperty(e)}}function Ar(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Tr(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Nr(e,t){return e.style.getPropertyValue(t)||Er(e).getComputedStyle(e,null).getPropertyValue(t)}function Ir(e){return function(){delete this[e]}}function Dr(e,t){return function(){this[e]=t}}function Rr(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Fr(e){return e.trim().split(/^|\s+/)}function Mr(e){return e.classList||new Pr(e)}function Pr(e){this._node=e,this._names=Fr(e.getAttribute("class")||"")}function Lr(e,t){for(var n=Mr(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function zr(e,t){for(var n=Mr(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Br(e){return function(){Lr(this,e)}}function Ur(e){return function(){zr(this,e)}}function Wr(e,t){return function(){(t.apply(this,arguments)?Lr:zr)(this,e)}}Pr.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vr(){this.textContent=""}function qr(e){return function(){this.textContent=e}}function $r(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Hr(){this.innerHTML=""}function Gr(e){return function(){this.innerHTML=e}}function Kr(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Xr(){this.nextSibling&&this.parentNode.appendChild(this)}function Yr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===br&&t.documentElement.namespaceURI===br?t.createElement(e):t.createElementNS(n,e)}}function Qr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var Zr=function(e){var t=wr(e);return(t.local?Qr:Jr)(t)};function ea(){return null}function ta(){var e=this.parentNode;e&&e.removeChild(this)}function na(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ra(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function aa(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ia(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function oa(e,t,n){return function(){var r,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var o=0,u=a.length;o<u;++o)if((r=a[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function ua(e,t,n){var r=Er(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function sa(e,t){return function(){return ua(this,e,t)}}function ca(e,t){return function(){return ua(this,e,t.apply(this,arguments))}}var la=c.a.mark(fa);function fa(){var e,t,n,r,a,i,o;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){u.next=13;break}r=e[t],a=0,i=r.length;case 3:if(!(a<i)){u.next=10;break}if(!(o=r[a])){u.next=7;break}return u.next=7,o;case 7:++a,u.next=3;break;case 10:++t,u.next=1;break;case 13:case"end":return u.stop()}}),la,this)}var da=[null];function ha(e,t){this._groups=e,this._parents=t}function pa(){return new ha([[document.documentElement]],da)}ha.prototype=pa.prototype=Object(j.a)({constructor:ha,select:function(e){"function"!==typeof e&&(e=er(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),l=0;l<s;++l)(i=u[l])&&(o=e.call(i,i.__data__,l,u))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new ha(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return tr(e.apply(this,arguments))}}(e):rr(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new ha(r,a)},selectChild:function(e){return this.select(null==e?ur:function(e){return function(){return or.call(this.children,e)}}("function"===typeof e?e:ir(e)))},selectChildren:function(e){return this.selectAll(null==e?cr:function(e){return function(){return sr.call(this.children,e)}}("function"===typeof e?e:ir(e)))},filter:function(e){"function"!==typeof e&&(e=ar(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new ha(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,vr);var n=t?pr:hr,r=this._parents,a=this._groups;"function"!==typeof e&&(e=dr(e));for(var i=a.length,o=new Array(i),u=new Array(i),s=new Array(i),c=0;c<i;++c){var l=r[c],f=a[c],d=f.length,h=mr(e.call(l,l&&l.__data__,c,r)),p=h.length,v=u[c]=new Array(p),m=o[c]=new Array(p),g=s[c]=new Array(d);n(l,f,v,m,g,h,t);for(var b,y,w=0,x=0;w<p;++w)if(b=v[w]){for(w>=x&&(x=w+1);!(y=m[x])&&++x<p;);b._next=y||null}}return(o=new ha(o,r))._enter=u,o._exit=s,o},enter:function(){return new ha(this._enter||this._groups.map(lr),this._parents)},exit:function(){return new ha(this._exit||this._groups.map(lr),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,i=r.length,o=Math.min(a,i),u=new Array(a),s=0;s<o;++s)for(var c,l=n[s],f=r[s],d=l.length,h=u[s]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;s<a;++s)u[s]=n[s];return new ha(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=gr);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new ha(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e,t=0,n=Object(l.a)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=wr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Or:xr:"function"===typeof t?n.local?Sr:_r:n.local?jr:kr)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Cr:"function"===typeof t?Tr:Ar)(e,t,null==n?"":n)):Nr(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Ir:"function"===typeof t?Rr:Dr)(e,t)):this.node()[e]},classed:function(e,t){var n=Fr(e+"");if(arguments.length<2){for(var r=Mr(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?Wr:t?Br:Ur)(n,t))},text:function(e){return arguments.length?this.each(null==e?Vr:("function"===typeof e?$r:qr)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Hr:("function"===typeof e?Kr:Gr)(e)):this.node().innerHTML},raise:function(){return this.each(Xr)},lower:function(){return this.each(Yr)},append:function(e){var t="function"===typeof e?e:Zr(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Zr(e),r=null==t?ea:"function"===typeof t?t:er(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ta)},clone:function(e){return this.select(e?ra:na)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=aa(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?oa:ia,r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?ca:sa)(e,t))}},Symbol.iterator,fa);var va=pa,ma={value:function(){}};function ga(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ba(r)}function ba(e){this._=e}function ya(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function wa(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function xa(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=ma,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ba.prototype=ga.prototype={constructor:ba,on:function(e,t){var n,r=this._,a=ya(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=xa(r[n],e.name,t);else if(null==t)for(n in r)r[n]=xa(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=wa(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ba(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var Oa,ka,ja=ga,_a=0,Sa=0,Ea=0,Ca=0,Aa=0,Ta=0,Na="object"===typeof performance&&performance.now?performance:Date,Ia="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Da(){return Aa||(Ia(Ra),Aa=Na.now()+Ta)}function Ra(){Aa=0}function Fa(){this._call=this._time=this._next=null}function Ma(e,t,n){var r=new Fa;return r.restart(e,t,n),r}function Pa(){Aa=(Ca=Na.now())+Ta,_a=Sa=0;try{!function(){Da(),++_a;for(var e,t=Oa;t;)(e=Aa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--_a}()}finally{_a=0,function(){var e,t,n=Oa,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Oa=t);ka=e,za(r)}(),Aa=0}}function La(){var e=Na.now(),t=e-Ca;t>1e3&&(Ta-=t,Ca=e)}function za(e){_a||(Sa&&(Sa=clearTimeout(Sa)),e-Aa>24?(e<1/0&&(Sa=setTimeout(Pa,e-Na.now()-Ta)),Ea&&(Ea=clearInterval(Ea))):(Ea||(Ca=Na.now(),Ea=setInterval(La,1e3)),_a=1,Ia(Pa)))}Fa.prototype=Ma.prototype={constructor:Fa,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Da():+n)+(null==t?0:+t),this._next||ka===this||(ka?ka._next=this:Oa=this,ka=this),this._call=e,this._time=n,za()},stop:function(){this._call&&(this._call=null,this._time=1/0,za())}};var Ba=function(e,t,n){var r=new Fa;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r},Ua=ja("start","end","cancel","interrupt"),Wa=[],Va=function(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(i){var c,l,f,d;if(1!==n.state)return s();for(c in a)if((d=a[c]).name===n.name){if(3===d.state)return Ba(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[c])}if(Ba((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=d);r.length=l+1}}function u(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Ma(i,0,n.time)}(e,n,{name:t,index:r,group:a,on:Ua,tween:Wa,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function qa(e,t){var n=Ha(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function $a(e,t){var n=Ha(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Ha(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Ga,Ka=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},Xa=180/Math.PI,Ya={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ja=function(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Xa,skewX:Math.atan(s)*Xa,scaleX:o,scaleY:u}};function Qa(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Ka(e,a)},{i:s-2,x:Ka(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Ka(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Ka(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:Ka(e,n)},{i:u-2,x:Ka(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var Za=Qa((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ya:Ja(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ei=Qa((function(e){return null==e?Ya:(Ga||(Ga=document.createElementNS("http://www.w3.org/2000/svg","g")),Ga.setAttribute("transform",e),(e=Ga.transform.baseVal.consolidate())?(e=e.matrix,Ja(e.a,e.b,e.c,e.d,e.e,e.f)):Ya)}),", ",")",")");function ti(e,t){var n,r;return function(){var a=$a(this,e),i=a.tween;if(i!==n)for(var o=0,u=(r=n=i).length;o<u;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function ni(e,t,n){var r,a;if("function"!==typeof n)throw new Error;return function(){var i=$a(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var u={name:t,value:n},s=0,c=a.length;s<c;++s)if(a[s].name===t){a[s]=u;break}s===c&&a.push(u)}i.tween=a}}function ri(e,t,n){var r=e._id;return e.each((function(){var e=$a(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ha(e,r).value[t]}}var ai=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function ii(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function oi(){}var ui=.7,si=1/ui,ci="\\s*([+-]?\\d+)\\s*",li="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",di=/^#([0-9a-f]{3,8})$/,hi=new RegExp("^rgb\\("+[ci,ci,ci]+"\\)$"),pi=new RegExp("^rgb\\("+[fi,fi,fi]+"\\)$"),vi=new RegExp("^rgba\\("+[ci,ci,ci,li]+"\\)$"),mi=new RegExp("^rgba\\("+[fi,fi,fi,li]+"\\)$"),gi=new RegExp("^hsl\\("+[li,fi,fi]+"\\)$"),bi=new RegExp("^hsla\\("+[li,fi,fi,li]+"\\)$"),yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wi(){return this.rgb().formatHex()}function xi(){return this.rgb().formatRgb()}function Oi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=di.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ki(t):3===n?new Ei(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ji(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ji(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hi.exec(e))?new Ei(t[1],t[2],t[3],1):(t=pi.exec(e))?new Ei(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=vi.exec(e))?ji(t[1],t[2],t[3],t[4]):(t=mi.exec(e))?ji(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=gi.exec(e))?Ni(t[1],t[2]/100,t[3]/100,1):(t=bi.exec(e))?Ni(t[1],t[2]/100,t[3]/100,t[4]):yi.hasOwnProperty(e)?ki(yi[e]):"transparent"===e?new Ei(NaN,NaN,NaN,0):null}function ki(e){return new Ei(e>>16&255,e>>8&255,255&e,1)}function ji(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ei(e,t,n,r)}function _i(e){return e instanceof oi||(e=Oi(e)),e?new Ei((e=e.rgb()).r,e.g,e.b,e.opacity):new Ei}function Si(e,t,n,r){return 1===arguments.length?_i(e):new Ei(e,t,n,null==r?1:r)}function Ei(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ci(){return"#"+Ti(this.r)+Ti(this.g)+Ti(this.b)}function Ai(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ti(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Ni(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,n,r)}function Ii(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof oi||(e=Oi(e)),!e)return new Di;if(e instanceof Di)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new Di(o,u,s,e.opacity)}function Di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ri(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Fi(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}ai(oi,Oi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:wi,formatHex:wi,formatHsl:function(){return Ii(this).formatHsl()},formatRgb:xi,toString:xi}),ai(Ei,Si,ii(oi,{brighter:function(e){return e=null==e?si:Math.pow(si,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?ui:Math.pow(ui,e),new Ei(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ci,formatHex:Ci,formatRgb:Ai,toString:Ai})),ai(Di,(function(e,t,n,r){return 1===arguments.length?Ii(e):new Di(e,t,n,null==r?1:r)}),ii(oi,{brighter:function(e){return e=null==e?si:Math.pow(si,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ui:Math.pow(ui,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ei(Ri(e>=240?e-240:e+120,a,r),Ri(e,a,r),Ri(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Mi=function(e){return function(){return e}};function Pi(e,t){return function(n){return e+n*t}}function Li(e){return 1===(e=+e)?zi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Mi(isNaN(t)?n:t)}}function zi(e,t){var n=t-e;return n?Pi(e,n):Mi(isNaN(e)?t:e)}var Bi=function e(t){var n=Li(t);function r(e,t){var r=n((e=Si(e)).r,(t=Si(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=zi(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Ui(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Si(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}Ui((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return Fi((n-r/t)*t,o,a,i,u)}})),Ui((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Fi((n-r/t)*t,a,i,o,u)}}));var Wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vi=new RegExp(Wi.source,"g");var qi=function(e,t){var n,r,a,i=Wi.lastIndex=Vi.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=Wi.exec(e))&&(r=Vi.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Ka(n,r)})),i=Vi.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},$i=function(e,t){var n;return("number"===typeof t?Ka:t instanceof Oi?Bi:(n=Oi(t))?(t=n,Bi):qi)(e,t)};function Hi(e){return function(){this.removeAttribute(e)}}function Gi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ki(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Xi(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Yi(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttribute(e)}}function Ji(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function Qi(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zi(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function eo(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Zi(e,a)),n}return a._value=t,a}function to(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Qi(e,a)),n}return a._value=t,a}function no(e,t){return function(){qa(this,e).delay=+t.apply(this,arguments)}}function ro(e,t){return t=+t,function(){qa(this,e).delay=t}}function ao(e,t){return function(){$a(this,e).duration=+t.apply(this,arguments)}}function io(e,t){return t=+t,function(){$a(this,e).duration=t}}function oo(e,t){if("function"!==typeof t)throw new Error;return function(){$a(this,e).ease=t}}function uo(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?qa:$a;return function(){var o=i(this,e),u=o.on;u!==r&&(a=(r=u).copy()).on(t,n),o.on=a}}var so=va.prototype.constructor;function co(e){return function(){this.style.removeProperty(e)}}function lo(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function fo(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&lo(e,i,n)),r}return i._value=t,i}function ho(e){return function(t){this.textContent=e.call(this,t)}}function po(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ho(r)),t}return r._value=e,r}var vo=0;function mo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function go(){return++vo}var bo=va.prototype;mo.prototype=function(e){return va().transition(e)}.prototype=Object(j.a)({constructor:mo,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=er(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var u,s,c=r[o],l=c.length,f=i[o]=new Array(l),d=0;d<l;++d)(u=c[d])&&(s=e.call(u,u.__data__,d,c))&&("__data__"in u&&(s.__data__=u.__data__),f[d]=s,Va(f[d],t,n,d,f,Ha(u,n)));return new mo(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=rr(e));for(var r=this._groups,a=r.length,i=[],o=[],u=0;u<a;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var d,h=e.call(s,s.__data__,f,c),p=Ha(s,n),v=0,m=h.length;v<m;++v)(d=h[v])&&Va(d,t,n,v,h,p);i.push(h),o.push(s)}return new mo(i,o,t,n)},selectChild:bo.selectChild,selectChildren:bo.selectChildren,filter:function(e){"function"!==typeof e&&(e=ar(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new mo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),h=0;h<f;++h)(s=c[h]||l[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new mo(o,this._parents,this._name,this._id)},selection:function(){return new so(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=go(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)if(o=u[c]){var l=Ha(o,t);Va(o,e,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new mo(r,this._parents,e,n)},call:bo.call,nodes:bo.nodes,node:bo.node,size:bo.size,empty:bo.empty,each:bo.each,on:function(e,t){var n=this._id;return arguments.length<2?Ha(this.node(),n).on.on(e):this.each(uo(n,e,t))},attr:function(e,t){var n=wr(e),r="transform"===n?ei:$i;return this.attrTween(e,"function"===typeof t?(n.local?Ji:Yi)(n,r,ri(this,"attr."+e,t)):null==t?(n.local?Gi:Hi)(n):(n.local?Xi:Ki)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=wr(e);return this.tween(n,(r.local?eo:to)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?Za:$i;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=Nr(this,e),o=(this.style.removeProperty(e),Nr(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,co(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=Nr(this,e),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(e),s=u=Nr(this,e)),o===s?null:o===r&&s===a?i:(a=s,i=t(r=o,u))}}(e,r,ri(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,u="end."+o;return function(){var s=$a(this,e),c=s.on,l=null==s.value[o]?i||(i=co(t)):void 0;c===n&&a===l||(r=(n=c).copy()).on(u,a=l),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=Nr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,fo(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ri(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,po(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=Ha(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?ti:ni)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?no:ro)(t,e)):Ha(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?ao:io)(t,e)):Ha(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(oo(t,e)):Ha(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;$a(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var u={value:o},s={value:function(){0===--a&&i()}};n.each((function(){var n=$a(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t})),0===a&&i()}))}},Symbol.iterator,bo[Symbol.iterator]);var yo={time:null,delay:0,duration:250,ease:Gn};function wo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}va.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}}(this,e)}))},va.prototype.transition=function(e){var t,n;e instanceof mo?(t=e._id,e=e._name):(t=go(),(n=yo).time=Da(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)(o=u[c])&&Va(o,e,t,c,u,n||wo(o,t));return new mo(r,this._parents,e,t)};n(401);function xo(){}var Oo=function(e){return null==e?xo:function(){return this.querySelector(e)}};function ko(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function jo(){return[]}var _o=function(e){return null==e?jo:function(){return this.querySelectorAll(e)}};var So=function(e){return function(){return this.matches(e)}};function Eo(e){return function(t){return t.matches(e)}}var Co=Array.prototype.find;function Ao(){return this.firstElementChild}var To=Array.prototype.filter;function No(){return Array.from(this.children)}var Io=function(e){return new Array(e.length)};function Do(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Do.prototype={constructor:Do,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Ro=function(e){return function(){return e}};function Fo(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new Do(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function Mo(e,t,n,r,a,i,o){var u,s,c,l=new Map,f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c=o.call(s,s.__data__,u,t)+"",l.has(c)?a[u]=s:l.set(c,s));for(u=0;u<d;++u)c=o.call(e,i[u],u,i)+"",(s=l.get(c))?(r[u]=s,s.__data__=i[u],l.delete(c)):n[u]=new Do(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(h[u])===s&&(a[u]=s)}function Po(e){return e.__data__}function Lo(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function zo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Bo="http://www.w3.org/1999/xhtml",Uo={svg:"http://www.w3.org/2000/svg",xhtml:Bo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wo=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Uo.hasOwnProperty(t)?{space:Uo[t],local:e}:e};function Vo(e){return function(){this.removeAttribute(e)}}function qo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $o(e,t){return function(){this.setAttribute(e,t)}}function Ho(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Go(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ko(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Xo=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Yo(e){return function(){this.style.removeProperty(e)}}function Jo(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qo(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Zo(e,t){return e.style.getPropertyValue(t)||Xo(e).getComputedStyle(e,null).getPropertyValue(t)}function eu(e){return function(){delete this[e]}}function tu(e,t){return function(){this[e]=t}}function nu(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ru(e){return e.trim().split(/^|\s+/)}function au(e){return e.classList||new iu(e)}function iu(e){this._node=e,this._names=ru(e.getAttribute("class")||"")}function ou(e,t){for(var n=au(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function uu(e,t){for(var n=au(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function su(e){return function(){ou(this,e)}}function cu(e){return function(){uu(this,e)}}function lu(e,t){return function(){(t.apply(this,arguments)?ou:uu)(this,e)}}iu.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fu(){this.textContent=""}function du(e){return function(){this.textContent=e}}function hu(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function pu(){this.innerHTML=""}function vu(e){return function(){this.innerHTML=e}}function mu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function gu(){this.nextSibling&&this.parentNode.appendChild(this)}function bu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bo&&t.documentElement.namespaceURI===Bo?t.createElement(e):t.createElementNS(n,e)}}function wu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var xu=function(e){var t=Wo(e);return(t.local?wu:yu)(t)};function Ou(){return null}function ku(){var e=this.parentNode;e&&e.removeChild(this)}function ju(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _u(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Su(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Eu(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function Cu(e,t,n){return function(){var r,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var o=0,u=a.length;o<u;++o)if((r=a[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function Au(e,t,n){var r=Xo(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Tu(e,t){return function(){return Au(this,e,t)}}function Nu(e,t){return function(){return Au(this,e,t.apply(this,arguments))}}var Iu=c.a.mark(Du);function Du(){var e,t,n,r,a,i,o;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){u.next=13;break}r=e[t],a=0,i=r.length;case 3:if(!(a<i)){u.next=10;break}if(!(o=r[a])){u.next=7;break}return u.next=7,o;case 7:++a,u.next=3;break;case 10:++t,u.next=1;break;case 13:case"end":return u.stop()}}),Iu,this)}var Ru=[null];function Fu(e,t){this._groups=e,this._parents=t}function Mu(){return new Fu([[document.documentElement]],Ru)}Fu.prototype=Mu.prototype=Object(j.a)({constructor:Fu,select:function(e){"function"!==typeof e&&(e=Oo(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),l=0;l<s;++l)(i=u[l])&&(o=e.call(i,i.__data__,l,u))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new Fu(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return ko(e.apply(this,arguments))}}(e):_o(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new Fu(r,a)},selectChild:function(e){return this.select(null==e?Ao:function(e){return function(){return Co.call(this.children,e)}}("function"===typeof e?e:Eo(e)))},selectChildren:function(e){return this.selectAll(null==e?No:function(e){return function(){return To.call(this.children,e)}}("function"===typeof e?e:Eo(e)))},filter:function(e){"function"!==typeof e&&(e=So(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new Fu(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Po);var n=t?Mo:Fo,r=this._parents,a=this._groups;"function"!==typeof e&&(e=Ro(e));for(var i=a.length,o=new Array(i),u=new Array(i),s=new Array(i),c=0;c<i;++c){var l=r[c],f=a[c],d=f.length,h=Lo(e.call(l,l&&l.__data__,c,r)),p=h.length,v=u[c]=new Array(p),m=o[c]=new Array(p),g=s[c]=new Array(d);n(l,f,v,m,g,h,t);for(var b,y,w=0,x=0;w<p;++w)if(b=v[w]){for(w>=x&&(x=w+1);!(y=m[x])&&++x<p;);b._next=y||null}}return(o=new Fu(o,r))._enter=u,o._exit=s,o},enter:function(){return new Fu(this._enter||this._groups.map(Io),this._parents)},exit:function(){return new Fu(this._exit||this._groups.map(Io),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,i=r.length,o=Math.min(a,i),u=new Array(a),s=0;s<o;++s)for(var c,l=n[s],f=r[s],d=l.length,h=u[s]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;s<a;++s)u[s]=n[s];return new Fu(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=zo);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new Fu(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e,t=0,n=Object(l.a)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=Wo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?qo:Vo:"function"===typeof t?n.local?Ko:Go:n.local?Ho:$o)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Yo:"function"===typeof t?Qo:Jo)(e,t,null==n?"":n)):Zo(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?eu:"function"===typeof t?nu:tu)(e,t)):this.node()[e]},classed:function(e,t){var n=ru(e+"");if(arguments.length<2){for(var r=au(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?lu:t?su:cu)(n,t))},text:function(e){return arguments.length?this.each(null==e?fu:("function"===typeof e?hu:du)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?pu:("function"===typeof e?mu:vu)(e)):this.node().innerHTML},raise:function(){return this.each(gu)},lower:function(){return this.each(bu)},append:function(e){var t="function"===typeof e?e:xu(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:xu(e),r=null==t?Ou:"function"===typeof t?t:Oo(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ku)},clone:function(e){return this.select(e?_u:ju)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=Su(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?Cu:Eu,r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?Nu:Tu)(e,t))}},Symbol.iterator,Du);var Pu=Mu,Lu=Object(k.a)("start","end","cancel","interrupt"),zu=[],Bu=function(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(i){var c,l,f,d;if(1!==n.state)return s();for(c in a)if((d=a[c]).name===n.name){if(3===d.state)return rn(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[c])}if(rn((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=d);r.length=l+1}}function u(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Object(nn.c)(i,0,n.time)}(e,n,{name:t,index:r,group:a,on:Lu,tween:zu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function Uu(e,t){var n=Vu(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Wu(e,t){var n=Vu(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Vu(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var qu=function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}};function $u(e,t){var n,r;return function(){var a=Wu(this,e),i=a.tween;if(i!==n)for(var o=0,u=(r=n=i).length;o<u;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function Hu(e,t,n){var r,a;if("function"!==typeof n)throw new Error;return function(){var i=Wu(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var u={name:t,value:n},s=0,c=a.length;s<c;++s)if(a[s].name===t){a[s]=u;break}s===c&&a.push(u)}i.tween=a}}function Gu(e,t,n){var r=e._id;return e.each((function(){var e=Wu(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Vu(e,r).value[t]}}var Ku=function(e,t){var n;return("number"===typeof t?gn.a:t instanceof mn.e?bn.a:(n=Object(mn.e)(t))?(t=n,bn.a):yn.a)(e,t)};function Xu(e){return function(){this.removeAttribute(e)}}function Yu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ju(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Qu(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Zu(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttribute(e)}}function es(e,t,n){var r,a,i;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:o===r&&u===a?i:(a=u,i=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function ts(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ns(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rs(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ns(e,a)),n}return a._value=t,a}function as(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ts(e,a)),n}return a._value=t,a}function is(e,t){return function(){Uu(this,e).delay=+t.apply(this,arguments)}}function os(e,t){return t=+t,function(){Uu(this,e).delay=t}}function us(e,t){return function(){Wu(this,e).duration=+t.apply(this,arguments)}}function ss(e,t){return t=+t,function(){Wu(this,e).duration=t}}function cs(e,t){if("function"!==typeof t)throw new Error;return function(){Wu(this,e).ease=t}}function ls(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Uu:Wu;return function(){var o=i(this,e),u=o.on;u!==r&&(a=(r=u).copy()).on(t,n),o.on=a}}var fs=Pu.prototype.constructor;function ds(e){return function(){this.style.removeProperty(e)}}function hs(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ps(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&hs(e,i,n)),r}return i._value=t,i}function vs(e){return function(t){this.textContent=e.call(this,t)}}function ms(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&vs(r)),t}return r._value=e,r}var gs=0;function bs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ys(){return++gs}var ws=Pu.prototype;bs.prototype=function(e){return Pu().transition(e)}.prototype=Object(j.a)({constructor:bs,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Oo(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var u,s,c=r[o],l=c.length,f=i[o]=new Array(l),d=0;d<l;++d)(u=c[d])&&(s=e.call(u,u.__data__,d,c))&&("__data__"in u&&(s.__data__=u.__data__),f[d]=s,Bu(f[d],t,n,d,f,Vu(u,n)));return new bs(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=_o(e));for(var r=this._groups,a=r.length,i=[],o=[],u=0;u<a;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var d,h=e.call(s,s.__data__,f,c),p=Vu(s,n),v=0,m=h.length;v<m;++v)(d=h[v])&&Bu(d,t,n,v,h,p);i.push(h),o.push(s)}return new bs(i,o,t,n)},selectChild:ws.selectChild,selectChildren:ws.selectChildren,filter:function(e){"function"!==typeof e&&(e=So(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new bs(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),h=0;h<f;++h)(s=c[h]||l[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new bs(o,this._parents,this._name,this._id)},selection:function(){return new fs(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ys(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)if(o=u[c]){var l=Vu(o,t);Bu(o,e,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new bs(r,this._parents,e,n)},call:ws.call,nodes:ws.nodes,node:ws.node,size:ws.size,empty:ws.empty,each:ws.each,on:function(e,t){var n=this._id;return arguments.length<2?Vu(this.node(),n).on.on(e):this.each(ls(n,e,t))},attr:function(e,t){var n=Wo(e),r="transform"===n?dn.b:Ku;return this.attrTween(e,"function"===typeof t?(n.local?es:Zu)(n,r,Gu(this,"attr."+e,t)):null==t?(n.local?Yu:Xu)(n):(n.local?Qu:Ju)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Wo(e);return this.tween(n,(r.local?rs:as)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?dn.a:Ku;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=Zo(this,e),o=(this.style.removeProperty(e),Zo(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,ds(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=Zo(this,e),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(e),s=u=Zo(this,e)),o===s?null:o===r&&s===a?i:(a=s,i=t(r=o,u))}}(e,r,Gu(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,u="end."+o;return function(){var s=Wu(this,e),c=s.on,l=null==s.value[o]?i||(i=ds(t)):void 0;c===n&&a===l||(r=(n=c).copy()).on(u,a=l),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=Zo(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,ps(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Gu(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,ms(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=Vu(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?$u:Hu)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?is:os)(t,e)):Vu(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?us:ss)(t,e)):Vu(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(cs(t,e)):Vu(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Wu(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var u={value:o},s={value:function(){0===--a&&i()}};n.each((function(){var n=Wu(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t})),0===a&&i()}))}},Symbol.iterator,ws[Symbol.iterator]);var xs={time:null,delay:0,duration:250,ease:Gn};function Os(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Pu.prototype.interrupt=function(e){return this.each((function(){qu(this,e)}))},Pu.prototype.transition=function(e){var t,n;e instanceof bs?(t=e._id,e=e._name):(t=ys(),(n=xs).time=Object(nn.b)(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,u=r[i],s=u.length,c=0;c<s;++c)(o=u[c])&&Bu(o,e,t,c,u,n||Os(o,t));return new bs(r,this._parents,e,t)};function ks(e,t,n){this.k=e,this.x=t,this.y=n}ks.prototype={constructor:ks,scale:function(e){return 1===e?this:new ks(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ks(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ks(1,0,0);ks.prototype},function(e,t,n){"use strict";var r,a=n(29),i=n(45),o=n(53),u=n.n(o),s=n(5),c=n.n(s);var l=n(133),f=n(204),d=n(33),h=n.n(d);n(225);function p(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function v(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function m(e,t,n){var r=Object(s.useRef)(void 0!==e),a=Object(s.useState)(t),i=a[0],o=a[1],u=void 0!==e,c=r.current;return r.current=u,!u&&c&&i!==t&&o(t),[u?e:i,Object(s.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),o(e)}),[n])]}n(86);function g(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function b(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function y(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}g.__suppressDeprecationWarning=!0,b.__suppressDeprecationWarning=!0,y.__suppressDeprecationWarning=!0;var w=n(297);var x=n(66);function O(e,t,n){return void 0===n&&(n=!1),function(e,t,n,r){void 0===r&&(r=!1);var a=Object(x.a)(n);Object(s.useEffect)((function(){var n="function"===typeof e?e():e;return n.addEventListener(t,a,r),function(){return n.removeEventListener(t,a,r)}}),[e])}(Object(s.useCallback)((function(){return document}),[]),e,t,n)}var k=n(205),j=n(309),_=n(299),S={children:h.a.node,drop:h.a.oneOf(["up","left","right","down"]),focusFirstItemOnShow:h.a.oneOf([!1,!0,"keyboard"]),itemSelector:h.a.string,alignEnd:h.a.bool,show:h.a.bool,defaultShow:h.a.bool,onToggle:h.a.func};function E(){var e=Object(s.useReducer)((function(e){return!e}),!1)[1],t=Object(s.useRef)(null),n=Object(s.useCallback)((function(n){t.current=n,e()}),[e]);return[t,n]}function C(e){var t=e.drop,n=e.alignEnd,a=e.defaultShow,i=e.show,o=e.onToggle,u=e.itemSelector,d=void 0===u?"* > *":u,h=e.focusFirstItemOnShow,p=e.children,v=m(i,a,o),g=v[0],b=v[1],y=E(),j=y[0],_=y[1],S=j.current,C=E(),A=C[0],T=C[1],N=A.current,I=Object(w.a)(g),D=Object(s.useRef)(null),R=Object(s.useRef)(!1),F=Object(s.useCallback)((function(e,t){b(e,t)}),[b]),M=Object(s.useMemo)((function(){return{toggle:F,drop:t,show:g,alignEnd:n,menuElement:S,toggleElement:N,setMenu:_,setToggle:T}}),[F,t,g,n,S,N,_,T]);S&&I&&!g&&(R.current=S.contains(document.activeElement));var P=Object(x.a)((function(){N&&N.focus&&N.focus()})),L=Object(x.a)((function(){var e=D.current,t=h;if(null==t&&(t=!(!j.current||!function(e,t){if(!r){var n=document.body,a=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;r=function(e,t){return a.call(e,t)}}return r(e,t)}(j.current,"[role=menu]"))&&"keyboard"),!1!==t&&("keyboard"!==t||/^key.+$/.test(e))){var n=Object(l.a)(j.current,d)[0];n&&n.focus&&n.focus()}}));Object(s.useEffect)((function(){g?L():R.current&&(R.current=!1,P())}),[g,R,P,L]),Object(s.useEffect)((function(){D.current=null}));var z=function(e,t){if(!j.current)return null;var n=Object(l.a)(j.current,d),r=n.indexOf(e)+t;return n[r=Math.max(0,Math.min(r,n.length))]};return O("keydown",(function(e){var t,n,r=e.key,a=e.target,i=null==(t=j.current)?void 0:t.contains(a),o=null==(n=A.current)?void 0:n.contains(a);if((!/input|textarea/i.test(a.tagName)||!(" "===r||"Escape"!==r&&i))&&(i||o)&&(j.current||"Tab"!==r))switch(D.current=e.type,r){case"ArrowUp":var u=z(a,-1);return u&&u.focus&&u.focus(),void e.preventDefault();case"ArrowDown":if(e.preventDefault(),g){var s=z(a,1);s&&s.focus&&s.focus()}else b(!0,e);return;case"Tab":Object(f.a)(document,"keyup",(function(t){var n;("Tab"!==t.key||t.target)&&null!=(n=j.current)&&n.contains(t.target)||b(!1,e)}),{once:!0});break;case"Escape":e.preventDefault(),e.stopPropagation(),b(!1,e)}})),c.a.createElement(k.a.Provider,{value:M},p)}C.displayName="ReactOverlaysDropdown",C.propTypes=S,C.Menu=j.a,C.Toggle=_.a;var A=C,T=function(e,t){return void 0===t&&(t=null),null!=e?String(e):t||null},N=c.a.createContext(null),I=n(57),D=c.a.createContext(null);D.displayName="NavContext";var R=D,F=n(310),M=["bsPrefix","className","children","eventKey","disabled","href","onClick","onSelect","active","as"],P={as:F.a,disabled:!1},L=c.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.children,l=e.eventKey,f=e.disabled,d=e.href,h=e.onClick,p=e.onSelect,v=e.active,m=e.as,g=Object(i.a)(e,M),b=Object(I.a)(n,"dropdown-item"),y=Object(s.useContext)(N),w=(Object(s.useContext)(R)||{}).activeKey,O=T(l,d),k=null==v&&null!=O?T(w)===O:v,j=Object(x.a)((function(e){f||(h&&h(e),y&&y(O,e),p&&p(O,e))}));return c.a.createElement(m,Object(a.a)({},g,{ref:t,href:d,disabled:f,className:u()(r,b,k&&"active",f&&"disabled"),onClick:j}),o)}));L.displayName="DropdownItem",L.defaultProps=P;var z=L,B=n(234),U=n(300),W=n(67),V=["bsPrefix","drop","show","className","alignRight","onSelect","onToggle","focusFirstItemOnShow","as","navbar"],q=Object(W.a)("dropdown-header",{defaultProps:{role:"heading"}}),$=Object(W.a)("dropdown-divider",{defaultProps:{role:"separator"}}),H=Object(W.a)("dropdown-item-text",{Component:"span"}),G=c.a.forwardRef((function(e,t){var n=function(e,t){return Object.keys(t).reduce((function(n,r){var o,u=n,s=u[p(r)],c=u[r],l=Object(i.a)(u,[p(r),r].map(v)),f=t[r],d=m(c,s,e[f]),h=d[0],g=d[1];return Object(a.a)({},l,((o={})[r]=h,o[f]=g,o))}),e)}(e,{show:"onToggle"}),r=n.bsPrefix,o=n.drop,l=n.show,f=n.className,d=n.alignRight,h=n.onSelect,g=n.onToggle,b=n.focusFirstItemOnShow,y=n.as,w=void 0===y?"div":y,O=(n.navbar,Object(i.a)(n,V)),k=Object(s.useContext)(N),j=Object(I.a)(r,"dropdown"),_=Object(x.a)((function(e,t,n){void 0===n&&(n=t.type),t.currentTarget!==document||"keydown"===n&&"Escape"!==t.key||(n="rootClose"),g&&g(e,t,{source:n})})),S=Object(x.a)((function(e,t){k&&k(e,t),h&&h(e,t),_(!1,t,"select")}));return c.a.createElement(N.Provider,{value:S},c.a.createElement(A,{drop:o,show:l,alignEnd:d,onToggle:_,focusFirstItemOnShow:b,itemSelector:"."+j+"-item:not(.disabled):not(:disabled)"},c.a.createElement(w,Object(a.a)({},O,{ref:t,className:u()(f,l&&"show",(!o||"down"===o)&&j,"up"===o&&"dropup","right"===o&&"dropright","left"===o&&"dropleft")}))))}));G.displayName="Dropdown",G.defaultProps={navbar:!1},G.Divider=$,G.Header=q,G.Item=z,G.ItemText=H,G.Menu=B.b,G.Toggle=U.a;t.a=G},function(e,t,n){"use strict";var r=n(40),a=n.n(r),i=n(130),o=n.n(i),u=n(39),s=n.n(u),c=n(5),l=n.n(c),f=n(122),d=n(414),h=n.n(d),p=n(415),v=n.n(p),m=n(416),g=n.n(m),b=n(417),y=n.n(b),w=n(418),x=n.n(w),O=n(419),k=n.n(O),j=n(420),_=n.n(j),S=n(421),E=n.n(S),C=n(422),A=n.n(C),T=n(423),N=n.n(T),I=n(424),D=n.n(I),R=function(e){switch(e){case"stacked":return"rhap_stacked";case"stacked-reverse":return"rhap_stacked-reverse";case"horizontal":return"rhap_horizontal";case"horizontal-reverse":return"rhap_horizontal-reverse";default:return"rhap_stacked"}},F=function(e){return e instanceof MouseEvent?e.clientX:e.touches[0].clientX},M=function(e){return e>9?e.toString():"0"+e},P=function(e,t,n){if(!isFinite(e))return null;var r=Math.floor(e/60),a=M(r),i=M(Math.floor(e%60)),o=M(Math.floor(r%60)),u=a+":"+i,s=Math.floor(r/60)+":"+o+":"+i;return"auto"===n?t>=3600?s:u:"mm:ss"===n?u:"hh:mm:ss"===n?s:void 0};function L(e,t){var n=!1;return function(r){n||(e(r),n=!0,setTimeout((function(){return n=!1}),t))}}var z,B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"audio",void 0),s()(a()(t),"timeOnMouseMove",0),s()(a()(t),"hasAddedAudioEventListener",!1),s()(a()(t),"downloadProgressAnimationTimer",void 0),s()(a()(t),"state",{isDraggingProgress:!1,currentTimePos:"0%",hasDownloadProgressAnimation:!1,downloadProgressArr:[],waitingForSeekCallback:!1}),s()(a()(t),"getCurrentProgress",(function(e){var n=t.props,r=n.audio,a=n.progressBar;if(0!==r.src.indexOf("blob:")&&"undefined"===typeof t.props.srcDuration&&(!r.src||!isFinite(r.currentTime)||!a.current))return{currentTime:0,currentTimePos:"0%"};var i=a.current.getBoundingClientRect(),o=i.width,u=F(e)-i.left;return u<0?u=0:u>o&&(u=o),{currentTime:t.getDuration()*u/o,currentTimePos:(u/o*100).toFixed(2)+"%"}})),s()(a()(t),"handleContextMenu",(function(e){e.preventDefault()})),s()(a()(t),"handleMouseDownOrTouchStartProgressBar",(function(e){e.stopPropagation();var n=t.getCurrentProgress(e.nativeEvent),r=n.currentTime,a=n.currentTimePos;isFinite(r)&&(t.timeOnMouseMove=r,t.setState({isDraggingProgress:!0,currentTimePos:a}),e.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",t.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",t.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",t.handleWindowMouseOrTouchMove),window.addEventListener("touchend",t.handleWindowMouseOrTouchUp)))})),s()(a()(t),"handleWindowMouseOrTouchMove",(function(e){e instanceof MouseEvent&&e.preventDefault(),e.stopPropagation();var n=window.getSelection();if(n&&"Range"===n.type&&n.empty(),t.state.isDraggingProgress){var r=t.getCurrentProgress(e),a=r.currentTime,i=r.currentTimePos;t.timeOnMouseMove=a,t.setState({currentTimePos:i})}})),s()(a()(t),"handleWindowMouseOrTouchUp",(function(e){e.stopPropagation();var n=t.timeOnMouseMove,r=t.props,a=r.audio,i=r.onChangeCurrentTimeError,o=r.onSeek;if(o)t.setState({isDraggingProgress:!1,waitingForSeekCallback:!0},(function(){o(a,n).then((function(){return t.setState({waitingForSeekCallback:!1})}),(function(e){throw new Error(e)}))}));else{var u={isDraggingProgress:!1};a.readyState!==a.HAVE_NOTHING&&a.readyState!==a.HAVE_METADATA&&isFinite(n)?a.currentTime=n:(u.currentTimePos="0%",i&&i()),t.setState(u)}e instanceof MouseEvent?(window.removeEventListener("mousemove",t.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",t.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",t.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",t.handleWindowMouseOrTouchUp))})),s()(a()(t),"handleAudioTimeUpdate",L((function(e){var n=t.state.isDraggingProgress,r=e.target;if(!n&&!0!==t.state.waitingForSeekCallback){var a=r.currentTime,i=t.getDuration();t.setState({currentTimePos:(a/i*100||0).toFixed(2)+"%"})}}),t.props.progressUpdateInterval)),s()(a()(t),"handleAudioDownloadProgressUpdate",(function(e){for(var n=e.target,r=t.getDuration(),a=[],i=0;i<n.buffered.length;i++){var o=n.buffered.start(i),u=n.buffered.end(i);a.push({left:(Math.round(100/r*o)||0)+"%",width:(Math.round(100/r*(u-o))||0)+"%"})}clearTimeout(t.downloadProgressAnimationTimer),t.setState({downloadProgressArr:a,hasDownloadProgressAnimation:!0}),t.downloadProgressAnimationTimer=setTimeout((function(){t.setState({hasDownloadProgressAnimation:!1})}),200)})),t}o()(t,e);var n=t.prototype;return n.getDuration=function(){var e=this.props,t=e.audio,n=e.srcDuration;return"undefined"===typeof n?t.duration:n},n.componentDidUpdate=function(){var e=this.props.audio;e&&!this.hasAddedAudioEventListener&&(this.audio=e,this.hasAddedAudioEventListener=!0,e.addEventListener("timeupdate",this.handleAudioTimeUpdate),e.addEventListener("progress",this.handleAudioDownloadProgressUpdate))},n.componentWillUnmount=function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.removeEventListener("progress",this.handleAudioDownloadProgressUpdate)),clearTimeout(this.downloadProgressAnimationTimer)},n.render=function(){var e=this.props,t=e.showDownloadProgress,n=e.showFilledProgress,r=e.progressBar,a=this.state,i=a.currentTimePos,o=a.downloadProgressArr,u=a.hasDownloadProgressAnimation;return l.a.createElement("div",{className:"rhap_progress-container",ref:r,"aria-label":"Audio Progress Control",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number(i.split("%")[0]),tabIndex:0,onMouseDown:this.handleMouseDownOrTouchStartProgressBar,onTouchStart:this.handleMouseDownOrTouchStartProgressBar,onContextMenu:this.handleContextMenu},l.a.createElement("div",{className:"rhap_progress-bar "+(t?"rhap_progress-bar-show-download":"")},l.a.createElement("div",{className:"rhap_progress-indicator",style:{left:i}}),n&&l.a.createElement("div",{className:"rhap_progress-filled",style:{width:i}}),t&&o.map((function(e,t){var n=e.left,r=e.width;return l.a.createElement("div",{key:t,className:"rhap_download-progress",style:{left:n,width:r,transitionDuration:u?".2s":"0s"}})}))))},t}(c.Component),U=Object(c.forwardRef)((function(e,t){return l.a.createElement(B,D()({},e,{progressBar:t}))})),W=function(e){function t(t){var n;n=e.call(this,t)||this,s()(a()(n),"audio",void 0),s()(a()(n),"hasAddedAudioEventListener",!1),s()(a()(n),"state",{currentTime:n.props.defaultCurrentTime}),s()(a()(n),"handleAudioCurrentTimeChange",(function(e){var t=e.target,r=n.props,a=r.isLeftTime,i=r.timeFormat,o=r.defaultCurrentTime;n.setState({currentTime:P(a?t.duration-t.currentTime:t.currentTime,t.duration,i)||o})})),s()(a()(n),"addAudioEventListeners",(function(){var e=n.props.audio;e&&!n.hasAddedAudioEventListener&&(n.audio=e,n.hasAddedAudioEventListener=!0,e.addEventListener("timeupdate",n.handleAudioCurrentTimeChange),e.addEventListener("loadedmetadata",n.handleAudioCurrentTimeChange))}));var r=t.audio,i=t.defaultCurrentTime,o=t.isLeftTime,u=t.timeFormat,c=i;return r&&(c=P(o?r.duration-r.currentTime:r.currentTime,r.duration,u)),n.state={currentTime:c},n}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.addAudioEventListeners()},n.componentDidUpdate=function(){this.addAudioEventListeners()},n.componentWillUnmount=function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioCurrentTimeChange),this.audio.removeEventListener("loadedmetadata",this.handleAudioCurrentTimeChange))},n.render=function(){return this.state.currentTime},t}(c.PureComponent),V=function(e){function t(t){var n;n=e.call(this,t)||this,s()(a()(n),"audio",void 0),s()(a()(n),"hasAddedAudioEventListener",!1),s()(a()(n),"state",{duration:n.props.audio?P(n.props.audio.duration,n.props.audio.duration,n.props.timeFormat):n.props.defaultDuration}),s()(a()(n),"handleAudioDurationChange",(function(e){var t=e.target,r=n.props,a=r.timeFormat,i=r.defaultDuration;n.setState({duration:P(t.duration,t.duration,a)||i})})),s()(a()(n),"addAudioEventListeners",(function(){var e=n.props.audio;e&&!n.hasAddedAudioEventListener&&(n.audio=e,n.hasAddedAudioEventListener=!0,e.addEventListener("durationchange",n.handleAudioDurationChange),e.addEventListener("abort",n.handleAudioDurationChange))}));var r=t.audio,i=t.timeFormat,o=t.defaultDuration;return n.state={duration:r?P(r.duration,r.duration,i):o},n}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.addAudioEventListeners()},n.componentDidUpdate=function(){this.addAudioEventListeners()},n.componentWillUnmount=function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.removeEventListener("abort",this.handleAudioDurationChange))},n.render=function(){return this.state.duration},t}(c.PureComponent),q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"audio",void 0),s()(a()(t),"hasAddedAudioEventListener",!1),s()(a()(t),"volumeBar",Object(c.createRef)()),s()(a()(t),"volumeAnimationTimer",0),s()(a()(t),"lastVolume",t.props.volume),s()(a()(t),"state",{currentVolumePos:(t.lastVolume/1*100||0).toFixed(2)+"%",hasVolumeAnimation:!1,isDraggingVolume:!1}),s()(a()(t),"getCurrentVolume",(function(e){var n=t.props.audio;if(!t.volumeBar.current)return{currentVolume:n.volume,currentVolumePos:t.state.currentVolumePos};var r,a,i=t.volumeBar.current.getBoundingClientRect(),o=i.width,u=F(e)-i.left;return u<0?(r=0,a="0%"):u>i.width?(r=1,a="100%"):(r=u/o,a=u/o*100+"%"),{currentVolume:r,currentVolumePos:a}})),s()(a()(t),"handleContextMenu",(function(e){e.preventDefault()})),s()(a()(t),"handleClickVolumeButton",(function(){var e=t.props.audio;e.volume>0?(t.lastVolume=e.volume,e.volume=0):e.volume=t.lastVolume})),s()(a()(t),"handleVolumnControlMouseOrTouchDown",(function(e){e.stopPropagation();var n=t.props.audio,r=t.getCurrentVolume(e.nativeEvent),a=r.currentVolume,i=r.currentVolumePos;n.volume=a,t.setState({isDraggingVolume:!0,currentVolumePos:i}),e.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",t.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",t.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",t.handleWindowMouseOrTouchMove),window.addEventListener("touchend",t.handleWindowMouseOrTouchUp))})),s()(a()(t),"handleWindowMouseOrTouchMove",(function(e){e instanceof MouseEvent&&e.preventDefault(),e.stopPropagation();var n=t.props.audio,r=window.getSelection();if(r&&"Range"===r.type&&r.empty(),t.state.isDraggingVolume){var a=t.getCurrentVolume(e),i=a.currentVolume,o=a.currentVolumePos;n.volume=i,t.setState({currentVolumePos:o})}})),s()(a()(t),"handleWindowMouseOrTouchUp",(function(e){e.stopPropagation(),t.setState({isDraggingVolume:!1}),e instanceof MouseEvent?(window.removeEventListener("mousemove",t.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",t.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",t.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",t.handleWindowMouseOrTouchUp))})),s()(a()(t),"handleAudioVolumeChange",(function(e){var n=t.state.isDraggingVolume,r=e.target.volume;(t.lastVolume>0&&0===r||0===t.lastVolume&&r>0)&&t.props.onMuteChange(),t.lastVolume=r,n||(t.setState({hasVolumeAnimation:!0,currentVolumePos:(r/1*100||0).toFixed(2)+"%"}),clearTimeout(t.volumeAnimationTimer),t.volumeAnimationTimer=setTimeout((function(){t.setState({hasVolumeAnimation:!1})}),100))})),t}o()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props.audio;e&&!this.hasAddedAudioEventListener&&(this.audio=e,this.hasAddedAudioEventListener=!0,e.addEventListener("volumechange",this.handleAudioVolumeChange))},n.componentWillUnmount=function(){this.audio&&this.hasAddedAudioEventListener&&this.audio.removeEventListener("volumechange",this.handleAudioVolumeChange),clearTimeout(this.volumeAnimationTimer)},n.render=function(){var e=this.props,t=e.audio,n=e.showFilledVolume,r=this.state,a=r.currentVolumePos,i=r.hasVolumeAnimation,o=(t||{}).volume;return l.a.createElement("div",{ref:this.volumeBar,onMouseDown:this.handleVolumnControlMouseOrTouchDown,onTouchStart:this.handleVolumnControlMouseOrTouchDown,onContextMenu:this.handleContextMenu,role:"progressbar","aria-label":"volume Control","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number((100*o).toFixed(0)),tabIndex:0,className:"rhap_volume-bar-area"},l.a.createElement("div",{className:"rhap_volume-bar"},l.a.createElement("div",{className:"rhap_volume-indicator",style:{left:a,transitionDuration:i?".1s":"0s"}}),n&&l.a.createElement("div",{className:"rhap_volume-filled",style:{width:a}})))},t}(c.Component);!function(e){e.CURRENT_TIME="CURRENT_TIME",e.CURRENT_LEFT_TIME="CURRENT_LEFT_TIME",e.PROGRESS_BAR="PROGRESS_BAR",e.DURATION="DURATION",e.ADDITIONAL_CONTROLS="ADDITIONAL_CONTROLS",e.MAIN_CONTROLS="MAIN_CONTROLS",e.VOLUME_CONTROLS="VOLUME_CONTROLS",e.LOOP="LOOP",e.VOLUME="VOLUME"}(z||(z={}));var $=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"audio",Object(c.createRef)()),s()(a()(t),"progressBar",Object(c.createRef)()),s()(a()(t),"container",Object(c.createRef)()),s()(a()(t),"lastVolume",t.props.volume),s()(a()(t),"listenTracker",void 0),s()(a()(t),"volumeAnimationTimer",void 0),s()(a()(t),"downloadProgressAnimationTimer",void 0),s()(a()(t),"togglePlay",(function(e){e.stopPropagation();var n=t.audio.current;(n.paused||n.ended)&&n.src?t.playAudioPromise():n.paused||n.pause()})),s()(a()(t),"playAudioPromise",(function(){var e=t.audio.current.play();e?e.then(null).catch((function(e){var n=t.props.onPlayError;n&&n(new Error(e))})):t.forceUpdate()})),s()(a()(t),"isPlaying",(function(){var e=t.audio.current;return!!e&&(!e.paused&&!e.ended)})),s()(a()(t),"handlePlay",(function(e){t.forceUpdate(),t.props.onPlay&&t.props.onPlay(e)})),s()(a()(t),"handlePause",(function(e){t.audio&&(t.forceUpdate(),t.props.onPause&&t.props.onPause(e))})),s()(a()(t),"handleEnded",(function(e){t.audio&&(t.forceUpdate(),t.props.onEnded&&t.props.onEnded(e))})),s()(a()(t),"handleAbort",(function(e){t.props.onAbort&&t.props.onAbort(e)})),s()(a()(t),"handleClickVolumeButton",(function(){var e=t.audio.current;e.volume>0?(t.lastVolume=e.volume,e.volume=0):e.volume=t.lastVolume})),s()(a()(t),"handleMuteChange",(function(){t.forceUpdate()})),s()(a()(t),"handleClickLoopButton",(function(){t.audio.current.loop=!t.audio.current.loop,t.forceUpdate()})),s()(a()(t),"handleClickRewind",(function(){var e=t.props,n=e.progressJumpSteps,r=e.progressJumpStep,a=n.backward||r;t.setJumpTime(-a)})),s()(a()(t),"handleClickForward",(function(){var e=t.props,n=e.progressJumpSteps,r=e.progressJumpStep,a=n.forward||r;t.setJumpTime(a)})),s()(a()(t),"setJumpTime",(function(e){var n=t.audio.current,r=n.duration,a=n.currentTime;if(n.readyState===n.HAVE_NOTHING||n.readyState===n.HAVE_METADATA||!isFinite(r)||!isFinite(a))return t.props.onChangeCurrentTimeError&&t.props.onChangeCurrentTimeError();var i=a+e/1e3;i<0?(n.currentTime=0,i=0):i>r?(n.currentTime=r,i=r):n.currentTime=i})),s()(a()(t),"setJumpVolume",(function(e){var n=t.audio.current.volume+e;n<0?n=0:n>1&&(n=1),t.audio.current.volume=n})),s()(a()(t),"handleKeyDown",(function(e){if(t.props.hasDefaultKeyBindings)switch(e.key){case" ":e.target!==t.container.current&&e.target!==t.progressBar.current||(e.preventDefault(),t.togglePlay(e));break;case"ArrowLeft":t.handleClickRewind();break;case"ArrowRight":t.handleClickForward();break;case"ArrowUp":e.preventDefault(),t.setJumpVolume(t.props.volumeJumpStep);break;case"ArrowDown":e.preventDefault(),t.setJumpVolume(-t.props.volumeJumpStep);break;case"l":t.handleClickLoopButton();break;case"m":t.handleClickVolumeButton()}})),s()(a()(t),"renderUIModules",(function(e){return e.map((function(e,n){return t.renderUIModule(e,n)}))})),s()(a()(t),"renderUIModule",(function(e,n){var r=t.props,a=r.defaultCurrentTime,i=r.progressUpdateInterval,o=r.showDownloadProgress,u=r.showFilledProgress,s=r.showFilledVolume,d=r.defaultDuration,p=r.customIcons,m=r.showSkipControls,b=r.onClickPrevious,w=r.onClickNext,O=r.onChangeCurrentTimeError,j=r.showJumpControls,S=r.customAdditionalControls,C=r.customVolumeControls,T=r.muted,I=r.timeFormat,D=r.volume,R=r.loop,F=r.mse;switch(e){case z.CURRENT_TIME:return l.a.createElement("div",{key:n,id:"rhap_current-time",className:"rhap_time rhap_current-time"},l.a.createElement(W,{audio:t.audio.current,isLeftTime:!1,defaultCurrentTime:a,timeFormat:I}));case z.CURRENT_LEFT_TIME:return l.a.createElement("div",{key:n,id:"rhap_current-left-time",className:"rhap_time rhap_current-left-time"},l.a.createElement(W,{audio:t.audio.current,isLeftTime:!0,defaultCurrentTime:a,timeFormat:I}));case z.PROGRESS_BAR:return l.a.createElement(U,{key:n,ref:t.progressBar,audio:t.audio.current,progressUpdateInterval:i,showDownloadProgress:o,showFilledProgress:u,onSeek:F&&F.onSeek,onChangeCurrentTimeError:O,srcDuration:F&&F.srcDuration});case z.DURATION:return l.a.createElement("div",{key:n,className:"rhap_time rhap_total-time"},F&&F.srcDuration?P(F.srcDuration,F.srcDuration,t.props.timeFormat):l.a.createElement(V,{audio:t.audio.current,defaultDuration:d,timeFormat:I}));case z.ADDITIONAL_CONTROLS:return l.a.createElement("div",{key:n,className:"rhap_additional-controls"},t.renderUIModules(S));case z.MAIN_CONTROLS:var M,L=t.isPlaying();return M=L?p.pause?p.pause:l.a.createElement(f.Icon,{icon:v.a}):p.play?p.play:l.a.createElement(f.Icon,{icon:h.a}),l.a.createElement("div",{key:n,className:"rhap_main-controls"},m&&l.a.createElement("button",{"aria-label":"Previous",className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:b},p.previous?p.previous:l.a.createElement(f.Icon,{icon:g.a})),j&&l.a.createElement("button",{"aria-label":"Rewind",className:"rhap_button-clear rhap_main-controls-button rhap_rewind-button",type:"button",onClick:t.handleClickRewind},p.rewind?p.rewind:l.a.createElement(f.Icon,{icon:k.a})),l.a.createElement("button",{"aria-label":L?"Pause":"Play",className:"rhap_button-clear rhap_main-controls-button rhap_play-pause-button",type:"button",onClick:t.togglePlay},M),j&&l.a.createElement("button",{"aria-label":"Forward",className:"rhap_button-clear rhap_main-controls-button rhap_forward-button",type:"button",onClick:t.handleClickForward},p.forward?p.forward:l.a.createElement(f.Icon,{icon:x.a})),m&&l.a.createElement("button",{"aria-label":"Skip",className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:w},p.next?p.next:l.a.createElement(f.Icon,{icon:y.a})));case z.VOLUME_CONTROLS:return l.a.createElement("div",{key:n,className:"rhap_volume-controls"},t.renderUIModules(C));case z.LOOP:var B,$=t.audio.current?t.audio.current.loop:R;return B=$?p.loop?p.loop:l.a.createElement(f.Icon,{icon:A.a}):p.loopOff?p.loopOff:l.a.createElement(f.Icon,{icon:N.a}),l.a.createElement("button",{key:n,"aria-label":$?"Enable Loop":"Disable Loop",className:"rhap_button-clear rhap_repeat-button",type:"button",onClick:t.handleClickLoopButton},B);case z.VOLUME:var H,G=(t.audio.current||{}).volume,K=void 0===G?T?0:D:G;return H=K?p.volume?p.volume:l.a.createElement(f.Icon,{icon:_.a}):p.volume?p.volumeMute:l.a.createElement(f.Icon,{icon:E.a}),l.a.createElement("div",{key:n,className:"rhap_volume-container"},l.a.createElement("button",{"aria-label":K?"Mute":"Unmute",onClick:t.handleClickVolumeButton,type:"button",className:"rhap_button-clear rhap_volume-button"},H),l.a.createElement(q,{audio:t.audio.current,volume:K,onMuteChange:t.handleMuteChange,showFilledVolume:s}));default:return Object(c.isValidElement)(e)?e.key?e:Object(c.cloneElement)(e,{key:n}):null}})),t}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.forceUpdate();var t=this.audio.current;this.props.muted?t.volume=0:t.volume=this.lastVolume,t.addEventListener("error",(function(t){e.props.onError&&e.props.onError(t)})),t.addEventListener("canplay",(function(t){e.props.onCanPlay&&e.props.onCanPlay(t)})),t.addEventListener("canplaythrough",(function(t){e.props.onCanPlayThrough&&e.props.onCanPlayThrough(t)})),t.addEventListener("play",this.handlePlay),t.addEventListener("abort",this.handleAbort),t.addEventListener("ended",this.handleEnded),t.addEventListener("playing",(function(t){e.props.onPlaying&&e.props.onPlaying(t)})),t.addEventListener("seeking",(function(t){e.props.onSeeking&&e.props.onSeeking(t)})),t.addEventListener("seeked",(function(t){e.props.onSeeked&&e.props.onSeeked(t)})),t.addEventListener("waiting",(function(t){e.props.onWaiting&&e.props.onWaiting(t)})),t.addEventListener("emptied",(function(t){e.props.onEmptied&&e.props.onEmptied(t)})),t.addEventListener("stalled",(function(t){e.props.onStalled&&e.props.onStalled(t)})),t.addEventListener("suspend",(function(t){e.props.onSuspend&&e.props.onSuspend(t)})),t.addEventListener("loadstart",(function(t){e.props.onLoadStart&&e.props.onLoadStart(t)})),t.addEventListener("loadedmetadata",(function(t){e.props.onLoadedMetaData&&e.props.onLoadedMetaData(t)})),t.addEventListener("loadeddata",(function(t){e.props.onLoadedData&&e.props.onLoadedData(t)})),t.addEventListener("pause",this.handlePause),t.addEventListener("timeupdate",L((function(t){e.props.onListen&&e.props.onListen(t)}),this.props.listenInterval)),t.addEventListener("volumechange",(function(t){e.props.onVolumeChange&&e.props.onVolumeChange(t)})),t.addEventListener("encrypted",(function(t){var n=e.props.mse;n&&n.onEcrypted&&n.onEcrypted(t)}))},n.componentDidUpdate=function(e){var t=this.props,n=t.src,r=t.autoPlayAfterSrcChange;e.src!==n&&(r?this.playAudioPromise():this.forceUpdate())},n.componentWillUnmount=function(){var e=this.audio.current;e&&(e.removeEventListener("play",this.handlePlay),e.removeEventListener("pause",this.handlePause),e.removeEventListener("abort",this.handleAbort),e.removeAttribute("src"),e.load())},n.render=function(){var e=this.props,t=e.className,n=e.src,r=e.loop,a=e.preload,i=e.autoPlay,o=e.crossOrigin,u=e.mediaGroup,s=e.header,c=e.footer,f=e.layout,d=e.customProgressBarSection,h=e.customControlsSection,p=e.children,v=e.style,m=this.audio.current?this.audio.current.loop:r;return l.a.createElement("div",{role:"group",tabIndex:0,"aria-label":"Audio Player",className:"rhap_container "+t,onKeyDown:this.handleKeyDown,ref:this.container,style:v},l.a.createElement("audio",{src:n,controls:!1,loop:m,autoPlay:i,preload:a,crossOrigin:o,mediaGroup:u,ref:this.audio},p),s&&l.a.createElement("div",{className:"rhap_header"},s),l.a.createElement("div",{className:"rhap_main "+R(f)},l.a.createElement("div",{className:"rhap_progress-section"},this.renderUIModules(d)),l.a.createElement("div",{className:"rhap_controls-section"},this.renderUIModules(h))),c&&l.a.createElement("div",{className:"rhap_footer"},c))},t}(c.Component);s()($,"defaultProps",{autoPlay:!1,autoPlayAfterSrcChange:!0,listenInterval:1e3,progressJumpStep:5e3,progressJumpSteps:{},volumeJumpStep:.1,loop:!1,muted:!1,preload:"auto",progressUpdateInterval:20,defaultCurrentTime:"--:--",defaultDuration:"--:--",timeFormat:"auto",volume:1,className:"",showJumpControls:!0,showSkipControls:!1,showDownloadProgress:!0,showFilledProgress:!0,showFilledVolume:!1,customIcons:{},customProgressBarSection:[z.CURRENT_TIME,z.PROGRESS_BAR,z.DURATION],customControlsSection:[z.ADDITIONAL_CONTROLS,z.MAIN_CONTROLS,z.VOLUME_CONTROLS],customAdditionalControls:[z.LOOP],customVolumeControls:[z.VOLUME],layout:"stacked",hasDefaultKeyBindings:!0});t.a=$},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(77),a=n(78).e,i=function(e,t){return"undefined"===typeof window?Promise.resolve():(r.b&&r.b.supports&&r.b.supports("color","var(--c)")?Object(r.d)():n.e(42).then(n.t.bind(null,771,7)).then((function(){return(r.n.$cssShim$=r.q.__cssshim)?r.n.$cssShim$.i():0}))).then((function(){return a(),Object(r.e)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[2,"click","onClick"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),t)}))};!function(){if("undefined"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(315),a=function(e,t){return Object(r.b)().then((function(){Object(r.c)([["pwa-camera-modal",[[1,"pwa-camera-modal",{present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[32,"keyup","handleBackdropKeyUp"]]]]]],t)}))};!function(){if(void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(174),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var y=b.prototype=new g;y.constructor=b,r(y,m.prototype),y.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:w.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var _=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case i:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),E(o,t,n,"",(function(e){return e}))):null!=o&&(j(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=E(u,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=E(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function N(){var e=T.current;if(null===e)throw Error(h(321));return e}var I={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error(h(143));return e}},t.Component=m,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)x.call(t,l)&&!O.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(5),a=n(174),i=n(527);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(v,e)||!h.call(p,e)&&(d.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=60103,k=60106,j=60107,_=60108,S=60114,E=60109,C=60110,A=60112,T=60113,N=60120,I=60115,D=60116,R=60121,F=60128,M=60129,P=60130,L=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;O=z("react.element"),k=z("react.portal"),j=z("react.fragment"),_=z("react.strict_mode"),S=z("react.profiler"),E=z("react.provider"),C=z("react.context"),A=z("react.forward_ref"),T=z("react.suspense"),N=z("react.suspense_list"),I=z("react.memo"),D=z("react.lazy"),R=z("react.block"),z("react.scope"),F=z("react.opaque.id"),M=z("react.debug_trace_mode"),P=z("react.offscreen"),L=z("react.legacy_hidden")}var B,U="function"===typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function V(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var q=!1;function $(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var a=s.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,u=i.length-1;1<=o&&0<=u&&a[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(a[o]!==i[u]){if(1!==o||1!==u)do{if(o--,0>--u||a[o]!==i[u])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function H(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 22:return e=$(e.type._render,!1);case 1:return e=$(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case S:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return G(e.type);case R:return G(e._render);case D:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ce(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function Oe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ye).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var ke=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function je(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Ae=null;function Te(e){if(e=ea(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=na(t),Ee(e.stateNode,e.type,t))}}function Ne(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function De(e,t){return e(t)}function Re(e,t,n,r,a){return e(t,n,r,a)}function Fe(){}var Me=De,Pe=!1,Le=!1;function ze(){null===Ce&&null===Ae||(Fe(),Ie())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=na(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(f)try{var We={};Object.defineProperty(We,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch(me){Ue=!1}function Ve(e,t,n,r,a,i,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var qe=!1,$e=null,He=!1,Ge=null,Ke={onError:function(e){qe=!0,$e=e}};function Xe(e,t,n,r,a,i,o,u,s){qe=!1,$e=null,Ve.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Qe(a),e;if(i===r)return Qe(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var u=!1,s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u){for(s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=pt(t,n,r,a,i),null!==t&&(null!==(t=ea(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=Zr(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ea(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){bt(e)&&n.delete(t)}function wt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ea(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&bt(ut)&&(ut=null),null!==st&&bt(st)&&(st=null),null!==ct&&bt(ct)&&(ct=null),lt.forEach(yt),ft.forEach(yt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,wt)))}function Ot(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&xt(ut,e),null!==st&&xt(st,e),null!==ct&&xt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)gt(n),null===n.blockedOn&&dt.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},_t={},St={};function Et(e){if(_t[e])return _t[e];if(!jt[e])return e;var t,n=jt[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return _t[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete jt.animationend.animation,delete jt.animationiteration.animation,delete jt.animationstart.animation),"TransitionEvent"in window||delete jt.transitionend.transition);var Ct=Et("animationend"),At=Et("animationiteration"),Tt=Et("animationstart"),Nt=Et("transitionend"),It=new Map,Dt=new Map,Rt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Dt.set(r,t),It.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Mt=8;function Pt(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==i)r=i,a=Mt=15;else if(0!==(i=134217727&n)){var s=i&~o;0!==s?(r=Pt(s),a=Mt):0!==(u&=i)&&(r=Pt(u),a=Mt)}else 0!==(i=n&~o)?(r=Pt(i),a=Mt):0!==u&&(r=Pt(u),a=Mt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Pt(t),a<=Mt)return t;Mt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-qt(t)),r|=e[n],t&=~a;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Bt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Bt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Ht|0)|0},$t=Math.log,Ht=Math.LN2;var Gt=i.unstable_UserBlockingPriority,Kt=i.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Pe||Fe();var a=Qt,i=Pe;Pe=!0;try{Re(a,e,t,n,r)}finally{(Pe=i)||ze()}}function Jt(e,t,n,r){Kt(Gt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var a;if(Xt)if((a=0===(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var i=Zt(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<ht.indexOf(e))return e=pt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,a),!0;case"dragenter":return st=mt(st,e,t,n,r,a),!0;case"mouseover":return ct=mt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ft.set(i,mt(ft.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Ir(e,t,r,null,n)}}}function Zt(e,t,n,r){var a=Se(r);if(null!==(a=Zr(a))){var i=Ye(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Je(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Ir(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:un,this.isPropagationStopped=un,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(dn),pn=a({},dn,{view:0,detail:0}),vn=sn(pn),mn=a({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=sn(mn),bn=sn(a({},mn,{dataTransfer:0})),yn=sn(a({},pn,{relatedTarget:0})),wn=sn(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=sn(a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),On=sn(a({},dn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Cn=sn(a({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=sn(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(a({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=sn(a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Dn=[9,13,27,32],Rn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Mn=f&&"TextEvent"in window&&!Fn,Pn=f&&(!Rn||Fn&&8<Fn&&11>=Fn),Ln=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function $n(e,t,n,r){Ne(r),0<(t=Rr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Kn(e){Sr(e,0)}function Xn(e){if(J(ta(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(f){var Qn;if(f){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];if($n(t,Gn,e,Se(e)),e=Kn,Pe)e(t);else{Pe=!0;try{De(e,t)}finally{Pe=!1,ze()}}}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function ir(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},sr=Object.prototype.hasOwnProperty;function cr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=f&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,br=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Rr(gr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(Rt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Or=0;Or<xr.length;Or++)Dt.set(xr[Or],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function _r(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,u,s,c){if(Xe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var l=$e;qe=!1,$e=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Sr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==i&&a.isPropagationStopped())break e;_r(a,u,c),i=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==i&&a.isPropagationStopped())break e;_r(a,u,c),i=s}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Er(e,t){var n=ra(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Cr]||(e[Cr]=!0,u.forEach((function(t){jr.has(t)||Tr(t,!1,e,null),Tr(t,!0,e,null)})))}function Tr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&jr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=ra(i),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(a|=4),Nr(i,e,a,t),o.add(u))}function Nr(e,t,n,r){var a=Dt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=Jt;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ir(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===a||8===u.nodeType&&u.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;o=o.return}for(;null!==u;){if(null===(o=Zr(u)))return;if(5===(s=o.tag)||6===s){r=i=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{Me(e,t,n)}finally{Le=!1,ze()}}((function(){var r=i,a=Se(n),o=[];e:{var u=It.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Ct:case At:case Tt:s=wn;break;case Nt:s=Nn;break;case"scroll":s=vn;break;case"wheel":s=In;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Be(p,d))&&l.push(Dr(p,v,h)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,a),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Jr])&&(s||u)&&(u=a.window===a?a:(u=a.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=gn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==s?u:ta(s),h=null==c?u:ta(c),(u=new l(v,p+"leave",s,n,a)).target=f,u.relatedTarget=h,v=null,Zr(a)===r&&((l=new l(d,p+"enter",c,n,a)).target=h,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,p=0,h=l=s;h;h=Fr(h))p++;for(h=0,v=d;v;v=Fr(v))h++;for(;0<p-h;)l=Fr(l),p--;for(;0<h-p;)d=Fr(d),h--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Fr(l),d=Fr(d)}l=null}else l=null;null!==s&&Mr(o,u,s,l,!1),null!==c&&null!==f&&Mr(o,f,c,l,!0)}if("select"===(s=(u=r?ta(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(qn(u))if(Jn)m=or;else{m=ar;var g=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ir);switch(m&&(m=m(e,r))?$n(o,m,n,a):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ae(u,"number",u.value)),g=r?ta(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,br=null);break;case"focusout":br=gr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,a)}var b;if(Rn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Pn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(b=rn()):(tn="value"in(en=a)?en.value:en.textContent,Wn=!0)),0<(g=Rr(r,y)).length&&(y=new On(y,e,null,n,a),o.push({event:y,listeners:g}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Rr(r,"onBeforeInput")).length&&(a=new On("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=b))}Sr(o,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Be(e,n))&&r.unshift(Dr(e,i,a)),null!=(i=Be(e,t))&&r.push(Dr(e,i,a))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,a?null!=(s=Be(n,i))&&o.unshift(Dr(n,s,u)):a||null!=(s=Be(n,i))&&o.push(Dr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Pr(){}var Lr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Vr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function $r(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Gr=0;var Kr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Kr,Yr="__reactProps$"+Kr,Jr="__reactContainer$"+Kr,Qr="__reactEvents$"+Kr;function Zr(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[Xr])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ea(e){return!(e=e[Xr]||e[Jr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ta(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function na(e){return e[Yr]||null}function ra(e){var t=e[Qr];return void 0===t&&(t=e[Qr]=new Set),t}var aa=[],ia=-1;function oa(e){return{current:e}}function ua(e){0>ia||(e.current=aa[ia],aa[ia]=null,ia--)}function sa(e,t){ia++,aa[ia]=e.current,e.current=t}var ca={},la=oa(ca),fa=oa(!1),da=ca;function ha(e,t){var n=e.type.contextTypes;if(!n)return ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function va(){ua(fa),ua(la)}function ma(e,t,n){if(la.current!==ca)throw Error(o(168));sa(la,t),sa(fa,n)}function ga(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,G(t)||"Unknown",i));return a({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ca,da=la.current,sa(la,e),sa(fa,fa.current),!0}function ya(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ga(e,t,da),r.__reactInternalMemoizedMergedChildContext=e,ua(fa),ua(la),sa(la,e)):ua(fa),sa(fa,n)}var wa=null,xa=null,Oa=i.unstable_runWithPriority,ka=i.unstable_scheduleCallback,ja=i.unstable_cancelCallback,_a=i.unstable_shouldYield,Sa=i.unstable_requestPaint,Ea=i.unstable_now,Ca=i.unstable_getCurrentPriorityLevel,Aa=i.unstable_ImmediatePriority,Ta=i.unstable_UserBlockingPriority,Na=i.unstable_NormalPriority,Ia=i.unstable_LowPriority,Da=i.unstable_IdlePriority,Ra={},Fa=void 0!==Sa?Sa:function(){},Ma=null,Pa=null,La=!1,za=Ea(),Ba=1e4>za?Ea:function(){return Ea()-za};function Ua(){switch(Ca()){case Aa:return 99;case Ta:return 98;case Na:return 97;case Ia:return 96;case Da:return 95;default:throw Error(o(332))}}function Wa(e){switch(e){case 99:return Aa;case 98:return Ta;case 97:return Na;case 96:return Ia;case 95:return Da;default:throw Error(o(332))}}function Va(e,t){return e=Wa(e),Oa(e,t)}function qa(e,t,n){return e=Wa(e),ka(e,t,n)}function $a(){if(null!==Pa){var e=Pa;Pa=null,ja(e)}Ha()}function Ha(){if(!La&&null!==Ma){La=!0;var e=0;try{var t=Ma;Va(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ma=null}catch(n){throw null!==Ma&&(Ma=Ma.slice(e+1)),ka(Aa,$a),n}finally{La=!1}}}var Ga=x.ReactCurrentBatchConfig;function Ka(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xa=oa(null),Ya=null,Ja=null,Qa=null;function Za(){Qa=Ja=Ya=null}function ei(e){var t=Xa.current;ua(Xa),e.type._context._currentValue=t}function ti(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ni(e,t){Ya=e,Qa=Ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ro=!0),e.firstContext=null)}function ri(e,t){if(Qa!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Qa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ja){if(null===Ya)throw Error(o(308));Ja=t,Ya.dependencies={lanes:0,firstContext:t,responders:null}}else Ja=Ja.next=t;return e._currentValue}var ai=!1;function ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function si(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,r){var i=e.updateQueue;ai=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==u&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(d=i.baseState,u=0,f=l=c=null;;){s=o.lane;var h=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,s);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(h,d,s):p)||void 0===s)break e;d=a({},d,s);break e;case 2:ai=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=h,c=d):f=f.next=h,u|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===f&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=f,Lu|=u,e.lanes=u,e.memoizedState=d}}function fi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var di=(new r.Component).refs;function hi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pi={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cs(),a=ls(e),i=ui(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),si(e,i),fs(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cs(),a=ls(e),i=ui(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),si(e,i),fs(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cs(),r=ls(e),a=ui(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),si(e,a),fs(e,r,n)}};function vi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(a,i))}function mi(e,t,n){var r=!1,a=ca,i=t.contextType;return"object"===typeof i&&null!==i?i=ri(i):(a=pa(t)?da:la.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ha(e,a):ca),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function gi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pi.enqueueReplaceState(t,t.state,null)}function bi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=di,ii(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=ri(i):(i=pa(t)?da:la.current,a.context=ha(e,i)),li(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(hi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&pi.enqueueReplaceState(a,a.state,null),li(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var yi=Array.isArray;function wi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===di&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xi(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Oi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Vs(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Gs(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=wi(e,t,n),r.return=e,r):((r=qs(n.type,n.key,n.props,null,e.mode,r)).ref=wi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ks(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=$s(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Gs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case O:return(n=qs(t.type,t.key,t.props,null,e.mode,n)).ref=wi(e,null,t),n.return=e,n;case k:return(t=Ks(t,e.mode,n)).return=e,t}if(yi(t)||W(t))return(t=$s(t,e.mode,n,null)).return=e,t;xi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case O:return n.key===a?n.type===j?f(e,t,n.props.children,r,a):c(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null}if(yi(n)||W(n))return null!==a?null:f(e,t,n,r,null);xi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case O:return e=e.get(null===r.key?n:r.key)||null,r.type===j?f(t,e,r.props.children,a,r.key):c(t,e,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(yi(r)||W(r))return f(t,e=e.get(n)||null,r,a,null);xi(t,r)}return null}function v(a,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(a,f,u[v],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(a,f),o=i(g,o,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===u.length)return n(a,f),c;if(null===f){for(;v<u.length;v++)null!==(f=d(a,u[v],s))&&(o=i(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(a,f);v<u.length;v++)null!==(m=p(f,a,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(a,e)})),c}function m(a,u,s,c){var l=W(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,g=null,b=s.next();null!==v&&!b.done;m++,b=s.next()){v.index>m?(g=v,v=null):g=v.sibling;var y=h(a,v,b.value,c);if(null===y){null===v&&(v=g);break}e&&v&&null===y.alternate&&t(a,v),u=i(y,u,m),null===f?l=y:f.sibling=y,f=y,v=g}if(b.done)return n(a,v),l;if(null===v){for(;!b.done;m++,b=s.next())null!==(b=d(a,b.value,c))&&(u=i(b,u,m),null===f?l=b:f.sibling=b,f=b);return l}for(v=r(a,v);!b.done;m++,b=s.next())null!==(b=p(v,a,m,b.value,c))&&(e&&null!==b.alternate&&v.delete(null===b.key?m:b.key),u=i(b,u,m),null===f?l=b:f.sibling=b,f=b);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,s){var c="object"===typeof i&&null!==i&&i.type===j&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case O:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(i.type===j){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=wi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===j?((r=$s(i.props.children,e.mode,s,i.key)).return=e,e=r):((s=qs(i.type,i.key,i.props,null,e.mode,s)).ref=wi(e,r,i),s.return=e,e=s)}return u(e);case k:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ks(i,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Gs(i,e.mode,s)).return=e,e=r),u(e);if(yi(i))return v(e,r,i,s);if(W(i))return m(e,r,i,s);if(l&&xi(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var ki=Oi(!0),ji=Oi(!1),_i={},Si=oa(_i),Ei=oa(_i),Ci=oa(_i);function Ai(e){if(e===_i)throw Error(o(174));return e}function Ti(e,t){switch(sa(Ci,t),sa(Ei,e),sa(Si,_i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ua(Si),sa(Si,t)}function Ni(){ua(Si),ua(Ei),ua(Ci)}function Ii(e){Ai(Ci.current);var t=Ai(Si.current),n=pe(t,e.type);t!==n&&(sa(Ei,e),sa(Si,n))}function Di(e){Ei.current===e&&(ua(Si),ua(Ei))}var Ri=oa(0);function Fi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mi=null,Pi=null,Li=!1;function zi(e,t){var n=Us(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ui(e){if(Li){var t=Pi;if(t){var n=t;if(!Bi(e,t)){if(!(t=$r(n.nextSibling))||!Bi(e,t))return e.flags=-1025&e.flags|2,Li=!1,void(Mi=e);zi(Mi,n)}Mi=e,Pi=$r(t.firstChild)}else e.flags=-1025&e.flags|2,Li=!1,Mi=e}}function Wi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Mi=e}function Vi(e){if(e!==Mi)return!1;if(!Li)return Wi(e),Li=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=Pi;t;)zi(e,t),t=$r(t.nextSibling);if(Wi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pi=$r(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pi=null}}else Pi=Mi?$r(e.stateNode.nextSibling):null;return!0}function qi(){Pi=Mi=null,Li=!1}var $i=[];function Hi(){for(var e=0;e<$i.length;e++)$i[e]._workInProgressVersionPrimary=null;$i.length=0}var Gi=x.ReactCurrentDispatcher,Ki=x.ReactCurrentBatchConfig,Xi=0,Yi=null,Ji=null,Qi=null,Zi=!1,eo=!1;function to(){throw Error(o(321))}function no(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function ro(e,t,n,r,a,i){if(Xi=i,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gi.current=null===e||null===e.memoizedState?To:No,e=n(r,a),eo){i=0;do{if(eo=!1,!(25>i))throw Error(o(301));i+=1,Qi=Ji=null,t.updateQueue=null,Gi.current=Io,e=n(r,a)}while(eo)}if(Gi.current=Ao,t=null!==Ji&&null!==Ji.next,Xi=0,Qi=Ji=Yi=null,Zi=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qi?Yi.memoizedState=Qi=e:Qi=Qi.next=e,Qi}function io(){if(null===Ji){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=Ji.next;var t=null===Qi?Yi.memoizedState:Qi.next;if(null!==t)Qi=t,Ji=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ji=e).memoizedState,baseState:Ji.baseState,baseQueue:Ji.baseQueue,queue:Ji.queue,next:null},null===Qi?Yi.memoizedState=Qi=e:Qi=Qi.next=e}return Qi}function oo(e,t){return"function"===typeof t?t(e):t}function uo(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ji,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var u=a.next;a.next=i.next,i.next=u}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=u=i=null,c=a;do{var l=c.lane;if((Xi&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,i=r):s=s.next=f,Yi.lanes|=l,Lu|=l}c=c.next}while(null!==c&&c!==a);null===s?i=r:s.next=u,ur(r,t.memoizedState)||(Ro=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function so(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var u=a=a.next;do{i=e(i,u.action),u=u.next}while(u!==a);ur(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function co(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Xi&e)===e)&&(t._workInProgressVersionPrimary=r,$i.push(t))),e)return n(t._source);throw $i.push(t),Error(o(350))}function lo(e,t,n,r){var a=Tu;if(null===a)throw Error(o(349));var i=t._getVersion,u=i(t._source),s=Gi.current,c=s.useState((function(){return co(a,t,n)})),l=c[1],f=c[0];c=Qi;var d=e.memoizedState,h=d.refs,p=h.getSnapshot,v=d.source;d=d.subscribe;var m=Yi;return e.memoizedState={refs:h,source:t,subscribe:r},s.useEffect((function(){h.getSnapshot=n,h.setSnapshot=l;var e=i(t._source);if(!ur(u,e)){e=n(t._source),ur(f,e)||(l(e),e=ls(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var s=31-qt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=ls(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),ur(p,n)&&ur(v,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:f}).dispatch=l=Co.bind(null,Yi,e),c.queue=e,c.baseQueue=null,f=co(a,t,n),c.memoizedState=c.baseState=f),f}function fo(e,t,n){return lo(io(),e,t,n)}function ho(e){var t=ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Co.bind(null,Yi,e),[t.memoizedState,e]}function po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Yi.updateQueue)?(t={lastEffect:null},Yi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(e){return e={current:e},ao().memoizedState=e}function mo(){return io().memoizedState}function go(e,t,n,r){var a=ao();Yi.flags|=e,a.memoizedState=po(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var a=io();r=void 0===r?null:r;var i=void 0;if(null!==Ji){var o=Ji.memoizedState;if(i=o.destroy,null!==r&&no(r,o.deps))return void po(t,n,i,r)}Yi.flags|=e,a.memoizedState=po(1|t,n,i,r)}function yo(e,t){return go(516,4,e,t)}function wo(e,t){return bo(516,4,e,t)}function xo(e,t){return bo(4,2,e,t)}function Oo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Oo.bind(null,t,e),n)}function jo(){}function _o(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function So(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Eo(e,t){var n=Ua();Va(98>n?98:n,(function(){e(!0)})),Va(97<n?97:n,(function(){var n=Ki.transition;Ki.transition=1;try{e(!1),t()}finally{Ki.transition=n}}))}function Co(e,t,n){var r=cs(),a=ls(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Yi||null!==o&&o===Yi)eo=Zi=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(i.eagerReducer=o,i.eagerState=s,ur(s,u))return}catch(c){}fs(e,a,r)}}var Ao={readContext:ri,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},To={readContext:ri,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:ri,useEffect:yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,go(4,2,Oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Co.bind(null,Yi,e),[r.memoizedState,e]},useRef:vo,useState:ho,useDebugValue:jo,useDeferredValue:function(e){var t=ho(e),n=t[0],r=t[1];return yo((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=ho(!1),t=e[0];return vo(e=Eo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ao();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lo(r,e,t,n)},useOpaqueIdentifier:function(){if(Li){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Gr++).toString(36))),Error(o(355))})),n=ho(t)[1];return 0===(2&Yi.mode)&&(Yi.flags|=516,po(5,(function(){n("r:"+(Gr++).toString(36))}),void 0,null)),t}return ho(t="r:"+(Gr++).toString(36)),t},unstable_isNewReconciler:!1},No={readContext:ri,useCallback:_o,useContext:ri,useEffect:wo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:So,useReducer:uo,useRef:mo,useState:function(){return uo(oo)},useDebugValue:jo,useDeferredValue:function(e){var t=uo(oo),n=t[0],r=t[1];return wo((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=uo(oo)[0];return[mo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return uo(oo)[0]},unstable_isNewReconciler:!1},Io={readContext:ri,useCallback:_o,useContext:ri,useEffect:wo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:So,useReducer:so,useRef:mo,useState:function(){return so(oo)},useDebugValue:jo,useDeferredValue:function(e){var t=so(oo),n=t[0],r=t[1];return wo((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=so(oo)[0];return[mo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Do=x.ReactCurrentOwner,Ro=!1;function Fo(e,t,n,r){t.child=null===e?ji(t,null,n,r):ki(t,e.child,n,r)}function Mo(e,t,n,r,a){n=n.render;var i=t.ref;return ni(t,a),r=ro(e,t,n,r,i,a),null===e||Ro?(t.flags|=1,Fo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,nu(e,t,a))}function Po(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qs(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Lo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)?nu(e,t,i):(t.flags|=1,(e=Vs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Lo(e,t,n,r,a,i){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Ro=!1,0===(i&a))return t.lanes=e.lanes,nu(e,t,i);0!==(16384&e.flags)&&(Ro=!0)}return Uo(e,t,n,r,i)}function zo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},ys(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ys(t,e),null;t.memoizedState={baseLanes:0},ys(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ys(t,r);return Fo(e,t,a,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Uo(e,t,n,r,a){var i=pa(n)?da:la.current;return i=ha(t,i),ni(t,a),n=ro(e,t,n,r,i,a),null===e||Ro?(t.flags|=1,Fo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,nu(e,t,a))}function Wo(e,t,n,r,a){if(pa(n)){var i=!0;ba(t)}else i=!1;if(ni(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mi(t,n,r),bi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ri(c):c=ha(t,c=pa(n)?da:la.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&gi(t,o,r,c),ai=!1;var d=t.memoizedState;o.state=d,li(t,r,o,a),s=t.memoizedState,u!==r||d!==s||fa.current||ai?("function"===typeof l&&(hi(t,n,l,r),s=t.memoizedState),(u=ai||vi(t,n,u,r,d,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,oi(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ka(t.type,u),o.props=c,f=t.pendingProps,d=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=ri(s):s=ha(t,s=pa(n)?da:la.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||d!==s)&&gi(t,o,r,s),ai=!1,d=t.memoizedState,o.state=d,li(t,r,o,a);var p=t.memoizedState;u!==f||d!==p||fa.current||ai?("function"===typeof h&&(hi(t,n,h,r),p=t.memoizedState),(c=ai||vi(t,n,c,r,d,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Vo(e,t,n,r,i,a)}function Vo(e,t,n,r,a,i){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&ya(t,n,!1),nu(e,t,i);r=t.stateNode,Do.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,u,i)):Fo(e,t,u,i),t.memoizedState=r.state,a&&ya(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ma(0,t.context,!1),Ti(e,t.containerInfo)}var $o,Ho,Go,Ko={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,a=t.pendingProps,i=Ri.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),sa(Ri,1&i),null===e?(void 0!==a.fallback&&Ui(t),e=a.children,i=a.fallback,o?(e=Yo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ko,e):"number"===typeof a.unstable_expectedLoadTime?(e=Yo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ko,t.lanes=33554432,e):((n=Hs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=Qo(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Ko,a):(n=Jo(e,t,a.children,n),t.memoizedState=null,n))}function Yo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Hs(t,a,0,null),n=$s(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Jo(e,t,n,r){var a=e.child;return e=a.sibling,n=Vs(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qo(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Vs(o,u),null!==e?r=Vs(e,r):(r=$s(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Zo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ti(e.return,t)}function eu(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function tu(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ri.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zo(e,n);else if(19===e.tag)Zo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(sa(Ri,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Fi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),eu(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Fi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}eu(t,!0,n,null,i,t.lastEffect);break;case"together":eu(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function nu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Vs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ru(e,t){if(!Li)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function au(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pa(t.type)&&va(),null;case 3:return Ni(),ua(fa),ua(la),Hi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Vi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Di(t);var i=Ai(Ci.current);if(n=t.type,null!==e&&null!=t.stateNode)Ho(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ai(Si.current),Vi(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Yr]=u,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Er(kr[e],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":ee(r,u),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Er("invalid",r);break;case"textarea":se(r,u),Er("invalid",r)}for(var c in je(n,u),e=null,u)u.hasOwnProperty(c)&&(i=u[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):s.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Er("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Pr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=he(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Yr]=r,$o(e,t),t.stateNode=e,c=_e(n,r),n){case"dialog":Er("cancel",e),Er("close",e),i=r;break;case"iframe":case"object":case"embed":Er("load",e),i=r;break;case"video":case"audio":for(i=0;i<kr.length;i++)Er(kr[i],e);i=r;break;case"source":Er("error",e),i=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),i=r;break;case"details":Er("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Er("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Er("invalid",e);break;case"textarea":se(e,r),i=ue(e,r),Er("invalid",e);break;default:i=r}je(n,i);var l=i;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?Oe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&be(e,f):"number"===typeof f&&be(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Er("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Pr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Go(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ai(Ci.current),Ai(Si.current),Vi(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return ua(Ri),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Vi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ri.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Tu||0===(134217727&Lu)&&0===(134217727&zu)||vs(Tu,Iu))),(r||n)&&(t.flags|=4),null);case 4:return Ni(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ei(t),null;case 17:return pa(t.type)&&va(),null;case 19:if(ua(Ri),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ru(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fi(e))){for(t.flags|=64,ru(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return sa(Ri,1&Ri.current|2),t.child}e=e.sibling}null!==r.tail&&Ba()>Vu&&(t.flags|=64,u=!0,ru(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fi(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ru(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Li)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ba()-r.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=64,u=!0,ru(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ba(),n.sibling=null,t=Ri.current,sa(Ri,u?1&t|2:1&t),n):null;case 23:case 24:return ws(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function iu(e){switch(e.tag){case 1:pa(e.type)&&va();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ni(),ua(fa),ua(la),Hi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Di(e),null;case 13:return ua(Ri),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ua(Ri),null;case 4:return Ni(),null;case 10:return ei(e),null;case 23:case 24:return ws(),null;default:return null}}function ou(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}$o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ai(Si.current);var o,u=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),u=[];break;case"option":i=ie(e,i),r=ie(e,r),u=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),u=[];break;case"textarea":i=ue(e,i),r=ue(e,r),u=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Pr)}for(f in je(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Er("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===F?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Go=function(e,t,n,r){n!==r&&(t.flags|=4)};var su="function"===typeof WeakMap?WeakMap:Map;function cu(e,t,n){(n=ui(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Ku=r),uu(0,t)},n}function lu(e,t,n){(n=ui(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return uu(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),uu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fu="function"===typeof WeakSet?WeakSet:Set;function du(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ps(e,n)}else t.current=null}function hu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ka(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function pu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Rs(n,e),Ds(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ka(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ot(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function vu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=xe("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mu(e,t){if(xa&&"function"===typeof xa.onCommitFiberUnmount)try{xa.onCommitFiberUnmount(wa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Rs(t,n);else{r=t;try{a()}catch(i){Ps(r,i)}}n=n.next}while(n!==e)}break;case 1:if(du(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Ps(t,i)}break;case 5:du(t);break;case 4:Ou(e,t)}}function gu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function yu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?wu(e,n,t):xu(e,n,t)}function wu(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pr));else if(4!==r&&null!==(e=e.child))for(wu(e,t,n),e=e.sibling;null!==e;)wu(e,t,n),e=e.sibling}function xu(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Ou(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var u=e,s=a,c=s;;)if(mu(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=a.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(mu(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function ku(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Yr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),_e(e,a),t=_e(e,r),a=0;a<i.length;a+=2){var u=i[a],s=i[a+1];"style"===u?Oe(n,s):"dangerouslySetInnerHTML"===u?ge(n,s):"children"===u?be(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Ot(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Wu=Ba(),vu(t.child,!0)),void ju(t);case 19:return void ju(t);case 17:return;case 23:case 24:return void vu(t,null!==t.memoizedState)}throw Error(o(163))}function ju(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fu),t.forEach((function(t){var r=zs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _u(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Su=Math.ceil,Eu=x.ReactCurrentDispatcher,Cu=x.ReactCurrentOwner,Au=0,Tu=null,Nu=null,Iu=0,Du=0,Ru=oa(0),Fu=0,Mu=null,Pu=0,Lu=0,zu=0,Bu=0,Uu=null,Wu=0,Vu=1/0;function qu(){Vu=Ba()+500}var $u,Hu=null,Gu=!1,Ku=null,Xu=null,Yu=!1,Ju=null,Qu=90,Zu=[],es=[],ts=null,ns=0,rs=null,as=-1,is=0,os=0,us=null,ss=!1;function cs(){return 0!==(48&Au)?Ba():-1!==as?as:as=Ba()}function ls(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ua()?1:2;if(0===is&&(is=Pu),0!==Ga.transition){0!==os&&(os=null!==Uu?Uu.pendingLanes:0),e=is;var t=4186112&~os;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ua(),0!==(4&Au)&&98===e?e=Bt(12,is):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),is),e}function fs(e,t,n){if(50<ns)throw ns=0,rs=null,Error(o(185));if(null===(e=ds(e,t)))return null;Vt(e,t,n),e===Tu&&(zu|=t,4===Fu&&vs(e,Iu));var r=Ua();1===t?0!==(8&Au)&&0===(48&Au)?ms(e):(hs(e,n),0===Au&&(qu(),$a())):(0===(4&Au)||98!==r&&99!==r||(null===ts?ts=new Set([e]):ts.add(e)),hs(e,n)),Uu=e}function ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function hs(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-qt(u),c=1<<s,l=i[s];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Pt(c);var f=Mt;i[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Lt(e,e===Tu?Iu:0),t=Mt,0===r)null!==n&&(n!==Ra&&ja(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ra&&ja(n)}15===t?(n=ms.bind(null,e),null===Ma?(Ma=[n],Pa=ka(Aa,Ha)):Ma.push(n),n=Ra):14===t?n=qa(99,ms.bind(null,e)):n=qa(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),ps.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ps(e){if(as=-1,os=is=0,0!==(48&Au))throw Error(o(327));var t=e.callbackNode;if(Is()&&e.callbackNode!==t)return null;var n=Lt(e,e===Tu?Iu:0);if(0===n)return null;var r=n,a=Au;Au|=16;var i=ks();for(Tu===e&&Iu===r||(qu(),xs(e,r));;)try{Ss();break}catch(s){Os(e,s)}if(Za(),Eu.current=i,Au=a,null!==Nu?r=0:(Tu=null,Iu=0,r=Fu),0!==(Pu&zu))xs(e,0);else if(0!==r){if(2===r&&(Au|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=zt(e))&&(r=js(e,n))),1===r)throw t=Mu,xs(e,0),vs(e,n),hs(e,Ba()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:As(e);break;case 3:if(vs(e,n),(62914560&n)===n&&10<(r=Wu+500-Ba())){if(0!==Lt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){cs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Wr(As.bind(null,e),r);break}As(e);break;case 4:if(vs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var u=31-qt(n);i=1<<u,(u=r[u])>a&&(a=u),n&=~i}if(n=a,10<(n=(120>(n=Ba()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Su(n/1960))-n)){e.timeoutHandle=Wr(As.bind(null,e),n);break}As(e);break;case 5:As(e);break;default:throw Error(o(329))}}return hs(e,Ba()),e.callbackNode===t?ps.bind(null,e):null}function vs(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function ms(e){if(0!==(48&Au))throw Error(o(327));if(Is(),e===Tu&&0!==(e.expiredLanes&Iu)){var t=Iu,n=js(e,t);0!==(Pu&zu)&&(n=js(e,t=Lt(e,t)))}else n=js(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Au|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=zt(e))&&(n=js(e,t))),1===n)throw n=Mu,xs(e,0),vs(e,t),hs(e,Ba()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,As(e),hs(e,Ba()),null}function gs(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(qu(),$a())}}function bs(e,t){var n=Au;Au&=-2,Au|=8;try{return e(t)}finally{0===(Au=n)&&(qu(),$a())}}function ys(e,t){sa(Ru,Du),Du|=t,Pu|=t}function ws(){Du=Ru.current,ua(Ru)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Vr(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&va();break;case 3:Ni(),ua(fa),ua(la),Hi();break;case 5:Di(r);break;case 4:Ni();break;case 13:case 19:ua(Ri);break;case 10:ei(r);break;case 23:case 24:ws()}n=n.return}Tu=e,Nu=Vs(e.current,null),Iu=Du=Pu=t,Fu=0,Mu=null,Bu=zu=Lu=0}function Os(e,t){for(;;){var n=Nu;try{if(Za(),Gi.current=Ao,Zi){for(var r=Yi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Zi=!1}if(Xi=0,Qi=Ji=Yi=null,eo=!1,Cu.current=null,null===n||null===n.return){Fu=1,Mu=t,Nu=null;break}e:{var i=e,o=n.return,u=n,s=t;if(t=Iu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ri.current),d=o;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=d.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(h){var m=d.updateQueue;if(null===m){var g=new Set;g.add(c),d.updateQueue=g}else m.add(c);if(0===(2&d.mode)){if(d.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var b=ui(-1,1);b.tag=2,si(u,b)}u.lanes|=1;break e}s=void 0,u=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new su,s=new Set,y.set(c,s)):void 0===(s=y.get(c))&&(s=new Set,y.set(c,s)),!s.has(u)){s.add(u);var w=Ls.bind(null,i,c,u);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=ou(s,u),d=o;do{switch(d.tag){case 3:i=s,d.flags|=4096,t&=-t,d.lanes|=t,ci(d,cu(0,i,t));break e;case 1:i=s;var x=d.type,O=d.stateNode;if(0===(64&d.flags)&&("function"===typeof x.getDerivedStateFromError||null!==O&&"function"===typeof O.componentDidCatch&&(null===Xu||!Xu.has(O)))){d.flags|=4096,t&=-t,d.lanes|=t,ci(d,lu(d,i,t));break e}}d=d.return}while(null!==d)}Cs(n)}catch(k){t=k,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function ks(){var e=Eu.current;return Eu.current=Ao,null===e?Ao:e}function js(e,t){var n=Au;Au|=16;var r=ks();for(Tu===e&&Iu===t||xs(e,t);;)try{_s();break}catch(a){Os(e,a)}if(Za(),Au=n,Eu.current=r,null!==Nu)throw Error(o(261));return Tu=null,Iu=0,Fu}function _s(){for(;null!==Nu;)Es(Nu)}function Ss(){for(;null!==Nu&&!_a();)Es(Nu)}function Es(e){var t=$u(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?Cs(e):Nu=t,Cu.current=null}function Cs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=au(n,t,Du)))return void(Nu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Du)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=iu(t)))return n.flags&=2047,void(Nu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Fu&&(Fu=5)}function As(e){var t=Ua();return Va(99,Ts.bind(null,e,t)),null}function Ts(e,t){do{Is()}while(null!==Ju);if(0!==(48&Au))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<i;){var c=31-qt(i),l=1<<c;a[c]=0,u[c]=-1,s[c]=-1,i&=~l}if(null!==ts&&0===(24&r)&&ts.has(e)&&ts.delete(e),e===Tu&&(Nu=Tu=null,Iu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Au,Au|=32,Cu.current=null,Lr=Xt,pr(u=hr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,d=-1,h=-1,p=0,v=0,m=u,g=null;t:for(;;){for(var b;m!==s||0!==i&&3!==m.nodeType||(d=f+i),m!==c||0!==l&&3!==m.nodeType||(h=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(b=m.firstChild);)g=m,m=b;for(;;){if(m===u)break t;if(g===s&&++p===i&&(d=f),g===c&&++v===l&&(h=f),null!==(b=m.nextSibling))break;g=(m=g).parentNode}m=b}s=-1===d||-1===h?null:{start:d,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;zr={focusedElem:u,selectionRange:s},Xt=!1,us=null,ss=!1,Hu=r;do{try{Ns()}catch(S){if(null===Hu)throw Error(o(330));Ps(Hu,S),Hu=Hu.nextEffect}}while(null!==Hu);us=null,Hu=r;do{try{for(u=e;null!==Hu;){var y=Hu.flags;if(16&y&&be(Hu.stateNode,""),128&y){var w=Hu.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&y){case 2:yu(Hu),Hu.flags&=-3;break;case 6:yu(Hu),Hu.flags&=-3,ku(Hu.alternate,Hu);break;case 1024:Hu.flags&=-1025;break;case 1028:Hu.flags&=-1025,ku(Hu.alternate,Hu);break;case 4:ku(Hu.alternate,Hu);break;case 8:Ou(u,s=Hu);var O=s.alternate;gu(s),null!==O&&gu(O)}Hu=Hu.nextEffect}}catch(S){if(null===Hu)throw Error(o(330));Ps(Hu,S),Hu=Hu.nextEffect}}while(null!==Hu);if(x=zr,w=hr(),y=x.focusedElem,u=x.selectionRange,w!==y&&y&&y.ownerDocument&&dr(y.ownerDocument.documentElement,y)){null!==u&&pr(y)&&(w=u.start,void 0===(x=u.end)&&(x=w),"selectionStart"in y?(y.selectionStart=w,y.selectionEnd=Math.min(x,y.value.length)):(x=(w=y.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),s=y.textContent.length,O=Math.min(u.start,s),u=void 0===u.end?O:Math.min(u.end,s),!x.extend&&O>u&&(s=u,u=O,O=s),s=fr(y,O),i=fr(y,u),s&&i&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&((w=w.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),O>u?(x.addRange(w),x.extend(i.node,i.offset)):(w.setEnd(i.node,i.offset),x.addRange(w))))),w=[];for(x=y;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<w.length;y++)(x=w[y]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Lr,zr=Lr=null,e.current=n,Hu=r;do{try{for(y=e;null!==Hu;){var k=Hu.flags;if(36&k&&pu(y,Hu.alternate,Hu),128&k){w=void 0;var j=Hu.ref;if(null!==j){var _=Hu.stateNode;switch(Hu.tag){case 5:w=_;break;default:w=_}"function"===typeof j?j(w):j.current=w}}Hu=Hu.nextEffect}}catch(S){if(null===Hu)throw Error(o(330));Ps(Hu,S),Hu=Hu.nextEffect}}while(null!==Hu);Hu=null,Fa(),Au=a}else e.current=n;if(Yu)Yu=!1,Ju=e,Qu=t;else for(Hu=r;null!==Hu;)t=Hu.nextEffect,Hu.nextEffect=null,8&Hu.flags&&((k=Hu).sibling=null,k.stateNode=null),Hu=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===rs?ns++:(ns=0,rs=e):ns=0,n=n.stateNode,xa&&"function"===typeof xa.onCommitFiberRoot)try{xa.onCommitFiberRoot(wa,n,void 0,64===(64&n.current.flags))}catch(S){}if(hs(e,Ba()),Gu)throw Gu=!1,e=Ku,Ku=null,e;return 0!==(8&Au)||$a(),null}function Ns(){for(;null!==Hu;){var e=Hu.alternate;ss||null===us||(0!==(8&Hu.flags)?et(Hu,us)&&(ss=!0):13===Hu.tag&&_u(e,Hu)&&et(Hu,us)&&(ss=!0));var t=Hu.flags;0!==(256&t)&&hu(e,Hu),0===(512&t)||Yu||(Yu=!0,qa(97,(function(){return Is(),null}))),Hu=Hu.nextEffect}}function Is(){if(90!==Qu){var e=97<Qu?97:Qu;return Qu=90,Va(e,Fs)}return!1}function Ds(e,t){Zu.push(t,e),Yu||(Yu=!0,qa(97,(function(){return Is(),null})))}function Rs(e,t){es.push(t,e),Yu||(Yu=!0,qa(97,(function(){return Is(),null})))}function Fs(){if(null===Ju)return!1;var e=Ju;if(Ju=null,0!==(48&Au))throw Error(o(331));var t=Au;Au|=32;var n=es;es=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],u=a.destroy;if(a.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===i)throw Error(o(330));Ps(i,c)}}for(n=Zu,Zu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var s=a.create;a.destroy=s()}catch(c){if(null===i)throw Error(o(330));Ps(i,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Au=t,$a(),!0}function Ms(e,t,n){si(e,t=cu(0,t=ou(n,t),1)),t=cs(),null!==(e=ds(e,1))&&(Vt(e,1,t),hs(e,t))}function Ps(e,t){if(3===e.tag)Ms(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ms(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var a=lu(n,e=ou(t,e),1);if(si(n,a),a=cs(),null!==(n=ds(n,1)))Vt(n,1,a),hs(n,a);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Ls(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cs(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(Iu&n)===n&&(4===Fu||3===Fu&&(62914560&Iu)===Iu&&500>Ba()-Wu?xs(e,0):Bu|=n),hs(e,t)}function zs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ua()?1:2:(0===is&&(is=Pu),0===(t=Ut(62914560&~is))&&(t=4194304))),n=cs(),null!==(e=ds(e,t))&&(Vt(e,t,n),hs(e,n))}function Bs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(e,t,n,r){return new Bs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vs(e,t){var n=e.alternate;return null===n?((n=Us(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qs(e,t,n,r,a,i){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case j:return $s(n.children,a,i,t);case M:u=8,a|=16;break;case _:u=8,a|=1;break;case S:return(e=Us(12,n,t,8|a)).elementType=S,e.type=S,e.lanes=i,e;case T:return(e=Us(13,n,t,a)).type=T,e.elementType=T,e.lanes=i,e;case N:return(e=Us(19,n,t,a)).elementType=N,e.lanes=i,e;case P:return Hs(n,a,i,t);case L:return(e=Us(24,n,t,a)).elementType=L,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case C:u=9;break e;case A:u=11;break e;case I:u=14;break e;case D:u=16,r=null;break e;case R:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Us(u,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function $s(e,t,n,r){return(e=Us(7,e,r,t)).lanes=n,e}function Hs(e,t,n,r){return(e=Us(23,e,r,t)).elementType=P,e.lanes=n,e}function Gs(e,t,n){return(e=Us(6,e,null,t)).lanes=n,e}function Ks(e,t,n){return(t=Us(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.mutableSourceEagerHydrationData=null}function Ys(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Js(e,t,n,r){var a=t.current,i=cs(),u=ls(a);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(pa(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(pa(c)){n=ga(n,c,s);break e}}n=s}else n=ca;return null===t.context?t.context=n:t.pendingContext=n,(t=ui(i,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),si(a,t),fs(a,u,i),u}function Qs(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Zs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Zs(e,t),(e=e.alternate)&&Zs(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Us(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ii(t),e[Jr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var u=a;a=function(){var e=Qs(o);u.call(e)}}Js(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var s=a;a=function(){var e=Qs(o);s.call(e)}}bs((function(){Js(t,o,e,a)}))}return Qs(o)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(o(200));return Ys(e,t,null,n)}$u=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fa.current)Ro=!0;else{if(0===(n&r)){switch(Ro=!1,t.tag){case 3:qo(t),qi();break;case 5:Ii(t);break;case 1:pa(t.type)&&ba(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;sa(Xa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(sa(Ri,1&Ri.current),null!==(t=nu(e,t,n))?t.sibling:null);sa(Ri,1&Ri.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return tu(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),sa(Ri,Ri.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return nu(e,t,n)}Ro=0!==(16384&e.flags)}else Ro=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ha(t,la.current),ni(t,n),a=ro(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pa(r)){var i=!0;ba(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ii(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&hi(t,r,u,e),a.updater=pi,t.stateNode=a,a._reactInternals=t,bi(t,r,e,n),t=Vo(null,t,r,!0,i,n)}else t.tag=0,Fo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(a),e=Ka(a,e),i){case 0:t=Uo(null,t,a,e,n);break e;case 1:t=Wo(null,t,a,e,n);break e;case 11:t=Mo(null,t,a,e,n);break e;case 14:t=Po(null,t,a,Ka(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Uo(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 1:return r=t.type,a=t.pendingProps,Wo(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,oi(e,t),li(t,r,null,n),(r=t.memoizedState.element)===a)qi(),t=nu(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Pi=$r(t.stateNode.containerInfo.firstChild),Mi=t,i=Li=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],$i.push(i);for(n=ji(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),qi();t=t.child}return t;case 5:return Ii(t),null===e&&Ui(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,u=a.children,Ur(r,a)?u=null:null!==i&&Ur(r,i)&&(t.flags|=16),Bo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ui(t),null;case 13:return Xo(e,t,n);case 4:return Ti(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ki(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Mo(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,u=t.memoizedProps,i=a.value;var s=t.type._context;if(sa(Xa,s._currentValue),s._currentValue=i,null!==u)if(s=u.value,0===(i=ur(s,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,i):1073741823))){if(u.children===a.children&&!fa.current){t=nu(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===s.tag&&((l=ui(-1,n&-n)).tag=2,si(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ti(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ni(t,n),r=r(a=ri(a,i.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return i=Ka(a=t.type,t.pendingProps),Po(e,t,a,i=Ka(a.type,i),r,n);case 15:return Lo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ka(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pa(r)?(e=!0,ba(t)):e=!1,ni(t,n),mi(t,r,a),bi(t,r,a,n),Vo(null,t,r,!0,e,n);case 19:return tu(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Js(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Js(null,e,null,(function(){t[Jr]=null}))},tt=function(e){13===e.tag&&(fs(e,4,cs()),ec(e,4))},nt=function(e){13===e.tag&&(fs(e,67108864,cs()),ec(e,67108864))},rt=function(e){if(13===e.tag){var t=cs(),n=ls(e);fs(e,n,t),ec(e,n)}},at=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=na(r);if(!a)throw Error(o(90));J(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=gs,Re=function(e,t,n,r,a){var i=Au;Au|=4;try{return Va(98,e.bind(null,t,n,r,a))}finally{0===(Au=i)&&(qu(),$a())}},Fe=function(){0===(49&Au)&&(function(){if(null!==ts){var e=ts;ts=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,hs(e,Ba())}))}$a()}(),Is())},Me=function(e,t){var n=Au;Au|=2;try{return e(t)}finally{0===(Au=n)&&(qu(),$a())}};var ic={Events:[ea,ta,na,Ne,Ie,Is,{current:!1}]},oc={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{wa=sc.inject(uc),xa=sc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Au;if(0!==(48&n))return e(t);Au|=1;try{if(e)return Va(99,e.bind(null,t))}finally{Au=n,$a()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Jr]=null}))})),!0)},t.unstable_batchedUpdates=gs,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(528)},function(e,t,n){"use strict";var r,a,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var u=performance;t.unstable_now=function(){return u.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,d=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(d,0))},a=function(e,t){f=setTimeout(e,t)},i=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,b=-1,y=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,O=x.port2;x.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+y;try{g(!0,e)?O.postMessage(null):(m=!1,g=null)}catch(n){throw O.postMessage(null),n}}else m=!1},r=function(e){g=e,m||(m=!0,O.postMessage(null))},a=function(e,n){b=h((function(){e(t.unstable_now())}),n)},i=function(){p(b),b=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function j(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],u=i+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],C=[],A=1,T=null,N=3,I=!1,D=!1,R=!1;function F(e){for(var t=j(C);null!==t;){if(null===t.callback)_(C);else{if(!(t.startTime<=e))break;_(C),t.sortIndex=t.expirationTime,k(E,t)}t=j(C)}}function M(e){if(R=!1,F(e),!D)if(null!==j(E))D=!0,r(P);else{var t=j(C);null!==t&&a(M,t.startTime-e)}}function P(e,n){D=!1,R&&(R=!1,i()),I=!0;var r=N;try{for(F(n),T=j(E);null!==T&&(!(T.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=T.callback;if("function"===typeof o){T.callback=null,N=T.priorityLevel;var u=o(T.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?T.callback=u:T===j(E)&&_(E),F(n)}else _(E);T=j(E)}if(null!==T)var s=!0;else{var c=j(C);null!==c&&a(M,c.startTime-n),s=!1}return s}finally{T=null,N=r,I=!1}}var L=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||I||(D=!0,r(P))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return j(E)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,k(C,e),null===j(E)&&e===j(C)&&(R?i():R=!0,a(M,o-u))):(e.sortIndex=s,k(E,e),D||I||(D=!0,r(P))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(e,t,n){var r=f;return function(a,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:d,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function m(){}function g(){}function b(){}var y={};s(y,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==n&&r.call(x,i)&&(y=x);var O=b.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(a,i,o,u){var s=l(e[a],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=b,s(O,"constructor",b),s(b,"constructor",g),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},k(j.prototype),s(j.prototype,o,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new j(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(O),s(O,u,"Generator"),s(O,i,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var r,a=n(357),i=function(){if("undefined"===typeof window)return new Map;if(!r){var e=window;e.Ionicons=e.Ionicons||{},r=e.Ionicons.map=e.Ionicons.map||new Map}return r},o=function(e){var t=i();Object.keys(e).forEach((function(n){return t.set(n,e[n])}))},u=function(e){var t=l(e.src);if(t)return t;if(t=c(e.name,e.icon,e.mode,e.ios,e.md))return s(t);if(e.icon){if(t=l(e.icon))return t;if(t=l(e.icon[e.mode]))return t}return null},s=function(e){var t=i().get(e);return t||Object(a.c)("svg/"+e+".svg")},c=function(e,t,n,r,a){return n="ios"===(n&&h(n))?"ios":"md",r&&"ios"===n?e=h(r):a&&"md"===n?e=h(a):(e||!t||f(t)||(e=t),d(e)&&(e=h(e))),d(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null},l=function(e){return d(e)&&(e=e.trim(),f(e))?e:null},f=function(e){return e.length>0&&/(\/|\.)/.test(e)},d=function(e){return"string"===typeof e},h=function(e){return e.toLowerCase()}},,function(e,t,n){"use strict";var r=n(534);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case d:case o:case s:case u:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case c:return e;default:return t}}case i:return t}}}function k(e){return O(e)===d}t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=a,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=u,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||O(e)===f},t.isConcurrentMode=k,t.isContextConsumer=function(e){return O(e)===l},t.isContextProvider=function(e){return O(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return O(e)===h},t.isFragment=function(e){return O(e)===o},t.isLazy=function(e){return O(e)===g},t.isMemo=function(e){return O(e)===m},t.isPortal=function(e){return O(e)===i},t.isProfiler=function(e){return O(e)===s},t.isStrictMode=function(e){return O(e)===u},t.isSuspense=function(e){return O(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===u||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===w||e.$$typeof===x||e.$$typeof===b)},t.typeOf=O},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){},function(e,t,n){"use strict";n(174);var r=n(5),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},,function(e,t){function n(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function u(e){n(o,a,i,u,s,"next",e)}function s(e){n(o,a,i,u,s,"throw",e)}u(void 0)}))}}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){e.exports=function e(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=n[o]={exports:{}};t[o][0].call(s.exports,(function(e){return a(t[o][1][e]||e)}),s,s.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){(function(r,a,i,o,u,s,c,l,f){"use strict";var d=e("crypto");function h(e,t){return function(e,t){var n;if(void 0===(n="passthrough"!==t.algorithm?d.createHash(t.algorithm):new y).write&&(n.write=n.update,n.end=n.update),b(t,n).dispatch(e),n.update||n.end(""),n.digest)return n.digest("buffer"===t.encoding?void 0:t.encoding);var r=n.read();return"buffer"!==t.encoding?r.toString(t.encoding):r}(e,t=m(e,t))}(n=t.exports=h).sha1=function(e){return h(e)},n.keys=function(e){return h(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return h(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return h(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var p=d.getHashes?d.getHashes().slice():["sha1","md5"];p.push("passthrough");var v=["buffer","hex","binary","base64"];function m(e,t){t=t||{};var n={};if(n.algorithm=t.algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var r=0;r<p.length;++r)p[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=p[r]);if(-1===p.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+p.join(", "));if(-1===v.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+v.join(", "));return n}function g(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function b(e,t,n){function r(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return e.replacer&&(t=e.replacer(t)),this["_"+(null===t?"null":typeof t)](t)},_object:function(t){var a,o=Object.prototype.toString.call(t),u=/\[object (.*)\]/i.exec(o);if(u=(u=u?u[1]:"unknown:["+o+"]").toLowerCase(),0<=(a=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+a+"]");if(n.push(t),void 0!==i&&i.isBuffer&&i.isBuffer(t))return r("buffer:"),r(t);if("object"===u||"function"===u||"asyncfunction"===u){var s=Object.keys(t);e.unorderedObjects&&(s=s.sort()),!1===e.respectType||g(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter((function(t){return!e.excludeKeys(t)}))),r("object:"+s.length+":");var c=this;return s.forEach((function(n){c.dispatch(n),r(":"),e.excludeValues||c.dispatch(t[n]),r(",")}))}if(!this["_"+u]){if(e.ignoreUnknown)return r("["+u+"]");throw new Error('Unknown object type "'+u+'"')}this["_"+u](t)},_array:function(t,a){a=void 0!==a?a:!1!==e.unorderedArrays;var i=this;if(r("array:"+t.length+":"),!a||t.length<=1)return t.forEach((function(e){return i.dispatch(e)}));var o=[],u=t.map((function(t){var r=new y,a=n.slice();return b(e,r,a).dispatch(t),o=o.concat(a.slice(n.length)),r.read().toString()}));return n=n.concat(o),u.sort(),this._array(u,!1)},_date:function(e){return r("date:"+e.toJSON())},_symbol:function(e){return r("symbol:"+e.toString())},_error:function(e){return r("error:"+e.toString())},_boolean:function(e){return r("bool:"+e.toString())},_string:function(e){r("string:"+e.length+":"),r(e.toString())},_function:function(t){r("fn:"),g(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return r("number:"+e.toString())},_xml:function(e){return r("xml:"+e.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(e){return r("regex:"+e.toString())},_uint8array:function(e){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return r("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return r("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return r("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return r("url:"+e.toString())},_map:function(t){r("map:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_set:function(t){r("set:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_file:function(e){return r("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(e){return r("bigint:"+e.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function y(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),b(t=m(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7eac155c.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(e,t,n){(function(e,t,r,a,i,o,u,s,c){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),a="0".charCodeAt(0),i="a".charCodeAt(0),o="A".charCodeAt(0),u="-".charCodeAt(0),s="_".charCodeAt(0);function c(e){var t=e.charCodeAt(0);return t===n||t===u?62:t===r||t===s?63:t<a?-1:t<a+10?t-a+26+26:t<o+26?t-o:t<i+26?t-i+26:void 0}e.toByteArray=function(e){var n,r;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.length,i="="===e.charAt(a-2)?2:"="===e.charAt(a-1)?1:0,o=new t(3*e.length/4-i),u=0<i?e.length-4:e.length,s=0;function l(e){o[s++]=e}for(n=0;n<u;n+=4,0)l((16711680&(r=c(e.charAt(n))<<18|c(e.charAt(n+1))<<12|c(e.charAt(n+2))<<6|c(e.charAt(n+3))))>>16),l((65280&r)>>8),l(255&r);return 2==i?l(255&(r=c(e.charAt(n))<<2|c(e.charAt(n+1))>>4)):1==i&&(l((r=c(e.charAt(n))<<10|c(e.charAt(n+1))<<4|c(e.charAt(n+2))>>2)>>8&255),l(255&r)),o},e.fromByteArray=function(e){var t,n,r,a,i=e.length%3,o="";function u(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,r=e.length-i;t<r;t+=3)o+=u((a=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+u(a>>12&63)+u(a>>6&63)+u(63&a);switch(i){case 1:o+=u((n=e[e.length-1])>>2),o+=u(n<<4&63),o+="==";break;case 2:o+=u((n=(e[e.length-2]<<8)+e[e.length-1])>>10),o+=u(n>>4&63),o+=u(n<<2&63),o+="="}return o}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(e,t,n){(function(t,r,a,i,o,u,s,c,l){var f=e("base64-js"),d=e("ieee754");function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var r,i,o,u,s,c=typeof e;if("base64"===t&&"string"==c)for(e=(r=e).trim?r.trim():r.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==c)i=T(e);else if("string"==c)i=a.byteLength(e,t);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");i=T(e.length)}if(a._useTypedArrays?o=a._augment(new Uint8Array(i)):((o=this).length=i,o._isBuffer=!0),a._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(N(s=e)||a.isBuffer(s)||s&&"object"==typeof s&&"number"==typeof s.length)for(u=0;u<i;u++)a.isBuffer(e)?o[u]=e.readUInt8(u):o[u]=e[u];else if("string"==c)o.write(e,0,t);else if("number"==c&&!a._useTypedArrays&&!n)for(u=0;u<i;u++)o[u]=0;return o}function h(e,t,n,r){return a._charsWritten=F(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function p(e,t,n,r){return a._charsWritten=F(function(e){for(var t,n,r,a=[],i=0;i<e.length;i++)n=(t=e.charCodeAt(i))>>8,r=t%256,a.push(r),a.push(n);return a}(t),e,n,r)}function v(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;a++)r+=String.fromCharCode(e[a]);return r}function m(e,t,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length"));var a,i=e.length;if(!(i<=t))return n?(a=e[t],t+1<i&&(a|=e[t+1]<<8)):(a=e[t]<<8,t+1<i&&(a|=e[t+1])),a}function g(e,t,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length"));var a,i=e.length;if(!(i<=t))return n?(t+2<i&&(a=e[t+2]<<16),t+1<i&&(a|=e[t+1]<<8),a|=e[t],t+3<i&&(a+=e[t+3]<<24>>>0)):(t+1<i&&(a=e[t+1]<<16),t+2<i&&(a|=e[t+2]<<8),t+3<i&&(a|=e[t+3]),a+=e[t]<<24>>>0),a}function b(e,t,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var a=m(e,t,n,!0);return 32768&a?-1*(65535-a+1):a}}function y(e,t,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var a=g(e,t,n,!0);return 2147483648&a?-1*(4294967295-a+1):a}}function w(e,t,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(t+3<e.length,"Trying to read beyond buffer length")),d.read(e,t,n,23,4)}function x(e,t,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(t+7<e.length,"Trying to read beyond buffer length")),d.read(e,t,n,52,8)}function O(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<e.length,"trying to write beyond buffer length"),P(t,65535));var i=e.length;if(!(i<=n))for(var o=0,u=Math.min(i-n,2);o<u;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function k(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"trying to write beyond buffer length"),P(t,4294967295));var i=e.length;if(!(i<=n))for(var o=0,u=Math.min(i-n,4);o<u;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function j(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<e.length,"Trying to write beyond buffer length"),L(t,32767,-32768)),e.length<=n||O(e,0<=t?t:65535+t+1,n,r,a)}function _(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"Trying to write beyond buffer length"),L(t,2147483647,-2147483648)),e.length<=n||k(e,0<=t?t:4294967295+t+1,n,r,a)}function S(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"Trying to write beyond buffer length"),z(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||d.write(e,t,n,r,23,4)}function E(e,t,n,r,a){a||(B(null!=t,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+7<e.length,"Trying to write beyond buffer length"),z(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||d.write(e,t,n,r,52,8)}n.Buffer=a,n.SlowBuffer=a,n.INSPECT_MAX_BYTES=50,a.poolSize=8192,a._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=D(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=R(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},a.concat=function(e,t){if(B(N(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new a(0);if(1===e.length)return e[0];if("number"!=typeof t)for(i=t=0;i<e.length;i++)t+=e[i].length;for(var n=new a(t),r=0,i=0;i<e.length;i++){var o=e[i];o.copy(n,r),r+=o.length}return n},a.prototype.write=function(e,t,n,r){var i;isFinite(t)?isFinite(n)||(r=n,n=void 0):(i=r,r=t,t=n,n=i),t=Number(t)||0;var o,u,s,c,l,f,d,v,m,g=this.length-t;switch((!n||g<(n=Number(n)))&&(n=g),r=String(r||"utf8").toLowerCase()){case"hex":o=function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i);var o=t.length;B(o%2==0,"Invalid hex string"),o/2<r&&(r=o/2);for(var u=0;u<r;u++){var s=parseInt(t.substr(2*u,2),16);B(!isNaN(s),"Invalid hex string"),e[n+u]=s}return a._charsWritten=2*u,u}(this,e,t,n);break;case"utf8":case"utf-8":f=this,d=e,v=t,m=n,o=a._charsWritten=F(D(d),f,v,m);break;case"ascii":case"binary":o=h(this,e,t,n);break;case"base64":u=this,s=e,c=t,l=n,o=a._charsWritten=F(R(s),u,c,l);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=p(this,e,t,n);break;default:throw new Error("Unknown encoding")}return o},a.prototype.toString=function(e,t,n){var r,a,i,o,u=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):n=u.length)===t)return"";switch(e){case"hex":r=function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var a="",i=t;i<n;i++)a+=I(e[i]);return a}(u,t,n);break;case"utf8":case"utf-8":r=function(e,t,n){var r="",a="";n=Math.min(e.length,n);for(var i=t;i<n;i++)e[i]<=127?(r+=M(a)+String.fromCharCode(e[i]),a=""):a+="%"+e[i].toString(16);return r+M(a)}(u,t,n);break;case"ascii":case"binary":r=v(u,t,n);break;case"base64":a=u,o=n,r=0===(i=t)&&o===a.length?f.fromByteArray(a):f.fromByteArray(a.slice(i,o));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}(u,t,n);break;default:throw new Error("Unknown encoding")}return r},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t=t||0,r!==n&&0!==e.length&&0!==this.length){B(n<=r,"sourceEnd < sourceStart"),B(0<=t&&t<e.length,"targetStart out of bounds"),B(0<=n&&n<this.length,"sourceStart out of bounds"),B(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(i<100||!a._useTypedArrays)for(var o=0;o<i;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+i),t)}},a.prototype.slice=function(e,t){var n=this.length;if(e=A(e,n,0),t=A(t,n,n),a._useTypedArrays)return a._augment(this.subarray(e,t));for(var r=t-e,i=new a(r,void 0,!0),o=0;o<r;o++)i[o]=this[o+e];return i},a.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},a.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},a.prototype.readUInt8=function(e,t){if(t||(B(null!=e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},a.prototype.readUInt16LE=function(e,t){return m(this,e,!0,t)},a.prototype.readUInt16BE=function(e,t){return m(this,e,!1,t)},a.prototype.readUInt32LE=function(e,t){return g(this,e,!0,t)},a.prototype.readUInt32BE=function(e,t){return g(this,e,!1,t)},a.prototype.readInt8=function(e,t){if(t||(B(null!=e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){return b(this,e,!0,t)},a.prototype.readInt16BE=function(e,t){return b(this,e,!1,t)},a.prototype.readInt32LE=function(e,t){return y(this,e,!0,t)},a.prototype.readInt32BE=function(e,t){return y(this,e,!1,t)},a.prototype.readFloatLE=function(e,t){return w(this,e,!0,t)},a.prototype.readFloatBE=function(e,t){return w(this,e,!1,t)},a.prototype.readDoubleLE=function(e,t){return x(this,e,!0,t)},a.prototype.readDoubleBE=function(e,t){return x(this,e,!1,t)},a.prototype.writeUInt8=function(e,t,n){n||(B(null!=e,"missing value"),B(null!=t,"missing offset"),B(t<this.length,"trying to write beyond buffer length"),P(e,255)),t>=this.length||(this[t]=e)},a.prototype.writeUInt16LE=function(e,t,n){O(this,e,t,!0,n)},a.prototype.writeUInt16BE=function(e,t,n){O(this,e,t,!1,n)},a.prototype.writeUInt32LE=function(e,t,n){k(this,e,t,!0,n)},a.prototype.writeUInt32BE=function(e,t,n){k(this,e,t,!1,n)},a.prototype.writeInt8=function(e,t,n){n||(B(null!=e,"missing value"),B(null!=t,"missing offset"),B(t<this.length,"Trying to write beyond buffer length"),L(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},a.prototype.writeInt16LE=function(e,t,n){j(this,e,t,!0,n)},a.prototype.writeInt16BE=function(e,t,n){j(this,e,t,!1,n)},a.prototype.writeInt32LE=function(e,t,n){_(this,e,t,!0,n)},a.prototype.writeInt32BE=function(e,t,n){_(this,e,t,!1,n)},a.prototype.writeFloatLE=function(e,t,n){S(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){S(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){E(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){E(this,e,t,!1,n)},a.prototype.fill=function(e,t,n){if(e=e||0,t=t||0,n=n||this.length,"string"==typeof e&&(e=e.charCodeAt(0)),B("number"==typeof e&&!isNaN(e),"value is not a number"),B(t<=n,"end < start"),n!==t&&0!==this.length){B(0<=t&&t<this.length,"start out of bounds"),B(0<=n&&n<=this.length,"end out of bounds");for(var r=t;r<n;r++)this[r]=e}},a.prototype.inspect=function(){for(var e=[],t=this.length,r=0;r<t;r++)if(e[r]=I(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},a.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(a._useTypedArrays)return new a(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var C=a.prototype;function A(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function T(e){return(e=~~Math.ceil(+e))<0?0:e}function N(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(e.charCodeAt(n));else{var a=n;55296<=r&&r<=57343&&n++;for(var i=encodeURIComponent(e.slice(a,n+1)).substr(1).split("%"),o=0;o<i.length;o++)t.push(parseInt(i[o],16))}}return t}function R(e){return f.toByteArray(e)}function F(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);a++)t[a+n]=e[a];return a}function M(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function P(e,t){B("number"==typeof e,"cannot write a non-number as a number"),B(0<=e,"specified a negative value for writing an unsigned value"),B(e<=t,"value is larger than maximum value for type"),B(Math.floor(e)===e,"value has a fractional component")}function L(e,t,n){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(n<=e,"value smaller than minimum allowed value"),B(Math.floor(e)===e,"value has a fractional component")}function z(e,t,n){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(n<=e,"value smaller than minimum allowed value")}function B(e,t){if(!e)throw new Error(t||"Failed assertion")}a._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=C.get,e.set=C.set,e.write=C.write,e.toString=C.toString,e.toLocaleString=C.toString,e.toJSON=C.toJSON,e.copy=C.copy,e.slice=C.slice,e.readUInt8=C.readUInt8,e.readUInt16LE=C.readUInt16LE,e.readUInt16BE=C.readUInt16BE,e.readUInt32LE=C.readUInt32LE,e.readUInt32BE=C.readUInt32BE,e.readInt8=C.readInt8,e.readInt16LE=C.readInt16LE,e.readInt16BE=C.readInt16BE,e.readInt32LE=C.readInt32LE,e.readInt32BE=C.readInt32BE,e.readFloatLE=C.readFloatLE,e.readFloatBE=C.readFloatBE,e.readDoubleLE=C.readDoubleLE,e.readDoubleBE=C.readDoubleBE,e.writeUInt8=C.writeUInt8,e.writeUInt16LE=C.writeUInt16LE,e.writeUInt16BE=C.writeUInt16BE,e.writeUInt32LE=C.writeUInt32LE,e.writeUInt32BE=C.writeUInt32BE,e.writeInt8=C.writeInt8,e.writeInt16LE=C.writeInt16LE,e.writeInt16BE=C.writeInt16BE,e.writeInt32LE=C.writeInt32LE,e.writeInt32BE=C.writeInt32BE,e.writeFloatLE=C.writeFloatLE,e.writeFloatBE=C.writeFloatBE,e.writeDoubleLE=C.writeDoubleLE,e.writeDoubleBE=C.writeDoubleBE,e.fill=C.fill,e.inspect=C.inspect,e.toArrayBuffer=C.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(e,t,n){(function(n,r,a,i,o,u,s,c,l){a=e("buffer").Buffer;var f=4,d=new a(f);d.fill(0),t.exports={hash:function(e,t,n,r){return a.isBuffer(e)||(e=new a(e)),function(e,t,n){for(var r=new a(t),i=n?r.writeInt32BE:r.writeInt32LE,o=0;o<e.length;o++)i.call(r,e[o],4*o,!0);return r}(t(function(e,t){var n;e.length%f!=0&&(n=e.length+(f-e.length%f),e=a.concat([e,d],n));for(var r=[],i=t?e.readInt32BE:e.readInt32LE,o=0;o<e.length;o+=f)r.push(i.call(e,o));return r}(e,r),8*e.length),n,r)}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(e,t,n){(function(t,r,a,i,o,u,s,c,l){a=e("buffer").Buffer;var f=e("./sha"),d=e("./sha256"),h=e("./rng"),p={sha1:f,sha256:d,md5:e("./md5")},v=64,m=new a(v);function g(e,t){var n=p[e=e||"sha1"],r=[];return n||b("algorithm:",e,"is not yet supported"),{update:function(e){return a.isBuffer(e)||(e=new a(e)),r.push(e),e.length,this},digest:function(e){var i=a.concat(r),o=t?function(e,t,n){a.isBuffer(t)||(t=new a(t)),a.isBuffer(n)||(n=new a(n)),t.length>v?t=e(t):t.length<v&&(t=a.concat([t,m],v));for(var r=new a(v),i=new a(v),o=0;o<v;o++)r[o]=54^t[o],i[o]=92^t[o];var u=e(a.concat([r,n]));return e(a.concat([i,u]))}(n,t,i):n(i);return r=null,e?o.toString(e):o}}}function b(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}m.fill(0),n.createHash=function(e){return g(e)},n.createHmac=g,n.randomBytes=function(e,t){if(!t||!t.call)return new a(h(e));try{t.call(this,void 0,new a(h(e)))}catch(e){t(e)}},function(e,t){for(var n in e)t(e[n],n)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(e){n[e]=function(){b("sorry,",e,"is not implemented yet")}}))}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(e,t,n){(function(n,r,a,i,o,u,s,c,l){var f=e("./helpers");function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,a=-1732584194,i=271733878,o=0;o<e.length;o+=16){var u=n,s=r,c=a,l=i;n=p(n,r,a,i,e[o+0],7,-680876936),i=p(i,n,r,a,e[o+1],12,-389564586),a=p(a,i,n,r,e[o+2],17,606105819),r=p(r,a,i,n,e[o+3],22,-1044525330),n=p(n,r,a,i,e[o+4],7,-176418897),i=p(i,n,r,a,e[o+5],12,1200080426),a=p(a,i,n,r,e[o+6],17,-1473231341),r=p(r,a,i,n,e[o+7],22,-45705983),n=p(n,r,a,i,e[o+8],7,1770035416),i=p(i,n,r,a,e[o+9],12,-1958414417),a=p(a,i,n,r,e[o+10],17,-42063),r=p(r,a,i,n,e[o+11],22,-1990404162),n=p(n,r,a,i,e[o+12],7,1804603682),i=p(i,n,r,a,e[o+13],12,-40341101),a=p(a,i,n,r,e[o+14],17,-1502002290),n=v(n,r=p(r,a,i,n,e[o+15],22,1236535329),a,i,e[o+1],5,-165796510),i=v(i,n,r,a,e[o+6],9,-1069501632),a=v(a,i,n,r,e[o+11],14,643717713),r=v(r,a,i,n,e[o+0],20,-373897302),n=v(n,r,a,i,e[o+5],5,-701558691),i=v(i,n,r,a,e[o+10],9,38016083),a=v(a,i,n,r,e[o+15],14,-660478335),r=v(r,a,i,n,e[o+4],20,-405537848),n=v(n,r,a,i,e[o+9],5,568446438),i=v(i,n,r,a,e[o+14],9,-1019803690),a=v(a,i,n,r,e[o+3],14,-187363961),r=v(r,a,i,n,e[o+8],20,1163531501),n=v(n,r,a,i,e[o+13],5,-1444681467),i=v(i,n,r,a,e[o+2],9,-51403784),a=v(a,i,n,r,e[o+7],14,1735328473),n=m(n,r=v(r,a,i,n,e[o+12],20,-1926607734),a,i,e[o+5],4,-378558),i=m(i,n,r,a,e[o+8],11,-2022574463),a=m(a,i,n,r,e[o+11],16,1839030562),r=m(r,a,i,n,e[o+14],23,-35309556),n=m(n,r,a,i,e[o+1],4,-1530992060),i=m(i,n,r,a,e[o+4],11,1272893353),a=m(a,i,n,r,e[o+7],16,-155497632),r=m(r,a,i,n,e[o+10],23,-1094730640),n=m(n,r,a,i,e[o+13],4,681279174),i=m(i,n,r,a,e[o+0],11,-358537222),a=m(a,i,n,r,e[o+3],16,-722521979),r=m(r,a,i,n,e[o+6],23,76029189),n=m(n,r,a,i,e[o+9],4,-640364487),i=m(i,n,r,a,e[o+12],11,-421815835),a=m(a,i,n,r,e[o+15],16,530742520),n=g(n,r=m(r,a,i,n,e[o+2],23,-995338651),a,i,e[o+0],6,-198630844),i=g(i,n,r,a,e[o+7],10,1126891415),a=g(a,i,n,r,e[o+14],15,-1416354905),r=g(r,a,i,n,e[o+5],21,-57434055),n=g(n,r,a,i,e[o+12],6,1700485571),i=g(i,n,r,a,e[o+3],10,-1894986606),a=g(a,i,n,r,e[o+10],15,-1051523),r=g(r,a,i,n,e[o+1],21,-2054922799),n=g(n,r,a,i,e[o+8],6,1873313359),i=g(i,n,r,a,e[o+15],10,-30611744),a=g(a,i,n,r,e[o+6],15,-1560198380),r=g(r,a,i,n,e[o+13],21,1309151649),n=g(n,r,a,i,e[o+4],6,-145523070),i=g(i,n,r,a,e[o+11],10,-1120210379),a=g(a,i,n,r,e[o+2],15,718787259),r=g(r,a,i,n,e[o+9],21,-343485551),n=b(n,u),r=b(r,s),a=b(a,c),i=b(i,l)}return Array(n,r,a,i)}function h(e,t,n,r,a,i){return b((o=b(b(t,e),b(r,i)))<<(u=a)|o>>>32-u,n);var o,u}function p(e,t,n,r,a,i,o){return h(t&n|~t&r,e,t,a,i,o)}function v(e,t,n,r,a,i,o){return h(t&r|n&~r,e,t,a,i,o)}function m(e,t,n,r,a,i,o){return h(t^n^r,e,t,a,i,o)}function g(e,t,n,r,a,i,o){return h(n^(t|~r),e,t,a,i,o)}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return f.hash(e,d,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(e,t,n){(function(e,n,r,a,i,o,u,s,c){var l,f;f=function(e){for(var t,n=new Array(e),r=0;r<e;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n},t.exports=l||f}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(e,t,n){(function(n,r,a,i,o,u,s,c,l){var f=e("./helpers");function d(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,r,a,i,o,u=Array(80),s=1732584193,c=-271733879,l=-1732584194,f=271733878,d=-1009589776,v=0;v<e.length;v+=16){for(var m=s,g=c,b=l,y=f,w=d,x=0;x<80;x++){u[x]=x<16?e[v+x]:p(u[x-3]^u[x-8]^u[x-14]^u[x-16],1);var O=h(h(p(s,5),(a=c,i=l,o=f,(r=x)<20?a&i|~a&o:!(r<40)&&r<60?a&i|a&o|i&o:a^i^o)),h(h(d,u[x]),(n=x)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));d=f,f=l,l=p(c,30),c=s,s=O}s=h(s,m),c=h(c,g),l=h(l,b),f=h(f,y),d=h(d,w)}return Array(s,c,l,f,d)}function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function p(e,t){return e<<t|e>>>32-t}t.exports=function(e){return f.hash(e,d,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(e,t,n){(function(n,r,a,i,o,u,s,c,l){function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function d(e,t){return e>>>t|e<<32-t}function h(e,t){var n,r,a,i,o,u,s,c,l,h,p=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),v=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),m=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var g,b,y,w,x,O,k,j,_=0;_<e.length;_+=16){n=v[0],r=v[1],a=v[2],i=v[3],o=v[4],u=v[5],s=v[6],c=v[7];for(var S=0;S<64;S++)m[S]=S<16?e[S+_]:f(f(f(d(j=m[S-2],17)^d(j,19)^j>>>10,m[S-7]),d(k=m[S-15],7)^d(k,18)^k>>>3),m[S-16]),l=f(f(f(f(c,d(O=o,6)^d(O,11)^d(O,25)),(x=o)&u^~x&s),p[S]),m[S]),h=f(d(w=n,2)^d(w,13)^d(w,22),(g=n)&(b=r)^g&(y=a)^b&y),c=s,s=u,u=o,o=f(i,l),i=a,a=r,r=n,n=f(l,h);v[0]=f(n,v[0]),v[1]=f(r,v[1]),v[2]=f(a,v[2]),v[3]=f(i,v[3]),v[4]=f(o,v[4]),v[5]=f(u,v[5]),v[6]=f(s,v[6]),v[7]=f(c,v[7])}return v}var p=e("./helpers");t.exports=function(e){return p.hash(e,h,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(e,t,n){(function(e,n,r,a,i,o,u,s,c){function l(){}(e=t.exports={}).nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<n.length&&n.shift()())}),!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=l,e.addListener=l,e.once=l,e.off=l,e.removeListener=l,e.removeAllListeners=l,e.emit=l,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(e,t,n){(function(e,t,r,a,i,o,u,s,c){n.read=function(e,t,n,r,a){var i,o,u=8*a-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=u;0<l;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;0<l;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=c}return(h?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,u,s,c=8*i-a-1,l=(1<<c)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),2<=(t+=1<=o+f?d/s:d*Math.pow(2,1-f))*s&&(o++,s/=2),l<=o+f?(u=0,o=l):1<=o+f?(u=(t*s-1)*Math.pow(2,a),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));8<=a;e[n+h]=255&u,h+=p,u/=256,a-=8);for(o=o<<a|u,c+=a;0<c;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*v}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,r,a,i){var o=r||"<<anonymous>>",u=i||n;if(null==t[n])return new Error("The "+a+" `"+u+"` is required to make `"+o+"` accessible for users of assistive technologies such as screen readers.");for(var s=arguments.length,c=Array(s>5?s-5:0),l=5;l<s;l++)c[l-5]=arguments[l];return e.apply(void 0,[t,n,r,a,i].concat(c))}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}return(0,i.default)(r)};var r,a=n(548),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,i,o){var u=a||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+i+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,i,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},function(e,t){e.exports={split:function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n";return e.replace(/\r?\n/g,t)}(e).split("\n\n"),r=[],a={};return n.forEach((function(e){if(e.startsWith("["))a.tags=e;else if(e){a.pgn=e;var t=a.tags?a.tags+"\n\n"+a.pgn:a.pgn;a.all=t,r.push(a),a={}}})),r}}},function(e,t,n){var r=n(551);e.exports={SyntaxError:r.SyntaxError,parse:function(e,t){t&&"pgn"!==t.startRule&&"game"!==t.startRule||(e=e.trim());var n,a=r.parse(e,t);return n=t,function(e){function r(e){function t(e,n){return e.turn=n,e.variations&&e.variations.forEach((function(e){var r=n;e.forEach((function(e){return r=t(e,r)}))})),function(e){return"w"===e?"b":"w"}(n)}var r=function(e){return e.split(/\s+/)[1]}(n.fen||e.tags&&e.tags.FEN||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");return e.moves.forEach((function(e){return r=t(e,r)})),e}return"game"===t.startRule?r(e):"pgn"===t.startRule?r({moves:e}).moves:("games"===t.startRule&&e.forEach((function(e){return r(e)})),e)}(function(e){if(t&&"games"===t.startRule){if(!Array.isArray(e))return[];if(0===e.length)return e;var n=e.pop();(Object.keys(n.tags).length>0||n.moves.length>0)&&e.push(n)}return e}(a))}}},function(e,t,n){var r,a,i;a=[],void 0===(i="function"===typeof(r=function(){"use strict";function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,n,r,a){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,t.prototype),i.expected=n,i.found=r,i.location=a,i.name="SyntaxError",i}function n(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function r(e,n){var r,a={},i=(n=void 0!==n?n:{}).grammarSource,o={pgn:_f,tags:ol,game:il,games:al},u=_f,s="Event",c="event",l="Site",f="site",d="Date",h="date",p="Round",v="round",m="White",g="white",b="Black",y="black",w="Result",x="result",O="WhiteTitle",k="Whitetitle",j="whitetitle",_="whiteTitle",S="BlackTitle",E="Blacktitle",C="blacktitle",A="blackTitle",T="WhiteELO",N="WhiteElo",I="Whiteelo",D="whiteelo",R="whiteElo",F="BlackELO",M="BlackElo",P="Blackelo",L="blackelo",z="blackElo",B="WhiteUSCF",U="WhiteUscf",W="Whiteuscf",V="whiteuscf",q="whiteUscf",$="BlackUSCF",H="BlackUscf",G="Blackuscf",K="blackuscf",X="blackUscf",Y="WhiteNA",J="WhiteNa",Q="Whitena",Z="whitena",ee="whiteNa",te="whiteNA",ne="BlackNA",re="BlackNa",ae="Blackna",ie="blackna",oe="blackNA",ue="blackNa",se="WhiteType",ce="Whitetype",le="whitetype",fe="whiteType",de="BlackType",he="Blacktype",pe="blacktype",ve="blackType",me="EventDate",ge="Eventdate",be="eventdate",ye="eventDate",we="EventSponsor",xe="Eventsponsor",Oe="eventsponsor",ke="eventSponsor",je="Section",_e="section",Se="Stage",Ee="stage",Ce="Board",Ae="board",Te="Opening",Ne="opening",Ie="Variation",De="variation",Re="SubVariation",Fe="Subvariation",Me="subvariation",Pe="subVariation",Le="ECO",ze="Eco",Be="eco",Ue="NIC",We="Nic",Ve="nic",qe="Time",$e="time",He="UTCTime",Ge="UTCtime",Ke="UtcTime",Xe="Utctime",Ye="utctime",Je="utcTime",Qe="UTCDate",Ze="UTCdate",et="UtcDate",tt="Utcdate",nt="utcdate",rt="utcDate",at="TimeControl",it="Timecontrol",ot="timecontrol",ut="timeControl",st="SetUp",ct="Setup",lt="setup",ft="setUp",dt="FEN",ht="Fen",pt="fen",vt="Termination",mt="termination",gt="Annotator",bt="annotator",yt="Mode",wt="mode",xt="PlyCount",Ot="Plycount",kt="plycount",jt="plyCount",_t="Variant",St="variant",Et="WhiteRatingDiff",Ct="BlackRatingDiff",At="WhiteFideId",Tt="BlackFideId",Nt="WhiteTeam",It="BlackTeam",Dt="Clock",Rt="WhiteClock",Ft="BlackClock",Mt='"',Pt=".",Lt=":",zt="/",Bt="B",Ut="W",Wt="N",Vt="?",qt="-",$t="+",Ht="*",Gt="1-0",Kt="0-1",Xt="1/2-1/2",Yt="%csl",Jt="%cal",Qt="%",Zt="%eval",en="[%",tn="}",nn=",",rn="Y",an="G",on="R",un="{",sn="[",cn="]",ln=";",fn="clk",dn="egt",hn="emt",pn="mct",vn="(",mn=")",gn=" ",bn="O-O-O",yn="O-O",wn="@",xn="+-",On="$$$",kn="#",jn="=",_n="$",Sn="!!",En="??",Cn="!?",An="?!",Tn="!",Nn="\u203c",In="\u2047",Dn="\u2049",Rn="\u2048",Fn="\u25a1",Mn="\u221e",Pn="\u2a72",Ln="\u2a71",zn="\xb1",Bn="\u2213",Un="-+",Wn="\u2a00",Vn="\u27f3",qn="\u2192",$n="\u2191",Hn="\u21c6",Gn="D",Kn="x",Xn=/^[ \t\n\r]/,Yn=/^[\n\r]/,Jn=/^[\-a-zA-Z0-9.]/,Qn=/^[0-9?]/,Zn=/^[0-9]/,er=/^[^\n\r]/,tr=/^[RNBQKP]/,nr=/^[RNBQ]/,rr=/^[a-h]/,ar=/^[1-8]/,ir=Xc("Event",!1),or=Xc("event",!1),ur=Xc("Site",!1),sr=Xc("site",!1),cr=Xc("Date",!1),lr=Xc("date",!1),fr=Xc("Round",!1),dr=Xc("round",!1),hr=Xc("White",!1),pr=Xc("white",!1),vr=Xc("Black",!1),mr=Xc("black",!1),gr=Xc("Result",!1),br=Xc("result",!1),yr=Xc("WhiteTitle",!1),wr=Xc("Whitetitle",!1),xr=Xc("whitetitle",!1),Or=Xc("whiteTitle",!1),kr=Xc("BlackTitle",!1),jr=Xc("Blacktitle",!1),_r=Xc("blacktitle",!1),Sr=Xc("blackTitle",!1),Er=Xc("WhiteELO",!1),Cr=Xc("WhiteElo",!1),Ar=Xc("Whiteelo",!1),Tr=Xc("whiteelo",!1),Nr=Xc("whiteElo",!1),Ir=Xc("BlackELO",!1),Dr=Xc("BlackElo",!1),Rr=Xc("Blackelo",!1),Fr=Xc("blackelo",!1),Mr=Xc("blackElo",!1),Pr=Xc("WhiteUSCF",!1),Lr=Xc("WhiteUscf",!1),zr=Xc("Whiteuscf",!1),Br=Xc("whiteuscf",!1),Ur=Xc("whiteUscf",!1),Wr=Xc("BlackUSCF",!1),Vr=Xc("BlackUscf",!1),qr=Xc("Blackuscf",!1),$r=Xc("blackuscf",!1),Hr=Xc("blackUscf",!1),Gr=Xc("WhiteNA",!1),Kr=Xc("WhiteNa",!1),Xr=Xc("Whitena",!1),Yr=Xc("whitena",!1),Jr=Xc("whiteNa",!1),Qr=Xc("whiteNA",!1),Zr=Xc("BlackNA",!1),ea=Xc("BlackNa",!1),ta=Xc("Blackna",!1),na=Xc("blackna",!1),ra=Xc("blackNA",!1),aa=Xc("blackNa",!1),ia=Xc("WhiteType",!1),oa=Xc("Whitetype",!1),ua=Xc("whitetype",!1),sa=Xc("whiteType",!1),ca=Xc("BlackType",!1),la=Xc("Blacktype",!1),fa=Xc("blacktype",!1),da=Xc("blackType",!1),ha=Xc("EventDate",!1),pa=Xc("Eventdate",!1),va=Xc("eventdate",!1),ma=Xc("eventDate",!1),ga=Xc("EventSponsor",!1),ba=Xc("Eventsponsor",!1),ya=Xc("eventsponsor",!1),wa=Xc("eventSponsor",!1),xa=Xc("Section",!1),Oa=Xc("section",!1),ka=Xc("Stage",!1),ja=Xc("stage",!1),_a=Xc("Board",!1),Sa=Xc("board",!1),Ea=Xc("Opening",!1),Ca=Xc("opening",!1),Aa=Xc("Variation",!1),Ta=Xc("variation",!1),Na=Xc("SubVariation",!1),Ia=Xc("Subvariation",!1),Da=Xc("subvariation",!1),Ra=Xc("subVariation",!1),Fa=Xc("ECO",!1),Ma=Xc("Eco",!1),Pa=Xc("eco",!1),La=Xc("NIC",!1),za=Xc("Nic",!1),Ba=Xc("nic",!1),Ua=Xc("Time",!1),Wa=Xc("time",!1),Va=Xc("UTCTime",!1),qa=Xc("UTCtime",!1),$a=Xc("UtcTime",!1),Ha=Xc("Utctime",!1),Ga=Xc("utctime",!1),Ka=Xc("utcTime",!1),Xa=Xc("UTCDate",!1),Ya=Xc("UTCdate",!1),Ja=Xc("UtcDate",!1),Qa=Xc("Utcdate",!1),Za=Xc("utcdate",!1),ei=Xc("utcDate",!1),ti=Xc("TimeControl",!1),ni=Xc("Timecontrol",!1),ri=Xc("timecontrol",!1),ai=Xc("timeControl",!1),ii=Xc("SetUp",!1),oi=Xc("Setup",!1),ui=Xc("setup",!1),si=Xc("setUp",!1),ci=Xc("FEN",!1),li=Xc("Fen",!1),fi=Xc("fen",!1),di=Xc("Termination",!1),hi=Xc("termination",!1),pi=Xc("Annotator",!1),vi=Xc("annotator",!1),mi=Xc("Mode",!1),gi=Xc("mode",!1),bi=Xc("PlyCount",!1),yi=Xc("Plycount",!1),wi=Xc("plycount",!1),xi=Xc("plyCount",!1),Oi=Xc("Variant",!1),ki=Xc("variant",!1),ji=Xc("WhiteRatingDiff",!1),_i=Xc("BlackRatingDiff",!1),Si=Xc("WhiteFideId",!1),Ei=Xc("BlackFideId",!1),Ci=Xc("WhiteTeam",!1),Ai=Xc("BlackTeam",!1),Ti=Xc("Clock",!1),Ni=Xc("WhiteClock",!1),Ii=Xc("BlackClock",!1),Di=Zc("whitespace"),Ri=Yc([" ","\t","\n","\r"],!1,!1),Fi=Yc(["\n","\r"],!1,!1),Mi=Zc("string"),Pi=Yc(["-",["a","z"],["A","Z"],["0","9"],"."],!1,!1),Li=Xc('"',!1),zi=Jc(),Bi=Yc([["0","9"],"?"],!1,!1),Ui=Xc(".",!1),Wi=Yc([["0","9"]],!1,!1),Vi=Xc(":",!1),qi=Xc("/",!1),$i=Xc("B",!1),Hi=Xc("W",!1),Gi=Xc("N",!1),Ki=Xc("?",!1),Xi=Xc("-",!1),Yi=Xc("+",!1),Ji=Xc("*",!1),Qi=Xc("1-0",!1),Zi=Xc("0-1",!1),eo=Xc("1/2-1/2",!1),to=Xc("%csl",!1),no=Xc("%cal",!1),ro=Xc("%",!1),ao=Xc("%eval",!1),io=Xc("[%",!1),oo=Xc("}",!1),uo=Yc(["\n","\r"],!0,!1),so=Xc(",",!1),co=Xc("Y",!1),lo=Xc("G",!1),fo=Xc("R",!1),ho=Xc("{",!1),po=Xc("[",!1),vo=Xc("]",!1),mo=Xc(";",!1),go=Xc("clk",!1),bo=Xc("egt",!1),yo=Xc("emt",!1),wo=Xc("mct",!1),xo=Xc("(",!1),Oo=Xc(")",!1),ko=Zc("integer"),jo=Xc(" ",!1),_o=Xc("O-O-O",!1),So=Xc("O-O",!1),Eo=Xc("@",!1),Co=Xc("+-",!1),Ao=Xc("$$$",!1),To=Xc("#",!1),No=Xc("=",!1),Io=Xc("$",!1),Do=Xc("!!",!1),Ro=Xc("??",!1),Fo=Xc("!?",!1),Mo=Xc("?!",!1),Po=Xc("!",!1),Lo=Xc("\u203c",!1),zo=Xc("\u2047",!1),Bo=Xc("\u2049",!1),Uo=Xc("\u2048",!1),Wo=Xc("\u25a1",!1),Vo=Xc("\u221e",!1),qo=Xc("\u2a72",!1),$o=Xc("\u2a71",!1),Ho=Xc("\xb1",!1),Go=Xc("\u2213",!1),Ko=Xc("-+",!1),Xo=Xc("\u2a00",!1),Yo=Xc("\u27f3",!1),Jo=Xc("\u2192",!1),Qo=Xc("\u2191",!1),Zo=Xc("\u21c6",!1),eu=Xc("D",!1),tu=Yc(["R","N","B","Q","K","P"],!1,!1),nu=Yc(["R","N","B","Q"],!1,!1),ru=Yc([["a","h"]],!1,!1),au=Yc([["1","8"]],!1,!1),iu=Xc("x",!1),ou=function(e,t){return t},uu=function(e,t){return[e].concat(t)},su=function(e){return e},cu=function(e,t,n){var r=bd;return bd=[],{tags:e,gameComment:t,moves:n,messages:r}},lu=function(e,t){var n={};return[e].concat(t).forEach((function(e){n[e.name]=e.value})),n},fu=function(e){return null===e?{}:(e.messages=bd,e)},du=function(e){return e},hu=function(e){return{name:"Event",value:e}},pu=function(e){return{name:"Site",value:e}},vu=function(e){return{name:"Date",value:e}},mu=function(e){return{name:"Round",value:e}},gu=function(e){return{name:"WhiteTitle",value:e}},bu=function(e){return{name:"BlackTitle",value:e}},yu=function(e){return{name:"WhiteElo",value:e}},wu=function(e){return{name:"BlackElo",value:e}},xu=function(e){return{name:"WhiteUSCF",value:e}},Ou=function(e){return{name:"BlackUSCF",value:e}},ku=function(e){return{name:"WhiteNA",value:e}},ju=function(e){return{name:"BlackNA",value:e}},_u=function(e){return{name:"WhiteType",value:e}},Su=function(e){return{name:"BlackType",value:e}},Eu=function(e){return{name:"White",value:e}},Cu=function(e){return{name:"Black",value:e}},Au=function(e){return{name:"Result",value:e}},Tu=function(e){return{name:"EventDate",value:e}},Nu=function(e){return{name:"EventSponsor",value:e}},Iu=function(e){return{name:"Section",value:e}},Du=function(e){return{name:"Stage",value:e}},Ru=function(e){return{name:"Board",value:e}},Fu=function(e){return{name:"Opening",value:e}},Mu=function(e){return{name:"Variation",value:e}},Pu=function(e){return{name:"SubVariation",value:e}},Lu=function(e){return{name:"ECO",value:e}},zu=function(e){return{name:"NIC",value:e}},Bu=function(e){return{name:"Time",value:e}},Uu=function(e){return{name:"UTCTime",value:e}},Wu=function(e){return{name:"UTCDate",value:e}},Vu=function(e){return{name:"TimeControl",value:e}},qu=function(e){return{name:"SetUp",value:e}},$u=function(e){return{name:"FEN",value:e}},Hu=function(e){return{name:"Termination",value:e}},Gu=function(e){return{name:"Annotator",value:e}},Ku=function(e){return{name:"Mode",value:e}},Xu=function(e){return{name:"PlyCount",value:e}},Yu=function(e){return{name:"Variant",value:e}},Ju=function(e){return{name:"WhiteRatingDiff",value:e}},Qu=function(e){return{name:"BlackRatingDiff",value:e}},Zu=function(e){return{name:"WhiteFideId",value:e}},es=function(e){return{name:"BlackFideId",value:e}},ts=function(e){return{name:"WhiteTeam",value:e}},ns=function(e){return{name:"BlackTeam",value:e}},rs=function(e){return{name:"Clock",value:e}},as=function(e){return{name:"WhiteClock",value:e}},is=function(e){return{name:"BlackClock",value:e}},os=function(e,t){return yd({key:e,value:t,message:'Format of tag: "'.concat(e,'" not correct: "').concat(t,'"')}),{name:e,value:t}},us=function(e,t){return yd({key:e,value:t,message:'Tag: "'.concat(e,'" not known: "').concat(t,'"')}),{name:e,value:t}},ss=function(e){return e.join("")},cs=function(e){return e},ls=function(e,t,n){return{value:e.join("")+"."+t.join("")+"."+n.join(""),year:xd(e),month:xd(t),day:xd(n)}},fs=function(e,t,n,r){var a=e.join("")+":"+t.join("")+":"+n.join(""),i=0;return r&&(yd({message:"Unusual use of millis in time: ".concat(a=a+"."+r)}),xd(r)),{value:a,hour:xd(e),minute:xd(t),second:xd(n),millis:i}},ds=function(e){return e.join("")},hs=function(e){return e},ps=function(e,t){return e+"/"+t},vs=function(e){return e},ms=function(){return{kind:"unknown",value:"?"}},gs=function(){return{kind:"unlimited",value:"-"}},bs=function(e,t){return{kind:"movesInSeconds",moves:e,seconds:t}},ys=function(e,t){return{kind:"increment",seconds:e,increment:t}},ws=function(e){return{kind:"suddenDeath",seconds:e}},xs=function(e){return{kind:"hourglass",seconds:e}},Os=function(e){return e},ks=function(e){return wd(e)},js=function(e,t,n,r,a,i,o){var u=o||[],s={};return s.moveNumber=t,s.notation=n,a&&(s.commentAfter=a.comment),e&&(s.commentMove=e.comment),s.variations=i||[],s.nag=r||null,u.unshift(s),s.commentDiag=a,u},_s=function(e){return e},Ss=function(e){return[e]},Es=function(e,t){return t},Cs=function(e,t){return Od([e].concat(t))},As=function(e){return e},Ts=function(e){return{comment:e}},Ns=function(e,t){return t},Is=function(e,t){return Od([{colorFields:e}].concat(t[0]))},Ds=function(e,t){return t},Rs=function(e,t){return Od([{colorArrows:e}].concat(t[0]))},Fs=function(e,t,n){return n},Ms=function(e,t,n){var r={};return r[e]=t,Od([r].concat(n[0]))},Ps=function(e,t){return t},Ls=function(e,t){var n={};return n.eval=parseFloat(e),Od([n].concat(t[0]))},zs=function(e,t,n){return n},Bs=function(e,t,n){var r={};return r[e]=t.join(""),Od([r].concat(n[0]))},Us=function(e,t){return t},Ws=function(e,t){return t.length>0?Od([{comment:jd(e.join(""))}].concat(kd(t[0]))):{comment:e.join("")}},Vs=function(e){return e.join("")},qs=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)n.push(t[r][2]);return n},$s=function(e,t){return e+t},Hs=function(e,t,n){return e+t+n},Gs=function(){return"Y"},Ks=function(){return"G"},Xs=function(){return"R"},Ys=function(){return"B"},Js=function(e,t){return e+t},Qs=function(){return"clk"},Zs=function(){return"egt"},ec=function(){return"emt"},tc=function(){return"mct"},nc=function(e,t,n,r){var a=t;return e?a=e+a:yd({message:"Hours and minutes missing"}),e&&2==(e.match(/:/g)||[]).length&&2==e.search(":")&&yd({message:"Only 1 digit for hours normally used"}),n?a+=n:yd({message:"Only 2 digit for seconds normally used"}),r&&(yd({message:"Unusual use of millis in clock value"}),a+="."+r),a},rc=function(e,t,n){var r=t;return e?r=e+r:yd({message:"Hours and minutes missing"}),e&&2==(e.match(/:/g)||[]).length&&1==e.search(":")&&yd({message:"Only 2 digits for hours normally used"}),n?r+=n:yd({message:"Only 2 digit for seconds normally used"}),r},ac=function(e,t){return t?e+t:(yd({message:"No hours found"}),e)},ic=function(e,t){var n=e;return n+=t?t+":":":"},oc=function(e,t){var n=e;return t?n+=t+":":(n+=":",yd({message:"Only 2 digits for minutes normally used"})),n},uc=function(e){return e},sc=function(e,t){var n=t||[];return n.unshift(e),n},cc=function(e){return e},lc=function(){return""},fc=function(e,t,n,r,a,i,o){var u={};return u.fig=e||null,u.disc=t||null,u.strike=n||null,u.col=r,u.row=a,u.check=o||null,u.promotion=i,u.notation=(e||"")+(t||"")+(n||"")+r+a+(i||"")+(o||""),u},dc=function(e,t,n,r,a,i,o,u){var s={};return s.fig=e||null,s.strike="x"==r?r:null,s.col=a,s.row=i,s.notation=(e&&"P"!==e?e:"")+t+n+("x"==r?r:"-")+a+i+(o||"")+(u||""),s.check=u||null,s.promotion=o,s},hc=function(e,t,n,r,a,i){var o={};return o.fig=e||null,o.strike=t||null,o.col=n,o.row=r,o.check=i||null,o.promotion=a,o.notation=(e||"")+(t||"")+n+r+(a||"")+(i||""),o},pc=function(e){var t={};return t.notation="O-O-O"+(e||""),t.check=e||null,t},vc=function(e){var t={};return t.notation="O-O"+(e||""),t.check=e||null,t},mc=function(e,t,n){var r={};return r.fig=e,r.drop=!0,r.col=t,r.row=n,r.notation=e+"@"+t+n,r},gc=function(e){return e[1]},bc=function(e){return"="+e},yc=function(e,t){var n=t||[];return n.unshift(e),n},wc=function(e){return"$"+e},xc=function(){return"$3"},Oc=function(){return"$4"},kc=function(){return"$5"},jc=function(){return"$6"},_c=function(){return"$1"},Sc=function(){return"$2"},Ec=function(){return"$7"},Cc=function(){return"$10"},Ac=function(){return"$13"},Tc=function(){return"$14"},Nc=function(){return"$15"},Ic=function(){return"$16"},Dc=function(){return"$17"},Rc=function(){return"$18"},Fc=function(){return"$19"},Mc=function(){return"$22"},Pc=function(){return"$32"},Lc=function(){return"$36"},zc=function(){return"$40"},Bc=function(){return"$132"},Uc=function(){return"$220"},Wc=0,Vc=0,qc=[{line:1,column:1}],$c=0,Hc=[],Gc=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');u=o[n.startRule]}function Kc(){return tl(Vc,Wc)}function Xc(e,t){return{type:"literal",text:e,ignoreCase:t}}function Yc(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Jc(){return{type:"any"}}function Qc(){return{type:"end"}}function Zc(e){return{type:"other",description:e}}function el(t){var n,r=qc[t];if(r)return r;for(n=t-1;!qc[n];)n--;for(r={line:(r=qc[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return qc[t]=r,r}function tl(e,t){var n=el(e),r=el(t);return{source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function nl(e){Wc<$c||(Wc>$c&&($c=Wc,Hc=[]),Hc.push(e))}function rl(e,n,r){return new t(t.buildMessage(e,n),e,n,r)}function al(){var e,t,n,r,i,o;if(e=Wc,rf(),t=Wc,(n=il())!==a){for(r=[],i=Wc,rf(),(o=il())!==a?(Vc=i,i=ou(n,o)):(Wc=i,i=a);i!==a;)r.push(i),i=Wc,rf(),(o=il())!==a?(Vc=i,i=ou(n,o)):(Wc=i,i=a);Vc=t,t=uu(n,r)}else Wc=t,t=a;return t===a&&(t=null),Vc=e,e=su(t)}function il(){var e,t,n,r;return e=Wc,t=ol(),(n=Ef())===a&&(n=null),(r=_f())!==a?(Vc=e,e=cu(t,n,r)):(Wc=e,e=a),e}function ol(){var e,t,n,r,i,o;if(e=Wc,rf(),t=Wc,(n=ul())!==a){for(r=[],i=Wc,rf(),(o=ul())!==a?(Vc=i,i=ou(n,o)):(Wc=i,i=a);i!==a;)r.push(i),i=Wc,rf(),(o=ul())!==a?(Vc=i,i=ou(n,o)):(Wc=i,i=a);Vc=t,t=lu(n,r)}else Wc=t,t=a;return t===a&&(t=null),n=rf(),Vc=e,e=fu(t)}function ul(){var e,t;return e=Wc,Uf()!==a?(rf(),(t=sl())!==a?(rf(),Wf()!==a?(Vc=e,e=du(t)):(Wc=e,e=a)):(Wc=e,e=a)):(Wc=e,e=a),e}function sl(){var e,t,n,r,i;return e=Wc,(t=ll())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=hu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=fl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=pu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=dl())!==a?(n=rf(),(r=ff())!==a?(Vc=e,e=vu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=hl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=mu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=gl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=gu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=bl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=bu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=yl())!==a?(n=rf(),(r=kf())!==a?(Vc=e,e=yu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=wl())!==a?(n=rf(),(r=kf())!==a?(Vc=e,e=wu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=xl())!==a?(n=rf(),(r=jf())!==a?(Vc=e,e=xu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Ol())!==a?(n=rf(),(r=jf())!==a?(Vc=e,e=Ou(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=kl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=ku(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=jl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=ju(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=_l())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=_u(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Sl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Su(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=pl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Eu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=vl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Cu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=ml())!==a?(n=rf(),(r=xf())!==a?(Vc=e,e=Au(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=El())!==a?(n=rf(),(r=ff())!==a?(Vc=e,e=Tu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Cl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Nu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Al())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Iu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Tl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Du(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Nl())!==a?(n=rf(),(r=jf())!==a?(Vc=e,e=Ru(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Il())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Fu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Dl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Mu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Rl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Pu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Fl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Lu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Ml())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=zu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Pl())!==a?(n=rf(),(r=df())!==a?(Vc=e,e=Bu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Ll())!==a?(n=rf(),(r=df())!==a?(Vc=e,e=Uu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=zl())!==a?(n=rf(),(r=ff())!==a?(Vc=e,e=Wu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Bl())!==a?(n=rf(),(r=yf())!==a?(Vc=e,e=Vu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Ul())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=qu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Wl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=$u(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Vl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Hu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=ql())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Gu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=$l())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Ku(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Hl())!==a?(n=rf(),(r=jf())!==a?(Vc=e,e=Xu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Gl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Yu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Kl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Ju(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Xl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Qu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Yl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=Zu(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Jl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=es(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Ql())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=ts(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=Zl())!==a?(n=rf(),(r=uf())!==a?(Vc=e,e=ns(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=ef())!==a?(n=rf(),(r=pf())!==a?(Vc=e,e=rs(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=tf())!==a?(n=rf(),(r=gf())!==a?(Vc=e,e=as(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,(t=nf())!==a?(n=rf(),(r=gf())!==a?(Vc=e,e=is(r)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,t=Wc,Gc++,n=cl(),Gc--,n!==a?(Wc=t,t=void 0):t=a,t!==a?(n=sf(),r=rf(),(i=uf())!==a?(Vc=e,e=os(n,i)):(Wc=e,e=a)):(Wc=e,e=a),e===a&&(e=Wc,t=Wc,Gc++,n=cl(),Gc--,n===a?t=void 0:(Wc=t,t=a),t!==a?(n=sf(),r=rf(),(i=uf())!==a?(Vc=e,e=us(n,i)):(Wc=e,e=a)):(Wc=e,e=a))))))))))))))))))))))))))))))))))))))))))))))))),e}function cl(){var e;return(e=dl())===a&&(e=yl())===a&&(e=wl())===a&&(e=xl())===a&&(e=Ol())===a&&(e=ml())===a&&(e=El())===a&&(e=Nl())===a&&(e=Pl())===a&&(e=Ll())===a&&(e=zl())===a&&(e=Bl())===a&&(e=Hl())===a&&(e=ef())===a&&(e=tf())===a&&(e=nf()),e}function ll(){var t;return e.substr(Wc,5)===s?(t=s,Wc+=5):(t=a,0===Gc&&nl(ir)),t===a&&(e.substr(Wc,5)===c?(t=c,Wc+=5):(t=a,0===Gc&&nl(or))),t}function fl(){var t;return e.substr(Wc,4)===l?(t=l,Wc+=4):(t=a,0===Gc&&nl(ur)),t===a&&(e.substr(Wc,4)===f?(t=f,Wc+=4):(t=a,0===Gc&&nl(sr))),t}function dl(){var t;return e.substr(Wc,4)===d?(t=d,Wc+=4):(t=a,0===Gc&&nl(cr)),t===a&&(e.substr(Wc,4)===h?(t=h,Wc+=4):(t=a,0===Gc&&nl(lr))),t}function hl(){var t;return e.substr(Wc,5)===p?(t=p,Wc+=5):(t=a,0===Gc&&nl(fr)),t===a&&(e.substr(Wc,5)===v?(t=v,Wc+=5):(t=a,0===Gc&&nl(dr))),t}function pl(){var t;return e.substr(Wc,5)===m?(t=m,Wc+=5):(t=a,0===Gc&&nl(hr)),t===a&&(e.substr(Wc,5)===g?(t=g,Wc+=5):(t=a,0===Gc&&nl(pr))),t}function vl(){var t;return e.substr(Wc,5)===b?(t=b,Wc+=5):(t=a,0===Gc&&nl(vr)),t===a&&(e.substr(Wc,5)===y?(t=y,Wc+=5):(t=a,0===Gc&&nl(mr))),t}function ml(){var t;return e.substr(Wc,6)===w?(t=w,Wc+=6):(t=a,0===Gc&&nl(gr)),t===a&&(e.substr(Wc,6)===x?(t=x,Wc+=6):(t=a,0===Gc&&nl(br))),t}function gl(){var t;return e.substr(Wc,10)===O?(t=O,Wc+=10):(t=a,0===Gc&&nl(yr)),t===a&&(e.substr(Wc,10)===k?(t=k,Wc+=10):(t=a,0===Gc&&nl(wr)),t===a&&(e.substr(Wc,10)===j?(t=j,Wc+=10):(t=a,0===Gc&&nl(xr)),t===a&&(e.substr(Wc,10)===_?(t=_,Wc+=10):(t=a,0===Gc&&nl(Or))))),t}function bl(){var t;return e.substr(Wc,10)===S?(t=S,Wc+=10):(t=a,0===Gc&&nl(kr)),t===a&&(e.substr(Wc,10)===E?(t=E,Wc+=10):(t=a,0===Gc&&nl(jr)),t===a&&(e.substr(Wc,10)===C?(t=C,Wc+=10):(t=a,0===Gc&&nl(_r)),t===a&&(e.substr(Wc,10)===A?(t=A,Wc+=10):(t=a,0===Gc&&nl(Sr))))),t}function yl(){var t;return e.substr(Wc,8)===T?(t=T,Wc+=8):(t=a,0===Gc&&nl(Er)),t===a&&(e.substr(Wc,8)===N?(t=N,Wc+=8):(t=a,0===Gc&&nl(Cr)),t===a&&(e.substr(Wc,8)===I?(t=I,Wc+=8):(t=a,0===Gc&&nl(Ar)),t===a&&(e.substr(Wc,8)===D?(t=D,Wc+=8):(t=a,0===Gc&&nl(Tr)),t===a&&(e.substr(Wc,8)===R?(t=R,Wc+=8):(t=a,0===Gc&&nl(Nr)))))),t}function wl(){var t;return e.substr(Wc,8)===F?(t=F,Wc+=8):(t=a,0===Gc&&nl(Ir)),t===a&&(e.substr(Wc,8)===M?(t=M,Wc+=8):(t=a,0===Gc&&nl(Dr)),t===a&&(e.substr(Wc,8)===P?(t=P,Wc+=8):(t=a,0===Gc&&nl(Rr)),t===a&&(e.substr(Wc,8)===L?(t=L,Wc+=8):(t=a,0===Gc&&nl(Fr)),t===a&&(e.substr(Wc,8)===z?(t=z,Wc+=8):(t=a,0===Gc&&nl(Mr)))))),t}function xl(){var t;return e.substr(Wc,9)===B?(t=B,Wc+=9):(t=a,0===Gc&&nl(Pr)),t===a&&(e.substr(Wc,9)===U?(t=U,Wc+=9):(t=a,0===Gc&&nl(Lr)),t===a&&(e.substr(Wc,9)===W?(t=W,Wc+=9):(t=a,0===Gc&&nl(zr)),t===a&&(e.substr(Wc,9)===V?(t=V,Wc+=9):(t=a,0===Gc&&nl(Br)),t===a&&(e.substr(Wc,9)===q?(t=q,Wc+=9):(t=a,0===Gc&&nl(Ur)))))),t}function Ol(){var t;return e.substr(Wc,9)===$?(t=$,Wc+=9):(t=a,0===Gc&&nl(Wr)),t===a&&(e.substr(Wc,9)===H?(t=H,Wc+=9):(t=a,0===Gc&&nl(Vr)),t===a&&(e.substr(Wc,9)===G?(t=G,Wc+=9):(t=a,0===Gc&&nl(qr)),t===a&&(e.substr(Wc,9)===K?(t=K,Wc+=9):(t=a,0===Gc&&nl($r)),t===a&&(e.substr(Wc,9)===X?(t=X,Wc+=9):(t=a,0===Gc&&nl(Hr)))))),t}function kl(){var t;return e.substr(Wc,7)===Y?(t=Y,Wc+=7):(t=a,0===Gc&&nl(Gr)),t===a&&(e.substr(Wc,7)===J?(t=J,Wc+=7):(t=a,0===Gc&&nl(Kr)),t===a&&(e.substr(Wc,7)===Q?(t=Q,Wc+=7):(t=a,0===Gc&&nl(Xr)),t===a&&(e.substr(Wc,7)===Z?(t=Z,Wc+=7):(t=a,0===Gc&&nl(Yr)),t===a&&(e.substr(Wc,7)===ee?(t=ee,Wc+=7):(t=a,0===Gc&&nl(Jr)),t===a&&(e.substr(Wc,7)===te?(t=te,Wc+=7):(t=a,0===Gc&&nl(Qr))))))),t}function jl(){var t;return e.substr(Wc,7)===ne?(t=ne,Wc+=7):(t=a,0===Gc&&nl(Zr)),t===a&&(e.substr(Wc,7)===re?(t=re,Wc+=7):(t=a,0===Gc&&nl(ea)),t===a&&(e.substr(Wc,7)===ae?(t=ae,Wc+=7):(t=a,0===Gc&&nl(ta)),t===a&&(e.substr(Wc,7)===ie?(t=ie,Wc+=7):(t=a,0===Gc&&nl(na)),t===a&&(e.substr(Wc,7)===oe?(t=oe,Wc+=7):(t=a,0===Gc&&nl(ra)),t===a&&(e.substr(Wc,7)===ue?(t=ue,Wc+=7):(t=a,0===Gc&&nl(aa))))))),t}function _l(){var t;return e.substr(Wc,9)===se?(t=se,Wc+=9):(t=a,0===Gc&&nl(ia)),t===a&&(e.substr(Wc,9)===ce?(t=ce,Wc+=9):(t=a,0===Gc&&nl(oa)),t===a&&(e.substr(Wc,9)===le?(t=le,Wc+=9):(t=a,0===Gc&&nl(ua)),t===a&&(e.substr(Wc,9)===fe?(t=fe,Wc+=9):(t=a,0===Gc&&nl(sa))))),t}function Sl(){var t;return e.substr(Wc,9)===de?(t=de,Wc+=9):(t=a,0===Gc&&nl(ca)),t===a&&(e.substr(Wc,9)===he?(t=he,Wc+=9):(t=a,0===Gc&&nl(la)),t===a&&(e.substr(Wc,9)===pe?(t=pe,Wc+=9):(t=a,0===Gc&&nl(fa)),t===a&&(e.substr(Wc,9)===ve?(t=ve,Wc+=9):(t=a,0===Gc&&nl(da))))),t}function El(){var t;return e.substr(Wc,9)===me?(t=me,Wc+=9):(t=a,0===Gc&&nl(ha)),t===a&&(e.substr(Wc,9)===ge?(t=ge,Wc+=9):(t=a,0===Gc&&nl(pa)),t===a&&(e.substr(Wc,9)===be?(t=be,Wc+=9):(t=a,0===Gc&&nl(va)),t===a&&(e.substr(Wc,9)===ye?(t=ye,Wc+=9):(t=a,0===Gc&&nl(ma))))),t}function Cl(){var t;return e.substr(Wc,12)===we?(t=we,Wc+=12):(t=a,0===Gc&&nl(ga)),t===a&&(e.substr(Wc,12)===xe?(t=xe,Wc+=12):(t=a,0===Gc&&nl(ba)),t===a&&(e.substr(Wc,12)===Oe?(t=Oe,Wc+=12):(t=a,0===Gc&&nl(ya)),t===a&&(e.substr(Wc,12)===ke?(t=ke,Wc+=12):(t=a,0===Gc&&nl(wa))))),t}function Al(){var t;return e.substr(Wc,7)===je?(t=je,Wc+=7):(t=a,0===Gc&&nl(xa)),t===a&&(e.substr(Wc,7)===_e?(t=_e,Wc+=7):(t=a,0===Gc&&nl(Oa))),t}function Tl(){var t;return e.substr(Wc,5)===Se?(t=Se,Wc+=5):(t=a,0===Gc&&nl(ka)),t===a&&(e.substr(Wc,5)===Ee?(t=Ee,Wc+=5):(t=a,0===Gc&&nl(ja))),t}function Nl(){var t;return e.substr(Wc,5)===Ce?(t=Ce,Wc+=5):(t=a,0===Gc&&nl(_a)),t===a&&(e.substr(Wc,5)===Ae?(t=Ae,Wc+=5):(t=a,0===Gc&&nl(Sa))),t}function Il(){var t;return e.substr(Wc,7)===Te?(t=Te,Wc+=7):(t=a,0===Gc&&nl(Ea)),t===a&&(e.substr(Wc,7)===Ne?(t=Ne,Wc+=7):(t=a,0===Gc&&nl(Ca))),t}function Dl(){var t;return e.substr(Wc,9)===Ie?(t=Ie,Wc+=9):(t=a,0===Gc&&nl(Aa)),t===a&&(e.substr(Wc,9)===De?(t=De,Wc+=9):(t=a,0===Gc&&nl(Ta))),t}function Rl(){var t;return e.substr(Wc,12)===Re?(t=Re,Wc+=12):(t=a,0===Gc&&nl(Na)),t===a&&(e.substr(Wc,12)===Fe?(t=Fe,Wc+=12):(t=a,0===Gc&&nl(Ia)),t===a&&(e.substr(Wc,12)===Me?(t=Me,Wc+=12):(t=a,0===Gc&&nl(Da)),t===a&&(e.substr(Wc,12)===Pe?(t=Pe,Wc+=12):(t=a,0===Gc&&nl(Ra))))),t}function Fl(){var t;return e.substr(Wc,3)===Le?(t=Le,Wc+=3):(t=a,0===Gc&&nl(Fa)),t===a&&(e.substr(Wc,3)===ze?(t=ze,Wc+=3):(t=a,0===Gc&&nl(Ma)),t===a&&(e.substr(Wc,3)===Be?(t=Be,Wc+=3):(t=a,0===Gc&&nl(Pa)))),t}function Ml(){var t;return e.substr(Wc,3)===Ue?(t=Ue,Wc+=3):(t=a,0===Gc&&nl(La)),t===a&&(e.substr(Wc,3)===We?(t=We,Wc+=3):(t=a,0===Gc&&nl(za)),t===a&&(e.substr(Wc,3)===Ve?(t=Ve,Wc+=3):(t=a,0===Gc&&nl(Ba)))),t}function Pl(){var t;return e.substr(Wc,4)===qe?(t=qe,Wc+=4):(t=a,0===Gc&&nl(Ua)),t===a&&(e.substr(Wc,4)===$e?(t=$e,Wc+=4):(t=a,0===Gc&&nl(Wa))),t}function Ll(){var t;return e.substr(Wc,7)===He?(t=He,Wc+=7):(t=a,0===Gc&&nl(Va)),t===a&&(e.substr(Wc,7)===Ge?(t=Ge,Wc+=7):(t=a,0===Gc&&nl(qa)),t===a&&(e.substr(Wc,7)===Ke?(t=Ke,Wc+=7):(t=a,0===Gc&&nl($a)),t===a&&(e.substr(Wc,7)===Xe?(t=Xe,Wc+=7):(t=a,0===Gc&&nl(Ha)),t===a&&(e.substr(Wc,7)===Ye?(t=Ye,Wc+=7):(t=a,0===Gc&&nl(Ga)),t===a&&(e.substr(Wc,7)===Je?(t=Je,Wc+=7):(t=a,0===Gc&&nl(Ka))))))),t}function zl(){var t;return e.substr(Wc,7)===Qe?(t=Qe,Wc+=7):(t=a,0===Gc&&nl(Xa)),t===a&&(e.substr(Wc,7)===Ze?(t=Ze,Wc+=7):(t=a,0===Gc&&nl(Ya)),t===a&&(e.substr(Wc,7)===et?(t=et,Wc+=7):(t=a,0===Gc&&nl(Ja)),t===a&&(e.substr(Wc,7)===tt?(t=tt,Wc+=7):(t=a,0===Gc&&nl(Qa)),t===a&&(e.substr(Wc,7)===nt?(t=nt,Wc+=7):(t=a,0===Gc&&nl(Za)),t===a&&(e.substr(Wc,7)===rt?(t=rt,Wc+=7):(t=a,0===Gc&&nl(ei))))))),t}function Bl(){var t;return e.substr(Wc,11)===at?(t=at,Wc+=11):(t=a,0===Gc&&nl(ti)),t===a&&(e.substr(Wc,11)===it?(t=it,Wc+=11):(t=a,0===Gc&&nl(ni)),t===a&&(e.substr(Wc,11)===ot?(t=ot,Wc+=11):(t=a,0===Gc&&nl(ri)),t===a&&(e.substr(Wc,11)===ut?(t=ut,Wc+=11):(t=a,0===Gc&&nl(ai))))),t}function Ul(){var t;return e.substr(Wc,5)===st?(t=st,Wc+=5):(t=a,0===Gc&&nl(ii)),t===a&&(e.substr(Wc,5)===ct?(t=ct,Wc+=5):(t=a,0===Gc&&nl(oi)),t===a&&(e.substr(Wc,5)===lt?(t=lt,Wc+=5):(t=a,0===Gc&&nl(ui)),t===a&&(e.substr(Wc,5)===ft?(t=ft,Wc+=5):(t=a,0===Gc&&nl(si))))),t}function Wl(){var t;return e.substr(Wc,3)===dt?(t=dt,Wc+=3):(t=a,0===Gc&&nl(ci)),t===a&&(e.substr(Wc,3)===ht?(t=ht,Wc+=3):(t=a,0===Gc&&nl(li)),t===a&&(e.substr(Wc,3)===pt?(t=pt,Wc+=3):(t=a,0===Gc&&nl(fi)))),t}function Vl(){var t;return e.substr(Wc,11)===vt?(t=vt,Wc+=11):(t=a,0===Gc&&nl(di)),t===a&&(e.substr(Wc,11)===mt?(t=mt,Wc+=11):(t=a,0===Gc&&nl(hi))),t}function ql(){var t;return e.substr(Wc,9)===gt?(t=gt,Wc+=9):(t=a,0===Gc&&nl(pi)),t===a&&(e.substr(Wc,9)===bt?(t=bt,Wc+=9):(t=a,0===Gc&&nl(vi))),t}function $l(){var t;return e.substr(Wc,4)===yt?(t=yt,Wc+=4):(t=a,0===Gc&&nl(mi)),t===a&&(e.substr(Wc,4)===wt?(t=wt,Wc+=4):(t=a,0===Gc&&nl(gi))),t}function Hl(){var t;return e.substr(Wc,8)===xt?(t=xt,Wc+=8):(t=a,0===Gc&&nl(bi)),t===a&&(e.substr(Wc,8)===Ot?(t=Ot,Wc+=8):(t=a,0===Gc&&nl(yi)),t===a&&(e.substr(Wc,8)===kt?(t=kt,Wc+=8):(t=a,0===Gc&&nl(wi)),t===a&&(e.substr(Wc,8)===jt?(t=jt,Wc+=8):(t=a,0===Gc&&nl(xi))))),t}function Gl(){var t;return e.substr(Wc,7)===_t?(t=_t,Wc+=7):(t=a,0===Gc&&nl(Oi)),t===a&&(e.substr(Wc,7)===St?(t=St,Wc+=7):(t=a,0===Gc&&nl(ki))),t}function Kl(){var t;return e.substr(Wc,15)===Et?(t=Et,Wc+=15):(t=a,0===Gc&&nl(ji)),t}function Xl(){var t;return e.substr(Wc,15)===Ct?(t=Ct,Wc+=15):(t=a,0===Gc&&nl(_i)),t}function Yl(){var t;return e.substr(Wc,11)===At?(t=At,Wc+=11):(t=a,0===Gc&&nl(Si)),t}function Jl(){var t;return e.substr(Wc,11)===Tt?(t=Tt,Wc+=11):(t=a,0===Gc&&nl(Ei)),t}function Ql(){var t;return e.substr(Wc,9)===Nt?(t=Nt,Wc+=9):(t=a,0===Gc&&nl(Ci)),t}function Zl(){var t;return e.substr(Wc,9)===It?(t=It,Wc+=9):(t=a,0===Gc&&nl(Ai)),t}function ef(){var t;return e.substr(Wc,5)===Dt?(t=Dt,Wc+=5):(t=a,0===Gc&&nl(Ti)),t}function tf(){var t;return e.substr(Wc,10)===Rt?(t=Rt,Wc+=10):(t=a,0===Gc&&nl(Ni)),t}function nf(){var t;return e.substr(Wc,10)===Ft?(t=Ft,Wc+=10):(t=a,0===Gc&&nl(Ii)),t}function rf(){var t,n;for(Gc++,t=[],Xn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Ri));n!==a;)t.push(n),Xn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Ri));return Gc--,n=a,0===Gc&&nl(Di),t}function af(){var t,n;if(t=[],Xn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Ri)),n!==a)for(;n!==a;)t.push(n),Xn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Ri));else t=a;return t}function of(){var t,n;if(t=[],Yn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Fi)),n!==a)for(;n!==a;)t.push(n),Yn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Fi));else t=a;return t}function uf(){var e,t,n;if(Gc++,e=Wc,cf()!==a){for(t=[],n=lf();n!==a;)t.push(n),n=lf();(n=cf())!==a?(Vc=e,e=ss(t)):(Wc=e,e=a)}else Wc=e,e=a;return Gc--,e===a&&0===Gc&&nl(Mi),e}function sf(){var t,n,r;for(t=Wc,n=[],Jn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Pi));r!==a;)n.push(r),Jn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Pi));return Vc=t,t=n=ss(n)}function cf(){var t;return 34===e.charCodeAt(Wc)?(t=Mt,Wc++):(t=a,0===Gc&&nl(Li)),t}function lf(){var t,n,r;return t=Wc,n=Wc,Gc++,r=cf(),Gc--,r===a?n=void 0:(Wc=n,n=a),n!==a?(e.length>Wc?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(zi)),r!==a?(Vc=t,t=cs(r)):(Wc=t,t=a)):(Wc=t,t=a),t}function ff(){var t,n,r,i,o,u,s,c;return t=Wc,cf()!==a?(n=Wc,Qn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Bi)),r!==a?(Qn.test(e.charAt(Wc))?(i=e.charAt(Wc),Wc++):(i=a,0===Gc&&nl(Bi)),i!==a?(Qn.test(e.charAt(Wc))?(o=e.charAt(Wc),Wc++):(o=a,0===Gc&&nl(Bi)),o!==a?(Qn.test(e.charAt(Wc))?(u=e.charAt(Wc),Wc++):(u=a,0===Gc&&nl(Bi)),u!==a?n=r=[r,i,o,u]:(Wc=n,n=a)):(Wc=n,n=a)):(Wc=n,n=a)):(Wc=n,n=a),n!==a?(46===e.charCodeAt(Wc)?(r=Pt,Wc++):(r=a,0===Gc&&nl(Ui)),r!==a?(i=Wc,Qn.test(e.charAt(Wc))?(o=e.charAt(Wc),Wc++):(o=a,0===Gc&&nl(Bi)),o!==a?(Qn.test(e.charAt(Wc))?(u=e.charAt(Wc),Wc++):(u=a,0===Gc&&nl(Bi)),u!==a?i=o=[o,u]:(Wc=i,i=a)):(Wc=i,i=a),i!==a?(46===e.charCodeAt(Wc)?(o=Pt,Wc++):(o=a,0===Gc&&nl(Ui)),o!==a?(u=Wc,Qn.test(e.charAt(Wc))?(s=e.charAt(Wc),Wc++):(s=a,0===Gc&&nl(Bi)),s!==a?(Qn.test(e.charAt(Wc))?(c=e.charAt(Wc),Wc++):(c=a,0===Gc&&nl(Bi)),c!==a?u=s=[s,c]:(Wc=u,u=a)):(Wc=u,u=a),u!==a&&(s=cf())!==a?(Vc=t,t=ls(n,i,u)):(Wc=t,t=a)):(Wc=t,t=a)):(Wc=t,t=a)):(Wc=t,t=a)):(Wc=t,t=a)):(Wc=t,t=a),t}function df(){var t,n,r,i,o,u,s;if(t=Wc,cf()!==a){if(n=[],Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi)),r!==a)for(;r!==a;)n.push(r),Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi));else n=a;if(n!==a)if(58===e.charCodeAt(Wc)?(r=Lt,Wc++):(r=a,0===Gc&&nl(Vi)),r!==a){if(i=[],Zn.test(e.charAt(Wc))?(o=e.charAt(Wc),Wc++):(o=a,0===Gc&&nl(Wi)),o!==a)for(;o!==a;)i.push(o),Zn.test(e.charAt(Wc))?(o=e.charAt(Wc),Wc++):(o=a,0===Gc&&nl(Wi));else i=a;if(i!==a)if(58===e.charCodeAt(Wc)?(o=Lt,Wc++):(o=a,0===Gc&&nl(Vi)),o!==a){if(u=[],Zn.test(e.charAt(Wc))?(s=e.charAt(Wc),Wc++):(s=a,0===Gc&&nl(Wi)),s!==a)for(;s!==a;)u.push(s),Zn.test(e.charAt(Wc))?(s=e.charAt(Wc),Wc++):(s=a,0===Gc&&nl(Wi));else u=a;u!==a?((s=hf())===a&&(s=null),cf()!==a?(Vc=t,t=fs(n,i,u,s)):(Wc=t,t=a)):(Wc=t,t=a)}else Wc=t,t=a;else Wc=t,t=a}else Wc=t,t=a;else Wc=t,t=a}else Wc=t,t=a;return t}function hf(){var t,n,r,i;if(t=Wc,46===e.charCodeAt(Wc)?(n=Pt,Wc++):(n=a,0===Gc&&nl(Ui)),n!==a){if(r=[],Zn.test(e.charAt(Wc))?(i=e.charAt(Wc),Wc++):(i=a,0===Gc&&nl(Wi)),i!==a)for(;i!==a;)r.push(i),Zn.test(e.charAt(Wc))?(i=e.charAt(Wc),Wc++):(i=a,0===Gc&&nl(Wi));else r=a;r!==a?(Vc=t,t=ds(r)):(Wc=t,t=a)}else Wc=t,t=a;return t}function pf(){var e,t;return e=Wc,cf()!==a&&(t=vf())!==a&&cf()!==a?(Vc=e,e=hs(t)):(Wc=e,e=a),e}function vf(){var t,n,r,i;return t=Wc,(n=mf())!==a?(47===e.charCodeAt(Wc)?(r=zt,Wc++):(r=a,0===Gc&&nl(qi)),r!==a&&(i=bf())!==a?(Vc=t,t=ps(n,i)):(Wc=t,t=a)):(Wc=t,t=a),t}function mf(){var t;return 66===e.charCodeAt(Wc)?(t=Bt,Wc++):(t=a,0===Gc&&nl($i)),t===a&&(87===e.charCodeAt(Wc)?(t=Ut,Wc++):(t=a,0===Gc&&nl(Hi)),t===a&&(78===e.charCodeAt(Wc)?(t=Wt,Wc++):(t=a,0===Gc&&nl(Gi)))),t}function gf(){var e,t;return e=Wc,cf()!==a&&(t=bf())!==a&&cf()!==a?(Vc=e,e=hs(t)):(Wc=e,e=a),e}function bf(){var e,t;return e=Wc,(t=Hf())!==a&&(Vc=e,t=hs(t)),e=t}function yf(){var e,t;return e=Wc,cf()!==a&&(t=wf())!==a&&cf()!==a?(Vc=e,e=vs(t)):(Wc=e,e=a),e}function wf(){var t,n,r,i;return t=Wc,63===e.charCodeAt(Wc)?(n=Vt,Wc++):(n=a,0===Gc&&nl(Ki)),n!==a&&(Vc=t,n=ms()),(t=n)===a&&(t=Wc,45===e.charCodeAt(Wc)?(n=qt,Wc++):(n=a,0===Gc&&nl(Xi)),n!==a&&(Vc=t,n=gs()),(t=n)===a&&(t=Wc,(n=rd())!==a?(47===e.charCodeAt(Wc)?(r=zt,Wc++):(r=a,0===Gc&&nl(qi)),r!==a&&(i=rd())!==a?(Vc=t,t=bs(n,i)):(Wc=t,t=a)):(Wc=t,t=a),t===a&&(t=Wc,(n=rd())!==a?(43===e.charCodeAt(Wc)?(r=$t,Wc++):(r=a,0===Gc&&nl(Yi)),r!==a&&(i=rd())!==a?(Vc=t,t=ys(n,i)):(Wc=t,t=a)):(Wc=t,t=a),t===a&&(t=Wc,(n=rd())!==a&&(Vc=t,n=ws(n)),(t=n)===a&&(t=Wc,42===e.charCodeAt(Wc)?(n=Ht,Wc++):(n=a,0===Gc&&nl(Ji)),n!==a&&(r=rd())!==a?(Vc=t,t=xs(r)):(Wc=t,t=a)))))),t}function xf(){var e,t;return e=Wc,cf()!==a&&(t=Of())!==a&&cf()!==a?(Vc=e,e=vs(t)):(Wc=e,e=a),e}function Of(){var t,n;return t=Wc,e.substr(Wc,3)===Gt?(n=Gt,Wc+=3):(n=a,0===Gc&&nl(Qi)),n!==a&&(Vc=t,n=Os(n)),(t=n)===a&&(t=Wc,e.substr(Wc,3)===Kt?(n=Kt,Wc+=3):(n=a,0===Gc&&nl(Zi)),n!==a&&(Vc=t,n=vs(n)),(t=n)===a&&(t=Wc,e.substr(Wc,7)===Xt?(n=Xt,Wc+=7):(n=a,0===Gc&&nl(eo)),n!==a&&(Vc=t,n=vs(n)),(t=n)===a&&(t=Wc,42===e.charCodeAt(Wc)?(n=Ht,Wc++):(n=a,0===Gc&&nl(Ji)),n!==a&&(Vc=t,n=vs(n)),t=n))),t}function kf(){var t,n,r,i;return(t=jf())===a&&(t=Wc,(n=cf())!==a?(45===e.charCodeAt(Wc)?(r=qt,Wc++):(r=a,0===Gc&&nl(Xi)),r!==a&&(i=cf())!==a?t=n=[n,r,i]:(Wc=t,t=a)):(Wc=t,t=a)),t}function jf(){var t,n,r;if(t=Wc,cf()!==a){if(n=[],Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi)),r!==a)for(;r!==a;)n.push(r),Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi));else n=a;n!==a&&(r=cf())!==a?(Vc=t,t=ks(n)):(Wc=t,t=a)}else Wc=t,t=a;return t}function _f(){var e,t,n,r,i,o,u,s;return e=Wc,rf(),(t=Ef())===a&&(t=null),rf(),(n=td())===a&&(n=null),rf(),(r=id())!==a?(rf(),(i=sd())===a&&(i=null),rf(),(o=Ef())===a&&(o=null),rf(),(u=Qf())===a&&(u=null),(s=_f())===a&&(s=null),Vc=e,e=js(t,n,r,i,o,u,s)):(Wc=e,e=a),e===a&&(e=Wc,rf(),(t=Sf())!==a?(rf(),Vc=e,e=_s(t)):(Wc=e,e=a)),e}function Sf(){var e,t;return e=Wc,(t=Of())!==a&&(Vc=e,t=Ss(t)),e=t}function Ef(){var e,t,n,r,i;if(e=Wc,(t=Cf())!==a){for(n=[],r=Wc,rf(),(i=Cf())!==a?(Vc=r,r=Es(t,i)):(Wc=r,r=a);r!==a;)n.push(r),r=Wc,rf(),(i=Cf())!==a?(Vc=r,r=Es(t,i)):(Wc=r,r=a);Vc=e,e=Cs(t,n)}else Wc=e,e=a;return e}function Cf(){var e,t,n;return e=Wc,(t=zf())!==a&&(n=Af())!==a&&Bf()!==a?(Vc=e,e=As(n)):(Wc=e,e=a),e===a&&(e=Wc,(t=If())!==a&&(Vc=e,t=Ts(t)),e=t),e}function Af(){var t,n,r,i,o,u,s,c,l,f,d,h;if(t=Wc,n=rf(),(r=Uf())!==a)if(e.substr(Wc,4)===Yt?(i=Yt,Wc+=4):(i=a,0===Gc&&nl(to)),i!==a)if((o=af())!==a)if((u=Df())!==a)if(s=rf(),(c=Wf())!==a){for(rf(),l=[],f=Wc,(d=Af())!==a&&(Vc=f,d=Ns(u,d)),f=d;f!==a;)l.push(f),f=Wc,(d=Af())!==a&&(Vc=f,d=Ns(u,d)),f=d;Vc=t,t=Is(u,l)}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=rf(),(r=Uf())!==a)if(e.substr(Wc,4)===Jt?(i=Jt,Wc+=4):(i=a,0===Gc&&nl(no)),i!==a)if((o=af())!==a)if((u=Ff())!==a)if(s=rf(),(c=Wf())!==a){for(rf(),l=[],f=Wc,(d=Af())!==a&&(Vc=f,d=Ds(u,d)),f=d;f!==a;)l.push(f),f=Wc,(d=Af())!==a&&(Vc=f,d=Ds(u,d)),f=d;Vc=t,t=Rs(u,l)}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=rf(),(r=Uf())!==a)if(37===e.charCodeAt(Wc)?(i=Qt,Wc++):(i=a,0===Gc&&nl(ro)),i!==a)if((o=qf())!==a)if((u=af())!==a)if((s=Hf())!==a)if(c=rf(),Wf()!==a){for(l=rf(),f=[],d=Wc,(h=Af())!==a&&(Vc=d,h=Fs(o,s,h)),d=h;d!==a;)f.push(d),d=Wc,(h=Af())!==a&&(Vc=d,h=Fs(o,s,h)),d=h;Vc=t,t=Ms(o,s,f)}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=rf(),(r=Uf())!==a)if(37===e.charCodeAt(Wc)?(i=Qt,Wc++):(i=a,0===Gc&&nl(ro)),i!==a)if((o=$f())!==a)if((u=af())!==a)if((s=Gf())!==a)if(c=rf(),Wf()!==a){for(l=rf(),f=[],d=Wc,(h=Af())!==a&&(Vc=d,h=Fs(o,s,h)),d=h;d!==a;)f.push(d),d=Wc,(h=Af())!==a&&(Vc=d,h=Fs(o,s,h)),d=h;Vc=t,t=Ms(o,s,f)}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=rf(),(r=Uf())!==a)if(e.substr(Wc,5)===Zt?(i=Zt,Wc+=5):(i=a,0===Gc&&nl(ao)),i!==a)if((o=af())!==a)if(u=sf(),s=rf(),(c=Wf())!==a){for(rf(),l=[],f=Wc,(d=Af())!==a&&(Vc=f,d=Ps(u,d)),f=d;f!==a;)l.push(f),f=Wc,(d=Af())!==a&&(Vc=f,d=Ps(u,d)),f=d;Vc=t,t=Ls(u,l)}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=rf(),(r=Uf())!==a)if(37===e.charCodeAt(Wc)?(i=Qt,Wc++):(i=a,0===Gc&&nl(ro)),i!==a)if(o=sf(),(u=af())!==a){if(s=[],(c=Nf())!==a)for(;c!==a;)s.push(c),c=Nf();else s=a;if(s!==a)if((c=Wf())!==a){for(rf(),l=[],f=Wc,(d=Af())!==a&&(Vc=f,d=zs(o,s,d)),f=d;f!==a;)l.push(f),f=Wc,(d=Af())!==a&&(Vc=f,d=zs(o,s,d)),f=d;Vc=t,t=Bs(o,s,l)}else Wc=t,t=a;else Wc=t,t=a}else Wc=t,t=a;else Wc=t,t=a;else Wc=t,t=a;if(t===a){if(t=Wc,n=[],(r=Tf())!==a)for(;r!==a;)n.push(r),r=Tf();else n=a;if(n!==a){for(r=[],i=Wc,o=rf(),(u=Af())!==a?(Vc=i,i=Us(n,u)):(Wc=i,i=a);i!==a;)r.push(i),i=Wc,o=rf(),(u=Af())!==a?(Vc=i,i=Us(n,u)):(Wc=i,i=a);Vc=t,t=Ws(n,r)}else Wc=t,t=a}}}}}}return t}function Tf(){var t,n,r,i;return t=Wc,n=Wc,Gc++,e.substr(Wc,2)===en?(r=en,Wc+=2):(r=a,0===Gc&&nl(io)),Gc--,r===a?n=void 0:(Wc=n,n=a),n!==a?(r=Wc,Gc++,125===e.charCodeAt(Wc)?(i=tn,Wc++):(i=a,0===Gc&&nl(oo)),Gc--,i===a?r=void 0:(Wc=r,r=a),r!==a?(e.length>Wc?(i=e.charAt(Wc),Wc++):(i=a,0===Gc&&nl(zi)),i!==a?(Vc=t,t=cs(i)):(Wc=t,t=a)):(Wc=t,t=a)):(Wc=t,t=a),t}function Nf(){var t,n,r;return t=Wc,n=Wc,Gc++,r=Wf(),Gc--,r===a?n=void 0:(Wc=n,n=a),n!==a?(e.length>Wc?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(zi)),r!==a?(Vc=t,t=cs(r)):(Wc=t,t=a)):(Wc=t,t=a),t}function If(){var t,n,r;if(t=Wc,Vf()!==a){for(n=[],er.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(uo));r!==a;)n.push(r),er.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(uo));(r=of())!==a?(Vc=t,t=Vs(n)):(Wc=t,t=a)}else Wc=t,t=a;return t}function Df(){var t,n,r,i,o,u,s;if(t=Wc,(n=Rf())!==a){for(rf(),r=[],i=Wc,44===e.charCodeAt(Wc)?(o=nn,Wc++):(o=a,0===Gc&&nl(so)),o!==a?(u=rf(),(s=Rf())!==a?i=o=[o,u,s]:(Wc=i,i=a)):(Wc=i,i=a);i!==a;)r.push(i),i=Wc,44===e.charCodeAt(Wc)?(o=nn,Wc++):(o=a,0===Gc&&nl(so)),o!==a?(u=rf(),(s=Rf())!==a?i=o=[o,u,s]:(Wc=i,i=a)):(Wc=i,i=a);Vc=t,t=qs(n,r)}else Wc=t,t=a;return t}function Rf(){var e,t,n;return e=Wc,(t=Pf())!==a&&(n=Lf())!==a?(Vc=e,e=$s(t,n)):(Wc=e,e=a),e}function Ff(){var t,n,r,i,o,u,s;if(t=Wc,(n=Mf())!==a){for(rf(),r=[],i=Wc,44===e.charCodeAt(Wc)?(o=nn,Wc++):(o=a,0===Gc&&nl(so)),o!==a?(u=rf(),(s=Mf())!==a?i=o=[o,u,s]:(Wc=i,i=a)):(Wc=i,i=a);i!==a;)r.push(i),i=Wc,44===e.charCodeAt(Wc)?(o=nn,Wc++):(o=a,0===Gc&&nl(so)),o!==a?(u=rf(),(s=Mf())!==a?i=o=[o,u,s]:(Wc=i,i=a)):(Wc=i,i=a);Vc=t,t=qs(n,r)}else Wc=t,t=a;return t}function Mf(){var e,t,n,r;return e=Wc,(t=Pf())!==a&&(n=Lf())!==a&&(r=Lf())!==a?(Vc=e,e=Hs(t,n,r)):(Wc=e,e=a),e}function Pf(){var t,n;return t=Wc,89===e.charCodeAt(Wc)?(n=rn,Wc++):(n=a,0===Gc&&nl(co)),n!==a&&(Vc=t,n=Gs()),(t=n)===a&&(t=Wc,71===e.charCodeAt(Wc)?(n=an,Wc++):(n=a,0===Gc&&nl(lo)),n!==a&&(Vc=t,n=Ks()),(t=n)===a&&(t=Wc,82===e.charCodeAt(Wc)?(n=on,Wc++):(n=a,0===Gc&&nl(fo)),n!==a&&(Vc=t,n=Xs()),(t=n)===a&&(t=Wc,66===e.charCodeAt(Wc)?(n=Bt,Wc++):(n=a,0===Gc&&nl($i)),n!==a&&(Vc=t,n=Ys()),t=n))),t}function Lf(){var e,t,n;return e=Wc,(t=pd())!==a&&(n=vd())!==a?(Vc=e,e=Js(t,n)):(Wc=e,e=a),e}function zf(){var t;return 123===e.charCodeAt(Wc)?(t=un,Wc++):(t=a,0===Gc&&nl(ho)),t}function Bf(){var t;return 125===e.charCodeAt(Wc)?(t=tn,Wc++):(t=a,0===Gc&&nl(oo)),t}function Uf(){var t;return 91===e.charCodeAt(Wc)?(t=sn,Wc++):(t=a,0===Gc&&nl(po)),t}function Wf(){var t;return 93===e.charCodeAt(Wc)?(t=cn,Wc++):(t=a,0===Gc&&nl(vo)),t}function Vf(){var t;return 59===e.charCodeAt(Wc)?(t=ln,Wc++):(t=a,0===Gc&&nl(mo)),t}function qf(){var t,n;return t=Wc,e.substr(Wc,3)===fn?(n=fn,Wc+=3):(n=a,0===Gc&&nl(go)),n!==a&&(Vc=t,n=Qs()),(t=n)===a&&(t=Wc,e.substr(Wc,3)===dn?(n=dn,Wc+=3):(n=a,0===Gc&&nl(bo)),n!==a&&(Vc=t,n=Zs()),(t=n)===a&&(t=Wc,e.substr(Wc,3)===hn?(n=hn,Wc+=3):(n=a,0===Gc&&nl(yo)),n!==a&&(Vc=t,n=ec()),t=n)),t}function $f(){var t,n;return t=Wc,e.substr(Wc,3)===pn?(n=pn,Wc+=3):(n=a,0===Gc&&nl(wo)),n!==a&&(Vc=t,n=tc()),t=n}function Hf(){var e,t,n,r,i;return e=Wc,(t=Kf())===a&&(t=null),(n=Jf())!==a?((r=Jf())===a&&(r=null),(i=hf())===a&&(i=null),Vc=e,e=nc(t,n,r,i)):(Wc=e,e=a),e}function Gf(){var e,t,n,r;return e=Wc,(t=Kf())===a&&(t=null),(n=Jf())!==a?((r=Jf())===a&&(r=null),Vc=e,e=rc(t,n,r)):(Wc=e,e=a),e}function Kf(){var e,t,n;return e=Wc,(t=Xf())!==a?((n=Yf())===a&&(n=null),Vc=e,e=ac(t,n)):(Wc=e,e=a),e}function Xf(){var t,n,r,i;return t=Wc,(n=Jf())!==a?((r=Jf())===a&&(r=null),58===e.charCodeAt(Wc)?(i=Lt,Wc++):(i=a,0===Gc&&nl(Vi)),i!==a?(Vc=t,t=ic(n,r)):(Wc=t,t=a)):(Wc=t,t=a),t}function Yf(){var t,n,r,i;return t=Wc,(n=Jf())!==a?((r=Jf())===a&&(r=null),58===e.charCodeAt(Wc)?(i=Lt,Wc++):(i=a,0===Gc&&nl(Vi)),i!==a?(Vc=t,t=oc(n,r)):(Wc=t,t=a)):(Wc=t,t=a),t}function Jf(){var t,n;return t=Wc,Zn.test(e.charAt(Wc))?(n=e.charAt(Wc),Wc++):(n=a,0===Gc&&nl(Wi)),n!==a&&(Vc=t,n=uc(n)),t=n}function Qf(){var e,t,n;return e=Wc,Zf()!==a&&(t=_f())!==a&&ed()!==a?(rf(),(n=Qf())===a&&(n=null),Vc=e,e=sc(t,n)):(Wc=e,e=a),e}function Zf(){var t;return 40===e.charCodeAt(Wc)?(t=vn,Wc++):(t=a,0===Gc&&nl(xo)),t}function ed(){var t;return 41===e.charCodeAt(Wc)?(t=mn,Wc++):(t=a,0===Gc&&nl(Oo)),t}function td(){var e,t,n,r,i;if(e=Wc,(t=rd())!==a){for(n=[],r=ad();r!==a;)n.push(r),r=ad();for(r=[],i=nd();i!==a;)r.push(i),i=nd();Vc=e,e=cc(t)}else Wc=e,e=a;return e}function nd(){var t;return 46===e.charCodeAt(Wc)?(t=Pt,Wc++):(t=a,0===Gc&&nl(Ui)),t}function rd(){var t,n,r;if(Gc++,t=Wc,n=[],Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi)),r!==a)for(;r!==a;)n.push(r),Zn.test(e.charAt(Wc))?(r=e.charAt(Wc),Wc++):(r=a,0===Gc&&nl(Wi));else n=a;return n!==a&&(Vc=t,n=ks(n)),Gc--,(t=n)===a&&(n=a,0===Gc&&nl(ko)),t}function ad(){var t,n,r;if(t=Wc,n=[],32===e.charCodeAt(Wc)?(r=gn,Wc++):(r=a,0===Gc&&nl(jo)),r!==a)for(;r!==a;)n.push(r),32===e.charCodeAt(Wc)?(r=gn,Wc++):(r=a,0===Gc&&nl(jo));else n=a;return n!==a&&(Vc=t,n=lc()),t=n}function id(){var t,n,r,i,o,u,s,c,l;return t=Wc,(n=dd())===a&&(n=null),r=Wc,Gc++,i=fd(),Gc--,i!==a?(Wc=r,r=void 0):r=a,r!==a&&(i=ld())!==a?((o=md())===a&&(o=null),(u=pd())!==a&&(s=vd())!==a?((c=ud())===a&&(c=null),(l=od())===a&&(l=null),Vc=t,t=fc(n,i,o,u,s,c,l)):(Wc=t,t=a)):(Wc=t,t=a),t===a&&(t=Wc,(n=dd())===a&&(n=null),(r=pd())!==a&&(i=vd())!==a?((o=gd())===a&&(o=null),(u=pd())!==a&&(s=vd())!==a?((c=ud())===a&&(c=null),(l=od())===a&&(l=null),Vc=t,t=dc(n,r,i,o,u,s,c,l)):(Wc=t,t=a)):(Wc=t,t=a),t===a&&(t=Wc,(n=dd())===a&&(n=null),(r=md())===a&&(r=null),(i=pd())!==a&&(o=vd())!==a?((u=ud())===a&&(u=null),(s=od())===a&&(s=null),Vc=t,t=hc(n,r,i,o,u,s)):(Wc=t,t=a),t===a&&(t=Wc,e.substr(Wc,5)===bn?(n=bn,Wc+=5):(n=a,0===Gc&&nl(_o)),n!==a?((r=od())===a&&(r=null),Vc=t,t=pc(r)):(Wc=t,t=a),t===a&&(t=Wc,e.substr(Wc,3)===yn?(n=yn,Wc+=3):(n=a,0===Gc&&nl(So)),n!==a?((r=od())===a&&(r=null),Vc=t,t=vc(r)):(Wc=t,t=a),t===a&&(t=Wc,(n=dd())!==a?(64===e.charCodeAt(Wc)?(r=wn,Wc++):(r=a,0===Gc&&nl(Eo)),r!==a&&(i=pd())!==a&&(o=vd())!==a?(Vc=t,t=mc(n,i,o)):(Wc=t,t=a)):(Wc=t,t=a)))))),t}function od(){var t,n,r,i;return t=Wc,n=Wc,r=Wc,Gc++,e.substr(Wc,2)===xn?(i=xn,Wc+=2):(i=a,0===Gc&&nl(Co)),Gc--,i===a?r=void 0:(Wc=r,r=a),r!==a?(43===e.charCodeAt(Wc)?(i=$t,Wc++):(i=a,0===Gc&&nl(Yi)),i!==a?n=r=[r,i]:(Wc=n,n=a)):(Wc=n,n=a),n!==a&&(Vc=t,n=gc(n)),(t=n)===a&&(t=Wc,n=Wc,r=Wc,Gc++,e.substr(Wc,3)===On?(i=On,Wc+=3):(i=a,0===Gc&&nl(Ao)),Gc--,i===a?r=void 0:(Wc=r,r=a),r!==a?(35===e.charCodeAt(Wc)?(i=kn,Wc++):(i=a,0===Gc&&nl(To)),i!==a?n=r=[r,i]:(Wc=n,n=a)):(Wc=n,n=a),n!==a&&(Vc=t,n=gc(n)),t=n),t}function ud(){var t,n,r;return t=Wc,61===e.charCodeAt(Wc)?(n=jn,Wc++):(n=a,0===Gc&&nl(No)),n!==a&&(r=hd())!==a?(Vc=t,t=bc(r)):(Wc=t,t=a),t}function sd(){var e,t,n;return e=Wc,(t=cd())!==a?(rf(),(n=sd())===a&&(n=null),Vc=e,e=yc(t,n)):(Wc=e,e=a),e}function cd(){var t,n,r;return t=Wc,36===e.charCodeAt(Wc)?(n=_n,Wc++):(n=a,0===Gc&&nl(Io)),n!==a&&(r=rd())!==a?(Vc=t,t=wc(r)):(Wc=t,t=a),t===a&&(t=Wc,e.substr(Wc,2)===Sn?(n=Sn,Wc+=2):(n=a,0===Gc&&nl(Do)),n!==a&&(Vc=t,n=xc()),(t=n)===a&&(t=Wc,e.substr(Wc,2)===En?(n=En,Wc+=2):(n=a,0===Gc&&nl(Ro)),n!==a&&(Vc=t,n=Oc()),(t=n)===a&&(t=Wc,e.substr(Wc,2)===Cn?(n=Cn,Wc+=2):(n=a,0===Gc&&nl(Fo)),n!==a&&(Vc=t,n=kc()),(t=n)===a&&(t=Wc,e.substr(Wc,2)===An?(n=An,Wc+=2):(n=a,0===Gc&&nl(Mo)),n!==a&&(Vc=t,n=jc()),(t=n)===a&&(t=Wc,33===e.charCodeAt(Wc)?(n=Tn,Wc++):(n=a,0===Gc&&nl(Po)),n!==a&&(Vc=t,n=_c()),(t=n)===a&&(t=Wc,63===e.charCodeAt(Wc)?(n=Vt,Wc++):(n=a,0===Gc&&nl(Ki)),n!==a&&(Vc=t,n=Sc()),(t=n)===a&&(t=Wc,8252===e.charCodeAt(Wc)?(n=Nn,Wc++):(n=a,0===Gc&&nl(Lo)),n!==a&&(Vc=t,n=xc()),(t=n)===a&&(t=Wc,8263===e.charCodeAt(Wc)?(n=In,Wc++):(n=a,0===Gc&&nl(zo)),n!==a&&(Vc=t,n=Oc()),(t=n)===a&&(t=Wc,8265===e.charCodeAt(Wc)?(n=Dn,Wc++):(n=a,0===Gc&&nl(Bo)),n!==a&&(Vc=t,n=kc()),(t=n)===a&&(t=Wc,8264===e.charCodeAt(Wc)?(n=Rn,Wc++):(n=a,0===Gc&&nl(Uo)),n!==a&&(Vc=t,n=jc()),(t=n)===a&&(t=Wc,9633===e.charCodeAt(Wc)?(n=Fn,Wc++):(n=a,0===Gc&&nl(Wo)),n!==a&&(Vc=t,n=Ec()),(t=n)===a&&(t=Wc,61===e.charCodeAt(Wc)?(n=jn,Wc++):(n=a,0===Gc&&nl(No)),n!==a&&(Vc=t,n=Cc()),(t=n)===a&&(t=Wc,8734===e.charCodeAt(Wc)?(n=Mn,Wc++):(n=a,0===Gc&&nl(Vo)),n!==a&&(Vc=t,n=Ac()),(t=n)===a&&(t=Wc,10866===e.charCodeAt(Wc)?(n=Pn,Wc++):(n=a,0===Gc&&nl(qo)),n!==a&&(Vc=t,n=Tc()),(t=n)===a&&(t=Wc,10865===e.charCodeAt(Wc)?(n=Ln,Wc++):(n=a,0===Gc&&nl($o)),n!==a&&(Vc=t,n=Nc()),(t=n)===a&&(t=Wc,177===e.charCodeAt(Wc)?(n=zn,Wc++):(n=a,0===Gc&&nl(Ho)),n!==a&&(Vc=t,n=Ic()),(t=n)===a&&(t=Wc,8723===e.charCodeAt(Wc)?(n=Bn,Wc++):(n=a,0===Gc&&nl(Go)),n!==a&&(Vc=t,n=Dc()),(t=n)===a&&(t=Wc,e.substr(Wc,2)===xn?(n=xn,Wc+=2):(n=a,0===Gc&&nl(Co)),n!==a&&(Vc=t,n=Rc()),(t=n)===a&&(t=Wc,e.substr(Wc,2)===Un?(n=Un,Wc+=2):(n=a,0===Gc&&nl(Ko)),n!==a&&(Vc=t,n=Fc()),(t=n)===a&&(t=Wc,10752===e.charCodeAt(Wc)?(n=Wn,Wc++):(n=a,0===Gc&&nl(Xo)),n!==a&&(Vc=t,n=Mc()),(t=n)===a&&(t=Wc,10227===e.charCodeAt(Wc)?(n=Vn,Wc++):(n=a,0===Gc&&nl(Yo)),n!==a&&(Vc=t,n=Pc()),(t=n)===a&&(t=Wc,8594===e.charCodeAt(Wc)?(n=qn,Wc++):(n=a,0===Gc&&nl(Jo)),n!==a&&(Vc=t,n=Lc()),(t=n)===a&&(t=Wc,8593===e.charCodeAt(Wc)?(n=$n,Wc++):(n=a,0===Gc&&nl(Qo)),n!==a&&(Vc=t,n=zc()),(t=n)===a&&(t=Wc,8646===e.charCodeAt(Wc)?(n=Hn,Wc++):(n=a,0===Gc&&nl(Zo)),n!==a&&(Vc=t,n=Bc()),(t=n)===a&&(t=Wc,68===e.charCodeAt(Wc)?(n=Gn,Wc++):(n=a,0===Gc&&nl(eu)),n!==a&&(Vc=t,n=Uc()),t=n))))))))))))))))))))))))),t}function ld(){var e;return(e=pd())===a&&(e=vd()),e}function fd(){var e,t,n,r,i;return e=Wc,(t=ld())!==a?((n=md())===a&&(n=null),(r=pd())!==a&&(i=vd())!==a?e=t=[t,n,r,i]:(Wc=e,e=a)):(Wc=e,e=a),e}function dd(){var t;return tr.test(e.charAt(Wc))?(t=e.charAt(Wc),Wc++):(t=a,0===Gc&&nl(tu)),t}function hd(){var t;return nr.test(e.charAt(Wc))?(t=e.charAt(Wc),Wc++):(t=a,0===Gc&&nl(nu)),t}function pd(){var t;return rr.test(e.charAt(Wc))?(t=e.charAt(Wc),Wc++):(t=a,0===Gc&&nl(ru)),t}function vd(){var t;return ar.test(e.charAt(Wc))?(t=e.charAt(Wc),Wc++):(t=a,0===Gc&&nl(au)),t}function md(){var t;return 120===e.charCodeAt(Wc)?(t=Kn,Wc++):(t=a,0===Gc&&nl(iu)),t}function gd(){var t;return 120===e.charCodeAt(Wc)?(t=Kn,Wc++):(t=a,0===Gc&&nl(iu)),t===a&&(45===e.charCodeAt(Wc)?(t=qt,Wc++):(t=a,0===Gc&&nl(Xi))),t}var bd=[];function yd(e){var t=Object.assign(e,Kc());return bd.push(t),t}function wd(e){return parseInt(e.join(""),10)}function xd(e){return e.join("").match(/\?/)?e.join(""):wd(e)}function Od(e){var t={};return e.forEach((function(e){for(var n in e)Array.isArray(e[n])?t[n]=t[n]?t[n].concat(e[n]):e[n]:t[n]=t[n]?jd(t[n])+" "+kd(e[n]):e[n]})),t}function kd(e){if("string"!==typeof e)return e;var t=/^\s+/;return e.replace(t,"")}function jd(e){if("string"!==typeof e)return e;var t=/\s+$/;return e.replace(t,"")}if((r=u())!==a&&Wc===e.length)return r;throw r!==a&&Wc<e.length&&nl(Qc()),rl(Hc,$c<e.length?e.charAt($c):null,$c<e.length?tl($c,$c+1):tl($c,$c))}return e(t,Error),t.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,a=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){a=e[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source+":"+i.line+":"+i.column;if(a){var u=this.location.end,s=n("",i.line.toString().length),c=a[i.line-1],l=i.line===u.line?u.column:c.length+1;t+="\n --\x3e "+o+"\n"+s+" |\n"+i.line+" | "+c+"\n"+s+" | "+n("",i.column-1)+n("",l-i.column,"^")}else t+="\n at "+o}return t},t.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}function u(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}function s(e){return e?'"'+a(e)+'"':"end of input"}return"Expected "+u(e)+" but "+s(t)+" found."},{SyntaxError:t,parse:r}})?r.apply(t,a):r)||(e.exports=i)},,,,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],u=r[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),l=0,f=u>0?o-4:o;for(n=0;n<f;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=16383,u=0,s=n-a;u<s;u+=o)i.push(l(e,u,u+o>s?s:u+o));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],a[o.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var a,i,o=[],u=t;u<n;u+=3)a=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,o,u=8*a-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=c}return(h?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,u,s,c=8*i-a-1,l=(1<<c)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(t*s-1)*Math.pow(2,a),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&u,h+=p,u/=256,a-=8);for(o=o<<a|u,c+=a;c>0;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var t,r=n(3),a=n(11),i=n(43),o=function(){return n(559)};var u=function(){function u(){Object(r.a)(this,u),this.util=n(560),this.textEncoder=new this.util.TextEncoder}return Object(a.a)(u,[{key:"fetch",value:function(e,n){return null!=Object(i.c)().global.fetch?Object(i.c)().global.fetch(e,n):(null==t&&(t=o()),t(e,n))}},{key:"now",value:function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),u}();Object(i.c)().get("IS_NODE")&&Object(i.c)().setPlatform("node",new u)}).call(this,n(175))},,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){var r;!function(a,i){var o,u=this,s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(568)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(570),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(141))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a=1,i={},o=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return i[a]=o,r(a),a++},s.clearImmediate=c}function c(e){delete i[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(141),n(175))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){var r;!function(a,i){var o,u=(0,eval)("this"),s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(578)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,,,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(54)&&n(80)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(54))}).call(this,n(79)(e))},function(e,t,n){var r;!function(a,i){var o,u=this,s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(589)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(178)),u=n(145),s=n(117);t.barchart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=s.getDrawArea(e),f=t,d=Object.assign({},c,n),!l.has(i)){r.next=13;break}if(h=l.get(i),!s.shallowEquals(d,h.lastOptions)){r.next=13;break}return r.next=8,s.nextFrame();case 8:return p=h.view,v=p.changeset().remove((function(){return!0})).insert(f),r.next=12,p.change("values",v).runAsync();case 12:return r.abrupt("return");case 13:return m=d.xLabel,g=d.yLabel,b=d.xType,y=d.yType,w=null,null!=m&&(w={title:m}),x=null,null!=g&&(x={title:g}),O={actions:!1,mode:"vega-lite",defaultStyle:!1},k=null!=d.color?Array.isArray(d.color)?{field:"index",type:"nominal",scale:{range:d.color}}:{value:d.color}:{value:"#4C78A0"},j={width:d.width||u.getDefaultWidth(i),height:d.height||u.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:d.fontSize,titleFontSize:d.fontSize},text:{fontSize:d.fontSize},legend:{labelFontSize:d.fontSize,titleFontSize:d.fontSize}},data:{values:f,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:b,axis:w},y:{field:"value",type:y,axis:x},color:k}},r.next=23,s.nextFrame();case 23:return r.next=25,o.default(i,j,O);case 25:_=r.sent,l.set(i,{view:_.view,lastOptions:d});case 27:case"end":return r.stop()}}),a)})))};var c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},function(e,t,n){var r=n(177);e.exports=function(e,t){var n=r(e,t);return n?n.version:null}},function(e,t,n){var r=n(177);e.exports=function(e,t){var n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},function(e,t,n){var r=n(87);e.exports=function(e,t,n,a){"string"===typeof n&&(a=n,n=void 0);try{return new r(e,n).inc(t,a).version}catch(i){return null}}},function(e,t,n){var r=n(177),a=n(326);e.exports=function(e,t){if(a(e,t))return null;var n=r(e),i=r(t),o=n.prerelease.length||i.prerelease.length,u=o?"pre":"",s=o?"prerelease":"";for(var c in n)if(("major"===c||"minor"===c||"patch"===c)&&n[c]!==i[c])return u+c;return s}},function(e,t,n){var r=n(87);e.exports=function(e,t){return new r(e,t).major}},function(e,t,n){var r=n(87);e.exports=function(e,t){return new r(e,t).minor}},function(e,t,n){var r=n(87);e.exports=function(e,t){return new r(e,t).patch}},function(e,t,n){var r=n(177);e.exports=function(e,t){var n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},function(e,t,n){var r=n(115);e.exports=function(e,t,n){return r(t,e,n)}},function(e,t,n){var r=n(115);e.exports=function(e,t){return r(e,t,!0)}},function(e,t,n){var r=n(327);e.exports=function(e,t){return e.sort((function(e,n){return r(e,n,t)}))}},function(e,t,n){var r=n(327);e.exports=function(e,t){return e.sort((function(e,n){return r(n,e,t)}))}},function(e,t,n){var r=n(87),a=n(177),i=n(176),o=i.re,u=i.t;e.exports=function(e,t){if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;var n=null;if((t=t||{}).rtl){for(var i;(i=o[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),o[u.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;o[u.COERCERTL].lastIndex=-1}else n=e.match(o[u.COERCE]);return null===n?null:a("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),t)}},function(e,t,n){var r=n(360);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(143),a=n(144),i=n(608),o=Symbol("max"),u=Symbol("length"),s=Symbol("lengthCalculator"),c=Symbol("allowStale"),l=Symbol("maxAge"),f=Symbol("dispose"),d=Symbol("noDisposeOnSet"),h=Symbol("lruList"),p=Symbol("cache"),v=Symbol("updateAgeOnGet"),m=function(){return 1},g=function(){function e(t){if(r(this,e),"number"===typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!==typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[o]=t.max||1/0;var n=t.length||m;if(this[s]="function"!==typeof n?m:n,this[c]=t.stale||!1,t.maxAge&&"number"!==typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[f]=t.dispose,this[d]=t.noDisposeOnSet||!1,this[v]=t.updateAgeOnGet||!1,this.reset()}return a(e,[{key:"max",get:function(){return this[o]},set:function(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,w(this)}},{key:"allowStale",get:function(){return this[c]},set:function(e){this[c]=!!e}},{key:"maxAge",get:function(){return this[l]},set:function(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,w(this)}},{key:"lengthCalculator",get:function(){return this[s]},set:function(e){var t=this;"function"!==typeof e&&(e=m),e!==this[s]&&(this[s]=e,this[u]=0,this[h].forEach((function(e){e.length=t[s](e.value,e.key),t[u]+=e.length}))),w(this)}},{key:"length",get:function(){return this[u]}},{key:"itemCount",get:function(){return this[h].length}},{key:"rforEach",value:function(e,t){t=t||this;for(var n=this[h].tail;null!==n;){var r=n.prev;k(this,e,n,t),n=r}}},{key:"forEach",value:function(e,t){t=t||this;for(var n=this[h].head;null!==n;){var r=n.next;k(this,e,n,t),n=r}}},{key:"keys",value:function(){return this[h].toArray().map((function(e){return e.key}))}},{key:"values",value:function(){return this[h].toArray().map((function(e){return e.value}))}},{key:"reset",value:function(){var e=this;this[f]&&this[h]&&this[h].length&&this[h].forEach((function(t){return e[f](t.key,t.value)})),this[p]=new Map,this[h]=new i,this[u]=0}},{key:"dump",value:function(){var e=this;return this[h].map((function(t){return!y(e,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}})).toArray().filter((function(e){return e}))}},{key:"dumpLru",value:function(){return this[h]}},{key:"set",value:function(e,t,n){if((n=n||this[l])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[o])return x(this,this[p].get(e)),!1;var i=this[p].get(e).value;return this[f]&&(this[d]||this[f](e,i.value)),i.now=r,i.maxAge=n,i.value=t,this[u]+=a-i.length,i.length=a,this.get(e),w(this),!0}var c=new O(e,t,a,r,n);return c.length>this[o]?(this[f]&&this[f](e,t),!1):(this[u]+=c.length,this[h].unshift(c),this[p].set(e,this[h].head),w(this),!0)}},{key:"has",value:function(e){if(!this[p].has(e))return!1;var t=this[p].get(e).value;return!y(this,t)}},{key:"get",value:function(e){return b(this,e,!0)}},{key:"peek",value:function(e){return b(this,e,!1)}},{key:"pop",value:function(){var e=this[h].tail;return e?(x(this,e),e.value):null}},{key:"del",value:function(e){x(this,this[p].get(e))}},{key:"load",value:function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],a=r.e||0;if(0===a)this.set(r.k,r.v);else{var i=a-t;i>0&&this.set(r.k,r.v,i)}}}},{key:"prune",value:function(){var e=this;this[p].forEach((function(t,n){return b(e,n,!1)}))}}]),e}(),b=function(e,t,n){var r=e[p].get(t);if(r){var a=r.value;if(y(e,a)){if(x(e,r),!e[c])return}else n&&(e[v]&&(r.value.now=Date.now()),e[h].unshiftNode(r));return a.value}},y=function(e,t){if(!t||!t.maxAge&&!e[l])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},w=function(e){if(e[u]>e[o])for(var t=e[h].tail;e[u]>e[o]&&null!==t;){var n=t.prev;x(e,t),t=n}},x=function(e,t){if(t){var n=t.value;e[f]&&e[f](n.key,n.value),e[u]-=n.length,e[p].delete(n.key),e[h].removeNode(t)}},O=function e(t,n,a,i,o){r(this,e),this.key=t,this.value=n,this.length=a,this.now=i,this.maxAge=o||0},k=function(e,t,n,r){var a=n.value;y(e,a)&&(x(e,n),e[c]||(a=void 0)),a&&t.call(r,a.value,a.key,e)};e.exports=g},function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,a=arguments.length;n<a;n++)t.push(arguments[n]);return t}function a(e,t,n){var r=t===e.head?new u(n,null,t,e):new u(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function i(e,t){e.tail=new u(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new u(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function u(e,t,n,r){if(!(this instanceof u))return new u(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=u,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,a=this.head;null!==a;)n.push(e.call(t,a.value,this)),a=a.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,a=this.tail;null!==a;)n.push(e.call(t,a.value,this)),a=a.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var a=0;null!==r;a++)n=e(n,r.value,a),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var a=this.length-1;null!==r;a--)n=e(n,r.value,a),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=0,i=this.head;null!==i&&a<e;a++)i=i.next;for(;null!==i&&a<t;a++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=this.length,i=this.tail;null!==i&&a>t;a--)i=i.prev;for(;null!==i&&a>e;a--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var i=[];for(n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=a(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(609)(r)}catch(s){}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e){e.prototype[Symbol.iterator]=r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}},function(e,t,n){var r=n(116);e.exports=function(e,t){return new r(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}},function(e,t,n){var r=n(87),a=n(116);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&-1!==o.compare(e)||(o=new r(i=e,n)))})),i}},function(e,t,n){var r=n(87),a=n(116);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&1!==o.compare(e)||(o=new r(i=e,n)))})),i}},function(e,t,n){var r=n(87),a=n(116),i=n(244);e.exports=function(e,t){e=new a(e,t);var n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(var o=function(t){var a=e.set[t],o=null;a.forEach((function(e){var t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!o||n&&!i(n,o)||(n=o)},u=0;u<e.set.length;++u)o(u);return n&&e.test(n)?n:null}},function(e,t,n){var r=n(116);e.exports=function(e,t){try{return new r(e,t).range||"*"}catch(n){return null}}},function(e,t,n){var r=n(332);e.exports=function(e,t,n){return r(e,t,">",n)}},function(e,t,n){var r=n(332);e.exports=function(e,t,n){return r(e,t,"<",n)}},function(e,t,n){var r=n(116);e.exports=function(e,t,n){return e=new r(e,n),t=new r(t,n),e.intersects(t)}},function(e,t,n){var r=n(240),a=n(163),i=n(246),o=n(115);e.exports=function(e,t,n){var u,s=[],c=null,l=null,f=e.sort((function(e,t){return o(e,t,n)})),d=a(f);try{for(d.s();!(u=d.n()).done;){var h=u.value;i(h,t,n)?(l=h,c||(c=h)):(l&&s.push([c,l]),l=null,c=null)}}catch(O){d.e(O)}finally{d.f()}c&&s.push([c,null]);for(var p=[],v=0,m=s;v<m.length;v++){var g=r(m[v],2),b=g[0],y=g[1];b===y?p.push(b):y||b!==f[0]?y?b===f[0]?p.push("<=".concat(y)):p.push("".concat(b," - ").concat(y)):p.push(">=".concat(b)):p.push("*")}var w=p.join(" || "),x="string"===typeof t.raw?t.raw:String(t);return w.length<x.length?w:t}},function(e,t,n){var r=n(163),a=n(116),i=n(245),o=i.ANY,u=n(246),s=n(115),c=function(e,t,n){if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=[new i(">=0.0.0")]}var a,c,d,h,p=new Set,v=r(e);try{for(v.s();!(d=v.n()).done;){var m=d.value;">"===m.operator||">="===m.operator?a=l(a,m,n):"<"===m.operator||"<="===m.operator?c=f(c,m,n):p.add(m.semver)}}catch(I){v.e(I)}finally{v.f()}if(p.size>1)return null;if(a&&c){if((h=s(a.semver,c.semver,n))>0)return null;if(0===h&&(">="!==a.operator||"<="!==c.operator))return null}var g,b,y,w,x,O=r(p);try{for(O.s();!(g=O.n()).done;){var k=g.value;if(a&&!u(k,String(a),n))return null;if(c&&!u(k,String(c),n))return null;var j,_=r(t);try{for(_.s();!(j=_.n()).done;){var S=j.value;if(!u(k,String(S),n))return!1}}catch(I){_.e(I)}finally{_.f()}return!0}}catch(I){O.e(I)}finally{O.f()}var E=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver,C=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver;E&&1===E.prerelease.length&&"<"===c.operator&&0===E.prerelease[0]&&(E=!1);var A,T=r(t);try{for(T.s();!(A=T.n()).done;){var N=A.value;if(x=x||">"===N.operator||">="===N.operator,w=w||"<"===N.operator||"<="===N.operator,a)if(C&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===C.major&&N.semver.minor===C.minor&&N.semver.patch===C.patch&&(C=!1),">"===N.operator||">="===N.operator){if((b=l(a,N,n))===N&&b!==a)return!1}else if(">="===a.operator&&!u(a.semver,String(N),n))return!1;if(c)if(E&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===E.major&&N.semver.minor===E.minor&&N.semver.patch===E.patch&&(E=!1),"<"===N.operator||"<="===N.operator){if((y=f(c,N,n))===N&&y!==c)return!1}else if("<="===c.operator&&!u(c.semver,String(N),n))return!1;if(!N.operator&&(c||a)&&0!==h)return!1}}catch(I){T.e(I)}finally{T.f()}return!(a&&w&&!c&&0!==h)&&(!(c&&x&&!a&&0!==h)&&(!C&&!E))},l=function(e,t,n){if(!e)return t;var r=s(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},f=function(e,t,n){if(!e)return t;var r=s(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new a(e,n),t=new a(t,n);var i,o=!1,u=r(e.set);try{e:for(u.s();!(i=u.n()).done;){var s,l=i.value,f=r(t.set);try{for(f.s();!(s=f.n()).done;){var d=s.value,h=c(l,d,n);if(o=o||null!==h,h)continue e}}catch(p){f.e(p)}finally{f.f()}if(o)return!1}}catch(p){u.e(p)}finally{u.f()}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleSheet=d;var r,a=n(174),i=(r=a)&&r.__esModule?r:{default:r};function o(e){return e[e.length-1]}function u(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var s="undefined"!==typeof window,c=!1,l=function(){if(s){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}}();function f(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.speedy,n=void 0===t||t,r=e.maxLength,a=void 0===r?s&&l?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=a,this.ctr=0}(0,i.default)(d.prototype,{getSheet:function(){return u(o(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");s?this.tags[0]=f():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0},speedy:function(e){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var t=this.getSheet();t.insertRule(e,-1!==e.indexOf("@import")?0:t.cssRules.length)}catch(n){c}},insert:function(e){if(s)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(-1!==e.indexOf("@import")){var t=o(this.tags);t.insertBefore(document.createTextNode(e),t.firstChild)}else o(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,-1!==e.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,s&&this.ctr%this.maxLength===0&&this.tags.push(f()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){s?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!s)return this.sheet.cssRules;var e=[];return this.tags.forEach((function(t){return e.splice.apply(e,[e.length,0].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(u(t).cssRules))))})),e}})},function(e,t,n){"use strict";var r=n(622),a=/^-ms-/;e.exports=function(e){return r(e.replace(a,"ms-"))}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(624));a(n(403));function a(e){return e&&e.__esModule?e:{default:e}}var i=r.default.isUnitlessNumber;t.default=function(e,t,n){return null==t||"boolean"===typeof t||""===t?"":isNaN(t)||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"===typeof t&&(t=t.trim()),t+"px")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var a=["Webkit","ms","Moz","O"];Object.keys(r).forEach((function(e){a.forEach((function(t){r[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=r[e]}))}));var i={isUnitlessNumber:r,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.default=i},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";var r=n(627),a=/^ms-/;e.exports=function(e){return r(e).replace(a,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(function(e){return null===e||void 0===e||!1===e||"object"===("undefined"===typeof e?"undefined":r(e))&&0===Object.keys(e).length}(e))return null;if("object"!==("undefined"===typeof e?"undefined":r(e)))return e;for(var t={},n=Object.keys(e),a=!1,o=0;o<n.length;o++){var u=e[n[o]],s=i(u);null!==s&&s===u||(a=!0),null!==s&&(t[n[o]]=s)}return 0===Object.keys(t).length?null:a?t:e}function i(e){return Array.isArray(e)?function(e){var t=!1,n=[];return e.forEach((function(e){var r=i(e);null!==r&&r===e||(t=!0),null!==r&&n.push(r)})),0==n.length?null:t?n:e}(e):a(e)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PluginSet=s,t.fallbacks=function(e){if(Object.keys(e.style).map((function(t){return Array.isArray(e.style[t])})).indexOf(!0)>=0){var t=e.style,n=Object.keys(t).reduce((function(e,n){return e[n]=Array.isArray(t[n])?t[n].join("; "+(0,i.processStyleName)(n)+": "):t[n],e}),{});return(0,a.default)({},e,{style:n})}return e},t.contentWrap=function(e){if(e.style.content){var t=e.style.content;return c.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)?e:t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)?r({},e,{style:r({},e.style,{content:'"'+t+'"'})}):e}return e},t.prefixes=function(e){return(0,a.default)({},e,{style:(0,o.default)(r({},e.style))})};var a=u(n(174)),i=n(402),o=u(n(631));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){this.fns=e||[]}(0,a.default)(s.prototype,{add:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.fns.indexOf(t)>=0||(e.fns=[t].concat(e.fns))}))},remove:function(e){this.fns=this.fns.filter((function(t){return t!==e}))},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce((function(e,t){return t(e)}),e)}});var c=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t in e){var n=e[t],r=(0,i.default)(g,t,n,e,b);r&&(e[t]=r),(0,a.default)(b,t,e)}return e};var r=m(n(632)),a=m(n(633)),i=m(n(634)),o=m(n(635)),u=m(n(636)),s=m(n(637)),c=m(n(638)),l=m(n(639)),f=m(n(640)),d=m(n(641)),h=m(n(642)),p=m(n(643)),v=m(n(644));function m(e){return e&&e.__esModule?e:{default:e}}var g=[u.default,o.default,s.default,l.default,f.default,d.default,h.default,p.default,v.default,c.default],b=r.default.prefixMap},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Webkit"],a=["Moz"],i=["ms"],o=["Webkit","Moz"],u=["Webkit","ms"],s=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:o,userSelect:s,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:s,breakBefore:s,breakInside:s,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:u,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:u,scrollSnapPointsX:u,scrollSnapPointsY:u,scrollSnapDestination:u,scrollSnapCoordinate:u,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:s,flowInto:u,flowFrom:u,regionFragment:u,textAlignLast:a,tabSize:a,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:u,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],a=0,o=r.length;a<o;++a)n[r[a]+(0,i.default)(t)]=n[t]};var r,a=n(404),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var i=0,o=e.length;i<o;++i){var u=e[i](t,n,r,a);if(u)return u}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("filter(")>-1)return o.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&u.test(t))return o.map((function(e){return e+t}))};var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""],u=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("image-set(")>-1)return o.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.hasOwnProperty(e)&&i.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if("string"===typeof t&&u.hasOwnProperty(e)){var c=function(e,t){if((0,a.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),i=0,o=n.length;i<o;++i){var u=n[i],c=[u];for(var l in t){var f=(0,r.default)(l);if(u.indexOf(f)>-1&&"order"!==f)for(var d=t[l],h=0,p=d.length;h<p;++h)c.unshift(u.replace(f,s[d[h]]+f))}n[i]=c.join(",")}return n.join(",")}(t,o),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return l;var f=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,i.default)(e)]=l,n["Moz"+(0,i.default)(e)]=f,c)}};var r=o(n(645)),a=o(n(220)),i=o(n(404));function o(e){return e&&e.__esModule?e:{default:e}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var r,a=n(646),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,i={};function o(e){return"-"+e.toLowerCase()}t.default=function(e){if(i.hasOwnProperty(e))return i[e];var t=e.replace(r,o);return i[e]=a.test(t)?"-"+t:t}},function(e,t,n){"use strict";function r(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function a(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function i(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=1540483477,o=t^e.length,u=e.length,s=0;for(;u>=4;){var c=r(e,s);c=i(c,n),c=i(c^=c>>>24,n),o=i(o,n),o^=c,s+=4,u-=4}switch(u){case 3:o^=a(e,s),o=i(o^=e.charCodeAt(s+2)<<16,n);break;case 2:o=i(o^=a(e,s),n);break;case 1:o=i(o^=e.charCodeAt(s),n)}return o=i(o^=o>>>13,n),(o^=o>>>15)>>>0}},function(e,t,n){"use strict";var r=n(163),a=n(143),i=n(144),o=n(407),u=n(333),s=n(334);Object.defineProperty(t,"__esModule",{value:!0});var c=n(335),l=n(219),f=n(654),d=n(655),h=function(e){u(n,e);var t=s(n);function n(e){var r;a(this,n),(r=t.call(this,e)).surfaces=new Map;var i=null==e.startOpen||e.startOpen;return r.state={isOpen:i,isFullscreen:!1,activeTab:null,tabs:new Set},r.keyHandler=r.keyHandler.bind(o(r)),r}return i(n,[{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleFullScreen",value:function(){this.setState({isFullscreen:!this.state.isFullscreen})}},{key:"isOpen",value:function(){return this.state.isOpen}},{key:"isFullscreen",value:function(){return this.state.isFullscreen}},{key:"getSurface",value:function(e,t){var n,r=this.surfaceId(e,t);if(!this.surfaces.has(r))throw Error("Surface not found with id: ".concat(r));return{container:(n=this.surfaces.get(r)).container,label:n.label,drawArea:n.drawArea}}},{key:"bindKeys",value:function(){document.addEventListener("keydown",this.keyHandler,!1)}},{key:"unbindKeys",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"surfaceId",value:function(e,t){return e+t}},{key:"setTabs",value:function(e){var t,n,a=e.map((function(e){return e.tab})),i=this.state.tabs,o=r(a);try{for(o.s();!(n=o.n()).done;){var u=n.value;i.has(u)||(i.add(u),t=u)}}catch(s){o.e(s)}finally{o.f()}null!=t&&this.setState({tabs:i,activeTab:t})}},{key:"getTabs",value:function(){return this.state.tabs}},{key:"registerSurface",value:function(e,t,n){var r=this.surfaceId(e,t);this.surfaces.set(r,n)}},{key:"keyHandler",value:function(e){192===e.keyCode&&(e.shiftKey?this.toggleFullScreen():this.toggle())}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e})}},{key:"componentDidMount",value:function(){this.bindKeys()}},{key:"componentWillMount",value:function(){this.setTabs(this.props.surfaceList)}},{key:"componentWillReceiveProps",value:function(e){this.setTabs(e.surfaceList)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.isFullscreen,a=t.activeTab,i=this.props.surfaceList,o=Array.from(this.getTabs().values()),u=r?"90vw":"550px",s=l.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),h=l.css({right:"0"}),v=l.css({right:"calc(-".concat(u," - 10px)")}),m=n?h:v,g=l.css({});return c.h("div",{className:"".concat(s," ").concat(m," visor"),"data-isopen":n,"data-isfullscreen":r},c.h(p,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:r}),c.h(d.Tabs,{tabNames:o,activeTab:a,handleClick:this.setActiveTab.bind(this)}),c.h("div",{className:"".concat(g," visor-surfaces")},i.map((function(t){return c.h(f.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:e.registerSurface.bind(e),visible:a===t.tab})}))))}}],[{key:"render",value:function(e,t,r){return c.render(c.h(n,Object.assign({},r)),e,t)}}]),n}(c.Component);function p(e){var t=e.isFullScreen,n=e.fullScreenHandler,r=e.closeHandler,a=l.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),i=l.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),o=l.css({marginLeft:"auto"});return c.h("div",{className:"".concat(a," visor-controls")},c.h("button",{className:"".concat(i),onClick:n},t?"Minimize":"Maximize"),c.h("button",{className:"".concat(i," ").concat(o),onClick:r},"Hide"))}t.VisorComponent=h},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(653),a=n(407);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?a(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var r=n(143),a=n(144),i=n(333),o=n(334);Object.defineProperty(t,"__esModule",{value:!0});var u=n(335),s=n(219),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.tab;this.props.registerSurface(t,n,this)}},{key:"componentDidUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,a=t.visible,i=t.styles,o=Object.assign({},n.defaultStyles,i),c=o.width,l=o.height,f=o.maxHeight,d=o.maxWidth;f=l===n.defaultStyles.height?f:l,d=c===n.defaultStyles.width?d:c;var h=s.css({display:a?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:c,maxHeight:f,maxWidth:d,overflow:"auto"}),p=s.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),v=s.css({boxSizing:"border-box"});return u.h("div",{className:"".concat(h," tf-surface"),ref:function(t){return e.container=t},"data-visible":a},u.h("div",{className:"".concat(p," tf-label"),ref:function(t){return e.label=t}},r),u.h("div",{className:"".concat(v," tf-draw-area"),ref:function(t){return e.drawArea=t}}))}}]),n}(u.Component);c.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t.SurfaceComponent=c},function(e,t,n){"use strict";var r=n(143),a=n(144),i=n(333),o=n(334);Object.defineProperty(t,"__esModule",{value:!0});var u=n(335),s=n(219),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.tabNames,n=e.activeTab,r=e.handleClick,a=t.length>0?t.map((function(e){return u.h(l,{key:e,id:e,handleClick:r,isActive:e===n},e)})):null,i=s.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return u.h("div",{className:"".concat(i," visor-tabs")},a)}}]),n}(u.Component);t.Tabs=c;var l=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.handleClick,a=e.id,i=s.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return u.h("a",{className:"".concat(i," tf-tab"),"data-isactive":n,onClick:function(){return r(a)}},t)}}]),n}(u.Component)},function(e,t,n){"use strict";var r=n(2),a=n(163),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(178)),s=n(145),c=n(117);t.confusionMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,f,d,h,p,v,m,g,b,y,w,x,O,k,j,_,S,E;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Object.assign({},l,n),f=c.getDrawArea(e),d=[],h=t.values,p=t.tickLabels||[],v=0===p.length,m=!0,g=0;g<h.length;g++)for(b=v?"Class ".concat(g):p[g],v&&p.push(b),y=0;y<h[g].length;y++)w=v?"Class ".concat(y):p[y],x=h[g][y],g!==y||o.shadeDiagonal?(d.push({label:b,prediction:w,count:x,scaleCount:x}),0!==x&&(m=!1)):d.push({label:b,prediction:w,count:x,noFill:!0});if(!o.shadeDiagonal&&m){O=a(d);try{for(O.s();!(k=O.n()).done;)!0===(j=k.value).noFill&&(j.noFill=!1,j.scaleCount=j.count)}catch(i){O.e(i)}finally{O.f()}}return _={actions:!1,mode:"vega-lite",defaultStyle:!1},S={width:o.width||s.getDefaultWidth(f),height:o.height||s.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:d},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:p}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:p}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]},!1===o.shadeDiagonal&&S.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&S.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}}),E="string"===typeof o.colorMap?{scheme:o.colorMap}:o.colorMap,S.layer[0].encoding.color.scale.range=E,r.next=17,u.default(f,S,_);case 17:case"end":return r.stop()}}),i)})))};var l={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},function(e,t,n){"use strict";var r=n(2),a=n(240),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=u(n(178)),l=n(145),f=n(247),d=n(117);function h(e){return i(this,void 0,void 0,r.mark((function t(){var n,a,i,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof s.Tensor?(n=e.shape,a=e.transpose()):(n=[e.length,e[0].length],a=s.tidy((function(){return s.tensor2d(e).transpose()}))),f.assert(2===a.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),t.next=4,a.array();case 4:return i=t.sent,a.dispose(),o=[i.length,i[0].length],f.assert(n[0]===o[1]&&n[1]===o[0],"Unexpected transposed shape. Original ".concat(n," : Transposed ").concat(o)),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))}function p(e,t,n){var r=e instanceof s.Tensor?e.shape:[e.length,e[0].length];0===n?f.assert(r[0]===t.length,"Length of xTickLabels (".concat(t.length,") must match number of rows")+" (".concat(r[0],")")):1===n&&f.assert(r[1]===t.length,"Length of yTickLabels (".concat(t.length,") must match number of columns (").concat(r[1],")"))}t.heatmap=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,u,m,g,b,y,w,x,O,k,j,_,S,E,C,A,T,N,I,D,R,F,M,P,L,z,B,U;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=Object.assign({},v,n),u=d.getDrawArea(e),m=t.values,!o.rowMajor){r.next=7;break}return r.next=6,h(t.values);case 6:m=r.sent;case 7:if(g=t.xTickLabels,b=t.yTickLabels,null!=g&&(0,p(m,g,0)),null!=b&&(1,p(m,b,1)),y="@tfidx@",w=[],!(m instanceof s.Tensor)){r.next=21;break}return f.assert(2===m.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),r.next=16,m.data();case 16:for(x=r.sent,O=a(m.shape,2),k=O[0],j=O[1],_=0;_<k;_++)for(S=g?"".concat(g[_]).concat(y).concat(_):_,E=0;E<j;E++)C=b?"".concat(b[E]).concat(y).concat(E):E,A=x[_*j+E],w.push({x:S,y:C,value:A});r.next=23;break;case 21:for(T=m,N=0;N<T.length;N++)for(I=g?"".concat(g[N]).concat(y).concat(N):N,D=0;D<T[N].length;D++)R=b?"".concat(b[D]).concat(y).concat(D):D,F=T[N][D],w.push({x:I,y:R,value:F});case 23:M={actions:!1,mode:"vega-lite",defaultStyle:!1},P={width:o.width||l.getDefaultWidth(u),height:o.height||l.getDefaultHeight(u),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:w},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},L="".concat(y,"\\d+$"),z=new RegExp(L),g&&(P.encoding.x.axis={labelExpr:"replace(datum.value, regexp(/".concat(L,"/), '')")}),b&&(P.encoding.y.axis={labelExpr:"replace(datum.value, regexp(/".concat(L,"/), '')")}),(g||b)&&(M.tooltip={sanitize:function(e){return String(e).replace(z,"")}}),r.t0=o.colorMap,r.next="blues"===r.t0?33:"greyscale"===r.t0?35:(r.t0,37);break;case 33:return B=["#f7fbff","#4292c6"],r.abrupt("break",39);case 35:return B=["#000000","#ffffff"],r.abrupt("break",39);case 37:return B="viridis",r.abrupt("break",39);case 39:return"viridis"!==B&&(P.encoding.fill.scale={range:B}),o.domain&&(null!=(U=P.encoding.fill).scale?U.scale=Object.assign({},U.scale,{domain:o.domain}):U.scale={domain:o.domain}),r.next=43,c.default(u,P,M);case 43:case"end":return r.stop()}}),i)})))};var v={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},function(e,t,n){"use strict";var r=n(2),a=n(331),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(178)),s=n(145),c=n(247),l=n(117);t.scatterplot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,d,h,p,v,m,g,b,y;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.values,d=null==t.series?[]:t.series,o=Array.isArray(o[0])?o:[o],h=[],o.forEach((function(e,t){var n=null!=d[t]?d[t]:"Series ".concat(t+1),r=e.map((function(e){return Object.assign({},e,{series:n})}));h.push.apply(h,a(r))})),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=l.getDrawArea(e),v=Object.assign({},f,n),m={actions:!1,mode:"vega-lite",defaultStyle:!1},g=function(){return v.zoomToFit?{zero:!1}:null!=v.xAxisDomain?{domain:v.xAxisDomain}:void 0},b=function(){return v.zoomToFit?{zero:!1}:null!=v.yAxisDomain?{domain:v.yAxisDomain}:void 0},y={width:v.width||s.getDefaultWidth(p),height:v.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:v.fontSize,titleFontSize:v.fontSize},text:{fontSize:v.fontSize},legend:{labelFontSize:v.fontSize,titleFontSize:v.fontSize}},data:{values:h},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:v.xType,title:v.xLabel,scale:g()},y:{field:"y",type:v.yType,title:v.yLabel,scale:b()},color:{field:"series",type:"nominal",scale:{range:v.seriesColors}},shape:{field:"series",type:"nominal"}}},r.next=14,u.default(p,y,m);case 14:return r.abrupt("return",Promise.resolve());case 15:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){"use strict";var r=n(660),a=n(2),i=n(163),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(408),s=n(117),c=n(145);function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,void 0,void 0,a.mark((function o(){var l,h,p,v,m,g,b,y,w,x,O,k,j,_,S,E,C,A;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l=s.getDrawArea(e),h={},p=i(n);try{for(p.s();!(v=p.n()).done;)m=v.value,/val_/.test(m)?(b=m.replace("val_",""),f(h,b),y=d(t,m,n.indexOf(m)),h[b].series.push(m),h[b].values.push(y)):(g=d(t,m,n.indexOf(m)),f(h,m),h[m].series.push(m),h[m].values.push(g))}catch(o){p.e(o)}finally{p.f()}for(w=Object.keys(h),x=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),O=[],k=0,j=w;k<j.length;k++)_=j[k],S=c.subSurface(l,_),E=h[_].series,C=h[_].values,E.every((function(e){return Boolean(e.match("acc"))}))&&(x.zoomToFitAccuracy?x.zoomToFit=!0:(x.yAxisDomain=[0,1],delete x.zoomToFit)),A=u.linechart(S,{values:C,series:E},x),O.push(A);return a.next=10,Promise.all(O);case 10:case"end":return a.stop()}}),o)})))}function f(e,t){null==e[t]&&(e[t]={series:[],values:[]})}function d(e,t,n){if(Array.isArray(e)){for(var r=Array.isArray(e[0])?e[n]:e,a=[],i=0;i<r.length;i++){var o=r[i];a.push({x:i,y:o[t]})}return a}return e.history[t].map((function(e,t){return{x:t,y:e}}))}function h(e,t,n){return null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=[]),e[t][n]}t.history=l,t.fitCallbacks=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={},f=n.callbacks||["onEpochEnd","onBatchEnd"],d=s.getDrawArea(e),p=Object.assign({},n);function v(e){var n=this;return function(f,v){return o(n,void 0,void 0,a.mark((function n(){var o,f,m,g,b,y;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:/batch/i.test(e)?p.xLabel="Batch":/epoch/i.test(e)&&(p.xLabel="Epoch"),o=[],f=[],m=i(t);try{for(m.s();!(g=m.n()).done;)b=g.value,null!=v[b]&&(f.push(b),(y=h(u,e,b)).push(r({},b,v[b])),o.push(y))}catch(a){m.e(a)}finally{m.f()}return l(c.subSurface(d,e,{title:e}),o,f,p),n.next=9,s.nextFrame();case 9:case"end":return n.stop()}}),n)})))}}delete p.callbacks;var m={};return f.forEach((function(e){m[e]=v(e)})),m}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(336),o=n(117),u=n(249),s=n(145),c=n(248);function l(e){return{layers:e.layers.map(f)}}function f(e){var t;if(Array.isArray(e.outputShape[0])){var n=e.outputShape.map((function(e){return h(e)}));t="[".concat(n.join(", "),"]")}else t=h(e.outputShape);return{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function d(e){return a(this,void 0,void 0,r.mark((function t(){var n,a,i,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getWeights(),a=e.weights,i=n.map(c.tensorStats),t.next=5,Promise.all(i);case 5:return o=t.sent,u=n.map((function(e){return e.shape})),t.abrupt("return",n.map((function(e,t){return{name:a[t].name,stats:o[t],shape:h(u[t]),weight:e}})));case 8:case"end":return t.stop()}}),t)})))}function h(e){var t=e.slice();return 0===t.length?"Scalar":(null===t[0]&&(t[0]="batch"),"[".concat(t.join(","),"]"))}function p(e,t,n){var r="\n    <select>\n      ".concat(e.map((function(e){return"<option value=".concat(e,">").concat(e,"</option>")})),"\n    </select>\n  "),a="<div>".concat("<button>Show Values Distribution for:</button>").concat(r,"</div>");t.innerHTML=a;var i=t.querySelector("button"),o=t.querySelector("select");i.addEventListener("click",(function(){n(o.selectedOptions[0].label)}))}t.modelSummary=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,i,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=o.getDrawArea(e),i=l(t),s=["Layer Name","Output Shape","# Of Params","Trainable"],c=i.layers.map((function(e){return[e.name,e.outputShape,e.parameters,e.trainable]})),u.table(a,{headers:s,values:c});case 5:case"end":return n.stop()}}),n)})))},t.layer=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var c,l,f,h,v,m,g,b,y=this;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.getDrawArea(e),n.next=3,d(t);case 3:l=n.sent,f=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],h=s.subSurface(c,"layer-weights-info"),v=l.map((function(e){return[e.name,e.shape,e.stats.min,e.stats.max,e.weight.size,e.stats.numZeros,e.stats.numNans,e.stats.numInfs]})),u.table(h,{headers:f,values:v}),m=s.subSurface(c,"select-layer"),g=s.subSurface(c,"param-distribution"),b=function(e){return a(y,void 0,void 0,r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.filter((function(t){return t.name===e}))[0],t.next=3,n.weight.data();case 3:a=t.sent,i.histogram(g,a,{height:150,width:460,stats:!1});case 5:case"end":return t.stop()}}),t)})))},p(l.map((function(e){return e.name})),m,b);case 12:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(117),o=n(249);t.perClassAccuracy=function(e,t,n){return a(this,void 0,void 0,r.mark((function a(){var u,s,c,l,f,d;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u=i.getDrawArea(e),s=["Class","Accuracy","# Samples"],c=[],l=0;l<t.length;l++)f=n?n[l]:l.toString(),d=t[l],c.push([f,d.accuracy,d.count]);return r.abrupt("return",o.table(u,{headers:s,values:c}));case 5:case"end":return r.stop()}}),a)})))}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(336),o=n(117),u=n(248);t.valuesDistribution=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=o.getDrawArea(e),n.next=3,u.tensorStats(t);case 3:return s=n.sent,n.next=6,t.data();case 6:c=n.sent,i.histogram(a,c,{height:150,stats:s});case 8:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.version="1.5.1"},,function(e,t,n){e.exports=n(667)},function(e,t,n){"use strict";var r={ratingDifference:function(e,t){return Math.max(Math.min(e-t,400),-400)},expected:function(e,t){return 1/(1+Math.pow(10,this.ratingDifference(t,e)/400))},calculate:function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],r=arguments.length<=3||void 0===arguments[3]?20:arguments[3],a=this.expected(e,t),i=parseInt(r*(!!n-a),10);return{playerRating:e+i,opponentRating:t+-1*i}}};e.exports=r},,function(e,t,n){"use strict";(function(e){var t=n(48);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var a=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,t){if(t){var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];o in n||(n[o]={}),n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=a.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)u.b(this.a[e]);this.a=null}};var u=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t((function(e,t){a=e,i=t}));return this.Ra(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?u.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=o(e),i=a.next();!i.done;i=a.next())r(i.value).Ra(t,n)}))},t.all=function(e){var n=o(e),a=n.next();return a.done?r([]):new t((function(e,t){function i(t){return function(n){o[t]=n,0==--u&&e(o)}}var o=[],u=0;do{o.push(void 0),u++,r(a.value).Ra(i(o.length-1),t),a=n.next()}while(!a.done)}))},t}));var u=u||{},s=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function f(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""}function d(){}function h(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==h(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++y)}var b="closure_uid_"+(1e9*Math.random()>>>0),y=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function x(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function O(e,t,n){return(O=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:x).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var j=Date.now;function _(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function S(e){return e}function E(e,t,n){this.code=T+e,this.message=t||N[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new E(t.substring(T.length),e.message,e.serverResponse):null}_(E,Error),E.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},E.prototype.toJSON=function(){return this.w()};var A,T="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},I={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(e){for(var t in I)if(I[t].id===e)return{firebaseEndpoint:(e=I[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function R(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function F(e){if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function M(e,t){for(var n="",r=(e=e.split("%s")).length-1,a=0;a<r;a++)n+=e[a]+(a<t.length?t[a]:"%s");F.call(this,n+e[r])}function P(e,t){throw new M("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function L(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function z(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function B(){this.b=this.a=null}A=D("__EID__")?"__EID__":void 0,_(F,Error),F.prototype.name="CustomError",_(M,F),M.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var U=new L((function(){return new V}),(function(e){e.reset()}));function W(){var e=wt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function V(){this.next=this.b=this.a=null}B.prototype.add=function(e,t){var n=U.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},$=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"===typeof e?e.split(""):e,i=0;i<r;i++)i in a&&t.call(n,a[i],i,e)};var H=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],a=0,i="string"===typeof e?e.split(""):e,o=0;o<n;o++)if(o in i){var u=i[o];t.call(void 0,u,o,e)&&(r[a++]=u)}return r},G=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),a="string"===typeof e?e.split(""):e,i=0;i<n;i++)i in a&&(r[i]=t.call(void 0,a[i],i,e));return r},K=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e))return!0;return!1};function X(e,t){return 0<=q(e,t)}function Y(e,t){var n;return(n=0<=(t=q(e,t)))&&Array.prototype.splice.call(e,t,1),n}function J(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function Q(e){return Array.prototype.concat.apply([],arguments)}function Z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ee,te=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ne=/&/g,re=/</g,ae=/>/g,ie=/"/g,oe=/'/g,ue=/\x00/g,se=/[\x00&<>"']/;function ce(e,t){return-1!=e.indexOf(t)}function le(e,t){return e<t?-1:e>t?1:0}e:{var fe=s.navigator;if(fe){var de=fe.userAgent;if(de){ee=de;break e}}ee=""}function he(e){return ce(ee,e)}function pe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ve(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<ge.length;i++)n=ge[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ye(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var a=r;break e}}catch(o){}a=null}if(a&&"undefined"!=typeof a[t]&&(!e||!(e instanceof a[t])&&(e instanceof a.Location||e instanceof a.Element))){if(m(e))try{var i=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(o){i="<object could not be stringified>"}else i=void 0===e?"undefined":null===e?"null":typeof e;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,i)}}function we(e,t){this.a=e===je&&t||"",this.b=ke}function xe(e){return e instanceof we&&e.constructor===we&&e.b===ke?e.a:(P("expected object of type Const, got '"+e+"'"),"type_error:Const")}we.prototype.ta=!0,we.prototype.sa=function(){return this.a},we.prototype.toString=function(){return"Const{"+this.a+"}"};var Oe,ke={},je={};function _e(){if(void 0===Oe){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}Oe=e}else Oe=e}return Oe}function Se(e,t){this.a=t===Ne?e:""}function Ee(e){return e instanceof Se&&e.constructor===Se?e.a:(P("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=xe(e);if(!Te.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=_e();return new Se(e=t?t.createScriptURL(e):e,Ne)}(e=n.replace(Ae,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof we?xe(e):encodeURIComponent(String(e))})))}Se.prototype.ta=!0,Se.prototype.sa=function(){return this.a.toString()},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ae=/%{(\w+)}/g,Te=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ne={};function Ie(e,t){this.a=t===ze?e:""}function De(e){return e instanceof Ie&&e.constructor===Ie?e.a:(P("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}Ie.prototype.ta=!0,Ie.prototype.sa=function(){return this.a.toString()},Ie.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Re=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Fe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Me=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pe(e){if(e instanceof Ie)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Me.test(e))e=new Ie(e,ze);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Fe);e=t&&Re.test(t[1])?new Ie(e,ze):null}return e}function Le(e){return e instanceof Ie?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Me.test(e)||(e="about:invalid#zClosurez"),new Ie(e,ze))}var ze={},Be=new Ie("about:invalid#zClosurez",ze);function Ue(e,t,n){this.a=n===We?e:""}Ue.prototype.ta=!0,Ue.prototype.sa=function(){return this.a.toString()},Ue.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var We={};function Ve(e,t,n,r){return e=e instanceof Ie?e:Le(e),t=t||s,n=n instanceof we?xe(n):n||"",t.open(De(e),n,r,void 0)}function qe(e,t){for(var n=e.split("%s"),r="",a=Array.prototype.slice.call(arguments,1);a.length&&1<n.length;)r+=n.shift()+a.shift();return r+n.join("%s")}function $e(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ne,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(re,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ae,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ue,"&#0;"))),e}function He(e){return He[" "](e),e}He[" "]=d;var Ge,Ke=he("Opera"),Xe=he("Trident")||he("MSIE"),Ye=he("Edge"),Je=Ye||Xe,Qe=he("Gecko")&&!(ce(ee.toLowerCase(),"webkit")&&!he("Edge"))&&!(he("Trident")||he("MSIE"))&&!he("Edge"),Ze=ce(ee.toLowerCase(),"webkit")&&!he("Edge");function et(){var e=s.document;return e?e.documentMode:void 0}e:{var tt="",nt=function(){var e=ee;return Qe?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ze?/WebKit\/(\S+)/.exec(e):Ke?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nt&&(tt=nt?nt[1]:""),Xe){var rt=et();if(null!=rt&&rt>parseFloat(tt)){Ge=String(rt);break e}}Ge=tt}var at,it={};function ot(e){return function(e,t){var n=it;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=te(String(Ge)).split("."),r=te(String(e)).split("."),a=Math.max(n.length,r.length),i=0;0==t&&i<a;i++){var o=n[i]||"",u=r[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;t=le(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||le(0==o[2].length,0==u[2].length)||le(o[2],u[2]),o=o[3],u=u[3]}while(0==t)}return 0<=t}))}if(s.document&&Xe){var ut=et();at=ut||(parseInt(Ge,10)||void 0)}else at=void 0;var st=at;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(fo){}var ct=!Xe||9<=Number(st);function lt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function ft(e,t){pe(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:pt.hasOwnProperty(n)?e.setAttribute(pt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var dt,ht,pt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function vt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var a=2;a<n.length;a++){var i=n[a];if(!p(i)||m(i)&&0<i.nodeType)r(i);else{e:{if(i&&"number"==typeof i.length){if(m(i)){var o="function"==typeof i.item||"string"==typeof i.item;break e}if(v(i)){o="function"==typeof i.item;break e}}o=!1}$(o?Z(i):i,r)}}}function mt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function gt(e){s.setTimeout((function(){throw e}),0)}function bt(e,t){ht||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);ht=function(){e.then(xt)}}else ht=function(){var e=xt;!v(s.setImmediate)||s.Window&&s.Window.prototype&&!he("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(dt||(dt=function(){var e=s.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!he("Presto")&&(e=function(){var e=mt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=O((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!he("Trident")&&!he("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),dt(e)):s.setImmediate(e)}}(),yt||(ht(),yt=!0),wt.add(e,t)}var yt=!1,wt=new B;function xt(){for(var e;e=W();){try{e.a.call(e.b)}catch(t){gt(t)}z(U,e)}yt=!1}function Ot(e,t){if(this.a=kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=d)try{var n=this;e.call(t,(function(e){Mt(n,jt,e)}),(function(e){if(!(e instanceof Vt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Mt(n,_t,e)}))}catch(r){Mt(this,_t,r)}}var kt=0,jt=2,_t=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Et=new L((function(){return new St}),(function(e){e.reset()}));function Ct(e,t,n){var r=Et.get();return r.g=e,r.b=t,r.f=n,r}function At(e){if(e instanceof Ot)return e;var t=new Ot(d);return Mt(t,jt,e),t}function Tt(e){return new Ot((function(t,n){n(e)}))}function Nt(e,t,n){Pt(e,t,n,null)||bt(k(t,e))}function It(e){return new Ot((function(t){var n=e.length,r=[];if(n)for(var a=function(e,a,i){n--,r[e]=a?{Qb:!0,value:i}:{Qb:!1,reason:i},0==n&&t(r)},i=0;i<e.length;i++)Nt(e[i],k(a,i,!0),k(a,i,!1));else t(r)}))}function Dt(e,t){if(e.a==kt)if(e.c){var n=e.c;if(n.b){for(var r=0,a=null,i=null,o=n.b;o&&(o.c||(r++,o.a==e&&(a=o),!(a&&1<r)));o=o.next)a||(i=o);a&&(n.a==kt&&1==r?Dt(n,t):(i?((r=i).next==n.f&&(n.f=r),r.next=r.next.next):zt(n),Bt(n,a,_t,t)))}e.c=null}else Mt(e,_t,t)}function Rt(e,t){e.b||e.a!=jt&&e.a!=_t||Lt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Ft(e,t,n,r){var a=Ct(null,null,null);return a.a=new Ot((function(e,i){a.g=t?function(n){try{var a=t.call(r,n);e(a)}catch(o){i(o)}}:e,a.b=n?function(t){try{var a=n.call(r,t);void 0===a&&t instanceof Vt?i(t):e(a)}catch(o){i(o)}}:i})),a.a.c=e,Rt(e,a),a.a}function Mt(e,t,n){e.a==kt&&(e===n&&(t=_t,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Pt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Lt(e),t!=_t||n instanceof Vt||function(e,t){e.g=!0,bt((function(){e.g&&Wt.call(null,t)}))}(e,n)))}function Pt(e,t,n,r){if(e instanceof Ot)return Rt(e,Ct(t||d,n||null,r)),!0;if(R(e))return e.then(t,n,r),!0;if(m(e))try{var a=e.then;if(v(a))return function(e,t,n,r,a){function i(e){u||(u=!0,r.call(a,e))}function o(e){u||(u=!0,n.call(a,e))}var u=!1;try{t.call(e,o,i)}catch(s){i(s)}}(e,a,t,n,r),!0}catch(i){return n.call(r,i),!0}return!1}function Lt(e){e.h||(e.h=!0,bt(e.gc,e))}function zt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Bt(e,t,n,r){if(n==_t&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,r);else try{t.c?t.g.call(t.f):Ut(t,n,r)}catch(a){Wt.call(null,a)}z(Et,t)}function Ut(e,t,n){t==jt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Ot.prototype.then=function(e,t,n){return Ft(this,v(e)?e:null,v(t)?t:null,n)},Ot.prototype.$goog_Thenable=!0,(n=Ot.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,Rt(this,e),this},n.o=function(e,t){return Ft(this,null,e,t)},n.cancel=function(e){if(this.a==kt){var t=new Vt(e);bt((function(){Dt(this,t)}),this)}},n.$c=function(e){this.a=kt,Mt(this,jt,e)},n.ad=function(e){this.a=kt,Mt(this,_t,e)},n.gc=function(){for(var e;e=zt(this);)Bt(this,e,this.a,this.i);this.h=!1};var Wt=gt;function Vt(e){F.call(this,e)}function qt(){0!=$t&&(Ht[g(this)]=this),this.ya=this.ya,this.pa=this.pa}_(Vt,F),Vt.prototype.name="cancel";var $t=0,Ht={};function Gt(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=$t)){var t=g(e);if(0!=$t&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ht[t]}}qt.prototype.ya=!1,qt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Kt=Object.freeze||function(e){return e},Xt=!Xe||9<=Number(st),Yt=Xe&&!ot("9"),Jt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",d,t),s.removeEventListener("test",d,t)}catch(n){}return e}();function Qt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Zt(e,t){if(Qt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Qe){e:{try{He(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Qt.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Zt,Qt);var en=Kt({2:"touch",3:"pen",4:"mouse"});Zt.prototype.preventDefault=function(){Zt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Zt.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=a,this.key=++nn,this.wa=this.Qa=!1}function an(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function on(e){this.src=e,this.a={},this.b=0}function un(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(an(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function sn(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.wa&&i.listener==t&&i.capture==!!n&&i.Wa==r)return a}return-1}on.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.a[i])||(e=this.a[i]=[],this.b++);var o=sn(e,t,r,a);return-1<o?(t=e[o],n||(t.Qa=!1)):((t=new rn(t,this.src,i,!!r,a)).Qa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(e,t,n,r,a){if(r&&r.once)hn(e,t,n,r,a);else if(Array.isArray(t))for(var i=0;i<t.length;i++)fn(e,t[i],n,r,a);else n=On(n),e&&e[tn]?jn(e,t,n,m(r)?!!r.capture:!!r,a):dn(e,t,n,!1,r,a)}function dn(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=m(a)?!!a.capture:!!a,u=wn(e);if(u||(e[cn]=u=new on(e)),!(n=u.add(t,n,r,o,i)).proxy){if(r=function(){var e=yn,t=Xt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jt||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function hn(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)hn(e,t[i],n,r,a);else n=On(n),e&&e[tn]?_n(e,t,n,m(r)?!!r.capture:!!r,a):dn(e,t,n,!0,r,a)}function pn(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)pn(e,t[i],n,r,a);else r=m(r)?!!r.capture:!!r,n=On(n),e&&e[tn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=sn(i=e.a[t],n,r,a))&&(an(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.a[t],e.b--)))):e&&(e=wn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=sn(t,n,r,a)),(n=-1<e?t[e]:null)&&vn(n))}function vn(e){if("number"!==typeof e&&e&&!e.wa){var t=e.src;if(t&&t[tn])un(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=wn(t))?(un(n,e),0==n.b&&(n.src=null,t[cn]=null)):an(e)}}}function mn(e){return e in ln?ln[e]:ln[e]="on"+e}function gn(e,t,n,r){var a=!0;if((e=wn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==n&&!i.wa&&(i=bn(i,r),a=a&&!1!==i)}return a}function bn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&vn(e),n.call(r,t)}function yn(e,t){if(e.wa)return!0;if(!Xt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Zt(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var a=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(o){a=!0}(a||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],a=t.b;a;a=a.parentNode)r.push(a);for(e=e.type,a=r.length-1;0<=a;a--){t.b=r[a];var i=gn(r[a],e,!0,t);n=n&&i}for(a=0;a<r.length;a++)t.b=r[a],i=gn(r[a],e,!1,t),n=n&&i}return n}return bn(e,new Zt(t,this))}function wn(e){return(e=e[cn])instanceof on?e:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(e){return v(e)?e:(e[xn]||(e[xn]=function(t){return e.handleEvent(t)}),e[xn])}function kn(){qt.call(this),this.v=new on(this),this.bc=this,this.hb=null}function jn(e,t,n,r,a){e.v.add(String(t),n,!1,r,a)}function _n(e,t,n,r,a){e.v.add(String(t),n,!0,r,a)}function Sn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.wa&&o.capture==n){var u=o.listener,s=o.Wa||o.src;o.Qa&&un(e.v,o),a=!1!==u.call(s,r)&&a}}return a&&!r.defaultPrevented}function En(e,t,n){if(v(e))n&&(e=O(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=O(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Cn(e){var t=null;return new Ot((function(n,r){-1==(t=En((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function An(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Tn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Nn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function In(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var a={};for(n=t=0;t<e.a.length;)Dn(a,r=e.a[t])||(e.a[n++]=r,a[r]=1),t++;e.a.length=n}}function Dn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}_(kn,qt),kn.prototype[tn]=!0,kn.prototype.addEventListener=function(e,t,n,r){fn(this,e,t,n,r)},kn.prototype.removeEventListener=function(e,t,n,r){pn(this,e,t,n,r)},kn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"===typeof e)e=new Qt(e,n);else if(e instanceof Qt)e.target=e.target||n;else{var a=e;be(e=new Qt(r,n),a)}if(a=!0,t)for(var i=t.length-1;0<=i;i--){var o=e.b=t[i];a=Sn(o,r,!0,e)&&a}if(a=Sn(o=e.b=n,r,!0,e)&&a,a=Sn(o,r,!1,e)&&a,t)for(i=0;i<t.length;i++)a=Sn(o=e.b=t[i],r,!1,e)&&a;return a},kn.prototype.Da=function(){if(kn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)an(n[r]);delete t.a[e],t.b--}}this.hb=null},(n=Nn.prototype).X=function(){In(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return In(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return Dn(this.b,e)?this.b[e]:t},n.set=function(e,t){Dn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var a=n[r],i=this.get(a);e.call(t,i,a,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Fn?(this.i=void 0!==t?t:e.i,Mn(this,e.c),this.l=e.l,this.a=e.a,Pn(this,e.g),this.f=e.f,Ln(this,rr(e.b)),this.h=e.h):e&&(n=String(e).match(Rn))?(this.i=!!t,Mn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Pn(this,n[4]),this.f=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!t,this.b=new Jn(null,this.i))}function Mn(e,t,n){e.c=n?Vn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Pn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Ln(e,t,n){t instanceof Jn?(e.b=t,function(e,t){t&&!e.f&&(Qn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(er(this,t),nr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=qn(t,Xn)),e.b=new Jn(t,e.i))}function zn(e,t,n){e.b.set(t,n)}function Bn(e,t){return e.b.get(t)}function Un(e){return e instanceof Fn?new Fn(e):new Fn(e,void 0)}function Wn(e,t,n,r){var a=new Fn(null,void 0);return e&&Mn(a,e),t&&(a.a=t),n&&Pn(a,n),r&&(a.f=r),a}function Vn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,$n),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function $n(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(qn(t,Hn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(qn(t,Hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(qn(n,"/"==n.charAt(0)?Kn:Gn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",qn(n,Yn)),e.join("")},Fn.prototype.resolve=function(e){var t=new Fn(this),n=!!e.c;n?Mn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Pn(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var a=t.f.lastIndexOf("/");-1!=a&&(r=t.f.substr(0,a+1)+r)}if(".."==(a=r)||"."==a)r="";else if(ce(a,"./")||ce(a,"/.")){r=0==a.lastIndexOf("/",0),a=a.split("/");for(var i=[],o=0;o<a.length;){var u=a[o++];"."==u?r&&o==a.length&&i.push(""):".."==u?((1<i.length||1==i.length&&""!=i[0])&&i.pop(),r&&o==a.length&&i.push("")):(i.push(u),r=!0)}r=i.join("/")}else r=a}return n?t.f=r:n=""!==e.b.toString(),n?Ln(t,rr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Hn=/[#\/\?@]/g,Gn=/[#\?:]/g,Kn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function Jn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Qn(e){e.a||(e.a=new Nn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zn(e){var t=Tn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Jn(null,void 0);e=An(e);for(var r=0;r<t.length;r++){var a=t[r],i=e[r];Array.isArray(i)?nr(n,a,i):n.add(a,i)}return n}function er(e,t){Qn(e),t=ar(e,t),Dn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Dn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&In(e)))}function tr(e,t){return Qn(e),t=ar(e,t),Dn(e.a.b,t)}function nr(e,t,n){er(e,t),0<n.length&&(e.c=null,e.a.set(ar(e,t),Z(n)),e.b+=n.length)}function rr(e){var t=new Jn;return t.c=e.c,e.a&&(t.a=new Nn(e.a),t.b=e.b),t}function ar(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ir(e){var t=[];return ur(new or,e,t),t.join("")}function or(){}function ur(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var a="",i=0;i<t;i++)n.push(a),ur(e,r[i],n),a=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),a="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(i=t[r])&&(n.push(a),lr(r,n),n.push(":"),ur(e,i,n),a=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":lr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(n=Jn.prototype).add=function(e,t){Qn(this),this.c=null,e=ar(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){Qn(this),this.a.forEach((function(n,r){$(n,(function(n){e.call(t,n,r,this)}),this)}),this)},n.Y=function(){Qn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},n.X=function(e){Qn(this);var t=[];if("string"===typeof e)tr(this,e)&&(t=Q(t,this.a.get(ar(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=Q(t,e[n])}return t},n.set=function(e,t){return Qn(this),this.c=null,tr(this,e=ar(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r));r=this.X(r);for(var i=0;i<r.length;i++){var o=a;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.c=e.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(e,t){t.push('"',e.replace(cr,(function(e){var t=sr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),sr[e]=t),t})),'"')}function fr(){var e=Nr();return Xe&&!!st&&11==st||/Edge\/\d+/.test(e)}function dr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(e,t){t=t||s.window;var n="about:blank";e&&(n=De(Pe(e)||Be)),t.location.href=n}function pr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<pr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function vr(e){return!!((e=(e||Nr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function mr(e){e=e||s.window;try{e.close()}catch(t){}}function gr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var a=(window.screen.availHeight-n)/2,i=(window.screen.availWidth-t)/2;for(o in t={width:t,height:n,top:0<a?a:0,left:0<i?i:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(t.target=r,ce(n,"crios/")&&(t.target="_blank")),Cr(Nr())==Sr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Ie?n:Pe("undefined"!=typeof n.href?n.href:String(n))||Be,n=e.target||n.target,a=[],e)switch(o){case"width":case"height":case"top":case"left":a.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:a.push(o+"="+(e[o]?1:0))}var o=a.join(",");if((he("iPhone")&&!he("iPod")&&!he("iPad")||he("iPad")||he("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ye(o=mt(document,"A"),"HTMLAnchorElement"),t=t instanceof Ie?t:Le(t),o.href=De(t),o.setAttribute("target",n),e.noreferrer&&o.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),o.dispatchEvent(e),o={}):e.noreferrer?(o=Ve("",r,n,o),e=De(t),o&&(Je&&ce(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),o.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+$e(e)+'">',e=new Ue(e=(r=_e())?r.createHTML(e):e,null,We),r=o.document)&&(r.write(function(e){return e instanceof Ue&&e.constructor===Ue?e.a:(P("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")}(e)),r.close())):(o=Ve(t,r,n,o))&&e.noopener&&(o.opener=null),o)try{o.focus()}catch(u){}return o}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function wr(){var e=null;return new Ot((function(t){"complete"==s.document.readyState?t():(e=function(){t()},hn(window,"load",e))})).o((function(t){throw pn(window,"load",e),t}))}function xr(e){return e=e||Nr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Or(){var e=s.window;try{return!(!e||e==e.top)}catch(t){return!1}}function kr(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function jr(){return t.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.a.INTERNAL.hasOwnProperty("node")?"Node":kr()?"Worker":"Browser"}function _r(){var e=jr();return"ReactNative"===e||"Node"===e}var Sr="Firefox",Er="Chrome";function Cr(e){var t=e.toLowerCase();return ce(t,"opera/")||ce(t,"opr/")||ce(t,"opios/")?"Opera":ce(t,"iemobile")?"IEMobile":ce(t,"msie")||ce(t,"trident/")?"IE":ce(t,"edge/")?"Edge":ce(t,"firefox/")?Sr:ce(t,"silk/")?"Silk":ce(t,"blackberry")?"Blackberry":ce(t,"webos")?"Webos":!ce(t,"safari/")||ce(t,"chrome/")||ce(t,"crios/")||ce(t,"android")?!ce(t,"chrome/")&&!ce(t,"crios/")||ce(t,"edge/")?ce(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Er:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Tr(e,t){t=t||[];var n,r=[],a={};for(n in Ar)a[Ar[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof a[t[n]]&&(delete a[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=jr())?r=Cr(a=Nr()):"Worker"===r&&(r=Cr(a=Nr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Nr(){return s.navigator&&s.navigator.userAgent||""}function Ir(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Dr(){try{var e=s.localStorage,t=Ur();if(e)return e.setItem(t,"1"),e.removeItem(t),!fr()||!!s.indexedDB}catch(n){return kr()&&!!s.indexedDB}return!1}function Rr(){return(Fr()||"chrome-extension:"===Mr()||xr())&&!_r()&&Dr()&&!kr()}function Fr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return s.location&&s.location.protocol||null}function Pr(e){return!vr(e=e||Nr())&&Cr(e)!=Sr}function Lr(e){return"undefined"===typeof e?null:ir(e)}function zr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Br(e){if(null!==e)return JSON.parse(e)}function Ur(e){return e||Math.floor(1e9*Math.random()).toString()}function Wr(e){return"Safari"!=Cr(e=e||Nr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function qr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Nr(),t=jr(),this.b=vr(e)||"ReactNative"===t}function $r(){var e=s.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Hr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Gr(){return!(!Ir("fireauth.oauthhelper",s)&&!Ir("fireauth.iframe",s))}qr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!==typeof e.onLine||!Fr()&&"chrome-extension:"!==Mr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Xr={};function Yr(e){Xr[e]||(Xr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==Jr.abcd}catch(fo){Kr=!1}function Qr(e,t,n){Kr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Zr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Qr(e,n,t[n])}function ea(e){var t={};return Zr(t,e),t}function ta(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Qr(t,n,ta(e[n]));return t}function na(e){var t=e&&(e[ua]?"phone":null);if(!(t&&e&&e[oa]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",e[oa]),Qr(this,"displayName",e[aa]||null);var n=null;e[ia]&&(n=new Date(e[ia]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",t)}function ra(e){try{var t=new sa(e)}catch(n){t=null}return t}na.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var aa="displayName",ia="enrolledAt",oa="mfaEnrollmentId",ua="phoneInfo";function sa(e){na.call(this,e),Qr(this,"phoneNumber",e[ua])}function ca(e){var t={},n=e[ha],r=e[va],a=e[ma];if(e=ra(e[pa]),!a||a!=fa&&a!=da&&!n||a==da&&!r||a==la&&!e)throw Error("Invalid checkActionCode response!");a==da?(t[ba]=n||null,t[wa]=n||null,t[ga]=r):(t[ba]=r||null,t[wa]=r||null,t[ga]=n||null),t[ya]=e||null,Qr(this,Oa,a),Qr(this,xa,ta(t))}_(sa,na),sa.prototype.w=function(){var e=sa.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var la="REVERT_SECOND_FACTOR_ADDITION",fa="EMAIL_SIGNIN",da="VERIFY_AND_CHANGE_EMAIL",ha="email",pa="mfaInfo",va="newEmail",ma="requestType",ga="email",ba="fromEmail",ya="multiFactorInfo",wa="previousEmail",xa="data",Oa="operation";function ka(e){var t=Bn(e=Un(e),ja)||null,n=Bn(e,_a)||null,r=Bn(e,Ca)||null;if(r=r&&Ta[r]||null,!t||!n||!r)throw new E("argument-error",ja+", "+_a+"and "+Ca+" are required in a valid action code URL.");Zr(this,{apiKey:t,operation:r,code:n,continueUrl:Bn(e,Sa)||null,languageCode:Bn(e,Ea)||null,tenantId:Bn(e,Aa)||null})}var ja="apiKey",_a="oobCode",Sa="continueUrl",Ea="languageCode",Ca="mode",Aa="tenantId",Ta={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:la,signIn:fa,verifyAndChangeEmail:da,verifyEmail:"VERIFY_EMAIL"};function Na(e){try{return new ka(e)}catch(t){return null}}function Ia(e){var t=e[Pa];if("undefined"===typeof t)throw new E("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new E("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Da];if(n&&"object"===typeof n){t=n[Ba];var r=n[La];if(n=n[za],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new E("argument-error",La+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new E("argument-error",za+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new E("argument-error",Ba+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new E("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new E("argument-error",Da+" property must be a non null object when specified.");if(this.f=null,(t=e[Ma])&&"object"===typeof t){if("string"===typeof(t=t[Ua])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new E("argument-error",Ua+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new E("argument-error",Ma+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Fa])&&"boolean"!==typeof t)throw new E("argument-error",Fa+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Ra])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new E("argument-error",Ra+" property must be a non empty string when specified.");this.i=e||null}var Da="android",Ra="dynamicLinkDomain",Fa="handleCodeInApp",Ma="iOS",Pa="url",La="installApp",za="minimumVersion",Ba="packageName",Ua="bundleId";function Wa(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Va=null;function qa(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=Va[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Va){Va={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),a=0;a<r.length;a++){var i=r[a];void 0===Va[i]&&(Va[i]=a)}}}();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),u=n(64);if(64===u&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=u&&t(o<<6&192|u))}}(e,(function(e){t.push(e)})),t}function $a(e){var t=Ga(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Ha(e){try{return new $a(e)}catch(t){return null}}function Ga(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=qa(e);for(e=[],n=t=0;t<r.length;){var a=r[t++];if(128>a)e[n++]=String.fromCharCode(a);else if(191<a&&224>a){var i=r[t++];e[n++]=String.fromCharCode((31&a)<<6|63&i)}else if(239<a&&365>a){i=r[t++];var o=r[t++],u=((7&a)<<18|(63&i)<<12|(63&o)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(1023&u))}else i=r[t++],o=r[t++],e[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o)}return JSON.parse(e.join(""))}catch(s){}return null}$a.prototype.T=function(){return this.f},$a.prototype.l=function(){return this.c},$a.prototype.toString=function(){return this.h};var Ka="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xa=["client_id","response_type","scope","redirect_uri","state"],Ya={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Xa},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Xa},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Xa},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Ka},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ja(e){for(var t in Ya)if(Ya[t].fa==e)return Ya[t];return null}function Qa(e){var t={};t["facebook.com"]=ri,t["google.com"]=ii,t["github.com"]=ai,t["twitter.com"]=oi;var n=e&&e[ei];try{if(n)return t[n]?new t[n](e):new ni(e);if("undefined"!==typeof e[Za])return new ti(e)}catch(r){}return null}var Za="idToken",ei="providerId";function ti(e){var t=e[ei];if(!t&&e[Za]){var n=Ha(e[Za]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Qr(this,"providerId",t),Qr(this,"isNewUser",n)}function ni(e){ti.call(this,e),Qr(this,"profile",ta((e=Br(e.rawUserInfo||"{}"))||{}))}function ri(e){if(ni.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ai(e){if(ni.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function ii(e){if(ni.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oi(e){if(ni.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",e.screenName||null)}function ui(e){var t=Un(e),n=Bn(t,"link"),r=Bn(Un(n),"link");return t=Bn(t,"deep_link_id"),Bn(Un(t),"link")||t||r||n||e}function si(e,t){if(!e&&!t)throw new E("internal-error","Internal assert: no raw session string available");if(e&&t)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ci:li}_(ni,ti),_(ri,ni),_(ai,ni),_(ii,ni),_(oi,ni);var ci="enroll",li="signin";function fi(){}function di(e,t){return e.then((function(e){if(e[nu]){var n=Ha(e[nu]);if(!n||t!=n.i)throw new E("user-mismatch");return e}throw new E("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==T+"user-not-found"?new E("user-mismatch"):e}))}function hi(e,t){if(!t)throw new E("internal-error","failed to construct a credential");this.a=t,Qr(this,"providerId",e),Qr(this,"signInMethod",e)}function pi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function vi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new hi(e.providerId,e.pendingToken)}catch(t){}return null}function mi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Qr(this,"idToken",t.idToken),t.accessToken&&Qr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Qr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Qr(this,"accessToken",t.oauthToken),Qr(this,"secret",t.oauthTokenSecret)}Qr(this,"providerId",e),Qr(this,"signInMethod",n)}function gi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Zn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function bi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new mi(e.providerId,t,e.signInMethod)}catch(n){}}return null}function yi(e,t){this.Qc=t||[],Zr(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Ja(e)||{}).Ja||null,this.pb=null}function wi(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');yi.call(this,e,[])}function xi(e){yi.call(this,e,Xa),this.a=[]}function Oi(){xi.call(this,"facebook.com")}function ki(e){if(!e)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Oi).credential({accessToken:t})}function ji(){xi.call(this,"github.com")}function _i(e){if(!e)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new ji).credential({accessToken:t})}function Si(){xi.call(this,"google.com"),this.Ca("profile")}function Ei(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new Si).credential({idToken:n,accessToken:t})}function Ci(){yi.call(this,"twitter.com",Ka)}function Ai(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mi("twitter.com",n,"twitter.com")}function Ti(e,t,n){this.a=e,this.f=t,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Ii.EMAIL_LINK_SIGN_IN_METHOD?Ii.EMAIL_LINK_SIGN_IN_METHOD:Ii.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ni(e){return e&&e.email&&e.password?new Ti(e.email,e.password,e.signInMethod):null}function Ii(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Di(e,t){if(!(t=Ri(t)))throw new E("argument-error","Invalid email link!");return new Ti(e,t.code,Ii.EMAIL_LINK_SIGN_IN_METHOD)}function Ri(e){return(e=Na(e=ui(e)))&&e.operation===fa?e:null}function Fi(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new E("internal-error");this.a=e,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Mi(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return $(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Fi(t)}return null}function Pi(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Li(e){try{this.a=e||t.a.auth()}catch(n){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function zi(e,t){if(!e)throw new E("missing-verification-id");if(!t)throw new E("missing-verification-code");return new Fi({fb:e,eb:t})}function Bi(e){if(e.temporaryProof&&e.phoneNumber)return new Fi({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,a=e&&e.nonce,i=e&&e.oauthIdToken,o=e&&e.pendingToken;try{switch(t){case"google.com":return Ei(i,n);case"facebook.com":return ki(n);case"github.com":return _i(n);case"twitter.com":return Ai(n,r);default:return n||r||i||o?o?0==t.indexOf("saml.")?new hi(t,o):new mi(t,{pendingToken:o,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new xi(t).credential({idToken:i,accessToken:n,rawNonce:a}):null}}catch(u){return null}}function Ui(e){if(!e.isOAuthProvider)throw new E("invalid-oauth-provider")}function Wi(e,t,n,r,a,i,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=i||null,this.h=o||null,this.a=a||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Vi(e){return(e=e||{}).type?new Wi(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function qi(){this.b=null,this.a=[]}si.prototype.Ha=function(){return this.a?At(this.a):At(this.b)},si.prototype.w=function(){return this.type==ci?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},fi.prototype.ka=function(){},fi.prototype.b=function(){},fi.prototype.c=function(){},fi.prototype.w=function(){},hi.prototype.ka=function(e){return ju(e,pi(this))},hi.prototype.b=function(e,t){var n=pi(this);return n.idToken=t,_u(e,n)},hi.prototype.c=function(e,t){return di(Su(e,pi(this)),t)},hi.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mi.prototype.ka=function(e){return ju(e,gi(this))},mi.prototype.b=function(e,t){var n=gi(this);return n.idToken=t,_u(e,n)},mi.prototype.c=function(e,t){return di(Su(e,gi(this)),t)},mi.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},yi.prototype.Ka=function(e){return this.Jb=me(e),this},_(wi,yi),_(xi,yi),xi.prototype.Ca=function(e){return X(this.a,e)||this.a.push(e),this},xi.prototype.Rb=function(){return Z(this.a)},xi.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new mi(this.providerId,n,this.providerId)},_(Oi,xi),Qr(Oi,"PROVIDER_ID","facebook.com"),Qr(Oi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(ji,xi),Qr(ji,"PROVIDER_ID","github.com"),Qr(ji,"GITHUB_SIGN_IN_METHOD","github.com"),_(Si,xi),Qr(Si,"PROVIDER_ID","google.com"),Qr(Si,"GOOGLE_SIGN_IN_METHOD","google.com"),_(Ci,yi),Qr(Ci,"PROVIDER_ID","twitter.com"),Qr(Ci,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ti.prototype.ka=function(e){return this.signInMethod==Ii.EMAIL_LINK_SIGN_IN_METHOD?us(e,Ru,{email:this.a,oobCode:this.f}):us(e,ns,{email:this.a,password:this.f})},Ti.prototype.b=function(e,t){return this.signInMethod==Ii.EMAIL_LINK_SIGN_IN_METHOD?us(e,Fu,{idToken:t,email:this.a,oobCode:this.f}):us(e,Ku,{idToken:t,email:this.a,password:this.f})},Ti.prototype.c=function(e,t){return di(this.ka(e),t)},Ti.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ii,{PROVIDER_ID:"password"}),Zr(Ii,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ii,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fi.prototype.ka=function(e){return e.gb(Pi(this))},Fi.prototype.b=function(e,t){var n=Pi(this);return n.idToken=t,us(e,as,n)},Fi.prototype.c=function(e,t){var n=Pi(this);return n.operation="REAUTH",di(e=us(e,is,n),t)},Fi.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Li.prototype.gb=function(e,t){var n=this.a.a;return At(t.verify()).then((function(r){if("string"!==typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var a=m(e)?e.session:null,i=m(e)?e.phoneNumber:e;return(a&&a.type==ci?a.Ha().then((function(e){return function(e,t){return us(e,Yu,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r}})})):a&&a.type==li?a.Ha().then((function(t){return function(e,t){return us(e,Ju,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return us(e,Hu,t)}(n,{phoneNumber:i,recaptchaToken:r})).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Li,{PROVIDER_ID:"phone"}),Zr(Li,{PHONE_SIGN_IN_METHOD:"phone"}),Wi.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Wi.prototype.T=function(){return this.h},Wi.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var $i,Hi=null;function Gi(e){var t="unauthorized-domain",n=void 0,r=Un(e);e=r.a,"chrome-extension"==(r=r.c)?n=qe("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=qe("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",E.call(this,t,n)}function Ki(e,t,n){E.call(this,e,n),(e=t||{}).Kb&&Qr(this,"email",e.Kb),e.ea&&Qr(this,"phoneNumber",e.ea),e.credential&&Qr(this,"credential",e.credential),e.$b&&Qr(this,"tenantId",e.$b)}function Xi(e){if(e.code){var t=e.code||"";0==t.indexOf(T)&&(t=t.substring(T.length));var n={credential:Bi(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new E(t,e.message||void 0);return new Ki(t,n,e.message)}return null}function Yi(){}function Ji(e){return e.c||(e.c=e.b())}function Qi(){}function Zi(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(a){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function eo(){}function to(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=O(this.qc,this),this.a.onerror=O(this.Tb,this),this.a.onprogress=O(this.rc,this),this.a.ontimeout=O(this.vc,this)}function no(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ro(e,t,n){this.reset(e,t,n,void 0,void 0)}_(Gi,E),_(Ki,E),Ki.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&be(e,t),e},Ki.prototype.toJSON=function(){return this.w()},Yi.prototype.c=null,_(Qi,Yi),Qi.prototype.a=function(){var e=Zi(this);return e?new ActiveXObject(e):new XMLHttpRequest},Qi.prototype.b=function(){var e={};return Zi(this)&&(e[0]=!0,e[1]=!0),e},$i=new Qi,_(eo,Yi),eo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new to;throw Error("Unsupported browser")},eo.prototype.b=function(){return{}},(n=to.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,no(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",no(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,no(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ro.prototype.a=null;function ao(e){this.f=e,this.b=this.c=this.a=null}function io(e,t){this.name=e,this.value=t}ro.prototype.reset=function(e,t,n,r,a){"number"==typeof a||0,r||j(),delete this.a},io.prototype.toString=function(){return this.name};var oo=new io("SEVERE",1e3),uo=new io("WARNING",900),so=new io("CONFIG",700),co=new io("FINE",500);function lo(e){return e.c?e.c:e.a?lo(e.a):(P("Root logger has no level set."),null)}ao.prototype.log=function(e,t,n){if(e.value>=lo(this).value)for(v(t)&&(t=t()),e=new ro(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var fo,ho={},po=null;function vo(e){var t;if(po||(po=new ao(""),ho[""]=po,po.c=so),!(t=ho[e])){t=new ao(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=vo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,ho[e]=t}return t}function mo(e,t){e&&e.log(co,t,void 0)}function go(e){this.f=e}function bo(e){kn.call(this),this.u=e,this.h=void 0,this.readyState=yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=vo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(go,Yi),go.prototype.a=function(){return new bo(this.f)},go.prototype.b=(fo={},function(){return fo}),_(bo,kn);var yo=0;function wo(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function xo(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Oo(e)}function Oo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ko(e){kn.call(this),this.headers=new Nn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=jo,this.u=this.S=!1}(n=bo.prototype).open=function(e,t){if(this.readyState!=yo)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Oo(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xo(this)),this.readyState=yo},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Oo(this)),this.a&&(this.readyState=3,Oo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,wo(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?xo(this):Oo(this),3==this.readyState&&wo(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,xo(this))},n.sc=function(e){this.a&&(this.response=e,xo(this))},n.Va=function(e){var t=this.i;t&&t.log(uo,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&xo(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(uo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(uo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),_(ko,kn);var jo="";ko.prototype.b=vo("goog.net.XhrIo");var _o=/^https?$/i,So=["POST","PUT"];function Eo(e,t,n,r,a){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():$i.a(),e.C=e.D?Ji(e.D):Ji($i),e.a.onreadystatechange=O(e.Wb,e);try{mo(e.b,Mo(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(o){return mo(e.b,Mo(e,"Error opening Xhr: "+o.message)),void Ao(e,o)}t=r||"";var i=new Nn(e.headers);a&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)$(e,t,void 0);else for(var n=Tn(e),r=An(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}(a,(function(e,t){i.set(t,e)})),a=function(e){e:{for(var t=Co,n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e)){t=a;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.Y()),r=s.FormData&&t instanceof s.FormData,!X(So,n)||a||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Do(e),0<e.g&&(e.u=function(e){return Xe&&ot(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),mo(e.b,Mo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=O(e.Ma,e)):e.s=En(e.Ma,e.g,e)),mo(e.b,Mo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(o){mo(e.b,Mo(e,"Send error: "+o.message)),Ao(e,o)}}function Co(e){return"content-type"==e.toLowerCase()}function Ao(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,To(e),Io(e)}function To(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function No(e){if(e.c&&"undefined"!=typeof u)if(e.C[1]&&4==Ro(e)&&2==Fo(e))mo(e.b,Mo(e,"Local request error detected and ignored"));else if(e.i&&4==Ro(e))En(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ro(e)){mo(e.b,Mo(e,"Request complete")),e.c=!1;try{var t,n=Fo(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.l).match(Rn)[1]||null;if(!i&&s.self&&s.self.location){var o=s.self.location.protocol;i=o.substr(0,o.length-1)}a=!_o.test(i?i.toLowerCase():"")}t=a}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ro(e)?e.a.statusText:""}catch(l){mo(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+Fo(e)+"]",To(e)}}finally{Io(e)}}}function Io(e,t){if(e.a){Do(e);var n=e.a,r=e.C[0]?d:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(a){(e=e.b)&&e.log(oo,"Problem encountered resetting onreadystatechange: "+a.message,void 0)}}}function Do(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function Ro(e){return e.a?e.a.readyState:0}function Fo(e){try{return 2<Ro(e)?e.a.status:-1}catch(t){return-1}}function Mo(e,t){return t+" ["+e.P+" "+e.l+" "+Fo(e)+"]"}function Po(e){var t=Ko;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Lo(e,t,n){e.a=!0,e.c=n,e.f=!t,Wo(e)}function zo(e){if(e.a){if(!e.v)throw new Vo(e);e.v=!1}}function Bo(e,t,n,r){e.g.push([t,n,r]),e.a&&Wo(e)}function Uo(e){return K(e.g,(function(e){return v(e[1])}))}function Wo(e){if(e.h&&e.a&&Uo(e)){var t=e.h,n=Ho[t];n&&(s.clearTimeout(n.a),delete Ho[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var a=e.g.shift(),i=a[0],o=a[1];if(a=a[2],i=e.f?o:i)try{var u=i.call(a||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(R(t)||"function"===typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,Uo(e)||(n=!0)}}e.c=t,r&&(u=O(e.m,e,!0),r=O(e.m,e,!1),t instanceof Po?(Bo(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new $o(t),Ho[t.a]=t,e.h=t.a)}function Vo(){F.call(this)}function qo(){F.call(this)}function $o(e){this.a=s.setTimeout(O(this.c,this),0),this.b=e}(n=ko.prototype).Ma=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",mo(this.b,Mo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(mo(this.b,Mo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Io(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Io(this,!0)),ko.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?No(this):this.Jc())},n.Jc=function(){No(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case jo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(oo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return mo(this.b,"Can not get response: "+t.message),null}},Po.prototype.cancel=function(e){if(this.a)this.c instanceof Po&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new qo(this),zo(this),Lo(this,!1,e))}},Po.prototype.m=function(e,t){this.i=!1,Lo(this,e,t)},Po.prototype.then=function(e,t,n){var r,a,i=new Ot((function(e,t){r=e,a=t}));return Bo(this,r,(function(e){e instanceof qo?i.cancel():a(e)})),i.then(e,t,n)},Po.prototype.$goog_Thenable=!0,_(Vo,F),Vo.prototype.message="Deferred has already fired",Vo.prototype.name="AlreadyCalledError",_(qo,F),qo.prototype.message="Deferred was canceled",qo.prototype.name="CanceledError",$o.prototype.c=function(){throw delete Ho[this.a],this.b};var Ho={};function Go(e){var t={},n=t.document||document,r=Ee(e).toString(),a=mt(document,"SCRIPT"),i={Xb:a,Ma:void 0},o=new Po(i),u=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(u=window.setTimeout((function(){Xo(a,!0);var e=new Qo(Jo,"Timeout reached for loading script "+r);zo(o),Lo(o,!1,e)}),c),i.Ma=u),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(Xo(a,t.xd||!1,u),zo(o),Lo(o,!0,null))},a.onerror=function(){Xo(a,!0,u);var e=new Qo(Yo,"Error while loading script "+r);zo(o),Lo(o,!1,e)},be(i=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ft(a,i),function(e,t){ye(e,"HTMLScriptElement"),e.src=Ee(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=f(t.document):(null===l&&(l=f(s.document)),t=l),t&&e.setAttribute("nonce",t)}(a,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(a),o}function Ko(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Xo(e,!0,this.Ma)}}function Xo(e,t,n){null!=n&&s.clearTimeout(n),e.onload=d,e.onerror=d,e.onreadystatechange=d,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Yo=0,Jo=1;function Qo(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),F.call(this,n),this.code=e}function Zo(e){this.f=e}function eu(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||ru,this.g=me(e.secureTokenHeaders||au),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||iu,this.a=me(e.firebaseHeaders||ou),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==jr(),!(r=s.XMLHttpRequest||r&&t.a.INTERNAL.node&&t.a.INTERNAL.node.XMLHttpRequest)&&!kr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,kr()?this.f=new go(self):_r()?this.f=new Zo(r):this.f=new eo,this.b=null}_(Qo,F),_(Zo,Yi),Zo.prototype.a=function(){return new this.f},Zo.prototype.b=function(){return{}};var tu,nu="idToken",ru=new qr(3e4,6e4),au={"Content-Type":"application/x-www-form-urlencoded"},iu=new qr(3e4,6e4),ou={"Content-Type":"application/json"};function uu(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function su(e,t){t&&(e.l=cu("https://securetoken.googleapis.com/v1/token",t),e.h=cu("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=cu("https://identitytoolkit.googleapis.com/v2/",t))}function cu(e,t){return e=Un(e),t=Un(t.url),e.f=e.a+e.f,Mn(e,t.c),e.a=t.a,Pn(e,t.g),e.toString()}function lu(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function fu(e,t,n,r,a,i,o){(function(){var e=Nr();return!((e=Cr(e)!=Er?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Xe||!st||9<st)})()||kr()?e=O(e.u,e):(tu||(tu=new Ot((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{s[hu]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Bo(e,null,t,void 0)}(Go(Ce(du,{onload:hu})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=O(e.s,e)),e(t,n,r,a,i,o)}eu.prototype.T=function(){return this.b},eu.prototype.u=function(e,t,n,r,a,i){if(kr()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var o=new ko(this.f);if(i){o.g=Math.max(0,i);var u=setTimeout((function(){o.dispatchEvent("timeout")}),i)}jn(o,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return mo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),_n(o,"ready",(function(){u&&clearTimeout(u),Gt(this)})),_n(o,"timeout",(function(){u&&clearTimeout(u),Gt(this),t&&t(null)})),Eo(o,e,n,r,a)};var du=new we(je,"https://apis.google.com/js/client.js?onload=%{onload}"),hu="__fcb"+Math.floor(1e6*Math.random()).toString();function pu(e,t,n,r,a,i,o){var u=Un(t+n);zn(u,"key",e.c),o&&zn(u,"cb",Date.now().toString());var s="GET"==r;if(s)for(var c in a)a.hasOwnProperty(c)&&zn(u,c,a[c]);return new Ot((function(t,n){fu(e,u.toString(),(function(e){e?e.error?n(cs(e,i||{})):t(e):n(new E("network-request-failed"))}),r,s?void 0:ir(zr(a)),e.a,e.v.get())}))}function vu(e){if("string"!==typeof(e=e.email)||!yr.test(e))throw new E("invalid-email")}function mu(e){"email"in e&&vu(e)}function gu(e){if(!e[nu]){if(e.mfaPendingCredential)throw new E("multi-factor-auth-required",null,me(e));throw new E("internal-error")}}function bu(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new E("internal-error")}else{if(!e.sessionInfo)throw new E("missing-verification-id");if(!e.code)throw new E("missing-verification-code")}}eu.prototype.s=function(e,t,n,r,a){var i=this;tu.then((function(){window.gapi.client.setApiKey(i.c);var o=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:a,authType:"none",callback:function(e){window.gapi.auth.setToken(o),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},eu.prototype.Ab=function(){return us(this,Xu,{})},eu.prototype.Cb=function(e,t){return us(this,Gu,{idToken:e,email:t})},eu.prototype.Db=function(e,t){return us(this,Ku,{idToken:e,password:t})};var yu={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function wu(e){if(!e.phoneVerificationInfo)throw new E("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new E("missing-verification-code")}function xu(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new E("internal-error")}function Ou(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(tr(e=new Jn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ku(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Xi(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Xi(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Xi(e)):e.errorMessage&&(t=ss(e.errorMessage)),t)throw t;gu(e)}function ju(e,t){return t.returnIdpCredential=!0,us(e,Qu,t)}function _u(e,t){return t.returnIdpCredential=!0,us(e,es,t)}function Su(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,us(e,Zu,t)}function Eu(e){if(!e.oobCode)throw new E("invalid-action-code")}(n=eu.prototype).Eb=function(e,t){var n={idToken:e},r=[];return pe(yu,(function(e,a){var i=t[a];null===i?r.push(e):a in t&&(n[a]=i)})),r.length&&(n.deleteAttribute=r),us(this,Gu,n)},n.wb=function(e,t){return be(e={requestType:"PASSWORD_RESET",email:e},t),us(this,Wu,e)},n.xb=function(e,t){return be(e={requestType:"EMAIL_SIGNIN",email:e},t),us(this,zu,e)},n.vb=function(e,t){return be(e={requestType:"VERIFY_EMAIL",idToken:e},t),us(this,Bu,e)},n.Fb=function(e,t,n){return be(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),us(this,Uu,e)},n.gb=function(e){return us(this,rs,e)},n.ob=function(e,t){return us(this,$u,{oobCode:e,newPassword:t})},n.Sa=function(e){return us(this,Au,{oobCode:e})},n.kb=function(e){return us(this,Cu,{oobCode:e})};var Cu={endpoint:"setAccountInfo",A:Eu,Z:"email",B:!0},Au={endpoint:"resetPassword",A:Eu,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new E("internal-error")},B:!0},Tu={endpoint:"signupNewUser",A:function(e){if(vu(e),!e.password)throw new E("weak-password")},G:gu,V:!0,B:!0},Nu={endpoint:"createAuthUri",B:!0},Iu={endpoint:"deleteAccount",O:["idToken"]},Du={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new E("internal-error")}},Ru={endpoint:"emailLinkSignin",O:["email","oobCode"],A:vu,G:gu,V:!0,B:!0},Fu={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:vu,G:gu,V:!0},Mu={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:wu,G:gu,B:!0,Na:!0},Pu={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:wu,G:gu,B:!0,Na:!0},Lu={endpoint:"getAccountInfo"},zu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new E("internal-error");vu(e)},Z:"email",B:!0},Bu={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new E("internal-error")},Z:"email",B:!0},Uu={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new E("internal-error")},Z:"email",B:!0},Wu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new E("internal-error");vu(e)},Z:"email",B:!0},Vu={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qu={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new E("internal-error")}},$u={endpoint:"resetPassword",A:Eu,Z:"email",B:!0},Hu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Gu={endpoint:"setAccountInfo",O:["idToken"],A:mu,V:!0},Ku={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(mu(e),!e.password)throw new E("weak-password")},G:gu,V:!0},Xu={endpoint:"signupNewUser",G:gu,V:!0,B:!0},Yu={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new E("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ju={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Qu={endpoint:"verifyAssertion",A:xu,Za:Ou,G:ku,V:!0,B:!0},Zu={endpoint:"verifyAssertion",A:xu,Za:Ou,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new E("user-not-found");if(e.errorMessage)throw ss(e.errorMessage);gu(e)},V:!0,B:!0},es={endpoint:"verifyAssertion",A:function(e){if(xu(e),!e.idToken)throw new E("internal-error")},Za:Ou,G:ku,V:!0},ts={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new E("invalid-custom-token")},G:gu,V:!0,B:!0},ns={endpoint:"verifyPassword",A:function(e){if(vu(e),!e.password)throw new E("wrong-password")},G:gu,V:!0,B:!0},rs={endpoint:"verifyPhoneNumber",A:bu,G:gu,B:!0},as={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new E("internal-error");bu(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Xi(e);gu(e)}},is={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:bu,G:gu,B:!0},os={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[nu]^!!e.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function us(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.O))return Tt(new E("internal-error"));var r,a=!!t.Na,i=t.Vb||"POST";return At(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),pu(e,a?e.i:e.h,t.endpoint,i,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new E("internal-error");return r[t.Z]}))}function ss(e){return cs({error:{errors:[{message:e}],code:400,message:e}})}function cs(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var a in n=e.error&&e.error.message||"",be(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(a))return new E(r[a],t);return!t&&e&&(t=Lr(e)),new E("internal-error",t)}function ls(e){this.b=e,this.a=null,this.sb=function(e){return(ps||(ps=new Ot((function(e,t){function n(){Vr(),Ir("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Vr(),t(Error("Network Error"))},timeout:ds.get()})}if(Ir("gapi.iframes.Iframe"))e();else if(Ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ir("gapi.load")?n():t(Error("Network Error"))},At(Go(r=Ce(fs,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw ps=null,e})))).then((function(){return new Ot((function(t,n){Ir("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function a(){clearTimeout(i),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var i=setTimeout((function(){n(Error("Network Error"))}),hs.get());r.ping(a).then(a,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var fs=new we(je,"https://apis.google.com/js/api.js?onload=%{onload}"),ds=new qr(3e4,6e4),hs=new qr(5e3,15e3),ps=null;function vs(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Wn((e=Un(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Wn("https",this.l,null,"/__/auth/iframe"),this.a=e,zn(this.a,"apiKey",this.h),zn(this.a,"appName",this.i),this.b=null,this.c=[]}function ms(e,t,n,r,a,i){this.u=e,this.s=t,this.c=n,this.m=r,this.v=i,this.i=this.g=this.l=null,this.a=a,this.h=this.f=null}function gs(e){try{return t.a.app(e).auth().Ga()}catch(n){return[]}}function bs(e,t,n,r,a,i){this.s=e,this.g=t,this.b=n,this.f=i,this.c=r||null,this.i=a||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function ys(e){var t=dr();return function(e){return us(e,Vu,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Un(t),r=n.c;n=n.a;for(var a=0;a<e.length;a++){var i=e[a],o=n,u=r;if(0==i.indexOf("chrome-extension://")?o=Un(i).a==o&&"chrome-extension"==u:"http"!=u&&"https"!=u?o=!1:br.test(i)?o=o==i:(i=i.split(".").join("\\."),o=new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)),o){e=!0;break e}}e=!1}if(!e)throw new Gi(dr())}))}function ws(e){return e.m||(e.m=wr().then((function(){if(!e.u){var t=e.c,n=e.i,r=gs(e.b),a=new vs(e.s,e.g,e.b,e.f);a.f=t,a.b=n,a.c=Z(r||[]),e.u=a.toString()}e.v=new ls(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Vi(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",At(n)}return n.status="ERROR",At(n)}))}(e)}))),e.m}function xs(e){return e.l||(e.C=e.c?Tr(e.c,gs(e.b)):null,e.l=new eu(e.g,D(e.i),e.C),e.f&&su(e.l,e.f)),e.l}function Os(e,t,n,r,a,i,o,u,s,c,l,f){return(e=new ms(e,t,n,r,a,f)).l=i,e.g=o,e.i=u,e.b=me(s||null),e.f=c,e.zb(l).toString()}function ks(e){if(this.a=e||t.a.INTERNAL.reactNative&&t.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function js(e){this.b=e,this.a={},this.f=O(this.c,this)}vs.prototype.toString=function(){return this.f?zn(this.a,"v",this.f):er(this.a.b,"v"),this.b?zn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?zn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},ms.prototype.zb=function(e){return this.h=e,this},ms.prototype.toString=function(){if(this.v){var e=Un(this.v.url);e=Wn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Wn("https",this.u,null,"/__/auth/handler");if(zn(e,"apiKey",this.s),zn(e,"appName",this.c),zn(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t.a.app(this.c).auth().la()}catch(s){r=null}for(var a in n.pb=r,zn(e,"providerId",this.a.providerId),n=zr((r=this.a).Jb))n[a]=n[a].toString();a=r.Qc,n=me(n);for(var i=0;i<a.length;i++){var o=a[i];o in n&&delete n[o]}r.qb&&r.pb&&!n[r.qb]&&(n[r.qb]=r.pb),ve(n)||zn(e,"customParameters",Lr(n))}if("function"===typeof this.a.Rb&&((r=this.a.Rb()).length&&zn(e,"scopes",r.join(","))),this.l?zn(e,"redirectUrl",this.l):er(e.b,"redirectUrl"),this.g?zn(e,"eventId",this.g):er(e.b,"eventId"),this.i?zn(e,"v",this.i):er(e.b,"v"),this.b)for(var u in this.b)this.b.hasOwnProperty(u)&&!Bn(e,u)&&zn(e,u,this.b[u]);return this.h?zn(e,"tid",this.h):er(e.b,"tid"),this.f?zn(e,"eid",this.f):er(e.b,"eid"),(u=gs(this.c)).length&&zn(e,"fw",u.join(",")),e.toString()},(n=bs.prototype).Pb=function(e,t,n){var r=new E("popup-closed-by-user"),a=new E("web-storage-unsupported"),i=this,o=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return ws(e).then((function(){return function(e,t){return e.sb.then((function(){return new Ot((function(n){e.a.send(t.type,t,n,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(i).then((function(n){n||(e&&mr(e),t(a),o=!0)}))})).o((function(){})).then((function(){if(!o)return function(e){return new Ot((function(t){return function n(){Cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!o)return Cn(n).then((function(){t(r)}))}))},n.Yb=function(){var e=Nr();return!Pr(e)&&!Wr(e)},n.Ub=function(){return!1},n.Nb=function(e,t,n,r,a,i,o,u){if(!e)return Tt(new E("popup-blocked"));if(o&&!Pr())return this.ma().o((function(t){mr(e),a(t)})),r(),At();this.a||(this.a=ys(xs(this)));var s=this;return this.a.then((function(){var t=s.ma().o((function(t){throw mr(e),a(t),t}));return r(),t})).then((function(){(Ui(n),o)||hr(Os(s.s,s.g,s.b,t,n,null,i,s.c,void 0,s.i,u,s.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e}))},n.Ob=function(e,t,n,r){this.a||(this.a=ys(xs(this)));var a=this;return this.a.then((function(){Ui(t),hr(Os(a.s,a.g,a.b,e,t,dr(),n,a.c,void 0,a.i,r,a.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(a.a=null),e}))},n.ma=function(){var e=this;return ws(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new E("network-request-failed")}))},n.ac=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Ta=function(e){J(this.h,(function(t){return t==e}))},(n=ks.prototype).get=function(e){return At(this.a.getItem(e)).then((function(e){return e&&Br(e)}))},n.set=function(e,t){return At(this.a.setItem(e,Lr(t)))},n.U=function(e){return At(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var _s,Ss=[];function Es(e,t,n){ve(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Cs(e){this.a=e}function As(e){this.c=e,this.b=!1,this.a=[]}function Ts(e,t,n,r){var a,i,o,u,s=n||{},c=null;if(e.b)return Tt(Error("connection_unavailable"));var l=r?800:50,f="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ot((function(n,r){f?(a=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),o=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:f,onMessage:i=function(e){e.data.eventId===a&&("ack"===e.data.status?(clearTimeout(o),u=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(u),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(o),clearTimeout(u),r(Error("invalid_response"))))}},e.a.push(c),f.port1.addEventListener("message",i),e.c.postMessage({eventType:t,eventId:a,data:s},[f.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ns(e,c),t})).o((function(t){throw Ns(e,c),t}))}function Ns(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(e.a,(function(e){return e==t}))}}function Is(){if(!Ms())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;kr()&&self?(this.v=function(){var e=kr()?self:null;if($(Ss,(function(n){n.b==e&&(t=n)})),!t){var t=new js(e);Ss.push(t)}return t}(),Es(this.v,"keyChanged",(function(t,n){return Us(e).then((function(t){return 0<t.length&&$(e.a,(function(e){e(t)})),{keyProcessed:X(t,n.key)}}))})),Es(this.v,"ping",(function(){return At(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?At().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):At(null)}().then((function(t){(e.h=t)&&(e.g=new As(new Cs(t)),Ts(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&X(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ds(e){return new Ot((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new Ot((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Ds(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Rs(e){return e.i||(e.i=Ds(e)),e.i}function Fs(e,t){var n=0;return new Ot((function r(a,i){Rs(e).then(t).then(a).o((function(t){if(!(3<++n))return Rs(e).then((function(t){return t.close(),e.i=void 0,r(a,i)})).o((function(e){i(e)}));i(t)}))}))}function Ms(){try{return!!s.indexedDB}catch(fo){return!1}}function Ps(e){return e.objectStore("firebaseLocalStorage")}function Ls(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function zs(e){return new Ot((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Bs(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Ts(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):At()}function Us(e){return Rs(e).then((function(e){var t=Ps(Ls(e,!1));return t.getAll?zs(t.getAll()):new Ot((function(e,n){var r=[],a=t.openCursor();a.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},a.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=pr(e.c,n),e.c=n}return r}))}function Ws(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Vs(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=At().then((function(){if(Ms()){var e=Ur(),r="__sak"+e;return _s||(_s=new Is),(n=_s).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){$(t.a,(function(t){t(e)}))})),e}))}function qs(){this.a={},this.type="inMemory"}function $s(){if(!function(){var e="Node"==jr();if(!(e=Hs()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==jr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Hs()||t.a.INTERNAL.node.localStorage,this.type="localStorage"}function Hs(){try{var e=s.localStorage,t=Ur();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Gs(){this.type="nullStorage"}function Ks(){if(!function(){var e="Node"==jr();if(!(e=Xs()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==jr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Xs()||t.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xs(){try{var e=s.sessionStorage,t=Ur();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Ys(){var e={};e.Browser=Zs,e.Node=ec,e.ReactNative=tc,e.Worker=nc,this.a=e[jr()]}js.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var a=[];$(r,(function(t){a.push(At().then((function(){return t(e.origin,e.data.data)})))})),It(a).then((function(r){var a=[];$(r,(function(e){a.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),$(a,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:a})}))}},Cs.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},As.prototype.close=function(){for(;0<this.a.length;)Ns(this,this.a[0]);this.b=!0},(n=Is.prototype).set=function(e,t){var n=this,r=!1;return Fs(this,(function(t){return zs((t=Ps(Ls(t,!0))).get(e))})).then((function(a){return Fs(n,(function(i){if(i=Ps(Ls(i,!0)),a)return a.value=t,zs(i.put(a));n.b++,r=!0;var o={};return o.fbase_key=e,o.value=t,zs(i.add(o))}))})).then((function(){return n.c[e]=t,Bs(n,e)})).oa((function(){r&&n.b--}))},n.get=function(e){return Fs(this,(function(t){return zs(Ps(Ls(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return Fs(this,(function(r){return n=!0,t.b++,zs(Ps(Ls(r,!0)).delete(e))})).then((function(){return delete t.c[e],Bs(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Us(e).then((function(t){0<t.length&&$(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Ws(e),t()}(this),this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e})),0==this.a.length&&Ws(this)},(n=Vs.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e}))},(n=qs.prototype).get=function(e){return At(this.a[e])},n.set=function(e,t){return this.a[e]=t,At()},n.U=function(e){return delete this.a[e],At()},n.ca=function(){},n.ia=function(){},(n=$s.prototype).get=function(e){var t=this;return At().then((function(){return Br(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(e){s.window&&fn(s.window,"storage",e)},n.ia=function(e){s.window&&pn(s.window,"storage",e)},(n=Gs.prototype).get=function(){return At(null)},n.set=function(){return At()},n.U=function(){return At()},n.ca=function(){},n.ia=function(){},(n=Ks.prototype).get=function(e){var t=this;return At().then((function(){return Br(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Js,Qs,Zs={F:$s,cb:Ks},ec={F:$s,cb:Ks},tc={F:ks,cb:Gs},nc={F:$s,cb:Gs},rc={rd:"local",NONE:"none",td:"session"};function ac(){var e=!(Wr(Nr())||!Or()),t=Pr(),n=Dr();this.m=e,this.h=t,this.l=n,this.a={},Js||(Js=new Ys),e=Js;try{this.g=!fr()&&Gr()||!s.indexedDB?new e.a.F:new Vs(kr()?new qs:new e.a.F)}catch(r){this.g=new qs,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new qs}this.v=new qs,this.f=O(this.Zb,this),this.b={}}function ic(){return Qs||(Qs=new ac),Qs}function oc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function uc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function sc(e,t,n){return n=uc(t,n),"local"==t.F&&(e.b[n]=null),oc(e,t.F).U(n)}function cc(e){e.c&&(clearInterval(e.c),e.c=null)}function lc(e){this.a=e,this.b=ic()}(n=ac.prototype).get=function(e,t){return oc(this,e.F).get(uc(e,t))},n.set=function(e,t,n){var r=uc(e,n),a=this,i=oc(this,e.F);return i.set(r,t).then((function(){return i.get(r)})).then((function(t){"local"==e.F&&(a.b[r]=t)}))},n.addListener=function(e,t,n){e=uc(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),ve(this.a)&&(oc(this,"local").ca(this.f),this.h||(fr()||!Gr())&&s.indexedDB||!this.l||function(e){cc(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Zt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=uc(e,t),this.a[e]&&(J(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),ve(this.a)&&(oc(this,"local").ia(this.f),cc(this))},n.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var a=s.localStorage.getItem(n);a!==r&&(this.b[n]=a,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?oc(this,"local").ia(this.f):cc(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var i=this;n=function(){"undefined"===typeof e.a.a&&i.b[t]===s.localStorage.getItem(t)||(i.b[t]=s.localStorage.getItem(t),i.nb(t))},Xe&&st&&10==st&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else $(e,O(this.nb,this))},n.nb=function(e){this.a[e]&&$(this.a[e],(function(e){e()}))};var fc,dc={name:"authEvent",F:"local"};function hc(){this.a=ic()}function pc(e,t){this.b=vc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===fc&&(fc=s.Int32Array?new Int32Array(Oc):Oc),this.reset()}_(pc,(function(){this.b=-1}));for(var vc=64,mc=vc-1,gc=[],bc=0;bc<mc;bc++)gc[bc]=0;var yc=Q(128,gc);function wc(e){for(var t=e.f,n=e.l,r=0,a=0;a<t.length;)n[r++]=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3],a=4*r;for(t=16;64>t;t++){a=0|n[t-15],r=0|n[t-2];var i=(0|n[t-16])+((a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3)|0,o=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=i+o|0}r=0|e.a[0],a=0|e.a[1];var u=0|e.a[2],s=0|e.a[3],c=0|e.a[4],l=0|e.a[5],f=0|e.a[6];for(i=0|e.a[7],t=0;64>t;t++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&a^r&u^a&u)|0;o=(i=i+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((o=(o=c&l^~c&f)+(0|fc[t])|0)+(0|n[t])|0)|0,i=f,f=l,l=c,c=s+o|0,s=u,u=a,a=r,r=o+d|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+a|0,e.a[2]=e.a[2]+u|0,e.a[3]=e.a[3]+s|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+f|0,e.a[7]=e.a[7]+i|0}function xc(e,t,n){void 0===n&&(n=t.length);var r=0,a=e.c;if("string"===typeof t)for(;r<n;)e.f[a++]=t.charCodeAt(r++),a==e.b&&(wc(e),a=0);else{if(!p(t))throw Error("message must be string or array");for(;r<n;){var i=t[r++];if(!("number"==typeof i&&0<=i&&255>=i&&i==(0|i)))throw Error("message must be a byte array");e.f[a++]=i,a==e.b&&(wc(e),a=0)}}e.c=a,e.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var Oc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function kc(){pc.call(this,8,jc)}_(kc,pc);var jc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(e,t,n,r,a,i){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=a||null,this.s=i,this.h=t+":"+n,this.C=new hc,this.g=new lc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(e){return new E("invalid-cordova-configuration",e)}function Ec(e){var t=new kc;xc(t,e),e=[];var n=8*t.g;56>t.c?xc(t,yc,56-t.c):xc(t,yc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(wc(t),r=n=0;r<t.i;r++)for(var a=24;0<=a;a-=8)e[n++]=t.a[r]>>a&255;return function(e){return G(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Cc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Ac(e){return e.f||(e.f=e.ma().then((function(){return new Ot((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,a&&a.cancel(),Tc(e).then((function(r){var a=n;if(r&&t&&t.url){var i=null;-1!=(a=ui(t.url)).indexOf("/__/auth/callback")&&(i=(i="object"===typeof(i=Br(Bn(i=Un(a),"firebaseError")||null))?C(i):null)?new Wi(r.c,r.b,null,null,i,null,r.T()):new Wi(r.c,r.b,a,r.f,null,null,r.T())),a=i||n}Cc(e,a)}))}var n=new Wi("unknown",null,null,null,new E("no-auth-event")),r=!1,a=Cn(500).then((function(){return Tc(e).then((function(){r||Cc(e,n)}))})),i=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Ir("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"===typeof i)try{i(e)}catch(n){console.error(n)}},Hi||(Hi=new qi),function(e){var t=Hi;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Ir("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Tc(e){var t=null;return function(e){return e.b.get(dc,e.a).then((function(e){return Vi(e)}))}(e.g).then((function(n){return t=n,sc((n=e.g).b,dc,n.a)})).then((function(){return t}))}function Nc(e){this.a=e,this.b=ic()}(n=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(xr(void 0)?wr().then((function(){return new Ot((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Tt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Ir("universalLinks.subscribe",s))throw Sc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Ir("BuildInfo.packageName",s))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Ir("cordova.plugins.browsertab.openUrl",s))throw Sc("cordova-plugin-browsertab is not installed");if("function"!==typeof Ir("cordova.InAppBrowser.open",s))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},n.Pb=function(e,t){return t(new E("operation-not-supported-in-this-environment")),At()},n.Nb=function(){return Tt(new E("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(e,t,n,r){if(this.c)return Tt(new E("redirect-operation-pending"));var a=this,i=s.document,o=null,u=null,c=null,l=null;return this.c=At().then((function(){return Ui(t),Ac(a)})).then((function(){return function(e,t,n,r,a){var i=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),o=new Wi(t,r,null,i,new E("no-auth-event"),null,a),u=Ir("BuildInfo.packageName",s);if("string"!==typeof u)throw new E("invalid-cordova-configuration");var c=Ir("BuildInfo.displayName",s),l={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return Tt(new E("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),i=Ec(i),l.sessionId=i;var f=Os(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,a,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(dc,o.w(),t)})).then((function(){var t=Ir("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof t)throw new E("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Ir("cordova.plugins.browsertab.openUrl",s)))throw new E("invalid-cordova-configuration");n(f)}else{if("function"!==typeof(n=Ir("cordova.InAppBrowser.open",s)))throw new E("invalid-cordova-configuration");t=Nr(),e.a=n(f,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(a,e,t,n,r)})).then((function(){return new Ot((function(e,t){u=function(){var t=Ir("cordova.plugins.browsertab.close",s);return e(),"function"===typeof t&&t(),a.a&&"function"===typeof a.a.close&&(a.a.close(),a.a=null),!1},a.Ea(u),c=function(){o||(o=Cn(2e3).then((function(){t(new E("redirect-cancelled-by-user"))})))},l=function(){$r()&&c()},i.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",l,!1)})).o((function(e){return Tc(a).then((function(){throw e}))}))})).oa((function(){c&&i.removeEventListener("resume",c,!1),l&&i.removeEventListener("visibilitychange",l,!1),o&&o.cancel(),u&&a.Ta(u),a.c=null}))},n.Ea=function(e){this.b.push(e),Ac(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Wi("unknown",null,null,null,new E("no-auth-event")),e(t))}))},n.Ta=function(e){J(this.b,(function(t){return t==e}))};var Ic={name:"pendingRedirect",F:"session"};function Dc(e){return sc(e.b,Ic,e.a)}function Rc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=O(this.s,this),this.b=new Xc,this.C=new el,this.g=new Nc(Gc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Fc(this.D,this.v,this.m,A,this.J)}function Fc(e,n,r,a,i){var o=t.a.SDK_VERSION||null;return xr()?new _c(e,n,r,o,a,i):new bs(e,n,r,o,a,i)}function Mc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Pc(e){e.a.Yb()&&Mc(e).o((function(t){var n=new Wi("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Vc(t)&&e.s(n)})),e.a.Ub()||Yc(e.b)}function Lc(e,t){X(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Ic,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Dc(e.g).then((function(){Mc(e).o((function(t){var n=new Wi("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Vc(t)&&e.s(n)}))})):Pc(e)})).o((function(){Pc(e)}))}function zc(e,t){J(e.h,(function(e){return e==t}))}Rc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Fc(this.D,this.v,this.m,null,this.J),this.i={}},Rc.prototype.s=function(e){if(!e)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Yc(this.b),t};var Bc=new qr(2e3,1e4),Uc=new qr(3e4,6e4);function Wc(e,t,n,r,a,i,o){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),a,i,o)}function Vc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function qc(e,t,n,r,a){var i;return function(e){return e.b.set(Ic,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,a).o((function(t){if(Vc(t))throw new E("operation-not-supported-in-this-environment");return i=t,Dc(e.g).then((function(){throw i}))})).then((function(){return e.a.ac()?new Ot((function(){})):Dc(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function $c(e,t,n,r,a){return e.a.Pb(r,(function(e){t.na(n,null,e,a)}),Bc.get())}Rc.prototype.ra=function(){return this.b.ra()};var Hc={};function Gc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Kc(e,t,n,r){var a=Gc(t,n,r);return Hc[a]||(Hc[a]=new Rc(e,t,n,r)),Hc[a]}function Xc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yc(e){e.g||(e.g=!0,Zc(e,!1,null,null))}function Jc(e){e.g&&!e.i&&Zc(e,!1,null,null)}function Qc(e,t){if(e.b=function(){return At(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Zc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Tt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Qc(e,n):Qc(e,{user:null}),e.f=[],e.c=[]}function el(){}function tl(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function nl(e,t){this.a=t,Qr(this,"verificationId",e)}function rl(e,t,n,r){return new Li(e).gb(t,n).then((function(e){return new nl(e,r)}))}function al(e){var t=Ga(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:e,expirationTime:Hr(1e3*t.exp),authTime:Hr(1e3*t.auth_time),issuedAtTime:Hr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function il(e,t,n){var r=t&&t[ul];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new si(null,r),this.b=[];var a=this;$(t[ol]||[],(function(e){(e=ra(e))&&a.b.push(e)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Xc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Xc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,a=e.a&&"auth/web-storage-unsupported"==e.a.code,i=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!a&&!i),"unknown"!=n||a||i?e.a?(Zc(this,!0,null,e.a),At()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,a=t.f,i=t.i,o=t.T(),u=!!t.c.match(/Redirect$/);n(r,a,o,i).then((function(t){Zc(e,u,t,null)})).o((function(t){Zc(e,u,null,t)}))}(this,e,t):Tt(new E("invalid-auth-event")):(Zc(this,!1,null,null),At())}else Tt(new E("invalid-auth-event"))},Xc.prototype.ra=function(){var e=this;return new Ot((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new E("timeout");e.a&&e.a.cancel(),e.a=Cn(Uc.get()).then((function(){e.b||(e.g=!0,Zc(e,!0,null,t))}))}(e))}))},el.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),At()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Tt(new E("invalid-auth-event"))}else Tt(new E("invalid-auth-event"))},nl.prototype.confirm=function(e){return e=zi(this.verificationId,e),this.a(e)};var ol="mfaInfo",ul="mfaPendingCredential";function sl(e,t,n,r){E.call(this,"multi-factor-auth-required",r,t),this.b=new il(e,t,n),Qr(this,"resolver",this.b)}function cl(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new sl(t,e.serverResponse,n,e.message)}catch(r){}return null}function ll(){}function fl(e){Qr(this,"factorId",e.fa),this.a=e}function dl(e){if(fl.call(this,e),this.a.fa!=Li.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function hl(e,t){for(var n in Qt.call(this,e),t)this[n]=t[n]}function pl(e,t){this.a=e,this.b=[],this.c=O(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&$(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[oa]=e.uid),e.displayName&&(r[aa]=e.displayName),e.enrollmentTime&&(r[ia]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ua]=e.phoneNumber);try{t=new sa(r)}catch(a){}e=t}else e=null;e&&n.push(e)})),vl(this,n)}function vl(e,t){e.b=t,Qr(e,"enrolledFactors",t)}function ml(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function gl(e,t){e.stop(),e.b=Cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return $r()||!e?At():new Ot((function(n){t=function(){$r()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){gl(e,!0)})).o((function(t){e.i(t)&&gl(e,!1)}))}function bl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function yl(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function wl(e,t){e.b=Ha(t[nu]||""),e.a=t.refreshToken,yl(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function xl(e,t){return function(e,t){return new Ot((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?fu(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(cs(e)):e.access_token&&e.refresh_token?n(e):r(new E("internal-error")):r(new E("network-request-failed"))}),"POST",Zn(t).toString(),e.g,e.m.get()):r(new E("internal-error"))}))}(e.f,t).then((function(t){return e.b=Ha(t.access_token),e.a=t.refresh_token,yl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Ol(e,t){this.a=e||null,this.b=t||null,Zr(this,{lastSignInTime:Hr(t||null),creationTime:Hr(e||null)})}function kl(e,t,n,r,a,i){Zr(this,{uid:e,displayName:r||null,photoURL:a||null,email:n||null,phoneNumber:i||null,providerId:t})}function jl(e,n,r){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var a=t.a.SDK_VERSION?Tr(t.a.SDK_VERSION):null;this.a=new eu(this.l,D(A),a),(this.u=e.emulatorConfig||null)&&su(this.a,this.u),this.h=new bl(this.a),Dl(this,n[nu]),wl(this.h,n),Qr(this,"refreshToken",this.h.a),Ml(this,r||{}),kn.call(this),this.P=!1,this.s&&Rr()&&(this.b=Kc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new ml((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=O(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){_l(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Cl(i,e.f)},this.ja=null,this.S=new pl(this,r),Qr(this,"multiFactor",this.S)}function _l(e,t){e.u=t,su(e.a,t),e.b&&(t=e.b,e.b=Kc(e.s,e.l,e.m,e.u),e.P&&(zc(t,e),Lc(e.b,e)))}function Sl(e,t){e.qa&&pn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&fn(t,"languageCodeChanged",e.Pa)}function El(e,t){e.$&&pn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&fn(t,"emulatorConfigChanged",e.Ba)}function Cl(e,n){e.aa=n,lu(e.a,t.a.SDK_VERSION?Tr(t.a.SDK_VERSION,e.aa):null)}function Al(e,t){e.ja&&pn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&fn(t,"frameworkChanged",e.Oa)}function Tl(e){try{return t.a.app(e.m).auth()}catch(n){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Nl(e){e.J||e.D.b||(e.D.start(),pn(e,"tokenChanged",e.ba),fn(e,"tokenChanged",e.ba))}function Il(e){pn(e,"tokenChanged",e.ba),e.D.stop()}function Dl(e,t){e.Aa=t,Qr(e,"_lat",t)}function Rl(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return It(t).then((function(){return e}))}function Fl(e){e.b&&!e.P&&(e.P=!0,Lc(e.b,e))}function Ml(e,t){Zr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Ol(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Pl(){}function Ll(e){return At().then((function(){if(e.J)throw new E("app-deleted")}))}function zl(e){return G(e.providerData,(function(e){return e.providerId}))}function Bl(e,t){t&&(Ul(e,t.providerId),e.providerData.push(t))}function Ul(e,t){J(e.providerData,(function(e){return e.providerId==t}))}function Wl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Qr(e,t,n)}function Vl(e,t){e!=t&&(Zr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Qr(e,"metadata",function(e){return new Ol(e.a,e.b)}(t.metadata)):Qr(e,"metadata",new Ol),$(t.providerData,(function(t){Bl(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Qr(e,"refreshToken",e.h.a),vl(e.S,t.S.b))}function ql(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return us(e.a,Lu,{idToken:t}).then(O(e.Kc,e))}(e,t).then((function(){return n||Wl(e,"isAnonymous",!1),t}))}))}function $l(e,t){t[nu]&&e.Aa!=t[nu]&&(wl(e.h,t),e.dispatchEvent(new hl("tokenChanged")),Dl(e,t[nu]),Wl(e,"refreshToken",e.h.a))}function Hl(e,t){return ql(e).then((function(){if(X(zl(e),t))return Rl(e).then((function(){throw new E("provider-already-linked")}))}))}function Gl(e,t,n){return ea({user:e,credential:Bi(t),additionalUserInfo:t=Qa(t),operationType:n})}function Kl(e,t){return $l(e,t),e.reload().then((function(){return e}))}function Xl(e,n,r,a,i){if(!Rr())return Tt(new E("operation-not-supported-in-this-environment"));if(e.i&&!i)return Tt(e.i);var o=Ja(r.providerId),u=Ur(e.uid+":::"),s=null;(!Pr()||Or())&&e.s&&r.isOAuthProvider&&(s=Os(e.s,e.l,e.m,n,r,null,u,t.a.SDK_VERSION||null,null,null,e.tenantId,e.u));var c=gr(s,o&&o.va,o&&o.ua);return a=a().then((function(){if(Jl(e),!i)return e.I().then((function(){}))})).then((function(){return Wc(e.b,c,n,r,u,!!s,e.tenantId)})).then((function(){return new Ot((function(t,r){e.na(n,null,new E("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=u,e.c=$c(e.b,e,n,c,u)}))})).then((function(e){return c&&mr(c),e?ea(e):null})).o((function(e){throw c&&mr(c),e})),Ql(e,a,i)}function Yl(e,t,n,r,a){if(!Rr())return Tt(new E("operation-not-supported-in-this-environment"));if(e.i&&!a)return Tt(e.i);var i=null,o=Ur(e.uid+":::");return r=r().then((function(){if(Jl(e),!a)return e.I().then((function(){}))})).then((function(){return e.ga=o,Rl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(tf,e.w(),t.a)),t})).then((function(){return qc(e.b,t,n,o,e.tenantId)})).o((function(t){if(i=t,e.ha)return nf(e.ha);throw i})).then((function(){if(i)throw i})),Ql(e,r,a)}function Jl(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Ql(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Tt(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new hl("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){Y(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),Tl(e),O(e.jc,e))),n||t}))}function Zl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[nu]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var a=new jl(t,n,e);return e.providerData&&$(e.providerData,(function(e){e&&Bl(a,ea(e))})),e.redirectEventId&&(a.ga=e.redirectEventId),a}function ef(e){this.a=e,this.b=ic()}il.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=me(t.f);return delete n[ol],delete n[ul],be(n,e),t.g(n)}))},_(sl,E),ll.prototype.tb=function(e,t,n){return t.type==ci?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),be(n,{phoneVerificationInfo:Pi(e.a)}),us(t,Mu,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return be(n={mfaPendingCredential:n},{phoneVerificationInfo:Pi(e.a)}),us(t,Pu,n)}))}(this,e,t)},_(fl,ll),_(dl,fl),_(hl,Qt),(n=pl.prototype).yc=function(e){vl(this,function(e){var t=[];return $(e.mfaInfo||[],(function(e){(e=ra(e))&&t.push(e)})),t}(e.hd))},n.Sb=function(){return this.a.I().then((function(e){return new si(e,null)}))},n.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return $l(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return us(r,os,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=H(t.b,(function(e){return e.uid!=n}));return vl(t,r),$l(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(e){return e.w()}))}}},ml.prototype.start=function(){this.a=this.c,gl(this,!0)},ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},bl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},bl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Tt(new E("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?xl(this,{grant_type:"refresh_token",refresh_token:this.a}):At(null):At({accessToken:this.b.toString(),refreshToken:this.a})},Ol.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(jl,kn),jl.prototype.xa=function(e){this.za=e,uu(this.a,e)},jl.prototype.la=function(){return this.za},jl.prototype.Ga=function(){return Z(this.aa)},jl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(jl.prototype,"providerId","firebase"),(n=jl.prototype).reload=function(){var e=this;return Ql(this,Ll(this).then((function(){return ql(e).then((function(){return Rl(e)})).then(Pl)})))},n.oc=function(e){return this.I(e).then((function(e){return new al(e)}))},n.I=function(e){var t=this;return Ql(this,Ll(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new E("internal-error");return e.accessToken!=t.Aa&&(Dl(t,e.accessToken),t.dispatchEvent(new hl("tokenChanged"))),Wl(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(!(e=e.users)||!e.length)throw new E("internal-error");Ml(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?G(e,(function(e){return new kl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Bl(this,t[n]);Wl(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new hl("userReloaded",{hd:e}))},n.Lc=function(e){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},n.ub=function(e){var t=this,n=null;return Ql(this,e.c(this.a,this.uid).then((function(e){return $l(t,e),n=Gl(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},n.rb=function(e){var t=this,n=null;return Ql(this,Hl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Gl(t,e,"link"),Kl(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return Ql(this,Hl(this,"phone").then((function(){return rl(Tl(n),e,t,O(n.rb,n))})))},n.Mc=function(e,t){var n=this;return Ql(this,At().then((function(){return rl(Tl(n),e,t,O(n.ub,n))})),!0)},n.Cb=function(e){var t=this;return Ql(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return $l(t,e),t.reload()})))},n.ed=function(e){var t=this;return Ql(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return $l(t,e),t.reload()})))},n.Db=function(e){var t=this;return Ql(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return $l(t,e),t.reload()})))},n.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ll(this);var t=this;return Ql(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return $l(t,e),Wl(t,"displayName",e.displayName||null),Wl(t,"photoURL",e.photoUrl||null),$(t.providerData,(function(e){"password"===e.providerId&&(Qr(e,"displayName",t.displayName),Qr(e,"photoURL",t.photoURL))})),Rl(t)})).then(Pl))},n.cd=function(e){var t=this;return Ql(this,ql(this).then((function(n){return X(zl(t),e)?function(e,t,n){return us(e,Du,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return $(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),$(zl(t),(function(e){n[e]||Ul(t,e)})),n[Li.PROVIDER_ID]||Qr(t,"phoneNumber",null),Rl(t)})):Rl(t).then((function(){throw new E("no-such-provider")}))})))},n.delete=function(){var e=this;return Ql(this,this.I().then((function(t){return us(e.a,Iu,{idToken:t})})).then((function(){e.dispatchEvent(new hl("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Sl(e,null),El(e,null),Al(e,null),e.N=[],e.J=!0,Il(e),Qr(e,"refreshToken",null),e.b&&zc(e.b,e)}))},n.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?O(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?O(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?O(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?O(this.Mb,this):null},n.Ec=function(e){var t=this;return Xl(this,"linkViaPopup",e,(function(){return Hl(t,e.providerId).then((function(){return Rl(t)}))}),!1)},n.Nc=function(e){return Xl(this,"reauthViaPopup",e,(function(){return At()}),!0)},n.Fc=function(e){var t=this;return Yl(this,"linkViaRedirect",e,(function(){return Hl(t,e.providerId)}),!1)},n.Oc=function(e){return Yl(this,"reauthViaRedirect",e,(function(){return At()}),!0)},n.Lb=function(e,t,n,r){var a=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Ql(this,this.I().then((function(n){return _u(a.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return i=Gl(a,e,"link"),Kl(a,e)})).then((function(){return i})))},n.Mb=function(e,t,n,r){var a=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Ql(this,At().then((function(){return di(Su(a.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),a.uid)})).then((function(e){return i=Gl(a,e,"reauthenticate"),$l(a,e),a.i=null,a.reload()})).then((function(){return i})),!0)},n.vb=function(e){var t=this,n=null;return Ql(this,this.I().then((function(t){return n=t,"undefined"===typeof e||ve(e)?{}:Wa(new Ia(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Fb=function(e,t){var n=this,r=null;return Ql(this,this.I().then((function(e){return r=e,"undefined"===typeof t||ve(t)?{}:Wa(new Ia(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return Ql(this,e=di(At(e),n.uid).then((function(e){return t=Gl(n,e,"reauthenticate"),$l(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&be(e,this.metadata.w()),$(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),be(e,this.S.w()),e};var tf={name:"redirectUser",F:"session"};function nf(e){return sc(e.b,tf,e.a)}function rf(e){this.a=e,this.b=ic(),this.c=null,this.f=function(e){var t=uf("local"),n=uf("session"),r=uf("none");return function(e,t,n){var r=uc(t,n),a=oc(e,t.F);return e.get(t,n).then((function(i){var o=null;try{o=Br(s.localStorage.getItem(r))}catch(u){}if(o&&!i)return s.localStorage.removeItem(r),e.set(t,o,n);o&&i&&"localStorage"!=a.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(a){return a?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(of,e.a).then((function(e){return e?uf(e):t}))}))}))})).then((function(t){return e.c=t,af(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(uf("local"),this.a,O(this.g,this))}function af(e,t){var n,r=[];for(n in rc)rc[n]!==t&&r.push(sc(e.b,uf(rc[n]),e.a));return r.push(sc(e.b,of,e.a)),function(e){return new Ot((function(t,n){var r=e.length,a=[];if(r)for(var i=function(e,n){r--,a[e]=n,0==r&&t(a)},o=function(e){n(e)},u=0;u<e.length;u++)Nt(e[u],k(i,u),o);else t(a)}))}(r)}rf.prototype.g=function(){var e=this,t=uf("local");ff(this,(function(){return At().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return af(e,"local").then((function(){e.c=t}))}))}))};var of={name:"persistence",F:"session"};function uf(e){return{name:"authUser",F:e}}function sf(e,t){return ff(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function cf(e){return ff(e,(function(){return sc(e.b,e.c,e.a)}))}function lf(e,t,n){return ff(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Zl(e||{})}))}))}function ff(e,t){return e.f=e.f.then(t,t),e.f}function df(e){if(this.l=!1,Qr(this,"settings",new tl),Qr(this,"app",e),!xf(this).options||!xf(this).options.apiKey)throw new E("invalid-api-key");e=t.a.SDK_VERSION?Tr(t.a.SDK_VERSION):null,this.a=new eu(xf(this).options&&xf(this).options.apiKey,D(A),e),this.P=[],this.s=[],this.N=[],this.Pa=t.a.INTERNAL.createSubscribe(O(this.zc,this)),this.W=void 0,this.ib=t.a.INTERNAL.createSubscribe(O(this.Ac,this)),yf(this,null),this.i=new rf(xf(this).options.apiKey+":"+xf(this).name),this.D=new ef(xf(this).options.apiKey+":"+xf(this).name),this.$=_f(this,function(e){var t=xf(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(tf,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zl(e||{})}))}(e.D,xf(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),nf(e.D)}));return _f(e,t)}(e).then((function(){return lf(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return sf(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:cf(e.i)}))):null})).then((function(t){yf(e,t||null)}));return _f(e,n)}(this)),this.h=_f(this,function(e){return e.$.then((function(){return gf(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(uf("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=O(this.Zc,this),this.Ba=O(this.da,this),this.qa=O(this.mc,this),this.za=O(this.wc,this),this.Aa=O(this.xc,this),this.b=null,function(e){var t=xf(e).options.authDomain,n=xf(e).options.apiKey;t&&Rr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Kc(t,n,xf(e).name,e.R),Lc(e.b,e),Of(e)&&Fl(Of(e)),e.m){Fl(e.m);var r=e.m;r.xa(e.la()),Sl(r,e),Cl(r=e.m,e.J),Al(r,e),_l(r=e.m,e.R),El(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=O(this.delete,this),this.INTERNAL.logFramework=O(this.Gc,this),this.u=0,kn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Un(this.R.url);e=ea({protocol:e.c,host:e.a,port:e.g,options:ea({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function hf(e){Qt.call(this,"languageCodeChanged"),this.h=e}function pf(e){Qt.call(this,"emulatorConfigChanged"),this.c=e}function vf(e){Qt.call(this,"frameworkChanged"),this.f=e}function mf(e){return e.Oa||Tt(new E("auth-domain-config-required"))}function gf(e){if(!Rr())return Tt(new E("operation-not-supported-in-this-environment"));var t=mf(e).then((function(){return e.b.ra()})).then((function(e){return e?ea(e):null}));return _f(e,t)}function bf(e,t){var n={};return n.apiKey=xf(e).options.apiKey,n.authDomain=xf(e).options.authDomain,n.appName=xf(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var a=new jl(e,t);return n&&(a.ha=n),r&&Cl(a,r),a.reload().then((function(){return a}))}(n,t,e.D,e.Ga())})).then((function(t){return Of(e)&&t.uid==Of(e).uid?(Vl(Of(e),t),e.da(t)):(yf(e,t),Fl(t),e.da(t))})).then((function(){jf(e)}))}function yf(e,t){Of(e)&&(function(e,t){J(e.W,(function(e){return e==t}))}(Of(e),e.Ba),pn(Of(e),"tokenChanged",e.qa),pn(Of(e),"userDeleted",e.za),pn(Of(e),"userInvalidated",e.Aa),Il(Of(e))),t&&(t.W.push(e.Ba),fn(t,"tokenChanged",e.qa),fn(t,"userDeleted",e.za),fn(t,"userInvalidated",e.Aa),0<e.u&&Nl(t)),Qr(e,"currentUser",t),t&&(t.xa(e.la()),Sl(t,e),Cl(t,e.J),Al(t,e),_l(t,e.R),El(t,e))}function wf(e,t){var n=null,r=null;return _f(e,t.then((function(t){return n=Bi(t),r=Qa(t),bf(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),e,O(e.kc,e))),n||t})).then((function(){return ea({user:Of(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function xf(e){return e.app}function Of(e){return e.currentUser}function kf(e){return Of(e)&&Of(e)._lat||null}function jf(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](kf(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](kf(e))}}function _f(e,t){return e.P.push(t),t.oa((function(){Y(e.P,t)})),t}function Sf(){}function Ef(){this.a={},this.b=1e12}rf.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");e:{for(r in rc)if(rc[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(jr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Ms()&&"none"!==e)throw n;break;default:if(!Dr()&&"none"!==e)throw n}}(e),ff(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,af(n,e)})).then((function(){if(n.c=uf(e),t)return n.b.set(n.c,t,n.a)})):At()}))},_(df,kn),_(hf,Qt),_(pf,Qt),_(vf,Qt),(n=df.prototype).yb=function(e){return _f(this,e=this.i.yb(e))},n.xa=function(e){this.aa===e||this.l||(this.aa=e,uu(this.a,this.aa),this.dispatchEvent(new hf(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=s.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&wr().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,su(this.a,this.R),this.dispatchEvent(new pf(this.R))}},n.Gc=function(e){this.J.push(e),lu(this.a,t.a.SDK_VERSION?Tr(t.a.SDK_VERSION,this.J):null),this.dispatchEvent(new vf(this.J))},n.Ga=function(){return Z(this.J)},n.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:xf(this).options.apiKey,authDomain:xf(this).options.authDomain,appName:xf(this).name,currentUser:Of(this)&&Of(this).w()}},n.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?O(this.ic,this):null},n.ic=function(e,t,n,r){var a=this,i={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),a.$.then((function(){return wf(a,ju(a.a,i))}))},n.Xc=function(e){if(!Rr())return Tt(new E("operation-not-supported-in-this-environment"));var n=this,r=Ja(e.providerId),a=Ur(),i=null;(!Pr()||Or())&&xf(this).options.authDomain&&e.isOAuthProvider&&(i=Os(xf(this).options.authDomain,xf(this).options.apiKey,xf(this).name,"signInViaPopup",e,null,a,t.a.SDK_VERSION||null,null,null,this.T(),this.R));var o=gr(i,r&&r.va,r&&r.ua);return _f(this,r=mf(this).then((function(t){return Wc(t,o,"signInViaPopup",e,a,!!i,n.T())})).then((function(){return new Ot((function(e,t){n.na("signInViaPopup",null,new E("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=a,n.c=$c(n.b,n,"signInViaPopup",o,a)}))})).then((function(e){return o&&mr(o),e?ea(e):null})).o((function(e){throw o&&mr(o),e})))},n.Yc=function(e){if(!Rr())return Tt(new E("operation-not-supported-in-this-environment"));var t=this;return _f(this,mf(this).then((function(){return function(e){return ff(e,(function(){return e.b.set(of,e.c.F,e.a)}))}(t.i)})).then((function(){return qc(t.b,"signInViaRedirect",e,void 0,t.T())})))},n.ra=function(){var e=this;return gf(this).then((function(t){return e.b&&Jc(e.b.b),t})).o((function(t){throw e.b&&Jc(e.b.b),t}))},n.dd=function(e){if(!e)return Tt(new E("null-user"));if(this.S!=e.tenantId)return Tt(new E("tenant-id-mismatch"));var t=this,n={};n.apiKey=xf(this).options.apiKey,n.authDomain=xf(this).options.authDomain,n.appName=xf(this).name;var r=function(e,t,n,r){var a=e.h,i={};return i[nu]=a.b&&a.b.toString(),i.refreshToken=a.a,t=new jl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},i),n&&(t.ha=n),r&&Cl(t,r),Vl(t,e),t}(e,n,t.D,t.Ga());return _f(this,this.h.then((function(){if(xf(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Of(t)&&e.uid==Of(t).uid?(Vl(Of(t),e),t.da(e)):(yf(t,r),Fl(r),t.da(r))})).then((function(){jf(t)})))},n.Bb=function(){var e=this;return _f(this,this.h.then((function(){return e.b&&Jc(e.b.b),Of(e)?(yf(e,null),cf(e.i).then((function(){jf(e)}))):At()})))},n.Zc=function(){var e=this;return lf(this.i,xf(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Of(e)&&t){n=Of(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Vl(Of(e),t),Of(e).I();(Of(e)||t)&&(yf(e,t),t&&(Fl(t),t.ha=e.D),e.b&&Lc(e.b,e),jf(e))}}))},n.da=function(e){return sf(this.i,e)},n.mc=function(){jf(this),this.da(Of(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()},n.kc=function(e){var t=this;return this.h.then((function(){return wf(t,At(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Of(t))}))},n.Ac=function(e){var t=this;!function(e,t){e.N.push(t),_f(e,e.h.then((function(){!e.l&&X(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(kf(e)))})))}(this,(function(){e.next(Of(t))}))},n.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(Of(r)):"function"===typeof e.next&&e.next(Of(r))})),this.Pa(e,t,n)},n.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(Of(r)):"function"===typeof e.next&&e.next(Of(r))})),this.ib(e,t,n)},n.nc=function(e){var t=this;return _f(this,this.h.then((function(){return Of(t)?Of(t).I(e).then((function(e){return{accessToken:e}})):null})))},n.Tc=function(e){var t=this;return this.h.then((function(){return wf(t,us(t.a,ts,{token:e}))})).then((function(e){var n=e.user;return Wl(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return wf(n,us(n.a,ns,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return wf(n,us(n.a,Tu,{email:e,password:t}))}))},n.ab=function(e){var t=this;return this.h.then((function(){return wf(t,e.ka(t.a))}))},n.Sc=function(e){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},n.Ab=function(){var e=this;return this.h.then((function(){var t=Of(e);if(t&&t.isAnonymous){var n=ea({providerId:null,isNewUser:!1});return ea({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return wf(e,e.a.Ab()).then((function(t){var n=t.user;return Wl(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return Of(this)&&Of(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Of(this)&&Nl(Of(this))},n.Pc=function(e){var t=this;$(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&Of(this)&&Il(Of(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),_f(this,this.h.then((function(){t.l||X(t.s,e)&&e(kf(t))})))},n.removeAuthTokenListener=function(e){J(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(uf("local"),e.a,this.ja),this.b&&(zc(this.b,this),Jc(this.b.b)),Promise.resolve()},n.hc=function(e){return _f(this,function(e,t){return us(e,Nu,{identifier:t,continueUri:Fr()?dr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},n.Bc=function(e){return!!Ri(e)},n.xb=function(e,t){var n=this;return _f(this,At().then((function(){var e=new Ia(t);if(!e.c)throw new E("argument-error",Fa+" must be true when sending sign in link to email");return Wa(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},n.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},n.ob=function(e,t){return _f(this,this.a.ob(e,t).then((function(){})))},n.Sa=function(e){return _f(this,this.a.Sa(e).then((function(e){return new ca(e)})))},n.kb=function(e){return _f(this,this.a.kb(e).then((function(){})))},n.wb=function(e,t){var n=this;return _f(this,At().then((function(){return"undefined"===typeof t||ve(t)?{}:Wa(new Ia(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.Wc=function(e,t){return _f(this,rl(this,e,t,O(this.ab,this)))},n.Vc=function(e,t){var n=this;return _f(this,At().then((function(){var r=t||dr(),a=Di(e,r);if(!(r=Ri(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.ab(a)})))},Sf.prototype.render=function(){},Sf.prototype.reset=function(){},Sf.prototype.getResponse=function(){},Sf.prototype.execute=function(){};var Cf=null;function Af(e,t){return(t=Tf(t))&&e.a[t]||null}function Tf(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Nf(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=lt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function If(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Df(){}function Rf(){}Ef.prototype.render=function(e,t){return this.a[this.b.toString()]=new Nf(e,t),this.b++},Ef.prototype.reset=function(e){var t=Af(this,e);e=Tf(e),t&&e&&(t.delete(),delete this.a[e])},Ef.prototype.getResponse=function(e){return(e=Af(this,e))?e.getResponse():null},Ef.prototype.execute=function(e){(e=Af(this,e))&&e.execute()},Nf.prototype.getResponse=function(){return If(this),this.b},Nf.prototype.execute=function(){If(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Nf.prototype.delete=function(){If(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Qr(Df,"FACTOR_ID","phone"),Rf.prototype.g=function(){return Cf||(Cf=new Ef),At(Cf)},Rf.prototype.c=function(){};var Ff=null;function Mf(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Pf=new we(je,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Lf=new qr(3e4,6e4);Mf.prototype.g=function(e){var t=this;return new Ot((function(n,r){var a=setTimeout((function(){r(new E("network-request-failed"))}),Lf.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var i=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=i(e,n),t.b++,e},clearTimeout(a),n(s.grecaptcha)}else clearTimeout(a),r(new E("internal-error"));delete s[t.a]},At(Go(Ce(Pf,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(a),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(a),n(s.grecaptcha))}))},Mf.prototype.c=function(){this.b--};var zf=null;function Bf(e,t,n,r,a,i,o){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,o?(Ff||(Ff=new Rf),o=Ff):(zf||(zf=new Mf),o=zf),this.m=o,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vf])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[qf],!s.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!lt(t)||!this.i&&lt(t).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new eu(e,i||null,a||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Uf];this.a[Uf]=function(e){if($f(u,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=Ir(c,s);"function"===typeof t&&t(e)}};var l=this.a[Wf];this.a[Wf]=function(){if($f(u,null),"function"===typeof l)l();else if("string"===typeof l){var e=Ir(l,s);"function"===typeof e&&e()}}}var Uf="callback",Wf="expired-callback",Vf="sitekey",qf="size";function $f(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Hf(e,t){return e.h.push(t),t.oa((function(){Y(e.h,t)})),t}function Gf(e){if(e.J)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kf(e,n,r){var a=!1;try{this.b=r||t.a.app()}catch(u){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");r=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(u){}try{a=this.b.auth().settings.appVerificationDisabledForTesting}catch(u){}o=t.a.SDK_VERSION?Tr(t.a.SDK_VERSION,o):null,Bf.call(this,r,e,n,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,D(A),a)}function Xf(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var a=0,i=!1,o=0;o<t.length;o++)if(t[o].optional)i=!0;else{if(i)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");a++}if(i=t.length,n.length<a||i<n.length)r="Expected "+(a==i?1==a?"1 argument":a+" arguments":a+"-"+i+" arguments")+" but got "+n.length+".";else{for(a=0;a<n.length;a++)if(i=t[a].optional&&void 0===n[a],!t[a].M(n[a])&&!i){if(t=t[a],0>a||a>=Yf.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Yf[a],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new E("argument-error",e+" failed: "+r)}(n=Bf.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Hf(this,At().then((function(){if(Fr()&&!kr())return wr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,us(e.s,qu,{})})).then((function(t){e.a[Vf]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Gf(this);var e=this;return Hf(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=lt(t);t=function(e,t,n){var r=arguments,a=document,i=String(r[0]),o=r[1];if(!ct&&o&&(o.name||o.type)){if(i=["<",i],o.name&&i.push(' name="',$e(o.name),'"'),o.type){i.push(' type="',$e(o.type),'"');var u={};be(u,o),delete u.type,o=u}i.push(">"),i=i.join("")}return i=mt(a,i),o&&("string"===typeof o?i.className=o:Array.isArray(o)?i.className=o.join(" "):ft(i,o)),2<r.length&&vt(a,i,r),i}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Gf(this);var e=this;return Hf(this,this.render().then((function(t){return new Ot((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){J(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Gf(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Gf(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=lt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},_(Kf,Bf);var Yf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Jf(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Qf(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Zf(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function ed(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function td(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function nd(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function rd(e,t){return m(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function ad(e){return m(e)&&"string"===typeof e.uid}function id(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function od(e,t){for(var n in t){var r=t[n].name;e[r]=cd(r,e[n],t[n].j)}}function ud(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,r){Xf(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function sd(e,t,n,r){e[t]=cd(t,n,r)}function cd(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Xf(i,n,e),t.apply(this,e)}if(!n)return t;var a,i=function(e){return(e=e.split("."))[e.length-1]}(e);for(a in t)r[a]=t[a];for(a in t.prototype)r.prototype[a]=t.prototype[a];return r}od(df.prototype,{kb:{name:"applyActionCode",j:[Jf("code")]},Sa:{name:"checkActionCode",j:[Jf("code")]},ob:{name:"confirmPasswordReset",j:[Jf("code"),Jf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Jf("email"),Jf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Jf("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Jf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[id(Zf(),ed(),"nextOrObserver"),ed("opt_error",!0),ed("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[id(Zf(),ed(),"nextOrObserver"),ed("opt_error",!0),ed("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Jf("email"),id(Zf("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Jf("email"),Zf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Jf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[nd()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[nd()]},Tc:{name:"signInWithCustomToken",j:[Jf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Jf("email"),Jf("password")]},Vc:{name:"signInWithEmailLink",j:[Jf("email"),Jf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Jf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[id({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof jl)}},td(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Jf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Jf("url"),Zf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Jf("code")]}}),ud(df.prototype,{lc:{name:"languageCode",lb:id(Jf(),td(),"languageCode")},ti:{name:"tenantId",lb:id(Jf(),td(),"tenantId")}}),df.Persistence=rc,df.Persistence.LOCAL="local",df.Persistence.SESSION="session",df.Persistence.NONE="none",od(jl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Qf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Qf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[nd()]},rb:{name:"linkWithCredential",j:[nd()]},Dc:{name:"linkWithPhoneNumber",j:[Jf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[nd()]},ub:{name:"reauthenticateWithCredential",j:[nd()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Jf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[id(Zf("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Jf(null,!0)]},cd:{name:"unlink",j:[Jf("provider")]},Cb:{name:"updateEmail",j:[Jf("email")]},Db:{name:"updatePassword",j:[Jf("password")]},ed:{name:"updatePhoneNumber",j:[nd("phone")]},Eb:{name:"updateProfile",j:[Zf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Jf("email"),id(Zf("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]}}),od(Ef.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),od(Sf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),od(Ot.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ud(tl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Qf("appVerificationDisabledForTesting")}}),od(nl.prototype,{confirm:{name:"confirm",j:[Jf("verificationCode")]}}),sd(fi,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[bi,Ni,Mi,vi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[id(Jf(),Zf(),"json")]),sd(Ii,"credential",(function(e,t){return new Ti(e,t)}),[Jf("email"),Jf("password")]),od(Ti.prototype,{w:{name:"toJSON",j:[Jf(null,!0)]}}),od(Oi.prototype,{Ca:{name:"addScope",j:[Jf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),sd(Oi,"credential",ki,[id(Jf(),Zf(),"token")]),sd(Ii,"credentialWithLink",Di,[Jf("email"),Jf("emailLink")]),od(ji.prototype,{Ca:{name:"addScope",j:[Jf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),sd(ji,"credential",_i,[id(Jf(),Zf(),"token")]),od(Si.prototype,{Ca:{name:"addScope",j:[Jf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),sd(Si,"credential",Ei,[id(Jf(),id(Zf(),td()),"idToken"),id(Jf(),td(),"accessToken",!0)]),od(Ci.prototype,{Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),sd(Ci,"credential",Ai,[id(Jf(),Zf(),"token"),Jf("secret",!0)]),od(xi.prototype,{Ca:{name:"addScope",j:[Jf("scope")]},credential:{name:"credential",j:[id(Jf(),id(Zf(),td()),"optionsOrIdToken"),id(Jf(),td(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),od(mi.prototype,{w:{name:"toJSON",j:[Jf(null,!0)]}}),od(hi.prototype,{w:{name:"toJSON",j:[Jf(null,!0)]}}),sd(Li,"credential",zi,[Jf("verificationId"),Jf("verificationCode")]),od(Li.prototype,{gb:{name:"verifyPhoneNumber",j:[id(Jf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?rd(e.session,ci)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?rd(e.session,li)&&ad(e.multiFactorHint):e.session&&e.multiFactorUid?rd(e.session,li)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),od(Fi.prototype,{w:{name:"toJSON",j:[Jf(null,!0)]}}),od(E.prototype,{toJSON:{name:"toJSON",j:[Jf(null,!0)]}}),od(Ki.prototype,{toJSON:{name:"toJSON",j:[Jf(null,!0)]}}),od(Gi.prototype,{toJSON:{name:"toJSON",j:[Jf(null,!0)]}}),od(sl.prototype,{toJSON:{name:"toJSON",j:[Jf(null,!0)]}}),od(il.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),od(pl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Jf("displayName",!0)]},bd:{name:"unenroll",j:[id({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:ad},Jf(),"multiFactorInfoIdentifier")]}}),od(Kf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sd(ka,"parseLink",Na,[Jf("link")]),sd(Df,"assertion",(function(e){return new dl(e)}),[nd("phone")]),function(){if("undefined"===typeof t.a||!t.a.INTERNAL||!t.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fa,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:la,VERIFY_AND_CHANGE_EMAIL:da,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:df,AuthCredential:fi,Error:E};sd(e,"EmailAuthProvider",Ii,[]),sd(e,"FacebookAuthProvider",Oi,[]),sd(e,"GithubAuthProvider",ji,[]),sd(e,"GoogleAuthProvider",Si,[]),sd(e,"TwitterAuthProvider",Ci,[]),sd(e,"OAuthProvider",xi,[Jf("providerId")]),sd(e,"SAMLAuthProvider",wi,[Jf("providerId")]),sd(e,"PhoneAuthProvider",Li,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof df)}}]),sd(e,"RecaptchaVerifier",Kf,[id(Jf(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Zf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.a.app.App)}}]),sd(e,"ActionCodeURL",ka,[]),sd(e,"PhoneMultiFactorGenerator",Df,[]),t.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new df(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),t.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:O((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:O(e.nc,e),addAuthTokenListener:O(e.cc,e),removeAuthTokenListener:O(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.a.registerVersion("@firebase/auth","0.16.8"),t.a.INTERNAL.extendNamespace({User:jl})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(141))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return be})),n.d(t,"creator",(function(){return s})),n.d(t,"local",(function(){return we})),n.d(t,"matcher",(function(){return m})),n.d(t,"mouse",(function(){return je})),n.d(t,"namespace",(function(){return i})),n.d(t,"namespaces",(function(){return a})),n.d(t,"clientPoint",(function(){return ke})),n.d(t,"select",(function(){return ge})),n.d(t,"selectAll",(function(){return _e})),n.d(t,"selection",(function(){return me})),n.d(t,"selector",(function(){return l})),n.d(t,"selectorAll",(function(){return d})),n.d(t,"style",(function(){return I})),n.d(t,"touch",(function(){return Se})),n.d(t,"touches",(function(){return Ee})),n.d(t,"window",(function(){return C})),n.d(t,"event",(function(){return re})),n.d(t,"customEvent",(function(){return ce}));var r="http://www.w3.org/1999/xhtml",a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),a.hasOwnProperty(t)?{space:a[t],local:e}:e};function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var s=function(e){var t=i(e);return(t.local?u:o)(t)};function c(){}var l=function(e){return null==e?c:function(){return this.querySelector(e)}};function f(){return[]}var d=function(e){return null==e?f:function(){return this.querySelectorAll(e)}},h=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var p=document.documentElement;if(!p.matches){var v=p.webkitMatchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector;h=function(e){return function(){return v.call(this,e)}}}}var m=h,g=function(e){return new Array(e.length)};function b(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}b.prototype={constructor:b,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function y(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new b(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function w(e,t,n,r,a,i,o){var u,s,c,l={},f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c="$"+o.call(s,s.__data__,u,t),c in l?a[u]=s:l[c]=s);for(u=0;u<d;++u)(s=l[c="$"+o.call(e,i[u],u,i)])?(r[u]=s,s.__data__=i[u],l[c]=null):n[u]=new b(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l[h[u]]===s&&(a[u]=s)}function x(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function O(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j(e,t){return function(){this.setAttribute(e,t)}}function _(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function S(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function E(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var C=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function A(e){return function(){this.style.removeProperty(e)}}function T(e,t,n){return function(){this.style.setProperty(e,t,n)}}function N(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function I(e,t){return e.style.getPropertyValue(t)||C(e).getComputedStyle(e,null).getPropertyValue(t)}function D(e){return function(){delete this[e]}}function R(e,t){return function(){this[e]=t}}function F(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function M(e){return e.trim().split(/^|\s+/)}function P(e){return e.classList||new L(e)}function L(e){this._node=e,this._names=M(e.getAttribute("class")||"")}function z(e,t){for(var n=P(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function B(e,t){for(var n=P(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function U(e){return function(){z(this,e)}}function W(e){return function(){B(this,e)}}function V(e,t){return function(){(t.apply(this,arguments)?z:B)(this,e)}}L.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function q(){this.textContent=""}function $(e){return function(){this.textContent=e}}function H(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function G(){this.innerHTML=""}function K(e){return function(){this.innerHTML=e}}function X(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Y(){this.nextSibling&&this.parentNode.appendChild(this)}function J(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(){return null}function Z(){var e=this.parentNode;e&&e.removeChild(this)}function ee(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function te(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var ne={},re=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));function ae(e,t,n){return e=ie(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ie(e,t,n){return function(r){var a=re;re=r;try{e.call(this,this.__data__,t,n)}finally{re=a}}}function oe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ue(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function se(e,t,n){var r=ne.hasOwnProperty(e.type)?ae:ie;return function(a,i,o){var u,s=this.__on,c=r(t,i,o);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ce(e,t,n,r){var a=re;e.sourceEvent=re,re=e;try{return t.apply(n,r)}finally{re=a}}function le(e,t,n){var r=C(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function fe(e,t){return function(){return le(this,e,t)}}function de(e,t){return function(){return le(this,e,t.apply(this,arguments))}}var he=[null];function pe(e,t){this._groups=e,this._parents=t}function ve(){return new pe([[document.documentElement]],he)}pe.prototype=ve.prototype={constructor:pe,select:function(e){"function"!==typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),f=0;f<s;++f)(i=u[f])&&(o=e.call(i,i.__data__,f,u))&&("__data__"in i&&(o.__data__=i.__data__),c[f]=o);return new pe(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new pe(r,a)},filter:function(e){"function"!==typeof e&&(e=m(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new pe(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),l=-1,this.each((function(e){p[++l]=e})),p;var n,r=t?w:y,a=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=i.length,u=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var f=a[l],d=i[l],h=d.length,p=e.call(f,f&&f.__data__,l,a),v=p.length,m=s[l]=new Array(v),g=u[l]=new Array(v);r(f,d,m,g,c[l]=new Array(h),p,t);for(var b,x,O=0,k=0;O<v;++O)if(b=m[O]){for(O>=k&&(k=O+1);!(x=g[k])&&++k<v;);b._next=x||null}}return(u=new pe(u,a))._enter=s,u._exit=c,u},enter:function(){return new pe(this._enter||this._groups.map(g),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(g),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),h=0;h<f;++h)(s=c[h]||l[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new pe(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=x);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new pe(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?k:O:"function"===typeof t?n.local?E:S:n.local?_:j)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?A:"function"===typeof t?N:T)(e,t,null==n?"":n)):I(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?D:"function"===typeof t?F:R)(e,t)):this.node()[e]},classed:function(e,t){var n=M(e+"");if(arguments.length<2){for(var r=P(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?V:t?U:W)(n,t))},text:function(e){return arguments.length?this.each(null==e?q:("function"===typeof e?H:$)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?G:("function"===typeof e?X:K)(e)):this.node().innerHTML},raise:function(){return this.each(Y)},lower:function(){return this.each(J)},append:function(e){var t="function"===typeof e?e:s(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:s(e),r=null==t?Q:"function"===typeof t?t:l(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Z)},clone:function(e){return this.select(e?te:ee)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=oe(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?se:ue,null==n&&(n=!1),r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?de:fe)(e,t))}};var me=ve,ge=function(e){return"string"===typeof e?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],he)},be=function(e){return ge(s(e).call(document.documentElement))},ye=0;function we(){return new xe}function xe(){this._="@"+(++ye).toString(36)}xe.prototype=we.prototype={constructor:xe,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Oe=function(){for(var e,t=re;e=t.sourceEvent;)t=e;return t},ke=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]},je=function(e){var t=Oe();return t.changedTouches&&(t=t.changedTouches[0]),ke(e,t)},_e=function(e){return"string"===typeof e?new pe([document.querySelectorAll(e)],[document.documentElement]):new pe([null==e?[]:e],he)},Se=function(e,t,n){arguments.length<3&&(n=t,t=Oe().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return ke(e,r);return null},Ee=function(e,t){null==t&&(t=Oe().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=ke(e,t[n]);return a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(45),a=n(29),i=n(53),o=n.n(i),u=n(5),s=n.n(u),c=n(67),l=n(57),f=["bsPrefix","size","hasValidation","className","as"],d=Object(c.a)("input-group-append"),h=Object(c.a)("input-group-prepend"),p=Object(c.a)("input-group-text",{Component:"span"}),v=s.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,u=e.hasValidation,c=e.className,d=e.as,h=void 0===d?"div":d,p=Object(r.a)(e,f);return n=Object(l.a)(n,"input-group"),s.a.createElement(h,Object(a.a)({ref:t},p,{className:o()(c,n,i&&n+"-"+i,u&&"has-validation")}))}));v.displayName="InputGroup";var m=Object(a.a)({},v,{Text:p,Radio:function(e){return s.a.createElement(p,null,s.a.createElement("input",Object(a.a)({type:"radio"},e)))},Checkbox:function(e){return s.a.createElement(p,null,s.a.createElement("input",Object(a.a)({type:"checkbox"},e)))},Append:d,Prepend:h});t.a=m},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(5),o=n.n(i),u=n(33),s=n.n(u),c=n(455),l=n(300),f=n(234),d=["title","children","bsPrefix","rootCloseEvent","variant","size","menuAlign","menuRole","renderMenuOnMount","disabled","href","id"],h={id:s.a.any,href:s.a.string,onClick:s.a.func,title:s.a.node.isRequired,disabled:s.a.bool,menuAlign:f.a,menuRole:s.a.string,renderMenuOnMount:s.a.bool,rootCloseEvent:s.a.string,bsPrefix:s.a.string,variant:s.a.string,size:s.a.string},p=o.a.forwardRef((function(e,t){var n=e.title,i=e.children,u=e.bsPrefix,s=e.rootCloseEvent,h=e.variant,p=e.size,v=e.menuAlign,m=e.menuRole,g=e.renderMenuOnMount,b=e.disabled,y=e.href,w=e.id,x=Object(a.a)(e,d);return o.a.createElement(c.a,Object(r.a)({ref:t},x),o.a.createElement(l.a,{id:w,href:y,size:p,variant:h,disabled:b,childBsPrefix:u},n),o.a.createElement(f.b,{align:v,role:m,renderOnMount:g,rootCloseEvent:s},i))}));p.displayName="DropdownButton",p.propTypes=h,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return y}));var r=n(96),a=n(72),i=n(212),o=.96422,u=.82521,s=4/29,c=6/29,l=3*c*c;function f(e){if(e instanceof h)return new h(e.l,e.a,e.b,e.opacity);if(e instanceof w)return x(e);e instanceof a.b||(e=Object(a.h)(e));var t,n,r=g(e.r),i=g(e.g),s=g(e.b),c=p((.2225045*r+.7168786*i+.0606169*s)/1);return r===i&&i===s?t=n=c:(t=p((.4360747*r+.3850649*i+.1430804*s)/o),n=p((.0139322*r+.0971045*i+.7141733*s)/u)),new h(116*c-16,500*(t-c),200*(c-n),e.opacity)}function d(e,t,n,r){return 1===arguments.length?f(e):new h(e,t,n,null==r?1:r)}function h(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function p(e){return e>.008856451679035631?Math.pow(e,1/3):e/l+s}function v(e){return e>c?e*e*e:l*(e-s)}function m(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function g(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function b(e){if(e instanceof w)return new w(e.h,e.c,e.l,e.opacity);if(e instanceof h||(e=f(e)),0===e.a&&0===e.b)return new w(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*i.a;return new w(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function y(e,t,n,r){return 1===arguments.length?b(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function x(e){if(isNaN(e.h))return new h(e.l,0,0,e.opacity);var t=e.h*i.b;return new h(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Object(r.a)(h,d,Object(r.b)(a.a,{brighter:function(e){return new h(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new h(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=o*v(t),e=1*v(e),n=u*v(n),new a.b(m(3.1338561*t-1.6168667*e-.4906146*n),m(-.9787684*t+1.9161415*e+.033454*n),m(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Object(r.a)(w,y,Object(r.b)(a.a,{brighter:function(e){return new w(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new w(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return x(this).rgb()}}))},function(e,t,n){"use strict";var r={value:function(){}};function a(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function u(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var a=0,i=e.length;a<i;++a)if(e[a].name===t){e[a]=r,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=n&&e.push({name:t,value:n}),e}i.prototype=a.prototype={constructor:i,on:function(e,t){var n,r=this._,a=o(e+"",r),i=-1,c=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<c;)if(n=(e=a[i]).type)r[n]=s(r[n],e.name,t);else if(null==t)for(n in r)r[n]=s(r[n],e.name,null);return this}for(;++i<c;)if((n=(e=a[i]).type)&&(n=u(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new i(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}},t.a=a},function(e,t,n){"use strict";var r,a=n(45),i=n(29),o=n(53),u=n.n(o),s=n(204),c=n(158),l=n(103),f=n(230);function d(e){if((!r&&0!==r||e)&&c.a){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r}var h=n(295),p=n(66),v=n(311);function m(e,t){return function(e){var t=Object(l.a)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var g=/([A-Z])/g;var b=/^ms-/;function y(e){return function(e){return e.replace(g,"-$1").toLowerCase()}(e).replace(b,"-ms-")}var w=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var x=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(y(t))||m(e).getPropertyValue(y(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!w.test(e))}(a)?n+=y(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(y(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},O=n(120);function k(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),i=Object(O.a)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}function j(e,t,n,r){null==n&&(n=function(e){var t=x(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=k(e,n,r),i=Object(O.a)(e,"transitionend",t);return function(){a(),i()}}var _=n(5),S=n.n(_);function E(e){void 0===e&&(e=Object(l.a)());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(n){return e.body}}var C=n(231),A=n(33),T=n.n(A),N=n(93),I=n.n(N),D=n(296),R=n(297),F=n(210);function M(e,t){e.classList?e.classList.add(t):Object(F.a)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function P(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function L(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=P(e.className,t):e.setAttribute("class",P(e.className&&e.className.baseVal||"",t))}function z(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function B(e){var t;return z(e)||(t=e)&&"body"===t.tagName.toLowerCase()?function(e){var t=z(e)?Object(l.a)():Object(l.a)(e),n=z(e)||t.defaultView;return t.body.clientWidth<n.innerWidth}(e):e.scrollHeight>e.clientHeight}var U=["template","script","style"],W=function(e,t,n){[].forEach.call(e.children,(function(e){-1===t.indexOf(e)&&function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===U.indexOf(n.toLowerCase())}(e)&&n(e)}))};function V(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}var q,$=function(){function e(e){var t=void 0===e?{}:e,n=t.hideSiblingNodes,r=void 0===n||n,a=t.handleContainerOverflow,i=void 0===a||a;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=r,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=d()}var t=e.prototype;return t.isContainerOverflowing=function(e){var t=this.data[this.containerIndexFromModal(e)];return t&&t.overflowing},t.containerIndexFromModal=function(e){return function(e,t){var n=-1;return e.some((function(e,r){return!!t(e,r)&&(n=r,!0)})),n}(this.data,(function(t){return-1!==t.modals.indexOf(e)}))},t.setContainerStyle=function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt(x(t,"paddingRight")||"0",10)+this.scrollbarSize+"px"),x(t,n)},t.removeContainerStyle=function(e,t){Object.assign(t.style,e.style)},t.add=function(e,t,n){var r=this.modals.indexOf(e),a=this.containers.indexOf(t);if(-1!==r)return r;if(r=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,t){var n=t.dialog,r=t.backdrop;W(e,[n,r],(function(e){return V(!0,e)}))}(t,e),-1!==a)return this.data[a].modals.push(e),r;var i={modals:[e],classes:n?n.split(/\s+/):[],overflowing:B(t)};return this.handleContainerOverflow&&this.setContainerStyle(i,t),i.classes.forEach(M.bind(null,t)),this.containers.push(t),this.data.push(i),r},t.remove=function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=this.containerIndexFromModal(e),r=this.data[n],a=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.classes.forEach(L.bind(null,a)),this.handleContainerOverflow&&this.removeContainerStyle(r,a),this.hideSiblingNodes&&function(e,t){var n=t.dialog,r=t.backdrop;W(e,[n,r],(function(e){return V(!1,e)}))}(a,e),this.containers.splice(n,1),this.data.splice(n,1);else if(this.hideSiblingNodes){var i=r.modals[r.modals.length-1],o=i.backdrop;V(!1,i.dialog),V(!1,o)}}},t.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),H=function(e){var t;return"undefined"===typeof document?null:null==e?Object(l.a)().body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function G(e){var t=e||(q||(q=new $),q),n=Object(_.useRef)({dialog:null,backdrop:null});return Object.assign(n.current,{add:function(e,r){return t.add(n.current,e,r)},remove:function(){return t.remove(n.current)},isTopModal:function(){return t.isTopModal(n.current)},setDialogRef:Object(_.useCallback)((function(e){n.current.dialog=e}),[]),setBackdropRef:Object(_.useCallback)((function(e){n.current.backdrop=e}),[])})}var K=Object(_.forwardRef)((function(e,t){var n=e.show,r=void 0!==n&&n,o=e.role,u=void 0===o?"dialog":o,s=e.className,l=e.style,f=e.children,d=e.backdrop,h=void 0===d||d,m=e.keyboard,g=void 0===m||m,b=e.onBackdropClick,y=e.onEscapeKeyDown,w=e.transition,x=e.backdropTransition,k=e.autoFocus,j=void 0===k||k,A=e.enforceFocus,T=void 0===A||A,N=e.restoreFocus,F=void 0===N||N,M=e.restoreFocusOptions,P=e.renderDialog,L=e.renderBackdrop,z=void 0===L?function(e){return S.a.createElement("div",e)}:L,B=e.manager,U=e.container,W=e.containerClassName,V=e.onShow,q=e.onHide,$=void 0===q?function(){}:q,K=e.onExit,X=e.onExited,Y=e.onExiting,J=e.onEnter,Q=e.onEntering,Z=e.onEntered,ee=Object(a.a)(e,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),te=function(e,t){var n=Object(_.useState)((function(){return H(e)})),r=n[0],a=n[1];if(!r){var i=H(e);i&&a(i)}return Object(_.useEffect)((function(){t&&r&&t(r)}),[t,r]),Object(_.useEffect)((function(){var t=H(e);t!==r&&a(t)}),[e,r]),r}(U),ne=G(B),re=Object(D.a)(),ae=Object(R.a)(r),ie=Object(_.useState)(!r),oe=ie[0],ue=ie[1],se=Object(_.useRef)(null);Object(_.useImperativeHandle)(t,(function(){return ne}),[ne]),c.a&&!ae&&r&&(se.current=E()),w||r||oe?r&&oe&&ue(!1):ue(!0);var ce=Object(p.a)((function(){if(ne.add(te,W),ve.current=Object(O.a)(document,"keydown",he),pe.current=Object(O.a)(document,"focus",(function(){return setTimeout(fe)}),!0),V&&V(),j){var e=E(document);ne.dialog&&e&&!Object(C.a)(ne.dialog,e)&&(se.current=e,ne.dialog.focus())}})),le=Object(p.a)((function(){var e;(ne.remove(),null==ve.current||ve.current(),null==pe.current||pe.current(),F)&&(null==(e=se.current)||null==e.focus||e.focus(M),se.current=null)}));Object(_.useEffect)((function(){r&&te&&ce()}),[r,te,ce]),Object(_.useEffect)((function(){oe&&le()}),[oe,le]),Object(v.a)((function(){le()}));var fe=Object(p.a)((function(){if(T&&re()&&ne.isTopModal()){var e=E();ne.dialog&&e&&!Object(C.a)(ne.dialog,e)&&ne.dialog.focus()}})),de=Object(p.a)((function(e){e.target===e.currentTarget&&(null==b||b(e),!0===h&&$())})),he=Object(p.a)((function(e){g&&27===e.keyCode&&ne.isTopModal()&&(null==y||y(e),e.defaultPrevented||$())})),pe=Object(_.useRef)(),ve=Object(_.useRef)(),me=w;if(!te||!(r||me&&!oe))return null;var ge=Object(i.a)({role:u,ref:ne.setDialogRef,"aria-modal":"dialog"===u||void 0},ee,{style:l,className:s,tabIndex:-1}),be=P?P(ge):S.a.createElement("div",ge,S.a.cloneElement(f,{role:"document"}));me&&(be=S.a.createElement(me,{appear:!0,unmountOnExit:!0,in:!!r,onExit:K,onExiting:Y,onExited:function(){ue(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==X||X.apply(void 0,t)},onEnter:J,onEntering:Q,onEntered:Z},be));var ye=null;if(h){var we=x;ye=z({ref:ne.setBackdropRef,onClick:de}),we&&(ye=S.a.createElement(we,{appear:!0,in:!!r},ye))}return S.a.createElement(S.a.Fragment,null,I.a.createPortal(S.a.createElement(S.a.Fragment,null,ye,be),te))})),X={show:T.a.bool,container:T.a.any,onShow:T.a.func,onHide:T.a.func,backdrop:T.a.oneOfType([T.a.bool,T.a.oneOf(["static"])]),renderDialog:T.a.func,renderBackdrop:T.a.func,onEscapeKeyDown:T.a.func,onBackdropClick:T.a.func,containerClassName:T.a.string,keyboard:T.a.bool,transition:T.a.elementType,backdropTransition:T.a.elementType,autoFocus:T.a.bool,enforceFocus:T.a.bool,restoreFocus:T.a.bool,restoreFocusOptions:T.a.shape({preventScroll:T.a.bool}),onEnter:T.a.func,onEntering:T.a.func,onEntered:T.a.func,onExit:T.a.func,onExiting:T.a.func,onExited:T.a.func,manager:T.a.instanceOf($)};K.displayName="Modal",K.propTypes=X;var Y=Object.assign(K,{Manager:$}),J=(n(222),n(86)),Q=n(133),Z=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ee=".sticky-top",te=".navbar-toggler",ne=function(e){function t(){return e.apply(this,arguments)||this}Object(J.a)(t,e);var n=t.prototype;return n.adjustAndStore=function(e,t,n){var r,a=t.style[e];t.dataset[e]=a,x(t,((r={})[e]=parseFloat(x(t,e))+n+"px",r))},n.restore=function(e,t){var n,r=t.dataset[e];void 0!==r&&(delete t.dataset[e],x(t,((n={})[e]=r,n)))},n.setContainerStyle=function(t,n){var r=this;if(e.prototype.setContainerStyle.call(this,t,n),t.overflowing){var a=d();Object(Q.a)(n,Z).forEach((function(e){return r.adjustAndStore("paddingRight",e,a)})),Object(Q.a)(n,ee).forEach((function(e){return r.adjustAndStore("marginRight",e,-a)})),Object(Q.a)(n,te).forEach((function(e){return r.adjustAndStore("marginRight",e,a)}))}},n.removeContainerStyle=function(t,n){var r=this;e.prototype.removeContainerStyle.call(this,t,n),Object(Q.a)(n,Z).forEach((function(e){return r.restore("paddingRight",e)})),Object(Q.a)(n,ee).forEach((function(e){return r.restore("marginRight",e)})),Object(Q.a)(n,te).forEach((function(e){return r.restore("marginRight",e)}))},t}($),re=!1,ae=S.a.createContext(null),ie="unmounted",oe="exited",ue="entering",se="entered",ce="exiting",le=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=oe,r.appearStatus=ue):a=se:a=t.unmountOnExit||t.mountOnEnter?ie:oe,r.state={status:a},r.nextCallback=null,r}Object(J.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ie?{status:oe}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ue&&n!==se&&(t=ue):n!==ue&&n!==se||(t=ce)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===ue?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===oe&&this.setState({status:ie})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[I.a.findDOMNode(this),r],i=a[0],o=a[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||re?this.safeSetState({status:se},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:ue},(function(){t.props.onEntering(i,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:se},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:I.a.findDOMNode(this);t&&!re?(this.props.onExit(r),this.safeSetState({status:ce},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:oe},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:oe},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:I.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ie)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(a.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return S.a.createElement(ae.Provider,{value:null},"function"===typeof n?n(e,r):S.a.cloneElement(S.a.Children.only(n),r))},t}(S.a.Component);function fe(){}le.contextType=ae,le.propTypes={},le.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fe,onEntering:fe,onEntered:fe,onExit:fe,onExiting:fe,onExited:fe},le.UNMOUNTED=ie,le.EXITED=oe,le.ENTERING=ue,le.ENTERED=se,le.EXITING=ce;var de=le;function he(e,t){var n=x(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function pe(e,t){var n=he(e,"transitionDuration"),r=he(e,"transitionDelay"),a=j(e,(function(n){n.target===e&&(a(),t(n))}),n+r)}var ve,me=["className","children"],ge=((ve={}).entering="show",ve.entered="show",ve),be=S.a.forwardRef((function(e,t){var n=e.className,r=e.children,o=Object(a.a)(e,me),s=Object(_.useCallback)((function(e){!function(e){e.offsetHeight}(e),o.onEnter&&o.onEnter(e)}),[o]);return S.a.createElement(de,Object(i.a)({ref:t,addEndListener:pe},o,{onEnter:s}),(function(e,t){return S.a.cloneElement(r,Object(i.a)({},t,{className:u()("fade",n,r.props.className,ge[e])}))}))}));be.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},be.displayName="Fade";var ye=be,we=n(67),xe=Object(we.a)("modal-body"),Oe=S.a.createContext({onHide:function(){}}),ke=n(57),je=["bsPrefix","className","contentClassName","centered","size","children","scrollable"],_e=S.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.contentClassName,s=e.centered,c=e.size,l=e.children,f=e.scrollable,d=Object(a.a)(e,je),h=(n=Object(ke.a)(n,"modal"))+"-dialog";return S.a.createElement("div",Object(i.a)({},d,{ref:t,className:u()(h,r,c&&n+"-"+c,s&&h+"-centered",f&&h+"-scrollable")}),S.a.createElement("div",{className:u()(n+"-content",o)},l))}));_e.displayName="ModalDialog";var Se=_e,Ee=Object(we.a)("modal-footer"),Ce=["label","onClick","className"],Ae={label:T.a.string.isRequired,onClick:T.a.func},Te=S.a.forwardRef((function(e,t){var n=e.label,r=e.onClick,o=e.className,s=Object(a.a)(e,Ce);return S.a.createElement("button",Object(i.a)({ref:t,type:"button",className:u()("close",o),onClick:r},s),S.a.createElement("span",{"aria-hidden":"true"},"\xd7"),S.a.createElement("span",{className:"sr-only"},n))}));Te.displayName="CloseButton",Te.propTypes=Ae,Te.defaultProps={label:"Close"};var Ne=Te,Ie=["bsPrefix","closeLabel","closeButton","onHide","className","children"],De=S.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.closeLabel,o=e.closeButton,s=e.onHide,c=e.className,l=e.children,f=Object(a.a)(e,Ie);n=Object(ke.a)(n,"modal-header");var d=Object(_.useContext)(Oe),h=Object(p.a)((function(){d&&d.onHide(),s&&s()}));return S.a.createElement("div",Object(i.a)({ref:t},f,{className:u()(c,n)}),l,o&&S.a.createElement(Ne,{label:r,onClick:h}))}));De.displayName="ModalHeader",De.defaultProps={closeLabel:"Close",closeButton:!1};var Re,Fe=De,Me=n(229),Pe=Object(Me.a)("h4"),Le=Object(we.a)("modal-title",{Component:Pe}),ze=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],Be={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:Se};function Ue(e){return S.a.createElement(ye,Object(i.a)({},e,{timeout:null}))}function We(e){return S.a.createElement(ye,Object(i.a)({},e,{timeout:null}))}var Ve=S.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.style,m=e.dialogClassName,g=e.contentClassName,b=e.children,y=e.dialogAs,w=e["aria-labelledby"],x=e.show,O=e.animation,k=e.backdrop,E=e.keyboard,C=e.onEscapeKeyDown,A=e.onShow,T=e.onHide,N=e.container,I=e.autoFocus,D=e.enforceFocus,R=e.restoreFocus,F=e.restoreFocusOptions,M=e.onEntered,P=e.onExit,L=e.onExiting,z=e.onEnter,B=e.onEntering,U=e.onExited,W=e.backdropClassName,V=e.manager,q=Object(a.a)(e,ze),$=Object(_.useState)({}),H=$[0],G=$[1],K=Object(_.useState)(!1),X=K[0],J=K[1],Q=Object(_.useRef)(!1),Z=Object(_.useRef)(!1),ee=Object(_.useRef)(null),te=Object(h.a)(),re=te[0],ae=te[1],ie=Object(p.a)(T);n=Object(ke.a)(n,"modal"),Object(_.useImperativeHandle)(t,(function(){return{get _modal(){return re}}}),[re]);var oe=Object(_.useMemo)((function(){return{onHide:ie}}),[ie]);function ue(){return V||(Re||(Re=new ne),Re)}function se(e){if(c.a){var t=ue().isContainerOverflowing(re),n=e.scrollHeight>Object(l.a)(e).documentElement.clientHeight;G({paddingRight:t&&!n?d():void 0,paddingLeft:!t&&n?d():void 0})}}var ce=Object(p.a)((function(){re&&se(re.dialog)}));Object(v.a)((function(){Object(f.a)(window,"resize",ce),ee.current&&ee.current()}));var le=function(){Q.current=!0},fe=function(e){Q.current&&re&&e.target===re.dialog&&(Z.current=!0),Q.current=!1},de=function(){J(!0),ee.current=j(re.dialog,(function(){J(!1)}))},he=function(e){"static"!==k?Z.current||e.target!==e.currentTarget?Z.current=!1:T():function(e){e.target===e.currentTarget&&de()}(e)},pe=Object(_.useCallback)((function(e){return S.a.createElement("div",Object(i.a)({},e,{className:u()(n+"-backdrop",W,!O&&"show")}))}),[O,W,n]),ve=Object(i.a)({},o,H);O||(ve.display="block");return S.a.createElement(Oe.Provider,{value:oe},S.a.createElement(Y,{show:x,ref:ae,backdrop:k,container:N,keyboard:!0,autoFocus:I,enforceFocus:D,restoreFocus:R,restoreFocusOptions:F,onEscapeKeyDown:function(e){E||"static"!==k?E&&C&&C(e):(e.preventDefault(),de())},onShow:A,onHide:T,onEnter:function(e){e&&(e.style.display="block",se(e));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];z&&z.apply(void 0,[e].concat(n))},onEntering:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];B&&B.apply(void 0,[e].concat(n)),Object(s.a)(window,"resize",ce)},onEntered:M,onExit:function(e){ee.current&&ee.current();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];P&&P.apply(void 0,[e].concat(n))},onExiting:L,onExited:function(e){e&&(e.style.display="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];U&&U.apply(void 0,n),Object(f.a)(window,"resize",ce)},manager:ue(),containerClassName:n+"-open",transition:O?Ue:void 0,backdropTransition:O?We:void 0,renderBackdrop:pe,renderDialog:function(e){return S.a.createElement("div",Object(i.a)({role:"dialog"},e,{style:ve,className:u()(r,n,X&&n+"-static"),onClick:k?he:void 0,onMouseUp:fe,"aria-labelledby":w}),S.a.createElement(y,Object(i.a)({},q,{onMouseDown:le,className:m,contentClassName:g}),b))}}))}));Ve.displayName="Modal",Ve.defaultProps=Be,Ve.Body=xe,Ve.Header=Fe,Ve.Title=Le,Ve.Footer=Ee,Ve.Dialog=Se,Ve.TRANSITION_DURATION=300,Ve.BACKDROP_TRANSITION_DURATION=150;t.a=Ve},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(53),o=n.n(i),u=n(5),s=n.n(u),c=n(57),l=n(67),f=n(229),d=s.a.createContext(null);d.displayName="CardContext";var h=d,p=["bsPrefix","className","variant","as"],v=s.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,u=e.variant,l=e.as,f=void 0===l?"img":l,d=Object(a.a)(e,p),h=Object(c.a)(n,"card-img");return s.a.createElement(f,Object(r.a)({ref:t,className:o()(u?h+"-"+u:h,i)},d))}));v.displayName="CardImg",v.defaultProps={variant:null};var m=v,g=["bsPrefix","className","bg","text","border","body","children","as"],b=Object(f.a)("h5"),y=Object(f.a)("h6"),w=Object(l.a)("card-body"),x=Object(l.a)("card-title",{Component:b}),O=Object(l.a)("card-subtitle",{Component:y}),k=Object(l.a)("card-link",{Component:"a"}),j=Object(l.a)("card-text",{Component:"p"}),_=Object(l.a)("card-header"),S=Object(l.a)("card-footer"),E=Object(l.a)("card-img-overlay"),C=s.a.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,l=e.bg,f=e.text,d=e.border,p=e.body,v=e.children,m=e.as,b=void 0===m?"div":m,y=Object(a.a)(e,g),x=Object(c.a)(n,"card"),O=Object(u.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return s.a.createElement(h.Provider,{value:O},s.a.createElement(b,Object(r.a)({ref:t},y,{className:o()(i,x,l&&"bg-"+l,f&&"text-"+f,d&&"border-"+d)}),p?s.a.createElement(w,null,v):v))}));C.displayName="Card",C.defaultProps={body:!1},C.Img=m,C.Title=x,C.Subtitle=O,C.Body=w,C.Link=k,C.Text=j,C.Header=_,C.Footer=S,C.ImgOverlay=E;t.a=C},function(e,t,n){"use strict";var r=n(29),a=n(45),i=n(53),o=n.n(i),u=(n(547),n(5)),s=n.n(u),c=(n(222),n(33)),l=n.n(c),f=["as","className","type","tooltip"],d={type:l.a.string,tooltip:l.a.bool,as:l.a.elementType},h=s.a.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,u=e.className,c=e.type,l=void 0===c?"valid":c,d=e.tooltip,h=void 0!==d&&d,p=Object(a.a)(e,f);return s.a.createElement(i,Object(r.a)({},p,{ref:t,className:o()(u,l+"-"+(h?"tooltip":"feedback"))}))}));h.displayName="Feedback",h.propTypes=d;var p=h,v=s.a.createContext({controlId:void 0}),m=n(57),g=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],b=s.a.forwardRef((function(e,t){var n,i,c=e.bsPrefix,l=e.bsCustomPrefix,f=e.type,d=e.size,h=e.htmlSize,p=e.id,b=e.className,y=e.isValid,w=void 0!==y&&y,x=e.isInvalid,O=void 0!==x&&x,k=e.plaintext,j=e.readOnly,_=e.custom,S=e.as,E=void 0===S?"input":S,C=Object(a.a)(e,g),A=Object(u.useContext)(v).controlId,T=_?[l,"custom"]:[c,"form-control"],N=T[0],I=T[1];if(c=Object(m.a)(N,I),k)(i={})[c+"-plaintext"]=!0,n=i;else if("file"===f){var D;(D={})[c+"-file"]=!0,n=D}else if("range"===f){var R;(R={})[c+"-range"]=!0,n=R}else if("select"===E&&_){var F;(F={})[c+"-select"]=!0,F[c+"-select-"+d]=d,n=F}else{var M;(M={})[c]=!0,M[c+"-"+d]=d,n=M}return s.a.createElement(E,Object(r.a)({},C,{type:f,size:h,ref:t,readOnly:j,id:p||A,className:o()(b,n,w&&"is-valid",O&&"is-invalid")}))}));b.displayName="FormControl";t.a=Object.assign(b,{Feedback:p})}]]);
//# sourceMappingURL=6.516445c6.chunk.js.map